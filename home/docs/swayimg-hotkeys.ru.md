# Горячие клавиши swayimg

Пользовательские бинды описаны в `modules/media/images/swayimg/conf/bindings.conf` и вызывают скрипт
`~/.local/bin/swayimg-actions.sh`. В таблицах ниже перечислены все нестандартные сочетания, которые
используют этот помощник. Если не указано обратное, сочетание действует на текущий файл в
соответствующем режиме.

Скрипт теперь мгновенно отделяется от swayimg, поэтому долгие перемещения или подготовка обоев не
подвешивают сам просмотрщик. Каждое действие показывает короткий статус (оверлей в правом нижнем
углу) с описанием операции — например, сколько файлов перенесено и куда. Если нужно выполнить скрипт
синхронно из терминала, перед запуском задайте `SWAYIMG_ACTIONS_SYNC=1`.

Для отладки установите `SWAYIMG_ACTIONS_DEBUG=1` перед запуском swayimg — лог (включая ошибки
`wl-copy`) попадёт в `~/tmp/swayimg-actions.log`. Значение `SWAYIMG_ACTIONS_DEBUG=stderr`
дополнительно продублирует строки в терминал, но файл всё равно будет пополняться (удобно читать
через `tail -f ~/tmp/swayimg-actions.log`).

## Режим просмотра (Viewer)

| Клавиша | Действие скрипта | Что происходит | | --- | ------------- | --------------- | | `Ctrl+1`
| `wall-mono` | Преобразовать кадр в две палитры и отправить его в `swww` как обои. | | `Ctrl+2` |
`wall-fill` | Масштабировать/обрезать кадр по центру во весь экран и сделать его обоями. | |
`Ctrl+3` | `wall-full` | Алиас `wall-fill` для старых привычек. | | `Ctrl+4` | `wall-tile` | Создать
плитку по размеру экрана и выставить её как обои. | | `Ctrl+5` | `wall-center` | Центрировать
изображение на холсте обоев с чёрными полями. | | `Ctrl+w` | `wall-cover` | Покрыть монитор
изображением (обрезка по центру) и применить как обои. | | `Ctrl+c` | `cp` | Скопировать файл в
каталог, выбранный через rofi. | | `c` | `copyname` | Скопировать абсолютный путь файла в буфер и,
если доступен, показать `pic-notify`. | | `Ctrl+d`, `d` | `mv … $HOME/trash/1st-level/pic` |
Переместить файл в подготовленную корзину. | | `v` | `mv` | Переместить файл в каталог, выбранный
через rofi. | | `Ctrl+comma` | `rotate-left` | Повернуть файл на 270° при помощи ImageMagick. | |
`Ctrl+less` | `rotate-ccw` | Повернуть файл на 90° против часовой стрелки. | | `Ctrl+period` |
`rotate-right` | Повернуть файл на 90° по часовой стрелке. | | `Ctrl+slash` | `rotate-180` |
Повернуть файл на 180°. | | `r` | `repeat` | Повторить последний `mv`/`cp`, используя закешированный
каталог назначения. | | `Shift+m` | `range-mark` | Поставить метку диапазона на текущем файле
(начало или конец). | | `Shift+r` | `range-clear` | Сбросить сохранённую метку диапазона. | |
`Shift+d` | `range-trash` | Переместить все файлы между меткой и текущим в корзину. | | `Shift+v` |
`range-mv` | Спросить каталог через rofi и переместить в него диапазон. | | `Shift+c` | `range-cp` |
Спросить каталог через rofi и скопировать туда диапазон. |

## Режим галереи (Gallery)

| Клавиша | Действие скрипта | Что происходит | | --- | ------------- | --------------- | | `c` |
`copyname` | Скопировать абсолютный путь выделенного файла. | | `Ctrl+c` | `cp` | Скопировать
выделенный файл в каталог из rofi. | | `Ctrl+d`, `d` | `mv … $HOME/trash/1st-level/pic` | Отправить
выделенный файл в подготовленную корзину. | | `r` | `repeat` | Повторить предыдущий
перенос/копирование в сохранённую папку. | | `v` | `mv` | Переместить выделенный файл через rofi. |
| `Ctrl+comma` | `rotate-left` | Повернуть выделенный файл на 270°. | | `Ctrl+less` | `rotate-ccw` |
Повернуть выделенный файл на 90° против часовой. | | `Ctrl+period` | `rotate-right` | Повернуть
выделенный файл на 90° по часовой. | | `Ctrl+slash` | `rotate-180` | Повернуть выделенный файл на
180°. | | `Ctrl+1` | `wall-mono` | Отправить выделенное изображение в `swww` в монохромном режиме. |
| `Ctrl+2` | `wall-fill` | Развернуть изображение на весь экран и сделать обои. | | `Ctrl+3` |
`wall-full` | Алиас `wall-fill`. | | `Ctrl+4` | `wall-tile` | Разложить изображение плиткой и
применить как обои. | | `Ctrl+5` | `wall-center` | Центрировать изображение на холсте обоев. | |
`Ctrl+w` | `wall-cover` | Покрыть монитор выделенным изображением и применить как обои. | |
`Shift+m` | `range-mark` | Пометить текущую миниатюру как границу диапазона. | | `Shift+r` |
`range-clear` | Сбросить метку диапазона. | | `Shift+d` | `range-trash` | Отправить целый диапазон
(включительно) в корзину. | | `Shift+v` | `range-mv` | Спросить каталог и переместить в него
диапазон. | | `Shift+c` | `range-cp` | Спросить каталог и скопировать туда диапазон. |

## Режим слайдшоу (Slideshow)

| Клавиша | Действие скрипта | Что происходит | | --- | ------------- | --------------- | | `Ctrl+d`
| `mv … $HOME/trash/1st-level/pic` | Отправить текущий кадр в подготовленную корзину. | | `Shift+m`
| `range-mark` | Поставить/перенести метку диапазона (используется в других режимах). | | `Shift+r`
| `range-clear` | Сбросить сохранённую метку диапазона. | | `Shift+d` | `range-trash` | Удалить
диапазон между меткой и текущим кадром. | | `Shift+v` | `range-mv` | Спросить каталог и переместить
диапазон. | | `Shift+c` | `range-cp` | Спросить каталог и скопировать диапазон. |

### Заметки

- Скрипт блокирует операции с путями внутри репозиториев (`_is_vcs_path`), чтобы не трогать рабочие
  деревья Git/Hg/SVN/Bzr.
- Обойные действия используют `swww`: демон запускается по требованию, а вызовы сериализуются через
  каталог-блокировку, чтобы несколько экземпляров не конфликтовали.
- Диапазоны работают только при запуске через `sx`/`swayimg-first.sh`, потому что скрипту нужен
  сеансовый плейлист (`$XDG_DATA_HOME/swayimg/<session>.list`) и файл метки диапазона.
