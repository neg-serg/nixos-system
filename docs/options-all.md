# Options

- _module.args: Additional arguments passed to each module in addition to ones
like `lib`, `config`,
and `pkgs`, `modulesPath`.

This option is also available to all submodules. Submodules do not
inherit args from their parent module, nor do they provide args to
their parent module or sibling submodules. The sole exception to
this is the argument `name` which is provided by
parent modules to a submodule and contains the attribute name
the submodule is bound to, or a unique generated name if it is
not bound to an attribute.

Some arguments are already passed by default, of which the
following *cannot* be changed with this option:
- {var}`lib`: The nixpkgs library.
- {var}`config`: The results of all options after merging the values from all modules together.
- {var}`options`: The options declared in all modules.
- {var}`specialArgs`: The `specialArgs` argument passed to `evalModules`.
- All attributes of {var}`specialArgs`

  Whereas option values can generally depend on other option values
  thanks to laziness, this does not apply to `imports`, which
  must be computed statically before anything else.

  For this reason, callers of the module system can provide `specialArgs`
  which are available during import resolution.

  For NixOS, `specialArgs` includes
  {var}`modulesPath`, which allows you to import
  extra modules from the nixpkgs package tree without having to
  somehow make the module aware of the location of the
  `nixpkgs` or NixOS directories.
  ```
  { modulesPath, ... }: {
    imports = [
      (modulesPath + "/profiles/minimal.nix")
    ];
  }
  ```

For NixOS, the default value for this option includes at least this argument:
- {var}`pkgs`: The nixpkgs package set according to
  the {option}`nixpkgs.pkgs` option.

- _module.check: Whether to check whether all option definitions have matching declarations.
- _module.freeformType: If set, merge all definitions that don't have an associated option
together using this type. The result then gets combined with the
values of all declared options to produce the final `
config` value.

If this is `null`, definitions without an option
will throw an error unless {option}`_module.check` is
turned off.

- _module.specialArgs: Externally provided module arguments that can't be modified from
within a configuration, but can be used in module imports.

- appstream.enable: Whether to install files to support the
[AppStream metadata specification](https://www.freedesktop.org/software/appstream/docs/index.html).

- assertions: This option allows modules to express conditions that must
hold for the evaluation of the system configuration to
succeed, along with associated error messages for the user.

- boot.bcache.enable: Whether to enable bcache mount support.
- boot.bcachefs.modulePackage
- boot.bcachefs.package: The bcachefs-tools package to use. This package should also provide a passthru 'kernelModule'
attribute to build the out-of-tree kernel module.

- boot.binfmt.addEmulatedSystemsToNixSandbox: Whether to add the {option}`boot.binfmt.emulatedSystems` to {option}`nix.settings.extra-platforms`.
Disable this to use remote builders for those platforms, while allowing testing binaries locally.

- boot.binfmt.emulatedSystems: List of systems to emulate. Will also configure Nix to
support your new systems.
Warning: the builder can execute all emulated systems within the same build, which introduces impurities in the case of cross compilation.

- boot.binfmt.preferStaticEmulators: Whether to use static emulators when available.

This enables the kernel to preload the emulator binaries when
the binfmt registrations are added, obviating the need to make
the emulator binaries available inside chroots and chroot-like
sandboxes.

- boot.binfmt.registrations: Extra binary formats to register with the kernel.
See <https://www.kernel.org/doc/html/latest/admin-guide/binfmt-misc.html> for more details.

- boot.binfmtMiscRegistrations: Alias of {option}`boot.binfmt.registrations`.
- boot.blacklistedKernelModules: Set of names of kernel modules that should not be loaded
automatically by the hardware probing code. This can either be
a list of modules or an attrset. In an attrset, names that are
set to `true` represent modules that will be blacklisted.

- boot.bootMount: Alias of {option}`boot.loader.grub.bootDevice`.
- boot.bootspec.enable: Whether to enable the generation of RFC-0125 bootspec in $system/boot.json, e.g. /run/current-system/boot.json.
- boot.bootspec.enableValidation: Whether to enable the validation of bootspec documents for each build.
      This will introduce Go in the build-time closure as we are relying on [Cuelang](https://cuelang.org/) for schema validation.
      Enable this option if you want to ascertain that your documents are correct
.
- boot.bootspec.extensions: User-defined data that extends the bootspec document.

To reduce incompatibility and prevent names from clashing
between applications, it is **highly recommended** to use a
unique namespace for your extensions.

- boot.bootspec.filename
- boot.bootspec.package: The bootspec package to use.
- boot.bootspec.validator
- boot.bootspec.writer
- boot.cleanTmpDir: Alias of {option}`boot.tmp.cleanOnBoot`.
- boot.consoleLogLevel: The kernel console `loglevel`. All Kernel Messages with a log level smaller
than this setting will be printed to the console.

- boot.copyKernels: Alias of {option}`boot.loader.grub.copyKernels`.
- boot.crashDump.enable: If enabled, NixOS will set up a kernel that will
boot on crash, and leave the user in systemd rescue
to be able to save the crashed kernel dump at
/proc/vmcore.
It also activates the NMI watchdog.

- boot.crashDump.kernelParams: Parameters that will be passed to the kernel kexec-ed on crash.

- boot.crashDump.reservedMemory: The amount of memory reserved for the crashdump kernel.
If you choose a too high value, dmesg will mention
"crashkernel reservation failed".

- boot.devShmSize: Size limit for the /dev/shm tmpfs. Look at {manpage}`mount(8)`, tmpfs size option,
for the accepted syntax.

- boot.devSize: Size limit for the /dev tmpfs. Look at {manpage}`mount(8)`, tmpfs size option,
for the accepted syntax.

- boot.earlyVconsoleSetup: Alias of {option}`console.earlySetup`.
- boot.enableContainers: Whether to enable support for NixOS containers.

- boot.extraGrubEntries: Alias of {option}`boot.loader.grub.extraEntries`.
- boot.extraGrubEntriesBeforeNixos: Alias of {option}`boot.loader.grub.extraEntriesBeforeNixOS`.
- boot.extraModprobeConfig: Any additional configuration to be appended to the generated
{file}`modprobe.conf`.  This is typically used to
specify module options.  See
{manpage}`modprobe.d(5)` for details.

- boot.extraModulePackages: A list of additional packages supplying kernel modules.
- boot.extraSystemdUnitPaths: Additional paths that get appended to the SYSTEMD_UNIT_PATH environment variable
that can contain mutable unit files.

- boot.extraTTYs: Alias of {option}`console.extraTTYs`.
- boot.growPartition: Whether to enable growing the root partition on boot.
- boot.grubDevice: Alias of {option}`boot.loader.grub.device`.
- boot.grubSplashImage: Alias of {option}`boot.loader.grub.splashImage`.
- boot.hardwareScan: Whether to try to load kernel modules for all detected hardware.
Usually this does a good job of providing you with the modules
you need, but sometimes it can crash the system or cause other
nasty effects.

- boot.initrd.allowMissingModules: Whether the initrd can be built even though modules listed in
{option}`boot.initrd.kernelModules` or
{option}`boot.initrd.availableKernelModules` are missing from
the kernel. This is useful when combining configurations that
include a lot of modules, such as
{option}`hardware.enableAllHardware`, with kernels that don't
provide as many modules as typical NixOS kernels.

Note that enabling this is discouraged. Instead, try disabling
individual modules by setting e.g.
`boot.initrd.availableKernelModules.foo = lib.mkForce false;`

- boot.initrd.availableKernelModules: The set of kernel modules in the initial ramdisk used during the
boot process.  This set must include all modules necessary for
mounting the root device.  That is, it should include modules
for the physical device (e.g., SCSI drivers) and for the file
system (e.g., ext3).  The set specified here is automatically
closed under the module dependency relation, i.e., all
dependencies of the modules list here are included
automatically.  The modules listed here are available in the
initrd, but are only loaded on demand (e.g., the ext3 module is
loaded automatically when an ext3 filesystem is mounted, and
modules for PCI devices are loaded when they match the PCI ID
of a device in your system).  To force a module to be loaded,
include it in {option}`boot.initrd.kernelModules`.

This can either be a list of modules, or an attrset. In an
attrset, names that are set to `true` represent modules that will
be included. Note that setting these names to `false` does not
prevent the module from being loaded. For that, use
{option}`boot.blacklistedKernelModules`.


- boot.initrd.checkJournalingFS: Whether to run {command}`fsck` on journaling filesystems such as ext3.

- boot.initrd.clevis.devices: Encrypted devices that need to be unlocked at boot using Clevis
- boot.initrd.clevis.enable: Whether to enable Clevis in initrd.
- boot.initrd.clevis.package: The clevis package to use.
- boot.initrd.clevis.useTang: Whether the Clevis JWE file used to decrypt the devices uses a Tang server as a pin.
- boot.initrd.compressor: The compressor to use on the initrd image. May be any of:

- The name of one of the predefined compressors, see {file}`pkgs/build-support/kernel/initrd-compressor-meta.nix` for the definitions.
- A function which, given the nixpkgs package set, returns the path to a compressor tool, e.g. `pkgs: "${pkgs.pigz}/bin/pigz"`
- (not recommended, because it does not work when cross-compiling) the full path to a compressor tool, e.g. `"${pkgs.pigz}/bin/pigz"`

The given program should read data from stdin and write it to stdout compressed.

- boot.initrd.compressorArgs: Arguments to pass to the compressor for the initrd image, or null to use the compressor's defaults.
- boot.initrd.enable: Whether to enable the NixOS initial RAM disk (initrd). This may be
needed to perform some initialisation tasks (like mounting
network/encrypted file systems) before continuing the boot process.

- boot.initrd.extraFiles: Extra files to link and copy in to the initrd.

- boot.initrd.extraFirmwarePaths: Other firmware files (relative to `"${config.hardware.firmware}/lib/firmware"`) to include in the final initrd we are building.

- boot.initrd.extraUdevRulesCommands: Shell commands to be executed in the builder of the
udev-rules derivation.  This can be used to add
additional udev rules in the initial ramdisk.

- boot.initrd.extraUtilsCommands: Shell commands to be executed in the builder of the
extra-utils derivation.  This can be used to provide
additional utilities in the initial ramdisk.

- boot.initrd.extraUtilsCommandsTest: Shell commands to be executed in the builder of the
extra-utils derivation after patchelf has done its
job.  This can be used to test additional utilities
copied in extraUtilsCommands.

- boot.initrd.includeDefaultModules: This option, if set, adds a collection of default kernel modules
to {option}`boot.initrd.availableKernelModules` and
{option}`boot.initrd.kernelModules`.

- boot.initrd.kernelModules: Set of modules that are always loaded by the initrd.

This can either be a list of modules, or an attrset. In an
attrset, names that are set to `true` represent modules that will
be included. Note that setting these names to `false` does not
prevent the module from being loaded. For that, use
{option}`boot.blacklistedKernelModules`.


- boot.initrd.luks.cryptoModules: A list of cryptographic kernel modules needed to decrypt the root device(s).
The default includes all common modules.

- boot.initrd.luks.devices: The encrypted disk that should be opened before the root
filesystem is mounted. Both LVM-over-LUKS and LUKS-over-LVM
setups are supported. The unencrypted devices can be accessed as
{file}`/dev/mapper/«name»`.

- boot.initrd.luks.enable
- boot.initrd.luks.fido2Support: Enables support for authenticating with FIDO2 devices.

- boot.initrd.luks.forceLuksSupportInInitrd: Whether to configure luks support in the initrd, when no luks
devices are configured.

- boot.initrd.luks.gpgSupport: Enables support for authenticating with a GPG encrypted password.

- boot.initrd.luks.mitigateDMAAttacks: Unless enabled, encryption keys can be easily recovered by an attacker with physical
access to any machine with PCMCIA, ExpressCard, ThunderBolt or FireWire port.
More information is available at <https://en.wikipedia.org/wiki/DMA_attack>.

This option blacklists FireWire drivers, but doesn't remove them. You can manually
load the drivers if you need to use a FireWire device, but don't forget to unload them!

- boot.initrd.luks.reusePassphrases: When opening a new LUKS device try reusing last successful
passphrase.

Useful for mounting a number of devices that use the same
passphrase without retyping it several times.

Such setup can be useful if you use {command}`cryptsetup luksSuspend`.
Different LUKS devices will still have
different master keys even when using the same passphrase.

- boot.initrd.luks.yubikeySupport: Enables support for authenticating with a YubiKey on LUKS devices.
See the NixOS wiki for information on how to properly setup a LUKS device
and a YubiKey to work with this feature.

- boot.initrd.mdadmConf: Alias of {option}`boot.swraid.mdadmConf`.
- boot.initrd.network.enable: Add network connectivity support to initrd. The network may be
configured using the `ip` kernel parameter,
as described in [the kernel documentation](https://www.kernel.org/doc/Documentation/filesystems/nfs/nfsroot.txt).
Otherwise, if
{option}`networking.useDHCP` is enabled, an IP address
is acquired using DHCP.

You should add the module(s) required for your network card to
boot.initrd.availableKernelModules.
`lspci -v | grep -iA8 'network\|ethernet'`
will tell you which.

- boot.initrd.network.flushBeforeStage2: Whether to clear the configuration of the interfaces that were set up in
the initrd right before stage 2 takes over. Stage 2 will do the regular network
configuration based on the NixOS networking options.

The default is false when systemd is enabled in initrd,
because the systemd-networkd documentation suggests it.

- boot.initrd.network.ifstate.allowIfstateToDrasticlyIncreaseInitrdSize: IfState in initrd drastically increases the size of initrd, your boot partition may be too small and/or you may have significantly fewer generations. By setting this option, you acknowledge this fact and keep it in mind when reporting issues.
- boot.initrd.network.ifstate.cleanupSettings: Content of IfState's initrd cleanup configuration file. See <https://ifstate.net/2.0/schema/> for details. This configuration gets applied before systemd switches to stage two. The goas is to deconfigurate the whole network in order to prevent access to services, before the firewall is configured. The stage two IfState configuration will start after the firewall is configured.
- boot.initrd.network.ifstate.enable: Whether to enable initrd networking using IfState.
- boot.initrd.network.ifstate.package: The initrd IfState package to use.
- boot.initrd.network.ifstate.settings: Content of IfState's initrd configuration file. See <https://ifstate.net/2.0/schema/> for details.
- boot.initrd.network.openvpn.configuration: The configuration file for OpenVPN.

::: {.warning}
Unless your bootloader supports initrd secrets, this configuration
is stored insecurely in the global Nix store.
:::

- boot.initrd.network.openvpn.enable: Starts an OpenVPN client during initrd boot. It can be used to e.g.
remotely accessing the SSH service controlled by
{option}`boot.initrd.network.ssh` or other network services
included. Service is killed when stage-1 boot is finished.

- boot.initrd.network.postCommands: Shell commands to be executed after stage 1 of the
boot has initialised the network.

- boot.initrd.network.ssh.authorizedKeyFiles: Authorized keys taken from files for the root user on initrd.
You can combine the `authorizedKeyFiles` and `authorizedKeys` options.

- boot.initrd.network.ssh.authorizedKeys: Authorized keys for the root user on initrd.
You can combine the `authorizedKeys` and `authorizedKeyFiles` options.

- boot.initrd.network.ssh.enable: Start SSH service during initrd boot. It can be used to debug failing
boot on a remote server, enter pasphrase for an encrypted partition etc.
Service is killed when stage-1 boot is finished.

The sshd configuration is largely inherited from
{option}`services.openssh`.

- boot.initrd.network.ssh.extraConfig: Verbatim contents of {file}`sshd_config`.
- boot.initrd.network.ssh.hostDSSKey
- boot.initrd.network.ssh.hostECDSAKey
- boot.initrd.network.ssh.hostKeys: Specify SSH host keys to import into the initrd.

To generate keys, use
{manpage}`ssh-keygen(1)`
as root:

```
ssh-keygen -t rsa -N "" -f /etc/secrets/initrd/ssh_host_rsa_key
ssh-keygen -t ed25519 -N "" -f /etc/secrets/initrd/ssh_host_ed25519_key
```

::: {.warning}
Unless your bootloader supports initrd secrets, these keys
are stored insecurely in the global Nix store. Do NOT use
your regular SSH host private keys for this purpose or
you'll expose them to regular users!

Additionally, even if your initrd supports secrets, if
you're using initrd SSH to unlock an encrypted disk then
using your regular host keys exposes the private keys on
your unencrypted boot partition.
:::

- boot.initrd.network.ssh.hostRSAKey
- boot.initrd.network.ssh.ignoreEmptyHostKeys: Allow leaving {option}`config.boot.initrd.network.ssh.hostKeys` empty,
to deploy ssh host keys out of band.

- boot.initrd.network.ssh.port: Port on which SSH initrd service should listen.

- boot.initrd.network.ssh.shell: Login shell of the remote user. Can be used to limit actions user can do.

- boot.initrd.network.udhcpc.enable: Enables the udhcpc service during stage 1 of the boot process. This
defaults to {option}`networking.useDHCP`. Therefore, this useful if
useDHCP is off but the initramfs should do dhcp.

- boot.initrd.network.udhcpc.extraArgs: Additional command-line arguments passed verbatim to
udhcpc if {option}`boot.initrd.network.enable` and
{option}`boot.initrd.network.udhcpc.enable` are enabled.

- boot.initrd.nix-store-veritysetup.enable: Whether to enable nix-store-veritysetup.
- boot.initrd.osRelease
- boot.initrd.postDeviceCommands: Shell commands to be executed immediately after stage 1 of the
boot has loaded kernel modules and created device nodes in
{file}`/dev`.

- boot.initrd.postMountCommands: Shell commands to be executed immediately after the stage 1
filesystems have been mounted.

- boot.initrd.postResumeCommands: Shell commands to be executed immediately after attempting to resume.

- boot.initrd.preDeviceCommands: Shell commands to be executed before udev is started to create
device nodes.

- boot.initrd.preFailCommands: Shell commands to be executed before the failure prompt is shown.

- boot.initrd.preLVMCommands: Shell commands to be executed immediately before LVM discovery.

- boot.initrd.prepend: Other initrd files to prepend to the final initrd we are building.

- boot.initrd.secrets: Secrets to append to the initrd. The attribute name is the
path the secret should have inside the initrd, the value
is the path it should be copied from (or null for the same
path inside and out).

Note that `nixos-rebuild switch` will generate the initrd
also for past generations, so if secrets are moved or deleted
you will also have to garbage collect the generations that
use those secrets.

- boot.initrd.services.bcache.enable: *This will only be used when systemd is used in stage 1.*

Whether to enable bcache support in the initrd.

- boot.initrd.services.lvm.enable: *This will only be used when systemd is used in stage 1.*

Whether to enable booting from LVM2 in the initrd.

- boot.initrd.services.resolved.enable: Whether to enable resolved for stage 1 networking.
Uses the toplevel 'services.resolved' options for 'resolved.conf'

- boot.initrd.services.swraid.enable: Alias of {option}`boot.swraid.enable`.
- boot.initrd.services.swraid.mdadmConf: Alias of {option}`boot.swraid.mdadmConf`.
- boot.initrd.services.udev.binPackages: *This will only be used when systemd is used in stage 1.*

Packages to search for binaries that are referenced by the udev rules in stage 1.
This list always contains /bin of the initrd.

- boot.initrd.services.udev.packages: *This will only be used when systemd is used in stage 1.*

List of packages containing {command}`udev` rules that will be copied to stage 1.
All files found in
{file}`«pkg»/etc/udev/rules.d` and
{file}`«pkg»/lib/udev/rules.d`
will be included.

- boot.initrd.services.udev.rules: {command}`udev` rules to include in the initrd
*only*. They'll be written into file
{file}`99-local.rules`. Thus they are read and applied
after the essential initrd rules.

- boot.initrd.supportedFilesystems: Names of supported filesystem types, or an attribute set of file system types
and their state. The set form may be used together with `lib.mkForce` to
explicitly disable support for specific filesystems, e.g. to disable ZFS
with an unsupported kernel.

- boot.initrd.systemd.additionalUpstreamUnits: Additional units shipped with systemd that shall be enabled.

- boot.initrd.systemd.automounts: Definition of systemd automount units.
This is a list instead of an attrSet, because systemd mandates the names to be derived from
the 'where' attribute.

- boot.initrd.systemd.contents: Set of files that have to be linked into the initrd
- boot.initrd.systemd.dbus.enable: Whether to enable dbus in stage 1.
- boot.initrd.systemd.dmVerity.enable: Mount verity-protected block devices in the initrd.

Enabling this option allows to use `systemd-veritysetup` and
`systemd-veritysetup-generator` in the initrd.

- boot.initrd.systemd.emergencyAccess: Set to true for unauthenticated emergency access, and false or
null for no emergency access.

Can also be set to a hashed super user password to allow
authenticated access to the emergency mode.

For emergency access after initrd, use `systemd.enableEmergencyMode` instead.

- boot.initrd.systemd.enable: Whether to enable systemd in initrd. The unit options such as
{option}`boot.initrd.systemd.services` are the same as their
stage 2 counterparts such as {option}`systemd.services`,
except that `restartTriggers` and `reloadTriggers` are not
supported.

- boot.initrd.systemd.enableTpm2: Alias of {option}`boot.initrd.systemd.tpm2.enable`.
- boot.initrd.systemd.extraBin: Tools to add to /bin

- boot.initrd.systemd.extraConfig
- boot.initrd.systemd.fido2.enable: Whether to enable systemd FIDO2 support.
- boot.initrd.systemd.groups: Groups to include in initrd.

- boot.initrd.systemd.initrdBin: Packages to include in /bin for the stage 1 emergency shell.

- boot.initrd.systemd.managerEnvironment: Environment variables of PID 1. These variables are
*not* passed to started units.

- boot.initrd.systemd.mounts: Definition of systemd mount units.
This is a list instead of an attrSet, because systemd mandates the names to be derived from
the 'where' attribute.

- boot.initrd.systemd.network.config: Definition of global systemd network config.
- boot.initrd.systemd.network.enable: Whether to enable networkd or not.

- boot.initrd.systemd.network.links: Definition of systemd network links.
- boot.initrd.systemd.network.netdevs: Definition of systemd network devices.
- boot.initrd.systemd.network.networks: Definition of systemd networks.
- boot.initrd.systemd.network.units: Definition of networkd units.
- boot.initrd.systemd.network.wait-online.anyInterface: Whether to consider the network online when any interface is online, as opposed to all of them.
This is useful on portable machines with a wired and a wireless interface, for example.

This is on by default if {option}`networking.useDHCP` is enabled.

- boot.initrd.systemd.network.wait-online.enable: Whether to enable the systemd-networkd-wait-online service.

systemd-networkd-wait-online can timeout and fail if there are no network interfaces
available for it to manage. When systemd-networkd is enabled but a different service is
responsible for managing the system's internet connection (for example, NetworkManager or
connman are used to manage WiFi connections), this service is unnecessary and can be
disabled.

- boot.initrd.systemd.network.wait-online.extraArgs: Extra command-line arguments to pass to systemd-networkd-wait-online.
These also affect per-interface `systemd-network-wait-online@` services.

See {manpage}`systemd-networkd-wait-online.service(8)` for all available options.

- boot.initrd.systemd.network.wait-online.ignoredInterfaces: Network interfaces to be ignored when deciding if the system is online.

- boot.initrd.systemd.network.wait-online.timeout: Time to wait for the network to come online, in seconds. Set to 0 to disable.

- boot.initrd.systemd.package: The systemd package to use.

- boot.initrd.systemd.packages: Packages providing systemd units and hooks.
- boot.initrd.systemd.paths: Definition of systemd path units.
- boot.initrd.systemd.repart.device: The device to operate on.

If `device == null`, systemd-repart will operate on the device
backing the root partition. So in order to dynamically *create* the
root partition in the initrd you need to set a device.

- boot.initrd.systemd.repart.discard: Controls whether to issue the BLKDISCARD I/O control command on the
space taken up by any added partitions or on the space in between them.
Usually, it's a good idea to issue this request since it tells the underlying
hardware that the covered blocks shall be considered empty, improving performance.

See {manpage}`systemd-repart(8)` for details.

- boot.initrd.systemd.repart.empty: Controls how to operate on empty devices that contain no partition table yet.
See {manpage}`systemd-repart(8)` for details.

- boot.initrd.systemd.repart.enable: Grow and add partitions to a partition table at boot time in the initrd.
systemd-repart only works with GPT partition tables.

To run systemd-repart after the initrd, see
`options.systemd.repart.enable`.

- boot.initrd.systemd.repart.extraArgs: Extra command-line arguments to pass to systemd-repart.

See {manpage}`systemd-repart(8)` for all available options.

- boot.initrd.systemd.root: Controls how systemd will interpret the root FS in initrd. See
{manpage}`kernel-command-line(7)`. NixOS currently does not
allow specifying the root file system itself this
way. Instead, the `fstab` value is used in order to interpret
the root file system specified with the `fileSystems` option.

- boot.initrd.systemd.services: Definition of systemd service units.
- boot.initrd.systemd.settings.Manager: Options for the global systemd service manager used in initrd. See {manpage}`systemd-system.conf(5)` man page
for available options.

- boot.initrd.systemd.shell.enable: Whether to enable a shell in the initrd.

In contrast to `environment.shell.enable`, this option actually
strictly disables all shells in the initrd because they're not copied
into it anymore. Paths that use a shell (e.g. via the `script` option),
will break if this option is set.

Only set this option if you're sure that you can recover from potential
issues.

- boot.initrd.systemd.slices: Definition of slice configurations.
- boot.initrd.systemd.sockets: Definition of systemd socket units.
- boot.initrd.systemd.storePaths: Store paths to copy into the initrd as well.

- boot.initrd.systemd.strip
- boot.initrd.systemd.suppressedStorePaths: Store paths specified in the storePaths option that
should not be copied.

- boot.initrd.systemd.suppressedUnits: A list of units to skip when generating system systemd configuration directory. This has
priority over upstream units, {option}`boot.initrd.systemd.units`, and
{option}`boot.initrd.systemd.additionalUpstreamUnits`. The main purpose of this is to
prevent a upstream systemd unit from being added to the initrd with any modifications made to it
by other NixOS modules.

- boot.initrd.systemd.targets: Definition of systemd target units.
- boot.initrd.systemd.timers: Definition of systemd timer units.
- boot.initrd.systemd.tmpfiles.settings: Similar to {option}`systemd.tmpfiles.settings` but the rules are
only applied by systemd-tmpfiles before `initrd-switch-root.target`.

See {manpage}`bootup(7)`.

- boot.initrd.systemd.tpm2.enable: Whether to enable systemd initrd TPM2 support.
- boot.initrd.systemd.units: Definition of systemd units.
- boot.initrd.systemd.users: Users to include in initrd.

- boot.initrd.unl0kr.allowVendorDrivers: Whether to load additional drivers for certain vendors (I.E: Wacom, Intel, etc.)
- boot.initrd.unl0kr.enable: Whether to enable the unl0kr on-screen keyboard in initrd to unlock LUKS.
- boot.initrd.unl0kr.package: The buffybox package to use.
- boot.initrd.unl0kr.settings: Configuration for `unl0kr`.

See `unl0kr.conf(5)` for supported values.

Alternatively, visit `https://gitlab.postmarketos.org/postmarketOS/buffybox/-/blob/3.2.0/unl0kr/unl0kr.conf`

- boot.initrd.verbose: Verbosity of the initrd. Please note that disabling verbosity removes
only the mandatory messages generated by the NixOS scripts. For a
completely silent boot, you might also want to set the two following
configuration options:

- `boot.consoleLogLevel = 0;`
- `boot.kernelParams = [ "quiet" "udev.log_level=3" ];`

- boot.isContainer: Whether this NixOS machine is a lightweight container running
in another NixOS system.

- boot.isNspawnContainer: Whether the machine is running in an nspawn container. This
option is added because [](#opt-boot.isContainer) is heavily used
for non-nspawn environments as well, hence nspawn-specific settings
are guarded by this option.

- boot.iscsi-initiator.discoverPortal: iSCSI portal to boot from.

- boot.iscsi-initiator.extraConfig: Extra lines to append to /etc/iscsid.conf
- boot.iscsi-initiator.extraConfigFile: Append an additional file's contents to `/etc/iscsid.conf`. Use a non-store path
and store passwords in this file. Note: the file specified here must be available
in the initrd, see: `boot.initrd.secrets`.

- boot.iscsi-initiator.extraIscsiCommands: Extra iscsi commands to run in the initrd.
- boot.iscsi-initiator.logLevel: Higher numbers elicits more logs.

- boot.iscsi-initiator.loginAll: Do not log into a specific target on the portal, but to all that we discover.
This overrides setting target.

- boot.iscsi-initiator.name: Name of the iSCSI initiator to boot from. Note, booting from iscsi
requires networkd based networking.

- boot.iscsi-initiator.target: Name of the iSCSI target to boot from.

- boot.kernel.enable: Whether to enable the Linux kernel. This is useful for systemd-like containers which do not require a kernel.
- boot.kernel.features: This option allows to enable or disable certain kernel features.
It's not API, because it's about kernel feature sets, that
make sense for specific use cases. Mostly along with programs,
which would have separate nixos options.
`grep features pkgs/os-specific/linux/kernel/common-config.nix`

- boot.kernel.randstructSeed: Provides a custom seed for the {var}`RANDSTRUCT` security
option of the Linux kernel. Note that {var}`RANDSTRUCT` is
only enabled in NixOS hardened kernels. Using a custom seed requires
building the kernel and dependent packages locally, since this
customization happens at build time.

- boot.kernel.sysctl: Runtime parameters of the Linux kernel, as set by
{manpage}`sysctl(8)`.  Note that sysctl
parameters names must be enclosed in quotes
(e.g. `"vm.swappiness"` instead of
`vm.swappiness`).  The value of each
parameter may be a string, integer, boolean, or null
(signifying the option will not appear at all).

- boot.kernel.sysfs: sysfs attributes to be set as soon as they become available.

Attribute names represent path components in the sysfs filesystem and
cannot be `.` or `..` nor contain any slash character (`/`).

Names may contain shell‐style glob patterns (`*`, `?` and `[…]`)
matching a single path component, these should however be used with
caution, as they may produce unexpected results if attribute paths
overlap.

Values will be converted to strings, with list elements concatenated
with commata and booleans converted to numeric values (`0` or `1`).

`null` values are ignored, allowing removal of values defined in other
modules, as are empty attribute sets.

List values defined in different modules will _not_ be concatenated.

This option may only be used for attributes which can be set
idempotently, as the configured values might be written more than once.

- boot.kernelModules: The set of kernel modules to be loaded in the second stage of
the boot process.  Note that modules that are needed to
mount the root file system should be added to
{option}`boot.initrd.availableKernelModules` or
{option}`boot.initrd.kernelModules`.

This can either be a list of modules, or an attrset. In an
attrset, names that are set to `true` represent modules that will
be included. Note that setting these names to `false` does not
prevent the module from being loaded. For that, use
{option}`boot.blacklistedKernelModules`.


- boot.kernelPackages: This option allows you to override the Linux kernel used by
NixOS.  Since things like external kernel module packages are
tied to the kernel you're using, it also overrides those.
This option is a function that takes Nixpkgs as an argument
(as a convenience), and returns an attribute set containing at
the very least an attribute {var}`kernel`.
Additional attributes may be needed depending on your
configuration.  For instance, if you use the NVIDIA X driver,
then it also needs to contain an attribute
{var}`nvidia_x11`.

Please note that we strictly support kernel versions that are
maintained by the Linux developers only. More information on the
availability of kernel versions is documented
[in the Linux section of the manual](https://nixos.org/manual/nixos/unstable/index.html#sec-kernel-config).

- boot.kernelParams: Parameters added to the kernel command line.
- boot.kernelPatches: A list of additional patches to apply to the kernel.

Every item should be an attribute set with the following attributes:

```nix
{
  name = "foo";                 # descriptive name, required

  patch = ./foo.patch;          # path or derivation that contains the patch source
                                # (required, but can be null if only config changes
                                # are needed)

  structuredExtraConfig = {     # attrset of extra configuration parameters without the CONFIG_ prefix
    FOO = lib.kernel.yes;       # (optional)
  };                            # values should generally be lib.kernel.yes,
                                # lib.kernel.no or lib.kernel.module

  features = {                  # attrset of extra "features" the kernel is considered to have
    foo = true;                 # (may be checked by other NixOS modules, optional)
  };

  extraConfig = "FOO y";        # extra configuration options in string form without the CONFIG_ prefix
                                # (optional, multiple lines allowed to specify multiple options)
                                # (deprecated, use structuredExtraConfig instead)
}
```

There's a small set of existing kernel patches in Nixpkgs, available as `pkgs.kernelPatches`,
that follow this format and can be used directly.

- boot.kexec.enable: Whether to enable kexec.
- boot.lanzaboote.configurationLimit: Maximum number of latest generations in the boot menu.
Useful to prevent boot partition running out of disk space.

`null` means no limit i.e. all generations
that were not garbage collected yet.

- boot.lanzaboote.enable: Whether to enable Enable the LANZABOOTE.
- boot.lanzaboote.enrollKeys: Whether to enable Do not use this option. Only for used for integration tests! Automatic enrollment of the keys using sbctl.
- boot.lanzaboote.package: Lanzaboote tool (lzbt) package
- boot.lanzaboote.pkiBundle: PKI bundle containing db, PK, KEK
- boot.lanzaboote.privateKeyFile: Private key to sign your boot files
- boot.lanzaboote.publicKeyFile: Public key to sign your boot files
- boot.lanzaboote.settings: Configuration for the `systemd-boot`

See `loader.conf(5)` for supported values.

- boot.lanzaboote.sortKey: The sort key used for the NixOS bootloader entries. This key determines
sorting relative to non-NixOS entries. See also
https://uapi-group.org/specifications/specs/boot_loader_specification/#sorting

- boot.loader.efi.canTouchEfiVariables: Whether the installation process is allowed to modify EFI boot variables.
- boot.loader.efi.efiSysMountPoint: Where the EFI System Partition is mounted.
- boot.loader.external.enable: Whether to enable using an external tool to install your bootloader.
- boot.loader.external.installHook: The full path to a program of your choosing which performs the bootloader installation process.

The program will be called with an argument pointing to the output of the system's toplevel.

- boot.loader.generationsDir.copyKernels: Whether to copy the necessary boot files into /boot, so
/nix/store is not needed by the boot loader.

- boot.loader.generationsDir.enable: Whether to create symlinks to the system generations under
`/boot`.  When enabled,
`/boot/default/kernel`,
`/boot/default/initrd`, etc., are updated to
point to the current generation's kernel image, initial RAM
disk, and other bootstrap files.

This optional is not necessary with boot loaders such as GNU GRUB
for which the menu is updated to point to the latest bootstrap
files.  However, it is needed for U-Boot on platforms where the
boot command line is stored in flash memory rather than in a
menu file.

- boot.loader.generic-extlinux-compatible.configurationLimit: Maximum number of configurations in the boot menu.

- boot.loader.generic-extlinux-compatible.enable: Whether to generate an extlinux-compatible configuration file
under `/boot/extlinux.conf`.  For instance,
U-Boot's generic distro boot support uses this file format.

See [U-boot's documentation](https://u-boot.readthedocs.io/en/latest/develop/distro.html)
for more information.

- boot.loader.generic-extlinux-compatible.mirroredBoots: Mirror the boot configuration to multiple paths.

- boot.loader.generic-extlinux-compatible.populateCmd: Contains the builder command used to populate an image,
honoring all options except the `-c <path-to-default-configuration>`
argument.
Useful to have for sdImage.populateRootCommands

- boot.loader.generic-extlinux-compatible.useGenerationDeviceTree: Whether to generate Device Tree-related directives in the
extlinux configuration.

When enabled, the bootloader will attempt to load the device
tree binaries from the generation's kernel.

Note that this affects all generations, regardless of the
setting value used in their configurations.

- boot.loader.grub.backgroundColor: Background color to be used for GRUB to fill the areas the image isn't filling.

- boot.loader.grub.bootDevice
- boot.loader.grub.configurationLimit: Maximum of configurations in boot menu. GRUB has problems when
there are too many entries.

- boot.loader.grub.configurationName: GRUB entry name instead of default.

- boot.loader.grub.copyKernels: Whether the GRUB menu builder should copy kernels and initial
ramdisks to /boot.  This is done automatically if /boot is
on a different partition than /.

- boot.loader.grub.default: Index of the default menu item to be booted.
Can also be set to "saved", which will make GRUB select
the menu item that was used at the last boot.

- boot.loader.grub.device: The device on which the GRUB boot loader will be installed.
The special value `nodev` means that a GRUB
boot menu will be generated, but GRUB itself will not
actually be installed.  To install GRUB on multiple devices,
use `boot.loader.grub.devices`.

- boot.loader.grub.devices: The devices on which the boot loader, GRUB, will be
installed. Can be used instead of `device` to
install GRUB onto multiple devices.

- boot.loader.grub.efiInstallAsRemovable: Whether to invoke `grub-install` with
`--removable`.

Unless you turn this on, GRUB will install itself somewhere in
`boot.loader.efi.efiSysMountPoint` (exactly where
depends on other config variables). If you've set
`boot.loader.efi.canTouchEfiVariables` *AND* you
are currently booted in UEFI mode, then GRUB will use
`efibootmgr` to modify the boot order in the
EFI variables of your firmware to include this location. If you are
*not* booted in UEFI mode at the time GRUB is being installed, the
NVRAM will not be modified, and your system will not find GRUB at
boot time. However, GRUB will still return success so you may miss
the warning that gets printed ("`efibootmgr: EFI variables
are not supported on this system.`").

If you turn this feature on, GRUB will install itself in a
special location within `efiSysMountPoint` (namely
`EFI/boot/boot$arch.efi`) which the firmwares
are hardcoded to try first, regardless of NVRAM EFI variables.

To summarize, turn this on if:
- You are installing NixOS and want it to boot in UEFI mode,
  but you are currently booted in legacy mode
- You want to make a drive that will boot regardless of
  the NVRAM state of the computer (like a USB "removable" drive)
- You simply dislike the idea of depending on NVRAM
  state to make your drive bootable

- boot.loader.grub.efiSupport: Whether GRUB should be built with EFI support.

- boot.loader.grub.enable: Whether to enable the GNU GRUB boot loader.

- boot.loader.grub.enableCryptodisk: Enable support for encrypted partitions. GRUB should automatically
unlock the correct encrypted partition and look for filesystems.

- boot.loader.grub.entryOptions: Options applied to the primary NixOS menu entry.

- boot.loader.grub.extraConfig: Additional GRUB commands inserted in the configuration file
just before the menu entries.

- boot.loader.grub.extraEntries: Any additional entries you want added to the GRUB boot menu.

- boot.loader.grub.extraEntriesBeforeNixOS: Whether extraEntries are included before the default option.

- boot.loader.grub.extraFiles: A set of files to be copied to {file}`/boot`.
Each attribute name denotes the destination file name in
{file}`/boot`, while the corresponding
attribute value specifies the source file.

- boot.loader.grub.extraGrubInstallArgs: Additional arguments passed to `grub-install`.

A use case for this is to build specific GRUB2 modules
directly into the GRUB2 kernel image, so that they are available
and activated even in the `grub rescue` shell.

They are also necessary when the BIOS/UEFI is bugged and cannot
correctly read large disks (e.g. above 2 TB), so GRUB2's own
`nativedisk` and related modules can be used
to use its own disk drivers. The example shows one such case.
This is also useful for booting from USB.
See the
[
GRUB source code
](https://git.savannah.gnu.org/cgit/grub.git/tree/grub-core/commands/nativedisk.c?h=grub-2.04#n326)
for which disk modules are available.

The list elements are passed directly as `argv`
arguments to the `grub-install` program, in order.

- boot.loader.grub.extraInitrd
- boot.loader.grub.extraInstallCommands: Additional shell commands inserted in the bootloader installer
script after generating menu entries.

- boot.loader.grub.extraPerEntryConfig: Additional GRUB commands inserted in the configuration file
at the start of each NixOS menu entry.

- boot.loader.grub.extraPrepareConfig: Additional bash commands to be run at the script that
prepares the GRUB menu entries.

- boot.loader.grub.font: Path to a TrueType, OpenType, or pf2 font to be used by Grub.

- boot.loader.grub.fontSize: Font size for the grub menu. Ignored unless `font`
is set to a ttf or otf font.

- boot.loader.grub.forceInstall: Whether to try and forcibly install GRUB even if problems are
detected. It is not recommended to enable this unless you know what
you are doing.

- boot.loader.grub.forcei686: Whether to force the use of a ia32 boot loader on x64 systems. Required
to install and run NixOS on 64bit x86 systems with 32bit (U)EFI.

- boot.loader.grub.fsIdentifier: Determines how GRUB will identify devices when generating the
configuration file. A value of uuid / label signifies that grub
will always resolve the uuid or label of the device before using
it in the configuration. A value of provided means that GRUB will
use the device name as show in {command}`df` or
{command}`mount`. Note, zfs zpools / datasets are ignored
and will always be mounted using their labels.

- boot.loader.grub.gfxmodeBios: The gfxmode to pass to GRUB when loading a graphical boot interface under BIOS.

- boot.loader.grub.gfxmodeEfi: The gfxmode to pass to GRUB when loading a graphical boot interface under EFI.

- boot.loader.grub.gfxpayloadBios: The gfxpayload to pass to GRUB when loading a graphical boot interface under BIOS.

- boot.loader.grub.gfxpayloadEfi: The gfxpayload to pass to GRUB when loading a graphical boot interface under EFI.

- boot.loader.grub.ipxe: Set of iPXE scripts available for
booting from the GRUB boot menu.

- boot.loader.grub.memtest86.enable: Make Memtest86+, a memory testing program, available from the GRUB
boot menu.

- boot.loader.grub.memtest86.params: Parameters added to the Memtest86+ command line. As of memtest86+ 5.01
the following list of (apparently undocumented) parameters are
accepted:

- `console=...`, set up a serial console.
  Examples:
  `console=ttyS0`,
  `console=ttyS0,9600` or
  `console=ttyS0,115200n8`.

- `btrace`, enable boot trace.

- `maxcpus=N`, limit number of CPUs.

- `onepass`, run one pass and exit if there
  are no errors.

- `tstlist=...`, list of tests to run.
  Example: `0,1,2`.

- `cpumask=...`, set a CPU mask, to select CPUs
  to use for testing.

This list of command line options was obtained by reading the
Memtest86+ source code.

- boot.loader.grub.mirroredBoots: Mirror the boot configuration to multiple partitions and install grub
to the respective devices corresponding to those partitions.

- boot.loader.grub.splashImage: Background image used for GRUB.
Set to `null` to run GRUB in text mode.

::: {.note}
File must be one of .png, .tga, .jpg, or .jpeg. JPEG images must
not be progressive.
The image will be scaled if necessary to fit the screen.
:::

- boot.loader.grub.splashMode: Whether to stretch the image or show the image in the top-left corner unstretched.

- boot.loader.grub.storePath: Path to the Nix store when looking for kernels at boot.
Only makes sense when copyKernels is false.

- boot.loader.grub.subEntryOptions: Options applied to the secondary NixOS submenu entry.

- boot.loader.grub.theme: Path to the grub theme to be used.

- boot.loader.grub.timeout: Alias of {option}`boot.loader.timeout`.
- boot.loader.grub.timeoutStyle:  - `menu` shows the menu.
 - `countdown` uses a text-mode countdown.
 - `hidden` hides GRUB entirely.

When using a theme, the default value (`menu`) is appropriate for the graphical countdown.

When attempting to do flicker-free boot, `hidden` should be used.

See the [GRUB documentation section about `timeout_style`](https://www.gnu.org/software/grub/manual/grub/html_node/timeout.html).

::: {.note}
If this option is set to ‘countdown’ or ‘hidden’ [...] and ESC or F4 are pressed, or SHIFT is held down during that time, it will display the menu and wait for input.
:::

From: [Simple configuration handling page, under GRUB_TIMEOUT_STYLE](https://www.gnu.org/software/grub/manual/grub/html_node/Simple-configuration.html).

- boot.loader.grub.trustedBoot
- boot.loader.grub.useOSProber: If set to true, append entries for other OSs detected by os-prober.

- boot.loader.grub.users: User accounts for GRUB. When specified, the GRUB command line and
all boot options except the default are password-protected.
All passwords and hashes provided will be stored in /boot/grub/grub.cfg,
and will be visible to any local user who can read this file. Additionally,
any passwords and hashes provided directly in a Nix configuration
(as opposed to external files) will be copied into the Nix store, and
will be visible to all local users.

- boot.loader.grub.version
- boot.loader.grub.zfsPackage: Which ZFS package to use if `config.boot.loader.grub.zfsSupport` is true.

- boot.loader.grub.zfsSupport: Whether GRUB should be built against libzfs.

- boot.loader.gummiboot.enable: Alias of {option}`boot.loader.systemd-boot.enable`.
- boot.loader.gummiboot.timeout: Alias of {option}`boot.loader.timeout`.
- boot.loader.initScript.enable: Some systems require a /sbin/init script which is started.
Or having it makes starting NixOS easier.
This applies to some kind of hosting services and user mode linux.

Additionally this script will create
/boot/init-other-configurations-contents.txt containing
contents of remaining configurations. You can copy paste them into
/sbin/init manually running a rescue system or such.

- boot.loader.limine.additionalFiles: A set of files to be copied to {file}`/boot`. Each attribute name denotes the
destination file name in {file}`/boot`, while the corresponding attribute value
specifies the source file.

- boot.loader.limine.biosDevice: Device to install the BIOS version of limine on.

- boot.loader.limine.biosSupport: Whether or not to install limine for BIOS.

- boot.loader.limine.efiInstallAsRemovable: Whether or not to install the limine EFI files as removable.

See {option}`boot.loader.grub.efiInstallAsRemovable`

- boot.loader.limine.efiSupport: Whether or not to install the limine EFI files.

- boot.loader.limine.enable: Whether to enable the Limine Bootloader.
- boot.loader.limine.enableEditor: Whether to allow editing the boot entries before booting them.
It is recommended to set this to false, as it allows gaining root
access by passing `init=/bin/sh` as a kernel parameter.

- boot.loader.limine.enrollConfig: Whether or not to enroll the config.
Only works on EFI!

- boot.loader.limine.extraConfig: A string which is prepended to limine.conf. The config format can be found [here](https://github.com/limine-bootloader/limine/blob/trunk/CONFIG.md).

- boot.loader.limine.extraEntries: A string which is appended to the end of limine.conf. The config format can be found [here](https://github.com/limine-bootloader/limine/blob/trunk/CONFIG.md).

- boot.loader.limine.force: Force installation even if the safety checks fail, use absolutely only if necessary!

- boot.loader.limine.forceMbr: Alias of {option}`boot.loader.limine.force`.
- boot.loader.limine.maxGenerations: Maximum number of latest generations in the boot menu.
Useful to prevent boot partition of running out of disk space.
`null` means no limit i.e. all generations that were not
garbage collected yet.

- boot.loader.limine.package: The limine package to use.
- boot.loader.limine.panicOnChecksumMismatch: Whether or not checksum validation failure should be a fatal
error at boot time.

- boot.loader.limine.partitionIndex: The 1-based index of the dedicated partition for limine's second stage.

- boot.loader.limine.secureBoot.createAndEnrollKeys: Creates secure boot signing keys and enrolls them during bootloader installation.

::: {.note}
This is used for automated nixos tests.
NOT INTENDED to be used on a real system.
:::

- boot.loader.limine.secureBoot.enable: Whether to use sign the limine binary with sbctl.

::: {.note}
This requires you to already have generated the keys and enrolled them with {command}`sbctl`.

To create keys use {command}`sbctl create-keys`.

To enroll them first reset secure boot to "Setup Mode". This is device specific.
Then enroll them using {command}`sbctl enroll-keys -m -f`.

You can now rebuild your system with this option enabled.

Afterwards turn setup mode off and enable secure boot.
:::

- boot.loader.limine.secureBoot.sbctl: The sbctl package to use.
- boot.loader.limine.style.backdrop: Color to fill the rest of the screen with when wallpaper_style is centered in RRGGBB format.

- boot.loader.limine.style.graphicalTerminal.background: Text background color (TTRRGGBB). TT is transparency.

- boot.loader.limine.style.graphicalTerminal.brightBackground: Text background bright color (RRGGBB).

- boot.loader.limine.style.graphicalTerminal.brightForeground: Text foreground bright color (RRGGBB).

- boot.loader.limine.style.graphicalTerminal.brightPalette: A ; seperated array of 8 colors in the format RRGGBB:
dark gray, bright red, bright green, yellow, bright blue, bright magenta, bright cyan, and white.

- boot.loader.limine.style.graphicalTerminal.font.scale: The scale of the font in the format <width>x<height>.

- boot.loader.limine.style.graphicalTerminal.font.spacing: The horizontal spacing between characters in pixels.

- boot.loader.limine.style.graphicalTerminal.foreground: Text foreground color (RRGGBB).

- boot.loader.limine.style.graphicalTerminal.margin: The amount of margin around the terminal.

- boot.loader.limine.style.graphicalTerminal.marginGradient: The thickness in pixels for the margin around the terminal.

- boot.loader.limine.style.graphicalTerminal.palette: A ; seperated array of 8 colors in the format RRGGBB:
black, red, green, brown, blue, magenta, cyan, and gray.

- boot.loader.limine.style.interface.branding: The title at the top of the screen.

- boot.loader.limine.style.interface.brandingColor: Color index of the title at the top of the screen in the range of 0-7 (Limine defaults to 6 (cyan)).

- boot.loader.limine.style.interface.helpHidden: Whether or not to hide the keybinds at the top of the screen.

- boot.loader.limine.style.interface.resolution: The resolution of the interface.

- boot.loader.limine.style.wallpaperStyle: How the wallpaper should be fit to the screen.

- boot.loader.limine.style.wallpapers: A list of wallpapers.
If more than one is specified, a random one will be selected at boot.

- boot.loader.limine.validateChecksums: Whether to validate file checksums before booting.

- boot.loader.raspberryPi
- boot.loader.refind.additionalFiles: A set of files to be copied to {file}`/boot`. Each attribute name denotes the
destination file name in {file}`/boot`, while the corresponding attribute value
specifies the source file.

- boot.loader.refind.efiInstallAsRemovable: Whether or not to install the rEFInd EFI files as removable.

See {option}`boot.loader.grub.efiInstallAsRemovable`

- boot.loader.refind.enable: Whether to enable the rEFInd boot loader.
- boot.loader.refind.extraConfig: A string which is prepended to refind.conf.

- boot.loader.refind.maxGenerations: Maximum number of latest generations in the boot menu.
Useful to prevent boot partition of running out of disk space.
`null` means no limit i.e. all generations that were not
garbage collected yet.

- boot.loader.refind.package: The refind package to use.
- boot.loader.supportsInitrdSecrets: Whether the bootloader setup runs append-initrd-secrets.
If not, any needed secrets must be copied into the initrd
and thus added to the store.

- boot.loader.systemd-boot.configurationLimit: Maximum number of latest generations in the boot menu.
Useful to prevent boot partition running out of disk space.

`null` means no limit i.e. all generations
that have not been garbage collected yet.

- boot.loader.systemd-boot.consoleMode: The resolution of the console. The following values are valid:

- `"0"`: Standard UEFI 80x25 mode
- `"1"`: 80x50 mode, not supported by all devices
- `"2"`: The first non-standard mode provided by the device firmware, if any
- `"5"`: Applicable for SteamDeck where this mode represent horizontal mode
- `"auto"`: Pick a suitable mode automatically using heuristics
- `"max"`: Pick the highest-numbered available mode
- `"keep"`: Keep the mode selected by firmware (the default)

- boot.loader.systemd-boot.editor: Whether to allow editing the kernel command-line before
boot. It is recommended to set this to false, as it allows
gaining root access by passing init=/bin/sh as a kernel
parameter. However, it is enabled by default for backwards
compatibility.

- boot.loader.systemd-boot.edk2-uefi-shell.enable: Make the EDK2 UEFI Shell available from the systemd-boot menu.
It can be used to manually boot other operating systems or for debugging.

- boot.loader.systemd-boot.edk2-uefi-shell.sortKey: `systemd-boot` orders the menu entries by their sort keys,
so if you want something to appear after all the NixOS entries,
it should start with {file}`o` or onwards.

See also {option}`boot.loader.systemd-boot.sortKey`..

- boot.loader.systemd-boot.enable: Whether to enable the systemd-boot (formerly gummiboot) EFI boot manager.
For more information about systemd-boot:
<https://www.freedesktop.org/wiki/Software/systemd/systemd-boot/>

- boot.loader.systemd-boot.extraEntries: Any additional entries you want added to the `systemd-boot` menu.
These entries will be copied to {file}`$BOOT/loader/entries`.
Each attribute name denotes the destination file name,
and the corresponding attribute value is the contents of the entry.

To control the ordering of the entry in the boot menu, use the sort-key
field, see
<https://uapi-group.org/specifications/specs/boot_loader_specification/#sorting>
and {option}`boot.loader.systemd-boot.sortKey`.

- boot.loader.systemd-boot.extraFiles: A set of files to be copied to {file}`$BOOT`.
Each attribute name denotes the destination file name in
{file}`$BOOT`, while the corresponding
attribute value specifies the source file.

- boot.loader.systemd-boot.extraInstallCommands: Additional shell commands inserted in the bootloader installer
script after generating menu entries. It can be used to expand
on extra boot entries that cannot incorporate certain pieces of
information (such as the resulting `init=` kernel parameter).

- boot.loader.systemd-boot.graceful: Invoke `bootctl install` with the `--graceful` option,
which ignores errors when EFI variables cannot be written or when the EFI System Partition
cannot be found. Currently only applies to random seed operations.

Only enable this option if `systemd-boot` otherwise fails to install, as the
scope or implication of the `--graceful` option may change in the future.

- boot.loader.systemd-boot.installDeviceTree: Install the devicetree blob specified by `config.hardware.deviceTree.name`
to the ESP and instruct systemd-boot to pass this DTB to linux.

- boot.loader.systemd-boot.memtest86.enable: Make Memtest86+ available from the systemd-boot menu. Memtest86+ is a
program for testing memory.

- boot.loader.systemd-boot.memtest86.entryFilename
- boot.loader.systemd-boot.memtest86.sortKey: `systemd-boot` orders the menu entries by their sort keys,
so if you want something to appear after all the NixOS entries,
it should start with {file}`o` or onwards.

See also {option}`boot.loader.systemd-boot.sortKey`.

- boot.loader.systemd-boot.netbootxyz.enable: Make `netboot.xyz` available from the
`systemd-boot` menu. `netboot.xyz`
is a menu system that allows you to boot OS installers and
utilities over the network.

- boot.loader.systemd-boot.netbootxyz.entryFilename
- boot.loader.systemd-boot.netbootxyz.sortKey: `systemd-boot` orders the menu entries by their sort keys,
so if you want something to appear after all the NixOS entries,
it should start with {file}`o` or onwards.

See also {option}`boot.loader.systemd-boot.sortKey`.

- boot.loader.systemd-boot.rebootForBitlocker: Enable *EXPERIMENTAL* BitLocker support.

Try to detect BitLocker encrypted drives along with an active
TPM. If both are found and Windows Boot Manager is selected in
the boot menu, set the "BootNext" EFI variable and restart the
system. The firmware will then start Windows Boot Manager
directly, leaving the TPM PCRs in expected states so that
Windows can unseal the encryption key.

- boot.loader.systemd-boot.sortKey: The sort key used for the NixOS bootloader entries.
This key determines sorting relative to non-NixOS entries.
See also <https://uapi-group.org/specifications/specs/boot_loader_specification/#sorting>

This option can also be used to control the sorting of NixOS specialisations.

By default, specialisations inherit the sort key of their parent generation
and will have the same value for both the sort-key and the version (i.e. the generation number),
systemd-boot will therefore sort them based on their file name, meaning that
in your boot menu you will have each main generation directly followed by
its specialisations sorted alphabetically by their names.

If you want a different ordering for a specialisation, you can override
its sort-key which will cause the specialisation to be uncoupled from its
parent generation. It will then be sorted by its new sort-key just like
any other boot entry.

The sort-key is stored in the generation's bootspec, which means that
generations keep their sort-keys even if the original definition of the
generation was removed from the NixOS configuration.
It also means that updating the sort-key will only affect new generations,
while old ones will keep the sort-key that they were originally built with.

- boot.loader.systemd-boot.windows: Make Windows bootable from systemd-boot. This option is not necessary when Windows and
NixOS use the same EFI System Partition (ESP). In that case, Windows will automatically be
detected by systemd-boot.

However, if Windows is installed on a separate drive or ESP, you can use this option to add
a menu entry for each installation manually.

The attribute name is used for the title of the menu entry and internal file names.

- boot.loader.systemd-boot.xbootldrMountPoint: Where the XBOOTLDR partition is mounted.

If set, this partition will be used as $BOOT to store boot loader entries and extra files
instead of the EFI partition. As per the bootloader specification, it is recommended that
the EFI and XBOOTLDR partitions be mounted at `/efi` and `/boot`, respectively.

- boot.loader.timeout: Timeout (in seconds) until loader boots the default menu item. Use null if the loader menu should be displayed indefinitely.

- boot.modprobeConfig.enable: Whether to enable modprobe config. This is useful for systems like containers which do not require a kernel.
- boot.modprobeConfig.useUbuntuModuleBlacklist: Whether to enable Ubuntu distro's module blacklist.
- boot.nixStoreMountOpts: Defines the mount options used on a bind mount for the {file}`/nix/store`.
This affects the whole system except the nix store daemon, which will undo the bind mount.

`ro` enforces immutability of the Nix store.
The store daemon should already not put device mappers or suid binaries in the store,
meaning `nosuid` and `nodev` enforce what should already be the case.

- boot.plymouth.enable: Whether to enable Plymouth boot splash screen.
- boot.plymouth.extraConfig: Literal string to append to `configFile`
and the config file generated by the plymouth module.

- boot.plymouth.font: Font file made available for displaying text on the splash screen.

- boot.plymouth.logo: Logo which is displayed on the splash screen.
Currently supports PNG file format only.

- boot.plymouth.theme: Splash screen theme.

- boot.plymouth.themePackages: Extra theme packages for plymouth.

- boot.plymouth.tpm2-totp.enable: Whether to display a TOTP during boot using tpm2-totp and Plymouth.
- boot.plymouth.tpm2-totp.package: The tpm2-totp package to use.
- boot.postBootCommands: Shell commands to be executed just before systemd is started.

- boot.readOnlyNixStore
- boot.resumeDevice: Device for manual resume attempt during boot. This should be used primarily
if you want to resume from file. If left empty, the swap partitions are used.
Specify here the device where the file resides.
You should also use {var}`boot.kernelParams` to specify
`«resume_offset»`.

- boot.runSize: Size limit for the /run tmpfs. Look at {manpage}`mount(8)`, tmpfs size option,
for the accepted syntax.

- boot.specialFileSystems: Special filesystems that are mounted very early during boot.

- boot.supportedFilesystems: Names of supported filesystem types, or an attribute set of file system types
and their state. The set form may be used together with `lib.mkForce` to
explicitly disable support for specific filesystems, e.g. to disable ZFS
with an unsupported kernel.

- boot.swraid.enable: Whether to enable support for Linux MD RAID arrays.

When this is enabled, mdadm will be added to the system path,
and MD RAID arrays will be detected and activated
automatically, both in stage-1 (initramfs) and in stage-2 (the
final NixOS system).

This should be enabled if you want to be able to access and/or
boot from MD RAID arrays. {command}`nixos-generate-config`
should detect it correctly in the standard installation
procedure.

- boot.swraid.mdadmConf: Contents of {file}`/etc/mdadm.conf`.
- boot.systemd.services: Alias of {option}`systemd.services`.
- boot.systemd.sockets: Alias of {option}`systemd.sockets`.
- boot.systemd.targets: Alias of {option}`systemd.targets`.
- boot.systemdExecutable: The program to execute to start systemd.

- boot.tmp.cleanOnBoot: Whether to delete all files in {file}`/tmp` during boot.

- boot.tmp.tmpfsHugeMemoryPages: never        - Do not allocate huge memory pages. This is the default.
always       - Attempt to allocate huge memory page every time a new page is needed.
within_size  - Only allocate huge memory pages if it will be fully within i_size. Also respect madvise(2) hints. Recommended.
advise       - Only allocate huge memory pages if requested with madvise(2).

- boot.tmp.tmpfsSize: Size of tmpfs in percentage.
Percentage is defined by systemd.

- boot.tmp.useTmpfs: Whether to mount a tmpfs on {file}`/tmp` during boot.

::: {.note}
Large Nix builds can fail if the mounted tmpfs is not large enough.
In such a case either increase the tmpfsSize or disable this option.
:::

- boot.tmp.useZram: Whether to mount a zram device on {file}`/tmp` during boot.

::: {.note}
Large Nix builds can fail if the mounted zram device is not large enough.
In such a case either increase the zramSettings.zram-size or disable this option.
:::

- boot.tmp.zramSettings.compression-algorithm: The compression algorithm to use for the zram device.

See: <https://github.com/systemd/zram-generator/blob/main/zram-generator.conf.example>

- boot.tmp.zramSettings.fs-type: The file system to put on the device.

See: <https://github.com/systemd/zram-generator/blob/main/zram-generator.conf.example>

- boot.tmp.zramSettings.options: By default, file systems and swap areas are trimmed on-the-go
by setting "discard".
Setting this to the empty string clears the option.

See: <https://github.com/systemd/zram-generator/blob/main/zram-generator.conf.example>

- boot.tmp.zramSettings.zram-size: The size of the zram device, as a function of MemTotal, both in MB.
For example, if the machine has 1 GiB, and zram-size=ram/4,
then the zram device will have 256 MiB.
Fractions in the range 0.1–0.5 are recommended

See: <https://github.com/systemd/zram-generator/blob/main/zram-generator.conf.example>

- boot.tmpOnTmpfs: Alias of {option}`boot.tmp.useTmpfs`.
- boot.tmpOnTmpfsSize: Alias of {option}`boot.tmp.tmpfsSize`.
- boot.uki.configFile: The configuration file passed to {manpage}`ukify(1)` to create the UKI.

By default this configuration file is created from {option}`boot.uki.settings`.

- boot.uki.name: Name of the UKI
- boot.uki.settings: The configuration settings for ukify. These control what the UKI
contains and how it is built.

- boot.uki.tries: Number of boot attempts before this UKI is considered bad.

If no tries are specified (the default) automatic boot assessment remains inactive.

See documentation on [Automatic Boot Assessment](https://systemd.io/AUTOMATIC_BOOT_ASSESSMENT/) and
[boot counting](https://uapi-group.org/specifications/specs/boot_loader_specification/#boot-counting)
for more information.

- boot.uki.version: Version of the image or generation the UKI belongs to
- boot.uvesafb.enable: Whether to enable uvesafb.
- boot.uvesafb.gfx-mode: Screen resolution in modedb format. See [uvesafb](https://docs.kernel.org/fb/uvesafb.html) and [modedb](https://docs.kernel.org/fb/modedb.html) documentation for more details. The default value is a sensible default but may be not ideal for all setups.
- boot.uvesafb.v86d.package: Which v86d package to use with uvesafb
- boot.vesa: (Deprecated) This option, if set, activates the VESA 800x600 video
mode on boot and disables kernel modesetting. It is equivalent to
specifying `[ "vga=0x317" "nomodeset" ]` in the
{option}`boot.kernelParams` option. This option is
deprecated as of 2020: Xorg now works better with modesetting, and
you might want a different VESA vga setting, anyway.

- boot.zfs.allowHibernation: Allow hibernation support, this may be a unsafe option depending on your
setup. Make sure to NOT use Swap on ZFS.

- boot.zfs.devNodes: Name of directory from which to import ZFS device, this is passed to `zpool import`
as the value of the `-d` option.

For guidance on choosing this value, see
[the ZFS documentation](https://openzfs.github.io/openzfs-docs/Project%20and%20Community/FAQ.html#selecting-dev-names-when-creating-a-pool-linux).

- boot.zfs.enableLegacyCrypto
- boot.zfs.enableUnstable
- boot.zfs.enabled: True if ZFS filesystem support is enabled
- boot.zfs.extraPools: Name or GUID of extra ZFS pools that you wish to import during boot.

Usually this is not necessary. Instead, you should set the mountpoint property
of ZFS filesystems to `legacy` and add the ZFS filesystems to
NixOS's {option}`fileSystems` option, which makes NixOS automatically
import the associated pool.

However, in some cases (e.g. if you have many filesystems) it may be preferable
to exclusively use ZFS commands to manage filesystems. If so, since NixOS/systemd
will not be managing those filesystems, you will need to specify the ZFS pool here
so that NixOS automatically imports it on every boot.

- boot.zfs.forceImportAll: Forcibly import all ZFS pool(s).

If you set this option to `false` and NixOS subsequently fails to
import your non-root ZFS pool(s), you should manually import each pool with
"zpool import -f \<pool-name\>", and then reboot. You should only need to do
this once.

- boot.zfs.forceImportRoot: Forcibly import the ZFS root pool(s) during early boot.

This is enabled by default for backwards compatibility purposes, but it is highly
recommended to disable this option, as it bypasses some of the safeguards ZFS uses
to protect your ZFS pools.

If you set this option to `false` and NixOS subsequently fails to
boot because it cannot import the root pool, you should boot with the
`zfs_force=1` option as a kernel parameter (e.g. by manually
editing the kernel params in grub during boot). You should only need to do this
once.

- boot.zfs.modulePackage: Configured ZFS kernel module package.
- boot.zfs.package: Configured ZFS userland tools package.
- boot.zfs.passwordTimeout: Timeout in seconds to wait for password entry for decrypt at boot.

Defaults to 0, which waits forever.

- boot.zfs.pools: Configuration for individual pools to override global defaults.

- boot.zfs.removeLinuxDRM: Patch the kernel to change symbols needed by ZFS from
EXPORT_SYMBOL_GPL to EXPORT_SYMBOL.

Currently has no effect, but may again in future if a kernel
update breaks ZFS due to symbols being newly changed to GPL.

- boot.zfs.requestEncryptionCredentials: If true on import encryption keys or passwords for all encrypted datasets
are requested. To only decrypt selected datasets supply a list of dataset
names instead. For root pools the encryption key can be supplied via both
an interactive prompt (keylocation=prompt) and from a file (keylocation=file://).

- boot.zfs.useKeyringForCredentials: Whether to enable Uses the kernel keyring for encryption credentials with keyname=zfs-<poolname>.
- chaotic.appmenu-gtk3-module.enable: Sets the proper environment variable to use appmenu-gtk3-module.

- chaotic.duckdns.certs.enable: Whether to enable generate HTTPS cert via ACME/Let's Encrypt.
- chaotic.duckdns.certs.group: Group account under which the activation runs.
- chaotic.duckdns.certs.httpPort: Port number.
- chaotic.duckdns.certs.useHttpServer: Whether to enable use Lego's built-in HTTP server instead a request to DuckDNS.
- chaotic.duckdns.domain: Full domain to be updated, including the TLD.
- chaotic.duckdns.enable: Whether to enable DuckDNS config.
- chaotic.duckdns.environmentFile: Environment file from systemd, ensure it is set to 600 permissions.

Must contain DUCKDNS_TOKEN entry.

- chaotic.duckdns.ipv6.device: Device to get IPv6.
- chaotic.duckdns.ipv6.enable: Whether to enable enable IPv6.
- chaotic.duckdns.onCalendar: How often the DNS entry is updated.

The format is described in {manpage}`systemd.time(7)`.

- chaotic.hdr.enable: Whether to enable AMD-HDR as seen in
        https://lore.kernel.org/amd-gfx/20230810160314.48225-1-mwen@igalia.com/
.
- chaotic.hdr.kernelPackages
- chaotic.hdr.specialisation.enable: Isolates the changes in a specialisation.

- chaotic.hdr.wsiPackage: Gamescope WSI package to use

- chaotic.mesa-git.enable: Whether to use latest Mesa drivers.

WARNING: It will break NVIDIA's libgbm, don't use with NVIDIA Optimus setups.

- chaotic.mesa-git.extraPackages: Additional packages to add to OpenGL drivers.
This can be used to add OpenCL drivers, VA-API/VDPAU drivers etc.

WARNING: Don't use any of the `mesa.*`, replace with `pkgs.mesa_git.*`.

- chaotic.mesa-git.extraPackages32: Additional packages to add to 32-bit OpenGL drivers on 64-bit systems.

WARNING: Don't use any of the `mesa.*`, replace with `pkgs.mesa32_git.*`.

- chaotic.mesa-git.fallbackSpecialisation: Whether to add a specialisation with stable Mesa.
Recommended.

- chaotic.mesa-git.replaceBasePackage: Whether to impurely replace `mesa.out` with `mesa_git.out`.
Might increase compatibility. But you'll need `--impure` to build your configuration.

- chaotic.nordvpn.enable: Whether to enable the NordVPN daemon. Note that you'll have to set
`networking.firewall.checkReversePath = false;`, add UDP 1194
and TCP 443 to the list of allowed ports in the firewall and add your
user to the "nordvpn" group (`users.users.<username>.extraGroups`).

- chaotic.nyx.cache.enable: Whether to add Chaotic-Nyx's binary cache to settings.

- chaotic.nyx.nixPath.enable: Whether to add Chaotic-Nyx to `nix.nixPath`.

- chaotic.nyx.overlay.enable: Whether to add Chaotic-Nyx's overlay to system's pkgs.

- chaotic.nyx.overlay.flakeNixpkgs.config: Matches `nixpkgs.config` from the configuration of the Nix Packages collection.

- chaotic.nyx.overlay.onTopOf: Build Chaotic-Nyx's packages based on nyx's flake flakes or the system's pkgs.

- chaotic.nyx.registry.enable: Whether to add Chaotic-Nyx to `nix.registry`.

- chaotic.owl-wlr.enable: Whether to enable Owl - tiling wayland compositor based on wlroots. 
Enabling this option will add owl to your system.
.
- chaotic.owl-wlr.extraPackages: Extra packages to be installed system wide.
Both pkgs.kitty and pkgs.rofi is required by default config.

- chaotic.owl-wlr.package: The owl-wlr_git package to use. This option can provide different version of Owl compositor.

- chaotic.zfs-impermanence-on-shutdown.enable: Whether to enable Impermanence on safe-shutdown through ZFS snapshots.
- chaotic.zfs-impermanence-on-shutdown.snapshot: Snapshot of the volume in an "empty" state to roll back to.

- chaotic.zfs-impermanence-on-shutdown.volume: Full description to the volume including pool.
This volume must have a snapshot to an "empty" state.

WARNING: The volume will be rolled back to the snapshot on every safe-shutdown.

- console.colors: The 16 colors palette used by the virtual consoles.
Leave empty to use the default colors.
Colors must be in hexadecimal format and listed in
order from color 0 to color 15.

- console.earlySetup: Enable setting virtual console options as early as possible (in initrd).

- console.enable: Whether to enable virtual console.
- console.extraTTYs
- console.font: The font used for the virtual consoles.
Can be `null`, a font name, or a path to a PSF font file.

Use `null` to let the kernel choose a built-in font.
The default is 8x16, and, as of Linux 5.3, Terminus 32 bold for display
resolutions of 2560x1080 and higher.
These fonts cover the [IBM437][] character set.

[IBM437]: https://en.wikipedia.org/wiki/Code_page_437

- console.keyMap: The keyboard mapping table for the virtual consoles.

- console.packages: List of additional packages that provide console fonts, keymaps and
other resources for virtual consoles use.

- console.useXkbConfig: If set, configure the virtual console keymap from the xserver
keyboard settings.

- containers: A set of NixOS system configurations to be run as lightweight
containers.  Each container appears as a service
`container-«name»`
on the host system, allowing it to be started and stopped via
{command}`systemctl`.

- dev.gcc.autofdo.clangProfile: Path to an LLVM/Clang sample profile (e.g., .prof, .profdata, or .yaml)
for SamplePGO. When set, helper wrappers `clang-afdo` and `clang++-afdo`
are provided which call Clang with `-fprofile-sample-use=<path>`.

- dev.gcc.autofdo.enable: Whether to enable Install AutoFDO tooling (sample-based PGO helpers)..
- dev.gcc.autofdo.gccProfile: Path to a GCC AutoFDO profile file (e.g., .afdo) to use for sample PGO.
When set, helper wrappers `gcc-afdo` and `g++-afdo` are provided which
call GCC with `-fauto-profile=<path>` automatically.

- docker-containers
- documentation.dev.enable: Whether to install documentation targeted at developers.
* This includes man pages targeted at developers if {option}`documentation.man.enable` is
  set (this also includes "devman" outputs).
* This includes info pages targeted at developers if {option}`documentation.info.enable`
  is set (this also includes "devinfo" outputs).
* This includes other pages targeted at developers if {option}`documentation.doc.enable`
  is set (this also includes "devdoc" outputs).

- documentation.doc.enable: Whether to install documentation distributed in packages' `/share/doc`.
Usually plain text and/or HTML.
This also includes "doc" outputs.

- documentation.enable: Whether to install documentation of packages from
{option}`environment.systemPackages` into the generated system path.

See "Multiple-output packages" chapter in the nixpkgs manual for more info.

- documentation.info.enable: Whether to install info pages and the {command}`info` command.
This also includes "info" outputs.

- documentation.man.enable: Whether to install manual pages.
This also includes `man` outputs.

- documentation.man.generateCaches: Whether to generate the manual page index caches.
This allows searching for a page or
keyword using utilities like {manpage}`apropos(1)`
and the `-k` option of
{manpage}`man(1)`.

- documentation.man.man-db.enable: Whether to enable man-db as the default man page viewer.
- documentation.man.man-db.manualPages: The manual pages to generate caches for if {option}`documentation.man.generateCaches`
is enabled. Must be a path to a directory with man pages under
`/share/man`; see the source for an example.
Advanced users can make this a content-addressed derivation to save a few rebuilds.

- documentation.man.man-db.package: The `man-db` derivation to use. Useful to override
configuration options used for the package.

- documentation.man.man-db.skipPackages: Packages to *not* include in the man-db.
This can be useful to avoid unnecessary rebuilds due to packages that change frequently, like nixos-version.

- documentation.man.mandoc.cachePath: Change the paths where mandoc {manpage}`makewhatis(8)`generates the
manual page index caches. {option}`documentation.man.generateCaches`
should be enabled to allow cache generation. This list should only
include the paths to manpages installed in the system configuration,
i. e. /run/current-system/sw/share/man. {manpage}`makewhatis(8)`
creates a database in each directory using the files
`mansection/[arch/]title.section` and `catsection/[arch/]title.0`
in it. If a directory contains no manual pages, no database is
created in that directory.
This option only needs to be set manually if extra paths should be
indexed or {option}`documentation.man.manPath` contains paths that
can't be indexed.

- documentation.man.mandoc.enable: Whether to enable mandoc as the default man page viewer.
- documentation.man.mandoc.extraConfig: Extra configuration to write to {manpage}`man.conf(5)`.

- documentation.man.mandoc.manPath: Change the paths included in the MANPATH environment variable,
i. e. the directories where {manpage}`man(1)`
looks for section-specific directories of man pages.
You only need to change this setting if you want extra man pages
(e. g. in non-english languages). All values must be strings that
are a valid path from the target prefix (without including it).
The first value given takes priority. Note that this will not
add manpath directives to {manpage}`man.conf(5)`.

- documentation.man.mandoc.package: The `mandoc` derivation to use. Useful to override
configuration options used for the package.

- documentation.man.mandoc.settings: Configuration for {manpage}`man.conf(5)`
- documentation.man.manualPages: Alias of {option}`documentation.man.man-db.manualPages`.
- documentation.nixos.checkRedirects: Check redirects for manualHTML.

- documentation.nixos.enable: Whether to install NixOS's own documentation.

- This includes man pages like
  {manpage}`configuration.nix(5)` if {option}`documentation.man.enable` is
  set.
- This includes the HTML manual and the {command}`nixos-help` command if
  {option}`documentation.doc.enable` is set.

- documentation.nixos.extraModuleSources: Which extra NixOS module paths the generated NixOS's documentation should strip
from options.

- documentation.nixos.extraModules: Modules for which to show options even when not imported.

- documentation.nixos.includeAllModules: Whether the generated NixOS's documentation should include documentation for all
the options from all the NixOS modules included in the current
`configuration.nix`. Disabling this will make the manual
generator to ignore options defined outside of `baseModules`.

- documentation.nixos.options.allowDocBook
- documentation.nixos.options.splitBuild: Whether to split the option docs build into a cacheable and an uncacheable part.
Splitting the build can substantially decrease the amount of time needed to build
the manual, but some user modules may be incompatible with this splitting.

- documentation.nixos.options.warningsAreErrors: Treat warning emitted during the option documentation build (eg for missing option
descriptions) as errors.

- dysnomia: Alias of {option}`services.dysnomia`.
- ec2.efi: Whether the EC2 instance is using EFI.

- ec2.hvm: Unused legacy option. While support for non-hvm has been dropped, we keep this option around so that NixOps remains compatible with a somewhat recent `nixpkgs` and machines with an old `stateVersion`.
- ec2.zfs.datasets: Datasets to create under the `tank` and `boot` zpools.

**NOTE:** This option is used only at image creation time, and
does not attempt to declaratively create or manage datasets
on an existing system.

- ec2.zfs.enable: Whether the EC2 instance uses a ZFS root.

- environment.binsh: The shell executable that is linked system-wide to
`/bin/sh`. Please note that NixOS assumes all
over the place that shell to be Bash, so override the default
setting only if you know exactly what you're doing.

- environment.blcr.enable
- environment.budgie.excludePackages: Which packages Budgie should exclude from the default environment.
- environment.checkConfigurationOptions: Alias of {option}`_module.check`.
- environment.cinnamon.excludePackages: Which packages cinnamon should exclude from the default environment
- environment.corePackages: Set of core packages for a normal interactive system.

Only change this if you know what you're doing!

Like with systemPackages, packages are installed to
{file}`/run/current-system/sw`. They are
automatically available to all users, and are
automatically updated every time you rebuild the system
configuration.

- environment.cosmic.excludePackages: List of packages to exclude from the COSMIC environment.
- environment.debuginfodServers: List of urls of debuginfod servers for tools like {command}`gdb` and {command}`valgrind` to use.

Unrelated to {option}`environment.enableDebugInfo`.

- environment.defaultPackages: Set of default packages that aren't strictly necessary
for a running system, entries can be removed for a more
minimal NixOS installation.

Like with systemPackages, packages are installed to
{file}`/run/current-system/sw`. They are
automatically available to all users, and are
automatically updated every time you rebuild the system
configuration.

- environment.enableAllTerminfo: Whether to install all terminfo outputs

- environment.enableDebugInfo: Some NixOS packages provide debug symbols. However, these are
not included in the system closure by default to save disk
space. Enabling this option causes the debug symbols to appear
in {file}`/run/current-system/sw/lib/debug/.build-id`,
where tools such as {command}`gdb` can find them.
If you need debug symbols for a package that doesn't
provide them by default, you can enable them as follows:

    nixpkgs.config.packageOverrides = pkgs: {
      hello = pkgs.hello.overrideAttrs (oldAttrs: {
        separateDebugInfo = true;
      });
    };

- environment.enlightenment.excludePackages: Which packages Enlightenment should exclude from the default environment
- environment.etc: Set of files that have to be linked in {file}`/etc`.

- environment.extraInit: Shell script code called during global environment initialisation
after all variables and profileVariables have been set.
This code is assumed to be shell-independent, which means you should
stick to pure sh without sh word split.

- environment.extraOutputsToInstall: Entries listed here will be appended to the `meta.outputsToInstall` attribute for each package in `environment.systemPackages`, and the files from the corresponding derivation outputs symlinked into {file}`/run/current-system/sw`.

For example, this can be used to install the `dev` and `info` outputs for all packages in the system environment, if they are available.

To use specific outputs instead of configuring them globally, select the corresponding attribute on the package derivation, e.g. `libxml2.dev` or `coreutils.info`.

- environment.extraSetup: Shell fragments to be run after the system environment has been created. This should only be used for things that need to modify the internals of the environment, e.g. generating MIME caches. The environment being built can be accessed at $out.
- environment.freetds: Configure freetds database entries. Each attribute denotes
a section within freetds.conf, and the value (a string) is the config
content for that section. When at least one entry is configured
the global environment variables FREETDSCONF, FREETDS and SYBASE
will be configured to allow the programs that use freetds to find the
library and config.

- environment.gnome.excludePackages: Which packages gnome should exclude from the default environment
- environment.homeBinInPath: Include ~/bin/ in $PATH.

- environment.interactiveShellInit: Shell script code called during interactive shell initialisation.
This code is assumed to be shell-independent, which means you should
stick to pure sh without sh word split.

- environment.ldso: The executable to link into the normal FHS location of the ELF loader.

- environment.ldso32: The executable to link into the normal FHS location of the 32-bit ELF loader.

This currently only works on x86_64 architectures.

- environment.localBinInPath: Add ~/.local/bin/ to $PATH

- environment.loginShellInit: Shell script code called during login shell initialisation.
This code is assumed to be shell-independent, which means you should
stick to pure sh without sh word split.

- environment.lxqt.excludePackages: Which LXQt packages to exclude from the default environment
- environment.mate.excludePackages: Which MATE packages to exclude from the default environment
- environment.memoryAllocator.provider: The system-wide memory allocator.

Briefly, the system-wide memory allocator providers are:

- `libc`: the standard allocator provided by libc
- `graphene-hardened`: Hardened memory allocator coming from GrapheneOS project. The default configuration template has all normal optional security features enabled and is quite aggressive in terms of sacrificing performance and memory usage for security. 
- `graphene-hardened-light`: Hardened memory allocator coming from GrapheneOS project. The light configuration template disables the slab quarantines, write after free check, slot randomization and raises the guard slab interval from 1 to 8 but leaves zero-on-free and slab canaries enabled. The light configuration has solid performance and memory usage while still being far more secure than mainstream allocators with much better security properties. 
- `jemalloc`: A general purpose allocator that emphasizes fragmentation avoidance and scalable concurrency support. 
- `mimalloc`: A compact and fast general purpose allocator, which may optionally be built with mitigations against various heap vulnerabilities. 
- `scudo`: A user-mode allocator based on LLVM Sanitizer’s CombinedAllocator, which aims at providing additional mitigations against heap based vulnerabilities, while maintaining good performance. 

::: {.warning}
Selecting an alternative allocator (i.e., anything other than
`libc`) may result in instability, data loss,
and/or service failure.
:::

- environment.noXlibs
- environment.pantheon.excludePackages: Which packages pantheon should exclude from the default environment
- environment.pathsToLink: List of directories to be symlinked in {file}`/run/current-system/sw`.
- environment.plasma6.excludePackages: List of default packages to exclude from the configuration
- environment.profileRelativeEnvVars: Attribute set of environment variable.  Each attribute maps to a list
of relative paths.  Each relative path is appended to the each profile
of {option}`environment.profiles` to form the content of the
corresponding environment variable.

- environment.profileRelativeSessionVariables: Attribute set of environment variable used in the global
environment. These variables will be set by PAM early in the
login process.

Variable substitution is available as described in
{manpage}`pam_env.conf(5)`.

Each attribute maps to a list of relative paths. Each relative
path is appended to the each profile of
{option}`environment.profiles` to form the content of
the corresponding environment variable.

Also, these variables are merged into
[](#opt-environment.profileRelativeEnvVars) and it is
therefore not possible to use PAM style variables such as
`@{HOME}`.

- environment.profiles: A list of profiles used to setup the global environment.

- environment.sessionVariables: A set of environment variables used in the global environment.
These variables will be set by PAM early in the login process.

The value of each session variable can be either a string or a
list of strings. The latter is concatenated, interspersed with
colon characters.

Setting a variable to `null` does nothing. You can override a
variable set by another module to `null` to unset it.

Note, due to limitations in the PAM format values may not
contain the `"` character.

Also, these variables are merged into
[](#opt-environment.variables) and it is
therefore not possible to use PAM style variables such as
`@{HOME}`.

- environment.shell.enable: Whether to enable the shell environment.

This does NOT necessarily disable all shells on your system. Instead it
just disables the shell environment that configures user shells (i.e.
those in `environment.shells`).

System services might still depend on and use shells even if this
option is set to false.

Only set this option if you're sure that you can recover from potential
issues.

- environment.shellAliases: An attribute set that maps aliases (the top level attribute names in
this option) to command strings or directly to build outputs. The
aliases are added to all users' shells.
Aliases mapped to `null` are ignored.

- environment.shellInit: Shell script code called during shell initialisation.
This code is assumed to be shell-independent, which means you should
stick to pure sh without sh word split.

- environment.shells: A list of permissible login shells for user accounts.
No need to mention `/bin/sh`
here, it is placed into this list implicitly.

- environment.stub-ld.enable: Install a stub ELF loader to print an informative error message
in the event that a user attempts to run an ELF binary not
compiled for NixOS.

- environment.systemPackages: The set of packages that appear in
/run/current-system/sw.  These packages are
automatically available to all users, and are
automatically updated every time you rebuild the system
configuration.  (The latter is the main difference with
installing them in the default profile,
{file}`/nix/var/nix/profiles/default`.

- environment.unixODBCDrivers: Specifies Unix ODBC drivers to be registered in
{file}`/etc/odbcinst.ini`.  You may also want to
add `pkgs.unixODBC` to the system path to get
a command line client to connect to ODBC databases.

- environment.usrbinenv: The {manpage}`env(1)` executable that is linked system-wide to
`/usr/bin/env`.

- environment.variables: A set of environment variables used in the global environment.
These variables will be set on shell initialisation (e.g. in /etc/profile).

The value of each variable can be either a string or a list of
strings.  The latter is concatenated, interspersed with colon
characters.

Setting a variable to `null` does nothing. You can override a
variable set by another module to `null` to unset it.

- environment.wordlist.enable: Whether to enable environment variables for lists of words.
- environment.wordlist.lists: A set with the key names being the environment variable you'd like to
set and the values being a list of paths to text documents containing
lists of words. The various files will be merged, sorted, duplicates
removed, and extraneous spacing removed.

If you have a handful of words that you want to add to an already
existing wordlist, you may find `builtins.toFile` useful for this
task.

- environment.wvdial.dialerDefaults: Contents of the "Dialer Defaults" section of
<filename>/etc/wvdial.conf</filename>.

- environment.wvdial.pppDefaults: Default ppp settings for wvdial.
- environment.xfce.excludePackages: Which packages XFCE should exclude from the default environment
- fileSystems: The file systems to be mounted.  It must include an entry for
the root directory (`mountPoint = "/"`).  Each
entry in the list is an attribute set with the following fields:
`mountPoint`, `device`,
`fsType` (a file system type recognised by
{command}`mount`; defaults to
`"auto"`), and `options`
(the mount options passed to {command}`mount` using the
{option}`-o` flag; defaults to `[ "defaults" ]`).

Instead of specifying `device`, you can also
specify a volume label (`label`) for file
systems that support it, such as ext2/ext3 (see {command}`mke2fs -L`).

- fonts.enableCoreFonts
- fonts.enableDefaultFonts: Alias of {option}`fonts.enableDefaultPackages`.
- fonts.enableDefaultPackages: Enable a basic set of fonts providing several styles
and families and reasonable coverage of Unicode.

- fonts.enableFontDir: Alias of {option}`fonts.fontDir.enable`.
- fonts.enableGhostscriptFonts: Whether to add the fonts provided by Ghostscript (such as
various URW fonts and the “Base-14” Postscript fonts) to the
list of system fonts, making them available to X11
applications.

- fonts.fontDir.decompressFonts: Whether to decompress fonts in
{file}`/run/current-system/sw/share/X11/fonts`.

- fonts.fontDir.enable: Whether to create a directory with links to all fonts in
{file}`/run/current-system/sw/share/X11/fonts`.

- fonts.fontconfig.allowBitmaps: Allow bitmap fonts. Set to `false` to ban all
bitmap fonts.

- fonts.fontconfig.allowType1: Allow Type-1 fonts. Default is `false` because of
poor rendering.

- fonts.fontconfig.antialias: Enable font antialiasing. At high resolution (> 200 DPI),
antialiasing has no visible effect; users of such displays may want
to disable this option.

- fonts.fontconfig.cache32Bit: Generate system fonts cache for 32-bit applications.

- fonts.fontconfig.confPackages: Fontconfig configuration packages.

- fonts.fontconfig.defaultFonts.emoji: System-wide default emoji font(s). Multiple fonts may be listed
in case a font does not support all emoji.

Note that fontconfig matches color emoji fonts preferentially,
so if you want to use a black and white font while having
a color font installed (eg. Noto Color Emoji installed alongside
Noto Emoji), fontconfig will still choose the color font even
when it is later in the list.

- fonts.fontconfig.defaultFonts.monospace: System-wide default monospace font(s). Multiple fonts may be
listed in case multiple languages must be supported.

- fonts.fontconfig.defaultFonts.sansSerif: System-wide default sans serif font(s). Multiple fonts may be
listed in case multiple languages must be supported.

- fonts.fontconfig.defaultFonts.serif: System-wide default serif font(s). Multiple fonts may be listed
in case multiple languages must be supported.

- fonts.fontconfig.dpi
- fonts.fontconfig.enable: If enabled, a Fontconfig configuration file will be built
pointing to a set of default fonts.  If you don't care about
running X11 applications or any other program that uses
Fontconfig, you can turn this option off and prevent a
dependency on all those fonts.

- fonts.fontconfig.forceAutohint
- fonts.fontconfig.hinting.autohint: Enable the autohinter in place of the default interpreter.
The results are usually lower quality than correctly-hinted
fonts, but better than unhinted fonts.

- fonts.fontconfig.hinting.enable: Enable font hinting. Hinting aligns glyphs to pixel boundaries to
improve rendering sharpness at low resolution. At high resolution
(> 200 dpi) hinting will do nothing (at best); users of such
displays may want to disable this option.

- fonts.fontconfig.hinting.style: Hintstyle is the amount of font reshaping done to line up
to the grid.

slight will make the font more fuzzy to line up to the grid but
will be better in retaining font shape, while full will be a
crisp font that aligns well to the pixel grid but will lose a
greater amount of font shape.

- fonts.fontconfig.includeUserConf: Include the user configuration from
{file}`~/.config/fontconfig/fonts.conf` or
{file}`~/.config/fontconfig/conf.d`.

- fonts.fontconfig.localConf: System-wide customization file contents, has higher priority than
`defaultFonts` settings.

- fonts.fontconfig.penultimate
- fonts.fontconfig.renderMonoTTFAsBitmap
- fonts.fontconfig.subpixel.lcdfilter: FreeType LCD filter. At high resolution (> 200 DPI), LCD filtering
has no visible effect; users of such displays may want to select
`none`.

- fonts.fontconfig.subpixel.rgba: Subpixel order. The overwhelming majority of displays are
`rgb` in their normal orientation. Select
`vrgb` for mounting such a display 90 degrees
clockwise from its normal orientation or `vbgr`
for mounting 90 degrees counter-clockwise. Select
`bgr` in the unlikely event of mounting 180
degrees from the normal orientation. Reverse these directions in
the improbable event that the display's native subpixel order is
`bgr`.

- fonts.fontconfig.ultimate.allowBitmaps: Alias of {option}`fonts.fontconfig.allowBitmaps`.
- fonts.fontconfig.ultimate.allowType1: Alias of {option}`fonts.fontconfig.allowType1`.
- fonts.fontconfig.ultimate.enable
- fonts.fontconfig.ultimate.forceAutohint: Alias of {option}`fonts.fontconfig.forceAutohint`.
- fonts.fontconfig.ultimate.preset
- fonts.fontconfig.ultimate.renderMonoTTFAsBitmap: Alias of {option}`fonts.fontconfig.renderMonoTTFAsBitmap`.
- fonts.fontconfig.ultimate.substitutions
- fonts.fontconfig.ultimate.useEmbeddedBitmaps: Alias of {option}`fonts.fontconfig.useEmbeddedBitmaps`.
- fonts.fontconfig.useEmbeddedBitmaps: Use embedded bitmaps in fonts like Calibri.
- fonts.fonts: Alias of {option}`fonts.packages`.
- fonts.optimizeForVeryHighDPI
- fonts.packages: List of primary font packages.
- gtk.iconCache.enable: Whether to build icon theme caches for GTK applications.

- hardware.acpilight.enable: Enable acpilight.
This will allow brightness control via xbacklight from users in the video group

- hardware.alsa.cardAliases: Assign custom names and reorder the sound cards.

::: {.note}
You can find the card ids by looking at `/proc/asound/cards`.
:::

- hardware.alsa.config: The content of the system-wide ALSA configuration (/etc/asound.conf).

Documentation of the configuration language and examples can be found
in the unofficial ALSA wiki: <https://alsa.opensrc.org/Asoundrc>

- hardware.alsa.controls: Virtual volume controls (softvols) to add to a sound card.
These can be used to control the volume of specific applications
or a digital output device (HDMI video card).

- hardware.alsa.defaultDevice.capture: The default capture device (i.e. microphone).
Leave empty to let ALSA pick the default automatically.

::: {.note}
The device can be changed at runtime by setting the ALSA_AUDIO_IN
environment variables (but only before starting a program).
:::

- hardware.alsa.defaultDevice.playback: The default playback device.
Leave empty to let ALSA pick the default automatically.

::: {.note}
The device can be changed at runtime by setting the ALSA_AUDIO_OUT
environment variables (but only before starting a program).
:::

- hardware.alsa.deviceAliases: Assign custom names to sound cards.

- hardware.alsa.enable: Whether to set up the user space part of the Advanced Linux Sound Architecture (ALSA)

::: {.warning}
Enable this option only if you want to use ALSA as your main sound system,
not if you're using a sound server (e.g. PulseAudio or Pipewire).
:::

- hardware.alsa.enableOSSEmulation: Whether to enable the OSS emulation.
- hardware.alsa.enablePersistence: Whether to enable ALSA sound card state saving on shutdown.
This is generally not necessary if you're using an external sound server.

- hardware.alsa.enableRecorder: Whether to set up a loopback device that continuously records and
allows to play back audio from the computer.

The loopback device is named `pcm.recorder`, audio can be saved
by capturing from this device as with any microphone.

::: {.note}
By default the output is duplicated to the recorder assuming stereo
audio, for a more complex layout you have to override the pcm.splitter
device using `hardware.alsa.config`.
See the generated /etc/asound.conf for its definition.
:::

- hardware.amdgpu.amdvlk
- hardware.amdgpu.initrd.enable: Whether to enable loading `amdgpu` kernelModule in stage 1.
Can fix lower resolution in boot screen during initramfs phase
.
- hardware.amdgpu.legacySupport.enable: Whether to enable using `amdgpu` kernel driver instead of `radeon` for Southern Islands
(Radeon HD 7000) series and Sea Islands (Radeon HD 8000)
series cards. Note: this removes support for analog video outputs,
which is only available in the `radeon` driver
.
- hardware.amdgpu.opencl.enable: Whether to enable OpenCL support using ROCM runtime library.
- hardware.amdgpu.overdrive.enable: Whether to enable `amdgpu` overdrive mode for overclocking.
- hardware.amdgpu.overdrive.ppfeaturemask: Sets the `amdgpu.ppfeaturemask` kernel option. It can be used to enable the overdrive bit.
Default is `0xfffd7fff` as it is less likely to cause flicker issues. Setting it to
`0xffffffff` enables all features, but also can be unstable. See
[the kernel documentation](https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/drivers/gpu/drm/amd/include/amd_shared.h#n169)
for more information.

- hardware.apple.touchBar.enable: Whether to enable support for the Touch Bar on some Apple laptops using tiny-dfr.
- hardware.apple.touchBar.package: The tiny-dfr package to use.
- hardware.apple.touchBar.settings: Configuration for tiny-dfr. See [example configuration][1] for available options.

[1]: https://github.com/WhatAmISupposedToPutHere/tiny-dfr/blob/master/share/tiny-dfr/config.toml

- hardware.audio.rnnoise.enable: Whether to enable Enable RNNoise-based virtual microphone (PipeWire filter-chain)..
- hardware.bladeRF.enable: Enables udev rules for BladeRF devices. By default grants access
to users in the "bladerf" group. You may want to install the
libbladeRF package.

- hardware.block.defaultScheduler: Default block I/O scheduler.

Unless `null`, the value is assigned through a udev rule matching all
block devices.

- hardware.block.defaultSchedulerExclude: Device name pattern to exclude from default scheduler assignment
through {option}`config.hardware.block.defaultScheduler` and
{option}`config.hardware.block.defaultSchedulerRotational`.

By default this excludes loop devices which generally do not benefit
from extra I/O scheduling in addition to the scheduling already
performed for their backing devices.

This setting does not affect {option}`config.hardware.block.scheduler`.

- hardware.block.defaultSchedulerRotational: Default block I/O scheduler for rotational drives (e.g. hard disks).

Unless `null`, the value is assigned through a udev rule matching all
rotational block devices.

This option takes precedence over
{option}`config.hardware.block.defaultScheduler`.

- hardware.block.scheduler: Assign block I/O scheduler by device name pattern.

Names are matched using the {manpage}`udev(7)` pattern syntax:

`*`
:  Matches zero or more characters.

`?`
:  Matches any single character.

`[]`
:  Matches any single character specified in the brackets. Ranges are
   supported via the `-` character.

`|`
:  Separates alternative patterns.


Please note that overlapping patterns may produce unexpected results.
More complex configurations requiring these should instead be specified
directly through custom udev rules, for example via
[{option}`config.services.udev.extraRules`](#opt-services.udev.extraRules),
to ensure correct ordering.

Available schedulers depend on the kernel configuration but modern
Linux systems typically support:

`none`
:  No‐operation scheduler with no re‐ordering of requests. Suitable
   for devices with fast random I/O such as NVMe SSDs.

[`mq-deadline`](https://www.kernel.org/doc/html/latest/block/deadline-iosched.html)
:  Simple latency‐oriented general‐purpose scheduler.

[`kyber`](https://www.kernel.org/doc/html/latest/block/kyber-iosched.html)
:  Simple latency‐oriented scheduler for fast multi‐queue devices
   like NVMe SSDs.

[`bfq`](https://www.kernel.org/doc/html/latest/block/bfq-iosched.html)
:  Complex fairness‐oriented scheduler. Higher processing overhead,
   but good interactive response, especially with slower devices.


Schedulers assigned through this option take precedence over
{option}`config.hardware.block.defaultScheduler` and
{option}`config.hardware.block.defaultSchedulerRotational` but may be
overridden by other udev rules.

- hardware.bluetooth.config: Alias of {option}`hardware.bluetooth.settings`.
- hardware.bluetooth.disabledPlugins: Built-in plugins to disable
- hardware.bluetooth.enable: Whether to enable support for Bluetooth.
- hardware.bluetooth.extraConfig
- hardware.bluetooth.hsphfpd.enable: Whether to enable support for hsphfpd[-prototype] implementation.
- hardware.bluetooth.input: Set configuration for the input service (/etc/bluetooth/input.conf).
See <https://github.com/bluez/bluez/blob/master/profiles/input/input.conf> for full list of options.

- hardware.bluetooth.network: Set configuration for the network service (/etc/bluetooth/network.conf).
See <https://github.com/bluez/bluez/blob/master/profiles/network/network.conf> for full list of options.

- hardware.bluetooth.package: The bluez package to use.
- hardware.bluetooth.powerOnBoot: Whether to power up the default Bluetooth controller on boot.
- hardware.bluetooth.settings: Set configuration for system-wide bluetooth (/etc/bluetooth/main.conf).
See <https://github.com/bluez/bluez/blob/master/src/main.conf> for full list of options.

- hardware.brightnessctl
- hardware.brillo.enable: Whether to enable brillo in userspace.
This will allow brightness control from users in the video group
.
- hardware.bumblebee.connectDisplay: Set to true if you intend to connect your discrete card to a
monitor. This option will set up your Nvidia card for EDID
discovery and to turn on the monitor signal.

Only nvidia driver is supported so far.

- hardware.bumblebee.driver: Set driver used by bumblebeed. Supported are nouveau and nvidia.

- hardware.bumblebee.enable: Enable the bumblebee daemon to manage Optimus hybrid video cards.
This should power off secondary GPU until its use is requested
by running an application with optirun.

- hardware.bumblebee.group: Group for bumblebee socket
- hardware.bumblebee.pmMethod: Set preferred power management method for unused card.

- hardware.ckb.enable: Alias of {option}`hardware.ckb-next.enable`.
- hardware.ckb.package: Alias of {option}`hardware.ckb-next.package`.
- hardware.ckb-next.enable: Whether to enable the Corsair keyboard/mouse driver.
- hardware.ckb-next.gid: Limit access to the ckb daemon to a particular group.

- hardware.ckb-next.package: The ckb-next package to use.
- hardware.cooling.autoFancontrol.enable: Whether to enable Autogenerate /etc/fancontrol at boot with a conservative quiet profile..
- hardware.cooling.autoFancontrol.hysteresis: Hysteresis (°C) for fancontrol transitions.
- hardware.cooling.autoFancontrol.interval: Polling interval (seconds).
- hardware.cooling.autoFancontrol.maxPwm: Maximum PWM value (0–255).
- hardware.cooling.autoFancontrol.maxTemp: Temperature (°C) for max fan speed.
- hardware.cooling.autoFancontrol.minPwm: Minimum PWM value (0–255) to avoid fan stall (quiet).
- hardware.cooling.autoFancontrol.minTemp: Temperature (°C) where fans start ramping (quiet).
- hardware.cooling.enable: Whether to enable Enable cooling stack (sensors + optional fancontrol)..
- hardware.cooling.gpuFancontrol.enable: Whether to enable Include AMDGPU fan (pwm1) in the generated fancontrol profile (manual control)..
- hardware.cooling.gpuFancontrol.hysteresis: GPU fancontrol hysteresis (°C).
- hardware.cooling.gpuFancontrol.maxPwm: GPU maximum PWM (0–255).
- hardware.cooling.gpuFancontrol.maxTemp: GPU temperature (°C) for max fan speed.
- hardware.cooling.gpuFancontrol.minPwm: GPU minimum PWM (0–255) to avoid stall while staying quiet.
- hardware.cooling.gpuFancontrol.minTemp: GPU temperature (°C) to start ramping.
- hardware.cooling.loadNct6775: Load the Nuvoton/ASUS Super I/O PWM driver (nct6775) for motherboard fan control.
- hardware.coral.pcie.enable: Whether to enable Coral PCIe support.
- hardware.coral.usb.enable: Whether to enable Coral USB support.
- hardware.cpu.amd.microcodePackage: The microcode-amd package to use.
- hardware.cpu.amd.ryzen-smu.enable: Whether to enable ryzen_smu, a linux kernel driver that exposes access to the SMU (System Management Unit) for certain AMD Ryzen Processors.

WARNING: Damage cause by use of your AMD processor outside of official AMD specifications or outside of factory settings are not covered under any AMD product warranty and may not be covered by your board or system manufacturer's warranty
.
- hardware.cpu.amd.sev.enable: Whether to enable access to the AMD SEV device.
- hardware.cpu.amd.sev.group: Group to assign to the SEV device.
- hardware.cpu.amd.sev.mode: Mode to set for the SEV device.
- hardware.cpu.amd.sev.user: Owner to assign to the SEV device.
- hardware.cpu.amd.sevGuest.enable: Whether to enable access to the AMD SEV guest device.
- hardware.cpu.amd.sevGuest.group: Group to assign to the SEV guest device.
- hardware.cpu.amd.sevGuest.mode: Mode to set for the SEV guest device.
- hardware.cpu.amd.sevGuest.user: Owner to assign to the SEV guest device.
- hardware.cpu.amd.updateMicrocode: Update the CPU microcode for AMD processors.

- hardware.cpu.intel.sgx.enableDcapCompat: Whether to enable backward compatibility for SGX software build for the
out-of-tree Intel SGX DCAP driver.

Creates symbolic links for the SGX devices `/dev/sgx_enclave`
and `/dev/sgx_provision` to make them available as
`/dev/sgx/enclave`  and `/dev/sgx/provision`,
respectively.

- hardware.cpu.intel.sgx.provision.enable: Whether to enable access to the Intel SGX provisioning device.
- hardware.cpu.intel.sgx.provision.group: Group to assign to the SGX provisioning device.
- hardware.cpu.intel.sgx.provision.mode: Mode to set for the SGX provisioning device.
- hardware.cpu.intel.sgx.provision.user: Owner to assign to the SGX provisioning device.
- hardware.cpu.intel.updateMicrocode: Update the CPU microcode for Intel processors.

- hardware.cpu.x86.msr.enable: Whether to enable the `msr` (Model-Specific Registers) kernel module and configure `udev` rules for its devices (usually `/dev/cpu/*/msr`).
- hardware.cpu.x86.msr.group: Group to set for devices of the `msr` kernel subsystem.
- hardware.cpu.x86.msr.mode: Mode to set for devices of the `msr` kernel subsystem.
- hardware.cpu.x86.msr.owner: Owner to set for devices of the `msr` kernel subsystem.
- hardware.cpu.x86.msr.settings: Parameters for the `msr` kernel module.
- hardware.decklink.enable: Whether to enable hardware support for the Blackmagic Design Decklink audio/video interfaces.
- hardware.deviceTree.base
- hardware.deviceTree.dtbSource: Path to dtb directory that overlays and other processing will be applied to. Uses
device trees bundled with the Linux kernel by default.

- hardware.deviceTree.dtboBuildExtraIncludePaths: Additional include paths that will be passed to the preprocessor when creating the final .dts to compile into .dtbo

- hardware.deviceTree.dtboBuildExtraPreprocessorFlags: Additional flags to pass to the preprocessor during dtbo compilations

- hardware.deviceTree.enable: Build device tree files. These are used to describe the
non-discoverable hardware of a system.

- hardware.deviceTree.filter: Only include .dtb files matching glob expression.

- hardware.deviceTree.kernelPackage: Kernel package where device tree include directory is from. Also used as default source of dtb package to apply overlays to

- hardware.deviceTree.name: The name of an explicit dtb to be loaded, relative to the dtb base.
Useful in extlinux scenarios if the bootloader doesn't pick the
right .dtb file from FDTDIR.

- hardware.deviceTree.overlays: List of overlays to apply to base device-tree (.dtb) files.

- hardware.deviceTree.package: A path containing the result of applying `overlays` to `kernelPackage`.

- hardware.digitalbitbox.enable: Enables udev rules for Digital Bitbox devices.

- hardware.digitalbitbox.package: The digitalbitbox package to use. This can be used to install a package with udev rules that differ from the defaults.

- hardware.display.edid.enable: Enables handling of EDID files

- hardware.display.edid.linuxhw: Exposes EDID files from users-sourced database at <https://github.com/linuxhw/EDID>

Attribute names will be mapped to EDID filenames `<NAME>.bin`.

Attribute values are lists of `awk` regexp patterns that (together) must match
exactly one line in either of:
- [AnalogDisplay.md](https://raw.githubusercontent.com/linuxhw/EDID/master/AnalogDisplay.md)
- [DigitalDisplay.md](https://raw.githubusercontent.com/linuxhw/EDID/master/DigitalDisplay.md)

There is no universal way of locating your device config, but here are some practical tips:
1. locate your device:
  - find your model number (second column)
  - locate manufacturer (first column) and go through the list manually
2. narrow down results using other columns until there is only one left:
  - `Name` column
  - production date (`Made` column)
  - resolution `Res`
  - screen diagonal (`Inch` column)
  - as a last resort use `ID` from the last column

- hardware.display.edid.modelines: Attribute set of XFree86 Modelines automatically converted
and exposed as `edid/<name>.bin` files in initrd.
See for more information:
- <https://en.wikipedia.org/wiki/XFree86_Modeline>

- hardware.display.edid.packages: List of packages containing EDID binary files at `$out/lib/firmware/edid`.
Such files will be available for use in `drm.edid_firmware` kernel
parameter as `edid/<filename>`.

You can craft one directly here or use sibling options `linuxhw` and `modelines`.

- hardware.display.outputs: Hardware/kernel-level configuration of specific outputs.

- hardware.enableAllFirmware: Whether to enable all firmware regardless of license.
- hardware.enableAllHardware: Whether to enable Enable support for most hardware.
- hardware.enableKSM: Alias of {option}`hardware.ksm.enable`.
- hardware.enableRedistributableFirmware: Whether to enable firmware with a license allowing redistribution.
- hardware.facetimehd.enable: Whether to enable the facetimehd kernel module.
- hardware.facetimehd.withCalibration: Whether to include sensor calibration files for facetimehd.
This makes colors look much better but is experimental, see
<https://github.com/patjak/facetimehd/wiki/Extracting-the-sensor-calibration-files>
for details.

- hardware.facter.report: Hardware report data generated by nixos-facter.

See <https://nix-community.github.io/nixos-facter/> for more information.

- hardware.facter.reportPath: Path to a hardware report generated by nixos-facter.

To generate a report, run the following as root:
```
nix-shell -p nixos-facter --run nixos-facter > facter.json
```

See <https://nix-community.github.io/nixos-facter/> for more information.

- hardware.fancontrol.config: Required fancontrol configuration file content. See {manpage}`pwmconfig(8)` from the lm_sensors package.
- hardware.fancontrol.enable: Whether to enable software fan control (requires fancontrol.config).
- hardware.firmware: List of packages containing firmware files.  Such files
will be loaded automatically if the kernel asks for them
(i.e., when it has detected specific hardware that requires
firmware to function).  If multiple packages contain firmware
files with the same name, the first package in the list takes
precedence.  Note that you must rebuild your system if you add
files to any of these directories.

- hardware.firmwareCompression: Whether to compress firmware files.
Defaults depend on the kernel version.
For kernels older than 5.3, firmware files are not compressed.
For kernels 5.3 and newer, firmware files are compressed with xz.
For kernels 5.19 and newer, firmware files are compressed with zstd.

- hardware.flipperzero.enable: Whether to enable udev rules and software for Flipper Zero devices.
- hardware.flirc.enable: Whether to enable software to configure a Flirc USB device.
- hardware.fw-fanctrl.config: Additional config entries for the fw-fanctrl service (documentation: <https://github.com/TamtamHero/fw-fanctrl/blob/main/doc/configuration.md>)

- hardware.fw-fanctrl.disableBatteryTempCheck: Disable checking battery temperature sensor

- hardware.fw-fanctrl.ectoolPackage: The fw-ectool package to use.
- hardware.fw-fanctrl.enable: Whether to enable the fw-fanctrl systemd service and install the needed packages.
- hardware.fw-fanctrl.package: The fw-fanctrl package to use.
- hardware.gkraken.enable
- hardware.glasgow.enable: Enables Glasgow udev rules and ensures 'plugdev' group exists.
This is a prerequisite to using Glasgow without being root.

- hardware.gpgSmartcards.enable: Whether to enable udev rules for gnupg smart cards.
- hardware.gpu.corectrl.enable: Whether to enable Install CoreCtrl and allow GPU power/voltage control via polkit..
- hardware.gpu.corectrl.group: System group whose members may use the CoreCtrl helper (polkit).
- hardware.gpu.corectrl.ppfeaturemask: Optional amdgpu.ppfeaturemask kernel parameter value to unlock OC/UV features (null = don't set).
- hardware.graphics.enable: Whether to enable hardware accelerated graphics drivers.

This is required to allow most graphical applications and
environments to use hardware rendering, video encode/decode
acceleration, etc.

This option should be enabled by default by the corresponding modules,
so you do not usually have to set it yourself.

- hardware.graphics.enable32Bit: On 64-bit systems, whether to also install 32-bit drivers for
32-bit applications (such as Wine).

- hardware.graphics.extraPackages: Additional packages to add to the default graphics driver lookup path.
This can be used to add OpenCL drivers, VA-API/VDPAU drivers, etc.

::: {.note}
intel-media-driver supports hardware Broadwell (2014) or newer. Older hardware should use the mostly unmaintained intel-vaapi-driver driver.
:::

- hardware.graphics.extraPackages32: Additional packages to add to 32-bit graphics driver lookup path on 64-bit systems.
Used when {option}`enable32Bit` is set. This can be used to add OpenCL drivers, VA-API/VDPAU drivers, etc.

::: {.note}
intel-media-driver supports hardware Broadwell (2014) or newer. Older hardware should use the mostly unmaintained intel-vaapi-driver driver.
:::

- hardware.graphics.package: The package that provides the default driver set.

- hardware.graphics.package32: The package that provides the 32-bit driver set. Used when {option}`enable32Bit` is enabled.

- hardware.hackrf.enable: Enables hackrf udev rules and ensures 'plugdev' group exists.
This is a prerequisite to using HackRF devices without being root, since HackRF USB descriptors will be owned by plugdev through udev.
Ensure your user is a member of the 'plugdev' group after enabling.

- hardware.i2c.enable: Whether to enable i2c devices support. By default access is granted to users in the "i2c"
group (will be created if non-existent) and any user with a seat, meaning
logged on the computer locally
.
- hardware.i2c.group: Grant access to i2c devices (/dev/i2c-*) to users in this group.

- hardware.infiniband.enable: Whether to enable Infiniband support.
- hardware.infiniband.guids: A list of infiniband port guids on the system. This is discoverable using `ibstat -p`

- hardware.inputmodule.enable: Whether to enable Support for Framework input modules.
- hardware.intel-gpu-tools.enable: Whether to enable a setcap wrapper for intel-gpu-tools.
- hardware.ipu6.enable: Whether to enable support for Intel IPU6/MIPI cameras.
- hardware.ipu6.platform: Choose the version for your hardware platform.

Use `ipu6` for Tiger Lake, `ipu6ep` for Alder Lake or Raptor Lake,
and `ipu6epmtl` for Meteor Lake.

- hardware.keyboard.qmk.enable: Whether to enable non-root access to the firmware of QMK keyboards.
- hardware.keyboard.teck.enable: Whether to enable non-root access to the firmware of TECK keyboards.
- hardware.keyboard.uhk.enable: Whether to enable non-root access to the firmware of UHK keyboards.
You need it when you want to flash a new firmware on the keyboard.
Access to the keyboard is granted to users in the "input" group.
You may want to install the uhk-agent package
.
- hardware.keyboard.zsa.enable: Whether to enable udev rules for keyboards from ZSA like the ErgoDox EZ, Planck EZ and Moonlander Mark I.
You need it when you want to flash a new configuration on the keyboard
or use their live training in the browser.
You may want to install the wally-cli package
.
- hardware.kryoflux.enable: Enables kryoflux udev rules, ensures 'floppy' group exists. This is a
prerequisite to using devices supported by kryoflux without being root,
since kryoflux device descriptors will be owned by floppy through udev.

- hardware.kryoflux.package: The kryoflux package to use.
- hardware.ksm.enable: Whether to enable Linux kernel Same-Page Merging.
- hardware.ksm.sleep: How many milliseconds ksmd should sleep between scans.
Setting it to `null` uses the kernel's default time.

- hardware.ledger.enable: Whether to enable udev rules for Ledger devices.
- hardware.libftdi.enable: Whether to enable udev rules for devices supported by libftdi.
- hardware.libftdi.package: The libftdi1 package to use.
- hardware.libjaylink.enable: Whether to enable udev rules for devices supported by libjaylink.
Add users to the `jlink` group in order to grant
them access
.
- hardware.libjaylink.package: The libjaylink package to use.
- hardware.logitech.enable: Alias of {option}`hardware.logitech.wireless.enable`.
- hardware.logitech.enableGraphical: Alias of {option}`hardware.logitech.wireless.enableGraphical`.
- hardware.logitech.lcd.devices: List of USB device ids supported by g15daemon.

You most likely do not need to change this.

- hardware.logitech.lcd.enable: Whether to enable support for Logitech LCD Devices.
- hardware.logitech.lcd.startWhenNeeded: Only run the service when an actual supported device is plugged.

- hardware.logitech.wireless.enable: Whether to enable support for Logitech Wireless Devices.
- hardware.logitech.wireless.enableGraphical: Enable graphical support applications.
- hardware.mcelog.enable: Enable the Machine Check Exception logger.

- hardware.mwProCapture.enable: Whether to enable the Magewell Pro Capture family kernel module.
- hardware.new-lg4ff.enable: Enables improved Linux module drivers for Logitech driving wheels.
This will replace the existing in-kernel hid-logitech modules.
Works most notably on the Logitech G25, G27, G29 and Driving Force (GT).

- hardware.nfc-nci.enable: Whether to enable PN5xx kernel module with udev rules, libnfc-nci userland, and optional ifdnfc-nci PC/SC driver.
- hardware.nfc-nci.enableIFD: Register ifdnfc-nci as a serial reader with pcscd.

- hardware.nfc-nci.settings: Configuration to be written to the libncf-nci configuration files.
To understand the configuration format, refer to <https://github.com/NXPNFCLinux/linux_libnfc-nci/tree/master/conf>.

- hardware.nitrokey.enable: Enables udev rules for Nitrokey devices.

- hardware.nvidia.datacenter.enable: Whether to enable Data Center drivers for NVIDIA cards on a NVLink topology
.
- hardware.nvidia.datacenter.settings: Additional configuration options for fabricmanager.

- hardware.nvidia.dynamicBoost.enable: Whether to enable dynamic Boost balances power between the CPU and the GPU for improved
performance on supported laptops using the nvidia-powerd daemon. For more
information, see the NVIDIA docs, on Chapter 23. Dynamic Boost on Linux
.
- hardware.nvidia.enabled: True if NVIDIA support is enabled
- hardware.nvidia.forceFullCompositionPipeline: Whether to enable forcefully the full composition pipeline.
This sometimes fixes screen tearing issues.
This has been reported to reduce the performance of some OpenGL applications and may produce issues in WebGL.
It also drastically increases the time the driver needs to clock down after load
.
- hardware.nvidia.gsp.enable: Whether to enable the GPU System Processor (GSP) on the video card
.
- hardware.nvidia.modesetting.enable: Whether to enable kernel modesetting when using the NVIDIA proprietary driver.

Enabling this fixes screen tearing when using Optimus via PRIME (see
{option}`hardware.nvidia.prime.sync.enable`. This is not enabled
by default because it is not officially supported by NVIDIA and would not
work with SLI.

Enabling this and using version 545 or newer of the proprietary NVIDIA
driver causes it to provide its own framebuffer device, which can cause
Wayland compositors to work when they otherwise wouldn't.
.
- hardware.nvidia.nvidiaPersistenced: Whether to enable nvidia-persistenced a update for NVIDIA GPU headless mode, i.e.
It ensures all GPUs stay awake even during headless mode
.
- hardware.nvidia.nvidiaSettings: Whether to enable nvidia-settings, NVIDIA's GUI configuration tool
.
- hardware.nvidia.open: Whether to enable the open source NVIDIA kernel module.
- hardware.nvidia.package: The NVIDIA driver package to use.

- hardware.nvidia.powerManagement.enable: Whether to enable experimental power management through systemd. For more information, see
the NVIDIA docs, on Chapter 21. Configuring Power Management Support
.
- hardware.nvidia.powerManagement.finegrained: Whether to enable experimental power management of PRIME offload. For more information, see
the NVIDIA docs, on Chapter 22. PCI-Express Runtime D3 (RTD3) Power Management
.
- hardware.nvidia.prime.allowExternalGpu: Whether to enable configuring X to allow external NVIDIA GPUs when using Prime [Reverse] sync optimus
.
- hardware.nvidia.prime.amdgpuBusId: Bus ID of the AMD APU. You can find it using lspci; for example if lspci
shows the AMD APU at "0001:02:03.4", set this option to "PCI:2@1:3:4".

lspci might omit the PCI domain (0001 in above example) if it is zero.
In which case, use "@0" instead.

Please be aware that this option takes decimal address while lspci reports
hexadecimal address. So for device at domain "10000", use "@65536".

- hardware.nvidia.prime.intelBusId: Bus ID of the Intel GPU. You can find it using lspci; for example if lspci
shows the Intel GPU at "0001:02:03.4", set this option to "PCI:2@1:3:4".

lspci might omit the PCI domain (0001 in above example) if it is zero.
In which case, use "@0" instead.

Please be aware that this option takes decimal address while lspci reports
hexadecimal address. So for device at domain "10000", use "@65536".

- hardware.nvidia.prime.nvidiaBusId: Bus ID of the NVIDIA GPU. You can find it using lspci; for example if lspci
shows the NVIDIA GPU at "0001:02:03.4", set this option to "PCI:2@1:3:4".

lspci might omit the PCI domain (0001 in above example) if it is zero.
In which case, use "@0" instead.

Please be aware that this option takes decimal address while lspci reports
hexadecimal address. So for device at domain "10000", use "@65536".

- hardware.nvidia.prime.offload.enable: Whether to enable render offload support using the NVIDIA proprietary driver via PRIME.

If this is enabled, then the bus IDs of the NVIDIA and Intel/AMD GPUs have to
be specified ({option}`hardware.nvidia.prime.nvidiaBusId` and
{option}`hardware.nvidia.prime.intelBusId` or
{option}`hardware.nvidia.prime.amdgpuBusId`)
.
- hardware.nvidia.prime.offload.enableOffloadCmd: Whether to enable adding a `nvidia-offload` convenience script to {option}`environment.systemPackages`
for offloading programs to an nvidia device. To work, you must also enable
{option}`hardware.nvidia.prime.offload.enable` or {option}`hardware.nvidia.prime.reverseSync.enable`.

Example usage: `nvidia-offload sauerbraten_client`

This script can be renamed with {option}`hardware.nvidia.prime.offload.enableOffloadCmd`.
.
- hardware.nvidia.prime.offload.offloadCmdMainProgram: Specifies the CLI name of the {option}`hardware.nvidia.prime.offload.enableOffloadCmd`
convenience script for offloading programs to an nvidia device.

- hardware.nvidia.prime.reverseSync.enable: Whether to enable NVIDIA Optimus support using the NVIDIA proprietary driver via reverse
PRIME. If enabled, the Intel/AMD GPU will be used for all rendering, while
enabling output to displays attached only to the NVIDIA GPU without a
multiplexer.

Warning: This feature is relatively new, depending on your system this might
work poorly. AMD support, especially so.
See: <https://forums.developer.nvidia.com/t/the-all-new-outputsink-feature-aka-reverse-prime/129828>

Note that this option only has any effect if the "nvidia" driver is specified
in {option}`services.xserver.videoDrivers`, and it should preferably
be the only driver there.

If this is enabled, then the bus IDs of the NVIDIA and Intel/AMD GPUs have to
be specified ({option}`hardware.nvidia.prime.nvidiaBusId` and
{option}`hardware.nvidia.prime.intelBusId` or
{option}`hardware.nvidia.prime.amdgpuBusId`).

If you enable this, you may want to also enable kernel modesetting for the
NVIDIA driver ({option}`hardware.nvidia.modesetting.enable`) in order
to prevent tearing.

Note that this configuration will only be successful when a display manager
for which the {option}`services.xserver.displayManager.setupCommands`
option is supported is used
.
- hardware.nvidia.prime.reverseSync.setupCommands.enable: Whether to enable configure the display manager to be able to use the outputs
attached to the NVIDIA GPU.
Disable in order to configure the NVIDIA GPU outputs manually using xrandr.
Note that this configuration will only be successful when a display manager
for which the {option}`services.xserver.displayManager.setupCommands`
option is supported is used
.
- hardware.nvidia.prime.sync.enable: Whether to enable NVIDIA Optimus support using the NVIDIA proprietary driver via PRIME.
If enabled, the NVIDIA GPU will be always on and used for all rendering,
while enabling output to displays attached only to the integrated Intel/AMD
GPU without a multiplexer.

Note that this option only has any effect if the "nvidia" driver is specified
in {option}`services.xserver.videoDrivers`, and it should preferably
be the only driver there.

If this is enabled, then the bus IDs of the NVIDIA and Intel/AMD GPUs have to
be specified ({option}`hardware.nvidia.prime.nvidiaBusId` and
{option}`hardware.nvidia.prime.intelBusId` or
{option}`hardware.nvidia.prime.amdgpuBusId`).

If you enable this, you may want to also enable kernel modesetting for the
NVIDIA driver ({option}`hardware.nvidia.modesetting.enable`) in order
to prevent tearing.

Note that this configuration will only be successful when a display manager
for which the {option}`services.xserver.displayManager.setupCommands`
option is supported is used
.
- hardware.nvidia.videoAcceleration: Whether to enable Whether video acceleration (VA-API) should be enabled.
.
- hardware.nvidia-container-toolkit.csv-files: The path to the list of CSV files to use when generating the CDI specification in CSV mode.

- hardware.nvidia-container-toolkit.device-name-strategy: Specify the strategy for generating device names,
passed to `nvidia-ctk cdi generate`. This will affect how
you reference the device using `nvidia.com/gpu=` in
the container runtime.

- hardware.nvidia-container-toolkit.discovery-mode: The mode to use when discovering the available entities.

- hardware.nvidia-container-toolkit.enable: Enable dynamic CDI configuration for Nvidia devices by running
nvidia-container-toolkit on boot.

- hardware.nvidia-container-toolkit.extraArgs: Extra arguments to be passed to nvidia-ctk.

- hardware.nvidia-container-toolkit.mount-nvidia-docker-1-directories: Mount nvidia-docker-1 directories on containers: /usr/local/nvidia/lib and
/usr/local/nvidia/lib64.

- hardware.nvidia-container-toolkit.mount-nvidia-executables: Mount executables nvidia-smi, nvidia-cuda-mps-control, nvidia-cuda-mps-server,
nvidia-debugdump, nvidia-powerd and nvidia-ctk on containers.

- hardware.nvidia-container-toolkit.mounts: Mounts to be added to every container under the Nvidia CDI profile.
- hardware.nvidia-container-toolkit.package: The nvidia-container-toolkit package to use.
- hardware.nvidia-container-toolkit.suppressNvidiaDriverAssertion: Suppress the assertion for installing Nvidia driver.
Useful in WSL where drivers are mounted from Windows, not provided by NixOS.

- hardware.nvidiaOptimus.disable: Completely disable the NVIDIA graphics card and use the
integrated graphics processor instead.

- hardware.onlykey.enable: Enable OnlyKey device (https://crp.to/p/) support.

- hardware.opengl.driSupport
- hardware.opengl.driSupport32Bit: Alias of {option}`hardware.graphics.enable32Bit`.
- hardware.opengl.enable: Alias of {option}`hardware.graphics.enable`.
- hardware.opengl.extraPackages: Alias of {option}`hardware.graphics.extraPackages`.
- hardware.opengl.extraPackages32: Alias of {option}`hardware.graphics.extraPackages32`.
- hardware.opengl.package: Alias of {option}`hardware.graphics.package`.
- hardware.opengl.package32: Alias of {option}`hardware.graphics.package32`.
- hardware.opengl.s3tcSupport
- hardware.openrazer.batteryNotifier: Settings for device battery notifications.

- hardware.openrazer.devicesOffOnScreensaver: Turn off the devices when the systems screensaver kicks in.

- hardware.openrazer.enable: Whether to enable OpenRazer drivers and userspace daemon
.
- hardware.openrazer.keyStatistics: Collects number of keypresses per hour per key used to
generate a heatmap.

- hardware.openrazer.mouseBatteryNotifier: Alias of {option}`hardware.openrazer.batteryNotifier.enable`.
- hardware.openrazer.syncEffectsEnabled: Set the sync effects flag to true so any assignment of
effects will work across devices.

- hardware.openrazer.users: Usernames to be added to the "openrazer" group, so that they
can start and interact with the OpenRazer userspace daemon.

- hardware.openrazer.verboseLogging: Whether to enable verbose logging. Logs debug messages.

- hardware.opentabletdriver.blacklistedKernelModules: Blacklist of kernel modules known to conflict with OpenTabletDriver.

- hardware.opentabletdriver.daemon.enable: Whether to start OpenTabletDriver daemon as a systemd user service.

- hardware.opentabletdriver.enable: Enable OpenTabletDriver udev rules, user service and blacklist kernel
modules known to conflict with OpenTabletDriver.

- hardware.opentabletdriver.package: The opentabletdriver package to use.
- hardware.parallels.autoMountShares
- hardware.parallels.enable: This enables Parallels Tools for Linux guests.

- hardware.parallels.package: The prl-tools package to use.
- hardware.pcmcia.config: Path to the configuration file which maps the memory, IRQs
and ports used by the PCMCIA hardware.

- hardware.pcmcia.enable: Enable this option to support PCMCIA card.

- hardware.pcmcia.firmware: List of firmware used to handle specific PCMCIA card.

- hardware.printers.ensureDefaultPrinter: Ensures the named printer is the default CUPS printer / printer queue.

- hardware.printers.ensurePrinters: Will regularly ensure that the given CUPS printers are configured as declared here.
If a printer's options are manually changed afterwards, they will be overwritten eventually.
This option will never delete any printer, even if removed from this list.
You can check existing printers with {command}`lpstat -s`
and remove printers with {command}`lpadmin -x <printer-name>`.
Printers not listed here can still be manually configured.

- hardware.pulseaudio: Alias of {option}`services.pulseaudio`.
- hardware.raid.HPSmartArray.enable: Whether to enable HP Smart Array kernel modules and CLI utility.
- hardware.rasdaemon.config: rasdaemon configuration, currently only used for CE PFA
for details, read rasdaemon.outPath/etc/sysconfig/rasdaemon's comments

- hardware.rasdaemon.enable: Whether to enable RAS logging daemon.
- hardware.rasdaemon.extraModules: extra kernel modules to load
- hardware.rasdaemon.labels: Additional memory module label descriptions to be placed in /etc/ras/dimm_labels.d/labels
- hardware.rasdaemon.mainboard: Custom mainboard description, see {manpage}`ras-mc-ctl(8)` for more details.
- hardware.rasdaemon.package: The rasdaemon package to use.
- hardware.rasdaemon.record: record events via sqlite3, required for ras-mc-ctl
- hardware.rasdaemon.testing: Whether to enable error injection infrastructure.
- hardware.rtl-sdr.enable: Enables rtl-sdr udev rules, ensures 'plugdev' group exists, and blacklists DVB kernel modules.
This is a prerequisite to using devices supported by rtl-sdr without being root, since rtl-sdr USB descriptors will be owned by plugdev through udev.

- hardware.rtl-sdr.package: The rtl-sdr package to use.
- hardware.saleae-logic.enable: Whether to enable udev rules for Saleae Logic devices.
- hardware.saleae-logic.package: Saleae Logic package to use.

- hardware.sane.backends-package: The sane-backends package to use.
- hardware.sane.brscan4.enable: When enabled, will automatically register the "brscan4" sane
backend and bring configuration files to their expected location.

- hardware.sane.brscan4.netDevices: The list of network devices that will be registered against the brscan4
sane backend.

- hardware.sane.brscan5.enable: Whether to enable the Brother brscan5 sane backend.
- hardware.sane.brscan5.netDevices: The list of network devices that will be registered against the brscan5
sane backend.

- hardware.sane.configDir: The value of SANE_CONFIG_DIR.
- hardware.sane.disabledDefaultBackends: Names of backends which are enabled by default but should be disabled.
See `$SANE_CONFIG_DIR/dll.conf` for the list of possible names.

- hardware.sane.drivers.scanSnap.enable: Whether to enable drivers for the Fujitsu ScanSnap scanners.

The driver files are unfree and extracted from the Windows driver image.

- hardware.sane.drivers.scanSnap.package: The epjitsu package to use. Useful if you want to extract the driver files yourself.

The process is described in the {file}`/etc/sane.d/epjitsu.conf` file in
the `sane-backends` package.

- hardware.sane.dsseries.enable: When enabled, will automatically register the "dsseries" SANE backend.

This supports the Brother DSmobile scanner series, including the
DS-620, DS-720D, DS-820W, and DS-920DW scanners.

- hardware.sane.enable: Enable support for SANE scanners.

::: {.note}
Users in the "scanner" group will gain access to the scanner, or the "lp" group if it's also a printer.
:::

- hardware.sane.extraBackends: Packages providing extra SANE backends to enable.

::: {.note}
The example contains the package for HP scanners, and the package for
Apple AirScan and Microsoft WSD support (supports many
vendors/devices).
:::

- hardware.sane.netConf: Network hosts that should be probed for remote scanners.

- hardware.sane.openFirewall: Open ports needed for discovery of scanners on the local network, e.g.
needed for Canon scanners (BJNP protocol).

- hardware.sane.snapshot: Use a development snapshot of SANE scanner drivers.
- hardware.sata.timeout.deciSeconds: Set SCT Error Recovery Control timeout in deciseconds for use in RAID configurations.

Values are as follows:
   0 = disable SCT ERT
  70 = default in consumer drives (7 seconds)

Maximum is disk dependant but probably 60 seconds.

- hardware.sata.timeout.drives: List of drives for which to configure the timeout.
- hardware.sata.timeout.enable: Whether to enable SATA drive timeouts.
- hardware.sensor.hddtemp.dbEntries: Additional DB entries
- hardware.sensor.hddtemp.drives: List of drives to monitor. If you pass /dev/disk/by-path/* entries the symlinks will be resolved as hddtemp doesn't like names with colons.
- hardware.sensor.hddtemp.enable: Enable this option to support HDD/SSD temperature sensors.

- hardware.sensor.hddtemp.extraArgs: Additional arguments passed to the daemon.
- hardware.sensor.hddtemp.unit: Celsius or Fahrenheit
- hardware.sensor.iio.enable: Enable this option to support IIO sensors with iio-sensor-proxy.

IIO sensors are used for orientation and ambient light
sensors on some mobile devices.

- hardware.sensor.iio.package: The iio-sensor-proxy package to use.
- hardware.sheep_net.enable: Enables sheep_net udev rules, ensures 'sheep_net' group exists, and adds
sheep-net to boot.kernelModules and boot.extraModulePackages

- hardware.spacenavd.enable: Whether to enable spacenavd to support 3DConnexion devices.
- hardware.steam-hardware.enable: Enable udev rules for Steam hardware such as the Steam Controller, other supported controllers and the HTC Vive
- hardware.storage.autoMount.enable: Force enable/disable devmon (removable-media auto-mount). Null keeps module default (enabled).
- hardware.system76.enableAll: Whether to enable all recommended configuration for system76 systems.
- hardware.system76.firmware-daemon.enable: Whether to enable the system76 firmware daemon
- hardware.system76.kernel-modules.enable: Whether to make the system76 out-of-tree kernel modules available
- hardware.system76.power-daemon.enable: Whether to enable the system76 power daemon
- hardware.tenstorrent.enable: Whether to enable Tenstorrent driver & utilities.
- hardware.trackpoint.device: The device name of the trackpoint. You can check with xinput.
Some newer devices (example x1c6) use "TPPS/2 Elan TrackPoint".

- hardware.trackpoint.emulateWheel: Enable scrolling while holding the middle mouse button.

- hardware.trackpoint.enable: Enable sensitivity and speed configuration for trackpoints.

- hardware.trackpoint.fakeButtons: Switch to "bare" PS/2 mouse support in case Trackpoint buttons are not recognized
properly. This can happen for example on models like the L430, T450, T450s, on
which the Trackpoint buttons are actually a part of the Synaptics touchpad.

- hardware.trackpoint.sensitivity: Configure the trackpoint sensitivity. By default, the kernel
configures 128.

- hardware.trackpoint.speed: Configure the trackpoint speed. By default, the kernel
configures 97.

- hardware.tuxedo-drivers.enable: Whether to enable The tuxedo-drivers driver enables access to the following on TUXEDO notebooks:
- Driver for Fn-keys
- SysFS control of brightness/color/mode for most TUXEDO keyboards
- Hardware I/O driver for TUXEDO Control Center

For more inforation it is best to check at the source code description: <https://gitlab.com/tuxedocomputers/development/packages/tuxedo-drivers>
.
- hardware.tuxedo-keyboard: Alias of {option}`hardware.tuxedo-drivers`.
- hardware.tuxedo-rs.enable: Whether to enable Rust utilities for interacting with hardware from TUXEDO Computers.
- hardware.tuxedo-rs.tailor-gui.enable: Whether to enable tailor-gui, an alternative to TUXEDO Control Center, written in Rust.
- hardware.u2f
- hardware.ubertooth.enable: Whether to enable Ubertooth software and its udev rules.
- hardware.ubertooth.group: Group for Ubertooth's udev rules.
- hardware.uinput.enable: Whether to enable uinput support.
- hardware.uni-sync.devices: List of controllers with their configurations.
- hardware.uni-sync.enable: Whether to enable udev rules and software for Lian Li Uni Controllers.
- hardware.uni-sync.package: The uni-sync package to use.
- hardware.usb-modeswitch.enable: Enable this option to support certain USB WLAN and WWAN adapters.

These network adapters initial present themselves as Flash Drives containing their drivers.
This option enables automatic switching to the networking mode.

- hardware.usbStorage.manageShutdown: Enable this option to gracefully spin-down external storage during shutdown.
If you suspect improper head parking after poweroff, install `smartmontools` and check
for the `Power-Off_Retract_Count` field for an increment.

- hardware.usbStorage.manageStartStop: Alias of {option}`hardware.usbStorage.manageShutdown`.
- hardware.usbWwan: Alias of {option}`hardware.usb-modeswitch`.
- hardware.video.amd.useMesaGit: Whether to enable Enable Chaotic's mesa-git stack (bleeding-edge Mesa)..
- hardware.video.hidpi.enable
- hardware.vr.valveIndex.enable: Whether to enable Enable the Valve Index VR stack (OpenXR/SteamVR helpers, udev rules)..
- hardware.wirelessRegulatoryDatabase: Whether to enable loading the wireless regulatory database at boot.
- hardware.wooting.enable: Whether to enable support for Wooting keyboards.
- hardware.xone.enable: Whether to enable the xone driver for Xbox One and Xbox Series X|S accessories.
- hardware.xow
- hardware.xpad-noone.enable: Whether to enable The Xpad driver from the Linux kernel with support for Xbox One controllers removed.
- hardware.xpadneo.enable: Whether to enable the xpadneo driver for Xbox One wireless controllers.
- i18n.consoleColors: Alias of {option}`console.colors`.
- i18n.consoleFont: Alias of {option}`console.font`.
- i18n.consoleKeyMap: Alias of {option}`console.keyMap`.
- i18n.consolePackages: Alias of {option}`console.packages`.
- i18n.consoleUseXkbConfig: Alias of {option}`console.useXkbConfig`.
- i18n.defaultCharset: The default locale character set.

- i18n.defaultLocale: The default locale. It determines the language for program messages,
the format for dates and times, sort order, and so on. Setting the
default character set is done via {option}`i18n.defaultCharset`.

- i18n.extraLocaleSettings: A set of additional system-wide locale settings other than `LANG`
which can be configured with {option}`i18n.defaultLocale`. Note that
the `/UTF-8` suffix used in {option}`i18n.extraLocales` indicates a
character set, and it must not be added manually here. To use a
non-`UTF-8` character set such as ISO-XXXX-8, the
{option}`i18n.localeCharsets` can be used.

Note that if the [`LANGUAGE`
key](https://www.gnu.org/software/gettext/manual/html_node/The-LANGUAGE-variable.html)
is used in this option, it is ignored when computing the locales
required to be installed, because the possible values of this key are
more diverse and flexible then the others.

- i18n.extraLocales: Additional locales that the system should support, besides the ones
configured with {option}`i18n.defaultLocale` and
{option}`i18n.extraLocaleSettings`.
Set this to `"all"` to install all available locales.

- i18n.glibcLocales: Customized pkg.glibcLocales package.

Changing this option can disable handling of i18n.defaultLocale
and supportedLocale.

- i18n.inputMethod
- i18n.localeCharsets: Per each {option}`i18n.extraLocaleSettings`, choose the character set
to use for it. Essentially defaults to UTF-8 for all of them.

- i18n.supportedLocales: List of locales that the system should support.  The value
`"all"` means that all locales supported by
Glibc will be installed.  A full list of supported locales
can be found at <https://sourceware.org/git/?p=glibc.git;a=blob;f=localedata/SUPPORTED>.

- ids.gids: The group IDs used in NixOS.

- ids.uids: The user IDs used in NixOS.

- image.modules: image-specific NixOS Modules used for `system.build.images`.

- isSpecialisation: Whether this system is a specialisation of another.
- jobs: Alias of {option}`systemd.services`.
- krb5.appdefaults
- krb5.capaths
- krb5.config
- krb5.domain_realm
- krb5.extraConfig
- krb5.kerberos
- krb5.libdefaults
- krb5.plugins
- krb5.realms
- lib: This option allows modules to define helper functions, constants, etc.

- location.latitude: Your current latitude, between
`-90.0` and `90.0`. Must be provided
along with longitude.

- location.longitude: Your current longitude, between
between `-180.0` and `180.0`. Must be
provided along with latitude.

- location.provider: The location provider to use for determining your location. If set to
`manual` you must also provide latitude/longitude.

- meta.buildDocsInSandbox: Whether to include this module in the split options doc build.
Disable if the module references `config`, `pkgs` or other module
arguments that cannot be evaluated as constants.

This option should be defined at most once per module.

- meta.doc: Documentation prologue for the set of options of each module.  This
option should be defined at most once per module.

- meta.maintainers: List of maintainers of each module.
This option should be defined at most once per module.

The option value is not a list of maintainers, but an attribute set that maps module file names to lists of maintainers.

- minifyStaticFiles.script.package
- minifyStaticFiles.style.package
- minifyStaticFiles.svg.package
- monitoring.netdata.enable: Whether to enable Enable Netdata (lightweight, local-only UI).
- monitoring.sysstat.enable: Whether to enable Enable sysstat collectors (very low overhead)..
- nesting.children
- nesting.clone
- networking.bonds: This option allows you to define bond devices that aggregate multiple,
underlying networking interfaces together. The value of this option is
an attribute set. Each attribute specifies a bond, with the attribute
name specifying the name of the bond's network interface

- networking.bridges: This option allows you to define Ethernet bridge devices
that connect physical networks together.  The value of this
option is an attribute set.  Each attribute specifies a
bridge, with the attribute name specifying the name of the
bridge's network interface.

- networking.connman: Alias of {option}`services.connman`.
- networking.defaultGateway: The default gateway. It can be left empty if it is auto-detected through DHCP.
It can be specified as a string or an option set along with a network interface.

- networking.defaultGateway6: The default ipv6 gateway. It can be left empty if it is auto-detected through DHCP.
It can be specified as a string or an option set along with a network interface.

- networking.defaultGatewayWindowSize: The window size of the default gateway. It limits maximal data bursts that TCP peers
are allowed to send to us.

- networking.dhcpcd.IPv6rs: Force enable or disable solicitation and receipt of IPv6 Router Advertisements.
This is required, for example, when using a static unique local IPv6 address (ULA)
and global IPv6 address auto-configuration with SLAAC.

- networking.dhcpcd.allowInterfaces: Enable the DHCP client for any interface whose name matches
any of the shell glob patterns in this list. Any interface not
explicitly matched by this pattern will be denied. This pattern only
applies when non-null.

- networking.dhcpcd.allowSetuid: Whether to relax the security sandbox to allow running setuid
binaries (e.g. `sudo`) in the dhcpcd hooks.

- networking.dhcpcd.denyInterfaces: Disable the DHCP client for any interface whose name matches
any of the shell glob patterns in this list. The purpose of
this option is to blacklist virtual interfaces such as those
created by Xen, libvirt, LXC, etc.

- networking.dhcpcd.enable: Whether to enable dhcpcd for device configuration. This is mainly to
explicitly disable dhcpcd (for example when using networkd).

- networking.dhcpcd.extraConfig: Literal string to append to the config file generated for dhcpcd.

- networking.dhcpcd.persistent: Whether to leave interfaces configured on dhcpcd daemon
shutdown. Set to true if you have your root or store mounted
over the network or this machine accepts SSH connections
through DHCP interfaces and clients should be notified when
it shuts down.

- networking.dhcpcd.runHook: Shell code that will be run after all other hooks. See
`man dhcpcd-run-hooks` for details on what is possible.

::: {.note}
To use sudo or similar tools in your script you may have to set:

    networking.dhcpcd.allowSetuid = true;

In addition, as most of the filesystem is inaccessible to dhcpcd
by default, you may want to define some exceptions, e.g.

    systemd.services.dhcpcd.serviceConfig.ReadOnlyPaths = [
      "/run/user/1000/bus"  # to send desktop notifications
    ];
:::

- networking.dhcpcd.setHostname: Whether to set the machine hostname based on the information
received from the DHCP server.

::: {.note}
The hostname will be changed only if the current one is
the empty string, `localhost` or `nixos`.

Polkit ([](#opt-security.polkit.enable)) is also required.
:::

- networking.dhcpcd.wait: This option specifies when the dhcpcd service will fork to background.
If set to "background", dhcpcd will fork to background immediately.
If set to "ipv4" or "ipv6", dhcpcd will wait for the corresponding IP
address to be assigned. If set to "any", dhcpcd will wait for any type
(IPv4 or IPv6) to be assigned. If set to "both", dhcpcd will wait for
both an IPv4 and an IPv6 address before forking.
The option "if-carrier-up" is equivalent to "any" if either ethernet
is plugged or WiFi is powered, and to "background" otherwise.

- networking.dnsExtensionMechanism: Alias of {option}`networking.resolvconf.dnsExtensionMechanism`.
- networking.dnsSingleRequest: Alias of {option}`networking.resolvconf.dnsSingleRequest`.
- networking.domain: The system domain name. Used to populate the {option}`fqdn` value.

::: {.warning}
The domain name is not configured for DNS resolution purposes, see {option}`search` instead.
:::

- networking.enableB43Firmware: Turn on this option if you want firmware for the NICs supported by the b43 module.

- networking.enableIPv6: Whether to enable support for IPv6.

- networking.enableIntel2100BGFirmware: Alias of {option}`hardware.enableRedistributableFirmware`.
- networking.enableIntel2200BGFirmware: Turn on this option if you want firmware for the Intel
PRO/Wireless 2200BG to be loaded automatically.  This is
required if you want to use this device.

- networking.enableIntel3945ABGFirmware: Alias of {option}`hardware.enableRedistributableFirmware`.
- networking.enableRT73Firmware: Alias of {option}`hardware.enableRedistributableFirmware`.
- networking.enableRTL8192cFirmware: Alias of {option}`hardware.enableRedistributableFirmware`.
- networking.enableRalinkFirmware: Alias of {option}`hardware.enableRedistributableFirmware`.
- networking.extraHosts: Additional verbatim entries to be appended to {file}`/etc/hosts`.
For adding hosts from derivation results, use {option}`networking.hostFiles` instead.

- networking.extraResolvconfConf: Alias of {option}`networking.resolvconf.extraConfig`.
- networking.firewall.allInterfaces: All open ports.

- networking.firewall.allowPing: Whether to respond to incoming ICMPv4 echo requests
("pings").  ICMPv6 pings are always allowed because the
larger address space of IPv6 makes network scanning much
less effective.

- networking.firewall.allowedTCPPortRanges: A range of TCP ports on which incoming connections are
accepted.

- networking.firewall.allowedTCPPorts: List of TCP ports on which incoming connections are
accepted.

- networking.firewall.allowedUDPPortRanges: Range of open UDP ports.

- networking.firewall.allowedUDPPorts: List of open UDP ports.

- networking.firewall.autoLoadConntrackHelpers: Whether to auto-load connection-tracking helpers.
See the description at networking.firewall.connectionTrackingModules

(needs kernel 3.5+)

- networking.firewall.checkReversePath: Performs a reverse path filter test on a packet.  If a reply
to the packet would not be sent via the same interface that
the packet arrived on, it is refused.

If using asymmetric routing or other complicated routing, set
this option to loose mode or disable it and setup your own
counter-measures.

This option can be either true (or "strict"), "loose" (only
drop the packet if the source address is not reachable via any
interface) or false.

- networking.firewall.connectionTrackingModules: List of connection-tracking helpers that are auto-loaded.
The complete list of possible values is given in the example.

As helpers can pose as a security risk, it is advised to
set this to an empty list and disable the setting
networking.firewall.autoLoadConntrackHelpers unless you
know what you are doing. Connection tracking is disabled
by default.

Loading of helpers is recommended to be done through the
CT target.  More info:
<https://home.regit.org/netfilter-en/secure-use-of-helpers/>

- networking.firewall.enable: Whether to enable the firewall.  This is a simple stateful
firewall that blocks connection attempts to unauthorised TCP
or UDP ports on this machine.

- networking.firewall.extraCommands: Additional shell commands executed as part of the firewall
initialisation script.  These are executed just before the
final "reject" firewall rule is added, so they can be used
to allow packets that would otherwise be refused.

This option only works with the iptables based firewall.

- networking.firewall.extraForwardRules: Additional nftables rules to be appended to the forward-allow
chain.

This option only works with the nftables based firewall.

- networking.firewall.extraInputRules: Additional nftables rules to be appended to the input-allow
chain.

This option only works with the nftables based firewall.

- networking.firewall.extraPackages: Additional packages to be included in the environment of the system
as well as the path of networking.firewall.extraCommands.

- networking.firewall.extraReversePathFilterRules: Additional nftables rules to be appended to the rpfilter-allow
chain.

This option only works with the nftables based firewall.

- networking.firewall.extraStopCommands: Additional shell commands executed as part of the firewall
shutdown script.  These are executed just after the removal
of the NixOS input rule, or if the service enters a failed
state.

This option only works with the iptables based firewall.

- networking.firewall.filterForward: Enable filtering in IP forwarding.

This option only works with the nftables based firewall.

- networking.firewall.interfaces: Interface-specific open ports.

- networking.firewall.logRefusedConnections: Whether to log rejected or dropped incoming connections.
Note: The logs are found in the kernel logs, i.e. dmesg
or journalctl -k.

- networking.firewall.logRefusedPackets: Whether to log all rejected or dropped incoming packets.
This tends to give a lot of log messages, so it's mostly
useful for debugging.
Note: The logs are found in the kernel logs, i.e. dmesg
or journalctl -k.

- networking.firewall.logRefusedUnicastsOnly: If {option}`networking.firewall.logRefusedPackets`
and this option are enabled, then only log packets
specifically directed at this machine, i.e., not broadcasts
or multicasts.

- networking.firewall.logReversePathDrops: Logs dropped packets failing the reverse path filter test if
the option networking.firewall.checkReversePath is enabled.

- networking.firewall.package: The package to use for running the firewall service.

- networking.firewall.pingLimit: If pings are allowed, this allows setting rate limits on them.

For the iptables based firewall, it should be set like
"--limit 1/minute --limit-burst 5".

For the nftables based firewall, it should be set like
"2/second" or "1/minute burst 5 packets".

- networking.firewall.rejectPackets: If set, refused packets are rejected rather than dropped
(ignored).  This means that an ICMP "port unreachable" error
message is sent back to the client (or a TCP RST packet in
case of an existing connection).  Rejecting packets makes
port scanning somewhat easier.

- networking.firewall.trustedInterfaces: Traffic coming in from these interfaces will be accepted
unconditionally.  Traffic from the loopback (lo) interface
will always be accepted.

- networking.fooOverUDP: This option allows you to configure Foo Over UDP and Generic UDP Encapsulation
endpoints. See {manpage}`ip-fou(8)` for details.

- networking.fqdn: The fully qualified domain name (FQDN) of this host. By default, it is
the result of combining `networking.hostName` and `networking.domain.`

Using this option will result in an evaluation error if the hostname is empty or
no domain is specified.

Modules that accept a mere `networking.hostName` but prefer a fully qualified
domain name may use `networking.fqdnOrHostName` instead.

- networking.fqdnOrHostName: Either the fully qualified domain name (FQDN), or just the host name if
it does not exist.

This is a convenience option for modules to read instead of `fqdn` when
a mere `hostName` is also an acceptable value; this option does not
throw an error when `domain` or `fqdn` is unset.

- networking.getaddrinfo.enable: Enables custom address sorting configuration for {manpage}`getaddrinfo(3)` according to RFC 3484.

This option generates a {file}`/etc/gai.conf` file to override the default address sorting tables,
as described in {manpage}`gai.conf(5)`.

This setting is only applicable when using the GNU C Library (glibc).
It has no effect with other libc implementations.

- networking.getaddrinfo.label: Adds entries to the label table, as described in section 2.1 of RFC 3484.

If any label entries are provided, the glibc’s default label table is ignored.

- networking.getaddrinfo.precedence: Similar to {option}`networking.getaddrinfo.label`, but this option
defines entries for the precedence table instead.

See sections 2.1 and 10.3 of RFC 3484 for details.

Providing any value will disable the glibc's default precedence table.

- networking.getaddrinfo.reload: Determines whether a process should detect changes to the configuration file since it was last read.

If enabled, the file is re-read automatically. This may cause issues in multithreaded applications
and is generally discouraged.

- networking.getaddrinfo.scopev4: Adds custom rules to the IPv4 scope table.

By default, the scope IDs described in section 3.2 of RFC 6724 are used.

Modifying these values is rarely necessary.

- networking.greTunnels: This option allows you to define Generic Routing Encapsulation (GRE) tunnels.

- networking.hostConf
- networking.hostFiles: Files that should be concatenated together to form {file}`/etc/hosts`.

- networking.hostId: The 32-bit host ID of the machine, formatted as 8 hexadecimal characters.

You should try to make this ID unique among your machines. You can
generate a random 32-bit ID using the following commands:

`head -c 8 /etc/machine-id`

(this derives it from the machine-id that systemd generates) or

`head -c4 /dev/urandom | od -A none -t x4`

The primary use case is to ensure when using ZFS that a pool isn't imported
accidentally on a wrong machine.

- networking.hostName: The name of the machine. Leave it empty if you want to obtain it from a
DHCP server (if using DHCP). The hostname must be a valid DNS label (see
RFC 1035 section 2.3.1: "Preferred name syntax", RFC 1123 section 2.1:
"Host Names and Numbers") and as such must not contain the domain part.
This means that the hostname must start with a letter or digit,
end with a letter or digit, and have as interior characters only
letters, digits, and hyphen. The maximum length is 63 characters.
Additionally it is recommended to only use lower-case characters.
If (e.g. for legacy reasons) a FQDN is required as the Linux kernel
network node hostname (uname --nodename) the option
boot.kernel.sysctl."kernel.hostname" can be used as a workaround (but
the 64 character limit still applies).

WARNING: Do not use underscores (_) or you may run into unexpected issues.

- networking.hosts: Locally defined maps of hostnames to IP addresses.

- networking.ifstate.enable: Whether to enable networking using IfState.
- networking.ifstate.package: The ifstate package to use.
- networking.ifstate.settings: Content of IfState's configuration file. See <https://ifstate.net/2.0/schema/> for details.
- networking.interfaces: The configuration for each network interface.

Please note that {option}`systemd.network.netdevs` has more features
and is better maintained. When building new things, it is advised to
use that instead.

- networking.ipips: This option allows you to define interfaces encapsulating IP
packets within IP packets; which should be automatically created.

For example, this allows you to create 4in6 (RFC 2473)
or IP within IP (RFC 2003) tunnels.

- networking.iproute2.enable: Whether to enable copying IP route configuration files.
- networking.iproute2.rttablesExtraConfig: Verbatim lines to add to /etc/iproute2/rt_tables

- networking.jool.enable: Whether to enable Jool, an Open Source implementation of IPv4/IPv6
translation on Linux.

Jool can perform stateless IP/ICMP translation (SIIT) or stateful
NAT64, analogous to the IPv4 NAPT. Refer to the upstream
[documentation](https://nicmx.github.io/Jool/en/intro-xlat.html) for
the supported modes of translation and how to configure them.

Enabling this option will install the Jool kernel module and the
command line tools for controlling it.

- networking.jool.nat64: Definitions of NAT64 instances of Jool.
See the
[documentation](https://nicmx.github.io/Jool/en/config-atomic.html) for
the available options. Also check out the
[tutorial](https://nicmx.github.io/Jool/en/run-nat64.html) for an
introduction to NAT64 and how to troubleshoot the setup.

The attribute name defines the name of the instance, with the main one
being `default`: this can be accessed from the command line without
specifying the name with `-i`.

::: {.note}
Instances created imperatively from the command line will not interfere
with the NixOS instances, provided the respective `pool4` addresses and
port ranges are not overlapping.
:::

::: {.warning}
Changes to an instance performed via `jool -i <name>` are applied
correctly but will be lost after restarting the respective
`jool-nat64-<name>.service`.
:::

- networking.jool.siit: Definitions of SIIT instances of Jool.
See the
[documentation](https://nicmx.github.io/Jool/en/config-atomic.html) for
the available options. Also check out the
[tutorial](https://nicmx.github.io/Jool/en/run-vanilla.html) for an
introduction to SIIT and how to troubleshoot the setup.

The attribute name defines the name of the instance, with the main one
being `default`: this can be accessed from the command line without
specifying the name with `-i`.

::: {.note}
Instances created imperatively from the command line will not interfere
with the NixOS instances, provided the respective EAMT addresses and
port ranges are not overlapping.
:::

::: {.warning}
Changes to an instance performed via `jool -i <name>` are applied
correctly but will be lost after restarting the respective
`jool-siit-<name>.service`.
:::

- networking.localCommands: Shell commands to be executed at the end of the
`network-setup` systemd service.  Note that if
you are using DHCP to obtain the network configuration,
interfaces may not be fully configured yet.

- networking.macvlans: This option allows you to define macvlan interfaces which should
be automatically created.

- networking.modemmanager.enable: Whether to use ModemManager to manage modem devices.
This is usually used by some higher layer manager such as NetworkManager
but can be used standalone especially if using a modem for non-IP
connectivity (e.g. GPS).

- networking.modemmanager.fccUnlockScripts: List of FCC unlock scripts to enable on the system, behaving as described in
https://modemmanager.org/docs/modemmanager/fcc-unlock/#integration-with-third-party-fcc-unlock-tools.

- networking.modemmanager.package: The modemmanager package to use.
- networking.nameservers: The list of nameservers.  It can be left empty if it is auto-detected through DHCP.

- networking.nat.dmzHost: The local IP address to which all traffic that does not match any
forwarding rule is forwarded.

- networking.nat.enable: Whether to enable Network Address Translation (NAT). A
properly configured firewall or a trusted L2 on all network
interfaces is required to prevent unauthorized access to
the internal network.

- networking.nat.enableIPv6: Whether to enable IPv6 NAT.

- networking.nat.externalIP: The public IP address to which packets from the local
network are to be rewritten.  If this is left empty, the
IP address associated with the external interface will be
used.  Only connections made to this IP address will be
forwarded to the internal network when using forwardPorts.

- networking.nat.externalIPv6: The public IPv6 address to which packets from the local
network are to be rewritten.  If this is left empty, the
IP address associated with the external interface will be
used.  Only connections made to this IP address will be
forwarded to the internal network when using forwardPorts.

- networking.nat.externalInterface: The name of the external network interface.

- networking.nat.extraCommands: Additional shell commands executed as part of the nat
initialisation script.

This option is incompatible with the nftables based nat module.

- networking.nat.extraStopCommands: Additional shell commands executed as part of the nat
teardown script.

This option is incompatible with the nftables based nat module.

- networking.nat.forwardPorts: List of forwarded ports from the external interface to
internal destinations by using DNAT. Destination can be
IPv6 if IPv6 NAT is enabled.

- networking.nat.internalIPs: The IP address ranges for which to perform NAT.  Packets
coming from these addresses (on any interface) and destined
for the external interface will be rewritten.

- networking.nat.internalIPv6s: The IPv6 address ranges for which to perform NAT.  Packets
coming from these addresses (on any interface) and destined
for the external interface will be rewritten.

- networking.nat.internalInterfaces: The interfaces for which to perform NAT. Packets coming from
these interface and destined for the external interface will
be rewritten.

- networking.networkmanager.appendNameservers: A list of name servers that should be appended
to the ones configured in NetworkManager or received by DHCP.

- networking.networkmanager.connectionConfig: Configuration for the [connection] section of NetworkManager.conf.
Refer to
[
  https://developer.gnome.org/NetworkManager/stable/NetworkManager.conf.html#id-1.2.3.11
](https://developer.gnome.org/NetworkManager/stable/NetworkManager.conf.html)
or
{manpage}`NetworkManager.conf(5)`
for more information.

- networking.networkmanager.dhcp: Which program (or internal library) should be used for DHCP.

- networking.networkmanager.dispatcherScripts: A list of scripts which will be executed in response to network events.

- networking.networkmanager.dns: Set the DNS (`resolv.conf`) processing mode.

A description of these modes can be found in the main section of
[
  https://developer.gnome.org/NetworkManager/stable/NetworkManager.conf.html
](https://developer.gnome.org/NetworkManager/stable/NetworkManager.conf.html)
or in
{manpage}`NetworkManager.conf(5)`.

- networking.networkmanager.dynamicHosts
- networking.networkmanager.enable: Whether to use NetworkManager to obtain an IP address and other
configuration for all network interfaces that are not manually
configured. If enabled, a group `networkmanager`
will be created. Add all users that should have permission
to change network settings to this group.

- networking.networkmanager.enableDefaultPlugins
- networking.networkmanager.enableFccUnlock
- networking.networkmanager.enableStrongSwan
- networking.networkmanager.ensureProfiles.environmentFiles: Files to load as environment file. Environment variables from this file
will be substituted into the static configuration file using [envsubst](https://github.com/a8m/envsubst).

- networking.networkmanager.ensureProfiles.profiles: Declaratively define NetworkManager profiles. You can find information about the generated file format [here](https://networkmanager.dev/docs/api/latest/nm-settings-keyfile.html) and [here](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_networking/assembly_networkmanager-connection-profiles-in-keyfile-format_configuring-and-managing-networking).
You current profiles which are most likely stored in `/etc/NetworkManager/system-connections` and there is [a tool](https://github.com/janik-haag/nm2nix) to convert them to the needed nix code.
If you add a new ad-hoc connection via a GUI or nmtui or anything similar it should just work together with the declarative ones.
And if you edit a declarative profile NetworkManager will move it to the persistent storage and treat it like a ad-hoc one,
but there will be two profiles as soon as the systemd unit from this option runs again which can be confusing since NetworkManager tools will start displaying two profiles with the same name and probably a bit different settings depending on what you edited.
A profile won't be deleted even if it's removed from the config until the system reboots because that's when NetworkManager clears it's temp directory.
If `networking.resolvconf.enable` is true, attributes affecting the name resolution (such as `ignore-auto-dns`) may not end up changing `/etc/resolv.conf` as expected when other name services (for example `networking.dhcpcd`) are enabled. Run `resolvconf -l` in the terminal to see what each service produces.

- networking.networkmanager.ensureProfiles.secrets.entries: A list of secrets to provide to NetworkManager by reading their values from configured files.

Note that NetworkManager should be configured to read secrets from a secret agent.
This can be done for example through the `networking.networkmanager.ensureProfiles.profiles` options.

- networking.networkmanager.ensureProfiles.secrets.package: The nm-file-secret-agent package to use.
- networking.networkmanager.ethernet.macAddress: Set the MAC address of the interface.

- `"XX:XX:XX:XX:XX:XX"`: MAC address of the interface
- `"permanent"`: Use the permanent MAC address of the device
- `"preserve"`: Don’t change the MAC address of the device upon activation
- `"random"`: Generate a randomized value upon each connect
- `"stable"`: Generate a stable, hashed MAC address

- networking.networkmanager.extraConfig
- networking.networkmanager.fccUnlockScripts: Alias of {option}`networking.modemmanager.fccUnlockScripts`.
- networking.networkmanager.firewallBackend
- networking.networkmanager.insertNameservers: A list of name servers that should be inserted before
the ones configured in NetworkManager or received by DHCP.

- networking.networkmanager.logLevel: Set the default logging verbosity level.

- networking.networkmanager.package: The networkmanager package to use.
- networking.networkmanager.packages: Alias of {option}`networking.networkmanager.plugins`.
- networking.networkmanager.plugins: List of plugin packages to install.

See <https://search.nixos.org/packages?query=networkmanager-> for available plugin packages.
and <https://networkmanager.dev/docs/vpn/> for an overview over builtin and external plugins
and their support status.

- networking.networkmanager.settings: Configuration added to the generated NetworkManager.conf, note that you can overwrite settings with this.
Refer to
[
  https://developer.gnome.org/NetworkManager/stable/NetworkManager.conf.html
](https://developer.gnome.org/NetworkManager/stable/NetworkManager.conf.html)
or
{manpage}`NetworkManager.conf(5)`
for more information.

- networking.networkmanager.unmanaged: List of interfaces that will not be managed by NetworkManager.
Interface name can be specified here, but if you need more fidelity,
refer to
[
  https://developer.gnome.org/NetworkManager/stable/NetworkManager.conf.html#device-spec
](https://developer.gnome.org/NetworkManager/stable/NetworkManager.conf.html#device-spec)
or the "Device List Format" Appendix of
{manpage}`NetworkManager.conf(5)`.

- networking.networkmanager.useDnsmasq: Alias of {option}`networking.networkmanager.dns`.
- networking.networkmanager.wifi.backend: Specify the Wi-Fi backend used for the device.
Currently supported are {option}`wpa_supplicant` or {option}`iwd` (experimental).

- networking.networkmanager.wifi.macAddress: Set the MAC address of the interface.

- `"XX:XX:XX:XX:XX:XX"`: MAC address of the interface
- `"permanent"`: Use the permanent MAC address of the device
- `"preserve"`: Don’t change the MAC address of the device upon activation
- `"random"`: Generate a randomized value upon each connect
- `"stable"`: Generate a stable, hashed MAC address
- `"stable-ssid"`: Generate a stable MAC addressed based on Wi-Fi network

- networking.networkmanager.wifi.powersave: Whether to enable Wi-Fi power saving.

- networking.networkmanager.wifi.scanRandMacAddress: Whether to enable MAC address randomization of a Wi-Fi device
during scanning.

- networking.nftables.checkRuleset: Run `nft check` on the ruleset to spot syntax errors during build.
Because this is executed in a sandbox, the check might fail if it requires
access to any environmental factors or paths outside the Nix store.
To circumvent this, the ruleset file can be edited using the preCheckRuleset
option to work in the sandbox environment.

- networking.nftables.checkRulesetRedirects: Set of paths that should be intercepted and rewritten while checking the ruleset
using `pkgs.buildPackages.libredirect`.

- networking.nftables.enable: Whether to enable nftables and use nftables based firewall if enabled.
nftables is a Linux-based packet filtering framework intended to
replace frameworks like iptables.

Note that if you have Docker enabled you will not be able to use
nftables without intervention. Docker uses iptables internally to
setup NAT for containers. This module disables the ip_tables kernel
module, however Docker automatically loads the module. Please see
<https://github.com/NixOS/nixpkgs/issues/24318#issuecomment-289216273>
for more information.

There are other programs that use iptables internally too, such as
libvirt. For information on how the two firewalls interact, see
<https://wiki.nftables.org/wiki-nftables/index.php/Troubleshooting#Question_4._How_do_nftables_and_iptables_interact_when_used_on_the_same_system.3F>.

- networking.nftables.extraDeletions: Extra deletion commands to be run on every firewall start, reload
and after stopping the firewall.

- networking.nftables.flattenRulesetFile: Use `builtins.readFile` rather than `include` to handle {option}`networking.nftables.rulesetFile`. It is useful when you want to apply {option}`networking.nftables.preCheckRuleset` to {option}`networking.nftables.rulesetFile`.

::: {.note}
It is expected that {option}`networking.nftables.rulesetFile` can be accessed from the build sandbox.
:::

- networking.nftables.flushRuleset: Whether to enable flushing the entire ruleset on each reload.
- networking.nftables.preCheckRuleset: This script gets run before the ruleset is checked. It can be used to
create additional files needed for the ruleset check to work, or modify
the ruleset for cases the build environment cannot cover.

- networking.nftables.ruleset: The ruleset to be used with nftables.  Should be in a format that
can be loaded using "/bin/nft -f".  The ruleset is updated atomically.
Note that if the tables should be cleaned first, either:
- networking.nftables.flushRuleset = true; needs to be set (flushes all tables)
- networking.nftables.extraDeletions needs to be set
- or networking.nftables.tables can be used, which will clean up the table automatically

- networking.nftables.rulesetFile: The ruleset file to be used with nftables.  Should be in a format that
can be loaded using "nft -f".  The ruleset is updated atomically.

- networking.nftables.tables: Tables to be added to ruleset.
Tables will be added together with delete statements to clean up the table before every update.

- networking.openconnect.interfaces: OpenConnect interfaces.
- networking.openconnect.package: The openconnect package to use.
- networking.proxy.allProxy: This option specifies the all_proxy environment variable.

- networking.proxy.default: This option specifies the default value for httpProxy, httpsProxy, ftpProxy and rsyncProxy.

- networking.proxy.envVars: Environment variables used for the network proxy.

- networking.proxy.ftpProxy: This option specifies the ftp_proxy environment variable.

- networking.proxy.httpProxy: This option specifies the http_proxy environment variable.

- networking.proxy.httpsProxy: This option specifies the https_proxy environment variable.

- networking.proxy.noProxy: This option specifies the no_proxy environment variable.
If a default proxy is used and noProxy is null,
then noProxy will be set to 127.0.0.1,localhost.

- networking.proxy.rsyncProxy: This option specifies the rsync_proxy environment variable.

- networking.resolvconf.dnsExtensionMechanism: Enable the `edns0` option in {file}`resolv.conf`. With
that option set, `glibc` supports use of the extension mechanisms for
DNS (EDNS) specified in RFC 2671. The most popular user of that feature is DNSSEC,
which does not work without it.

- networking.resolvconf.dnsSingleRequest: Recent versions of glibc will issue both ipv4 (A) and ipv6 (AAAA)
address queries at the same time, from the same port. Sometimes upstream
routers will systemically drop the ipv4 queries. The symptom of this problem is
that 'getent hosts example.com' only returns ipv6 (or perhaps only ipv4) addresses. The
workaround for this is to specify the option 'single-request' in
/etc/resolv.conf. This option enables that.

- networking.resolvconf.enable: Whether DNS configuration is managed by resolvconf.

- networking.resolvconf.extraConfig: Extra configuration to append to {file}`resolvconf.conf`.

- networking.resolvconf.extraOptions: Set the options in {file}`/etc/resolv.conf`.

- networking.resolvconf.package: The package that provides the system-wide resolvconf command. Defaults to `openresolv`
if this module is enabled. Otherwise, can be used by other modules (for example {option}`services.resolved`) to
provide a compatibility layer.

This option generally shouldn't be set by the user.

- networking.resolvconf.subscriberFiles: Files written by resolvconf updates

- networking.resolvconf.useHostResolvConf
- networking.resolvconf.useLocalResolver: Use local DNS server for resolving.

- networking.resolvconfOptions: Alias of {option}`networking.resolvconf.extraOptions`.
- networking.rxe.enable: Whether to enable RDMA over converged ethernet.
- networking.rxe.interfaces: Enable RDMA on the listed interfaces. The corresponding virtual
RDMA interfaces will be named rxe_\<interface\>.
UDP port 4791 must be open on the respective ethernet interfaces.

- networking.search: The list of domain search paths that are considered for resolving
hostnames with fewer dots than configured in the `ndots` option,
which defaults to 1 if unset.

- networking.sits: This option allows you to define interfaces encapsulating IPv6
packets within IPv4 packets; which should be automatically created.

- networking.stevenblack.block: Additional blocklist extensions.
- networking.stevenblack.enable: Whether to enable the stevenblack hosts file blocklist.
- networking.stevenblack.package: The stevenblack-blocklist package to use.
- networking.supplicant: Interfaces for which to start {command}`wpa_supplicant`.
The supplicant is used to scan for and associate with wireless networks,
or to authenticate with 802.1x capable network switches.

The value of this option is an attribute set. Each attribute configures a
{command}`wpa_supplicant` service, where the attribute name specifies
the name of the interface that {command}`wpa_supplicant` operates on.
The attribute name can be a space separated list of interfaces.
The attribute names `WLAN`, `LAN` and `DBUS`
have a special meaning. `WLAN` and `LAN` are
configurations for universal {command}`wpa_supplicant` service that is
started for each WLAN interface or for each LAN interface, respectively.
`DBUS` defines a device-unrelated {command}`wpa_supplicant`
service that can be accessed through `D-Bus`.

- networking.tcpcrypt.enable: Whether to enable opportunistic TCP encryption. If the other end
speaks Tcpcrypt, then your traffic will be encrypted; otherwise
it will be sent in clear text. Thus, Tcpcrypt alone provides no
guarantees -- it is best effort. If, however, a Tcpcrypt
connection is successful and any attackers that exist are
passive, then Tcpcrypt guarantees privacy.

- networking.tempAddresses: Whether to enable IPv6 Privacy Extensions for interfaces not
configured explicitly in
[](#opt-networking.interfaces._name_.tempAddress).

This sets the ipv6.conf.*.use_tempaddr sysctl for all
interfaces. Possible values are:

- `"default"` to generate IPv6 temporary addresses and use these as source addresses in routing;
- `"disabled"` to completely disable IPv6 temporary addresses;
- `"enabled"` to generate IPv6 temporary addresses but still use EUI-64 addresses as source addresses;

- networking.timeServers: The set of NTP servers from which to synchronise.

- networking.ucarp.addr: Virtual shared IP address.
- networking.ucarp.advBase: Advertisement frequency in seconds.
- networking.ucarp.advSkew: Advertisement skew in seconds.
- networking.ucarp.deadratio: Ratio to consider a host as dead.
- networking.ucarp.downscript: Command to run after become backup, the interface name, virtual address
and optional extra parameters are passed as arguments.

- networking.ucarp.enable: Whether to enable ucarp, userspace implementation of CARP.
- networking.ucarp.extraParam: Extra parameter to pass to the up/down scripts.
- networking.ucarp.ignoreIfState: Ignore interface state, e.g., down or no carrier.
- networking.ucarp.interface: Network interface to bind to.
- networking.ucarp.neutral: Do not run downscript at start if the host is the backup.
- networking.ucarp.noMcast: Use broadcast instead of multicast advertisements.
- networking.ucarp.package: The ucarp package to use. Please note that the default package, pkgs.ucarp, has not received any
upstream updates for a long time and can be considered as unmaintained.

- networking.ucarp.passwordFile: File containing shared password between CARP hosts.
- networking.ucarp.preempt: Enable preemptive failover.
Thus, this host becomes the CARP master as soon as possible.

- networking.ucarp.shutdown: Call downscript at exit.
- networking.ucarp.srcIp: Source (real) IP address of this host.
- networking.ucarp.upscript: Command to run after become master, the interface name, virtual address
and optional extra parameters are passed as arguments.

- networking.ucarp.vhId: Virtual IP identifier shared between CARP hosts.
- networking.useDHCP: Whether to use DHCP to obtain an IP address and other
configuration for all network interfaces that do not have any manually
configured IPv4 addresses.

- networking.useHostResolvConf: In containers, whether to use the
{file}`resolv.conf` supplied by the host.

- networking.useNetworkd: Whether we should use networkd as the network configuration backend or
the legacy script based system. Note that this option is experimental,
enable at your own risk.

- networking.usePredictableInterfaceNames: Whether to assign [predictable names to network interfaces](https://www.freedesktop.org/wiki/Software/systemd/PredictableNetworkInterfaceNames/).
If enabled, interfaces
are assigned names that contain topology information
(e.g. `wlp3s0`) and thus should be stable
across reboots.  If disabled, names depend on the order in
which interfaces are discovered by the kernel, which may
change randomly across reboots; for instance, you may find
`eth0` and `eth1` flipping
unpredictably.

- networking.vlans: This option allows you to define vlan devices that tag packets
on top of a physical interface. The value of this option is an
attribute set. Each attribute specifies a vlan, with the name
specifying the name of the vlan interface.

- networking.vpnc
- networking.vswitches: This option allows you to define Open vSwitches that connect
physical networks together. The value of this option is an
attribute set. Each attribute specifies a vswitch, with the
attribute name specifying the name of the vswitch's network
interface.

- networking.wg-quick.interfaces: Wireguard interfaces.
- networking.wicd
- networking.wireguard.enable: Whether to enable WireGuard.

::: {.note}
By default, this module is powered by a script-based backend. You can
enable the networkd backend with {option}`networking.wireguard.useNetworkd`.
:::

- networking.wireguard.interfaces: WireGuard interfaces.

- networking.wireguard.useNetworkd: Whether to use networkd as the network configuration backend for
Wireguard instead of the legacy script-based system.

::: {.warning}
Some options have slightly different behavior with the networkd and
script-based backends. Check the documentation for each Wireguard
option you use before enabling this option.
:::

- networking.wireless.allowAuxiliaryImperativeNetworks: Whether to allow configuring networks "imperatively" (e.g. via
`wpa_supplicant_gui`) and declaratively via
[](#opt-networking.wireless.networks).

- networking.wireless.athUserRegulatoryDomain: If enabled, sets the ATH_USER_REGD kernel config switch to true to
disable the enforcement of EEPROM regulatory restrictions for ath
drivers. Requires at least Linux 5.8.

- networking.wireless.dbusControlled: Whether to enable the DBus control interface.
This is only needed when using NetworkManager or connman.

- networking.wireless.driver: Force a specific wpa_supplicant driver.
- networking.wireless.enable: Whether to enable wpa_supplicant.
- networking.wireless.environmentFile
- networking.wireless.extraConfig: Extra lines appended to the configuration file.
See
{manpage}`wpa_supplicant.conf(5)`
for available options.

- networking.wireless.extraConfigFiles: Extra wpa_supplicant configuration files to load.

- networking.wireless.fallbackToWPA2: Whether to fall back to WPA2 authentication protocols if WPA3 failed.
This allows old wireless cards (that lack recent features required by
WPA3) to connect to mixed WPA2/WPA3 access points.

To avoid possible downgrade attacks, disable this options.

- networking.wireless.interfaces: The interfaces {command}`wpa_supplicant` will use. If empty, it will
automatically use all wireless interfaces.

::: {.note}
A separate wpa_supplicant instance will be started for each interface.
:::

- networking.wireless.iwd.enable: Whether to enable iwd.
- networking.wireless.iwd.package: The iwd package to use.
- networking.wireless.iwd.settings: Options passed to iwd.
See {manpage}`iwd.config(5)` for supported options.

- networking.wireless.networks: The network definitions to automatically connect to when
 {command}`wpa_supplicant` is running. If this
 parameter is left empty wpa_supplicant will use
/etc/wpa_supplicant.conf as the configuration file.

- networking.wireless.scanOnLowSignal: Whether to periodically scan for (better) networks when the signal of
the current one is low. This will make roaming between access points
faster, but will consume more power.

- networking.wireless.secretsFile: File consisting of lines of the form `varname=value`
to define variables for the wireless configuration.

Secrets (PSKs, passwords, etc.) can be provided without adding them to
the world-readable Nix store by defining them in the secrets file and
referring to them in option [](#opt-networking.wireless.networks)
with the syntax `ext:secretname`. Example:

```
# content of /run/secrets/wireless.conf
psk_home=mypassword
psk_other=6a381cea59c7a2d6b30736ba0e6f397f7564a044bcdb7a327a1d16a1ed91b327
pass_work=myworkpassword

# wireless-related configuration
networking.wireless.secretsFile = "/run/secrets/wireless.conf";
networking.wireless.networks = {
  home.pskRaw = "ext:psk_home";
  other.pskRaw = "ext:psk_other";
  work.auth = ''
    eap=PEAP
    identity="my-user@example.com"
    password=ext:pass_work
  '';
};
```

- networking.wireless.userControlled.enable: Allow normal users to control wpa_supplicant through wpa_gui or wpa_cli.
This is useful for laptop users that switch networks a lot and don't want
to depend on a large package such as NetworkManager just to pick nearby
access points.

When using a declarative network specification you cannot persist any
settings via wpa_gui or wpa_cli.

- networking.wireless.userControlled.group: Members of this group can control wpa_supplicant.
- networking.wlanInterfaces: Creating multiple WLAN interfaces on top of one physical WLAN device (NIC).

The name of the WLAN interface corresponds to the name of the attribute.
A NIC is referenced by the persistent device name of the WLAN interface that
`udev` assigns to a NIC by default.
If a NIC supports multiple WLAN interfaces, then the one NIC can be used as
`device` for multiple WLAN interfaces.
If a NIC is used for creating WLAN interfaces, then the default WLAN interface
with a persistent device name form `udev` is not created.
A WLAN interface with the persistent name assigned from `udev`
would have to be created explicitly.

- nix.allowedUsers: Alias of {option}`nix.settings.allowed-users`.
- nix.autoOptimiseStore: Alias of {option}`nix.settings.auto-optimise-store`.
- nix.binaryCachePublicKeys: Alias of {option}`nix.settings.trusted-public-keys`.
- nix.binaryCaches: Alias of {option}`nix.settings.substituters`.
- nix.buildCores: Alias of {option}`nix.settings.cores`.
- nix.buildMachines: This option lists the machines to be used if distributed builds are
enabled (see {option}`nix.distributedBuilds`).
Nix will perform derivations on those machines via SSH by copying the
inputs to the Nix store on the remote machine, starting the build,
then copying the output back to the local Nix store.

- nix.channel.enable: Whether the `nix-channel` command and state files are made available on the machine.

The following files are initialized when enabled:
  - `/nix/var/nix/profiles/per-user/root/channels`
  - `/root/.nix-channels`
  - `$HOME/.nix-defexpr/channels` (on login)

Disabling this option will not remove the state files from the system.

- nix.checkAllErrors: If enabled, checks the nix.conf parsing for any kind of error. When disabled, checks only for unknown settings.

- nix.checkConfig: If enabled, checks that Nix can parse the generated nix.conf.

- nix.chrootDirs: Alias of {option}`nix.sandboxPaths`.
- nix.daemonCPUSchedPolicy: Nix daemon process CPU scheduling policy. This policy propagates to
build processes. `other` is the default scheduling
policy for regular tasks. The `batch` policy is
similar to `other`, but optimised for
non-interactive tasks. `idle` is for extremely
low-priority tasks that should only be run when no other task
requires CPU time.

Please note that while using the `idle` policy may
greatly improve responsiveness of a system performing expensive
builds, it may also slow down and potentially starve crucial
configuration updates during load.

`idle` may therefore be a sensible policy for
systems that experience only intermittent phases of high CPU load,
such as desktop or portable computers used interactively. Other
systems should use the `other` or
`batch` policy instead.

For more fine-grained resource control, please refer to
{manpage}`systemd.resource-control(5)` and adjust
{option}`systemd.services.nix-daemon` directly.

- nix.daemonIONiceLevel: Alias of {option}`nix.daemonIOSchedPriority`.
- nix.daemonIOSchedClass: Nix daemon process I/O scheduling class. This class propagates to
build processes. `best-effort` is the default
class for regular tasks. The `idle` class is for
extremely low-priority tasks that should only perform I/O when no
other task does.

Please note that while using the `idle` scheduling
class can improve responsiveness of a system performing expensive
builds, it might also slow down or starve crucial configuration
updates during load.

`idle` may therefore be a sensible class for
systems that experience only intermittent phases of high I/O load,
such as desktop or portable computers used interactively. Other
systems should use the `best-effort` class.

- nix.daemonIOSchedPriority: Nix daemon process I/O scheduling priority. This priority propagates
to build processes. The supported priorities depend on the
scheduling policy: With idle, priorities are not used in scheduling
decisions. best-effort supports values in the range 0 (high) to 7
(low).

- nix.daemonNiceLevel
- nix.distributedBuilds: Whether to distribute builds to the machines listed in
{option}`nix.buildMachines`.

- nix.enable: Whether to enable Nix.
Disabling Nix makes the system hard to modify and the Nix programs and configuration will not be made available by NixOS itself.

- nix.envVars: Environment variables used by Nix.
- nix.extraOptions: Additional text appended to {file}`nix.conf`.
- nix.gc.automatic: Automatically run the garbage collector at a specific time.
- nix.gc.dates: How often or when garbage collection is performed. For most desktop and server systems
a sufficient garbage collection is once a week.

This value must be a calendar event in the format specified by
{manpage}`systemd.time(7)`.

- nix.gc.options: Options given to [`nix-collect-garbage`](https://nixos.org/manual/nix/stable/command-ref/nix-collect-garbage) when the garbage collector is run automatically.

- nix.gc.persistent: Takes a boolean argument. If true, the time when the service
unit was last triggered is stored on disk. When the timer is
activated, the service unit is triggered immediately if it
would have been triggered at least once during the time when
the timer was inactive. Such triggering is nonetheless
subject to the delay imposed by RandomizedDelaySec=. This is
useful to catch up on missed runs of the service when the
system was powered down.

- nix.gc.randomizedDelaySec: Add a randomized delay before each garbage collection.
The delay will be chosen between zero and this value.
This value must be a time span in the format specified by
{manpage}`systemd.time(7)`

- nix.maxJobs: Alias of {option}`nix.settings.max-jobs`.
- nix.mpvOpenvr.enable: Whether to enable Build mpv with experimental OpenVR overlay support (may fail)..
- nix.nixPath: The default Nix expression search path, used by the Nix
evaluator to look up paths enclosed in angle brackets
(e.g. `<nixpkgs>`).

- nix.nrBuildUsers: Number of `nixbld` user accounts created to
perform secure concurrent builds.  If you receive an error
message saying that “all build users are currently in use”,
you should increase this value.

- nix.optimise.automatic: Automatically run the nix store optimiser at a specific time.
- nix.optimise.dates: Specification (in the format described by
{manpage}`systemd.time(7)`) of the time at
which the optimiser will run.

- nix.optimise.persistent: Takes a boolean argument. If true, the time when the service
unit was last triggered is stored on disk. When the timer is
activated, the service unit is triggered immediately if it
would have been triggered at least once during the time when
the timer was inactive. Such triggering is nonetheless
subject to the delay imposed by RandomizedDelaySec=. This is
useful to catch up on missed runs of the service when the
system was powered down.

- nix.optimise.randomizedDelaySec: Add a randomized delay before the optimizer will run.
The delay will be chosen between zero and this value.
This value must be a time span in the format specified by
{manpage}`systemd.time(7)`

- nix.package: This option specifies the Nix package instance to use throughout the system.

- nix.readOnlyStore: Alias of {option}`boot.readOnlyNixStore`.
- nix.registry: A system-wide flake registry.

See {manpage}`nix3-registry(1)` for more information.

- nix.requireSignedBinaryCaches: Alias of {option}`nix.settings.require-sigs`.
- nix.sandboxPaths: Alias of {option}`nix.settings.extra-sandbox-paths`.
- nix.settings: Configuration for Nix, see
<https://nixos.org/manual/nix/stable/command-ref/conf-file.html> or
{manpage}`nix.conf(5)` for available options.
The value declared here will be translated directly to the key-value pairs Nix expects.

You can use {command}`nix-instantiate --eval --strict '<nixpkgs/nixos>' -A config.nix.settings`
to view the current value. By default it is empty.

Nix configurations defined under {option}`nix.*` will be translated and applied to this
option. In addition, configuration specified in {option}`nix.extraOptions` will be appended
verbatim to the resulting config file.

- nix.sshServe.enable: Whether to enable serving the Nix store as a remote store via SSH.
- nix.sshServe.keys: A list of SSH public keys allowed to access the binary cache via SSH.
- nix.sshServe.protocol: The specific Nix-over-SSH protocol to use.
- nix.sshServe.trusted: Whether to add nix-ssh to the nix.settings.trusted-users
- nix.sshServe.write: Whether to enable writing to the Nix store as a remote store via SSH. Note: by default, the sshServe user is named nix-ssh and is not a trusted-user. nix-ssh should be added to the {option}`nix.sshServe.trusted` option in most use cases, such as allowing remote building of derivations to anonymous people based on ssh key
- nix.systemFeatures: Alias of {option}`nix.settings.system-features`.
- nix.trustedBinaryCaches: Alias of {option}`nix.settings.trusted-substituters`.
- nix.trustedUsers: Alias of {option}`nix.settings.trusted-users`.
- nix.useChroot: Alias of {option}`nix.useSandbox`.
- nix.useSandbox: Alias of {option}`nix.settings.sandbox`.
- nixops.enableDeprecatedAutoLuks: Whether to enable the deprecated NixOps AutoLuks module.
- nixpkgs.buildPlatform: Specifies the platform on which NixOS should be built.
By default, NixOS is built on the system where it runs, but you can
change where it's built. Setting this option will cause NixOS to be
cross-compiled.

For instance, if you're doing distributed multi-platform deployment,
or if you're building machines, you can set this to match your
development system and/or build farm.

Ignored when `nixpkgs.pkgs` is set.

- nixpkgs.config: Global configuration for Nixpkgs.
The complete list of [Nixpkgs configuration options](https://nixos.org/manual/nixpkgs/unstable/#sec-config-options-reference) is in the [Nixpkgs manual section on global configuration](https://nixos.org/manual/nixpkgs/unstable/#chap-packageconfig).

Ignored when {option}`nixpkgs.pkgs` is set.

- nixpkgs.crossSystem: Systems with a recently generated `hardware-configuration.nix`
may instead specify *only* {option}`nixpkgs.buildPlatform`,
or fall back to removing the {option}`nixpkgs.hostPlatform` line from the generated config.

Specifies the platform for which NixOS should be
built. Specify this only if it is different from
`nixpkgs.localSystem`, the platform
*on* which NixOS should be built. In other
words, specify this to cross-compile NixOS. Otherwise it
should be set as null, the default. See its description in the
Nixpkgs manual for more details.

Ignored when `nixpkgs.pkgs` or `hostPlatform` is set.

- nixpkgs.flake.setFlakeRegistry: Whether to pin nixpkgs in the system-wide flake registry (`/etc/nix/registry.json`) to the
store path of the sources of nixpkgs used to build the NixOS system.

This is on by default for NixOS configurations built with flakes.

This option makes {command}`nix run nixpkgs#hello` reuse dependencies from the system, avoid
refetching nixpkgs, and have a consistent result every time.

Note that this option makes the NixOS closure depend on the nixpkgs sources, which may add
undesired closure size if the system will not have any nix commands run on it.

- nixpkgs.flake.setNixPath: Whether to set {env}`NIX_PATH` to include `nixpkgs=flake:nixpkgs` such that `<nixpkgs>`
lookups receive the version of nixpkgs that the system was built with, in concert with
{option}`nixpkgs.flake.setFlakeRegistry`.

This is on by default for NixOS configurations built with flakes.

This makes {command}`nix-build '<nixpkgs>' -A hello` work out of the box on flake systems.

Note that this option makes the NixOS closure depend on the nixpkgs sources, which may add
undesired closure size if the system will not have any nix commands run on it.

- nixpkgs.flake.source: The path to the nixpkgs sources used to build the system. This is automatically set up to be
the store path of the nixpkgs flake used to build the system if using
`nixpkgs.lib.nixosSystem`, and is otherwise null by default.

This can also be optionally set if the NixOS system is not built with a flake but still uses
pinned sources: set this to the store path for the nixpkgs sources used to build the system,
as may be obtained by `builtins.fetchTarball`, for example.

Note: the name of the store path must be "source" due to
<https://github.com/NixOS/nix/issues/7075>.

- nixpkgs.hostPlatform: Specifies the platform where the NixOS configuration will run.

To cross-compile, set also `nixpkgs.buildPlatform`.

Ignored when `nixpkgs.pkgs` is set.

- nixpkgs.initialSystem
- nixpkgs.localSystem: Systems with a recently generated `hardware-configuration.nix`
do not need to specify this option, unless cross-compiling, in which case
you should set *only* {option}`nixpkgs.buildPlatform`.

If this is somehow not feasible, you may fall back to removing the
{option}`nixpkgs.hostPlatform` line from the generated config and
use the old options.

Specifies the platform on which NixOS should be built. When
`nixpkgs.crossSystem` is unset, it also specifies
the platform *for* which NixOS should be
built.  If this option is unset, it defaults to the platform
type of the machine where evaluation happens. Specifying this
option is useful when doing distributed multi-platform
deployment, or when building virtual machines. See its
description in the Nixpkgs manual for more details.

Ignored when `nixpkgs.pkgs` or `hostPlatform` is set.

- nixpkgs.overlays: List of overlays to apply to Nixpkgs.
This option allows modifying the Nixpkgs package set accessed through the `pkgs` module argument.

For details, see the [Overlays chapter in the Nixpkgs manual](https://nixos.org/manual/nixpkgs/stable/#chap-overlays).

If the {option}`nixpkgs.pkgs` option is set, overlays specified using `nixpkgs.overlays` will be applied after the overlays that were already included in `nixpkgs.pkgs`.

- nixpkgs.pkgs: If set, the pkgs argument to all NixOS modules is the value of
this option, extended with `nixpkgs.overlays`, if
that is also set. Either `nixpkgs.crossSystem` or
`nixpkgs.localSystem` will be used in an assertion
to check that the NixOS and Nixpkgs architectures match. Any
other options in `nixpkgs.*`, notably `config`,
will be ignored.

If unset, the pkgs argument to all NixOS modules is determined
as shown in the default value for this option.

The default value imports the Nixpkgs source files
relative to the location of this NixOS module, because
NixOS and Nixpkgs are distributed together for consistency,
so the `nixos` in the default value is in fact a
relative path. The `config`, `overlays`,
`localSystem`, and `crossSystem` come
from this option's siblings.

This option can be used by applications like NixOps to increase
the performance of evaluation, or to create packages that depend
on a container that should be built with the exact same evaluation
of Nixpkgs, for example. Applications like this should set
their default value using `lib.mkDefault`, so
user-provided configuration can override it without using
`lib`.

Note that using a distinct version of Nixpkgs with NixOS may
be an unexpected source of problems. Use this option with care.

- nixpkgs.system: This option does not need to be specified for NixOS configurations
with a recently generated `hardware-configuration.nix`.

Specifies the Nix platform type on which NixOS should be built.
It is better to specify `nixpkgs.localSystem` instead.
```
{
  nixpkgs.system = ..;
}
```
is the same as
```
{
  nixpkgs.localSystem.system = ..;
}
```
See `nixpkgs.localSystem` for more information.

Ignored when `nixpkgs.pkgs`, `nixpkgs.localSystem` or `nixpkgs.hostPlatform` is set.

- oci.diskSize: Alias of {option}`virtualisation.diskSize`.
- oci.efi: Whether the OCI instance is using EFI.

- openstack.efi: Whether the instance is using EFI.

- openstack.zfs.datasets: Datasets to create under the `tank` and `boot` zpools.

**NOTE:** This option is used only at image creation time, and
does not attempt to declaratively create or manage datasets
on an existing system.

- openstack.zfs.enable: Whether the OpenStack instance uses a ZFS root.

- passthru: This attribute set will be exported as a system attribute.
You can put whatever you want here.

- power.ups.enable: Whether to enable support for Power Devices, such as Uninterruptible Power
Supplies, Power Distribution Units and Solar Controllers
.
- power.ups.maxStartDelay: This can be set as a global variable above your first UPS
definition and it can also be set in a UPS section.  This value
controls how long upsdrvctl will wait for the driver to finish
starting.  This keeps your system from getting stuck due to a
broken driver or UPS.

- power.ups.mode: The MODE determines which part of the NUT is to be started, and
which configuration files must be modified.

The values of MODE can be:

- none: NUT is not configured, or use the Integrated Power
  Management, or use some external system to startup NUT
  components. So nothing is to be started.

- standalone: This mode address a local only configuration, with 1
  UPS protecting the local system. This implies to start the 3 NUT
  layers (driver, upsd and upsmon) and the matching configuration
  files. This mode can also address UPS redundancy.

- netserver: same as for the standalone configuration, but also
  need some more ACLs and possibly a specific LISTEN directive in
  upsd.conf.  Since this MODE is opened to the network, a special
  care should be applied to security concerns.

- netclient: this mode only requires upsmon.

- power.ups.openFirewall: Open ports in the firewall for `upsd`.

- power.ups.package: The nut package to use.
- power.ups.schedulerRules: File which contains the rules to handle UPS events.

- power.ups.ups: This is where you configure all the UPSes that this system will be
monitoring directly.  These are usually attached to serial ports,
but USB devices are also supported.

- power.ups.upsd: Options for the `upsd.conf` configuration file.

- power.ups.upsmon: Options for the `upsmon.conf` configuration file.

- power.ups.users: Users that can access upsd. See `man upsd.users`.

- powerManagement.cpuFreqGovernor: Configure the governor used to regulate the frequency of the
available CPUs. By default, the kernel configures the
performance governor, although this may be overwritten in your
hardware-configuration.nix file.

Often used values: "ondemand", "powersave", "performance"

- powerManagement.cpufreq.max: The maximum frequency the CPU will use.  Defaults to the maximum possible.

- powerManagement.cpufreq.min: The minimum frequency the CPU will use.

- powerManagement.enable: Whether to enable power management.  This includes support
for suspend-to-RAM and powersave features on laptops.

- powerManagement.powerDownCommands: Commands executed when the machine powers down.  That is,
they're executed both when the system shuts down and when
it goes to suspend or hibernation.

- powerManagement.powerUpCommands: Commands executed when the machine powers up.  That is,
they're executed both when the system first boots and when
it resumes from suspend or hibernation.

- powerManagement.powertop.enable: Whether to enable powertop auto tuning on startup.
- powerManagement.powertop.postStart: Shell commands executed after `powertop` is started.

This can be used to workaround problematic configurations. For example,
you can retrigger an `udev` rule to disable power saving on unsupported
USB devices:
```
services.udev.extraRules = '''
  # disable USB auto suspend for Logitech, Inc. G PRO Gaming Mouse
  ACTION=="bind", SUBSYSTEM=="usb", ATTR{idVendor}=="046d", ATTR{idProduct}=="c08c", TEST=="power/control", ATTR{power/control}="on"
''';
```

- powerManagement.powertop.preStart: Shell commands executed before `powertop` is started.

- powerManagement.resumeCommands: Commands executed after the system resumes from suspend-to-RAM.
- powerManagement.scsiLinkPolicy: SCSI link power management policy. The kernel default is
"max_performance".

"med_power_with_dipm" is supported by kernel versions
4.15 and newer.

- profiles.debug.enable: Whether to enable Enable debug/profiling helpers (kernel memory allocation profiling, perf data-type tooling)..
- profiles.debug.memAllocProfiling.compileSupport: Ensure CONFIG_MEM_ALLOC_PROFILING=y in the kernel (rebuilds the kernel).
- profiles.debug.memAllocProfiling.compressed: Request compressed tag storage (adds ',compressed' to sysctl.vm.mem_profiling).
- profiles.debug.memAllocProfiling.debugChecks: Enable CONFIG_MEM_ALLOC_PROFILING_DEBUG (warn about unaccounted allocations).
- profiles.debug.memAllocProfiling.enable: Enable kernel memory allocation profiling at boot (sysctl.vm.mem_profiling=1[,compressed]).
- profiles.debug.memAllocProfiling.enabledByDefault: Set CONFIG_MEM_ALLOC_PROFILING_ENABLED_BY_DEFAULT=y (profiling defaults to on unless overridden by boot param).
- profiles.debug.perfDataType.enable: Install perf + dwarves(pahole) to use perf data-type profiling and related tooling.
- profiles.debug.perfDataType.enableKernelBtf: Force CONFIG_DEBUG_INFO_BTF=y for better BPF/introspection (rebuilds the kernel).
- profiles.debug.perfDataType.installTools: Install perf and dwarves (pahole) into the system when perfDataType.enable is true.
- profiles.debug.schedExt.enable: Enable kernel support for sched_ext (CONFIG_SCHED_CLASS_EXT) and install BPF tooling.
- profiles.debug.schedExt.enableKernelBtf: Force CONFIG_DEBUG_INFO_BTF=y to improve BPF/sched_ext introspection (rebuilds kernel).
- profiles.debug.schedExt.installTools: Install bpftools and clang for building/loading sched_ext examples.
- profiles.games.autoscaleDefault: Whether to enable Enable autoscale heuristics by default for gamescope-targetfps..
- profiles.games.enable: Enable the gaming stack (Steam, Gamescope wrappers, MangoHud, hardware rules).
- profiles.games.nativeBaseFps: Estimated FPS at native resolution used as baseline for autoscale heuristic.
- profiles.games.targetFps: Default target FPS used when autoscale is enabled globally or TARGET_FPS is unset.
- profiles.kernel.amd.enable: Whether to enable Enable AMD-oriented kernel structuredExtraConfig patches..
- profiles.network.bridge.enable: Whether to enable Enable local bridge br0 with DHCP server.
- profiles.performance.disableAudit: Disable audit subsystem: audit=0 (lower syscall overhead).
- profiles.performance.disableMitigations: Add mitigations=off (disables CPU vulnerability mitigations).
- profiles.performance.disableSplitLockDetect: Disable split lock detection: split_lock_detect=off.
- profiles.performance.disableUsbAutosuspend: Disable USB autosuspend: usbcore.autosuspend=-1.
- profiles.performance.disableWatchdogs: Disable watchdogs (nowatchdog, kernel.nmi_watchdog=0).
- profiles.performance.enable: Whether to enable Performance-oriented kernel/boot tweaks (reduces security; use with care)..
- profiles.performance.fastRCU: Faster RCU grace periods: rcupdate.rcu_expedited=1.
- profiles.performance.gamingCpuSet: Comma-separated CPU list for pinning game processes (e.g., 14,15,30,31). Empty disables default pinning.
- profiles.performance.idleNoMwait: Avoid MWAIT C-states: idle=nomwait (lower latency).
- profiles.performance.irqbalance.autoBannedFromIsolated: Automatically set IRQBALANCE_BANNED_CPUS based on CPUs listed in
kernel params nohz_full= and isolcpus=. This avoids stale masks when
CPU isolation changes.

- profiles.performance.lowLatencyScheduling: Favor latency: preempt=full and threadirqs.
- profiles.performance.memExtras.enable: Whether to enable Enable optional memory sysctl tweaks for desktop/work sessions..
- profiles.performance.memExtras.maxMapCount.enable: Set vm.max_map_count for workloads with many memory mappings (e.g., large games, IDEs).
- profiles.performance.memExtras.maxMapCount.value: vm.max_map_count value (e.g., 262144..1048576).
- profiles.performance.memExtras.swappiness.enable: Set vm.swappiness to prefer RAM over swap (lower value reduces swapping).
- profiles.performance.memExtras.swappiness.value: vm.swappiness value (0..200). Lower = less eager swapping.
- profiles.performance.netExtras.enable: Whether to enable Enable a minimal preset of moderate network sysctl tweaks for clients..
- profiles.performance.netExtras.finTimeoutSeconds: Value for net.ipv4.tcp_fin_timeout (seconds).
- profiles.performance.noreplaceSmp: Do not replace SMP alternatives at runtime: noreplace-smp.
- profiles.performance.optimizeInitrdCompression: Use zstd -19 -T0 for initrd compression (slower builds, smaller initrd).
- profiles.performance.pciePerformance: Prefer PCIe performance: pcie_aspm=performance.
- profiles.performance.preemptRt.enable: Enable PREEMPT_RT (CONFIG_PREEMPT_RT). Requires kernel >= 6.12 or RT kernel.
- profiles.performance.preemptRt.mode: How to provide PREEMPT_RT: 'in-tree' toggles CONFIG_PREEMPT_RT in current kernel; 'rt' switches to linuxPackages_rt; 'auto' tries in-tree on >=6.12, else uses RT kernel.
- profiles.performance.quietBoot: Reduce boot verbosity (quiet, splash, hide systemd status).
- profiles.performance.schedDeadline.enable: Ensure CONFIG_SCHED_DEADLINE=y (enables SCHED_DEADLINE class in kernel).
- profiles.performance.skipCryptoSelftests: Skip crypto self-tests: cryptomgr.notests (faster boot).
- profiles.performance.thpMode: Transparent Huge Pages policy (kernel param transparent_hugepage). Null leaves kernel default.
- profiles.performance.trustTSC: Trust TSC clocksource: tsc=reliable.
- profiles.performance.writeback.dirtyBackgroundBytes: Background threshold (bytes) to start writeback.
- profiles.performance.writeback.dirtyBytes: Threshold (bytes) to force writeback (limits burst).
- profiles.performance.writeback.dirtyExpireCentisecs: Time (centiseconds) before dirty data is considered old.
- profiles.performance.writeback.dirtyWritebackCentisecs: Writeback period (centiseconds).
- profiles.performance.writeback.enable: Whether to enable Apply writeback sysctl tuning (reduces IO bursts)..
- profiles.performance.zswap.compressor: zswap compressor (e.g., zstd, lz4, lzo).
- profiles.performance.zswap.enable: Whether to enable Enable zswap compressed swap cache in RAM..
- profiles.performance.zswap.maxPoolPercent: Maximum percentage of RAM used by zswap pool.
- profiles.performance.zswap.zpool: zswap zpool implementation (e.g., zsmalloc, zbud).
- profiles.security.enable: Whether to enable Enable security-oriented kernel tweaks (e.g., page poisoning)..
- profiles.services.adguardhome.enable: Alias of {option}`servicesProfiles.adguardhome.enable`.
- profiles.services.adguardhome.rewrites: Alias of {option}`servicesProfiles.adguardhome.rewrites`.
- profiles.services.avahi.enable: Alias of {option}`servicesProfiles.avahi.enable`.
- profiles.services.bitcoind.enable: Alias of {option}`servicesProfiles.bitcoind.enable`.
- profiles.services.jellyfin.enable: Alias of {option}`servicesProfiles.jellyfin.enable`.
- profiles.services.mpd.enable: Alias of {option}`servicesProfiles.mpd.enable`.
- profiles.services.navidrome.enable: Alias of {option}`servicesProfiles.navidrome.enable`.
- profiles.services.nextcloud.enable: Alias of {option}`servicesProfiles.nextcloud.enable`.
- profiles.services.nextcloud.package: Alias of {option}`servicesProfiles.nextcloud.package`.
- profiles.services.openssh.enable: Alias of {option}`servicesProfiles.openssh.enable`.
- profiles.services.samba.enable: Alias of {option}`servicesProfiles.samba.enable`.
- profiles.services.syncthing.enable: Alias of {option}`servicesProfiles.syncthing.enable`.
- profiles.services.unbound.enable: Alias of {option}`servicesProfiles.unbound.enable`.
- profiles.services.wakapi.enable: Alias of {option}`servicesProfiles.wakapi.enable`.
- profiles.vm.enable: Whether to enable VM profile: prefer generic kernel and trim heavy defaults..
- profiles.work.enable: Whether to enable Enable desktop 'work' profile (turn on zswap)..
- programs._1password.enable: Whether to enable the 1Password CLI tool.
- programs._1password.gid
- programs._1password.package: The 1Password CLI package to use.
- programs._1password-gui.enable: Whether to enable the 1Password GUI application.
- programs._1password-gui.gid
- programs._1password-gui.package: The 1Password GUI package to use.
- programs._1password-gui.polkitPolicyOwners: A list of users who should be able to integrate 1Password with polkit-based authentication mechanisms.

- programs.adb.enable: Whether to configure system to use Android Debug Bridge (adb).
To grant access to a user, it must be part of adbusers group:
`users.users.alice.extraGroups = ["adbusers"];`

- programs.alvr.enable: Whether to enable ALVR, the VR desktop streamer.
- programs.alvr.openFirewall: Whether to open the default ports in the firewall for the ALVR server.

- programs.alvr.package: The alvr package to use.
- programs.amnezia-vpn.enable: Whether to enable The AmneziaVPN client.
- programs.amnezia-vpn.package: The amnezia-vpn package to use.
- programs.appgate-sdp.enable: Whether to enable the AppGate SDP VPN client.
- programs.appimage.binfmt: Whether to enable binfmt registration to run appimages via appimage-run seamlessly.
- programs.appimage.enable: Whether to enable appimage-run wrapper script for executing appimages on NixOS.
- programs.appimage.package: The appimage-run package to use.
- programs.arp-scan.enable: Whether to configure a setcap wrapper for arp-scan.

- programs.atop.atopRotateTimer.enable: Whether to enable the atop-rotate timer, which restarts the atop service
daily to make sure the data files are rotate.

- programs.atop.atopService.enable: Whether to enable the atop service responsible for storing statistics for
long-term analysis.

- programs.atop.atopacctService.enable: Whether to enable the atopacct service which manages process accounting.
This allows Atop to gather data about processes that disappeared in between
two refresh intervals.

- programs.atop.atopgpu.enable: Whether to install and enable the atopgpud daemon to get information about
NVIDIA gpus.

- programs.atop.enable: Whether to enable Atop, a tool for monitoring system resources.
- programs.atop.netatop.enable: Whether to install and enable the netatop kernel module.
Note: this sets the kernel taint flag "O" for loading out-of-tree modules.

- programs.atop.netatop.package: Which package to use for netatop.

- programs.atop.package: The atop package to use.
- programs.atop.settings: Parameters to be written to {file}`/etc/atoprc`.

- programs.atop.setuidWrapper.enable: Whether to install a setuid wrapper for Atop. This is required to use some of
the features as non-root user (e.g.: ipc information, netatop, atopgpu).
Atop tries to drop the root privileges shortly after starting.

- programs.ausweisapp.enable: Whether to enable AusweisApp.
- programs.ausweisapp.openFirewall: Whether to open the required firewall ports for the Smartphone as Card Reader (SaC) functionality of AusweisApp.

- programs.autoenv.enable: Whether to enable autoenv.
- programs.autoenv.package: The autoenv package to use.
- programs.autojump.enable: Whether to enable autojump.

- programs.bandwhich.enable: Whether to add bandwhich to the global environment and configure a
setcap wrapper for it.

- programs.bash.blesh.enable: Whether to enable blesh, a full-featured line editor written in pure Bash.
- programs.bash.completion.enable: Whether to enable Bash completion for all interactive bash shells.
- programs.bash.completion.package: The bash-completion package to use.
- programs.bash.enable: Whenever to configure Bash as an interactive shell.
Note that this tries to make Bash the default
{option}`users.defaultUserShell`,
which in turn means that you might need to explicitly
set this variable if you have another shell configured
with NixOS.

- programs.bash.enableCompletion: Alias of {option}`programs.bash.completion.enable`.
- programs.bash.enableLsColors: Whether to enable extra colors in directory listings.
- programs.bash.interactiveShellInit: Shell script code called during interactive bash shell initialisation.

- programs.bash.loginShellInit: Shell script code called during login bash shell initialisation.

- programs.bash.logout: Shell script code called during login bash shell logout.

- programs.bash.lsColorsFile: Alternative colorscheme for ls colors
- programs.bash.promptInit: Shell script code used to initialise the bash prompt.

- programs.bash.promptPluginInit: Shell script code used to initialise bash prompt plugins.

- programs.bash.shellAliases: Set of aliases for bash shell, which overrides {option}`environment.shellAliases`.
See {option}`environment.shellAliases` for an option format description.

- programs.bash.shellInit: Shell script code called during bash shell initialisation.

- programs.bash.undistractMe.enable: Whether to enable notifications when long-running terminal commands complete.
- programs.bash.undistractMe.playSound: Whether to enable notification sounds when long-running terminal commands complete.
- programs.bash.undistractMe.timeout: Number of seconds it would take for a command to be considered long-running.

- programs.bash.vteIntegration: Whether to enable Bash integration for VTE terminals.
This allows it to preserve the current directory of the shell
across terminals.

- programs.bash-my-aws.enable: Whether to enable bash-my-aws.
- programs.bat.enable: Whether to enable `bat`, a {manpage}`cat(1)` clone with wings.
- programs.bat.extraPackages: Extra `bat` scripts to be added to the system configuration.

- programs.bat.package: The bat package to use.
- programs.bat.settings: Parameters to be written to the system-wide `bat` configuration file.

- programs.bazecor.enable: Whether to enable Bazecor, the graphical configurator for Dygma Products.
- programs.bazecor.package: The bazecor package to use.
- programs.bcc.enable: Whether to enable bcc, tools for BPF-based Linux IO analysis, networking, monitoring, and more.
- programs.benchexec.enable: Whether to enable BenchExec.
- programs.benchexec.package: The benchexec package to use.
- programs.benchexec.users: Users that intend to use BenchExec.
Provide usernames of users that are configured via {option}`users.users` as string,
and UIDs of "mutable users" as integers.
Control group delegation will be configured via systemd.
For more information, see <https://github.com/sosy-lab/benchexec/blob/3.18/doc/INSTALL.md#setting-up-cgroups>.

- programs.browserpass.enable: Whether to enable Browserpass native messaging host.
- programs.calls.enable: Whether to enable GNOME calls: a phone dialer and call handler
.
- programs.captive-browser.bindInterface: Binds `captive-browser` to the network interface declared in
`cfg.interface`. This can be used to avoid collisions
with private subnets.

- programs.captive-browser.browser: The shell (/bin/sh) command executed once the proxy starts.
When browser exits, the proxy exits. An extra env var PROXY is available.

Here, we use a separate Chrome instance in Incognito mode, so that
it can run (and be waited for) alongside the default one, and that
it maintains no state across runs. To configure this browser open a
normal window in it, settings will be preserved.

@volth: chromium is to open a plain HTTP (not HTTPS nor redirect to HTTPS!) website.
        upstream uses http://example.com but I have seen captive portals whose DNS server resolves "example.com" to 127.0.0.1

- programs.captive-browser.dhcp-dns: The shell (/bin/sh) command executed to obtain the DHCP
DNS server address. The first match of an IPv4 regex is used.
IPv4 only, because let's be real, it's a captive portal.

- programs.captive-browser.enable: Whether to enable captive browser, a dedicated Chrome instance to log into captive portals without messing with DNS settings.
- programs.captive-browser.interface: your public network interface (wlp3s0, wlan0, eth0, ...)
- programs.captive-browser.package: The captive-browser package to use.
- programs.captive-browser.socks5-addr: the listen address for the SOCKS5 proxy server
- programs.cardboard
- programs.ccache.cacheDir: CCache directory
- programs.ccache.enable: Whether to enable CCache, a compiler cache for fast recompilation of C/C++ code.
- programs.ccache.group: Group owner of CCache directory
- programs.ccache.owner: Owner of CCache directory
- programs.ccache.packageNames: Nix top-level packages to be compiled using CCache
- programs.cdemu.enable: {command}`cdemu` for members of
{option}`programs.cdemu.group`.

- programs.cdemu.group: Group that users must be in to use {command}`cdemu`.

- programs.cdemu.gui: Whether to install the {command}`cdemu` GUI (gCDEmu).

- programs.cdemu.image-analyzer: Whether to install the image analyzer.

- programs.cfs-zen-tweaks.enable: Whether to enable CFS Zen Tweaks.
- programs.chromium.defaultSearchProviderEnabled: Enable the default search provider.
- programs.chromium.defaultSearchProviderSearchURL: Chromium default search provider url.
- programs.chromium.defaultSearchProviderSuggestURL: Chromium default search provider url for suggestions.
- programs.chromium.enable: Whether to enable policies for chromium based browsers like Chromium, Google Chrome or Brave.
- programs.chromium.enablePlasmaBrowserIntegration: Whether to enable Native Messaging Host for Plasma Browser Integration.
- programs.chromium.extensions: List of chromium extensions to install.
For list of plugins ids see id in url of extensions on
[chrome web store](https://chrome.google.com/webstore/category/extensions)
page. To install a chromium extension not included in the chrome web
store, append to the extension id a semicolon ";" followed by a URL
pointing to an Update Manifest XML file. See
[ExtensionInstallForcelist](https://cloud.google.com/docs/chrome-enterprise/policies/?policy=ExtensionInstallForcelist)
for additional details.

- programs.chromium.extraOpts: Extra chromium policy options. A list of available policies
can be found in the Chrome Enterprise documentation:
<https://cloud.google.com/docs/chrome-enterprise/policies/>
Make sure the selected policy is supported on Linux and your browser version.

- programs.chromium.homepageLocation: Chromium default homepage
- programs.chromium.initialPrefs: Initial preferences are used to configure the browser for the first run.
Unlike {option}`programs.chromium.extraOpts`, initialPrefs can be changed by users in the browser settings.
More information can be found in the Chromium documentation:
<https://www.chromium.org/administrators/configuring-other-preferences/>

- programs.chromium.plasmaBrowserIntegrationPackage: The plasma-browser-integration package to use.
- programs.chrysalis.enable: Whether to enable Chrysalis.
- programs.chrysalis.package: The Chrysalis package to use.
- programs.clash-verge.autoStart: Whether to enable Clash Verge auto launch.
- programs.clash-verge.enable: Whether to enable Clash Verge.
- programs.clash-verge.package: The clash-verge package to use. Available options are
clash-verge-rev and clash-nyanpasu, both are forks of
the original clash-verge project.

- programs.clash-verge.serviceMode: Whether to enable Service Mode.
- programs.clash-verge.tunMode: Whether to enable Setcap for TUN Mode. DNS settings won't work on this way.
- programs.cnping.enable: Whether to enable a setcap wrapper for cnping.
- programs.command-not-found.dbPath: Absolute path to programs.sqlite.

By default this file will be provided by your channel
(nixexprs.tar.xz).

- programs.command-not-found.enable: Whether interactive shells should show which Nix package (if
any) provides a missing command.

Requires nix-channels to be set and downloaded (sudo nix-channels --update.)

See also nix-index and nix-index-database as an alternative for flakes-based systems.

Additionally, having the env var NIX_AUTO_RUN set will automatically run the matching package, and with NIX_AUTO_RUN_INTERACTIVE it will confirm the package before running.

- programs.coolercontrol.enable: Whether to enable CoolerControl GUI & its background services.
- programs.coolercontrol.nvidiaSupport: Enable support for Nvidia GPUs.

- programs.corectrl.enable: Whether to enable CoreCtrl, a tool to overclock amd graphics cards and processors.
Add your user to the corectrl group to run corectrl without needing to enter your password
.
- programs.corectrl.gpuOverclock.enable: Alias of {option}`hardware.amdgpu.overdrive.enable`.
- programs.corectrl.gpuOverclock.ppfeaturemask: Alias of {option}`hardware.amdgpu.overdrive.ppfeaturemask`.
- programs.corectrl.package: The corectrl package to use. Useful for overriding the configuration options used for the package.
- programs.corefreq.enable: Whether to enable Whether to enable the corefreq daemon and kernel module.
- programs.corefreq.package: The corefreq package to use.

- programs.cpu-energy-meter.enable: Whether to enable CPU Energy Meter.
- programs.cpu-energy-meter.package: The cpu-energy-meter package to use.
- programs.criu.enable: Install {command}`criu` along with necessary kernel options.

- programs.dconf.enable: Whether to enable dconf.
- programs.dconf.packages: A list of packages which provide dconf profiles and databases in {file}`/etc/dconf`.
- programs.dconf.profiles: Attrset of dconf profiles. By default the `user` profile is used which
ends up in `/etc/dconf/profile/user`.

- programs.digitalbitbox.enable: Installs the Digital Bitbox application and enables the complementary hardware module.

- programs.digitalbitbox.package: The digitalbitbox package to use. This can be used to install a package with udev rules that differ from the defaults.

- programs.direnv.direnvrcExtra: Extra lines to append to the sourced direnvrc

- programs.direnv.enable: Whether to enable direnv integration. Takes care of both installation and
setting up the sourcing of the shell. Additionally enables nix-direnv
integration. Note that you need to logout and login for this change to apply
.
- programs.direnv.enableBashIntegration: Whether to enable Bash integration
.
- programs.direnv.enableFishIntegration: Whether to enable Fish integration
.
- programs.direnv.enableXonshIntegration: Whether to enable Xonsh integration
.
- programs.direnv.enableZshIntegration: Whether to enable Zsh integration
.
- programs.direnv.finalPackage: The wrapped direnv package.
- programs.direnv.loadInNixShell: Whether to enable loading direnv in `nix-shell` `nix shell` or `nix develop`
.
- programs.direnv.nix-direnv.enable: Whether to enable a faster, persistent implementation of use_nix and use_flake, to replace the builtin one
.
- programs.direnv.nix-direnv.package: The nix-direnv package to use

- programs.direnv.package: The direnv package to use.
- programs.direnv.settings: Direnv configuration. Refer to {manpage}`direnv.toml(1)`.

- programs.direnv.silent: Whether to enable the hiding of direnv logging
.
- programs.dmrconfig.enable: Whether to configure system to enable use of dmrconfig. This
enables the required udev rules and installs the program.

- programs.dmrconfig.package: The dmrconfig package to use.
- programs.droidcam.enable: Whether to enable DroidCam client.
- programs.dublin-traceroute.enable: Whether to enable dublin-traceroute (including setcap wrapper).
- programs.dublin-traceroute.package: The dublin-traceroute package to use.
- programs.dwl.enable: Whether to enable Dwl is a compact, hackable compositor for Wayland based on wlroots.
You can manually launch Dwl by executing "exec dwl" on a TTY.
.
- programs.dwl.extraSessionCommands: Shell commands executed just before dwl is started.

- programs.dwl.package: The dwl package to use.
- programs.ecryptfs.enable: Whether to enable ecryptfs setuid mount wrappers.
- programs.envision.enable: Whether to enable envision.
- programs.envision.openFirewall: Whether to enable the default ports in the firewall for the WiVRn server.
- programs.envision.package: The envision package to use.
- programs.evince.enable: Whether to enable Evince, the GNOME document viewer.
- programs.evince.package: The evince package to use.
- programs.evolution.enable: Whether to enable Evolution, a Personal information management application that provides integrated mail, calendaring and address book functionality.
- programs.evolution.plugins: Plugins for Evolution.
- programs.extra-container.enable: Whether to enable extra-container, a tool for running declarative NixOS containers
without host system rebuilds
.
- programs.fcast-receiver.enable: Whether to enable FCast Receiver.
- programs.fcast-receiver.openFirewall: Open ports needed for the functionality of the program.

- programs.fcast-receiver.package: The fcast-receiver package to use.
- programs.feedbackd.enable: Whether to enable the feedbackd D-BUS service and udev rules.

Your user needs to be in the `feedbackd` group to trigger effects
.
- programs.feedbackd.package: The feedbackd package to use.
- programs.feedbackd.theme-package: The feedbackd-device-themes package to use.
- programs.file-roller.enable: Whether to enable File Roller, an archive manager for GNOME.
- programs.file-roller.package: The file-roller package to use.
- programs.firefox.autoConfig: AutoConfig files can be used to set and lock preferences that are not covered
by the policies.json for Mac and Linux. This method can be used to automatically
change user preferences or prevent the end user from modifiying specific
preferences by locking them. More info can be found in <https://support.mozilla.org/en-US/kb/customizing-firefox-using-autoconfig>.

- programs.firefox.autoConfigFiles: AutoConfig files can be used to set and lock preferences that are not covered
by the policies.json for Mac and Linux. This method can be used to automatically
change user preferences or prevent the end user from modifiying specific
preferences by locking them. More info can be found in <https://support.mozilla.org/en-US/kb/customizing-firefox-using-autoconfig>.

Files are concated and autoConfig is appended.

- programs.firefox.enable: Whether to enable the Firefox web browser.
- programs.firefox.languagePacks: The language packs to install.

- programs.firefox.nativeMessagingHosts.browserpass: Whether to enable Browserpass support.
- programs.firefox.nativeMessagingHosts.bukubrow: Whether to enable Bukubrow support.
- programs.firefox.nativeMessagingHosts.euwebid: Whether to enable Web eID support.
- programs.firefox.nativeMessagingHosts.ff2mpv: Whether to enable ff2mpv support.
- programs.firefox.nativeMessagingHosts.fxCast: Whether to enable fx_cast support.
- programs.firefox.nativeMessagingHosts.gsconnect: Whether to enable GSConnect support.
- programs.firefox.nativeMessagingHosts.jabref: Whether to enable JabRef support.
- programs.firefox.nativeMessagingHosts.packages: Additional packages containing native messaging hosts that should be made available to Firefox extensions.

- programs.firefox.nativeMessagingHosts.passff: Whether to enable PassFF support.
- programs.firefox.nativeMessagingHosts.tridactyl: Whether to enable Tridactyl support.
- programs.firefox.nativeMessagingHosts.ugetIntegrator: Whether to enable Uget Integrator support.
- programs.firefox.package: Firefox package to use.
- programs.firefox.policies: Group policies to install.

See [Mozilla's documentation](https://mozilla.github.io/policy-templates/)
for a list of available options.

This can be used to install extensions declaratively! Check out the
documentation of the `ExtensionSettings` policy for details.

When this option is in use, Firefox will inform you that "your browser
is managed by your organisation". That message appears because NixOS
installs what you have declared here such that it cannot be overridden
through the user interface. It does not mean that someone else has been
given control of your browser, unless of course they also control your
NixOS configuration.


- programs.firefox.preferences: Preferences to set from `about:config`.

Some of these might be able to be configured more ergonomically
using policies.

See [here](https://mozilla.github.io/policy-templates/#preferences) for allowed preferences.

When this option is in use, Firefox will inform you that "your browser
is managed by your organisation". That message appears because NixOS
installs what you have declared here such that it cannot be overridden
through the user interface. It does not mean that someone else has been
given control of your browser, unless of course they also control your
NixOS configuration.


- programs.firefox.preferencesStatus: The status of `firefox.preferences`.

`status` can assume the following values:
- `"default"`: Preferences appear as default.
- `"locked"`: Preferences appear as default and can't be changed.
- `"user"`: Preferences appear as changed.
- `"clear"`: Value has no effect. Resets to factory defaults on each startup.

- programs.firefox.wrapperConfig: Arguments to pass to Firefox wrapper
- programs.firejail.enable: Whether to enable firejail, a sandboxing tool for Linux.
- programs.firejail.wrappedBinaries: Wrap the binaries in firejail and place them in the global path.

- programs.fish.enable: Whether to configure fish as an interactive shell.

- programs.fish.generateCompletions: Whether to enable generating completion files from man pages.
- programs.fish.interactiveShellInit: Shell script code called during interactive fish shell initialisation.

- programs.fish.loginShellInit: Shell script code called during fish login shell initialisation.

- programs.fish.package: The fish package to use.
- programs.fish.promptInit: Shell script code used to initialise fish prompt.

- programs.fish.shellAbbrs: Set of fish abbreviations.

- programs.fish.shellAliases: Set of aliases for fish shell, which overrides {option}`environment.shellAliases`.
See {option}`environment.shellAliases` for an option format description.

- programs.fish.shellInit: Shell script code called during fish shell initialisation.

- programs.fish.useBabelfish: If enabled, the configured environment will be translated to native fish using [babelfish](https://github.com/bouk/babelfish).
Otherwise, [foreign-env](https://github.com/oh-my-fish/plugin-foreign-env) will be used.

- programs.fish.vendor.completions.enable: Whether fish should use completion files provided by other packages.

- programs.fish.vendor.config.enable: Whether fish should source configuration snippets provided by other packages.

- programs.fish.vendor.functions.enable: Whether fish should autoload fish functions provided by other packages.

- programs.flashprog.enable: Whether to enable configuring flashprog udev rules and
installing flashprog as system package
.
- programs.flashprog.package: The flashprog package to use.
- programs.flashrom.enable: Installs flashrom and configures udev rules for programmers
used by flashrom. Grants access to users in the "flashrom"
group.

- programs.flashrom.package: The flashrom package to use.
- programs.flexoptix-app.enable: Whether to enable FLEXOPTIX app + udev rules.
- programs.flexoptix-app.package: The flexoptix-app package to use.
- programs.foot.enable: Whether to enable foot terminal emulator.
- programs.foot.enableBashIntegration: Whether to enable foot bash integration.
- programs.foot.enableFishIntegration: Whether to enable foot fish integration.
- programs.foot.enableZshIntegration: Whether to enable foot zsh integration.
- programs.foot.package: The foot package to use.
- programs.foot.settings: Configuration for foot terminal emulator. Further information can be found in {command}`man 5 foot.ini`.

Global configuration has to be written under the [main] section.

- programs.foot.theme: Theme name. Check <https://codeberg.org/dnkl/foot/src/branch/master/themes> for available themes.

- programs.fuse.enable: Whether to enable fuse.
- programs.fuse.mountMax: Set the maximum number of FUSE mounts allowed to non-root users.

- programs.fuse.userAllowOther: Allow non-root users to specify the allow_other or allow_root mount
options, see mount.fuse3(8).

- programs.fzf.fuzzyCompletion: Whether to enable fuzzy completion with fzf.
- programs.fzf.keybindings: Whether to enable fzf keybindings.
- programs.gamemode.enable: Whether to enable GameMode to optimise system performance on demand.
- programs.gamemode.enableRenice: Whether to enable CAP_SYS_NICE on gamemoded to support lowering process niceness.
- programs.gamemode.settings: System-wide configuration for GameMode (/etc/gamemode.ini).
See {manpage}`gamemoded(8)` man page for available settings.

- programs.gamescope.args: Arguments passed to GameScope on startup.

- programs.gamescope.capSysNice: Add cap_sys_nice capability to the GameScope
binary so that it may renice itself.

- programs.gamescope.enable: Whether to enable gamescope, the SteamOS session compositing window manager.
- programs.gamescope.env: Default environment variables available to the GameScope process, overridable at runtime.

- programs.gamescope.package: The gamescope package to use.
- programs.gdk-pixbuf.modulePackages: Packages providing GDK-Pixbuf modules, for cache generation.
- programs.geary.enable: Whether to enable Geary, a Mail client for GNOME.
- programs.ghidra.enable: Whether to enable Ghidra, a software reverse engineering (SRE) suite of tools.
- programs.ghidra.gdb: Whether to add to gdbinit the python modules required to make Ghidra's debugger work.

- programs.ghidra.package: The ghidra package to use.
- programs.git.config: Configuration to write to /etc/gitconfig. A list can also be
specified to keep the configuration in order. For example, setting
`config` to `[ { foo.x = 42; } { bar.y = 42; }]` will put the `foo`
section before the `bar` section unlike the default alphabetical
order, which can be helpful for sections such as `include` and
`includeIf`. See the CONFIGURATION FILE section of {manpage}`git-config(1)` for
more information.

- programs.git.enable: Whether to enable git, a distributed version control system.
- programs.git.lfs.enable: Whether to enable git-lfs (Large File Storage).
- programs.git.lfs.enablePureSSHTransfer: Whether to enable Enable pure SSH transfer in server side by adding git-lfs-transfer to environment.systemPackages.
- programs.git.lfs.package: The git-lfs package to use.
- programs.git.package: The git package to use.
- programs.git.prompt.enable: Whether to enable automatically sourcing git-prompt.sh. This does not change $PS1; it simply provides relevant utility functions.
- programs.git-worktree-switcher.enable: Whether to enable git-worktree-switcher, switch between git worktrees with speed..
- programs.git-worktree-switcher.package: The git-worktree-switcher package to use.
- programs.gnome-disks.enable: Whether to enable GNOME Disks daemon, a program designed to
be a UDisks2 graphical front-end.

- programs.gnome-documents
- programs.gnome-terminal.enable: Whether to enable GNOME Terminal.
- programs.gnupg.agent.enable: Enables GnuPG agent with socket-activation for every user session.

- programs.gnupg.agent.enableBrowserSocket: Enable browser socket for GnuPG agent.

- programs.gnupg.agent.enableExtraSocket: Enable extra socket for GnuPG agent.

- programs.gnupg.agent.enableSSHSupport: Enable SSH agent support in GnuPG agent. Also sets SSH_AUTH_SOCK
environment variable correctly. This will disable socket-activation
and thus always start a GnuPG agent per user session.

- programs.gnupg.agent.pinentryFlavor
- programs.gnupg.agent.pinentryPackage: Which pinentry package to use. The path to the mainProgram as defined in
the package's meta attributes will be set in /etc/gnupg/gpg-agent.conf.
If not set by the user, it'll pick an appropriate flavor depending on the
system configuration (qt flavor for lxqt and plasma, gtk2 for xfce,
gnome3 on all other systems with X enabled, curses otherwise).

- programs.gnupg.agent.settings: Configuration for /etc/gnupg/gpg-agent.conf.
See {manpage}`gpg-agent(1)` for supported options.

- programs.gnupg.dirmngr.enable: Enables GnuPG network certificate management daemon with socket-activation for every user session.

- programs.gnupg.package: The gnupg package to use.
- programs.goldwarden
- programs.gpaste.enable: Whether to enable GPaste, a clipboard manager.

- programs.gphoto2.enable: Whether to configure system to use gphoto2.
To grant digital camera access to a user, the user must
be part of the camera group:
`users.users.alice.extraGroups = ["camera"];`

- programs.gpu-screen-recorder.enable: Whether to install gpu-screen-recorder and generate setcap
wrappers for promptless recording.

- programs.gpu-screen-recorder.package: The gpu-screen-recorder package to use.
- programs.gtklock.config: Configuration for gtklock.
See [`gtklock(1)`](https://github.com/jovanlanik/gtklock/blob/master/man/gtklock.1.scd) man page for details.

- programs.gtklock.enable: Whether to enable gtklock, a GTK-based lockscreen for Wayland.
- programs.gtklock.modules: gtklock modules to load.
- programs.gtklock.package: The gtklock package to use.
- programs.gtklock.style: CSS Stylesheet for gtklock.
See [gtklock's wiki](https://github.com/jovanlanik/gtklock/wiki#Styling) for details.

- programs.haguichi.enable: Whether to enable Haguichi, a Linux GUI frontend to the proprietary LogMeIn Hamachi.
- programs.hamster.enable: Whether to enable hamster, a time tracking program.
- programs.htop.enable: Whether to enable htop process monitor.
- programs.htop.package: The htop package to use.
- programs.htop.settings: Extra global default configuration for htop
which is read on first startup only.
Htop subsequently uses ~/.config/htop/htoprc
as configuration source.

- programs.hyprland.enable: Whether to enable Hyprland, the dynamic tiling Wayland compositor that doesn't sacrifice on its looks.
You can manually launch Hyprland by executing {command}`Hyprland` on a TTY.
A configuration file will be generated in {file}`~/.config/hypr/hyprland.conf`.
See <https://wiki.hyprland.org> for more information.
- programs.hyprland.enableNvidiaPatches
- programs.hyprland.nvidiaPatches
- programs.hyprland.package: The hyprland package to use. If the package is not overridable with `enableXWayland`, then the module option
{option}`xwayland` will have no effect.

- programs.hyprland.portalPackage: The xdg-desktop-portal-hyprland package to use. If the package is not overridable with `hyprland`, then the Hyprland package
used by the portal may differ from the one set in the module option {option}`package`.

- programs.hyprland.systemd.setPath.enable: Set environment path of systemd to include the current system's bin directory.
This is needed in Hyprland setups, where opening links in applications do not work.
Enabled by default for Hyprland versions older than 0.41.2.

- programs.hyprland.withUWSM: Launch Hyprland with the UWSM (Universal Wayland Session Manager) session manager.
This has improved systemd support and is recommended for most users.
This automatically starts appropiate targets like `graphical-session.target`,
and `wayland-session@Hyprland.target`.

::: {.note}
Some changes may need to be made to Hyprland configs depending on your setup, see
[Hyprland wiki](https://wiki.hyprland.org/Useful-Utilities/Systemd-start/#uwsm).
:::

- programs.hyprland.xwayland.enable: Whether to enable XWayland.
- programs.hyprland.xwayland.hidpi
- programs.hyprlock.enable: Whether to enable hyprlock, Hyprland's GPU-accelerated screen locking utility.
- programs.hyprlock.package: The hyprlock package to use.
- programs.i3lock.enable: Whether to enable i3lock.
- programs.i3lock.package: The i3lock package to use. ::: {.note}
The i3lock package must include a i3lock file or link in its out directory in order for the u2fSupport option to work correctly.
:::

- programs.i3lock.u2fSupport: Whether to enable U2F support in the i3lock program.
U2F enables authentication using a hardware device, such as a security key.
When U2F support is enabled, the i3lock program will set the setuid bit on the i3lock binary and enable the pam u2fAuth service,

- programs.iay.enable: Whether to enable iay, a minimalistic shell prompt.
- programs.iay.minimalPrompt: Use minimal one-liner prompt.
- programs.iay.package: The iay package to use.
- programs.ibus.plugins: Alias of {option}`i18n.inputMethod.ibus.engines`.
- programs.iftop.enable: Whether to enable iftop and setcap wrapper for it.
- programs.iio-hyprland.enable: Whether to enable iio-hyprland and iio-sensor-proxy.
- programs.iio-hyprland.package: The iio-hyprland package to use.
- programs.immersed.enable: Whether to enable immersed.
- programs.immersed.package: The immersed package to use.
- programs.immersed-vr: Alias of {option}`programs.immersed`.
- programs.info.enable: Alias of {option}`documentation.info.enable`.
- programs.iotop.enable: Whether to enable iotop + setcap wrapper.
- programs.iotop.package: The iotop package to use.
- programs.java.binfmt: Whether to enable binfmt to execute java jar's and classes.
- programs.java.enable: Install and setup the Java development kit.

::: {.note}
This adds JAVA_HOME to the global environment, by sourcing the
jdk's setup-hook on shell init. It is equivalent to starting a shell
through 'nix-shell -p jdk', or roughly the following system-wide
configuration:

    environment.variables.JAVA_HOME = ${pkgs.jdk.home}/lib/openjdk;
    environment.systemPackages = [ pkgs.jdk ];
:::

- programs.java.package: The jdk package to use.
- programs.joycond-cemuhook.enable: Whether to enable joycond-cemuhook, a program to enable support for cemuhook's UDP protocol for joycond devices.
- programs.k3b.enable: Whether to enable k3b, the KDE disk burning application.

Additionally to installing `k3b` enabling this will
add `setuid` wrappers in `/run/wrappers/bin`
for both `cdrdao` and `cdrecord`. On first
run you must manually configure the path of `cdrdae` and
`cdrecord` to correspond to the appropriate paths under
`/run/wrappers/bin` in the "Setup External Programs" menu.

- programs.k40-whisperer.enable: Whether to enable K40-Whisperer.
- programs.k40-whisperer.group: Group assigned to the device when connected.

- programs.k40-whisperer.package: The k40-whisperer package to use.
- programs.kbdlight.enable: Whether to enable kbdlight.
- programs.kclock.enable: Whether to enable KClock.
- programs.kde-pim.enable: Whether to enable KDE PIM base packages.
- programs.kde-pim.kmail: Whether to enable KMail.
- programs.kde-pim.kontact: Whether to enable Kontact.
- programs.kde-pim.merkuro: Whether to enable Merkuro.
- programs.kdeconnect.enable: Whether to enable kdeconnect.

Note that it will open the TCP and UDP port from
1714 to 1764 as they are needed for it to function properly.
You can use the {option}`package` to use
`gnomeExtensions.gsconnect` as an alternative
implementation if you use Gnome
.
- programs.kdeconnect.package: The kdeconnect-kde package to use.
- programs.kubeswitch.commandName: The name of the command to use
- programs.kubeswitch.enable: Whether to enable kubeswitch.
- programs.kubeswitch.package: The kubeswitch package to use.
- programs.labwc.enable: Whether to enable labwc.
- programs.labwc.package: The labwc package to use.
- programs.ladybird.enable: Whether to enable the Ladybird web browser.
- programs.lazygit.enable: Whether to enable lazygit, a simple terminal UI for git commands.
- programs.lazygit.package: The lazygit package to use.
- programs.lazygit.settings: Lazygit configuration.

See <https://github.com/jesseduffield/lazygit/blob/master/docs/Config.md> for documentation.

- programs.less.clearDefaultCommands: Clear all default commands.
You should remember to set the quit key.
Otherwise you will not be able to leave less without killing it.

- programs.less.commands: Defines new command keys.
- programs.less.configFile: Path to lesskey configuration file.

{option}`configFile` takes precedence over {option}`commands`,
{option}`clearDefaultCommands`, {option}`lineEditingKeys`, and
{option}`envVariables`.

- programs.less.enable: Whether to enable less, a file pager.
- programs.less.envVariables: Defines environment variables.
- programs.less.lessclose: When less closes a file opened in such a way, it will call another program, called the input postprocessor,
which may perform any desired clean-up action (such as deleting the replacement file created by LESSOPEN).

- programs.less.lessopen: Before less opens a file, it first gives your input preprocessor a chance to modify the way the contents of the file are displayed.

- programs.less.lineEditingKeys: Defines new line-editing keys.
- programs.less.package: The less package to use.
- programs.liboping.enable: Whether to enable liboping.
- programs.light.brightnessKeys.enable: Whether to enable brightness control with keyboard keys.

This is mainly useful for minimalistic (desktop) environments. You
may want to leave this disabled if you run a feature-rich desktop
environment such as KDE, GNOME or Xfce as those handle the
brightness keys themselves. However, enabling brightness control
with this setting makes the control independent of X, so the keys
work in non-graphical ttys, so you might want to consider using this
instead of the default offered by the desktop environment.

Enabling this will turn on {option}`services.actkbd`.

- programs.light.brightnessKeys.minBrightness: The minimum authorized brightness value, e.g. to avoid the
display going dark.

- programs.light.brightnessKeys.step: The percentage value by which to increase/decrease brightness.

- programs.light.enable: Whether to install Light backlight control command
and udev rules granting access to members of the "video" group.

- programs.localsend.enable: Whether to enable localsend, an open source cross-platform alternative to AirDrop.
- programs.localsend.openFirewall: Whether to enable opening the firewall port 53317 for receiving files.
- programs.localsend.package: The localsend package to use.
- programs.man.enable: Alias of {option}`documentation.man.enable`.
- programs.mdevctl.enable: Whether to enable Mediated Device Management.
- programs.mepo.enable: Whether to enable Mepo, a fast, simple and hackable OSM map viewer.
- programs.mepo.locationBackends.geoclue: Whether to enable location detection via geoclue
- programs.mepo.locationBackends.gpsd: Whether to enable location detection via gpsd.
This may require additional configuration of gpsd, see [here](#opt-services.gpsd.enable)

- programs.mininet.enable: Whether to enable Mininet, an emulator for rapid prototyping of Software Defined Networks.
- programs.minipro.enable: Whether to enable minipro and its udev rules.
Users of the `plugdev` group can interact with connected MiniPRO chip programmers.

- programs.minipro.package: The minipro package to use.
- programs.miriway.config: Miriway's config. This will be installed system-wide.
The default will install the miriway package's barebones example config.

- programs.miriway.enable: Whether to enable Miriway, a Mir based Wayland compositor. You can manually launch Miriway by
executing "exec miriway" on a TTY, or launch it from a display manager. Copy
/etc/xdg/xdg-miriway/miriway-shell.config to ~/.config/miriway-shell.config
to modify the system-wide configuration on a per-user basis. See <https://github.com/Miriway/Miriway>,
and "miriway --help" for more information.
- programs.mosh.enable: Whether to enable mosh.
- programs.mosh.openFirewall: Whether to automatically open the necessary ports in the firewall.
- programs.mosh.package: The mosh package to use.
- programs.mosh.withUtempter: Whether to enable libutempter for mosh.

This is required so that mosh can write to /var/run/utmp (which can be queried with `who` to display currently connected user sessions).
Note, this will add a guid wrapper for the group utmp!

- programs.mouse-actions.autorun: Whether to start a user service to run mouse-actions on startup.

- programs.mouse-actions.enable: Whether to install and set up mouse-actions and it's udev rules.

Note that only users in the "uinput" group will be able to use the package

- programs.mouse-actions.package: The mouse-actions package to use.
- programs.msmtp.accounts: Named accounts and their respective configurations.
The special name "default" allows a default account to be defined.
See {manpage}`msmtp(1)` for the available options.

Use `programs.msmtp.extraConfig` instead of this attribute set-based
option if ordered account inheritance is needed.

It is advised to use the `passwordeval` setting to read the password
from a secret file to avoid having it written in the world-readable
nix store. The password file must end with a newline (`\n`).

- programs.msmtp.defaults: Default values applied to all accounts.
See {manpage}`msmtp(1)` for the available options.

- programs.msmtp.enable: Whether to enable msmtp - an SMTP client.
- programs.msmtp.extraConfig: Extra lines to add to the msmtp configuration verbatim.
See {manpage}`msmtp(1)` for the syntax and available options.

- programs.msmtp.package: The msmtp package to use.
- programs.msmtp.setSendmail: Whether to set the system sendmail to msmtp's.

- programs.mtr.enable: Whether to add mtr to the global environment and configure a
setcap wrapper for it.

- programs.mtr.package: The mtr package to use.
- programs.nano.enable: Whether to enable nano, a small user-friendly console text editor.
- programs.nano.nanorc: The system-wide nano configuration.
See {manpage}`nanorc(5)`.

- programs.nano.package: The nano package to use.
- programs.nano.syntaxHighlight: Whether to enable syntax highlight for various languages.
- programs.nautilus-open-any-terminal.enable: Whether to enable nautilus-open-any-terminal.
- programs.nautilus-open-any-terminal.terminal: The terminal emulator to add to context-entry of nautilus. Supported terminal
emulators are listed in <https://github.com/Stunkymonkey/nautilus-open-any-terminal#supported-terminal-emulators>.

- programs.nbd.enable: Whether to enable Network Block Device (nbd) support.
- programs.nekoray.enable: Whether to enable nekoray, a GUI proxy configuration manager.
- programs.nekoray.package: The nekoray package to use.
- programs.nekoray.tunMode.enable: Whether to enable TUN mode of nekoray.
- programs.nekoray.tunMode.setuid: Whether to enable setting suid bit for nekobox_core to run as root, which is less
secure than default setcap method but closer to upstream assumptions.
Enable this if you find the default setcap method configured in
this module doesn't work for you
.
- programs.neovim.configure: Generate your init file from your list of plugins and custom commands.
Neovim will then be wrapped to load {command}`nvim -u /nix/store/«hash»-vimrc`

- programs.neovim.defaultEditor: When enabled, installs neovim and configures neovim to be the default editor
using the EDITOR environment variable.

- programs.neovim.enable: Whether to enable Neovim.

When enabled through this option, Neovim is wrapped to use a
configuration managed by this module. The configuration file in the
user's home directory at {file}`~/.config/nvim/init.vim` is no longer
loaded by default.

- programs.neovim.finalPackage: Resulting customized neovim package.
- programs.neovim.package: The neovim-unwrapped package to use.
- programs.neovim.runtime: Set of files that have to be linked in {file}`runtime`.

- programs.neovim.viAlias: Symlink {command}`vi` to {command}`nvim` binary.

- programs.neovim.vimAlias: Symlink {command}`vim` to {command}`nvim` binary.

- programs.neovim.withNodeJs: Enable Node provider.
- programs.neovim.withPython3: Enable Python 3 provider.
- programs.neovim.withRuby: Enable Ruby provider.
- programs.nethoscope.enable: Whether to add nethoscope to the global environment and configure a
setcap wrapper for it.

- programs.nexttrace.enable: Whether to enable Nexttrace to the global environment and configure a setcap wrapper for it.
- programs.nexttrace.package: The nexttrace package to use.
- programs.nh.clean.dates: How often cleanup is performed. Passed to systemd.time

The format is described in
{manpage}`systemd.time(7)`.

- programs.nh.clean.enable: Whether to enable periodic garbage collection with nh clean all.
- programs.nh.clean.extraArgs: Options given to nh clean when the service is run automatically.

See `nh clean all --help` for more information.

- programs.nh.enable: Whether to enable nh, yet another Nix CLI helper.
- programs.nh.flake: The string that will be used for the `NH_FLAKE` environment variable.

`NH_FLAKE` is used by nh as the default flake for performing actions, such as
`nh os switch`. This behaviour can be overriden per-command with environment
variables that will take priority.

- `NH_OS_FLAKE`: will take priority for `nh os` commands.
- `NH_HOME_FLAKE`: will take priority for `nh home` commands.
- `NH_DARWIN_FLAKE`: will take priority for `nh darwin` commands.

The formerly valid `FLAKE` is now deprecated by nh, and will cause hard errors
in future releases if `NH_FLAKE` is not set.

- programs.nh.package: The nh package to use.
- programs.niri.enable: Whether to enable Niri, a scrollable-tiling Wayland compositor.
- programs.niri.package: The niri package to use.
- programs.nix-index.enable: Whether to enable nix-index, a file database for nixpkgs.
- programs.nix-index.enableBashIntegration: Whether to enable Bash integration.
- programs.nix-index.enableFishIntegration: Whether to enable Fish integration.
- programs.nix-index.enableZshIntegration: Whether to enable Zsh integration.
- programs.nix-index.package: The nix-index package to use.
- programs.nix-ld.enable: Whether to enable nix-ld, Documentation: <https://github.com/nix-community/nix-ld>.
- programs.nix-ld.libraries: Libraries that automatically become available to all programs. The default set includes common libraries.
- programs.nix-ld.package: The nix-ld package to use.
- programs.nix-required-mounts.allowedPatterns: The hook config, describing which paths to mount for which system features
- programs.nix-required-mounts.enable: Whether to enable Expose extra paths to the sandbox depending on derivations' requiredSystemFeatures.
- programs.nix-required-mounts.extraWrapperArgs: List of extra arguments (such as `--add-flags -v`) to pass to the hook's wrapper
- programs.nix-required-mounts.package: The final package with the final config applied
- programs.nix-required-mounts.presets.nvidia-gpu.enable: Whether to enable Declare the support for derivations that require an Nvidia GPU to be
available, e.g. derivations with `requiredSystemFeatures = [ "cuda" ]`.
This mounts the corresponding userspace drivers and device nodes in the
sandbox, but only for derivations that request these special features.

You may extend or override the exposed paths via the
`programs.nix-required-mounts.allowedPatterns.nvidia-gpu.paths` option.
.
- programs.nm-applet.enable: Whether to enable nm-applet, a NetworkManager control applet for GNOME.
- programs.nm-applet.indicator: Whether to use indicator instead of status icon.
It is needed for Appindicator environments, like Enlightenment.

- programs.nncp.enable: Whether to enable NNCP (Node to Node copy) utilities and configuration.
- programs.nncp.group: The group under which NNCP files shall be owned.
Any member of this group may access the secret keys
of this NNCP node.

- programs.nncp.package: The nncp package to use.
- programs.nncp.secrets: A list of paths to NNCP configuration files that should not be
in the Nix store. These files are layered on top of the values at
[](#opt-programs.nncp.settings).

- programs.nncp.settings: NNCP configuration, see
<http://www.nncpgo.org/Configuration.html>.
At runtime these settings will be overlayed by the contents of
[](#opt-programs.nncp.secrets) into the file
`/run/nncp.hjson`. Node keypairs go in
`secrets`, do not specify them in
`settings` as they will be leaked into
`/nix/store`!

- programs.noisetorch.enable: Whether to enable noisetorch (+ setcap wrapper), a virtual microphone device with noise suppression.
- programs.noisetorch.package: The noisetorch package to use.
- programs.npm.enable: Whether to enable {command}`npm` global config.
- programs.npm.npmrc: The system-wide npm configuration.
See <https://docs.npmjs.com/misc/config>.

- programs.npm.package: The npm package to use.
- programs.ns-usbloader.enable: Whether to enable ns-usbloader application with udev rules applied.
- programs.oblogout
- programs.obs-studio.enable: Whether to enable Free and open source software for video recording and live streaming.
- programs.obs-studio.enableVirtualCamera: Installs and sets up the v4l2loopback kernel module, necessary for OBS
to start a virtual camera.

- programs.obs-studio.finalPackage: Resulting customized OBS Studio package.
- programs.obs-studio.package: The obs-studio package to use.
- programs.obs-studio.plugins: Optional OBS plugins.
- programs.oddjobd.enable: Whether to enable oddjob, a D-Bus service which runs odd jobs on behalf of client applications.
- programs.oddjobd.package: The oddjob package to use.
- programs.opengamepadui.args: Arguments to be passed to OpenGamepadUI

- programs.opengamepadui.enable: Whether to enable opengamepadui.
- programs.opengamepadui.extraPackages: Additional packages to add to the OpenGamepadUI environment.

- programs.opengamepadui.fontPackages: Font packages to use in OpenGamepadUI.

Defaults to system fonts, but could be overridden to use other fonts — useful for users who would like to customize CJK fonts used in opengamepadui. According to the [upstream issue](https://github.com/ValveSoftware/opengamepadui-for-linux/issues/10422#issuecomment-1944396010), opengamepadui only follows the per-user fontconfig configuration.

- programs.opengamepadui.gamescopeSession: Run a GameScope driven OpenGamepadUI session from your display-manager
- programs.opengamepadui.inputplumber.enable: Whether to enable Run InputPlumber service for input management and gamepad configuration.
.
- programs.opengamepadui.package: The OpenGamepadUI package to use.
- programs.opengamepadui.powerstation.enable: Whether to enable Run PowerStation service for TDP control and performance settings.
.
- programs.openvpn3.enable: Whether to enable the openvpn3 client.
- programs.openvpn3.log-service: Log service configuration
- programs.openvpn3.netcfg: Network configuration
- programs.openvpn3.package: The openvpn3 package to use.
- programs.pantheon-tweaks
- programs.partition-manager.enable: Whether to enable KDE Partition Manager.
- programs.partition-manager.package: The partitionmanager package to use.
- programs.pay-respects.aiIntegration: Whether to enable `pay-respects`' LLM integration. When there is no rule for a given error, `pay-respects` can query an OpenAI-compatible API endpoint for command corrections.

- If this is set to `false`, all LLM-related features are disabled.
- If this is set to `true`, the default OpenAI endpoint will be used, using upstream's API key. This default API key may be rate-limited.
- You can also set a custom API endpoint, large language model and locale for command corrections. Simply access the `aiIntegration.url`, `aiIntegration.model` and `aiIntegration.locale` options, as described in the example.
  - Take a look at the [services.ollama](#opt-services.ollama.enable) NixOS module if you wish to host a local large language model for `pay-respects`.

For all of these methods, you can set a custom secret API key by using the `_PR_AI_API_KEY` environment variable.

- programs.pay-respects.alias: `pay-respects` needs an alias to be configured.
The default value is `f`, but you can use anything else as well.

- programs.pay-respects.enable: Whether to enable pay-respects, an app which corrects your previous console command.
- programs.pay-respects.package: The pay-respects package to use.
- programs.pay-respects.runtimeRules: List of rules to be added to `/etc/xdg/pay-respects/rules`.
`pay-respects` will read the contents of these generated rules to recommend command corrections.
Each rule module should start with the `command` attribute that specifies the command name. See the [upstream documentation](https://codeberg.org/iff/pay-respects/src/branch/main/rules.md) for more information.

- programs.plotinus.enable: Whether to enable the Plotinus GTK 3 plugin. Plotinus provides a
popup (triggered by Ctrl-Shift-P) to search the menus of a
compatible application.

- programs.pmount.enable: Whether to enable pmount, a tool that allows normal users to mount removable devices
without requiring root privileges
.
- programs.pmount.package: The pmount package to use.
- programs.pqos-wrapper.enable: Whether to enable PQoS Wrapper for BenchExec.
- programs.pqos-wrapper.package: The pqos-wrapper package to use.
- programs.projecteur.enable: Whether to enable projecteur, an application for the Logitech Spotlight device (and similar).
- programs.projecteur.package: The projecteur package to use.
- programs.proxychains.chain
- programs.proxychains.enable: Whether to enable proxychains configuration.
- programs.proxychains.localnet: By default enable localnet for loopback address ranges.
- programs.proxychains.package: The proxychains package to use.
- programs.proxychains.proxies: Proxies to be used by proxychains.

- programs.proxychains.proxyDNS: Proxy DNS requests - no leak for DNS data.
- programs.proxychains.quietMode: Whether to enable Quiet mode (no output from the library).
- programs.proxychains.remoteDNSSubnet: Set the class A subnet number to use for the internal remote DNS mapping, uses the reserved 224.x.x.x range by default.

- programs.proxychains.tcpConnectTimeOut: Connection time-out in milliseconds.
- programs.proxychains.tcpReadTimeOut: Connection read time-out in milliseconds.
- programs.pulseview.enable: Whether to enable pulseview, a sigrok GUI.
- programs.qdmr.enable: Whether to enable QDMR - a GUI application and command line tool for programming DMR radios.
- programs.qdmr.package: The qdmr package to use.
- programs.qgroundcontrol.blacklistModemManagerFromTTYUSB: Disallow ModemManager from interfering with serial connections that QGroundControl might use.

Note that if you use a modem that's connected via USB, you might want to disable this option.

- programs.qgroundcontrol.enable: Whether to enable qgroundcontrol.
- programs.qgroundcontrol.package: The qgroundcontrol package to use.
- programs.qt5ct.enable
- programs.quark-goldleaf.enable: Whether to enable quark-goldleaf with udev rules applied.
- programs.regreet.cageArgs: Additional arguments to be passed to
[cage](https://github.com/cage-kiosk/cage).

- programs.regreet.cursorTheme.name: Name of the cursor theme to use for regreet.

- programs.regreet.cursorTheme.package: The package that provides the cursor theme given in the name option.

- programs.regreet.enable: Enable ReGreet, a clean and customizable greeter for greetd.

To use ReGreet, {option}`services.greetd` has to be enabled and
{option}`services.greetd.settings.default_session` should contain the
appropriate configuration to launch
{option}`config.programs.regreet.package`. For examples, see the
[ReGreet Readme](https://github.com/rharish101/ReGreet#set-as-default-session).

A minimal configuration that launches ReGreet in {command}`cage` is
enabled by this module by default.

- programs.regreet.extraCss: Extra CSS rules to apply on top of the GTK theme. Refer to
[GTK CSS Properties](https://docs.gtk.org/gtk4/css-properties.html) for
modifiable properties.

- programs.regreet.font.name: Name of the font to use for regreet.

- programs.regreet.font.package: The package that provides the font given in the name option.

- programs.regreet.font.size: Size of the font to use for regreet.

- programs.regreet.iconTheme.name: Name of the icon theme to use for regreet.

- programs.regreet.iconTheme.package: The package that provides the icon theme given in the name option.

- programs.regreet.package: The regreet package to use.
- programs.regreet.settings: ReGreet configuration file. Refer
<https://github.com/rharish101/ReGreet/blob/main/regreet.sample.toml>
for options.

- programs.regreet.theme.name: Name of the theme to use for regreet.

- programs.regreet.theme.package: The package that provides the theme given in the name option.

- programs.river.enable: Alias of {option}`programs.river-classic.enable`.
- programs.river.extraPackages: Alias of {option}`programs.river-classic.extraPackages`.
- programs.river.package: Alias of {option}`programs.river-classic.package`.
- programs.river.xwayland.enable: Alias of {option}`programs.river-classic.xwayland.enable`.
- programs.river-classic.enable: Whether to enable river-classic, a dynamic tiling Wayland compositor.
- programs.river-classic.extraPackages: Extra packages to be installed system wide. See
[Common X11 apps used on i3 with Wayland alternatives](https://github.com/swaywm/sway/wiki/i3-Migration-Guide#common-x11-apps-used-on-i3-with-wayland-alternatives)
for a list of useful software.

- programs.river-classic.package: The river-classic package to use. If the package is not overridable with `xwaylandSupport`, then the module option
{option}`xwayland` will have no effect.

Set to `null` to not add any River package to your path.
This should be done if you want to use the Home Manager River module to install River.

- programs.river-classic.xwayland.enable: Whether to enable XWayland.
- programs.rog-control-center.autoStart: Whether rog-control-center should be started automatically.
- programs.rog-control-center.enable: Whether to enable the rog-control-center application.
- programs.rush.enable: Whether to enable Restricted User Shell..
- programs.rush.global: The `global` statement defines global settings.
- programs.rush.package: The rush package to use.
- programs.rush.rules: The rule statement configures a GNU Rush rule. This is a block statement, which means that all
statements located between it and the next rule statement (or end of file, whichever occurs first)
modify the definition of that rule.

- programs.rush.shell: The resolved shell path that users can inherit to set `rush` as their login shell.
This is a convenience option for use in user definitions. Example:
  `users.users.alice = { inherit (config.programs.rush) shell; ... };`

- programs.rush.wrap: Whether to wrap the `rush` binary with a SUID-enabled wrapper.
This is required if {option}`security.enableWrappers` is enabled in your configuration.

- programs.rust-motd.enable: Whether to enable rust-motd, a Message Of The Day (MOTD) generator.
- programs.rust-motd.enableMotdInSSHD: Whether to let `openssh` print the
result when entering a new `ssh`-session.
By default either nothing or a static file defined via
[](#opt-users.motd) is printed. Because of that,
the latter option is incompatible with this module.

- programs.rust-motd.order: The order of the sections in [](#opt-programs.rust-motd.settings).
By default they are ordered alphabetically.

Context: since attribute sets in Nix are always
ordered alphabetically internally this means that

```nix
{
  uptime = { /* ... */ };
  banner = { /* ... */ };
}
```

will still have `banner` displayed before `uptime`.

To work around that, this option can be used to define the order of all keys,
i.e.

```nix
{
  order = [
    "uptime"
    "banner"
  ];
}
```

makes sure that `uptime` is placed before `banner` in the motd.

- programs.rust-motd.refreshInterval: Interval in which the {manpage}`motd(5)` file is refreshed.
For possible formats, please refer to {manpage}`systemd.time(7)`.

- programs.rust-motd.settings: Settings on what to generate. Please read the
[upstream documentation](https://github.com/rust-motd/rust-motd/blob/main/README.md#configuration)
for further information.

- programs.ryzen-monitor-ng.enable: Whether to enable ryzen_monitor_ng, a userspace application for setting and getting Ryzen SMU (System Management Unit) parameters via the ryzen_smu kernel driver.

Monitor power information of Ryzen processors via the PM table of the SMU.

SMU Set and Get for many parameters and CO counts.

<https://github.com/mann1x/ryzen_monitor_ng>

WARNING: Damage cause by use of your AMD processor outside of official AMD specifications or outside of factory settings are not covered under any AMD product warranty and may not be covered by your board or system manufacturer's warranty
.
- programs.ryzen-monitor-ng.package: The ryzen-monitor-ng package to use.
- programs.schroot.enable: Whether to enable schroot, a lightweight virtualisation tool.
- programs.schroot.package: The schroot package to use.
- programs.schroot.profiles: Custom configuration profiles for schroot.
- programs.schroot.settings: Schroot configuration settings.
For more details, see {manpage}`schroot.conf(5)`.

- programs.screen.enable: Whether to enable screen, a basic terminal multiplexer.
- programs.screen.package: The screen package to use.
- programs.screen.screenrc: The contents of {file}`/etc/screenrc` file
- programs.seahorse.enable: Whether to enable Seahorse, a GNOME application for managing encryption keys and passwords in the GNOME Keyring.
- programs.sedutil.enable: Whether to enable sedutil, to manage self encrypting drives that conform to the Trusted Computing Group OPAL 2.0 SSC specification.
- programs.sharing.enable: Whether to enable sharing, a CLI tool for sharing files.

Note that it will opens the 7478 port for TCP in the firewall, which is needed for it to function properly
.
- programs.singularity.enable: Whether to install Singularity/Apptainer with system-level overriding such as SUID support.

- programs.singularity.enableExternalLocalStateDir: Whether to use top-level directories as LOCALSTATEDIR
instead of the store path ones.
This affects the SESSIONDIR of Apptainer/Singularity.
If set to true, the SESSIONDIR will become
`/var/lib/${projectName}/mnt/session`.

- programs.singularity.enableFakeroot: Whether to enable the `--fakeroot` support of Singularity/Apptainer.

This option is deprecated and has no effect.
`--fakeroot` support is enabled automatically,
as `systemBinPaths = [ "/run/wrappers/bin" ]` is always specified.

- programs.singularity.enableSuid: Whether to enable the SUID support of Singularity/Apptainer.

- programs.singularity.package: The singularity package to use.
- programs.singularity.packageOverriden: This option provides access to the overridden result of `programs.singularity.package`.

For example, the following configuration makes all the Nixpkgs packages use the overridden `singularity`:
```Nix
{ config, lib, pkgs, ... }:
{
  nixpkgs.overlays = [
    (final: prev: {
      _singularity-orig = prev.singularity;
      singularity = config.programs.singularity.packageOverriden;
    })
  ];
  programs.singularity.enable = true;
  programs.singularity.package = pkgs._singularity-orig;
}
```

Use `lib.mkForce` to forcefully specify the overridden package.

- programs.singularity.systemBinPaths: (Extra) system-wide /**/bin paths
for Apptainer/Singularity to find command-line utilities in.

`"/run/wrappers/bin"` is included by default to make
utilities with SUID bit set available to Apptainer/Singularity.
Use `lib.mkForce` to shadow the default values.

- programs.skim.enable: Whether to enable skim fuzzy finder.
- programs.skim.fuzzyCompletion
- programs.skim.keybindings: Whether to enable skim keybindings.
- programs.skim.package: The skim package to use.
- programs.slock.enable: Whether to install slock screen locker with setuid wrapper.

- programs.slock.package: The slock package to use.
- programs.sniffnet.enable: Whether to enable sniffnet, a network traffic monitor application.
- programs.soundmodem.enable: Whether to add Soundmodem to the global environment and configure a
wrapper for 'soundmodemconfig' for users in the 'soundmodem' group.

- programs.soundmodem.package: The soundmodem package to use.
- programs.spacefm.enable: Whether to install SpaceFM and create {file}`/etc/spacefm/spacefm.conf`.

- programs.spacefm.settings: The system-wide spacefm configuration.
Parameters to be written to {file}`/etc/spacefm/spacefm.conf`.
Refer to the [relevant entry](https://ignorantguru.github.io/spacefm/spacefm-manual-en.html#programfiles-etc) in the SpaceFM manual.

- programs.ssh.agentPKCS11Whitelist: A pattern-list of acceptable paths for PKCS#11 shared libraries
that may be used with the -s option to ssh-add.

- programs.ssh.agentTimeout: How long to keep the private keys in memory. Use null to keep them forever.

- programs.ssh.askPassword: Program used by SSH to ask for passwords.
- programs.ssh.ciphers: Specifies the ciphers allowed and their order of preference.

- programs.ssh.enableAskPassword: Whether to configure SSH_ASKPASS in the environment.
- programs.ssh.extraConfig: Extra configuration text prepended to {file}`ssh_config`. Other generated
options will be added after a `Host *` pattern.
See {manpage}`ssh_config(5)`
for help.

- programs.ssh.forwardX11: Whether to request X11 forwarding on outgoing connections by default.
If set to null, the option is not set at all.
This is useful for running graphical programs on the remote machine and have them display to your local X11 server.
Historically, this value has depended on the value used by the local sshd daemon, but there really isn't a relation between the two.
Note: there are some security risks to forwarding an X11 connection.
NixOS's X server is built with the SECURITY extension, which prevents some obvious attacks.
To enable or disable forwarding on a per-connection basis, see the -X and -x options to ssh.
The -Y option to ssh enables trusted forwarding, which bypasses the SECURITY extension.

- programs.ssh.hostKeyAlgorithms: Specifies the host key algorithms that the client wants to use in order of preference.

- programs.ssh.kexAlgorithms: Specifies the available KEX (Key Exchange) algorithms.

- programs.ssh.knownHosts: The set of system-wide known SSH hosts. To make simple setups more
convenient the name of an attribute in this set is used as a host name
for the entry. This behaviour can be disabled by setting
`hostNames` explicitly. You can use
`extraHostNames` to add additional host names without
disabling this default.

- programs.ssh.knownHostsFiles: Files containing SSH host keys to set as global known hosts.
`/etc/ssh/ssh_known_hosts` (which is
generated by {option}`programs.ssh.knownHosts`) is
always included.

- programs.ssh.macs: Specifies the MAC (message authentication code) algorithms in order of preference. The MAC algorithm is used
for data integrity protection.

- programs.ssh.package: The openssh package to use.
- programs.ssh.pubkeyAcceptedKeyTypes: Specifies the key lib.types that will be used for public key authentication.

- programs.ssh.setXAuthLocation: Whether to set the path to {command}`xauth` for X11-forwarded connections.
This causes a dependency on X11 packages.

- programs.ssh.startAgent: Whether to start the OpenSSH agent when you log in.  The OpenSSH agent
remembers private keys for you so that you don't have to type in
passphrases every time you make an SSH connection.  Use
{command}`ssh-add` to add a key to the agent.

- programs.ssh.systemd-ssh-proxy.enable: Whether to enable systemd's ssh proxy plugin.
See {manpage}`systemd-ssh-proxy(1)`.

- programs.starship.enable: Whether to enable the Starship shell prompt.
- programs.starship.interactiveOnly: Whether to enable starship only when the shell is interactive.
Some plugins require this to be set to false to function correctly
.
- programs.starship.package: The starship package to use.
- programs.starship.presets: Presets files to be merged with settings in order.

- programs.starship.settings: Configuration included in `starship.toml`.

See <https://starship.rs/config/#prompt> for documentation.

- programs.starship.transientPrompt.enable: Whether to enable Starship's [transient prompt](https://starship.rs/advanced-config/#transientprompt-and-transientrightprompt-in-fish)
feature in `fish` shells. After a command has been entered, Starship
replaces the usual prompt with the terminal output of the commands
defined in the `programs.starship.transientPrompt.left`
and `programs.starship.transientPrompt.right` options.

This option only works with `fish`, as `bash` requires a
[custom configuration](https://starship.rs/advanced-config/#transientprompt-and-transientrightprompt-in-bash)
involving [Ble.sh](https://github.com/akinomyoga/ble.sh), which can be
enabled with `programs.bash.blesh.enable`, but not configured using NixOS
.
- programs.starship.transientPrompt.left: Fish code composing the body of the `starship_transient_prompt_func` function. The output of
this code will become the left side of the transient prompt.

Not setting this option (or setting it to `null`) will prevent
the `starship_transient_prompt_func` function from being generated. By default, the left
prompt is a bold-green '❯' character.

- programs.starship.transientPrompt.right: Fish code composing the body of the `starship_transient_rprompt_func` function. The output of
this code will become the right side of the transient prompt.

Not setting this option (or setting it to `null`) will prevent
the `starship_transient_rprompt_func` function from being generated. By default, the right
prompt is empty.

- programs.steam.dedicatedServer.openFirewall: Open ports in the firewall for Source Dedicated Server.

- programs.steam.enable: Whether to enable steam.
- programs.steam.extest.enable: Whether to enable Load the extest library into Steam, to translate X11 input events to
uinput events (e.g. for using Steam Input on Wayland)
.
- programs.steam.extraCompatPackages: Extra packages to be used as compatibility tools for Steam on Linux. Packages will be included
in the `STEAM_EXTRA_COMPAT_TOOLS_PATHS` environmental variable. For more information see
https://github.com/ValveSoftware/steam-for-linux/issues/6310.

These packages must be Steam compatibility tools that have a `steamcompattool` output.

- programs.steam.extraPackages: Additional packages to add to the Steam environment.

- programs.steam.fontPackages: Font packages to use in Steam.

Defaults to system fonts, but could be overridden to use other fonts — useful for users who would like to customize CJK fonts used in Steam. According to the [upstream issue](https://github.com/ValveSoftware/steam-for-linux/issues/10422#issuecomment-1944396010), Steam only follows the per-user fontconfig configuration.

- programs.steam.gamescopeSession: Run a GameScope driven Steam session from your display-manager
- programs.steam.localNetworkGameTransfers.openFirewall: Open ports in the firewall for Steam Local Network Game Transfers.

- programs.steam.package: The Steam package to use. Additional libraries are added from the system
configuration to ensure graphics work properly.

Use this option to customise the Steam package rather than adding your
custom Steam to {option}`environment.systemPackages` yourself.

- programs.steam.protontricks.enable: Whether to enable protontricks, a simple wrapper for running Winetricks commands for Proton-enabled games.
- programs.steam.protontricks.package: The protontricks package to use.
- programs.steam.remotePlay.openFirewall: Open ports in the firewall for Steam Remote Play.

- programs.streamcontroller.enable: Whether to enable StreamController.
- programs.streamcontroller.package: The StreamController package to use

- programs.streamdeck-ui.autoStart: Whether streamdeck-ui should be started automatically.
- programs.streamdeck-ui.enable: Whether to enable streamdeck-ui.
- programs.streamdeck-ui.package: The streamdeck-ui package to use.
- programs.sway.enable: Whether to enable Sway, the i3-compatible tiling Wayland compositor. You can manually launch
Sway by executing "exec sway" on a TTY. Copy /etc/sway/config to
~/.config/sway/config to modify the default configuration. See
<https://github.com/swaywm/sway/wiki> and
"man 5 sway" for more information.
- programs.sway.extraOptions: Command line arguments passed to launch Sway. Please DO NOT report
issues if you use an unsupported GPU (proprietary drivers).

- programs.sway.extraPackages: Extra packages to be installed system wide. See
<https://github.com/swaywm/sway/wiki/Useful-add-ons-for-sway> and
<https://github.com/swaywm/sway/wiki/i3-Migration-Guide#common-x11-apps-used-on-i3-with-wayland-alternatives>
for a list of useful software.

- programs.sway.extraSessionCommands: Shell commands executed just before Sway is started. See
<https://github.com/swaywm/sway/wiki/Running-programs-natively-under-wayland>
and <https://github.com/swaywm/wlroots/blob/master/docs/env_vars.md>
for some useful environment variables.

- programs.sway.package: The sway package to use. If the package is not overridable with `extraSessionCommands`, `extraOptions`,
`withBaseWrapper`, `withGtkWrapper`, `enableXWayland` and `isNixOS`,
then the module options {option}`wrapperFeatures`, {option}`extraSessionCommands`,
{option}`extraOptions` and {option}`xwayland` will have no effect.

Set to `null` to not add any Sway package to your path.
This should be done if you want to use the Home Manager Sway module to install Sway.

- programs.sway.wrapperFeatures.base: Whether to enable the base wrapper to execute extra session commands and prepend a
dbus-run-session to the sway command.
- programs.sway.wrapperFeatures.gtk: Whether to enable the wrapGAppsHook wrapper to execute sway with required environment
variables for GTK applications.
- programs.sway.xwayland.enable: Whether to enable XWayland.
- programs.sysdig.enable: Whether to enable sysdig, a tracing tool.
- programs.system-config-printer.enable: Whether to enable system-config-printer, a Graphical user interface for CUPS administration.
- programs.systemtap.enable: Install {command}`systemtap` along with necessary kernel options.

- programs.tcpdump.enable: Whether to configure a setcap wrapper for tcpdump.
To use it, add your user to the `pcap` group.

- programs.television.enable: Whether to enable Blazingly fast general purpose fuzzy finder TUI.
- programs.television.enableBashIntegration: Whether to enable Bash integration.
- programs.television.enableFishIntegration: Whether to enable Fish integration.
- programs.television.enableZshIntegration: Whether to enable Zsh integration.
- programs.television.package: The television package to use.
- programs.thefuck
- programs.thunar.enable: Whether to enable Thunar, the Xfce file manager.
- programs.thunar.plugins: List of thunar plugins to install.
- programs.thunderbird.enable: Whether to enable Thunderbird mail client.
- programs.thunderbird.package: The thunderbird package to use.
- programs.thunderbird.policies: Group policies to install.

See [Thunderbird's documentation](https://github.com/thunderbird/policy-templates)
for a list of available options.

This can be used to install extensions declaratively! Check out the
documentation of the `ExtensionSettings` policy for details.


- programs.thunderbird.preferences: Preferences to set from `about:config`.

Some of these might be able to be configured more ergonomically
using policies.

- programs.thunderbird.preferencesStatus: The status of `thunderbird.preferences`.

`status` can assume the following values:
- `"default"`: Preferences appear as default.
- `"locked"`: Preferences appear as default and can't be changed.
- `"user"`: Preferences appear as changed.
- `"clear"`: Value has no effect. Resets to factory defaults on each startup.

- programs.tilp2
- programs.tmux.aggressiveResize: Resize the window to the size of the smallest session for which it is the current window.

- programs.tmux.baseIndex: Base index for windows and panes.
- programs.tmux.clock24: Use 24 hour clock.
- programs.tmux.customPaneNavigationAndResize: Override the hjkl and HJKL bindings for pane navigation and resizing in VI mode.
- programs.tmux.enable: Whenever to configure {command}`tmux` system-wide.
- programs.tmux.escapeTime: Time in milliseconds for which tmux waits after an escape is input.
- programs.tmux.extraConfig: Additional contents of /etc/tmux.conf, to be run after sourcing plugins.

- programs.tmux.extraConfigBeforePlugins: Additional contents of /etc/tmux.conf, to be run before sourcing plugins.

- programs.tmux.extraTmuxConf: Alias of {option}`programs.tmux.extraConfig`.
- programs.tmux.historyLimit: Maximum number of lines held in window history.
- programs.tmux.keyMode: VI or Emacs style shortcuts.
- programs.tmux.newSession: Automatically spawn a session if trying to attach and none are running.
- programs.tmux.package: The tmux package to use.
- programs.tmux.plugins: List of plugins to install.
- programs.tmux.resizeAmount: Number of lines/columns when resizing.
- programs.tmux.reverseSplit: Reverse the window split shortcuts.
- programs.tmux.secureSocket: Store tmux socket under /run, which is more secure than /tmp, but as a
downside it doesn't survive user logout.

- programs.tmux.shortcut: Ctrl following by this key is used as the main shortcut.
- programs.tmux.terminal: Set the $TERM variable. Use tmux-direct if italics or 24bit true color
support is needed.

- programs.tmux.withUtempter: Whether to enable libutempter for tmux.
This is required so that tmux can write to /var/run/utmp (which can be queried with `who` to display currently connected user sessions).
Note, this will add a guid wrapper for the group utmp!

- programs.traceroute.enable: Whether to configure a setcap wrapper for traceroute.

- programs.trippy.enable: Whether to enable trippy, a network diagnostic tool.
- programs.tsmClient.defaultServername: If multiple server stanzas are declared with
{option}`programs.tsmClient.servers`,
this option may be used to name a default
server stanza that IBM TSM uses in the absence of
a user-defined {file}`dsm.opt` file.
This option translates to a
`defaultserver` configuration line.

- programs.tsmClient.dsmSysText: This configuration key contains the effective text
of the client system-options file "dsm.sys".
It should not be changed, but may be
used to feed the configuration into other
TSM-depending packages used on the system.

- programs.tsmClient.enable: Whether to enable IBM Storage Protect (Tivoli Storage Manager, TSM)
client command line applications with a
client system-options file "dsm.sys"
.
- programs.tsmClient.package: The tsm-client package to use. It will be used with `.override`
to add paths to the client system-options file.

- programs.tsmClient.servers: Server definitions ("stanzas")
for the client system-options file.
The name of each entry will be used for
the internal `servername` by default.
Each attribute will be transformed into a line
with a key-value pair within the server's stanza.
Integers as values will be
canonically turned into strings.
The boolean value `true` will be turned
into a line with just the attribute's name.
The value `null` will not generate a line.
A list as values generates an entry for
each value, according to the rules above.

- programs.tsmClient.wrappedPackage: The tsm-client package to use. This option is to provide the effective derivation,
wrapped with the path to the
client system-options file "dsm.sys".
It should not be changed, but exists
for other modules that want to call TSM executables.

- programs.turbovnc.ensureHeadlessSoftwareOpenGL: Whether to set up NixOS such that TurboVNC's built-in software OpenGL
implementation works.

This will enable {option}`hardware.graphics.enable` so that OpenGL
programs can find Mesa's llvmpipe drivers.

Setting this option to `false` does not mean that software
OpenGL won't work; it may still work depending on your system
configuration.

This option is also intended to generate warnings if you are using some
configuration that's incompatible with using headless software OpenGL
in TurboVNC.

- programs.tuxclocker.enable: Whether to enable TuxClocker, a hardware control and monitoring program
.
- programs.tuxclocker.enableAMD: Alias of {option}`hardware.amdgpu.overdrive.enable`.
- programs.tuxclocker.enabledNVIDIADevices: Enable NVIDIA GPU controls for a device by index.
Sets the `Coolbits` Xorg option to enable all TuxClocker controls.

- programs.tuxclocker.useUnfree: Whether to use components requiring unfree dependencies.
Disabling this allows you to get everything from the binary cache.

- programs.udevil.enable: Whether to enable udevil, to mount filesystems without password.
- programs.unity3d.enable: Alias of {option}`security.chromiumSuidSandbox.enable`.
- programs.usbtop.enable: Whether to enable usbtop and required kernel module, to show estimated USB bandwidth.
- programs.uwsm.enable: Whether to enable uwsm, which wraps standalone Wayland compositors with a set
of Systemd units on the fly. This essentially
binds the wayland compositor into `graphical-session-pre.target`,
`graphical-session.target`, `xdg-desktop-autostart.target`.

This is useful for Wayland compositors like Hyprland, Sway, Wayfire,
etc. that do not start these targets and services on their own.

::: {.note}
You must configure `waylandCompositors` suboptions as well
so that UWSM knows which compositors to manage.

Additionally, this by default uses `dbus-broker` as the dbus
implementation for better compatibility. If you dislike this behavior
you can set `services.dbus.implementation = lib.mkForce "dbus"`
in your configuration.
:::

If you are having trouble starting a service that depends on
`graphical-session.target`, while using a WM, enabling this option
might help
.
- programs.uwsm.package: The uwsm package to use.
- programs.uwsm.waylandCompositors: Configuration for UWSM-managed Wayland Compositors. This
creates a desktop entry file which will be used by Display
Managers like GDM, to allow starting the UWSM managed session.

- programs.vim.defaultEditor: Whether to enable vim as the default editor.
- programs.vim.enable: Whether to enable Vi IMproved, an advanced text editor.
- programs.vim.package: The vim package to use.
- programs.virt-manager.enable: Whether to enable virt-manager, an UI for managing virtual machines in libvirt.
- programs.virt-manager.package: The virt-manager package to use.
- programs.vivid.enable: Whether to configure LS_COLORS with vivid.
- programs.vivid.package: The vivid package to use.
- programs.vivid.theme: Theme to be used (see `vivid themes`)
- programs.vscode.defaultEditor: When enabled, configures VSCode to be the default editor
using the EDITOR environment variable.

- programs.vscode.enable: Whether to enable VSCode editor.
- programs.vscode.extensions: List of extensions to install.
- programs.vscode.finalPackage: Resulting customized VSCode package.
- programs.vscode.package: The vscode package to use. The final package will be customized with extensions from {option}`programs.vscode.extensions`
- programs.wavemon.enable: Whether to add wavemon to the global environment and configure a
setcap wrapper for it.

- programs.way-cooler
- programs.waybar.enable: Whether to enable waybar, a highly customizable Wayland bar for Sway and Wlroots based compositors.
- programs.waybar.package: The waybar package to use.
- programs.waybar.systemd.target: The systemd target that will automatically start the Waybar service.

- programs.wayfire.enable: Whether to enable Wayfire, a wayland compositor based on wlroots.
- programs.wayfire.package: The wayfire package to use.
- programs.wayfire.plugins: Additional plugins to use with the wayfire window manager.

- programs.wayfire.xwayland.enable: Whether to enable XWayland.
- programs.wayland.miracle-wm.enable: Whether to enable miracle-wm, a tiling Mir based Wayland compositor. You can manually launch miracle-wm by
executing "exec miracle-wm" on a TTY, or launch it from a display manager.
Consult the USERGUIDE.md at <https://github.com/mattkae/miracle-wm> for information on
how to use & configure it
.
- programs.weylus.enable: Whether to enable weylus, which turns your smart phone into a graphic tablet/touch screen for your computer.
- programs.weylus.openFirewall: Open ports needed for the functionality of the program.

- programs.weylus.package: The weylus package to use.
- programs.weylus.users: To enable stylus and multi-touch support, the user you're going to use must be added to this list.
These users can synthesize input events system-wide, even when another user is logged in - untrusted users should not be added.

- programs.winbox.enable: Whether to enable MikroTik Winbox.
- programs.winbox.openFirewall: Whether to open ports for the MikroTik Neighbor Discovery protocol. Required for Winbox neighbor discovery.

- programs.winbox.package: The winbox package to use.
- programs.wireshark.dumpcap.enable: Whether to allow users in the 'wireshark' group to capture network traffic. This
configures a setcap wrapper for 'dumpcap' for users in the 'wireshark' group.

- programs.wireshark.enable: Whether to add Wireshark to the global environment and create a 'wireshark'
group. To configure what users can capture, set the `dumpcap.enable` and
`usbmon.enable` options. By default, users in the 'wireshark' group are
allowed to capture network traffic but not USB traffic.

- programs.wireshark.package: The wireshark-cli package to use.
- programs.wireshark.usbmon.enable: Whether to allow users in the 'wireshark' group to capture USB traffic. This adds
udev rules to give users in the 'wireshark' group read permissions to all devices
in the usbmon subsystem.

- programs.wshowkeys.enable: Whether to enable wshowkeys (displays keypresses on screen on supported Wayland
compositors). It requires root permissions to read input events, but
these permissions are dropped after startup.
- programs.wshowkeys.package: The wshowkeys package to use.
- programs.x2goserver: Alias of {option}`services.x2goserver`.
- programs.xastir.enable: Whether to enable Xastir Graphical APRS client.
- programs.xfconf.enable: Whether to enable Xfconf, the Xfce configuration storage system.
- programs.xfs_quota.projects: Setup of xfs_quota projects. Make sure the filesystem is mounted with the pquota option.
- programs.xonsh.bashCompletion.enable: Whether to enable bash completions for xonsh.
- programs.xonsh.bashCompletion.package: The bash-completion package to use.
- programs.xonsh.config: Extra text added to the end of `/etc/xonsh/xonshrc`,
the system-wide control file for xonsh.

- programs.xonsh.enable: Whether to configure xonsh as an interactive shell.

- programs.xonsh.extraPackages: Xontribs and extra Python packages to be available in xonsh.

- programs.xonsh.package: The xonsh package to use. The argument `extraPackages` of this package will be overridden by
the option `programs.xonsh.extraPackages`.

- programs.xss-lock.enable: Whether to enable xss-lock.
- programs.xss-lock.extraOptions: Additional command-line arguments to pass to
{command}`xss-lock`.

- programs.xss-lock.lockerCommand: Locker to be used with xsslock
- programs.xwayland.defaultFontPath: Default font path. Setting this option causes Xwayland to be rebuilt.

- programs.xwayland.enable: Whether to enable Xwayland (an X server for interfacing X11 apps with the Wayland protocol).
- programs.xwayland.package: The Xwayland package to use.
- programs.yabar
- programs.yazi.enable: Whether to enable yazi terminal file manager.
- programs.yazi.flavors: Pre-made themes.

See <https://yazi-rs.github.io/docs/flavors/overview/> for documentation.

- programs.yazi.initLua: The init.lua for Yazi itself.

- programs.yazi.package: The yazi package to use.
- programs.yazi.plugins: Lua plugins.

See <https://yazi-rs.github.io/docs/plugins/overview/> for documentation.

- programs.yazi.settings: Configuration included in `$YAZI_CONFIG_HOME`.

- programs.ydotool.enable: Whether to enable ydotoold system service and {command}`ydotool` for members of
{option}`programs.ydotool.group`.
.
- programs.ydotool.group: Group which users must be in to use {command}`ydotool`.

- programs.yubikey-manager.enable: Whether to enable yubikey-manager.
- programs.yubikey-manager.package: The yubikey-manager package to use.
- programs.yubikey-touch-detector.enable: Whether to enable yubikey-touch-detector.
- programs.yubikey-touch-detector.libnotify: If set to true, yubikey-touch-detctor will send notifications using libnotify

- programs.yubikey-touch-detector.unixSocket: If set to true, yubikey-touch-detector will send notifications to a unix socket

- programs.yubikey-touch-detector.verbose: Enables verbose logging

- programs.zmap.enable: Whether to enable ZMap, a network scanner designed for Internet-wide network surveys.
- programs.zoom-us.enable: Whether to enable zoom.us video conferencing application.
- programs.zoom-us.package: The zoom-us package to use.
- programs.zoxide.enable: Whether to enable zoxide, a smarter cd command that learns your habits.
- programs.zoxide.enableBashIntegration: Whether to enable Bash integration.
- programs.zoxide.enableFishIntegration: Whether to enable Fish integration.
- programs.zoxide.enableXonshIntegration: Whether to enable Xonsh integration.
- programs.zoxide.enableZshIntegration: Whether to enable Zsh integration.
- programs.zoxide.flags: List of flags for zoxide init

- programs.zoxide.package: The zoxide package to use.
- programs.zsh.autosuggestions.async: Whether to fetch suggestions asynchronously
- programs.zsh.autosuggestions.enable: Whether to enable zsh-autosuggestions.
- programs.zsh.autosuggestions.extraConfig: Attribute set with additional configuration values
- programs.zsh.autosuggestions.highlightStyle: Highlight style for suggestions ({fore,back}ground color)
- programs.zsh.autosuggestions.strategy: `ZSH_AUTOSUGGEST_STRATEGY` is an array that specifies how suggestions should be generated.
The strategies in the array are tried successively until a suggestion is found.
There are currently three built-in strategies to choose from:

- `history`: Chooses the most recent match from history.
- `completion`: Chooses a suggestion based on what tab-completion would suggest. (requires `zpty` module)
- `match_prev_cmd`: Like `history`, but chooses the most recent match whose preceding history item matches
    the most recently executed command. Note that this strategy won't work as expected with ZSH options that
    don't preserve the history order such as `HIST_IGNORE_ALL_DUPS` or `HIST_EXPIRE_DUPS_FIRST`.

- programs.zsh.enable: Whether to configure zsh as an interactive shell. To enable zsh for
a particular user, use the {option}`users.users.<name?>.shell`
option for that user. To enable zsh system-wide use the
{option}`users.defaultUserShell` option.

- programs.zsh.enableAutosuggestions: Alias of {option}`programs.zsh.autosuggestions.enable`.
- programs.zsh.enableBashCompletion: Enable compatibility with bash's programmable completion system.

- programs.zsh.enableCompletion: Enable zsh completion for all interactive zsh shells.

- programs.zsh.enableGlobalCompInit: Enable execution of compinit call for all interactive zsh shells.

This option can be disabled if the user wants to extend its
`fpath` and a custom `compinit`
call in the local config is required.

- programs.zsh.enableLsColors: Enable extra colors in directory listings (used by `ls` and `tree`).

- programs.zsh.enableSyntaxHighlighting: Alias of {option}`programs.zsh.syntaxHighlighting.enable`.
- programs.zsh.histFile: Change history file.

- programs.zsh.histSize: Change history size.

- programs.zsh.interactiveShellInit: Shell script code called during interactive zsh shell initialisation.

- programs.zsh.loginShellInit: Shell script code called during zsh login shell initialisation.

- programs.zsh.oh-my-zsh.custom: Alias of {option}`programs.zsh.ohMyZsh.custom`.
- programs.zsh.oh-my-zsh.enable: Alias of {option}`programs.zsh.ohMyZsh.enable`.
- programs.zsh.oh-my-zsh.plugins: Alias of {option}`programs.zsh.ohMyZsh.plugins`.
- programs.zsh.oh-my-zsh.theme: Alias of {option}`programs.zsh.ohMyZsh.theme`.
- programs.zsh.ohMyZsh.cacheDir: Cache directory to be used by `oh-my-zsh`.
Without this option it would default to the read-only nix store.

- programs.zsh.ohMyZsh.custom: Path to a custom oh-my-zsh package to override config of oh-my-zsh.
(Can't be used along with `customPkgs`).

- programs.zsh.ohMyZsh.customPkgs: List of custom packages that should be loaded into `oh-my-zsh`.

- programs.zsh.ohMyZsh.enable: Enable oh-my-zsh.

- programs.zsh.ohMyZsh.package: The oh-my-zsh package to use.
- programs.zsh.ohMyZsh.plugins: List of oh-my-zsh plugins

- programs.zsh.ohMyZsh.preLoaded: Shell commands executed before the `oh-my-zsh` is loaded.
For example, to disable async git prompt write `zstyle ':omz:alpha:lib:git' async-prompt no` (more information <https://github.com/ohmyzsh/ohmyzsh?tab=readme-ov-file#async-git-prompt>)

- programs.zsh.ohMyZsh.theme: Name of the theme to be used by oh-my-zsh.

- programs.zsh.promptInit: Shell script code used to initialise the zsh prompt.

- programs.zsh.setOptions: Configure zsh options. See
{manpage}`zshoptions(1)`.

- programs.zsh.shellAliases: Set of aliases for zsh shell, which overrides {option}`environment.shellAliases`.
See {option}`environment.shellAliases` for an option format description.

- programs.zsh.shellInit: Shell script code called during zsh shell initialisation.

- programs.zsh.syntax-highlighting.enable: Alias of {option}`programs.zsh.syntaxHighlighting.enable`.
- programs.zsh.syntax-highlighting.highlighters: Alias of {option}`programs.zsh.syntaxHighlighting.highlighters`.
- programs.zsh.syntax-highlighting.patterns: Alias of {option}`programs.zsh.syntaxHighlighting.patterns`.
- programs.zsh.syntaxHighlighting.enable: Whether to enable zsh-syntax-highlighting.
- programs.zsh.syntaxHighlighting.highlighters: Specifies the highlighters to be used by zsh-syntax-highlighting.

The following defined options can be found here:
https://github.com/zsh-users/zsh-syntax-highlighting/blob/master/docs/highlighters.md

- programs.zsh.syntaxHighlighting.patterns: Specifies custom patterns to be highlighted by zsh-syntax-highlighting.

Please refer to the docs for more information about the usage:
https://github.com/zsh-users/zsh-syntax-highlighting/blob/master/docs/highlighters/pattern.md

- programs.zsh.syntaxHighlighting.styles: Specifies custom styles to be highlighted by zsh-syntax-highlighting.

Please refer to the docs for more information about the usage:
https://github.com/zsh-users/zsh-syntax-highlighting/blob/master/docs/highlighters/main.md

- programs.zsh.vteIntegration: Whether to enable Zsh integration for VTE terminals.
This allows it to preserve the current directory of the shell
across terminals.

- programs.zsh.zsh-autoenv.enable: Whether to enable zsh-autoenv.
- programs.zsh.zsh-autoenv.package: The zsh-autoenv package to use.
- qt.enable: Whether to enable Qt configuration, including theming.

Enabling this option is necessary for Qt plugins to work in the
installed profiles (e.g.: `nix-env -i` or `environment.systemPackages`).

- qt.platformTheme: Selects the platform theme to use for Qt applications.

The options are
- `gnome`: Use GNOME theme with [qgnomeplatform](https://github.com/FedoraQt/QGnomePlatform)
- `gtk2`: Use GTK theme with [qtstyleplugins](https://github.com/qt/qtstyleplugins)
- `kde`: Use Qt settings from Plasma.
- `lxqt`: Use LXQt style set using the [lxqt-config-appearance](https://github.com/lxqt/lxqt-config)
   application.
- `qt5ct`: Use Qt style set using the [qt5ct](https://sourceforge.net/projects/qt5ct/)
   and [qt6ct](https://github.com/trialuser02/qt6ct) applications.

- qt.style: Selects the style to use for Qt applications.

The options are
- `adwaita`, `adwaita-dark`, `adwaita-highcontrast`, `adawaita-highcontrastinverse`:
  Use Adwaita Qt style with
  [adwaita](https://github.com/FedoraQt/adwaita-qt)
- `breeze`: Use the Breeze style from
  [breeze](https://github.com/KDE/breeze)
- `bb10bright`, `bb10dark`, `cleanlooks`, `gtk2`, `motif`, `plastique`:
  Use styles from
  [qtstyleplugins](https://github.com/qt/qtstyleplugins)
- `kvantum`: Use styles from
  [kvantum](https://github.com/tsujan/Kvantum)

- qt5.enable: Alias of {option}`qt.enable`.
- qt5.platformTheme: Alias of {option}`qt.platformTheme`.
- qt5.style: Alias of {option}`qt.style`.
- roles.homelab.enable: Whether to enable Enable homelab role (self-hosting services)..
- roles.media.enable: Whether to enable Enable media role (media servers and discovery)..
- roles.monitoring.enable: Whether to enable Enable lightweight monitoring role..
- roles.workstation.enable: Whether to enable Enable workstation role (desktop-first defaults)..
- security.acme.acceptTerms: Accept the CA's terms of service. The default provider is Let's Encrypt,
you can find their ToS at <https://letsencrypt.org/repository/>.

- security.acme.activationDelay
- security.acme.certs: Attribute set of certificates to get signed and renewed. Creates
`acme-${cert}.{service,timer}` systemd units for
each certificate defined here. Other services can add dependencies
to those units if they rely on the certificates being present,
or trigger restarts of the service if certificates get renewed.

- security.acme.defaults: Default values inheritable by all configured certs. You can
use this to define options shared by all your certs. These defaults
can also be ignored on a per-cert basis using the
{option}`security.acme.certs.${cert}.inheritDefaults` option.

- security.acme.directory
- security.acme.email
- security.acme.enableDebugLogs
- security.acme.maxConcurrentRenewals: Maximum number of concurrent certificate generation or renewal jobs. All other
jobs will queue and wait running jobs to finish. Reduces the system load of
certificate generation.

Set to `0` to allow unlimited number of concurrent job runs."

- security.acme.preDelay
- security.acme.preliminarySelfsigned
- security.acme.production
- security.acme.renewInterval
- security.acme.server
- security.acme.useRoot: Whether to use the root user when generating certs. This is not recommended
for security + compatibility reasons. If a service requires root owned certificates
consider following the guide on "Using ACME with services demanding root
owned certificates" in the NixOS manual, and only using this as a fallback
or for testing.

- security.acme.validMin
- security.acme.validMinDays
- security.agnos.enable: Whether to enable agnos.
- security.agnos.generateKeys.enable: Enable automatic generation of account keys.

When this is `true`, a key will be generated for each account where
the file referred to by the `private_key` path does not exist yet.

Currently, only RSA keys can be generated.

- security.agnos.generateKeys.keySize: Key size in bits to use when generating new keys.

- security.agnos.group: Group to run Agnos as. The acquired certificates will be owned by this group.

- security.agnos.persistent: When `true`, use a persistent systemd timer.

- security.agnos.server: ACME Directory Resource URI. Defaults to Let's Encrypt's production endpoint,
`https://acme-v02.api.letsencrypt.org/directory`, if unset.

- security.agnos.serverCa: The root certificate (in PEM format) of the ACME server's HTTPS interface.

- security.agnos.settings: Settings
- security.agnos.startAt: How often or when to run agnos.

The format is described in
{manpage}`systemd.time(7)`.

- security.agnos.temporarilyOpenFirewall: When `true`, will open the port specified in `settings.dns_listen_addr`
before running the agnos service, and close it when agnos finishes running.

- security.agnos.user: User to run Agnos as. The acquired certificates will be owned by this user.

- security.allowSimultaneousMultithreading: Whether to allow SMT/hyperthreading.  Disabling SMT means that only
physical CPU cores will be usable at runtime, potentially at
significant performance cost.

The primary motivation for disabling SMT is to mitigate the risk of
leaking data between threads running on the same CPU core (due to
e.g., shared caches).  This attack vector is unproven.

Disabling SMT is a supplement to the L1 data cache flushing mitigation
(see [](#opt-security.virtualisation.flushL1DataCache))
versus malicious VM guests (SMT could "bring back" previously flushed
data).

- security.allowUserNamespaces: Whether to allow creation of user namespaces.

The motivation for disabling user namespaces is the potential
presence of code paths where the kernel's permission checking
logic fails to account for namespacing, instead permitting a
namespaced process to act outside the namespace with the same
privileges as it would have inside it.  This is particularly
damaging in the common case of running as root within the namespace.

When user namespace creation is disallowed, attempting to create a
user namespace fails with "no space left on device" (ENOSPC).
root may re-enable user namespace creation at runtime.

- security.apparmor.confineSUIDApplications
- security.apparmor.enable: Whether to enable the AppArmor Mandatory Access Control system.

If you're enabling this module on a running system,
note that a reboot will be required to activate AppArmor in the kernel.

Also, beware that enabling this module privileges stability over security
by not trying to kill unconfined but newly confinable running processes by default,
though it would be needed because AppArmor can only confine new
or already confined processes of an executable.
This killing would for instance be necessary when upgrading to a NixOS revision
introducing for the first time an AppArmor profile for the executable
of a running process.

Enable [](#opt-security.apparmor.killUnconfinedConfinables)
if you want this service to do such killing
by sending a `SIGTERM` to those running processes.
- security.apparmor.enableCache: Whether to enable caching of AppArmor policies
in `/var/cache/apparmor/`.

Beware that AppArmor policies almost always contain Nix store paths,
and thus produce at each change of these paths
a new cached version accumulating in the cache.
- security.apparmor.includes: List of paths to be added to AppArmor's searched paths
when resolving `include` directives.

- security.apparmor.killUnconfinedConfinables: Whether to enable killing of processes which have an AppArmor profile enabled
(in [](#opt-security.apparmor.policies))
but are not confined (because AppArmor can only confine new processes).

This is only sending a gracious `SIGTERM` signal to the processes,
not a `SIGKILL`.

Beware that due to a current limitation of AppArmor,
only profiles with exact paths (and no name) can enable such kills.
- security.apparmor.packages: List of packages to be added to AppArmor's include path
- security.apparmor.policies: AppArmor policies.

- security.apparmor.profiles
- security.audit.backlogLimit: The maximum number of outstanding audit buffers allowed; exceeding this is
considered a failure and handled in a manner specified by failureMode.

- security.audit.enable: Whether to enable the Linux audit system. The special `lock` value can be used to
enable auditing and prevent disabling it until a restart. Be careful about locking
this, as it will prevent you from changing your audit configuration until you
restart. If possible, test your configuration using build-vm beforehand.

- security.audit.failureMode: How to handle critical errors in the auditing system
- security.audit.rateLimit: The maximum messages per second permitted before triggering a failure as
specified by failureMode. Setting it to zero disables the limit.

- security.audit.rules: The ordered audit rules, with each string appearing as one line of the audit.rules file.

- security.auditd.enable: Whether to enable the Linux Audit daemon.
- security.auditd.plugins: Plugin definitions to register with auditd
- security.auditd.settings: auditd configuration file contents. See {auditd.conf} for supported values.
- security.chromiumSuidSandbox.enable: Whether to install the Chromium SUID sandbox which is an executable that
Chromium may use in order to achieve sandboxing.

If you get the error "The SUID sandbox helper binary was found, but is not
configured correctly.", turning this on might help.

Also, if the URL chrome://sandbox tells you that "You are not adequately
sandboxed!", turning this on might resolve the issue.

- security.dhparams.defaultBitSize: This allows to override the default bit size for all of the
Diffie-Hellman parameters set in
{option}`security.dhparams.params`.

- security.dhparams.enable: Whether to generate new DH params and clean up old DH params.

- security.dhparams.params: Diffie-Hellman parameters to generate.

The value is the size (in bits) of the DH params to generate. The
generated DH params path can be found in
`config.security.dhparams.params.«name».path`.

::: {.note}
The name of the DH params is taken as being the name of
the service it serves and the params will be generated before the
said service is started.
:::

::: {.warning}
If you are removing all dhparams from this list, you
have to leave {option}`security.dhparams.enable` for at
least one activation in order to have them be cleaned up. This also
means if you rollback to a version without any dhparams the
existing ones won't be cleaned up. Of course this only applies if
{option}`security.dhparams.stateful` is
`true`.
:::

::: {.note}
**For module implementers:** It's recommended
to not set a specific bit size here, so that users can easily
override this by setting
{option}`security.dhparams.defaultBitSize`.
:::

- security.dhparams.path: Path to the directory in which Diffie-Hellman parameters will be
stored. This only is relevant if
{option}`security.dhparams.stateful` is
`true`.

- security.dhparams.stateful: Whether generation of Diffie-Hellman parameters should be stateful or
not. If this is enabled, PEM-encoded files for Diffie-Hellman
parameters are placed in the directory specified by
{option}`security.dhparams.path`. Otherwise the files are
created within the Nix store.

::: {.note}
If this is `false` the resulting store
path will be non-deterministic and will be rebuilt every time the
`openssl` package changes.
:::

- security.doas.enable: Whether to enable the {command}`doas` command, which allows
non-root users to execute commands as root.

- security.doas.extraConfig: Extra configuration text appended to {file}`doas.conf`. Be aware that
this option cannot be used to override the behaviour allowing
passwordless operation for root.

- security.doas.extraRules: Define specific rules to be set in the
{file}`/etc/doas.conf` file. More specific rules should
come after more general ones in order to yield the expected behavior.
You can use `mkBefore` and/or `mkAfter` to ensure
this is the case when configuration options are merged. Be aware that
this option cannot be used to override the behaviour allowing
passwordless operation for root.

- security.doas.wheelNeedsPassword: Whether users of the `wheel` group must provide a password to
run commands as super user via {command}`doas`.

- security.duosec.acceptEnvFactor: Look for factor selection or passcode in the
`$DUO_PASSCODE` environment variable before
prompting the user for input.

When $DUO_PASSCODE is non-empty, it will override
autopush. The SSH client will need SendEnv DUO_PASSCODE in
its configuration, and the SSH server will similarly need
AcceptEnv DUO_PASSCODE.

- security.duosec.allowTcpForwarding: By default, when SSH forwarding, enabling Duo Security will
disable TCP forwarding. By enabling this, you potentially
undermine some of the SSH based login security. Note this is
not needed if you use PAM.

- security.duosec.autopush: If `true`, Duo Unix will automatically send
a push login request to the user’s phone, falling back on a
phone call if push is unavailable. If
`false`, the user will be prompted to
choose an authentication method. When configured with
`autopush = yes`, we recommend setting
`prompts = 1`.

- security.duosec.failmode: On service or configuration errors that prevent Duo
authentication, fail "safe" (allow access) or "secure" (deny
access). The default is "safe".

- security.duosec.fallbackLocalIP: Duo Unix reports the IP address of the authorizing user, for
the purposes of authorization and whitelisting. If Duo Unix
cannot detect the IP address of the client, setting
`fallbackLocalIP = yes` will cause Duo Unix
to send the IP address of the server it is running on.

If you are using IP whitelisting, enabling this option could
cause unauthorized logins if the local IP is listed in the
whitelist.

- security.duosec.group: Alias of {option}`security.duosec.groups`.
- security.duosec.groups: If specified, Duo authentication is required only for users
whose primary group or supplementary group list matches one
of the space-separated pattern lists. Refer to
<https://duo.com/docs/duounix> for details.

- security.duosec.host: Duo API hostname.
- security.duosec.ikey: Alias of {option}`security.duosec.integrationKey`.
- security.duosec.integrationKey: Integration key.
- security.duosec.motd: Print the contents of `/etc/motd` to screen
after a successful login.

- security.duosec.pam.enable: If enabled, protect logins with Duo Security using PAM support.
- security.duosec.prompts: If a user fails to authenticate with a second factor, Duo
Unix will prompt the user to authenticate again. This option
sets the maximum number of prompts that Duo Unix will
display before denying access. Must be 1, 2, or 3. Default
is 3.

For example, when `prompts = 1`, the user
will have to successfully authenticate on the first prompt,
whereas if `prompts = 2`, if the user
enters incorrect information at the initial prompt, he/she
will be prompted to authenticate again.

When configured with `autopush = true`, we
recommend setting `prompts = 1`.

- security.duosec.pushinfo: Include information such as the command to be executed in
the Duo Push message.

- security.duosec.secretKeyFile: A file containing your secret key. The security of your Duo application is tied to the security of your secret key.

- security.duosec.skey
- security.duosec.ssh.enable: If enabled, protect SSH logins with Duo Security.
- security.enableWrappers: Whether to enable SUID/SGID wrappers.
- security.forcePageTableIsolation: Whether to force-enable the Page Table Isolation (PTI) Linux kernel
feature even on CPU models that claim to be safe from Meltdown.

This hardening feature is most beneficial to systems that run untrusted
workloads that rely on address space isolation for security.

- security.googleOsLogin.enable: Whether to enable Google OS Login.

The OS Login package enables the following components:
AuthorizedKeysCommand to query valid SSH keys from the user's OS Login
profile during ssh authentication phase.
NSS Module to provide user and group information
PAM Module for the sshd service, providing authorization and
authentication support, allowing the system to use data stored in
Google Cloud IAM permissions to control both, the ability to log into
an instance, and to perform operations as root (sudo).

- security.hideProcessInformation
- security.initialRootPassword: Alias of {option}`users.users.root.initialHashedPassword`.
- security.ipa.basedn: Base DN to use when performing LDAP operations.
- security.ipa.cacheCredentials: Whether to cache credentials.
- security.ipa.certificate: IPA server CA certificate.

Use `nix-prefetch-url http://$server/ipa/config/ca.crt` to
obtain the file and the hash.

- security.ipa.chromiumSupport: Whether to whitelist the FreeIPA domain in Chromium.
- security.ipa.domain: Domain of the IPA server.
- security.ipa.dyndns.enable: Whether to enable FreeIPA automatic hostname updates.
- security.ipa.dyndns.interface: Network interface to perform hostname updates through.
- security.ipa.enable: Whether to enable FreeIPA domain integration.
- security.ipa.ifpAllowedUids: A list of users allowed to access the ifp dbus interface.
- security.ipa.ipaHostname: Fully-qualified hostname used to identify this host in the IPA domain.
- security.ipa.offlinePasswords: Whether to store offline passwords when the server is down.
- security.ipa.realm: Kerberos realm.
- security.ipa.server: IPA Server hostname.
- security.isolate.boxRoot: All sandboxes are created under this directory.
To avoid symlink attacks, this directory and all its ancestors
must be writeable only by root.

- security.isolate.cgRoot: Control group which subgroups are placed under.
Either an explicit path to a subdirectory in cgroupfs, or "auto:file" to read
the path from "file", where it is put by `isolate-cg-helper`.

- security.isolate.enable: Whether to enable Sandbox for securely executing untrusted programs
.
- security.isolate.extraConfig: Extra configuration to append to the configuration file.

- security.isolate.firstGid: Start of block of GIDs reserved for sandboxes.

- security.isolate.firstUid: Start of block of UIDs reserved for sandboxes.

- security.isolate.lockRoot: Directory where lock files are created.

- security.isolate.numBoxes: Number of UIDs and GIDs to reserve, starting from
{option}`firstUid` and {option}`firstGid`.

- security.isolate.package: The isolate-unwrapped package to use.
- security.isolate.restrictedInit: If true, only root can create sandboxes.

- security.klogd.enable
- security.krb5.enable: Enable and configure Kerberos utilities
- security.krb5.package: The krb5 package to use.
- security.krb5.settings: Structured contents of the {file}`krb5.conf` file. See
{manpage}`krb5.conf(5)` for details about configuration.

- security.lockKernelModules: Disable kernel module loading once the system is fully initialised.
Module loading is disabled until the next reboot. Problems caused
by delayed module loading can be fixed by adding the module(s) in
question to {option}`boot.kernelModules`.

- security.loginDefs.chfnRestrict: Use chfn SUID to allow non-root users to change their account GECOS information.

- security.loginDefs.package: The shadow package to use.
- security.loginDefs.settings: Config options for the /etc/login.defs file, that defines
the site-specific configuration for the shadow password suite.
See {manpage}`login.defs(5)` man page for available options.

- security.lsm: A list of the LSMs to initialize in order.

- security.pam.dp9ik.authserver: This controls the hostname for the 9front authentication server
that users will be authenticated against.

- security.pam.dp9ik.control: This option sets the pam "control" used for this module.

- security.pam.dp9ik.enable: Whether to enable the dp9ik pam module provided by tlsclient.

If set, users can be authenticated against the 9front
authentication server given in {option}`security.pam.dp9ik.authserver`
.
- security.pam.enableEcryptfs: Whether to enable eCryptfs PAM module (mounting ecryptfs home directory on login).
- security.pam.enableFscrypt: Whether to enable fscrypt, to automatically unlock directories with the user's login password.

This also enables a service at security.pam.services.fscrypt which is used by
fscrypt to verify the user's password when setting up a new protector. If you
use something other than pam_unix to verify user passwords, please remember to
adjust this PAM service
.
- security.pam.enableOTPW: Whether to enable the OTPW (one-time password) PAM module.
- security.pam.enableSSHAgentAuth: Alias of {option}`security.pam.sshAgentAuth.enable`.
- security.pam.enableU2F: Alias of {option}`security.pam.u2f.enable`.
- security.pam.krb5.enable: Enables Kerberos PAM modules (`pam-krb5`,
`pam-ccreds`).

If set, users can authenticate with their Kerberos password.
This requires a valid Kerberos configuration
(`security.krb5.enable` should be set to `true`).

Note that the Kerberos PAM modules are not necessary when using SSS
to handle Kerberos authentication.

- security.pam.loginLimits: Define resource limits that should apply to users or groups.
Each item in the list should be an attribute set with a
{var}`domain`, {var}`type`,
{var}`item`, and {var}`value`
attribute.  The syntax and semantics of these attributes
must be that described in {manpage}`limits.conf(5)`.

Note that these limits do not apply to systemd services,
whose limits can be changed via {option}`systemd.settings.Manager`
instead.

- security.pam.makeHomeDir.skelDirectory: Path to skeleton directory whose contents are copied to home
directories newly created by `pam_mkhomedir`.

- security.pam.makeHomeDir.umask: The user file mode creation mask to use on home directories
newly created by `pam_mkhomedir`.

- security.pam.mount.additionalSearchPaths: Additional programs to include in the search path of pam_mount.
Useful for example if you want to use some FUSE filesystems like bindfs.

- security.pam.mount.createMountPoints: Create mountpoints for volumes if they do not exist.

- security.pam.mount.cryptMountOptions: Global mount options that apply to every crypt volume.
You can define volume-specific options in the volume definitions.

- security.pam.mount.debugLevel: Sets the Debug-Level. 0 disables debugging, 1 enables pam_mount tracing,
and 2 additionally enables tracing in mount.crypt. The default is 0.
For more information, visit <https://pam-mount.sourceforge.net/pam_mount.conf.5.html>.

- security.pam.mount.enable: Enable PAM mount system to mount filesystems on user login.

- security.pam.mount.extraVolumes: List of volume definitions for pam_mount.
For more information, visit <https://pam-mount.sourceforge.net/pam_mount.conf.5.html>.

- security.pam.mount.fuseMountOptions: Global mount options that apply to every FUSE volume.
You can define volume-specific options in the volume definitions.

- security.pam.mount.logoutHup: Kill remaining processes after logout by sending a SIGHUP.

- security.pam.mount.logoutKill: Kill remaining processes after logout by sending a SIGKILL.

- security.pam.mount.logoutTerm: Kill remaining processes after logout by sending a SIGTERM.

- security.pam.mount.logoutWait: Amount of microseconds to wait until killing remaining processes after
final logout.
For more information, visit <https://pam-mount.sourceforge.net/pam_mount.conf.5.html>.

- security.pam.mount.removeCreatedMountPoints: Remove mountpoints created by pam_mount after logout. This
only affects mountpoints that have been created by pam_mount
in the same session.

- security.pam.oath.digits: Specify the lib.length of the one-time password in number of
digits.

- security.pam.oath.enable: Enable the OATH (one-time password) PAM module.

- security.pam.oath.usersFile: Set the path to file where the user's credentials are
stored. This file must not be world readable!

- security.pam.oath.window: Specify the number of one-time passwords to check in order
to accommodate for situations where the system and the
client are slightly out of sync (iteration for HOTP or time
steps for TOTP).

- security.pam.p11.control: This option sets pam "control".
If you want to have multi factor authentication, use "required".
If you want to use the PKCS#11 device instead of the regular password,
use "sufficient".

Read
{manpage}`pam.conf(5)`
for better understanding of this option.

- security.pam.p11.enable: Enables P11 PAM (`pam_p11`) module.

If set, users can log in with SSH keys and PKCS#11 tokens.

More information can be found [here](https://github.com/OpenSC/pam_p11).

- security.pam.package: The pam package to use.
- security.pam.rssh.enable: Whether to enable authenticating using a signature performed by the ssh-agent.
- security.pam.rssh.settings: Options to pass to the pam_rssh module. Refer to
<https://github.com/z4yx/pam_rssh/blob/main/README.md#optional-arguments>
for supported values.

Boolean values render just the key if true, and nothing if false.
Null values are ignored.
All other values are rendered as key-value pairs.


- security.pam.services: This option defines the PAM services.  A service typically
corresponds to a program that uses PAM,
e.g. {command}`login` or {command}`passwd`.
Each attribute of this set defines a PAM service, with the attribute name
defining the name of the service.

- security.pam.sshAgentAuth.authorizedKeysFiles: A list of paths to files in OpenSSH's `authorized_keys` format, containing
the keys that will be trusted by the `pam_ssh_agent_auth` module.

The following patterns are expanded when interpreting the path:
- `%f` and `%H` respectively expand to the fully-qualified and short hostname ;
- `%u` expands to the username ;
- `~` or `%h` expands to the user's home directory.

::: {.note}
Specifying user-writeable files here result in an insecure configuration:  a malicious process
can then edit such an authorized_keys file and bypass the ssh-agent-based authentication.

See [issue #31611](https://github.com/NixOS/nixpkgs/issues/31611)
:::

- security.pam.sshAgentAuth.enable: Whether to enable authenticating using a signature performed by the ssh-agent.
This allows using SSH keys exclusively, instead of passwords, for instance on remote machines
.
- security.pam.u2f.appId: Alias of {option}`security.pam.u2f.settings.appid`.
- security.pam.u2f.authFile: Alias of {option}`security.pam.u2f.settings.authfile`.
- security.pam.u2f.control: This option sets pam "control".
If you want to have multi factor authentication, use "required".
If you want to use U2F device instead of regular password, use "sufficient".

Read
{manpage}`pam.conf(5)`
for better understanding of this option.

- security.pam.u2f.cue: Alias of {option}`security.pam.u2f.settings.cue`.
- security.pam.u2f.debug: Alias of {option}`security.pam.u2f.settings.debug`.
- security.pam.u2f.enable: Enables U2F PAM (`pam-u2f`) module.

If set, users listed in
{file}`$XDG_CONFIG_HOME/Yubico/u2f_keys` (or
{file}`$HOME/.config/Yubico/u2f_keys` if XDG variable is
not set) are able to log in with the associated U2F key. The path can
be changed using {option}`security.pam.u2f.authFile` option.

File format is:
```
<username1>:<KeyHandle1>,<UserKey1>,<CoseType1>,<Options1>:<KeyHandle2>,<UserKey2>,<CoseType2>,<Options2>:...
<username2>:<KeyHandle1>,<UserKey1>,<CoseType1>,<Options1>:<KeyHandle2>,<UserKey2>,<CoseType2>,<Options2>:...
```
This file can be generated using {command}`pamu2fcfg` command.

More information can be found [here](https://developers.yubico.com/pam-u2f/).

- security.pam.u2f.interactive: Alias of {option}`security.pam.u2f.settings.interactive`.
- security.pam.u2f.origin: Alias of {option}`security.pam.u2f.settings.origin`.
- security.pam.u2f.settings: Options to pass to the PAM module.

Boolean values render just the key if true, and nothing if false.
Null values are ignored.
All other values are rendered as key-value pairs.


- security.pam.ussh.authorizedPrincipals: Comma-separated list of authorized principals to permit; if the user
presents a certificate with one of these principals, then they will be
authorized.

Note that `pam-ussh` also requires that the certificate
contain a principal matching the user's username. The principals from
this list are in addition to those principals.

Mutually exclusive with `authorizedPrincipalsFile`.

- security.pam.ussh.authorizedPrincipalsFile: Path to a list of principals; if the user presents a certificate with
one of these principals, then they will be authorized.

Note that `pam-ussh` also requires that the certificate
contain a principal matching the user's username. The principals from
this file are in addition to those principals.

Mutually exclusive with `authorizedPrincipals`.

- security.pam.ussh.caFile: By default `pam-ussh` reads the trusted user CA keys
from {file}`/etc/ssh/trusted_user_ca`.

This should be set the same as your `TrustedUserCAKeys`
option for sshd.

- security.pam.ussh.control: This option sets pam "control".
If you want to have multi factor authentication, use "required".
If you want to use the SSH certificate instead of the regular password,
use "sufficient".

Read
{manpage}`pam.conf(5)`
for better understanding of this option.

- security.pam.ussh.enable: Enables Uber's USSH PAM (`pam-ussh`) module.

This is similar to `pam-ssh-agent`, except that
the presence of a CA-signed SSH key with a valid principal is checked
instead.

Note that this module must both be enabled using this option and on a
per-PAM-service level as well (using `usshAuth`).

More information can be found [here](https://github.com/uber/pam-ussh).

- security.pam.ussh.group: If set, then the authenticating user must be a member of this group
to use this module.

- security.pam.yubico.challengeResponsePath: If not null, set the path used by yubico pam module where the challenge expected response is stored.

More information can be found [here](https://developers.yubico.com/yubico-pam/Authentication_Using_Challenge-Response.html).

- security.pam.yubico.control: This option sets pam "control".
If you want to have multi factor authentication, use "required".
If you want to use Yubikey instead of regular password, use "sufficient".

Read
{manpage}`pam.conf(5)`
for better understanding of this option.

- security.pam.yubico.debug: Debug output to stderr.

- security.pam.yubico.enable: Enables Yubico PAM (`yubico-pam`) module.

If set, users listed in
{file}`~/.yubico/authorized_yubikeys`
are able to log in with the associated Yubikey tokens.

The file must have only one line:
`username:yubikey_token_id1:yubikey_token_id2`
More information can be found [here](https://developers.yubico.com/yubico-pam/).

- security.pam.yubico.id: client id
- security.pam.yubico.mode: Mode of operation.

Use "client" for online validation with a YubiKey validation service such as
the YubiCloud.

Use "challenge-response" for offline validation using YubiKeys with HMAC-SHA-1
Challenge-Response configurations. See the man-page {manpage}`ykpamcfg(1)` for further
details on how to configure offline Challenge-Response validation.

More information can be found [here](https://developers.yubico.com/yubico-pam/Authentication_Using_Challenge-Response.html).

- security.pam.zfs.enable: Enable unlocking and mounting of encrypted ZFS home dataset at login.

- security.pam.zfs.homes: Prefix of home datasets. This value will be concatenated with
`"/" + <username>` in order to determine the home dataset to unlock.

- security.pam.zfs.noUnmount: Do not unmount home dataset on logout.

- security.pki.caBundle: (Read-only) the path to the final bundle of certificate authorities as a single file.

- security.pki.caCertificateBlacklist: A list of blacklisted CA certificate names that won't be imported from
the Mozilla Trust Store into
{file}`/etc/ssl/certs/ca-certificates.crt`. Use the
names from that file.

- security.pki.certificateFiles: A list of files containing trusted root certificates in PEM
format. These are concatenated to form
{file}`/etc/ssl/certs/ca-certificates.crt`, which is
used by many programs that use OpenSSL, such as
{command}`curl` and {command}`git`.

- security.pki.certificates: A list of trusted root certificates in PEM format.

- security.pki.installCACerts: Whether to enable installing CA certificates to the system.
- security.pki.useCompatibleBundle: Whether to enable usage of a compatibility bundle.

Such a bundle consists exclusively of `BEGIN CERTIFICATE` and no `BEGIN TRUSTED CERTIFICATE`,
which is an OpenSSL specific PEM format.

It is known to be incompatible with certain software stacks.

Nevertheless, enabling this will strip all additional trust rules provided by the
certificates themselves. This can have security consequences depending on your usecases
.
- security.please.enable: Whether to enable please, a Sudo clone which allows a users to execute a command or edit a
file as another user
.
- security.please.package: The please package to use.
- security.please.settings: Please configuration. Refer to
<https://github.com/edneville/please/blob/master/please.ini.md> for
details.

- security.please.wheelNeedsPassword: Whether users of the `wheel` group must provide a password to run
commands or edit files with {command}`please` and
{command}`pleaseedit` respectively.

- security.polkit.adminIdentities: Specifies which users are considered “administrators”, for those
actions that require the user to authenticate as an
administrator (i.e. have an `auth_admin`
value).  By default, this is all users in the `wheel` group.

- security.polkit.debug: Whether to enable debug logs from polkit. This is required in order to see log messages from rule definitions.
- security.polkit.enable: Whether to enable polkit.
- security.polkit.extraConfig: Any polkit rules to be added to config (in JavaScript ;-). See:
<https://www.freedesktop.org/software/polkit/docs/latest/polkit.8.html#polkit-rules>

- security.polkit.package: The polkit package to use.
- security.protectKernelImage: Whether to prevent replacing the running kernel image.

- security.rngd.debug
- security.rngd.enable
- security.rtkit.args: Command-line options for `rtkit-daemon`.

- security.rtkit.enable: Whether to enable the RealtimeKit system service, which hands
out realtime scheduling priority to user processes on
demand. For example, PulseAudio and PipeWire use this to
acquire realtime priority.

- security.setuidOwners
- security.setuidPrograms
- security.shadow.enable: Enable the shadow authentication suite, which provides critical programs such as su, login, passwd.

Note: This is currently experimental. Only disable this if you're
confident that you can recover your system if it breaks.

- security.soteria.enable: Whether to enable Soteria, a Polkit authentication agent
for any desktop environment.

::: {.note}
You should only enable this if you are on a Desktop Environment that
does not provide a graphical polkit authentication agent, or you are on
a standalone window manager or Wayland compositor.
:::

- security.soteria.package: The soteria package to use.
- security.sudo.configFile: This string contains the contents of the
{file}`sudoers` file.

- security.sudo.defaultOptions: Options used for the default rules, granting `root` and the
`wheel` group permission to run any command as any user.

- security.sudo.enable: Whether to enable the {command}`sudo` command, which
allows non-root users to execute commands as root.

- security.sudo.execWheelOnly: Only allow members of the `wheel` group to execute sudo by
setting the executable's permissions accordingly.
This prevents users that are not members of `wheel` from
exploiting vulnerabilities in sudo such as CVE-2021-3156.

- security.sudo.extraConfig: Extra configuration text appended to {file}`sudoers`.

- security.sudo.extraRules: Define specific rules to be in the {file}`sudoers` file.
More specific rules should come after more general ones in order to
yield the expected behavior. You can use mkBefore/mkAfter to ensure
this is the case when configuration options are merged.

- security.sudo.keepTerminfo: Whether to preserve the `TERMINFO` and `TERMINFO_DIRS`
environment variables, for `root` and the `wheel` group.

- security.sudo.package: The sudo package to use.
- security.sudo.wheelNeedsPassword: Whether users of the `wheel` group must
provide a password to run commands as super user via {command}`sudo`.

- security.sudo-rs.configFile: This string contains the contents of the
{file}`sudoers` file.

- security.sudo-rs.defaultOptions: Options used for the default rules, granting `root` and the
`wheel` group permission to run any command as any user.

- security.sudo-rs.enable: Whether to enable a memory-safe implementation of the {command}`sudo` command,
which allows non-root users to execute commands as root
.
- security.sudo-rs.execWheelOnly: Only allow members of the `wheel` group to execute sudo by
setting the executable's permissions accordingly.
This prevents users that are not members of `wheel` from
exploiting vulnerabilities in sudo such as CVE-2021-3156.

- security.sudo-rs.extraConfig: Extra configuration text appended to {file}`sudoers`.

- security.sudo-rs.extraRules: Define specific rules to be in the {file}`sudoers` file.
More specific rules should come after more general ones in order to
yield the expected behavior. You can use `lib.mkBefore`/`lib.mkAfter` to ensure
this is the case when configuration options are merged.

- security.sudo-rs.package: The sudo-rs package to use.
- security.sudo-rs.wheelNeedsPassword: Whether users of the `wheel` group must
provide a password to run commands as super user via {command}`sudo`.

- security.tpm2.abrmd.enable: Whether to enable Trusted Platform 2 userspace resource manager daemon
.
- security.tpm2.abrmd.package: The tpm2-abrmd package to use.
- security.tpm2.applyUdevRules: Whether to make the /dev/tpm[0-9] devices accessible by the tssUser, or
the /dev/tpmrm[0-9] by tssGroup respectively

- security.tpm2.enable: Whether to enable Trusted Platform Module 2 support.
- security.tpm2.fapi.ekCertLess: A switch to disable Endorsement Key (EK) certificate verification.

A value of null indicates that the generated fapi config file does not
contain a ek_cert_less key. The effect of not having that key at all is
the same as setting its value to false.

A value of false means that the tss2 cli will not work if there is no
EK Cert installed, or if the installed EK Cert can't be validated.

A value of true means that the tss2 cli will work even if there's no EK
cert installed.

- security.tpm2.fapi.ekFingerprint: The fingerprint of the endorsement key.

A value of null means that you have chosen not to specify the expected
fingerprint of the EK. You can still have an endorsement key, it just
won't get checked to see if it's fingerprint matches a particular value
before being used.

- security.tpm2.fapi.firmwareLogFile: The binary bios measurements.

- security.tpm2.fapi.imaLogFile: The binary IMA measurements (Integrity Measurement Architecture).

- security.tpm2.fapi.logDir: The directory for the event log.

- security.tpm2.fapi.profileDir: Directory that contains all cryptographic profiles known to FAPI.

- security.tpm2.fapi.profileName: Name of the default cryptographic profile chosen from the profile_dir directory.

- security.tpm2.fapi.systemDir: The directory where system objects, policies, and imported objects are stored.

- security.tpm2.fapi.systemPcrs: The PCR registers which are used by the system.

- security.tpm2.fapi.tcti: The TCTI which will be used.

An empty string indicates no TCTI is specified by the FAPI config.

If not specified in the FAPI config it can be specified by environment
variable (TPM2TOOLS_TCTI, TPM2_PKCS11_TCTI, etc) or a TCTI will be chosen
by the FAPI library by searching for tabrmd, device, and mssim TCTIs in
that order.

- security.tpm2.fapi.userDir: The directory where user objects are stored.

- security.tpm2.pkcs11.enable: Whether to enable TPM2 PKCS#11 tool and shared library in system path
(`/run/current-system/sw/lib/libtpm2_pkcs11.so`)
.
- security.tpm2.pkcs11.package: tpm2-pkcs11 package to use
- security.tpm2.tctiEnvironment.deviceConf: Configuration part of the device TCTI, e.g. the path to the TPM device.
Applies if interface is set to "device".
The format is specified in the
[
tpm2-tools repository](https://github.com/tpm2-software/tpm2-tools/blob/master/man/common/tcti.md#tcti-options).

- security.tpm2.tctiEnvironment.enable: Set common TCTI environment variables to the specified value.
The variables are
- `TPM2TOOLS_TCTI`
- `TPM2_PKCS11_TCTI`

- security.tpm2.tctiEnvironment.interface: The name of the TPM command transmission interface (TCTI) library to
use.

- security.tpm2.tctiEnvironment.tabrmdConf: Configuration part of the tabrmd TCTI, like the D-Bus bus name.
Applies if interface is set to "tabrmd".
The format is specified in the
[
tpm2-tools repository](https://github.com/tpm2-software/tpm2-tools/blob/master/man/common/tcti.md#tcti-options).

- security.tpm2.tssGroup: Group of the tpm kernel resource manager (tpmrm) device-group, set if
applyUdevRules is set.

- security.tpm2.tssUser: Name of the tpm device-owner and service user, set if applyUdevRules is
set.

- security.unprivilegedUsernsClone: When disabled, unprivileged users will not be able to create new namespaces.
By default unprivileged user namespaces are disabled.
This option only works in a hardened profile.

- security.virtualisation.flushL1DataCache: Whether the hypervisor should flush the L1 data cache before
entering guests.
See also [](#opt-security.allowSimultaneousMultithreading).

- `null`: uses the kernel default
- `"never"`: disables L1 data cache flushing entirely.
  May be appropriate if all guests are trusted.
- `"cond"`: flushes L1 data cache only for pre-determined
  code paths.  May leak information about the host address space
  layout.
- `"always"`: flushes L1 data cache every time the hypervisor
  enters the guest.  May incur significant performance cost.

- security.virtualization.flushL1DataCache: Alias of {option}`security.virtualisation.flushL1DataCache`.
- security.wrapperDir: This option defines the path to the wrapper programs. It
should not be overridden.

- security.wrapperDirSize: Size limit for the /run/wrappers tmpfs. Look at {manpage}`mount(8)`, tmpfs size option,
for the accepted syntax. WARNING: don't set to less than 64MB.

- security.wrappers: This option effectively allows adding setuid/setgid bits, capabilities,
changing file ownership and permissions of a program without directly
modifying it. This works by creating a wrapper program in a directory
(not configurable), which is then added to the shell `PATH`.

- services.SystemdJournal2Gelf.enable: Whether to enable SystemdJournal2Gelf.

- services.SystemdJournal2Gelf.extraOptions: Any extra flags to pass to SystemdJournal2Gelf. Note that
these are basically `journalctl` flags.

- services.SystemdJournal2Gelf.graylogServer: Host and port of your graylog2 input. This should be a GELF
UDP input.

- services.SystemdJournal2Gelf.package: The systemd-journal2gelf package to use.
- services._3proxy.confFile: Ignore all other 3proxy options and load configuration from this file.

- services._3proxy.denyPrivate: Whether to deny access to private IP ranges including loopback.

- services._3proxy.enable: Whether to enable 3proxy.
- services._3proxy.extraConfig: Extra configuration, appended to the 3proxy configuration file.
Consult [documentation](https://github.com/z3APA3A/3proxy/wiki/3proxy.cfg) for available options.

- services._3proxy.privateRanges: What IP ranges to deny access when denyPrivate is set tu true.

- services._3proxy.resolution: Use this option to configure name resolution and DNS caching.

- services._3proxy.services: Use this option to define 3proxy services.

- services._3proxy.usersFile: Load users and passwords from this file.

Example users file with plain-text passwords:

```
  test1:CL:password1
  test2:CL:password2
```

Example users file with md5-crypted passwords:

```
  test1:CR:$1$tFkisVd2$1GA8JXkRmTXdLDytM/i3a1
  test2:CR:$1$rkpibm5J$Aq1.9VtYAn0JrqZ8M.1ME.
```

You can generate md5-crypted passwords via <https://unix4lyfe.org/crypt/>
Note that htpasswd tool generates incompatible md5-crypted passwords.
Consult [documentation](https://github.com/z3APA3A/3proxy/wiki/How-To-%28incomplete%29#USERS) for more information.

- services.a2boot.enable: Whether to enable the a2boot daemon.
- services.accounts-daemon.enable: Whether to enable AccountsService, a DBus service for accessing
the list of user accounts and information attached to those accounts.

- services.acme-dns.enable: Whether to enable acme-dns.
- services.acme-dns.package: The acme-dns package to use.
- services.acme-dns.settings: Free-form settings written directly to the `acme-dns.cfg` file.
Refer to <https://github.com/joohoi/acme-dns/blob/master/README.md#configuration> for supported values.

- services.acpid.acEventCommands: Shell commands to execute on an ac_adapter.* event.
- services.acpid.enable: Whether to enable the ACPI daemon.
- services.acpid.handlers: Event handlers.

::: {.note}
Handler can be a single command.
:::

- services.acpid.lidEventCommands: Shell commands to execute on a button/lid.* event.
- services.acpid.logEvents: Log all event activity.
- services.acpid.powerEventCommands: Shell commands to execute on a button/power.* event.
- services.activemq.baseDir: The base directory where ActiveMQ stores its persistent data and logs.
This will be overridden if you set "activemq.base" and "activemq.data"
in the `javaProperties` option. You can also override
this in activemq.xml.

- services.activemq.configurationDir: The base directory for ActiveMQ's configuration.
By default, this directory is searched for a file named activemq.xml,
which should contain the configuration for the broker service.

- services.activemq.configurationURI: The URI that is passed along to the BrokerFactory to
set up the configuration of the ActiveMQ broker service.
You should not need to change this. For custom configuration,
set the `configurationDir` instead, and create
an activemq.xml configuration file in it.

- services.activemq.enable: Enable the Apache ActiveMQ message broker service.

- services.activemq.extraJavaOptions: Add extra options here that you want to be sent to the
Java runtime when the broker service is started.

- services.activemq.javaProperties: Specifies Java properties that are sent to the ActiveMQ
broker service with the "-D" option. You can set properties
here to change the behaviour and configuration of the broker.
All essential properties that are not set here are automatically
given reasonable defaults.

- services.actkbd.bindings: Key bindings for {command}`actkbd`.

See {command}`actkbd` {file}`README` for documentation.

The example shows a piece of what {option}`sound.mediaKeys.enable` does when enabled.

- services.actkbd.enable: Whether to enable the {command}`actkbd` key mapping daemon.

Turning this on will start an {command}`actkbd`
instance for every evdev input that has at least one key
(which is okay even for systems with tiny memory footprint,
since actkbd normally uses \<100 bytes of memory per
instance).

This allows binding keys globally without the need for e.g.
X11.

- services.actkbd.extraConfig: Literal contents to append to the end of actkbd configuration file.

- services.actual.enable: Whether to enable actual, a privacy focused app for managing your finances.
- services.actual.openFirewall: Whether to open the firewall for the specified port.
- services.actual.package: The actual-server package to use.
- services.actual.settings: Server settings, refer to [the documentation](https://actualbudget.org/docs/config/) for available options.
- services.adguardhome.allowDHCP: Allows AdGuard Home to open raw sockets (`CAP_NET_RAW`), which is
required for the integrated DHCP server.

The default enables this conditionally if the declarative configuration
enables the integrated DHCP server. Manually setting this option is only
required for non-declarative setups.

- services.adguardhome.enable: Whether to enable AdGuard Home network-wide ad blocker.
- services.adguardhome.extraArgs: Extra command line parameters to be passed to the adguardhome binary.

- services.adguardhome.host: Host address to bind HTTP server to.

- services.adguardhome.mutableSettings: Allow changes made on the AdGuard Home web interface to persist between
service restarts.

- services.adguardhome.openFirewall: Open ports in the firewall for the AdGuard Home web interface. Does not
open the port needed to access the DNS resolver.

- services.adguardhome.package: The package that runs adguardhome.

- services.adguardhome.port: Port to serve HTTP pages on.

- services.adguardhome.settings: AdGuard Home configuration. Refer to
<https://github.com/AdguardTeam/AdGuardHome/wiki/Configuration#configuration-file>
for details on supported values.

::: {.note}
On start and if {option}`mutableSettings` is `true`,
these options are merged into the configuration file on start, taking
precedence over configuration changes made on the web interface.

Set this to `null` (default) for a non-declarative configuration without any
Nix-supplied values.
Declarative configurations are supplied with a default `schema_version`, and `http.address`.
:::

- services.aerospike.enable: Whether to enable Aerospike server.
- services.aerospike.extraConfig: Extra configuration
- services.aerospike.networkConfig: network section of configuration file
- services.aerospike.package: The aerospike package to use.
- services.aerospike.workDir: Location where Aerospike stores its files
- services.aesmd.debug
- services.aesmd.enable: Whether to enable Intel's Architectural Enclave Service Manager (AESM) for Intel SGX.
- services.aesmd.environment: Additional environment variables to pass to the AESM service.
- services.aesmd.package: The sgx-psw package to use.
- services.aesmd.quoteProviderLibrary: Custom quote provider library to use.
- services.aesmd.settings: AESM configuration
- services.agate.addresses: Addresses to listen on, IP:PORT, if you haven't disabled forwarding
only set IPv4.

- services.agate.certificatesDir: Root of the certificate directory.
- services.agate.contentDir: Root of the content directory.
- services.agate.enable: Whether to enable Agate Server.
- services.agate.extraArgs: Extra arguments to use running agate.
- services.agate.hostnames: Domain name of this Gemini server, enables checking hostname and port
in requests. (multiple occurrences means basic vhosts)

- services.agate.language: RFC 4646 Language code for text/gemini documents.
- services.agate.onlyTls_1_3: Only use TLSv1.3 (default also allows TLSv1.2).
- services.agate.package: The agate package to use.
- services.agorakit.appKeyFile: A file containing the Laravel APP_KEY - a 32 character long,
base64 encoded key used for encryption where needed. Can be
generated with <code>head -c 32 /dev/urandom | base64</code>.

- services.agorakit.appURL: The root URL that you want to host agorakit on. All URLs in agorakit will be generated using this value.
If you change this in the future you may need to run a command to update stored URLs in the database.
Command example: <code>php artisan agorakit:update-url https://old.example.com https://new.example.com</code>

- services.agorakit.config: Agorakit configuration options to set in the
<filename>.env</filename> file.

Refer to <link xlink:href="https://github.com/agorakit/agorakit"/>
for details on supported values.

Settings containing secret data should be set to an attribute
set containing the attribute <literal>_secret</literal> - a
string pointing to a file containing the value the option
should be set to. See the example to get a better picture of
this: in the resulting <filename>.env</filename> file, the
<literal>OIDC_CLIENT_SECRET</literal> key will be set to the
contents of the <filename>/run/keys/oidc_secret</filename>
file.

- services.agorakit.dataDir: agorakit data directory
- services.agorakit.database.createLocally: Create the database and database user locally.
- services.agorakit.database.host: Database host address.
- services.agorakit.database.name: Database name.
- services.agorakit.database.passwordFile: A file containing the password corresponding to
<option>database.user</option>.

- services.agorakit.database.port: Database host port.
- services.agorakit.database.user: Database username.
- services.agorakit.enable: Whether to enable agorakit.
- services.agorakit.group: Group agorakit runs as.
- services.agorakit.hostName: The hostname to serve agorakit on.

- services.agorakit.mail.driver: Mail driver to use.
- services.agorakit.mail.encryption: SMTP encryption mechanism to use.
- services.agorakit.mail.from: Mail "from" email.
- services.agorakit.mail.fromName: Mail "from" name.
- services.agorakit.mail.host: Mail host address.
- services.agorakit.mail.passwordFile: A file containing the password corresponding to
<option>mail.user</option>.

- services.agorakit.mail.port: Mail host port.
- services.agorakit.mail.user: Mail username.
- services.agorakit.maxUploadSize: The maximum size for uploads (e.g. images).
- services.agorakit.nginx: With this option, you can customize the nginx virtualHost settings.

- services.agorakit.phpPackage: The php82 package to use.
- services.agorakit.poolConfig: Options for the agorakit PHP pool. See the documentation on <literal>php-fpm.conf</literal>
for details on configuration directives.

- services.agorakit.user: User agorakit runs as.
- services.airsonic.contextPath: The context path, i.e., the last part of the Airsonic
URL. Typically '/' or '/airsonic'. Default '/'

- services.airsonic.enable: Whether to enable Airsonic, the Free and Open Source media streaming server (fork of Subsonic and Libresonic).
- services.airsonic.home: The directory where Airsonic will create files.
Make sure it is writable.

- services.airsonic.jre: The jre8 package to use. ::: {.note}
Airsonic only supports Java 8, airsonic-advanced requires at least
Java 11.
:::

- services.airsonic.jvmOptions: Extra command line options for the JVM running AirSonic.
Useful for sending jukebox output to non-default alsa
devices.

- services.airsonic.listenAddress: The host name or IP address on which to bind Airsonic.
The default value is appropriate for first launch, when the
default credentials are easy to guess. It is also appropriate
if you intend to use the virtualhost option in the service
module. In other cases, you may want to change this to a
specific IP or 0.0.0.0 to listen on all interfaces.

- services.airsonic.maxMemory: The memory limit (max Java heap size) in megabytes.
Default: 100

- services.airsonic.port: The port on which Airsonic will listen for
incoming HTTP traffic. Set to 0 to disable.

- services.airsonic.transcoders: List of paths to transcoder executables that should be accessible
from Airsonic. Symlinks will be created to each executable inside
${config.services.airsonic.home}/transcoders.

- services.airsonic.user: User account under which airsonic runs.
- services.airsonic.virtualHost: Name of the nginx virtualhost to use and setup. If null, do not setup any virtualhost.

- services.airsonic.war: Airsonic war file to use.
- services.akkoma.config: Configuration for Akkoma. The attributes are serialised to Elixir DSL.

Refer to <https://docs.akkoma.dev/stable/configuration/cheatsheet/> for
configuration options.

Settings containing secret data should be set to an attribute set containing the
attribute `_secret` - a string pointing to a file containing the value the option
should be set to.

- services.akkoma.dist.address: Listen address for Erlang distribution protocol and Port Mapper Daemon (epmd).

- services.akkoma.dist.cookie: Erlang release cookie.

If set to `null`, a temporary random cookie will be generated.

- services.akkoma.dist.epmdPort: TCP port to bind Erlang Port Mapper Daemon to.
- services.akkoma.dist.extraFlags: Extra flags to pass to Erlang
- services.akkoma.dist.portMax: Upper bound for Erlang distribution protocol TCP port.
- services.akkoma.dist.portMin: Lower bound for Erlang distribution protocol TCP port.
- services.akkoma.enable: Whether to enable Akkoma.
- services.akkoma.extraPackages: List of extra packages to include in the executable search path of the service unit.
These are needed by various configurable components such as:

- ExifTool for the `Pleroma.Upload.Filter.Exiftool` upload filter,
- ImageMagick for still image previews in the media proxy as well as for the
  `Pleroma.Upload.Filters.Mogrify` upload filter, and
- ffmpeg for video previews in the media proxy.

- services.akkoma.extraStatic: Attribute set of extra packages to add to the static files directory.

Do not add frontends here. These should be configured through
[{option}`services.akkoma.frontends`](#opt-services.akkoma.frontends).

- services.akkoma.frontends: Akkoma frontends.
- services.akkoma.group: Group account under which Akkoma runs.
- services.akkoma.initDb.enable: Whether to automatically initialise the database on startup. This will create a
database role and database if they do not already exist, and (re)set the role password
and the ownership of the database.

This setting can be used safely even if the database already exists and contains data.

The database settings are configured through
[{option}`config.services.akkoma.config.":pleroma"."Pleroma.Repo"`](#opt-services.akkoma.config.__pleroma_._Pleroma.Repo_).

If disabled, the database has to be set up manually:

```SQL
CREATE ROLE akkoma LOGIN;

CREATE DATABASE akkoma
  OWNER akkoma
  TEMPLATE template0
  ENCODING 'utf8'
  LOCALE 'C';

\connect akkoma
CREATE EXTENSION IF NOT EXISTS citext;
CREATE EXTENSION IF NOT EXISTS pg_trgm;
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
```

- services.akkoma.initDb.password: Password of the database user to initialise the database with.

If set to `null`, no password will be used.

The attribute `_secret` should point to a file containing the secret.

- services.akkoma.initDb.username: Name of the database user to initialise the database with.

This user is required to have the `CREATEROLE` and `CREATEDB` capabilities.

- services.akkoma.initSecrets: Whether to initialise non‐existent secrets with random values.

If enabled, appropriate secrets for the following options will be created automatically
if the files referenced in the `_secrets` attribute do not exist during startup.

- {option}`config.":pleroma"."Pleroma.Web.Endpoint".secret_key_base`
- {option}`config.":pleroma"."Pleroma.Web.Endpoint".signing_salt`
- {option}`config.":pleroma"."Pleroma.Web.Endpoint".live_view.signing_salt`
- {option}`config.":web_push_encryption".":vapid_details".private_key`
- {option}`config.":web_push_encryption".":vapid_details".public_key`
- {option}`config.":joken".":default_signer"`

- services.akkoma.installWrapper: Whether to install a wrapper around `pleroma_ctl` to simplify administration of the
Akkoma instance.

- services.akkoma.nginx: Extra configuration for the nginx virtual host of Akkoma.

If set to `null`, no virtual host will be added to the nginx configuration.

- services.akkoma.package: The akkoma package to use.
- services.akkoma.user: User account under which Akkoma runs.
- services.alerta.authenticationRequired: Whether users must authenticate when using the web UI or command-line tool
- services.alerta.bind: Address to bind to. The default is to bind to all addresses
- services.alerta.corsOrigins: List of URLs that can access the API for Cross-Origin Resource Sharing (CORS)
- services.alerta.databaseName: Name of the database instance to connect to
- services.alerta.databaseUrl: URL of the MongoDB or PostgreSQL database to connect to
- services.alerta.enable: Whether to enable alerta.
- services.alerta.extraConfig: These lines go into alertad.conf verbatim.
- services.alerta.logDir: Location where the logfiles are stored
- services.alerta.port: Port of Alerta
- services.alerta.signupEnabled: Whether to prevent sign-up of new users via the web UI
- services.alice-lg.enable: Whether to enable Alice Looking Glass.
- services.alice-lg.package: The alice-lg package to use.
- services.alice-lg.settings: alice-lg configuration, for configuration options see the example on [github](https://github.com/alice-lg/alice-lg/blob/main/etc/alice-lg/alice.example.conf)

- services.alloy.configPath: Alloy configuration file/directory path.

We default to `/etc/alloy` here, and expect the user to configure a
configuration file via `environment.etc."alloy/config.alloy"`.

This allows config reload, contrary to specifying a store path.

All `.alloy` files in the same directory (ignoring subdirs) are also
honored and are added to `systemd.services.alloy.reloadTriggers` to
enable config reload during nixos-rebuild switch.

This can also point to another directory containing `*.alloy` files, or
a single Alloy file in the Nix store (at the cost of reload).

Component names must be unique across all Alloy configuration files, and
configuration blocks must not be repeated.

Alloy will continue to run if subsequent reloads of the configuration
file fail, potentially marking components as unhealthy depending on
the nature of the failure. When this happens, Alloy will continue
functioning in the last valid state.

- services.alloy.enable: Whether to enable Grafana Alloy.
- services.alloy.environmentFile: EnvironmentFile as defined in {manpage}`systemd.exec(5)`.

- services.alloy.extraFlags: Extra command-line flags passed to {command}`alloy run`.

See <https://grafana.com/docs/alloy/latest/reference/cli/run/>

- services.alloy.package: The grafana-alloy package to use.
- services.alps.args
- services.alps.bindIP: The IP the service should listen on.

- services.alps.enable: Whether to enable alps.
- services.alps.imaps.host: The IMAPS server address.

- services.alps.imaps.port: The IMAPS server port.

- services.alps.package
- services.alps.port: TCP port the service should listen on.

- services.alps.smtps.host: The SMTPS server address.

- services.alps.smtps.port: The SMTPS server port.

- services.alps.theme: The frontend's theme to use.

- services.amazon-cloudwatch-agent.commonConfiguration: See {option}`commonConfigurationFile`.

{option}`commonConfigurationFile` takes precedence over {option}`commonConfiguration`.

- services.amazon-cloudwatch-agent.commonConfigurationFile: Amazon CloudWatch Agent common configuration. See
<https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/install-CloudWatch-Agent-commandline-fleet.html#CloudWatch-Agent-profile-instance-first>
for supported values.

{option}`commonConfigurationFile` takes precedence over {option}`commonConfiguration`.

Note: Restricted evaluation blocks access to paths outside the Nix store.
This means detecting content changes for mutable paths (i.e. not input or content-addressed) can't be done.
As a result, `nixos-rebuild` won't reload/restart the systemd unit when mutable path contents change.
`systemctl restart amazon-cloudwatch-agent.service` must be used instead.

- services.amazon-cloudwatch-agent.configuration: See {option}`configurationFile`.

{option}`configurationFile` takes precedence over {option}`configuration`.

- services.amazon-cloudwatch-agent.configurationFile: Amazon CloudWatch Agent configuration file. See
<https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch-Agent-Configuration-File-Details.html>
for supported values.

The following options aren't supported:
* `agent.run_as_user`
  * Use {option}`user` instead.

{option}`configurationFile` takes precedence over {option}`configuration`.

Note: Restricted evaluation blocks access to paths outside the Nix store.
This means detecting content changes for mutable paths (i.e. not input or content-addressed) can't be done.
As a result, `nixos-rebuild` won't reload/restart the systemd unit when mutable path contents change.
`systemctl restart amazon-cloudwatch-agent.service` must be used instead.

- services.amazon-cloudwatch-agent.enable: Whether to enable Amazon CloudWatch Agent.
- services.amazon-cloudwatch-agent.mode: Amazon CloudWatch Agent mode. Indicates whether the agent is running in EC2 ("ec2"), on-premises ("onPremise"),
or if it should guess based on metadata endpoints like IMDS or the ECS task metadata endpoint ("auto").

- services.amazon-cloudwatch-agent.package: The amazon-cloudwatch-agent package to use.
- services.amazon-cloudwatch-agent.user: The user that runs the Amazon CloudWatch Agent.

- services.amazon-ssm-agent.enable: Whether to enable Amazon SSM agent.
- services.amazon-ssm-agent.package: The amazon-ssm-agent package to use.
- services.amule.dataDir: The directory holding configuration, incoming and temporary files.

- services.amule.enable: Whether to run the AMule daemon. You need to manually run "amuled --ec-config" to configure the service for the first time.

- services.amule.user: The user the AMule daemon should run as.

- services.ananicy.enable: Whether to enable Ananicy, an auto nice daemon.
- services.ananicy.extraCgroups: Cgroups to write in 'nixCgroups.cgroups'. See:
<https://gitlab.com/ananicy-cpp/ananicy-cpp/#cgroups>

- services.ananicy.extraRules: Rules to write in 'nixRules.rules'. See:
<https://github.com/Nefelim4ag/Ananicy#configuration>
<https://gitlab.com/ananicy-cpp/ananicy-cpp/#global-configuration>

- services.ananicy.extraTypes: Types to write in 'nixTypes.types'. See:
<https://gitlab.com/ananicy-cpp/ananicy-cpp/#types>

- services.ananicy.package: The ananicy package to use.
- services.ananicy.rulesProvider: Which package to copy default rules,types,cgroups from.

- services.ananicy.settings: See <https://github.com/Nefelim4ag/Ananicy/blob/master/ananicy.d/ananicy.conf>

- services.anbox
- services.angrr.enable: Whether to enable angrr.
- services.angrr.enableNixGcIntegration: Whether to enable nix-gc.service integration

- services.angrr.extraArgs: Extra command-line arguments pass to angrr.

- services.angrr.logLevel: Set the log level of angrr.

- services.angrr.ownedOnly: Control the `--remove-root=<true|false>` option of angrr.

- services.angrr.package: The angrr package to use.
- services.angrr.period: The retention period of auto GC roots.

- services.angrr.removeRoot: Whether to pass the `--remove-root` option to angrr.

- services.angrr.timer.dates: How often or when the retention policy is performed.

- services.angrr.timer.enable: Whether to enable angrr timer.
- services.anki-sync-server.address: IP address anki-sync-server listens to.
Note host names are not resolved.

- services.anki-sync-server.baseDirectory: Base directory where user(s) synchronized data will be stored.
- services.anki-sync-server.enable: Whether to enable anki-sync-server.
- services.anki-sync-server.openFirewall: Whether to open the firewall for the specified port.
- services.anki-sync-server.package: The anki-sync-server package to use.
- services.anki-sync-server.port: Port number anki-sync-server listens to.
- services.anki-sync-server.users: List of user-password pairs to provide to the sync server.
- services.ankisyncd
- services.antennas
- services.anubis.defaultOptions: Default options for all instances of Anubis.
- services.anubis.instances: An attribute set of Anubis instances.

The attribute name may be an empty string, in which case the `-<name>` suffix is not added to the service name
and socket paths.

- services.anubis.package: The anubis package to use.
- services.anuko-time-tracker.dataDir: Default data folder for Anuko Time Tracker.
- services.anuko-time-tracker.database.createLocally: Create the database and database user locally.
- services.anuko-time-tracker.database.host: Database host.
- services.anuko-time-tracker.database.name: Database name.
- services.anuko-time-tracker.database.passwordFile: Database user password file.
- services.anuko-time-tracker.database.user: Database username.
- services.anuko-time-tracker.enable: Whether to enable Anuko Time Tracker.
- services.anuko-time-tracker.hostname: The hostname to serve Anuko Time Tracker on.

- services.anuko-time-tracker.nginx: With this option, you can customize the Nginx virtualHost settings.

- services.anuko-time-tracker.package: The anuko-time-tracker package to use.
- services.anuko-time-tracker.poolConfig: Options for Anuko Time Tracker's PHP-FPM pool.

- services.anuko-time-tracker.settings.defaultCurrency: Defines a default currency symbol for new groups.
Use €, £, a more specific dollar like US$, CAD, etc.

- services.anuko-time-tracker.settings.defaultLanguage: Defines Anuko Time Tracker default language. It is used on Time Tracker login page.
After login, a language set for user group is used.
Empty string means the language is defined by user browser.

- services.anuko-time-tracker.settings.email.mode: Mail sending mode. Can be 'mail' or 'smtp'.
- services.anuko-time-tracker.settings.email.sender: Default sender for mail.
- services.anuko-time-tracker.settings.email.smtpAuth: MTA requires authentication.
- services.anuko-time-tracker.settings.email.smtpDebug: Debug mail sending.
- services.anuko-time-tracker.settings.email.smtpHost: MTA hostname.
- services.anuko-time-tracker.settings.email.smtpPasswordFile: Path to file containing the MTA authentication password.

- services.anuko-time-tracker.settings.email.smtpPort: MTA port.
- services.anuko-time-tracker.settings.email.smtpUser: MTA authentication username.
- services.anuko-time-tracker.settings.emailRequired: Defines whether an email is required for new registrations.
- services.anuko-time-tracker.settings.exportDecimalDuration: Defines whether time duration values are decimal in CSV and XML data
exports (1.25 vs 1:15).

- services.anuko-time-tracker.settings.forumLink: Forum link from the main menu.
- services.anuko-time-tracker.settings.helpLink: Help link from the main menu.
- services.anuko-time-tracker.settings.multiorgMode: Defines whether users see the Register option in the menu of Time Tracker that allows them
to self-register and create new organizations (top groups).

- services.anuko-time-tracker.settings.reportFooter: Defines whether to use a footer on reports.
- services.anuko-time-tracker.settings.weekendStartDay: This option defines which days are highlighted with weekend color.
6 means Saturday. For Saudi Arabia, etc. set it to 4 for Thursday and Friday to be
weekend days.

- services.anuko-time-tracker.user: User under which Anuko Time Tracker runs.
- services.apache-kafka.brokerId: Alias of {option}`services.apache-kafka.settings."broker.id"`.
- services.apache-kafka.clusterId: KRaft mode ClusterId used for formatting log directories. Can be generated with `kafka-storage.sh random-uuid`

- services.apache-kafka.configFiles.log4jProperties: Kafka log4j property configuration file path
- services.apache-kafka.configFiles.serverProperties: Kafka server.properties configuration file path.
Defaults to the rendered `settings`.

- services.apache-kafka.enable: Whether to enable Apache Kafka event streaming broker.
- services.apache-kafka.extraProperties
- services.apache-kafka.formatLogDirs: Whether to format log dirs in KRaft mode if all log dirs are
unformatted, ie. they contain no meta.properties.

- services.apache-kafka.formatLogDirsIgnoreFormatted: Whether to ignore already formatted log dirs when formatting log dirs,
instead of failing. Useful when replacing or adding disks.

- services.apache-kafka.hostname
- services.apache-kafka.jre: The JRE with which to run Kafka
- services.apache-kafka.jvmOptions: Extra command line options for the JVM running Kafka.
- services.apache-kafka.log4jProperties: Kafka log4j property configuration.
- services.apache-kafka.logDirs: Alias of {option}`services.apache-kafka.settings."log.dirs"`.
- services.apache-kafka.package: The apacheKafka package to use.
- services.apache-kafka.port
- services.apache-kafka.serverProperties
- services.apache-kafka.settings: [Kafka broker configuration](https://kafka.apache.org/documentation.html#brokerconfigs)
{file}`server.properties`.

Note that .properties files contain mappings from string to string.
Keys with dots are NOT represented by nested attrs in these settings,
but instead as quoted strings (ie. `settings."broker.id"`, NOT
`settings.broker.id`).

- services.apache-kafka.zookeeper: Alias of {option}`services.apache-kafka.settings."zookeeper.connect"`.
- services.apcupsd.configText: Contents of the runtime configuration file, apcupsd.conf. The default
settings makes apcupsd autodetect USB UPSes, limit network access to
localhost and shutdown the system when the battery level is below 50
percent, or when the UPS has calculated that it has 5 minutes or less
of remaining power-on time. See man apcupsd.conf for details.

- services.apcupsd.enable: Whether to enable the APC UPS daemon. apcupsd monitors your UPS and
permits orderly shutdown of your computer in the event of a power
failure. User manual: http://www.apcupsd.com/manual/manual.html.
Note that apcupsd runs as root (to allow shutdown of computer).
You can check the status of your UPS with the "apcaccess" command.

- services.apcupsd.hooks: Each attribute in this option names an apcupsd event and the string
value it contains will be executed in a shell, in response to that
event (prior to the default action). See "man apccontrol" for the
list of events and what they represent.

A hook script can stop apccontrol from doing its default action by
exiting with value 99. Do not do this unless you know what you're
doing.

- services.arbtt.enable: Whether to enable Arbtt statistics capture service.
- services.arbtt.logFile: The log file for captured samples.

- services.arbtt.package: The arbtt package to use.
- services.arbtt.sampleRate: The sampling interval in seconds.

- services.archisteamfarm.bots: Bots name and configuration.

- services.archisteamfarm.dataDir: The ASF home directory used to store all data.
If left as the default value this directory will automatically be created before the ASF server starts, otherwise the sysadmin is responsible for ensuring the directory exists with appropriate ownership and permissions.
- services.archisteamfarm.enable: If enabled, starts the ArchisSteamFarm service.
For configuring the SteamGuard token you will need to use the web-ui, which is enabled by default over on 127.0.0.1:1242.
You cannot configure ASF in any way outside of nix, since all the config files get wiped on restart and replaced with the programnatically set ones by nix.

- services.archisteamfarm.ipcPasswordFile: Path to a file containing the password. The file must be readable by the `archisteamfarm` user/group.
- services.archisteamfarm.ipcSettings: Settings to write to IPC.config.
All options can be found [here](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/IPC#custom-configuration).

- services.archisteamfarm.package: The ArchiSteamFarm package to use. ::: {.warning}
Should always be the latest version, for security reasons,
since this module uses very new features and to not get out of sync with the Steam API.
:::

- services.archisteamfarm.settings: The ASF.json file, all the options are documented [here](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Configuration#global-config).
Do note that `AutoRestart`  and `UpdateChannel` is always to `false` respectively `0` because NixOS takes care of updating everything.
`Headless` is also always set to `true` because there is no way to provide inputs via a systemd service.
You should try to keep ASF up to date since upstream does not provide support for anything but the latest version and you're exposing yourself to all kinds of issues - as is outlined [here](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Configuration#updateperiod).

- services.archisteamfarm.web-ui: The Web-UI hosted on 127.0.0.1:1242.
- services.aria2.downloadDir: Alias of {option}`services.aria2.settings.dir`.
- services.aria2.downloadDirPermission: The permission for `settings.dir`.

The default is 0770, which denies access for users not in the `aria2`
group.

You may want to adjust `serviceUMask` as well, which further restricts
the file permission for newly created files (i.e. the downloads).

- services.aria2.enable: Whether or not to enable the headless Aria2 daemon service.

Aria2 daemon can be controlled via the RPC interface using one of many
WebUIs (http://localhost:6800/ by default).

Targets are downloaded to `/var/lib/aria2/Downloads` by default and are
accessible to users in the `aria2` group.

- services.aria2.extraArguments
- services.aria2.listenPortRange: Alias of {option}`services.aria2.settings.listen-port`.
- services.aria2.openPorts: Open listen and RPC ports found in `settings.listen-port` and
`settings.rpc-listen-port` options in the firewall.

- services.aria2.rpcListenPort: Alias of {option}`services.aria2.settings.rpc-listen-port`.
- services.aria2.rpcSecret
- services.aria2.rpcSecretFile: A file containing the RPC secret authorization token.
Read <https://aria2.github.io/manual/en/html/aria2c.html#rpc-auth> to know how this option value is used.

- services.aria2.serviceUMask: The file mode creation mask for Aria2 service.

The default is 0022 for compatibility reason, as this is the default
used by systemd. However, this results in file permission 0644 for new
files, and denies `aria2` group member from modifying the file.

You may want to set this value to `0002` so you can manage the file
more easily.

- services.aria2.settings: Generates the `aria2.conf` file. Refer to [the documentation][0] for
all possible settings.

[0]: <https://aria2.github.io/manual/en/html/aria2c.html#synopsis>

- services.armagetronad.servers: Armagetron server definitions.
- services.artalk.allowModify: allow Artalk store the settings to config file persistently
- services.artalk.configFile: Artalk config file path. If it is not exist, Artalk will generate one.
- services.artalk.enable: Whether to enable artalk, a comment system.
- services.artalk.group: Artalk group name.
- services.artalk.package: The artalk package to use.
- services.artalk.settings: The artalk configuration.

If you set allowModify to true, Artalk will be able to store the settings in the config file persistently. This section's content will update in the config file after the service restarts.

Options containing secret data should be set to an attribute set
containing the attribute `_secret` - a string pointing to a file
containing the value the option should be set to.

- services.artalk.user: Artalk user name.
- services.artalk.workdir: Artalk working directory
- services.asterisk.confFiles: Sets the content of config files (typically ending with
`.conf`) in the Asterisk configuration directory.

Note that if you want to change `asterisk.conf`, it
is preferable to use the {option}`services.asterisk.extraConfig`
option over this option. If `"asterisk.conf"` is
specified with the {option}`confFiles` option (not recommended),
you must be prepared to set your own `astetcdir`
path.

See
<https://www.asterisk.org/community/documentation/>
for more examples of what is possible here.

- services.asterisk.enable: Whether to enable the Asterisk PBX server.

- services.asterisk.extraArguments: Additional command line arguments to pass to Asterisk.

- services.asterisk.extraConfig: Extra configuration options appended to the default
`asterisk.conf` file.

- services.asterisk.package: The asterisk package to use.
- services.asterisk.useTheseDefaultConfFiles: Sets these config files to the default content. The default value for
          this option contains all necesscary files to avoid errors at startup.
          This does not override settings via {option}`services.asterisk.confFiles`.

- services.asusd.animeConfig: The content of /etc/asusd/anime.ron.
See <https://asus-linux.org/manual/asusctl-manual/#anime-control>.

- services.asusd.asusdConfig: The content of /etc/asusd/asusd.ron.
See <https://asus-linux.org/manual/asusctl-manual/>.

- services.asusd.auraConfig
- services.asusd.auraConfigs: The content of /etc/asusd/aura_<name>.ron.
See <https://asus-linux.org/manual/asusctl-manual/#led-keyboard-control>.

- services.asusd.enable: Whether to enable the asusd service for ASUS ROG laptops.
- services.asusd.enableUserService: Activate the asusd-user service.

- services.asusd.fanCurvesConfig: The content of /etc/asusd/fan_curves.ron.
See <https://asus-linux.org/manual/asusctl-manual/#fan-curves>.

- services.asusd.package: The asusctl package to use.
- services.asusd.profileConfig: The content of /etc/asusd/profile.ron.
See <https://asus-linux.org/manual/asusctl-manual/#profiles>.

- services.asusd.userLedModesConfig: The content of /etc/asusd/asusd-user-ledmodes.ron.
See <https://asus-linux.org/manual/asusctl-manual/#led-keyboard-control>.

- services.atalkd.configFile: Optional path to a custom `atalkd.conf` file. When set, this overrides the generated
configuration from `services.atalkd.interfaces`.

- services.atalkd.enable: Whether to enable the AppleTalk daemon.
- services.atalkd.interfaces: Per-interface configuration for atalkd.
- services.atd.allowEveryone: Whether to make {file}`/var/spool/at{jobs,spool}`
writeable by everyone (and sticky).  This is normally not
needed since the {command}`at` commands are
setuid/setgid `atd`.

- services.atd.enable: Whether to enable the {command}`at` daemon, a command scheduler.

- services.atftpd.enable: Whether to enable the atftpd TFTP server. By default, the server
binds to address 0.0.0.0.

- services.atftpd.extraOptions: Extra command line arguments to pass to atftp.

- services.atftpd.root: Document root directory for the atftpd.

- services.athens.basicAuthPass: Password for basic auth. Warning: this is stored in plain text in the config file.

- services.athens.basicAuthUser: Username for basic auth.

- services.athens.cloudRuntime: Specifies the Cloud Provider on which the Proxy/registry is running.

- services.athens.downloadMode: Defines how Athens behaves when a module@version
is not found in storage. There are 7 options:
1. "sync": download the module synchronously and
return the results to the client.
2. "async": return 404, but asynchronously store the module
in the storage backend.
3. "redirect": return a 301 redirect status to the client
with the base URL as the DownloadRedirectURL from below.
4. "async_redirect": same as option number 3 but it will
asynchronously store the module to the backend.
5. "none": return 404 if a module is not found and do nothing.
6. "file:<path>": will point to an HCL file that specifies
any of the 5 options above based on different import paths.
7. "custom:<base64-encoded-hcl>" is the same as option 6
but the file is fully encoded in the option. This is
useful for using an environment variable in serverless
deployments.

- services.athens.downloadURL: URL used if DownloadMode is set to redirect.
- services.athens.enable: Whether to enable Go module datastore and proxy.
- services.athens.enablePprof: Enable pprof endpoints.
- services.athens.extraConfig: Extra configuration options for the athens config file.

- services.athens.filterFile: Filename for the include exclude filter.
- services.athens.forceSSL: Force SSL redirects for incoming requests.

- services.athens.githubToken: Creates .netrc file with the given token to be used for GitHub.
Warning: this is stored in plain text in the config file.

- services.athens.globalEndpoint: Endpoint for a package registry in case of a proxy cache miss.

- services.athens.goBinary: The Go package used by Athens at runtime.

Athens primarily runs two Go commands:
1. `go mod download -json <module>@<version>`
2. `go list -m -json <module>@latest`

- services.athens.goBinaryEnvVars: Environment variables to pass to the Go binary.
- services.athens.goEnv: Specifies the type of environment to run. One of 'development' or 'production'.
- services.athens.goGetDir: Temporary directory that Athens will use to
fetch modules from VCS prior to persisting
them to a storage backend.

If the value is empty, Athens will use the
default OS temp directory.

- services.athens.goGetWorkers: Number of workers concurrently downloading modules.
- services.athens.hgrcPath: Path to the .hgrc file.

- services.athens.index.mysql.database: Database name for the MySQL database.
- services.athens.index.mysql.host: Host for the MySQL database.
- services.athens.index.mysql.params.parseTime: Parse time for the MySQL database.
- services.athens.index.mysql.params.timeout: Timeout for the MySQL database.
- services.athens.index.mysql.password: Password for the MySQL database. Warning: this is stored in plain text in the config file.
- services.athens.index.mysql.port: Port for the MySQL database.
- services.athens.index.mysql.protocol: Protocol for the MySQL database.
- services.athens.index.mysql.user: User for the MySQL database.
- services.athens.index.postgres.database: Database name for the Postgres database.
- services.athens.index.postgres.host: Host for the Postgres database.
- services.athens.index.postgres.params.connect_timeout: Connect timeout for the Postgres database.
- services.athens.index.postgres.params.sslmode: SSL mode for the Postgres database.
- services.athens.index.postgres.password: Password for the Postgres database. Warning: this is stored in plain text in the config file.
- services.athens.index.postgres.port: Port for the Postgres database.
- services.athens.index.postgres.user: User for the Postgres database.
- services.athens.indexType: Type of index backend Athens will use.

- services.athens.logLevel: Log level for Athens.
Supports all logrus log levels (https://github.com/Sirupsen/logrus#level-logging)".

- services.athens.netrcPath: Path to the .netrc file.

- services.athens.networkMode: Configures how Athens will return the results
of the /list endpoint as it can be assembled from both its own
storage and the upstream VCS.

Note, that for better error messaging, this would also affect how other
endpoints behave.

Modes:
1. strict: merge VCS versions with storage versions, but fail if either of them fails.
2. offline: only get storage versions, never reach out to VCS.
3. fallback: only return storage versions, if VCS fails. Note this means that you may
see inconsistent results since fallback mode does a best effort of giving you what's
available at the time of requesting versions.

- services.athens.noSumPatterns: List of patterns that Athens sum db proxy will return a 403 for.

- services.athens.package: Which athens derivation to use
- services.athens.pathPrefix: Sets basepath for all routes.

- services.athens.port: Port number Athens listens on.

- services.athens.pprofPort: Port number for pprof endpoints.
- services.athens.protocolWorkers: Number of workers concurrently serving protocol paths.
- services.athens.robotsFile: Provides /robots.txt for net crawlers.
- services.athens.shutdownTimeout: Number of seconds to wait for the server to shutdown gracefully.

- services.athens.singleFlight.etcd.endpoints: URLs that determine all distributed etcd servers.
- services.athens.singleFlight.redis.endpoint: URL of the redis server.
- services.athens.singleFlight.redis.lockConfig.maxRetries: Maximum number of retries for the lock.
- services.athens.singleFlight.redis.lockConfig.timeout: Timeout for the lock in seconds.
- services.athens.singleFlight.redis.lockConfig.ttl: TTL for the lock in seconds.
- services.athens.singleFlight.redis.password: Password for the redis server. Warning: this is stored in plain text in the config file.
- services.athens.singleFlight.redisSentinel.endpoints: URLs that determine all distributed redis servers.
- services.athens.singleFlight.redisSentinel.lockConfig.maxRetries: Maximum number of retries for the lock.
- services.athens.singleFlight.redisSentinel.lockConfig.timeout: Timeout for the lock in seconds.
- services.athens.singleFlight.redisSentinel.lockConfig.ttl: TTL for the lock in seconds.
- services.athens.singleFlight.redisSentinel.masterName: Name of the sentinel master server.
- services.athens.singleFlight.redisSentinel.sentinelPassword: Password for the sentinel server. Warning: this is stored in plain text in the config file.
- services.athens.singleFlightType: Determines what mechanism Athens uses to manage concurrency flowing into the Athens backend.

- services.athens.statsExporter: Stats exporter to use.
- services.athens.storage.azureblob.accountKey: Account key for the Azure Blob storage backend. Warning: this is stored in plain text in the config file.
- services.athens.storage.azureblob.accountName: Account name for the Azure Blob storage backend.
- services.athens.storage.azureblob.containerName: Container name for the Azure Blob storage backend.
- services.athens.storage.cdn.endpoint: hostname of the CDN server.
- services.athens.storage.disk.rootPath: Athens disk root folder.
- services.athens.storage.external.url: URL of the backend storage layer.
- services.athens.storage.gcp.bucket: GCP backend storage bucket.
- services.athens.storage.gcp.jsonKey: Base64 encoded GCP service account key. Warning: this is stored in plain text in the config file.
- services.athens.storage.gcp.projectID: GCP project ID.
- services.athens.storage.minio.bucket: Bucket name for the minio storage backend.
- services.athens.storage.minio.enableSSL: Enable SSL for the minio storage backend.
- services.athens.storage.minio.endpoint: Endpoint of the minio storage backend.
- services.athens.storage.minio.key: Access key id for the minio storage backend.
- services.athens.storage.minio.region: Region for the minio storage backend.
- services.athens.storage.minio.secret: Secret key for the minio storage backend. Warning: this is stored in plain text in the config file.
- services.athens.storage.mongo.certPath: Path to the certificate file for the mongo database.
- services.athens.storage.mongo.defaultDBName: Name of the mongo database.
- services.athens.storage.mongo.insecure: Allow insecure connections to the mongo database.
- services.athens.storage.mongo.url: URL of the mongo database.
- services.athens.storage.s3.awsContainerCredentialsRelativeURI: Container relative url (used by fargate).
- services.athens.storage.s3.bucket: Bucket name for the S3 storage backend.
- services.athens.storage.s3.credentialsEndpoint: Credentials endpoint for the S3 storage backend.
- services.athens.storage.s3.endpoint: Endpoint for the S3 storage backend.
- services.athens.storage.s3.forcePathStyle: Force path style for the S3 storage backend.
- services.athens.storage.s3.key: Access key id for the S3 storage backend.
- services.athens.storage.s3.region: Region of the S3 storage backend.
- services.athens.storage.s3.secret: Secret key for the S3 storage backend. Warning: this is stored in plain text in the config file.
- services.athens.storage.s3.token: Token for the S3 storage backend. Warning: this is stored in plain text in the config file.
- services.athens.storage.s3.useDefaultConfiguration: Use default configuration for the S3 storage backend.
- services.athens.storageType: Specifies the type of storage backend to use.
- services.athens.sumDBs: List of fully qualified URLs that Athens will proxy
that the go command can use a checksum verifier.

- services.athens.timeout: Timeout for external network calls in seconds.
- services.athens.tlsCertFile: Path to the TLS certificate file.
- services.athens.tlsKeyFile: Path to the TLS key file.
- services.athens.traceExporter: Trace exporter to use.

- services.athens.traceExporterURL: URL endpoint that traces will be sent to.

- services.athens.unixSocket: Path to the unix socket file.
If set, Athens will listen on the unix socket instead of TCP socket.

- services.athens.validatorHook: Endpoint to validate modules against.

Not used if empty.

- services.atticd.enable: Whether to enable the atticd, the Nix Binary Cache server.
- services.atticd.environmentFile: Path to an EnvironmentFile containing required environment
variables:

- ATTIC_SERVER_TOKEN_RS256_SECRET_BASE64: The base64-encoded RSA PEM PKCS1 of the
  RS256 JWT secret. Generate it with `openssl genrsa -traditional 4096 | base64 -w0`.

- services.atticd.group: The group under which attic runs.

- services.atticd.mode: Mode in which to run the server.

'monolithic' runs all components, and is suitable for single-node deployments.

'api-server' runs only the API server, and is suitable for clustering.

'garbage-collector' only runs the garbage collector periodically.

A simple NixOS-based Attic deployment will typically have one 'monolithic' and any number of 'api-server' nodes.

There are several other supported modes that perform one-off operations, but these are the only ones that make sense to run via the NixOS module.

- services.atticd.package: The attic-server package to use.
- services.atticd.settings: Structured configurations of atticd.
See <https://github.com/zhaofengli/attic/blob/main/server/src/config-template.toml>

- services.atticd.user: The user under which attic runs.

- services.atuin.database.createLocally: Create the database and database user locally.
- services.atuin.database.uri: URI to the database.
Can be set to null in which case ATUIN_DB_URI should be set through an EnvironmentFile

- services.atuin.enable: Whether to enable Atuin server for shell history sync.
- services.atuin.host: The host address the atuin server should listen on.
- services.atuin.maxHistoryLength: The max length of each history item the atuin server should store.
- services.atuin.openFirewall: Open ports in the firewall for the atuin server.
- services.atuin.openRegistration: Allow new user registrations with the atuin server.
- services.atuin.package: The atuin package to use.
- services.atuin.path: A path to prepend to all the routes of the server.
- services.atuin.port: The port the atuin server should listen on.
- services.audiobookshelf.dataDir: Path to Audiobookshelf config and metadata inside of /var/lib.
- services.audiobookshelf.enable: Whether to enable Audiobookshelf, self-hosted audiobook and podcast server.
- services.audiobookshelf.group: Group under which Audiobookshelf runs.
- services.audiobookshelf.host: The host Audiobookshelf binds to.
- services.audiobookshelf.openFirewall: Open ports in the firewall for the Audiobookshelf web interface.
- services.audiobookshelf.package: The audiobookshelf package to use.
- services.audiobookshelf.port: The TCP port Audiobookshelf will listen on.
- services.audiobookshelf.user: User account under which Audiobookshelf runs.
- services.authelia.instances: Multi-domain protection currently requires multiple instances of Authelia.
If you don't require multiple instances of Authelia you can define just the one.

<https://www.authelia.com/roadmap/active/multi-domain-protection/>

- services.auto-cpufreq.enable: Whether to enable auto-cpufreq daemon.
- services.auto-cpufreq.settings: Configuration for `auto-cpufreq`.

The available options can be found in [the example configuration file](https://github.com/AdnanHodzic/auto-cpufreq/blob/v2.6.0/auto-cpufreq.conf-example).

- services.auto-epp.enable: Whether to enable auto-epp for amd active pstate.
- services.auto-epp.package: The auto-epp package to use.
- services.auto-epp.settings: Settings for the auto-epp application.
See upstream example: <https://github.com/jothi-prasath/auto-epp/blob/master/sample-auto-epp.conf>

- services.autobrr.enable: Whether to enable Autobrr.
- services.autobrr.openFirewall: Open ports in the firewall for the Autobrr web interface.
- services.autobrr.package: The autobrr package to use.
- services.autobrr.secretFile: File containing the session secret for the Autobrr web interface.
- services.autobrr.settings: Autobrr configuration options.

Refer to <https://autobrr.com/configuration/autobrr>
for a full list.

- services.autofs.autoMaster: Contents of `/etc/auto.master` file. See {manpage}`auto.master(5)` and {manpage}`autofs(5)`.

- services.autofs.debug: Pass -d and -7 to automount and write log to the system journal.

- services.autofs.enable: Mount filesystems on demand. Unmount them automatically.
You may also be interested in afuse.

- services.autofs.timeout: Set the global minimum timeout, in seconds, until directories are unmounted
- services.automatic-timezoned.enable: Enable `automatic-timezoned`, simple daemon for keeping the system
timezone up-to-date based on the current location. It uses geoclue2 to
determine the current location and systemd-timedated to actually set
the timezone.

To avoid silent overriding by the service, if you have explicitly set a
timezone, either remove it or ensure that it is set with a lower priority
than the default value using `lib.mkDefault` or `lib.mkOverride`. This is
to make the choice deliberate. An error will be presented otherwise.

- services.automatic-timezoned.package: The automatic-timezoned package to use.
- services.automx2.domain: E-Mail-Domain for which mail client autoconfig/autoconfigure should be set up.
The `autoconfig` and `autodiscover` subdomains are automatically prepended and set up with ACME.
The names of those domains are hardcoded in the mail clients and are not configurable.

- services.automx2.enable: Whether to enable automx2.
- services.automx2.package: The automx2 package to use.
- services.automx2.port: Port used by automx2.
- services.automx2.settings: Bootstrap json to populate database.
See [docs](https://rseichter.github.io/automx2/#_sqlite) for details.

- services.automysqlbackup.calendar: Configured when to run the backup service systemd unit (DayOfWeek Year-Month-Day Hour:Minute:Second).

- services.automysqlbackup.config: Alias of {option}`services.automysqlbackup.settings`.
- services.automysqlbackup.enable: Whether to enable AutoMySQLBackup.
- services.automysqlbackup.settings: automysqlbackup configuration. Refer to
{file}`${pkgs.automysqlbackup}/etc/automysqlbackup.conf`
for details on supported values.

- services.autorandr.defaultTarget: Fallback if no monitor layout can be detected. See the docs
(https://github.com/phillipberndt/autorandr/blob/v1.0/README.md#how-to-use)
for further reference.

- services.autorandr.enable: Whether to enable handling of hotplug and sleep events by autorandr.
- services.autorandr.hooks: Global hook scripts
- services.autorandr.ignoreLid: Treat outputs as connected even if their lids are closed
- services.autorandr.matchEdid: Match displays based on edid instead of name
- services.autorandr.profiles: Autorandr profiles specification.
- services.autossh.sessions: List of AutoSSH sessions to start as systemd services. Each service is
named 'autossh-{session.name}'.

- services.autosuspend.checks: Checks for activity.  For more information, see:
 - <https://autosuspend.readthedocs.io/en/latest/configuration_file.html#activity-check-configuration>
 - <https://autosuspend.readthedocs.io/en/latest/available_checks.html>

- services.autosuspend.enable: Whether to enable the autosuspend daemon.
- services.autosuspend.package: The autosuspend package to use.
- services.autosuspend.settings: Configuration for autosuspend, see
<https://autosuspend.readthedocs.io/en/latest/configuration_file.html#general-configuration>
for supported values.

- services.autosuspend.wakeups: Checks for wake up.  For more information, see:
 - <https://autosuspend.readthedocs.io/en/latest/configuration_file.html#wake-up-check-configuration>
 - <https://autosuspend.readthedocs.io/en/latest/available_wakeups.html>

- services.autotierfs.enable: Whether to enable the autotier passthrough tiering filesystem.
- services.autotierfs.package: The autotier package to use.
- services.autotierfs.settings: The contents of the configuration file for autotier.
See the [autotier repo](https://github.com/45Drives/autotier#configuration) for supported values.

- services.avahi.allowInterfaces: List of network interfaces that should be used by the {command}`avahi-daemon`.
Other interfaces will be ignored. If `null`, all local interfaces
except loopback and point-to-point will be used.

- services.avahi.allowPointToPoint: Whether to use POINTTOPOINT interfaces. Might make mDNS unreliable due to usually large
latencies with such links and opens a potential security hole by allowing mDNS access from Internet
connections.

- services.avahi.browseDomains: List of non-local DNS domains to be browsed.

- services.avahi.cacheEntriesMax: Number of resource records to be cached per interface. Use 0 to
disable caching. Avahi daemon defaults to 4096 if not set.

- services.avahi.debug: Whether to enable debug logging.
- services.avahi.denyInterfaces: List of network interfaces that should be ignored by the
{command}`avahi-daemon`. Other unspecified interfaces will be used,
unless {option}`allowInterfaces` is set. This option takes precedence
over {option}`allowInterfaces`.

- services.avahi.domainName: Domain name for all advertisements.

- services.avahi.enable: Whether to run the Avahi daemon, which allows Avahi clients
to use Avahi's service discovery facilities and also allows
the local machine to advertise its presence and services
(through the mDNS responder implemented by `avahi-daemon`).

- services.avahi.extraConfig: Extra config to append to avahi-daemon.conf.

- services.avahi.extraServiceFiles: Specify custom service definitions which are placed in the avahi service directory.
See the {manpage}`avahi.service(5)` manpage for detailed information.

- services.avahi.hostName: Host name advertised on the LAN. If not set, avahi will use the value
of {option}`config.networking.hostName`.

- services.avahi.interfaces: Alias of {option}`services.avahi.allowInterfaces`.
- services.avahi.ipv4: Whether to use IPv4.
- services.avahi.ipv6: Whether to use IPv6.
- services.avahi.nssmdns: Alias of {option}`services.avahi.nssmdns4`.
- services.avahi.nssmdns4: Whether to enable the mDNS NSS (Name Service Switch) plug-in for IPv4.
Enabling it allows applications to resolve names in the `.local`
domain by transparently querying the Avahi daemon.

- services.avahi.nssmdns6: Whether to enable the mDNS NSS (Name Service Switch) plug-in for IPv6.
Enabling it allows applications to resolve names in the `.local`
domain by transparently querying the Avahi daemon.

::: {.note}
Due to the fact that most mDNS responders only register local IPv4 addresses,
most user want to leave this option disabled to avoid long timeouts when applications first resolve the none existing IPv6 address.
:::

- services.avahi.openFirewall: Whether to open the firewall for UDP port 5353.
Disabling this setting also disables discovering of network devices.

- services.avahi.package: The avahi package to use.
- services.avahi.publish.addresses: Whether to register mDNS address records for all local IP addresses.
- services.avahi.publish.domain: Whether to announce the locally used domain name for browsing by other hosts.
- services.avahi.publish.enable: Whether to allow publishing in general.
- services.avahi.publish.hinfo: Whether to register a mDNS HINFO record which contains information about the
local operating system and CPU.

- services.avahi.publish.userServices: Whether to publish user services. Will set `addresses=true`.
- services.avahi.publish.workstation: Whether to register a service of type "_workstation._tcp" on the local LAN.

- services.avahi.reflector: Reflect incoming mDNS requests to all allowed network interfaces.
- services.avahi.wideArea: Whether to enable wide-area service discovery.
- services.awstats.configs: Attribute set of domains to collect stats for.
- services.awstats.dataDir: The directory where awstats data will be stored.
- services.awstats.enable: Whether to enable awstats, a real-time logfile analyzer.
- services.awstats.service.enable
- services.awstats.service.urlPrefix
- services.awstats.updateAt: Specification of the time at which awstats will get updated.
(in the format described by {manpage}`systemd.time(7)`)

- services.awstats.vardir: Alias of {option}`services.awstats.dataDir`.
- services.ax25.axlisten.config: Options that will be passed to the axlisten daemon.

- services.ax25.axlisten.enable: Whether to enable AX.25 axlisten daemon.
- services.ax25.axlisten.package: The ax25-apps package to use.
- services.ax25.axports: Specification of one or more AX.25 ports.
- services.ayatana-indicators.enable: Whether to enable Ayatana Indicators, a continuation of Canonical's Application Indicators
.
- services.ayatana-indicators.packages: List of packages containing Ayatana Indicator services
that should be brought up by a SystemD "ayatana-indicators" user target.

Packages specified here must have passthru.ayatana-indicators set correctly.

If, how, and where these indicators are displayed will depend on your DE.
Which target they will be brought up by depends on the packages' passthru.ayatana-indicators.

- services.babeld.enable: Whether to enable the babeld network routing daemon.
- services.babeld.extraConfig: Options that will be copied to babeld.conf.
See {manpage}`babeld(8)` for details.

- services.babeld.interfaceDefaults: A set describing default parameters for babeld interfaces.
See {manpage}`babeld(8)` for options.

- services.babeld.interfaces: A set describing babeld interfaces.
See {manpage}`babeld(8)` for options.

- services.bacula-dir.enable: Whether to enable Bacula Director Daemon.

- services.bacula-dir.extraConfig: Extra configuration for Bacula Director Daemon.

- services.bacula-dir.extraDirectorConfig: Extra configuration to be passed in Director directive.

- services.bacula-dir.extraMessagesConfig: Extra configuration to be passed in Messages directive.

- services.bacula-dir.name: The director name used by the system administrator. This directive is
required.

- services.bacula-dir.password: Specifies the password that must be supplied for a Director.

- services.bacula-dir.port: Specify the port (a positive integer) on which the Director daemon
will listen for Bacula Console connections. This same port number
must be specified in the Director resource of the Console
configuration file. The default is 9101, so normally this directive
need not be specified. This directive should not be used if you
specify DirAddresses (N.B plural) directive.

- services.bacula-dir.tls: TLS Options for the Director.
Important notice: The backup won't be encrypted.

- services.bacula-fd.director: This option defines director resources in Bacula File Daemon.

- services.bacula-fd.enable: Whether to enable the Bacula File Daemon.

- services.bacula-fd.extraClientConfig: Extra configuration to be passed in Client directive.

- services.bacula-fd.extraMessagesConfig: Extra configuration to be passed in Messages directive.

- services.bacula-fd.name: The client name that must be used by the Director when connecting.
Generally, it is a good idea to use a name related to the machine so
that error messages can be easily identified if you have multiple
Clients. This directive is required.

- services.bacula-fd.port: This specifies the port number on which the Client listens for
Director connections. It must agree with the FDPort specified in
the Client resource of the Director's configuration file.

- services.bacula-fd.tls: TLS Options for the File Daemon.
Important notice: The backup won't be encrypted.

- services.bacula-sd.autochanger: This option defines Autochanger resources in Bacula Storage Daemon.

- services.bacula-sd.device: This option defines Device resources in Bacula Storage Daemon.

- services.bacula-sd.director: This option defines Director resources in Bacula Storage Daemon.

- services.bacula-sd.enable: Whether to enable Bacula Storage Daemon.

- services.bacula-sd.extraMessagesConfig: Extra configuration to be passed in Messages directive.

- services.bacula-sd.extraStorageConfig: Extra configuration to be passed in Storage directive.

- services.bacula-sd.name: Specifies the Name of the Storage daemon.

- services.bacula-sd.port: Specifies port number on which the Storage daemon listens for
Director connections.

- services.bacula-sd.tls: TLS Options for the Storage Daemon.
Important notice: The backup won't be encrypted.

- services.baget.enable
- services.baikal.enable: Whether to enable baikal.
- services.baikal.group: Group account under which the web-application run.

- services.baikal.package: The baikal package to use.
- services.baikal.phpPackage: The php package to use.
- services.baikal.pool: Name of existing phpfpm pool that is used to run web-application.
If not specified a pool will be created automatically with
default values.

- services.baikal.user: User account under which the web-application run.

- services.baikal.virtualHost: Name of the nginx virtualhost to use and setup. If null, do not setup any virtualhost.

- services.bamf.enable: Whether to enable bamf.
- services.bazarr.dataDir: The directory where Bazarr stores its data files.
- services.bazarr.enable: Whether to enable bazarr, a subtitle manager for Sonarr and Radarr.
- services.bazarr.group: Group under which bazarr runs.
- services.bazarr.listenPort: Port on which the bazarr web interface should listen
- services.bazarr.openFirewall: Open ports in the firewall for the bazarr web interface.
- services.bazarr.package: The bazarr package to use.
- services.bazarr.user: User account under which bazarr runs.
- services.bcachefs.autoScrub.enable: Whether to enable regular bcachefs scrub.
- services.bcachefs.autoScrub.fileSystems: List of paths to bcachefs filesystems to regularly call {command}`bcachefs scrub` on.
Defaults to all mount points with bcachefs filesystems.

- services.bcachefs.autoScrub.interval: Systemd calendar expression for when to scrub bcachefs filesystems.
The recommended period is a month but could be less.
See
{manpage}`systemd.time(7)`
for more information on the syntax.

- services.bcg.automaticRemoveKitFromNames: Automatically remove kits.
- services.bcg.automaticRenameGenericNodes: Automatically rename generic nodes.
- services.bcg.automaticRenameKitNodes: Automatically rename kit's nodes.
- services.bcg.automaticRenameNodes: Automatically rename all nodes.
- services.bcg.baseTopicPrefix: Topic prefix added to all MQTT messages.
- services.bcg.device: Device name to configure gateway to use.
- services.bcg.enable: Whether to enable BigClown gateway.
- services.bcg.environmentFiles: File to load as environment file. Environment variables from this file
will be interpolated into the config file using envsubst with this
syntax: `$ENVIRONMENT` or `${VARIABLE}`.
This is useful to avoid putting secrets into the nix store.

- services.bcg.mqtt.cafile: Certificate Authority file for MQTT server access.
- services.bcg.mqtt.certfile: Certificate file for MQTT server access.
- services.bcg.mqtt.host: Host where MQTT server is running.
- services.bcg.mqtt.keyfile: Key file for MQTT server access.
- services.bcg.mqtt.password: MQTT server access password.
- services.bcg.mqtt.port: Port of MQTT server.
- services.bcg.mqtt.username: MQTT server access username.
- services.bcg.name: Name for the device.

Supported variables:
* `{ip}` IP address
* `{id}` The ID of the connected usb-dongle or core-module

`null` can be used for automatic detection from gateway firmware.

- services.bcg.package: The bcg package to use.
- services.bcg.qosNodeMessages: Set the guarantee of MQTT message delivery.
- services.bcg.rename: Rename nodes to different name.
- services.bcg.retainNodeMessages: Specify that node messages should be retaied in MQTT broker.
- services.bcg.verbose: Verbosity level.
- services.beanstalkd.enable: Whether to enable the Beanstalk work queue.
- services.beanstalkd.listen.address: IP address to listen on.
- services.beanstalkd.listen.port: TCP port that will be used to accept client connections.
- services.beanstalkd.openFirewall: Whether to open ports in the firewall for the server.
- services.bee.daemonNiceLevel: Daemon process priority for bee.
0 is the default Unix process priority, 19 is the lowest.

- services.bee.enable: Whether to enable Ethereum Swarm Bee.
- services.bee.group: Group the bee binary should execute under.

- services.bee.package: The bee package to use.
- services.bee.settings: Ethereum Swarm Bee configuration. Refer to
<https://gateway.ethswarm.org/bzz/docs.swarm.eth/docs/installation/configuration/>
for details on supported values.

- services.bee.user: User the bee binary should execute under.

- services.beegfs
- services.beegfsEnable
- services.beesd.filesystems: BTRFS filesystems to run block-level deduplication on.
- services.below.cgroupFilterOut: A regexp matching the full paths of cgroups whose data shouldn't be collected
- services.below.collect.diskStats: Whether to enable dist_stat collection.
- services.below.collect.exitStats: Whether to enable eBPF-based exitstats.
- services.below.collect.ioStats: Whether to enable io.stat collection for cgroups.
- services.below.compression.enable: Whether to enable data compression.
- services.below.dirs.log: Where to store below's logs
- services.below.dirs.store: Where to store below's data
- services.below.enable: Whether to enable 'below' resource monitor.
- services.below.retention.size: Size limit for below's data, in bytes. Data is deleted oldest-first, in 24h 'shards'.

::: {.note}
The size limit may be exceeded by at most the size of the active shard, as:
- the active shard cannot be deleted;
- the size limit is only enforced when a new shard is created.
:::

- services.below.retention.time: Retention time, in seconds.

::: {.note}
As data is stored in 24 hour shards which are discarded as a whole,
only data expired by 24h (or more) is guaranteed to be discarded.
:::

::: {.note}
If `retention.size` is set, data may be discarded earlier than the specified time.
:::

- services.bepasty.enable: Whether to enable bepasty, a binary pastebin server.
- services.bepasty.servers: configure a number of bepasty servers which will be started with
gunicorn.

- services.biboumi.credentialsFile: Path to a configuration file to be merged with the settings.
Beware not to surround "=" with spaces when setting biboumi's options in this file.
Useful to merge a file which is better kept out of the Nix store
because it contains sensible data like
[password](#opt-services.biboumi.settings.password).

- services.biboumi.enable: Whether to enable the Biboumi XMPP gateway to IRC.
- services.biboumi.openFirewall: Whether to enable opening of the identd port in the firewall.
- services.biboumi.package: The biboumi package to use.
- services.biboumi.settings: See [biboumi 9.0](https://doc.biboumi.louiz.org/9.0/admin.html#configuration)

for documentation.

- services.bind.blockedNetworks: What networks are just blocked.

- services.bind.cacheNetworks: What networks are allowed to use us as a resolver.  Note
that this is for recursive queries -- all networks are
allowed to query zones configured with the `zones` option
by default (although this may be overridden within each
zone's configuration, via the `allowQuery` option).
It is recommended that you limit cacheNetworks to avoid your
server being used for DNS amplification attacks.

- services.bind.configFile: Overridable config file to use for named. By default, that
generated by nixos. If overriden, it will not be checked by
named-checkconf.

- services.bind.directory: Working directory of BIND.
- services.bind.enable: Whether to enable BIND domain name server.
- services.bind.extraArgs: Additional command-line arguments to pass to named.

- services.bind.extraConfig: Extra lines to be added verbatim to the generated named configuration file.

- services.bind.extraOptions: Extra lines to be added verbatim to the options section of the
generated named configuration file.

- services.bind.forward: Whether to forward 'first' (try forwarding but lookup directly if forwarding fails) or 'only'.

- services.bind.forwarders: List of servers we should forward requests to.

- services.bind.ipv4Only: Only use ipv4, even if the host supports ipv6.

- services.bind.listenOn: Interfaces to listen on.

- services.bind.listenOnIpv6: Ipv6 interfaces to listen on.

- services.bind.listenOnIpv6Port: Ipv6 port to listen on.

- services.bind.listenOnPort: Port to listen on.

- services.bind.package: The bind package to use.
- services.bind.zones: List of zones we claim authority over.

- services.bird.autoReload: Whether bird should be automatically reloaded when the configuration changes.

- services.bird.checkConfig: Whether the config should be checked at build time.
When the config can't be checked during build time, for example when it includes
other files, either disable this option or use `preCheckConfig` to create
the included files before checking.

- services.bird.config: BIRD Internet Routing Daemon configuration file.
<http://bird.network.cz/>

- services.bird.enable: Whether to enable BIRD Internet Routing Daemon.
- services.bird.package: The bird3 package to use.
- services.bird.preCheckConfig: Commands to execute before the config file check. The file to be checked will be
available as `bird.conf` in the current directory.

Files created with this option will not be available at service runtime, only during
build time checking.

- services.bird-lg.frontend.bgpMapInfo: Information displayed in bgpmap.
- services.bird-lg.frontend.dnsInterface: DNS zone to query ASN information.
- services.bird-lg.frontend.domain: Server name domain suffixes.
- services.bird-lg.frontend.enable: Whether to enable Bird Looking Glass Frontend Webserver.
- services.bird-lg.frontend.extraArgs: Extra parameters documented [here](https://github.com/xddxdd/bird-lg-go#frontend).

:::{.note}
Passing lines (plain strings) is deprecated in favour of passing lists of strings.
:::

- services.bird-lg.frontend.listenAddress: Alias of {option}`services.bird-lg.frontend.listenAddresses`.
- services.bird-lg.frontend.listenAddresses: Address to listen on.
- services.bird-lg.frontend.nameFilter: Protocol names to hide in summary tables (RE2 syntax),
- services.bird-lg.frontend.navbar.allServers: Text of 'All server' button in the navigation bar.
- services.bird-lg.frontend.navbar.allServersURL: URL of 'All servers' button.
- services.bird-lg.frontend.navbar.brand: Brand to show in the navigation bar .
- services.bird-lg.frontend.navbar.brandURL: URL of the brand to show in the navigation bar.
- services.bird-lg.frontend.netSpecificMode: Apply network-specific changes for some networks.
- services.bird-lg.frontend.protocolFilter: Information displayed in bgpmap.
- services.bird-lg.frontend.proxyPort: Port bird-lg-proxy is running on.
- services.bird-lg.frontend.servers: Server name prefixes.
- services.bird-lg.frontend.timeout: Time before request timed out, in seconds.
- services.bird-lg.frontend.titleBrand: Prefix of page titles in browser tabs.
- services.bird-lg.frontend.whois: Whois server for queries.
- services.bird-lg.group: Group to run the service.
- services.bird-lg.package: The bird-lg package to use.
- services.bird-lg.proxy.allowedIPs: List of IPs or networks to allow (default all allowed).
- services.bird-lg.proxy.birdSocket: Bird control socket path.
- services.bird-lg.proxy.enable: Whether to enable Bird Looking Glass Proxy.
- services.bird-lg.proxy.extraArgs: Extra parameters documented [here](https://github.com/xddxdd/bird-lg-go#proxy).

- services.bird-lg.proxy.listenAddress: Alias of {option}`services.bird-lg.proxy.listenAddresses`.
- services.bird-lg.proxy.listenAddresses: Address to listen on.
- services.bird-lg.proxy.traceroute.binary: Traceroute's binary path.
- services.bird-lg.proxy.traceroute.flags: Flags for traceroute process
- services.bird-lg.proxy.traceroute.rawOutput: Display traceroute output in raw format.
- services.bird-lg.user: User to run the service.
- services.bird2
- services.bird6
- services.birdwatcher.enable: Whether to enable Birdwatcher.
- services.birdwatcher.flags: Flags to append to the program call

- services.birdwatcher.package: The birdwatcher package to use.
- services.birdwatcher.settings: birdwatcher configuration, for configuration options see the example on [github](https://github.com/alice-lg/birdwatcher/blob/master/etc/birdwatcher/birdwatcher.conf)

- services.bitbox-bridge.enable: Whether to enable Bitbox bridge daemon, for use with Bitbox hardware wallets..
- services.bitbox-bridge.package: The bitbox-bridge package to use.
- services.bitbox-bridge.port: Listening port for the bitbox-bridge.

- services.bitbox-bridge.runOnMount: Run bitbox-bridge.service only when hardware wallet is plugged, also registers the systemd device unit.
This option is enabled by default to save power, when false, bitbox-bridge service runs all the time instead.

- services.bitcoind: Specification of one or more bitcoind instances.
- services.bitlbee.authBackend: How users are authenticated
  storage -- save passwords internally
  pam -- Linux PAM authentication

- services.bitlbee.authMode: The following authentication modes are available:
  Open -- Accept connections from anyone, use NickServ for user authentication.
  Closed -- Require authorization (using the PASS command during login) before allowing the user to connect at all.
  Registered -- Only allow registered users to use this server; this disables the register- and the account command until the user identifies himself.

- services.bitlbee.configDir: Specify an alternative directory to store all the per-user configuration
files.

- services.bitlbee.enable: Whether to run the BitlBee IRC to other chat network gateway.
Running it allows you to access the MSN, Jabber, Yahoo! and ICQ chat
networks via an IRC client.

- services.bitlbee.extraDefaults: Will be inserted in the Default section of the config file.

- services.bitlbee.extraSettings: Will be inserted in the Settings section of the config file.

- services.bitlbee.hostName: Normally, BitlBee gets a hostname using getsockname(). If you have a nicer
alias for your BitlBee daemon, you can set it here and BitlBee will identify
itself with that name instead.

- services.bitlbee.interface: The interface the BitlBee daemon will be listening to.  If `127.0.0.1`,
only clients on the local host can connect to it; if `0.0.0.0`, clients
can access it from any network interface.

- services.bitlbee.libpurple_plugins: The list of libpurple plugins to install.

- services.bitlbee.plugins: The list of bitlbee plugins to install.

- services.bitlbee.portNumber: Number of the port BitlBee will be listening to.

- services.bitlbee.protocols: This option allows to remove the support of protocol, even if compiled
in. If nothing is given, there are no restrictions.

- services.bitmagnet.enable: Whether to enable Bitmagnet service.
- services.bitmagnet.group: Group of user running bitmagnet
- services.bitmagnet.openFirewall: Open DHT ports in firewall
- services.bitmagnet.package: The bitmagnet package to use.
- services.bitmagnet.settings: Bitmagnet configuration (https://bitmagnet.io/setup/configuration.html).
- services.bitmagnet.useLocalPostgresDB: Use a local postgresql database, create user and database
- services.bitmagnet.user: User running bitmagnet
- services.bitwarden-directory-connector-cli.domain: The domain the Bitwarden/Vaultwarden is accessible on.
- services.bitwarden-directory-connector-cli.enable: Whether to enable Bitwarden Directory Connector.
- services.bitwarden-directory-connector-cli.interval: The interval when to run the connector. This uses systemd's OnCalendar syntax.
- services.bitwarden-directory-connector-cli.ldap: Options to configure the LDAP connection.
If you used the desktop application to test the configuration you can find the settings by searching for `ldap` in `~/.config/Bitwarden\ Directory\ Connector/data.json`.

- services.bitwarden-directory-connector-cli.package: The bitwarden-directory-connector-cli package to use.
- services.bitwarden-directory-connector-cli.secrets.bitwarden.client_path_id: Path to file that contains Client ID.
- services.bitwarden-directory-connector-cli.secrets.bitwarden.client_path_secret: Path to file that contains Client Secret.
- services.bitwarden-directory-connector-cli.secrets.ldap: Path to file that contains LDAP password for user in {option}`ldap.username
- services.bitwarden-directory-connector-cli.sync: Options to configure what gets synced.
If you used the desktop application to test the configuration you can find the settings by searching for `sync` in `~/.config/Bitwarden\ Directory\ Connector/data.json`.

- services.bitwarden-directory-connector-cli.user: User to run the program.
- services.bitwarden_rs: Alias of {option}`services.vaultwarden`.
- services.blackfire-agent.enable: Whether to enable Blackfire profiler agent.
- services.blackfire-agent.settings: See <https://blackfire.io/docs/up-and-running/configuration/agent>

- services.blendfarm.basicSecurityPasswordFile: Path to the password file the client needs to connect to the server.
      The password must not contain a forward slash.
- services.blendfarm.blenderPackage: The blender package to use.
- services.blendfarm.enable: Whether to enable Blendfarm, a render farm management software for Blender.
- services.blendfarm.group: Group under which blendfarm runs.
- services.blendfarm.openFirewall: Whether to enable allowing blendfarm network access through the firewall.
- services.blendfarm.package: The blendfarm package to use.
- services.blendfarm.serverConfig: Server configuration
- services.blendfarm.user: User under which blendfarm runs.
- services.blockbook-frontend: Specification of one or more blockbook-frontend instances.
- services.blocky.enable: Whether to enable blocky, a fast and lightweight DNS proxy as ad-blocker for local network with many features.
- services.blocky.package: The blocky package to use.
- services.blocky.settings: Blocky configuration. Refer to
<https://0xerr0r.github.io/blocky/configuration/>
for details on supported values.

- services.bloop.extraOptions: Specifies additional command line argument to pass to bloop
java process.

- services.bloop.install: Whether to install a user service for the Bloop server.

The service must be manually started for each user with
"systemctl --user start bloop".

- services.blueman.enable: Whether to enable blueman, a bluetooth manager.
- services.bluemap.addons: Alias of {option}`services.bluemap.packs`.
- services.bluemap.coreSettings: Settings for the core.conf file, [see upstream docs](https://github.com/BlueMap-Minecraft/BlueMap/blob/master/BlueMapCommon/src/main/resources/de/bluecolored/bluemap/config/core.conf).
- services.bluemap.defaultWorld: The world used by the default map ruleset.
If you configure your own maps you do not need to set this.

- services.bluemap.enable: Whether to enable bluemap.
- services.bluemap.enableNginx: Enable configuring a virtualHost for serving the bluemap webapp
- services.bluemap.enableRender: Enable rendering
- services.bluemap.eula: By changing this option to true you confirm that you own a copy of minecraft Java Edition,
and that you agree to minecrafts EULA.

- services.bluemap.host: Domain on which nginx will serve the bluemap webapp
- services.bluemap.maps: Settings for files in `maps/`.
If you define anything here you must define everything yourself.
See the default for an example with good options for the different world types.
For valid values [consult upstream docs](https://github.com/BlueMap-Minecraft/BlueMap/blob/master/BlueMapCommon/src/main/resources/de/bluecolored/bluemap/config/maps/map.conf).

- services.bluemap.onCalendar: How often to trigger rendering the map,
in the format of a systemd timer onCalendar configuration.
See {manpage}`systemd.timer(5)`.

- services.bluemap.packs: A set of resourcepacks, datapacks, and mods to extract resources from,
loaded in alphabetical order.

- services.bluemap.resourcepacks: Alias of {option}`services.bluemap.packs`.
- services.bluemap.storage: Where the rendered map will be stored.
Unless you are doing something advanced you should probably leave this alone and configure webRoot instead.
[See upstream docs](https://github.com/BlueMap-Minecraft/BlueMap/tree/master/BlueMapCommon/src/main/resources/de/bluecolored/bluemap/config/storages)

- services.bluemap.webRoot: The directory for saving and serving the webapp and the maps
- services.bluemap.webappSettings: Settings for the webapp.conf file, see [upstream docs](https://github.com/BlueMap-Minecraft/BlueMap/blob/master/BlueMapCommon/src/main/resources/de/bluecolored/bluemap/config/webapp.conf).
- services.bluemap.webserverSettings: Settings for the webserver.conf file, usually not required.
[See upstream docs](https://github.com/BlueMap-Minecraft/BlueMap/blob/master/BlueMapCommon/src/main/resources/de/bluecolored/bluemap/config/webserver.conf).

- services.bluesky-pds.enable: Whether to enable pds.
- services.bluesky-pds.environmentFiles: File to load environment variables from. Loaded variables override
values set in {option}`environment`.

Use it to set values of `PDS_JWT_SECRET`, `PDS_ADMIN_PASSWORD`,
and `PDS_PLC_ROTATION_KEY_K256_PRIVATE_KEY_HEX` secrets.
`PDS_JWT_SECRET` and `PDS_ADMIN_PASSWORD` can be generated with
```
openssl rand --hex 16
```
`PDS_PLC_ROTATION_KEY_K256_PRIVATE_KEY_HEX` can be generated with
```
openssl ecparam --name secp256k1 --genkey --noout --outform DER | tail --bytes=+8 | head --bytes=32 | xxd --plain --cols 32
```

- services.bluesky-pds.package: The bluesky-pds package to use.
- services.bluesky-pds.pdsadmin.enable: Add pdsadmin script to PATH
- services.bluesky-pds.settings: Environment variables to set for the service. Secrets should be
specified using {option}`environmentFile`.

Refer to <https://github.com/bluesky-social/atproto/blob/main/packages/pds/src/config/env.ts> for available environment variables.

- services.boinc.allowRemoteGuiRpc: If set to true, any remote host can connect to and control this BOINC
client (subject to password authentication). If instead set to false,
only the hosts listed in {var}`dataDir`/remote_hosts.cfg will be allowed to
connect.

See also: <https://boinc.berkeley.edu/wiki/Controlling_BOINC_remotely#Remote_access>

- services.boinc.dataDir: The directory in which to store BOINC's configuration and data files.

- services.boinc.enable: Whether to enable the BOINC distributed computing client. If this
option is set to true, the boinc_client daemon will be run as a
background service. The boinccmd command can be used to control the
daemon.

- services.boinc.extraEnvPackages: Additional packages to make available in the environment in which
BOINC will run. Common choices are:

- {var}`pkgs.virtualbox`:
  The VirtualBox virtual machine framework. Required by some BOINC
  projects, such as ATLAS@home.
- {var}`pkgs.ocl-icd`:
  OpenCL infrastructure library. Required by BOINC projects that
  use OpenCL, in addition to a device-specific OpenCL driver.
- {var}`pkgs.linuxPackages.nvidia_x11`:
  Provides CUDA libraries. Required by BOINC projects that use
  CUDA. Note that this requires an NVIDIA graphics device to be
  present on the system.

  Also provides OpenCL drivers for NVIDIA GPUs;
  {var}`pkgs.ocl-icd` is also needed in this case.

- services.boinc.package: The boinc package to use.
- services.bonsaid.configFile: Path to a .json file specifying the state transitions.
You don't need to set this unless you prefer to provide the json file
yourself instead of using the `settings` option.

- services.bonsaid.enable: Whether to enable bonsaid.
- services.bonsaid.extraFlags: Extra flags to pass to `bonsaid`, such as `[ "-v" ]` to enable verbose logging.

- services.bonsaid.package: The bonsai package to use.
- services.bonsaid.settings: State transition definitions. See the upstream [README](https://git.sr.ht/~stacyharper/bonsai)
for extended documentation and a more complete example.

- services.bookstack.appKeyFile
- services.bookstack.appURL
- services.bookstack.cacheDir
- services.bookstack.config
- services.bookstack.dataDir: BookStack data directory
- services.bookstack.database.createLocally
- services.bookstack.database.host
- services.bookstack.database.name
- services.bookstack.database.passwordFile
- services.bookstack.database.port
- services.bookstack.database.user
- services.bookstack.enable: Whether to enable BookStack: A platform to create documentation/wiki content built with PHP & Laravel.
- services.bookstack.extraConfig
- services.bookstack.group: Group bookstack runs as
- services.bookstack.hostname: The hostname to serve BookStack on.

- services.bookstack.mail.driver
- services.bookstack.mail.encryption
- services.bookstack.mail.from
- services.bookstack.mail.fromName
- services.bookstack.mail.host
- services.bookstack.mail.name
- services.bookstack.mail.passwordFile
- services.bookstack.mail.port
- services.bookstack.mail.user
- services.bookstack.maxUploadSize: The maximum size for uploads (e.g. images).
- services.bookstack.nginx: With this option, you can customize the nginx virtualHost settings.

- services.bookstack.package: The bookstack package to use.
- services.bookstack.poolConfig: Options for the Bookstack PHP pool. See the documentation on `php-fpm.conf`
for details on configuration directives.

- services.bookstack.settings: Options for Bookstack configuration. Refer to
<https://github.com/BookStackApp/BookStack/blob/development/.env.example> for
details on supported values. For passing secrets, append "_FILE" to the
setting name. For example, you may create a file `/var/secrets/db_pass.txt`
and set `services.bookstack.settings.DB_PASSWORD_FILE` to `/var/secrets/db_pass.txt`
instead of providing a plaintext password using `services.bookstack.settings.DB_PASSWORD`.

- services.bookstack.user: User bookstack runs as
- services.borgbackup.jobs: Deduplicating backups using BorgBackup.
Adding a job will cause a borg-job-NAME wrapper to be added
to your system path, so that you can perform maintenance easily.
See also the chapter about BorgBackup in the NixOS manual.

- services.borgbackup.package: The borgbackup package to use.
- services.borgbackup.repos: Serve BorgBackup repositories to given public SSH keys,
restricting their access to the repository only.
See also the chapter about BorgBackup in the NixOS manual.
Also, clients do not need to specify the absolute path when accessing the repository,
i.e. `user@machine:.` is enough. (Note colon and dot.)

- services.borgmatic.configurations: Set of borgmatic configurations, see <https://torsion.org/borgmatic/docs/reference/configuration/>

- services.borgmatic.enable: Whether to enable borgmatic.
- services.borgmatic.enableConfigCheck: Whether to enable checking all configurations during build time.
- services.borgmatic.settings: See <https://torsion.org/borgmatic/docs/reference/configuration/>

- services.bosun.checkFrequency: Bosun's check frequency

- services.bosun.enable: Whether to enable bosun.
- services.bosun.extraConfig: Extra configuration options for Bosun. You should describe your
desired templates, alerts, macros, etc through this configuration
option.

A detailed description of the supported syntax can be found at-spi2-atk
<https://bosun.org/configuration.html>

- services.bosun.group: Group account under which bosun runs.

- services.bosun.influxHost: Host and port of the influxdb database.

- services.bosun.ledisDir: Path to bosun's ledis data dir

- services.bosun.listenAddress: The host address and port that bosun's web interface will listen on.

- services.bosun.opentsdbHost: Host and port of the OpenTSDB database that stores bosun data.
To disable opentsdb you can pass null as parameter.

- services.bosun.package: The bosun package to use.
- services.bosun.stateFile: Path to bosun's state file.

- services.bosun.user: User account under which bosun runs.

- services.botamusique.enable: Whether to enable botamusique, a bot to play audio streams on mumble.
- services.botamusique.package: The botamusique package to use.
- services.botamusique.settings: Your {file}`configuration.ini` as a Nix attribute set. Look up
possible options in the [configuration.example.ini](https://github.com/azlux/botamusique/blob/master/configuration.example.ini).

- services.bpftune.enable: Whether to enable bpftune BPF driven auto-tuning.
- services.bpftune.package: The bpftune package to use.
- services.brltty.enable: Whether to enable the BRLTTY daemon.
- services.broadcast-box.enable: Whether to enable Broadcast Box.
- services.broadcast-box.openFirewall: Whether to enable opening WebRTC traffic ports in the firewall. Randomly selected ports
will not be opened.
.
- services.broadcast-box.package: The broadcast-box package to use.
- services.broadcast-box.settings: Attribute set of environment variables.

<https://github.com/Glimesh/broadcast-box#environment-variables>

:::{.warning}
The status API exposes stream keys so {env}`DISABLE_STATUS` is enabled
by default.
:::

- services.broadcast-box.web.host: Host address the HTTP server listens on. By default the server
listens on all interfaces.

- services.broadcast-box.web.openFirewall: Whether to enable opening the HTTP server port and, if enabled, the HTTPS redirect server
port in the firewall.
.
- services.broadcast-box.web.port: Port the HTTP server listens on.

- services.btrbk.extraPackages: Extra packages for btrbk, like compression utilities for `stream_compress`.

**Note**: This option will get deprecated in future releases.
Required compression programs will get automatically provided to btrbk
depending on configured compression method in
`services.btrbk.instances.<name>.settings` option.

- services.btrbk.instances: Set of btrbk instances. The instance named `btrbk` is the default one.
- services.btrbk.ioSchedulingClass: IO scheduling class for btrbk (see {manpage}`ionice(1)` for a quick description). Applies to local instances, and remote ones connecting by ssh if set to idle.
- services.btrbk.niceness: Niceness for local instances of btrbk. Also applies to remote ones connecting via ssh when positive.
- services.btrbk.sshAccess: SSH keys that should be able to make or push snapshots on this system remotely with btrbk
- services.btrfs.autoScrub.enable: Whether to enable regular btrfs scrub.
- services.btrfs.autoScrub.fileSystems: List of paths to btrfs filesystems to regularly call {command}`btrfs scrub` on.
Defaults to all mount points with btrfs filesystems.
Note that if you have filesystems that span multiple devices (e.g. RAID), you should
take care to use the same device for any given mount point and let btrfs take care
of automatically mounting the rest, in order to avoid scrubbing the same data multiple times.

- services.btrfs.autoScrub.interval: Systemd calendar expression for when to scrub btrfs filesystems.
The recommended period is a month but could be less
({manpage}`btrfs-scrub(8)`).
See
{manpage}`systemd.time(7)`
for more information on the syntax.

- services.btrfs.autoScrub.limit: The scrub throughput limit applied on all scrubbed filesystems.
The value is bytes per second, and accepts the usual KMGT prefixes.

- services.buffyboard.configFile: Path to an INI format configuration file to provide Buffyboard.
By default, this is generated from whatever you've set in `settings`.
If specified manually, then `settings` is ignored.

For an example config file see [here](https://gitlab.postmarketos.org/postmarketOS/buffybox/-/blob/master/buffyboard/buffyboard.conf)

- services.buffyboard.enable: Whether to enable buffyboard framebuffer keyboard (on-screen keyboard).
- services.buffyboard.extraFlags: Extra CLI arguments to pass to buffyboard.

- services.buffyboard.package: The buffybox package to use.
- services.buffyboard.settings: Settings to include in /etc/buffyboard.conf.
Every option here is strictly optional:
Buffyboard will use its own baked-in defaults for those options left unset.

- services.buildbot-master.bpPort: Alias of {option}`services.buildbot-master.pbPort`.
- services.buildbot-master.buildbotDir: Specifies the Buildbot directory.
- services.buildbot-master.buildbotUrl: Specifies the Buildbot URL.
- services.buildbot-master.builders: List of Builders.
- services.buildbot-master.changeSource: List of Change Sources.
- services.buildbot-master.configurators: Configurator Steps, see <https://docs.buildbot.net/latest/manual/configuration/configurators.html>
- services.buildbot-master.dbUrl: Specifies the database connection string.
- services.buildbot-master.enable: Whether to enable the Buildbot continuous integration server.
- services.buildbot-master.extraConfig: Extra configuration to append to master.cfg
- services.buildbot-master.extraGroups: List of extra groups that the buildbot user should be a part of.
- services.buildbot-master.extraImports: Extra python imports to prepend to master.cfg
- services.buildbot-master.factorySteps: Factory Steps
- services.buildbot-master.group: Primary group of buildbot user.
- services.buildbot-master.home: Buildbot home directory.
- services.buildbot-master.listenAddress: Specifies the bind address on which the buildbot HTTP interface listens.
- services.buildbot-master.masterCfg: Optionally pass master.cfg path. Other options in this configuration will be ignored.
- services.buildbot-master.package: The buildbot-full package to use.
- services.buildbot-master.packages: Packages to add to PATH for the buildbot process.
- services.buildbot-master.pbPort: The buildmaster will listen on a TCP port of your choosing
for connections from workers.
It can also use this port for connections from remote Change Sources,
status clients, and debug tools.
This port should be visible to the outside world, and you’ll need to tell
your worker admins about your choice.
If put in (single) quotes, this can also be used as a connection string,
as defined in the [ConnectionStrings guide](https://twistedmatrix.com/documents/current/core/howto/endpoints.html).

- services.buildbot-master.port: Specifies port number on which the buildbot HTTP interface listens.
- services.buildbot-master.pythonPackages: Packages to add the to the PYTHONPATH of the buildbot process.
- services.buildbot-master.reporters: List of reporter objects used to present build status to various users.
- services.buildbot-master.schedulers: List of Schedulers.
- services.buildbot-master.status
- services.buildbot-master.title: Specifies the Buildbot Title.
- services.buildbot-master.titleUrl: Specifies the Buildbot TitleURL.
- services.buildbot-master.user: User the buildbot server should execute under.
- services.buildbot-master.workers: List of Workers.
- services.buildbot-worker.adminMessage: Name of the administrator of this worker
- services.buildbot-worker.buildbotDir: Specifies the Buildbot directory.
- services.buildbot-worker.enable: Whether to enable the Buildbot Worker.
- services.buildbot-worker.extraGroups: List of extra groups that the Buildbot Worker user should be a part of.
- services.buildbot-worker.group: Primary group of buildbot Worker user.
- services.buildbot-worker.home: Buildbot home directory.
- services.buildbot-worker.hostMessage: Description of this worker
- services.buildbot-worker.keepalive: This is a number that indicates how frequently keepalive messages should be sent
from the worker to the buildmaster, expressed in seconds.

- services.buildbot-worker.masterUrl: Specifies the Buildbot Worker connection string.
- services.buildbot-worker.package: The buildbot-worker package to use.
- services.buildbot-worker.packages: Packages to add to PATH for the buildbot process.
- services.buildbot-worker.user: User the buildbot Worker should execute under.
- services.buildbot-worker.workerPass: Specifies the Buildbot Worker password.
- services.buildbot-worker.workerPassFile: File used to store the Buildbot Worker password
- services.buildbot-worker.workerUser: Specifies the Buildbot Worker user.
- services.buildkite-agents: Attribute set of buildkite agents.
The attribute key is combined with the hostname and a unique integer to
create the final agent name. This can be overridden by setting the `name`
attribute.

- services.byedpi.enable: Whether to enable the ByeDPI service.
- services.byedpi.extraArgs: Extra command line arguments.
- services.byedpi.package: The byedpi package to use.
- services.c2fmzq-server.bindIP: The local address to use.
- services.c2fmzq-server.enable: Whether to enable c2fmzq-server.
- services.c2fmzq-server.package: The c2fmzq package to use.
- services.c2fmzq-server.passphraseFile: Path to file containing the database passphrase
- services.c2fmzq-server.port: The local port to use.
- services.c2fmzq-server.settings: Configuration for c2FmZQ-server passed as CLI arguments.
Run {command}`c2FmZQ-server help` for supported values.

- services.cachefilesd.cacheDir: Directory to contain filesystem cache.
- services.cachefilesd.enable: Whether to enable cachefilesd network filesystems caching daemon.
- services.cachefilesd.extraConfig: Additional configuration file entries. See {manpage}`cachefilesd.conf(5)` for more information.
- services.cachix-agent.credentialsFile: Required file that needs to contain CACHIX_AGENT_TOKEN=...

- services.cachix-agent.enable: Whether to enable Cachix Deploy Agent: <https://docs.cachix.org/deploy/>.
- services.cachix-agent.host: Cachix uri to use.
- services.cachix-agent.name: Agent name, usually same as the hostname
- services.cachix-agent.package: The cachix package to use.
- services.cachix-agent.profile: Profile name, defaults to 'system' (NixOS).
- services.cachix-agent.verbose: Enable verbose output
- services.cachix-watch-store.cacheName: Cachix binary cache name
- services.cachix-watch-store.cachixTokenFile: Required file that needs to contain the cachix auth token.

- services.cachix-watch-store.compressionLevel: The compression level for ZSTD compression (between 0 and 16)
- services.cachix-watch-store.enable: Whether to enable Cachix Watch Store: <https://docs.cachix.org>.
- services.cachix-watch-store.host: Cachix host to connect to
- services.cachix-watch-store.jobs: Number of threads used for pushing store paths
- services.cachix-watch-store.package: The cachix package to use.
- services.cachix-watch-store.signingKeyFile: Optional file containing a self-managed signing key to sign uploaded store paths.

- services.cachix-watch-store.verbose: Enable verbose output
- services.caddy.acmeCA: ::: {.note}
Sets the [`acme_ca` option](https://caddyserver.com/docs/caddyfile/options#acme-ca)
in the global options block of the resulting Caddyfile.
:::

The URL to the ACME CA's directory. It is strongly recommended to set
this to `https://acme-staging-v02.api.letsencrypt.org/directory` for
Let's Encrypt's [staging endpoint](https://letsencrypt.org/docs/staging-environment/)
while testing or in development.

Value `null` should be prefered for production setups,
as it omits the `acme_ca` option to enable
[automatic issuer fallback](https://caddyserver.com/docs/automatic-https#issuer-fallback).

- services.caddy.adapter: Name of the config adapter to use.
See <https://caddyserver.com/docs/config-adapters>
for the full list.

If `null` is specified, the `--adapter` argument is omitted when
starting or restarting Caddy. Notably, this allows specification of a
configuration file in Caddy's native JSON format, as long as the
filename does not start with `Caddyfile` (in which case the `caddyfile`
adapter is implicitly enabled). See
<https://caddyserver.com/docs/command-line#caddy-run> for details.

::: {.note}
Any value other than `null` or `caddyfile` is only valid when providing
your own `configFile`.
:::

- services.caddy.agree
- services.caddy.ca: Alias of {option}`services.caddy.acmeCA`.
- services.caddy.config: Alias of {option}`services.caddy.extraConfig`.
- services.caddy.configFile: Override the configuration file used by Caddy. By default,
NixOS generates one automatically.

The configuration file is exposed at {file}`/etc/caddy/caddy_config`.

- services.caddy.dataDir: The data directory for caddy.

::: {.note}
If left as the default value this directory will automatically be created
before the Caddy server starts, otherwise you are responsible for ensuring
the directory exists with appropriate ownership and permissions.

Caddy v2 replaced `CADDYPATH` with XDG directories.
See <https://caddyserver.com/docs/conventions#file-locations>.
:::

- services.caddy.email: Your email address. Mainly used when creating an ACME account with your
CA, and is highly recommended in case there are problems with your
certificates.

- services.caddy.enable: Whether to enable Caddy web server.
- services.caddy.enableReload: Reload Caddy instead of restarting it when configuration file changes.

Note that enabling this option requires the [admin API](https://caddyserver.com/docs/caddyfile/options#admin)
to not be turned off.

If you enable this option, consider setting [`grace_period`](https://caddyserver.com/docs/caddyfile/options#grace-period)
to a non-infinite value in {option}`services.caddy.globalConfig`
to prevent Caddy waiting for active connections to finish,
which could delay the reload essentially indefinitely.

- services.caddy.environmentFile: Environment file as defined in {manpage}`systemd.exec(5)`.

You can use environment variables to pass secrets to the service without adding
them to the world-redable nix store.

```
# in configuration.nix
services.caddy.environmentFile = "/run/secrets/caddy.env";
services.caddy.globalConfig = ''
  {
    acme_ca https://acme.zerossl.com/v2/DV90
    acme_eab {
      key_id {$EAB_KEY_ID}
      mac_key {$EAB_MAC_KEY}
    }
  }
'';
```

```
# in /run/secrets/caddy.env
EAB_KEY_ID=secret
EAB_MAC_KEY=secret
```

Find more examples
[here](https://caddyserver.com/docs/caddyfile/concepts#environment-variables)

- services.caddy.extraConfig: Additional lines of configuration appended to the automatically
generated `Caddyfile`.

- services.caddy.globalConfig: Additional lines of configuration appended to the global config section
of the `Caddyfile`.

Refer to <https://caddyserver.com/docs/caddyfile/options#global-options>
for details on supported values.

- services.caddy.group: Group under which caddy runs.

::: {.note}
If left as the default value this group will automatically be created
on system activation, otherwise you are responsible for
ensuring the group exists before the Caddy service starts.
:::

- services.caddy.logDir: Directory for storing Caddy access logs.

::: {.note}
If left as the default value this directory will automatically be created
before the Caddy server starts, otherwise the sysadmin is responsible for
ensuring the directory exists with appropriate ownership and permissions.
:::

- services.caddy.logFormat: Configuration for the default logger. See
<https://caddyserver.com/docs/caddyfile/options#log>
for details.

- services.caddy.package: The caddy package to use.
- services.caddy.resume: Use saved config, if any (and prefer over any specified configuration passed with `--config`).

- services.caddy.settings: Structured configuration for Caddy to generate a Caddy JSON configuration file.
See <https://caddyserver.com/docs/json/> for available options.

::: {.warning}
Using a [Caddyfile](https://caddyserver.com/docs/caddyfile) instead of a JSON config is highly recommended by upstream.
There are only very few exception to this.

Please use a Caddyfile via {option}`services.caddy.configFile`, {option}`services.caddy.virtualHosts` or
{option}`services.caddy.extraConfig` with {option}`services.caddy.globalConfig` instead.
:::

::: {.note}
Takes presence over most `services.caddy.*` options, such as {option}`services.caddy.configFile` and {option}`services.caddy.virtualHosts`, if specified.
:::

- services.caddy.user: User account under which caddy runs.

::: {.note}
If left as the default value this user will automatically be created
on system activation, otherwise you are responsible for
ensuring the user exists before the Caddy service starts.
:::

- services.caddy.virtualHosts: Declarative specification of virtual hosts served by Caddy.

- services.cadvisor.enable: Whether to enable Cadvisor service.
- services.cadvisor.extraOptions: Additional cadvisor options.

See <https://github.com/google/cadvisor/blob/master/docs/runtime_options.md> for available options.

- services.cadvisor.listenAddress: Cadvisor listening host
- services.cadvisor.port: Cadvisor listening port
- services.cadvisor.storageDriver: Cadvisor storage driver.
- services.cadvisor.storageDriverDb: Cadvisord storage driver database name.
- services.cadvisor.storageDriverHost: Cadvisor storage driver host.
- services.cadvisor.storageDriverPassword: Cadvisor storage driver password.

Warning: this password is stored in the world-readable Nix store. It's
recommended to use the {option}`storageDriverPasswordFile` option
since that gives you control over the security of the password.
{option}`storageDriverPasswordFile` also takes precedence over {option}`storageDriverPassword`.

- services.cadvisor.storageDriverPasswordFile: File that contains the cadvisor storage driver password.

{option}`storageDriverPasswordFile` takes precedence over {option}`storageDriverPassword`

Warning: when {option}`storageDriverPassword` is non-empty this defaults to a file in the
world-readable Nix store that contains the value of {option}`storageDriverPassword`.

It's recommended to override this with a path not in the Nix store.
Tip: use [nixops key management](https://nixos.org/nixops/manual/#idm140737318306400)

- services.cadvisor.storageDriverSecure: Cadvisor storage driver, enable secure communication.
- services.cadvisor.storageDriverUser: Cadvisor storage driver username.
- services.cage.enable: Whether to enable cage kiosk service.
- services.cage.environment: Additional environment variables to pass to Cage.
- services.cage.extraArguments: Additional command line arguments to pass to Cage.
- services.cage.package: The cage package to use.
- services.cage.program: Program to run in cage.

- services.cage.user: User to log-in as.

- services.calibre-server.auth.enable: Password based authentication to access the server.
See the [calibre-server documentation](https://manual.calibre-ebook.com/generated/en/calibre-server.html#cmdoption-calibre-server-enable-auth) for details.

- services.calibre-server.auth.mode: Choose the type of authentication used.
Set the HTTP authentication mode used by the server.
See the [calibre-server documentation](https://manual.calibre-ebook.com/generated/en/calibre-server.html#cmdoption-calibre-server-auth-mode) for details.

- services.calibre-server.auth.userDb: Choose users database file to use for authentication.
Make sure users database file is initialized before service startup.
See the [calibre-server documentation](https://manual.calibre-ebook.com/server.html#managing-user-accounts-from-the-command-line-only) for details.

- services.calibre-server.enable: Whether to enable calibre-server (e-book software).
- services.calibre-server.extraFlags: Extra flags to pass to the calibre-server command.
See the [calibre-server documentation](https://manual.calibre-ebook.com/generated/en/calibre-server.html) for details.

- services.calibre-server.group: The group under which calibre-server runs.
- services.calibre-server.host: The interface on which to listen for connections.
See the [calibre-server documentation](https://manual.calibre-ebook.com/generated/en/calibre-server.html#cmdoption-calibre-server-listen-on) for details.

- services.calibre-server.libraries: Make sure each library path is initialized before service startup.
The directories of the libraries to serve. They must be readable for the user under which the server runs.
See the [calibredb documentation](https://manual.calibre-ebook.com/generated/en/calibredb.html#add) for details.

- services.calibre-server.libraryDir
- services.calibre-server.openFirewall: Open ports in the firewall for the Calibre Server web interface.
- services.calibre-server.package: The calibre package to use.
- services.calibre-server.port: The port on which to listen for connections.
See the [calibre-server documentation](https://manual.calibre-ebook.com/generated/en/calibre-server.html#cmdoption-calibre-server-port) for details.

- services.calibre-server.user: The user under which calibre-server runs.
- services.calibre-web.dataDir: Where Calibre-Web stores its data.
Either an absolute path, or the directory name below {file}`/var/lib`.

- services.calibre-web.enable: Whether to enable Calibre-Web.
- services.calibre-web.group: Group account under which Calibre-Web runs.
- services.calibre-web.listen.ip: IP address that Calibre-Web should listen on.

- services.calibre-web.listen.port: Listen port for Calibre-Web.

- services.calibre-web.openFirewall: Open ports in the firewall for the server.

- services.calibre-web.options.calibreLibrary: Path to Calibre library.

- services.calibre-web.options.enableBookConversion: Configure path to the Calibre's ebook-convert in the DB.

- services.calibre-web.options.enableBookUploading: Allow books to be uploaded via Calibre-Web UI.

- services.calibre-web.options.enableKepubify: Whether to enable kebup conversion support.
- services.calibre-web.options.reverseProxyAuth.enable: Enable authorization using auth proxy.

- services.calibre-web.options.reverseProxyAuth.header: Auth proxy header name.

- services.calibre-web.package: The calibre-web package to use.
- services.calibre-web.user: User account under which Calibre-Web runs.
- services.canaille.enable: Whether to enable Canaille.
- services.canaille.jwtPrivateKeyFile: File containing the JWT private key. Make sure it has appropriate permissions.

You can generate one using
```
openssl genrsa -out private.pem 4096
openssl rsa -in private.pem -pubout -outform PEM -out public.pem
```

- services.canaille.ldapBindPasswordFile: File containing the LDAP bind password.

- services.canaille.package: The canaille package to use.
- services.canaille.secretKeyFile: File containing the Flask secret key. Its content is going to be
provided to Canaille as `SECRET_KEY`. Make sure it has appropriate
permissions. For example, copy the output of this to the specified
file:

```
python3 -c 'import secrets; print(secrets.token_hex())'
```

- services.canaille.settings: Settings for Canaille. See [the documentation](https://canaille.readthedocs.io/en/latest/references/configuration.html) for details.
- services.canaille.smtpPasswordFile: File containing the SMTP password. Make sure it has appropriate permissions.

- services.canto-daemon.enable: Whether to enable the canto RSS daemon.
- services.cassandra.allowClients: Enables or disables the native transport server (CQL binary protocol).
This server uses the same address as the {option}`rpcAddress`,
but the port it uses is not `rpc_port` but
`native_transport_port`. See the official Cassandra
docs for more information on these variables and set them using
{option}`extraConfig`.

- services.cassandra.clusterName: The name of the cluster.
This setting prevents nodes in one logical cluster from joining
another. All nodes in a cluster must have the same value.

- services.cassandra.enable: Whether to enable Apache Cassandra – Scalable and highly available database
.
- services.cassandra.extraConfig: Extra options to be merged into {file}`cassandra.yaml` as nix attribute set.

- services.cassandra.extraEnvSh: Extra shell lines to be appended onto {file}`cassandra-env.sh`.

- services.cassandra.fullRepairInterval: Set the interval how often full repairs are run, i.e.
{command}`nodetool repair --full` is executed. See
<https://cassandra.apache.org/doc/latest/operating/repair.html>
for more information.

Set to `null` to disable full repairs.

- services.cassandra.fullRepairOptions: Options passed through to the full repair command.

- services.cassandra.group: Run Apache Cassandra under this group.
- services.cassandra.heapNewSize: Must be left blank or set together with {option}`heapNewSize`.
If left blank a sensible value for the available amount of RAM and CPU
cores is calculated.

Override to set the amount of memory to allocate to the JVM at
start-up. For production use you may wish to adjust this for your
environment. `HEAP_NEWSIZE` refers to the size of the young
generation.

The main trade-off for the young generation is that the larger it
is, the longer GC pause times will be. The shorter it is, the more
expensive GC will be (usually).

The example `HEAP_NEWSIZE` assumes a modern 8-core+ machine for decent pause
times. If in doubt, and if you do not particularly want to tweak, go with
100 MB per physical CPU core.

- services.cassandra.homeDir: Home directory for Apache Cassandra.

- services.cassandra.incrementalRepairInterval: Set the interval how often incremental repairs are run, i.e.
{command}`nodetool repair` is executed. See
<https://cassandra.apache.org/doc/latest/operating/repair.html>
for more information.

Set to `null` to disable incremental repairs.

- services.cassandra.incrementalRepairOptions: Options passed through to the incremental repair command.

- services.cassandra.jmxPort: Specifies the default port over which Cassandra will be available for
JMX connections.
For security reasons, you should not expose this port to the internet.
Firewall it if needed.

- services.cassandra.jmxRoles: Roles that are allowed to access the JMX (e.g. {command}`nodetool`)
BEWARE: The passwords will be stored world readable in the nix store.
        It's recommended to use your own protected file using
        {option}`jmxRolesFile`

Doesn't work in versions older than 3.11 because they don't like that
it's world readable.

- services.cassandra.jmxRolesFile: Specify your own jmx roles file.

- services.cassandra.jvmOpts: Populate the `JVM_OPT` environment variable.

- services.cassandra.listenAddress: Address or interface to bind to and tell other Cassandra nodes
to connect to. You _must_ change this if you want multiple
nodes to be able to communicate!

Set {option}`listenAddress` OR {option}`listenInterface`, not both.

Leaving it blank leaves it up to
`InetAddress.getLocalHost()`. This will always do the "Right
Thing" _if_ the node is properly configured (hostname, name
resolution, etc), and the Right Thing is to use the address
associated with the hostname (it might not be).

Setting {option}`listenAddress` to `0.0.0.0` is always wrong.

- services.cassandra.listenInterface: Set `listenAddress` OR `listenInterface`, not both. Interfaces
must correspond to a single address, IP aliasing is not
supported.

- services.cassandra.logbackConfig: XML logback configuration for cassandra

- services.cassandra.mallocArenaMax: Set this to control the amount of arenas per-thread in glibc.

- services.cassandra.maxHeapSize: Must be left blank or set together with {option}`heapNewSize`.
If left blank a sensible value for the available amount of RAM and CPU
cores is calculated.

Override to set the amount of memory to allocate to the JVM at
start-up. For production use you may wish to adjust this for your
environment. `MAX_HEAP_SIZE` is the total amount of memory dedicated
to the Java heap. `HEAP_NEWSIZE` refers to the size of the young
generation.

The main trade-off for the young generation is that the larger it
is, the longer GC pause times will be. The shorter it is, the more
expensive GC will be (usually).

- services.cassandra.package: The cassandra package to use.
- services.cassandra.remoteJmx: Cassandra ships with JMX accessible *only* from localhost.
To enable remote JMX connections set to true.

Be sure to also enable authentication and/or TLS.
See: <https://wiki.apache.org/cassandra/JmxSecurity>

- services.cassandra.rpcAddress: The address or interface to bind the native transport server to.

Set {option}`rpcAddress` OR {option}`rpcInterface`, not both.

Leaving {option}`rpcAddress` blank has the same effect as on
{option}`listenAddress` (i.e. it will be based on the configured hostname
of the node).

Note that unlike {option}`listenAddress`, you can specify `"0.0.0.0"`, but you
must also set `extraConfig.broadcast_rpc_address` to a value other
than `"0.0.0.0"`.

For security reasons, you should not expose this port to the
internet. Firewall it if needed.

- services.cassandra.rpcInterface: Set {option}`rpcAddress` OR {option}`rpcInterface`, not both. Interfaces must
correspond to a single address, IP aliasing is not supported.

- services.cassandra.seedAddresses: The addresses of hosts designated as contact points in the cluster. A
joining node contacts one of the nodes in the seeds list to learn the
topology of the ring.
Set to `[ "127.0.0.1" ]` for a single node cluster.

- services.cassandra.user: Run Apache Cassandra under this user.
- services.castopod.configureNginx: Configure nginx as a reverse proxy for CastoPod.
- services.castopod.dataDir: The path where castopod stores all data. This path must be in sync
with the castopod package (where it is hardcoded during the build in
accordance with its own `dataDir` argument).

- services.castopod.database.createLocally: Create the database and database user locally.

- services.castopod.database.hostname: Database hostname.
- services.castopod.database.name: Database name.
- services.castopod.database.passwordFile: A file containing the password corresponding to
[](#opt-services.castopod.database.user).

This file is loaded using systemd LoadCredentials.

- services.castopod.database.user: Database user.
- services.castopod.enable: Whether to enable Castopod, a hosting platform for podcasters.
- services.castopod.environmentFile: Environment file to inject e.g. secrets into the configuration.
See [](https://code.castopod.org/adaures/castopod/-/blob/main/.env.example)
for available environment variables.

This file is loaded using systemd LoadCredentials.

- services.castopod.localDomain: The domain serving your CastoPod instance.
- services.castopod.maxUploadSize: Maximum supported size for a file upload in. Maximum HTTP body
size is set to this value for nginx and PHP (because castopod doesn't
support chunked uploads yet:
https://code.castopod.org/adaures/castopod/-/issues/330).

Note, that practical upload size limit is smaller. For example, with
512 MiB setting - around 500 MiB is possible.

- services.castopod.package: The castopod package to use.
- services.castopod.poolSettings: Options for Castopod's PHP pool. See the documentation on `php-fpm.conf` for details on configuration directives.

- services.castopod.settings: Environment variables used for Castopod.
See [](https://code.castopod.org/adaures/castopod/-/blob/main/.env.example)
for available environment variables.

- services.cato-client.enable: Whether to enable cato-client service.
- services.cato-client.package: The cato-client package to use.
- services.centrifugo.credentials: Environment variables with absolute paths to credentials files to load
on service startup.

- services.centrifugo.enable: Whether to enable Centrifugo messaging server.
- services.centrifugo.environmentFiles: Files to load environment variables from. Options set via environment
variables take precedence over {option}`settings`.

See the [Centrifugo documentation] for the environment variable name
format.

[Centrifugo documentation]: https://centrifugal.dev/docs/server/configuration#os-environment-variables

- services.centrifugo.extraGroups: Additional groups for the systemd service.

- services.centrifugo.package: The centrifugo package to use.
- services.centrifugo.settings: Declarative Centrifugo configuration. See the [Centrifugo
documentation] for a list of options.

[Centrifugo documentation]: https://centrifugal.dev/docs/server/configuration

- services.ceph.client.enable: Whether to enable Ceph client configuration.
- services.ceph.client.extraConfig: Extra configuration to add to the client section. Configuration for rados gateways
would be added here, with their own sections, see example.

- services.ceph.enable: Whether to enable Ceph global configuration.
- services.ceph.extraConfig: Extra configuration to add to the global section. Use for setting values that are common for all daemons in the cluster.

- services.ceph.global.authClientRequired: Enables requiring the cluster to authenticate itself to the client.

- services.ceph.global.authClusterRequired: Enables requiring daemons to authenticate with eachother in the cluster.

- services.ceph.global.authServiceRequired: Enables requiring clients to authenticate with the cluster to access services in the cluster (e.g. radosgw, mds or osd).

- services.ceph.global.clusterName: Name of cluster

- services.ceph.global.clusterNetwork: A comma-separated list of subnets that will be used as cluster networks in the cluster.

- services.ceph.global.fsid: Filesystem ID, a generated uuid, its must be generated and set before
attempting to start a cluster

- services.ceph.global.maxOpenFiles: Max open files for each OSD daemon.

- services.ceph.global.mgrModulePath: Path at which to find ceph-mgr modules.

- services.ceph.global.monHost: List of hostname shortnames/IP addresses of the initial monitors.

- services.ceph.global.monInitialMembers: List of hosts that will be used as monitors at startup.

- services.ceph.global.publicNetwork: A comma-separated list of subnets that will be used as public networks in the cluster.

- services.ceph.global.rgwMimeTypesFile: Path to mime types used by radosgw.

- services.ceph.mds.daemons: A list of metadata service daemons that should have a service created. The names correspond
to the id part in ceph i.e. [ "name1" ] would result in mds.name1

- services.ceph.mds.enable: Whether to enable Ceph MDS daemon.
- services.ceph.mds.extraConfig: Extra configuration to add to the MDS section.

- services.ceph.mds.package: The ceph package to use.
- services.ceph.mgr.daemons: A list of names for manager daemons that should have a service created. The names correspond
to the id part in ceph i.e. [ "name1" ] would result in mgr.name1

- services.ceph.mgr.enable: Whether to enable Ceph MGR daemon.
- services.ceph.mgr.extraConfig: Extra configuration to add to the global section for manager daemons.

- services.ceph.mgr.package: The ceph package to use.
- services.ceph.mon.daemons: A list of monitor daemons that should have a service created. The names correspond
to the id part in ceph i.e. [ "name1" ] would result in mon.name1

- services.ceph.mon.enable: Whether to enable Ceph MON daemon.
- services.ceph.mon.extraConfig: Extra configuration to add to the monitor section.

- services.ceph.mon.package: The ceph package to use.
- services.ceph.osd.daemons: A list of OSD daemons that should have a service created. The names correspond
to the id part in ceph i.e. [ "name1" ] would result in osd.name1

- services.ceph.osd.enable: Whether to enable Ceph OSD daemon.
- services.ceph.osd.extraConfig: Extra configuration to add to the OSD section.

- services.ceph.osd.package: The ceph package to use.
- services.ceph.rgw.daemons: A list of rados gateway daemons that should have a service created. The names correspond
to the id part in ceph i.e. [ "name1" ] would result in client.name1, radosgw daemons
aren't daemons to cluster in the sense that OSD, MGR or MON daemons are. They are simply
daemons, from ceph, that uses the cluster as a backend.

- services.ceph.rgw.enable: Whether to enable Ceph RadosGW daemon.
- services.ceph.rgw.package: The ceph package to use.
- services.certmgr.defaultRemote: The default CA host:port to use.
- services.certmgr.enable: Whether to enable certmgr.
- services.certmgr.metricsAddress: The address for the Prometheus HTTP endpoint.
- services.certmgr.metricsPort: The port for the Prometheus HTTP endpoint.
- services.certmgr.package: The certmgr package to use.
- services.certmgr.renewInterval: How often to check certificate expirations and how often to update the cert_next_expires metric.
- services.certmgr.specs: Certificate specs as described by:
<https://github.com/cloudflare/certmgr#certificate-specs>
These will be added to the Nix store, so they will be world readable.

- services.certmgr.svcManager: This specifies the service manager to use for restarting or reloading services.
See: <https://github.com/cloudflare/certmgr#certmgryaml>.
For how to use the "command" service manager in particular,
see: <https://github.com/cloudflare/certmgr#command-svcmgr-and-how-to-use-it>.

- services.certmgr.validMin: The interval before a certificate expires to start attempting to renew it.
- services.certspotter.emailRecipients: A list of email addresses to send certificate updates to.
- services.certspotter.enable: Whether to enable Cert Spotter, a Certificate Transparency log monitor.
- services.certspotter.extraFlags: Extra command-line arguments to pass to Cert Spotter
- services.certspotter.hooks: Scripts to run upon the detection of a new certificate. See `man 8 certspotter-script` or
[the GitHub page](https://github.com/SSLMate/certspotter/blob/v0.21.0/man/certspotter-script.md)
for more info.

- services.certspotter.package: The certspotter package to use.
- services.certspotter.sendmailPath: Path to the `sendmail` binary. By default, the local sendmail wrapper is used
(see {option}`services.mail.sendmailSetuidWrapper`}).

- services.certspotter.startAtEnd: Whether to skip certificates issued before the first launch of Cert Spotter.
Setting this to `false` will cause Cert Spotter to download tens of terabytes of data.

- services.certspotter.watchlist: Domain names to watch. To monitor a domain with all subdomains, prefix its name with `.` (e.g. `.example.org`).
- services.cfdyndns.apiTokenFile: The path to a file containing the API Token
used to authenticate with CloudFlare.

- services.cfdyndns.apikey
- services.cfdyndns.apikeyFile: The path to a file containing the API Key
used to authenticate with CloudFlare.

- services.cfdyndns.email: The email address to use to authenticate to CloudFlare.

- services.cfdyndns.enable: Whether to enable Cloudflare Dynamic DNS Client.
- services.cfdyndns.records: The records to update in CloudFlare.

- services.cfssl.address: Address to bind.
- services.cfssl.ca: CA used to sign the new certificate -- accepts '[file:]fname' or 'env:varname'.
- services.cfssl.caBundle: Path to root certificate store.
- services.cfssl.caKey: CA private key -- accepts '[file:]fname' or 'env:varname'.
- services.cfssl.configFile: Path to configuration file. Do not put this in nix-store as it might contain secrets.
- services.cfssl.dataDir: The work directory for CFSSL.

::: {.note}
If left as the default value this directory will automatically be
created before the CFSSL server starts, otherwise you are
responsible for ensuring the directory exists with appropriate
ownership and permissions.
:::

- services.cfssl.dbConfig: Certificate db configuration file. Path must be writeable.
- services.cfssl.disable: Endpoints to disable (comma-separated list)
- services.cfssl.enable: Whether to enable the CFSSL CA api-server.
- services.cfssl.intBundle: Path to intermediate certificate store.
- services.cfssl.intDir: Intermediates directory.
- services.cfssl.logLevel: Log level (0 = DEBUG, 5 = FATAL).
- services.cfssl.metadata: Metadata file for root certificate presence.
The content of the file is a json dictionary (k,v): each key k is
a SHA-1 digest of a root certificate while value v is a list of key
store filenames.

- services.cfssl.mutualTlsCa: Mutual TLS - require clients be signed by this CA.
- services.cfssl.mutualTlsClientCert: Mutual TLS - client certificate to call remote instance requiring client certs.
- services.cfssl.mutualTlsClientKey: Mutual TLS - client key to call remote instance requiring client certs. Do not put this in nix-store.
- services.cfssl.mutualTlsCn: Mutual TLS - regex for whitelist of allowed client CNs.
- services.cfssl.port: Port to bind.
- services.cfssl.remote: Remote CFSSL server.
- services.cfssl.responder: Certificate for OCSP responder.
- services.cfssl.responderKey: Private key for OCSP responder certificate. Do not put this in nix-store.
- services.cfssl.tlsCert: Other endpoint's CA to set up TLS protocol.
- services.cfssl.tlsKey: Other endpoint's CA private key. Do not put this in nix-store.
- services.cfssl.tlsRemoteCa: CAs to trust for remote TLS requests.
- services.cgit: Configure cgit instances.
- services.cgmanager.enable
- services.cgminer.config: Additional config
- services.cgminer.enable: Whether to enable cgminer, an ASIC/FPGA/GPU miner for bitcoin and litecoin.
- services.cgminer.hardware: List of config options for every GPU
- services.cgminer.package: The cgminer package to use.
- services.cgminer.pools: List of pools where to mine
- services.cgminer.user: User account under which cgminer runs
- services.changedetection-io.baseURL: The base url used in notifications and `{base_url}` token.

- services.changedetection-io.behindProxy: Enable this option when changedetection-io runs behind a reverse proxy, so that it trusts X-* headers.
It is recommend to run changedetection-io behind a TLS reverse proxy.

- services.changedetection-io.chromePort: A free port on which webDriverSupport or playwrightSupport listen on localhost.

- services.changedetection-io.datastorePath: The directory used to store all data for changedetection-io.

- services.changedetection-io.enable: Whether to enable changedetection-io.
- services.changedetection-io.environmentFile: Securely pass environment variables to changedetection-io.

This can be used to set for example a frontend password reproducible via `SALTED_PASS`
which convinetly also deactivates nags about the hosted version.
`SALTED_PASS` should be 64 characters long while the first 32 are the salt and the second the frontend password.
It can easily be retrieved from the settings file when first set via the frontend with the following command:
``jq -r .settings.application.password /var/lib/changedetection-io/url-watches.json``

- services.changedetection-io.group: Group account under which changedetection-io runs.

- services.changedetection-io.listenAddress: Address the server will listen on.
- services.changedetection-io.playwrightSupport: Enable support for fetching web pages using playwright and Chromium.
This starts a headless Chromium controlled by puppeteer in an oci container.

::: {.note}
Playwright can currently leak memory.
See <https://github.com/dgtlmoon/changedetection.io/wiki/Playwright-content-fetcher#playwright-memory-leak>
:::

- services.changedetection-io.port: Port the server will listen on.
- services.changedetection-io.user: User account under which changedetection-io runs.

- services.changedetection-io.webDriverSupport: Enable support for fetching web pages using WebDriver and Chromium.
This starts a headless chromium controlled by puppeteer in an oci container.

::: {.note}
Playwright can currently leak memory.
See <https://github.com/dgtlmoon/changedetection.io/wiki/Playwright-content-fetcher#playwright-memory-leak>
:::

- services.charybdis.config: Charybdis IRC daemon configuration file.

- services.charybdis.enable: Whether to enable Charybdis IRC daemon.
- services.charybdis.group: Charybdis IRC daemon group.

- services.charybdis.motd: Charybdis MOTD text.

Charybdis will read its MOTD from /etc/charybdis/ircd.motd .
If set, the value of this option will be written to this path.

- services.charybdis.statedir: Location of the state directory of charybdis.

- services.charybdis.user: Charybdis IRC daemon user.

- services.chatgpt-retrieval-plugin
- services.chhoto-url.enable: Whether to enable Chhoto URL.
- services.chhoto-url.environmentFiles: Files to load environment variables from in addition to [](#opt-services.chhoto-url.settings).
This is useful to avoid putting secrets into the nix store.
See <https://github.com/SinTan1729/chhoto-url/blob/main/compose.yaml> for a list of options.

- services.chhoto-url.package: The chhoto-url package to use.
- services.chhoto-url.settings: Configuration of Chhoto URL.
See <https://github.com/SinTan1729/chhoto-url/blob/main/compose.yaml> for a list of options.

- services.chisel-server.authfile: Path to auth.json file
- services.chisel-server.backend: HTTP server to proxy normal requests to
- services.chisel-server.enable: Whether to enable Chisel Tunnel Server.
- services.chisel-server.host: Address to listen on, falls back to 0.0.0.0
- services.chisel-server.keepalive: Keepalive interval, falls back to 25s
- services.chisel-server.port: Port to listen on, falls back to 8080
- services.chisel-server.reverse: Allow clients reverse port forwarding
- services.chisel-server.socks5: Allow clients access to internal SOCKS5 proxy
- services.chromadb.dbpath: Location where ChromaDB stores its files
- services.chromadb.enable: Whether to enable ChromaDB, an open-source AI application database..
- services.chromadb.host: Defines the IP address by which ChromaDB will be accessible.

- services.chromadb.logFile
- services.chromadb.openFirewall: Whether to automatically open the specified TCP port in the firewall.

- services.chromadb.package: The chromadb package to use.
- services.chromadb.port: Defined the port number to listen.

- services.chronos
- services.chrony.autotrimThreshold: Maximum estimated error threshold for the `rtcautotrim` command.
When reached, the RTC will be trimmed.
Only used when [](#opt-services.chrony.enableRTCTrimming) is enabled.

- services.chrony.directory: Directory where chrony state is stored.
- services.chrony.enable: Whether to synchronise your machine's time using chrony.
Make sure you disable NTP if you enable this service.

- services.chrony.enableMemoryLocking: Whether to add the `-m` flag to lock memory.

- services.chrony.enableNTS: Whether to enable Network Time Security authentication.
Make sure it is supported by your selected NTP server(s).

- services.chrony.enableRTCTrimming: Enable tracking of the RTC offset to the system clock and automatic trimming.
See also [](#opt-services.chrony.autotrimThreshold)

::: {.note}
This is not compatible with the `rtcsync` directive, which naively syncs the RTC time every 11 minutes.

Tracking the RTC drift will allow more precise timekeeping,
especially on intermittently running devices, where the RTC is very relevant.
:::

- services.chrony.extraConfig: Extra configuration directives that should be added to
`chrony.conf`

- services.chrony.extraFlags: Extra flags passed to the chronyd command.
- services.chrony.initstepslew.enabled: Allow chronyd to make a rapid measurement of the system clock error
at boot time, and to correct the system clock by stepping before
normal operation begins.

- services.chrony.initstepslew.threshold: The threshold of system clock error (in seconds) above which the
clock will be stepped. If the correction required is less than the
threshold, a slew is used instead.

- services.chrony.package: The chrony package to use.
- services.chrony.serverOption: Set option for server directives.

Use "iburst" to rapidly poll on startup. Recommended if your machine
is consistently online.

Use "offline" to prevent polling on startup. Recommended if your
machine boots offline or is otherwise frequently offline.

- services.chrony.servers: The set of NTP servers from which to synchronise.

- services.cinnamon.apps.enable: Whether to enable Cinnamon default applications.
- services.cjdns.ETHInterface.beacon: Auto-connect to other cjdns nodes on the same network.
Options:
  0: Disabled.
  1: Accept beacons, this will cause cjdns to accept incoming
     beacon messages and try connecting to the sender.
  2: Accept and send beacons, this will cause cjdns to broadcast
     messages on the local network which contain a randomly
     generated per-session password, other nodes which have this
     set to 1 or 2 will hear the beacon messages and connect
     automatically.

- services.cjdns.ETHInterface.bind: Bind to this device for native ethernet operation.
`all` is a pseudo-name which will try to connect to all devices.

- services.cjdns.ETHInterface.connectTo: Credentials for connecting look similar to UDP credientials
except they begin with the mac address.

- services.cjdns.UDPInterface.bind: Address and port to bind UDP tunnels to.

- services.cjdns.UDPInterface.connectTo: Credentials for making UDP tunnels.

- services.cjdns.addExtraHosts: Whether to add cjdns peers with an associated hostname to
{file}`/etc/hosts`.  Beware that enabling this
incurs heavy eval-time costs.

- services.cjdns.admin.bind: Bind the administration port to this address and port.

- services.cjdns.authorizedPasswords: Any remote cjdns nodes that offer these passwords on
connection will be allowed to route through this node.

- services.cjdns.confFile: Ignore all other cjdns options and load configuration from this file.

- services.cjdns.enable: Whether to enable the cjdns network encryption
and routing engine. A file at /etc/cjdns.keys will
be created if it does not exist to contain a random
secret key that your IPv6 address will be derived from.

- services.cjdns.extraConfig: Extra configuration, given as attrs, that will be merged recursively
with the rest of the JSON generated by this module, at the root node.

- services.clamav.daemon.enable: Whether to enable ClamAV clamd daemon.
- services.clamav.daemon.extraConfig
- services.clamav.daemon.settings: ClamAV configuration. Refer to <https://linux.die.net/man/5/clamd.conf>,
for details on supported values.

- services.clamav.fangfrisch.enable: Whether to enable ClamAV fangfrisch updater.
- services.clamav.fangfrisch.interval: How often freshclam is invoked. See {manpage}`systemd.time(7)` for more
information about the format.

- services.clamav.fangfrisch.settings: fangfrisch configuration. Refer to <https://rseichter.github.io/fangfrisch/#_configuration>,
for details on supported values.
Note that by default urlhaus and sanesecurity are enabled.

- services.clamav.package: The clamav package to use.
- services.clamav.scanner.enable: Whether to enable ClamAV scanner.
- services.clamav.scanner.interval: How often clamdscan is invoked. See {manpage}`systemd.time(7)` for more
information about the format.
By default this runs using 10 cores at most, be sure to run it at a time of low traffic.

- services.clamav.scanner.scanDirectories: List of directories to scan.
The default includes everything I could think of that is valid for nixos. Feel free to contribute a PR to add to the default if you see something missing.

- services.clamav.updater.config
- services.clamav.updater.enable: Whether to enable ClamAV freshclam updater.
- services.clamav.updater.extraConfig
- services.clamav.updater.frequency: Number of database checks per day.

- services.clamav.updater.interval: How often freshclam is invoked. See {manpage}`systemd.time(7)` for more
information about the format.

- services.clamav.updater.settings: freshclam configuration. Refer to <https://linux.die.net/man/5/freshclam.conf>,
for details on supported values.

- services.clamsmtp
- services.clatd.enable: Whether to enable clatd.
- services.clatd.enableNetworkManagerIntegration: Whether to enable NetworkManager integration.
- services.clatd.package: The clatd package to use.
- services.clatd.settings: Configuration of clatd. See [clatd Documentation](https://github.com/toreanderson/clatd/blob/master/README.pod#configuration).

- services.clickhouse.enable: Whether to enable ClickHouse database server.
- services.clickhouse.package: The clickhouse package to use.
- services.clight.enable: Whether to enable clight.
- services.clight.settings: Additional configuration to extend clight.conf. See
<https://github.com/FedeDP/Clight/blob/master/Extra/clight.conf> for a
sample configuration file.

- services.clight.temperature.day: Colour temperature to use during the day, between
`1000` and `25000` K.

- services.clight.temperature.night: Colour temperature to use at night, between
`1000` and `25000` K.

- services.clipcat.enable: Whether to enable Clipcat clipboard daemon.
- services.clipcat.package: The clipcat package to use.
- services.clipmenu.enable: Whether to enable clipmenu, the clipboard management daemon.
- services.clipmenu.package: The clipmenu package to use.
- services.cloud-init.btrfs.enable: Allow the cloud-init service to operate `btrfs` filesystem.

- services.cloud-init.config: raw cloud-init configuration.

Takes precedence over the `settings` option if set.

- services.cloud-init.enable: Enable the cloud-init service. This services reads
configuration metadata in a cloud environment and configures
the machine according to this metadata.

This configuration is not completely compatible with the
NixOS way of doing configuration, as configuration done by
cloud-init might be overridden by a subsequent nixos-rebuild
call. However, some parts of cloud-init fall outside of
NixOS's responsibility, like filesystem resizing and ssh
public key provisioning, and cloud-init is useful for that
parts. Thus, be wary that using cloud-init in NixOS might
come as some cost.

- services.cloud-init.ext4.enable: Allow the cloud-init service to operate `ext4` filesystem.

- services.cloud-init.extraPackages: List of additional packages to be available within cloud-init jobs.

- services.cloud-init.network.enable: Allow the cloud-init service to configure network interfaces
through systemd-networkd.

- services.cloud-init.settings: Structured cloud-init configuration.

- services.cloud-init.xfs.enable: Allow the cloud-init service to operate `xfs` filesystem.

- services.cloudflare-dyndns.apiTokenFile: The path to a file containing the CloudFlare API token.

- services.cloudflare-dyndns.deleteMissing: Whether to delete the record when no IP address is found.

- services.cloudflare-dyndns.domains: List of domain names to update records for.

- services.cloudflare-dyndns.enable: Whether to enable Cloudflare Dynamic DNS Client.
- services.cloudflare-dyndns.frequency: Run cloudflare-dyndns with the given frequency (see
{manpage}`systemd.time(7)` for the format).
If null, do not run automatically.

- services.cloudflare-dyndns.ipv4: Whether to enable setting IPv4 A records.

- services.cloudflare-dyndns.ipv6: Whether to enable setting IPv6 AAAA records.

- services.cloudflare-dyndns.package: The cloudflare-dyndns package to use.
- services.cloudflare-dyndns.proxied: Whether this is a DNS-only record, or also being proxied through CloudFlare.

- services.cloudflare-warp.enable: Whether to enable Cloudflare Zero Trust client daemon.
- services.cloudflare-warp.openFirewall: Whether to enable opening UDP ports in the firewall.
- services.cloudflare-warp.package: The cloudflare-warp package to use.
- services.cloudflare-warp.rootDir: Working directory for the warp-svc daemon.

- services.cloudflare-warp.udpPort: The UDP port to open in the firewall. Warp uses port 2408 by default, but fallback ports can be used
if that conflicts with another service. See the [firewall documentation](https://developers.cloudflare.com/cloudflare-one/connections/connect-devices/warp/deployment/firewall#warp-udp-ports)
for the pre-configured available fallback ports.

- services.cloudflared.certificateFile: Account certificate file, necessary to create, delete and manage tunnels. It can be obtained by running `cloudflared login`.

Note that this is **necessary** for a fully declarative set up, as routes can not otherwise be created outside of the Cloudflare interface.

See [Cert.pem](https://developers.cloudflare.com/cloudflare-one/connections/connect-apps/install-and-setup/tunnel-useful-terms/#certpem) for information about the file, and [Tunnel permissions](https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/do-more-with-tunnels/local-management/tunnel-permissions/) for a comparison between the account certificate and the tunnel credentials file.

- services.cloudflared.enable: Whether to enable Cloudflare Tunnel client daemon (formerly Argo Tunnel).
- services.cloudflared.group
- services.cloudflared.package: The cloudflared package to use.
- services.cloudflared.tunnels: Cloudflare tunnels.

- services.cloudflared.user
- services.cloudlog.baseUrl: Cloudlog base URL
- services.cloudlog.dataDir: Cloudlog data directory.
- services.cloudlog.database.createLocally: Create the database and database user locally.
- services.cloudlog.database.host: MySQL database host
- services.cloudlog.database.name: MySQL database name.
- services.cloudlog.database.passwordFile: MySQL user password file.
- services.cloudlog.database.user: MySQL user name.
- services.cloudlog.enable: Whether to enable Cloudlog.
- services.cloudlog.extraConfig: Any additional text to be appended to the config.php
configuration file. This is a PHP script. For configuration
settings, see <https://github.com/magicbug/Cloudlog/wiki/Cloudlog.php-Configuration-File>.

- services.cloudlog.poolConfig: Options for Cloudlog's PHP-FPM pool.

- services.cloudlog.update-clublog-scp.enable: Whether to periodically update the Clublog SCP database. If enabled,
a systemd timer will run the update task as specified by the interval
option.

- services.cloudlog.update-clublog-scp.interval: Specification (in the format described by {manpage}`systemd.time(7)`) of the time
at which the Clublog SCP update will occur.

- services.cloudlog.update-dok.enable: Whether to periodically update the DOK resource file. If enabled, a
systemd timer will run the update task as specified by the interval option.

- services.cloudlog.update-dok.interval: Specification (in the format described by {manpage}`systemd.time(7)`) of the
time at which the DOK update will occur.

- services.cloudlog.update-lotw-users.enable: Whether to periodically update the list of LoTW users. If enabled, a
systemd timer will run the update task as specified by the interval
option.

- services.cloudlog.update-lotw-users.interval: Specification (in the format described by {manpage}`systemd.time(7)`) of the
time at which the LoTW user update will occur.

- services.cloudlog.update-sota.enable: Whether to periodically update the SOTA database. If enabled, a
systemd timer will run the update task as specified by the interval option.

- services.cloudlog.update-sota.interval: Specification (in the format described by {manpage}`systemd.time(7)`) of the time
at which the SOTA update will occur.

- services.cloudlog.update-wwff.enable: Whether to periodically update the WWFF database. If enabled, a
systemd timer will run the update task as specified by the interval
option.

- services.cloudlog.update-wwff.interval: Specification (in the format described by {manpage}`systemd.time(7)`) of the time
at which the WWFF update will occur.

- services.cloudlog.upload-clublog.enable: Whether to periodically upload logs to Clublog. If enabled, a systemd
timer will run the log upload task as specified by the interval option.

- services.cloudlog.upload-clublog.interval: Specification (in the format described by {manpage}`systemd.time(7)`) of the time
at which the Clublog upload will occur.

- services.cloudlog.upload-lotw.enable: Whether to periodically upload logs to LoTW. If enabled, a systemd
timer will run the log upload task as specified by the interval
 option.

- services.cloudlog.upload-lotw.interval: Specification (in the format described by {manpage}`systemd.time(7)`) of the
time at which the LoTW upload will occur.

- services.cloudlog.upload-qrz.enable: Whether to periodically upload logs to QRZ. If enabled, a systemd
timer will run the update task as specified by the interval option.

- services.cloudlog.upload-qrz.interval: Specification (in the format described by {manpage}`systemd.time(7)`) of the
time at which the QRZ upload will occur.

- services.cloudlog.user: User account under which Cloudlog runs.
- services.cloudlog.virtualHost: Name of the nginx virtualhost to use and setup. If null, do not setup
 any virtualhost.

- services.cntlm.configText: Verbatim contents of {file}`cntlm.conf`.
- services.cntlm.domain: Proxy account domain/workgroup name.
- services.cntlm.enable: Whether to enable cntlm, which starts a local proxy.
- services.cntlm.extraConfig: Additional config appended to the end of the generated {file}`cntlm.conf`.
- services.cntlm.netbios_hostname: The hostname of your machine.

- services.cntlm.noproxy: A list of domains where the proxy is skipped.

- services.cntlm.password: Proxy account password. Note: use chmod 0600 on /etc/cntlm.password for security.
- services.cntlm.port: Specifies on which ports the cntlm daemon listens.
- services.cntlm.proxy: A list of NTLM/NTLMv2 authenticating HTTP proxies.

Parent proxy, which requires authentication. The same as proxy on the command-line, can be used more than  once  to  specify  unlimited
number  of  proxies.  Should  one proxy fail, cntlm automatically moves on to the next one. The connect request fails only if the whole
list of proxies is scanned and (for each request) and found to be invalid. Command-line takes precedence over the configuration file.

- services.cntlm.username: Proxy account name, without the possibility to include domain name ('at' sign is interpreted literally).

- services.cockpit.allowed-origins: List of allowed origins.

Maps to the WebService.Origins setting and allows merging from multiple modules.

- services.cockpit.enable: Whether to enable Cockpit.
- services.cockpit.openFirewall: Open port for cockpit.
- services.cockpit.package: The Cockpit package to use.
- services.cockpit.port: Port where cockpit will listen.
- services.cockpit.settings: Settings for cockpit that will be saved in /etc/cockpit/cockpit.conf.

See the [documentation](https://cockpit-project.org/guide/latest/cockpit.conf.5.html), that is also available with `man cockpit.conf.5` for details.

- services.cockpit.showBanner: Whether to add the Cockpit banner to the issue and motd files.
- services.cockroachdb.cache: The total size for caches.

This can be a percentage, expressed with a fraction sign or as a
decimal-point number, or any bytes-based unit. For example,
`"25%"`, `"0.25"` both represent
25% of the available system memory. The values
`"1000000000"` and `"1GB"` both
represent 1 gigabyte of memory.


- services.cockroachdb.certsDir: The path to the certificate directory.
- services.cockroachdb.enable: Whether to enable CockroachDB Server.
- services.cockroachdb.extraArgs: Extra CLI arguments passed to {command}`cockroach start`.
For the full list of supported arguments, check <https://www.cockroachlabs.com/docs/stable/cockroach-start.html#flags>

- services.cockroachdb.group: User account under which CockroachDB runs
- services.cockroachdb.http.address: Address to bind to for http-based Admin UI
- services.cockroachdb.http.port: Port to bind to for http-based Admin UI
- services.cockroachdb.insecure: Run in insecure mode.
- services.cockroachdb.join: The addresses for connecting the node to a cluster.
- services.cockroachdb.listen.address: Address to bind to for intra-cluster communication
- services.cockroachdb.listen.port: Port to bind to for intra-cluster communication
- services.cockroachdb.locality: An ordered, comma-separated list of key-value pairs that describe the
topography of the machine. Topography might include country,
datacenter or rack designations. Data is automatically replicated to
maximize diversities of each tier. The order of tiers is used to
determine the priority of the diversity, so the more inclusive
localities like country should come before less inclusive localities
like datacenter.  The tiers and order must be the same on all nodes.
Including more tiers is better than including fewer. For example:

```
    country=us,region=us-west,datacenter=us-west-1b,rack=12
    country=ca,region=ca-east,datacenter=ca-east-2,rack=4

    planet=earth,province=manitoba,colo=secondary,power=3
```

- services.cockroachdb.maxSqlMemory: The maximum in-memory storage capacity available to store temporary
data for SQL queries.

This can be a percentage, expressed with a fraction sign or as a
decimal-point number, or any bytes-based unit. For example,
`"25%"`, `"0.25"` both represent
25% of the available system memory. The values
`"1000000000"` and `"1GB"` both
represent 1 gigabyte of memory.

- services.cockroachdb.openPorts: Open firewall ports for cluster communication by default
- services.cockroachdb.package: The cockroachdb package to use. This would primarily be useful to enable Enterprise Edition features
in your own custom CockroachDB build (Nixpkgs CockroachDB binaries
only contain open source features and open source code).

- services.cockroachdb.user: User account under which CockroachDB runs
- services.code-server.auth: The type of authentication to use.

- services.code-server.disableFileDownloads: Disable file downloads from Code.

- services.code-server.disableGettingStartedOverride: Disable the coder/coder override in the Help: Getting Started page.

- services.code-server.disableTelemetry: Disable telemetry.

- services.code-server.disableUpdateCheck: Disable update check.
Without this flag, code-server checks every 6 hours against the latest github release and
then notifies you once every week that a new release is available.

- services.code-server.disableWorkspaceTrust: Disable Workspace Trust feature.

- services.code-server.enable: Whether to enable code-server.
- services.code-server.extensionsDir: Path to the extensions directory.

- services.code-server.extraArguments: Additional arguments to pass to code-server.

- services.code-server.extraEnvironment: Additional environment variables to pass to code-server.

- services.code-server.extraGroups: An array of additional groups for the `code-server` user.

- services.code-server.extraPackages: Additional packages to add to the code-server {env}`PATH`.

- services.code-server.group: The group to run code-server under.
By default, a group named `code-server` will be created.

- services.code-server.hashedPassword: Create the password with: {command}`echo -n 'thisismypassword' | nix run nixpkgs#libargon2 -- "$(head -c 20 /dev/random | base64)" -e`

- services.code-server.host: The host name or IP address the server should listen to.

- services.code-server.package: The code-server package to use.
- services.code-server.port: The port the server should listen to.

- services.code-server.proxyDomain: Domain used for proxying ports.

- services.code-server.socket: Path to a socket (bind-addr will be ignored).

- services.code-server.socketMode: File mode of the socket.

- services.code-server.user: The user to run code-server as.
By default, a user named `code-server` will be created.

- services.code-server.userDataDir: Path to the user data directory.

- services.coder.accessUrl: Access URL should be a external IP address or domain with DNS records pointing to Coder.

- services.coder.database.createLocally: Create the database and database user locally.

- services.coder.database.database: Name of database.

- services.coder.database.host: Hostname hosting the database.

- services.coder.database.password: Password for accessing the database.

- services.coder.database.sslmode: Password for accessing the database.

- services.coder.database.username: Username for accessing the database.

- services.coder.enable: Whether to enable Coder service.
- services.coder.environment.extra: Extra environment variables to pass run Coder's server with. See Coder documentation.
- services.coder.environment.file: Systemd environment file to add to Coder.
- services.coder.group: Group under which the coder service runs.

::: {.note}
If left as the default value this group will automatically be created
on system activation, otherwise it needs to be configured manually.
:::

- services.coder.homeDir: Home directory for coder user.

- services.coder.listenAddress: Listen address.

- services.coder.package: The coder package to use.
- services.coder.tlsCert: The path to the TLS certificate.

- services.coder.tlsKey: The path to the TLS key.

- services.coder.user: User under which the coder service runs.

::: {.note}
If left as the default value this user will automatically be created
on system activation, otherwise it needs to be configured manually.
:::

- services.coder.wildcardAccessUrl: If you are providing TLS certificates directly to the Coder server, you must use a single certificate for the root and wildcard domains.

- services.codimd: Alias of {option}`services.hedgedoc`.
- services.collabora-online.aliasGroups: Alias groups to use.
- services.collabora-online.enable: Whether to enable collabora-online.
- services.collabora-online.extraArgs: Extra arguments to pass to the service.
- services.collabora-online.package: The Collabora Online package to use.
- services.collabora-online.port: Listening port
- services.collabora-online.settings: Configuration for Collabora Online WebSocket Daemon, see
<https://sdk.collaboraonline.com/docs/installation/Configuration.html>, or
<https://github.com/CollaboraOnline/online/blob/master/coolwsd.xml.in> for the default
configuration.

- services.collectd.autoLoadPlugin: Enable plugin autoloading.

- services.collectd.buildMinimalPackage: Build a minimal collectd package with only the configured `services.collectd.plugins`

- services.collectd.dataDir: Data directory for collectd agent.

- services.collectd.enable: Whether to enable collectd agent.
- services.collectd.extraConfig: Extra configuration for collectd. Use mkBefore to add lines before the
default config, and mkAfter to add them below.

- services.collectd.include: Additional paths to load config from.

- services.collectd.package: The collectd package to use.
- services.collectd.plugins: Attribute set of plugin names to plugin config segments

- services.collectd.user: User under which to run collectd.

- services.collectd.validateConfig: Validate the syntax of collectd configuration file at build time.
Disable this if you use the Include directive on files unavailable in
the build sandbox, or when cross-compiling.

- services.colord.enable: Whether to enable colord, the color management daemon.
- services.commafeed.enable: Whether to enable CommaFeed.
- services.commafeed.environment: Extra environment variables passed to CommaFeed, refer to
<https://github.com/Athou/commafeed/blob/master/commafeed-server/config.yml.example>
for supported values. The default user is `admin` and the default password is `admin`.
Correct configuration for H2 database is already provided.

- services.commafeed.environmentFile: Environment file as defined in {manpage}`systemd.exec(5)`.

- services.commafeed.group: Group under which CommaFeed runs.
- services.commafeed.package: The commafeed package to use.
- services.commafeed.stateDir: Directory holding all state for CommaFeed to run.
- services.commafeed.user: User under which CommaFeed runs.
- services.compton: Alias of {option}`services.picom`.
- services.conduwuit
- services.confd.backend: Confd config storage backend to use.
- services.confd.confDir: The path to the confd configs.
- services.confd.enable: Whether to enable confd, a service to manage local application configuration files using templates and data from etcd/consul/redis/zookeeper.
- services.confd.interval: Confd check interval.
- services.confd.logLevel: Confd log level.
- services.confd.nodes: Confd list of nodes to connect to.
- services.confd.package: The confd package to use.
- services.confd.prefix: The string to prefix to keys.
- services.confd.watch: Confd, whether to watch etcd config for changes.
- services.confluence
- services.conman.config: The configuration object.

Either `configFile` or `config` must be specified.

See <https://github.com/dun/conman/wiki/Man-5-conman.conf#files>.

- services.conman.configFile: The absolute path to the configuration file.

Either `configFile` or `config` must be specified.

See <https://github.com/dun/conman/wiki/Man-5-conman.conf#files>.

- services.conman.enable: Whether to enable Enable the conman Console manager.

Either `configFile` or `config` must be specified.
.
- services.conman.package: The conman package to use.
- services.connman.enable: Whether to use ConnMan for managing your network connections.

- services.connman.enableVPN: Whether to enable ConnMan VPN service.

- services.connman.extraConfig: Configuration lines appended to the generated connman configuration file.

- services.connman.extraFlags: Extra flags to pass to connmand

- services.connman.networkInterfaceBlacklist: Default blacklisted interfaces, this includes NixOS containers interfaces (ve).

- services.connman.package: The connman package / build flavor
- services.connman.wifi.backend: Specify the Wi-Fi backend used.
Currently supported are {option}`wpa_supplicant` or {option}`iwd`.

- services.consul.alerts.consulAddr: Consul api listening address
- services.consul.alerts.enable: Whether to enable consul-alerts.
- services.consul.alerts.listenAddr: Api listening address.
- services.consul.alerts.package: The consul-alerts package to use.
- services.consul.alerts.watchChecks: Whether to enable check watcher.
- services.consul.alerts.watchEvents: Whether to enable event watcher.
- services.consul.dropPrivileges: Whether the consul agent should be run as a non-root consul user.

- services.consul.enable: Enables the consul daemon.

- services.consul.extraConfig: Extra configuration options which are serialized to json and added
to the config.json file.

- services.consul.extraConfigFiles: Additional configuration files to pass to consul
NOTE: These will not trigger the service to be restarted when altered.

- services.consul.forceAddrFamily: Whether to bind ipv4/ipv6 or both kind of addresses.

- services.consul.forceIpv4: Deprecated: Use consul.forceAddrFamily instead.
Whether we should force the interfaces to only pull ipv4 addresses.

- services.consul.interface.advertise: The name of the interface to pull the advertise_addr from.

- services.consul.interface.bind: The name of the interface to pull the bind_addr from.

- services.consul.leaveOnStop: If enabled, causes a leave action to be sent when closing consul.
This allows a clean termination of the node, but permanently removes
it from the cluster. You probably don't want this option unless you
are running a node which going offline in a permanent / semi-permanent
fashion.

- services.consul.package: The consul package to use.
- services.consul.webUi: Enables the web interface on the consul http port.

- services.consul-template.instances: Attribute set of consul-template instances.
Creates independent `consul-template-${name}.service` systemd units for each instance defined here.

- services.convos.enable: Whether to enable Convos.
- services.convos.listenAddress: Address or host the web interface should listen on
- services.convos.listenPort: Port the web interface should listen on
- services.convos.reverseProxy: Enables reverse proxy support. This will allow Convos to automatically
pick up the `X-Forwarded-For` and
`X-Request-Base` HTTP headers set in your reverse proxy
web server. Note that enabling this option without a reverse proxy in
front will be a security issue.

- services.cook-cli.autoStart: Whether to start cook-cli server automatically.

- services.cook-cli.basePath: Path to the directory cook-cli will look for recipes.

- services.cook-cli.enable: Whether to enable cook-cli.
- services.cook-cli.openFirewall: Whether to open the cook-cli server port in the firewall.

- services.cook-cli.package: The cook-cli package to use.
- services.cook-cli.port: Which port cook-cli server will use.

- services.coredns.config: Verbatim Corefile to use.
See <https://coredns.io/manual/toc/#configuration> for details.

- services.coredns.enable: Whether to enable Coredns dns server.
- services.coredns.extraArgs: Extra arguments to pass to coredns.
- services.coredns.package: The coredns package to use.
- services.corerad.configFile: Path to CoreRAD TOML configuration file.
- services.corerad.enable: Whether to enable CoreRAD IPv6 NDP RA daemon.
- services.corerad.package: The corerad package to use.
- services.corerad.settings: Configuration for CoreRAD, see <https://github.com/mdlayher/corerad/blob/main/internal/config/reference.toml>
for supported values. Ignored if configFile is set.

- services.corosync.clusterName: Name of the corosync cluster.
- services.corosync.enable: Whether to enable corosync.
- services.corosync.extraOptions: Additional options with which to start corosync.
- services.corosync.nodelist: Corosync nodelist: all cluster members.
- services.corosync.package: The corosync package to use.
- services.corteza.address: IP for the HTTP server.

- services.corteza.enable: Whether to enable Corteza, a low-code platform.
- services.corteza.group: The group to run Corteza under.
- services.corteza.openFirewall: Whether to open ports in the firewall.
- services.corteza.package: The corteza package to use.
- services.corteza.port: Port for the HTTP server.

- services.corteza.settings: Configuration for Corteza, will be passed as environment variables.
See <https://docs.cortezaproject.org/corteza-docs/2024.9/devops-guide/references/configuration/server.html>.

- services.corteza.user: The user to run Corteza under.
- services.coturn.alt-listening-port: Alternative listening port for UDP and TCP listeners;
default (or zero) value means "listening port plus one".
This is needed for RFC 5780 support
(STUN extension specs, NAT behavior discovery). The TURN Server
supports RFC 5780 only if it is started with more than one
listening IP address of the same family (IPv4 or IPv6).
RFC 5780 is supported only by UDP protocol, other protocols
are listening to that endpoint only for "symmetry".

- services.coturn.alt-tls-listening-port: Alternative listening port for TLS and DTLS protocols.

- services.coturn.cert: Certificate file in PEM format.

- services.coturn.cli-ip: Local system IP address to be used for CLI server endpoint.

- services.coturn.cli-password: CLI access password.
For the security reasons, it is recommended to use the encrypted
for of the password (see the -P command in the turnadmin utility).

- services.coturn.cli-port: CLI server port.

- services.coturn.dh-file: Use custom DH TLS key, stored in PEM format in the file.

- services.coturn.enable: Whether to enable coturn TURN server.
- services.coturn.extraConfig: Additional configuration options
- services.coturn.listening-ips: Listener IP addresses of relay server.
If no IP(s) specified in the config file or in the command line options,
then all IPv4 and IPv6 system IPs will be used for listening.

- services.coturn.listening-port: TURN listener port for UDP and TCP.
Note: actually, TLS and DTLS sessions can connect to the
"plain" TCP and UDP port(s), too - if allowed by configuration.

- services.coturn.lt-cred-mech: Use long-term credential mechanism.

- services.coturn.max-port: Upper bound of UDP relay endpoints

- services.coturn.min-port: Lower bound of UDP relay endpoints

- services.coturn.no-auth: This option is opposite to lt-cred-mech.
(TURN Server with no-auth option allows anonymous access).
If neither option is defined, and no users are defined,
then no-auth is default. If at least one user is defined,
in this file or in command line or in usersdb file, then
lt-cred-mech is default.

- services.coturn.no-cli: Turn OFF the CLI support.

- services.coturn.no-dtls: Disable DTLS client listener
- services.coturn.no-tcp: Disable TCP client listener
- services.coturn.no-tcp-relay: Disable TCP relay endpoints
- services.coturn.no-tls: Disable TLS client listener
- services.coturn.no-udp: Disable UDP client listener
- services.coturn.no-udp-relay: Disable UDP relay endpoints
- services.coturn.pkey: Private key file in PEM format.

- services.coturn.realm: The default realm to be used for the users when no explicit
origin/realm relationship was found in the database, or if the TURN
server is not using any database (just the commands-line settings
and the userdb file). Must be used with long-term credentials
mechanism or with TURN REST API.

- services.coturn.relay-ips: Relay address (the local IP address that will be used to relay the
packets to the peer).
Multiple relay addresses may be used.
The same IP(s) can be used as both listening IP(s) and relay IP(s).

If no relay IP(s) specified, then the turnserver will apply the default
policy: it will decide itself which relay addresses to be used, and it
will always be using the client socket IP address as the relay IP address
of the TURN session (if the requested relay address family is the same
as the family of the client socket).

- services.coturn.secure-stun: Require authentication of the STUN Binding request.
By default, the clients are allowed anonymous access to the STUN Binding functionality.

- services.coturn.static-auth-secret: 'Static' authentication secret value (a string) for TURN REST API only.
If not set, then the turn server
will try to use the 'dynamic' value in turn_secret table
in user database (if present). The database-stored  value can be changed on-the-fly
by a separate program, so this is why that other mode is 'dynamic'.

- services.coturn.static-auth-secret-file: Path to the file containing the static authentication secret.

- services.coturn.tls-listening-port: TURN listener port for TLS.
Note: actually, "plain" TCP and UDP sessions can connect to the TLS and
DTLS port(s), too - if allowed by configuration. The TURN server
"automatically" recognizes the type of traffic. Actually, two listening
endpoints (the "plain" one and the "tls" one) are equivalent in terms of
functionality; but we keep both endpoints to satisfy the RFC 5766 specs.
For secure TCP connections, we currently support SSL version 3 and
TLS version 1.0, 1.1 and 1.2.
For secure UDP connections, we support DTLS version 1.

- services.coturn.use-auth-secret: TURN REST API flag.
Flag that sets a special authorization option that is based upon authentication secret.
This feature can be used with the long-term authentication mechanism, only.
This feature purpose is to support "TURN Server REST API", see
"TURN REST API" link in the project's page
<https://github.com/coturn/coturn/>

This option is used with timestamp:

usercombo -> "timestamp:userid"
turn user -> usercombo
turn password -> base64(hmac(secret key, usercombo))

This allows TURN credentials to be accounted for a specific user id.
If you don't have a suitable id, the timestamp alone can be used.
This option is just turning on secret-based authentication.
The actual value of the secret is defined either by option static-auth-secret,
or can be found in the turn_secret table in the database.

- services.couchdb.adminPass: Couchdb (i.e. fauxton) account with permission for all dbs and
tasks.

- services.couchdb.adminUser: Couchdb (i.e. fauxton) account with permission for all dbs and
tasks.

- services.couchdb.argsFile: vm.args configuration. Overrides Couchdb's Erlang VM parameters file.

- services.couchdb.bindAddress: Defines the IP address by which CouchDB will be accessible.

- services.couchdb.configFile: Configuration file for persisting runtime changes. File
needs to be readable and writable from couchdb user/group.

- services.couchdb.databaseDir: Specifies location of CouchDB database files (*.couch named). This
location should be writable and readable for the user the CouchDB
service runs as (couchdb by default).

- services.couchdb.enable: Whether to enable CouchDB Server.
- services.couchdb.extraConfig: Extra configuration options for CouchDB
- services.couchdb.extraConfigFiles: Extra configuration files. Overrides any other configuration. You can use this to setup the Admin user without putting the password in your nix store.

- services.couchdb.group: Group account under which couchdb runs.

- services.couchdb.logFile: Specifies the location of file for logging output.

- services.couchdb.package: The couchdb3 package to use.
- services.couchdb.port: Defined the port number to listen.

- services.couchdb.uriFile: This file contains the full URI that can be used to access this
instance of CouchDB. It is used to help discover the port CouchDB is
running on (if it was set to 0 (e.g. automatically assigned any free
one). This file should be writable and readable for the user that
runs the CouchDB service (couchdb by default).

- services.couchdb.user: User account under which couchdb runs.

- services.couchdb.viewIndexDir: Specifies location of CouchDB view index files. This location should
be writable and readable for the user that runs the CouchDB service
(couchdb by default).

- services.couchpotato
- services.cpuminer-cryptonight.enable: Whether to enable the cpuminer cryptonight miner.

- services.cpuminer-cryptonight.pass: Password for mining server
- services.cpuminer-cryptonight.threads: Number of miner threads, defaults to available processors
- services.cpuminer-cryptonight.url: URL of mining server
- services.cpuminer-cryptonight.user: Username for mining server
- services.cpupower-gui.enable: Enables dbus/systemd service needed by cpupower-gui.
These services are responsible for retrieving and modifying cpu power
saving settings.

- services.crab-hole.configFile: The config file of crab-hole.

If files are added via url, make sure the service has access to them.
Setting this option will override any configuration applied by the settings option.

- services.crab-hole.enable: Whether to enable Crab-hole Service.
- services.crab-hole.package: The crab-hole package to use.
- services.crab-hole.settings: Crab-holes config. See big example <https://github.com/LuckyTurtleDev/crab-hole/blob/main/example-config.toml>
- services.crab-hole.supplementaryGroups: Adds additional groups to the crab-hole service. Can be useful to prevent permission issues.
- services.crabfit.api.environment: Environment variables for the crabfit API.

- services.crabfit.api.host: The hostname of the API.

- services.crabfit.api.package: The crabfit-api package to use.
- services.crabfit.api.port: The internal listening port of the API.

- services.crabfit.enable: Whether to enable Crab Fit, a meeting scheduler based on peoples' availability.
- services.crabfit.frontend.environment: Environment variables for the crabfit frontend.

- services.crabfit.frontend.finalDrv: The patched frontend, using the correct urls for the API and frontend.

- services.crabfit.frontend.host: The hostname of the frontend.

- services.crabfit.frontend.package: The crabfit-frontend package to use.
- services.crabfit.frontend.port: The internal listening port of the frontend.

- services.create_ap.enable: Whether to enable setting up wifi hotspots using create_ap.
- services.create_ap.settings: Configuration for `create_ap`.
See [upstream example configuration](https://raw.githubusercontent.com/lakinduakash/linux-wifi-hotspot/master/src/scripts/create_ap.conf)
for supported values.

- services.croc.debug: Whether to enable debug logs.
- services.croc.enable: Whether to enable croc relay.
- services.croc.openFirewall: Whether to enable opening of the peer port(s) in the firewall.
- services.croc.pass: Password or passwordfile for the relay.
- services.croc.ports: Ports of the relay.
- services.cron.cronFiles: A list of extra crontab files that will be read and appended to the main
crontab file when the cron service starts.

- services.cron.enable: Whether to enable the Vixie cron daemon.
- services.cron.mailto: Email address to which job output will be mailed.
- services.cron.systemCronJobs: A list of Cron jobs to be appended to the system-wide
crontab.  See the manual page for crontab for the expected
format. If you want to get the results mailed you must setuid
sendmail. See {option}`security.wrappers`

If neither /var/cron/cron.deny nor /var/cron/cron.allow exist only root
is allowed to have its own crontab file. The /var/cron/cron.deny file
is created automatically for you, so every user can use a crontab.

Many nixos modules set systemCronJobs, so if you decide to disable vixie cron
and enable another cron daemon, you may want it to get its system crontab
based on systemCronJobs.

- services.cross-seed.configDir: Cross-seed config directory
- services.cross-seed.enable: Whether to enable cross-seed.
- services.cross-seed.group: Group to run cross-seed as.
- services.cross-seed.package: The cross-seed package to use.
- services.cross-seed.settings: Configuration options for cross-seed.

Secrets should not be set in this option, as they will be available in
the Nix store. For secrets, please use settingsFile.

For more details, see [the cross-seed documentation](https://www.cross-seed.org/docs/basics/options).

- services.cross-seed.settingsFile: Path to a JSON file containing settings that will be merged with the
settings option. This is suitable for storing secrets, as they will not
be exposed on the Nix store.

- services.cross-seed.useGenConfigDefaults: Whether to use the option defaults from the configuration generated by
{command}`cross-seed gen-config`.

Those are the settings recommended by the project, and can be inspected
from their [template file](https://github.com/cross-seed/cross-seed/blob/master/src/config.template.cjs).

Settings set in {option}`services.cross-seed.settings` and
{option}`services.cross-seed.settingsFile` will override the ones from
this option.

- services.cross-seed.user: User to run cross-seed as.
- services.crossfire-server.configFiles: Text to append to the corresponding configuration files. Note that the
files given in the example are *not* the complete set of files available
to customize; look in /etc/crossfire after enabling the server to see
the available files, and read the comments in each file for detailed
documentation on the format and what settings are available.

Note that the motd, rules, and news files, if configured here, will
overwrite the example files that come with the server, rather than being
appended to them as the other configuration files are.

- services.crossfire-server.dataDir: Where to load readonly data from -- maps, archetypes, treasure tables,
and the like. If you plan to edit the data on the live server (rather
than overlaying the crossfire-maps and crossfire-arch packages and
nixos-rebuilding), point this somewhere read-write and copy the data
there before starting the server.

- services.crossfire-server.enable: If enabled, the Crossfire game server will be started at boot.

- services.crossfire-server.openFirewall: Whether to open ports in the firewall for the server.

- services.crossfire-server.package: The crossfire-server package to use. ::: {.note}
This will also be used for map/arch data, if you don't change {option}`dataDir`
:::

- services.crossfire-server.stateDir: Where to store runtime data (save files, persistent items, etc).

If left at the default, this will be automatically created on server
startup if it does not already exist. If changed, it is the admin's
responsibility to make sure that the directory exists and is writeable
by the `crossfire` user.

- services.crowd
- services.crowdsec.autoUpdateService: Whether to enable if `true` `cscli hub update` will be executed daily. See `https://docs.crowdsec.net/docs/cscli/cscli_hub_update/` for more information.
- services.crowdsec.enable: Whether to enable CrowdSec Security Engine.
- services.crowdsec.group: The group to run crowdsec as
- services.crowdsec.hub: Hub collections, parsers, AppSec rules, etc.

- services.crowdsec.localConfig: The configuration for a crowdsec security engine.

- services.crowdsec.name: Name of the machine when registering it at the central or local api.

- services.crowdsec.openFirewall: Whether to automatically open firewall ports for `crowdsec`.

- services.crowdsec.package: The crowdsec package to use.
- services.crowdsec.settings: Set of various configuration attributes

- services.crowdsec.user: The user to run crowdsec as
- services.cryptpad.configureNginx: Configure Nginx as a reverse proxy for Cryptpad.
Note that this makes some assumptions on your setup, and sets settings that will
affect other virtualHosts running on your Nginx instance, if any.
Alternatively you can configure a reverse-proxy of your choice.

- services.cryptpad.enable: Whether to enable cryptpad.
- services.cryptpad.package: The cryptpad package to use.
- services.cryptpad.settings: Cryptpad configuration settings.
See <https://github.com/cryptpad/cryptpad/blob/main/config/config.example.js> for a more extensive
reference documentation.
Test your deployed instance through `https://<domain>/checkup/`.

- services.cyrus-imap.cyrusConfigFile: Path to the configuration file used for Cyrus.
- services.cyrus-imap.cyrusSettings: Cyrus configuration settings. See [cyrus.conf(5)](https://www.cyrusimap.org/imap/reference/manpages/configs/cyrus.conf.html)
- services.cyrus-imap.debug: Whether to enable debugging messages for the Cyrus master process.
- services.cyrus-imap.enable: Whether to enable Cyrus IMAP, an email, contacts and calendar server.
- services.cyrus-imap.group: Cyrus IMAP group name. If this is not set, a group named `cyrus` will be created.
- services.cyrus-imap.imapdConfigFile: Path to the configuration file used for cyrus-imap.
- services.cyrus-imap.imapdSettings: IMAP configuration settings. See [imapd.conf(5)](https://www.cyrusimap.org/imap/reference/manpages/configs/imapd.conf.html)
- services.cyrus-imap.listenQueue: Socket listen queue backlog size. See {manpage}`listen(2)` for more information about a backlog.
Default is 32, which may be increased if you have a very high connection rate.

- services.cyrus-imap.sslCACert: Alias of {option}`services.cyrus-imap.imapdSettings.tls_client_ca_file`.
- services.cyrus-imap.sslServerCert: Alias of {option}`services.cyrus-imap.imapdSettings.tls_server_cert`.
- services.cyrus-imap.sslServerKey: Alias of {option}`services.cyrus-imap.imapdSettings.tls_server_key`.
- services.cyrus-imap.tmpDBDir: Location where DB files are stored.
Databases in this directory are recreated upon startup, so ideally they should live in ephemeral storage for best performance.

- services.cyrus-imap.user: Cyrus IMAP user name. If this is not set, a user named `cyrus` will be created.
- services.dae.assets: Assets required to run dae.

- services.dae.assetsPath: The path which contains geolocation database.
This option will override `assets`.

- services.dae.config: WARNING: This option will expose store your config unencrypted world-readable in the nix store.
Config text for dae.

See <https://github.com/daeuniverse/dae/blob/main/example.dae>.

- services.dae.configFile: The path of dae config file, end with `.dae`.

- services.dae.disableTxChecksumIpGeneric: See <https://github.com/daeuniverse/dae/issues/43>
- services.dae.enable: Whether to enable dae, a Linux high-performance transparent proxy solution based on eBPF.
- services.dae.openFirewall: Open the firewall port.

- services.dae.package: The dae package to use.
- services.dante.config: Contents of Dante's configuration file.
NOTE: user.privileged, user.unprivileged and logoutput are set by the service.

- services.dante.enable: Whether to enable Dante SOCKS proxy.
- services.darkhttpd.address: Address to listen on.
Pass `all` to listen on all interfaces.

- services.darkhttpd.enable: Whether to enable DarkHTTPd web server.
- services.darkhttpd.extraArgs: Additional configuration passed to the executable.

- services.darkhttpd.hideServerId: Don't identify the server type in headers or directory listings.

- services.darkhttpd.port: Port to listen on.
Pass 0 to let the system choose any free port for you.

- services.darkhttpd.rootDir: Path from which to serve files.

- services.das_watchdog.enable: Whether to enable realtime watchdog.
- services.dashy.enable: Whether to enable Dashy, a highly customizable, easy to use, privacy-respecting dashboard app.

Note that this builds a static web app as opposed to running a full node server, unlike the default docker image.

Writing config changes to disk through the UI, triggering a rebuild through the UI and application status checks are
unavailable without the node server; Everything else will work fine.

See the deployment docs for [building from source](https://dashy.to/docs/deployment#build-from-source), [hosting with a CDN](https://dashy.to/docs/deployment#hosting-with-cdn) and [CDN cloud deploy](https://dashy.to/docs/deployment#cdn--cloud-deploy) for more information.
.
- services.dashy.finalDrv: Final derivation containing the fully built static files

- services.dashy.package: The dashy-ui package to use.
- services.dashy.settings: Settings serialized into `user-data/conf.yml` before build.
If left empty, the default configuration shipped with the package will be used instead.

Note that the full configuration will be written to the nix store as world readable, which may include secrets such as [password hashes](https://dashy.to/docs/configuring#appconfigauthusers-optional).

To add files such as icons or backgrounds, you can reference them in line such as
```nix
icon = "$\{./icon.png}";
```
This will add the file to the nix store upon build, referencing it by file path as expected by Dashy.

- services.dashy.virtualHost.domain: Domain to use for the virtual host.

This can be used to change nginx options like
```nix
services.nginx.virtualHosts."$\{config.services.dashy.virtualHost.domain}".listen = [ ... ]
```
or
```nix
services.nginx.virtualHosts."example.com".listen = [ ... ]
```

- services.dashy.virtualHost.enableNginx: Whether to enable a virtualhost to serve dashy through nginx.
- services.datadog-agent.apiKeyFile: Path to a file containing the Datadog API key to associate the
agent with your account.

- services.datadog-agent.checks: Configuration for all Datadog checks. Keys of this attribute
set will be used as the name of the check to create the
appropriate configuration in `conf.d/$check.d/conf.yaml`.

The configuration is converted into JSON from the plain Nix
language configuration, meaning that you should write
configuration adhering to Datadog's documentation - but in Nix
language.

Refer to the implementation of this module (specifically the
definition of `defaultChecks`) for an example.

Note: The 'disk' and 'network' check are configured in
separate options because they exist by default. Attempting to
override their configuration here will have no effect.

- services.datadog-agent.ddUrl: Custom dd_url to configure the agent with. Useful if traffic to datadog
needs to go through a proxy.
Don't use this to point to another datadog site (EU) - use site instead.

- services.datadog-agent.diskCheck: Disk check config
- services.datadog-agent.enable: Whether to enable Datadog-agent v7 monitoring service.
- services.datadog-agent.enableLiveProcessCollection: Whether to enable the live process collection agent.

- services.datadog-agent.enableTraceAgent: Whether to enable the trace agent.

- services.datadog-agent.extraConfig: Extra configuration options that will be merged into the
main config file {file}`datadog.yaml`.

- services.datadog-agent.extraIntegrations: Extra integrations from the Datadog core-integrations
repository that should be built and included.

By default the included integrations are disk, mongo, network,
nginx and postgres.

To include additional integrations the name of the derivation
and a function to filter its dependencies from the Python
package set must be provided.

- services.datadog-agent.hostname: The hostname to show in the Datadog dashboard (optional)
- services.datadog-agent.logLevel: Logging verbosity.
- services.datadog-agent.networkCheck: Network check config
- services.datadog-agent.package: The datadog-agent package to use. ::: {.note}
The provided package is expected to have an overridable `pythonPackages`-attribute
which configures the Python environment with the Datadog checks.
:::

- services.datadog-agent.processAgentPackage: Which DataDog v7 agent package to use. Note that the provided
package is expected to have an overridable `pythonPackages`-attribute
which configures the Python environment with the Datadog
checks.

- services.datadog-agent.site: The datadog site to point the agent towards.
Set to datadoghq.eu to point it to their EU site.

- services.datadog-agent.tags: The tags to mark this Datadog agent
- services.davfs2.davGroup: The group of the running mount.davfs daemon. Ordinary users must be
member of this group in order to mount a davfs2 file system. Value must
be given as name, not as numerical id.

- services.davfs2.davUser: When invoked by root the mount.davfs daemon will run as this user.
Value must be given as name, not as numerical id.

- services.davfs2.enable: Whether to enable davfs2.
- services.davfs2.extraConfig
- services.davfs2.settings: Extra settings appended to the configuration of davfs2.
See {manpage}`davfs2.conf(5)` for available settings.

- services.davis.adminLogin: Username for the admin account.

- services.davis.adminPasswordFile: The full path to a file that contains the admin's password. Must be
readable by the user.

- services.davis.appSecretFile: A file containing the Symfony APP_SECRET - Its value should be a series
of characters, numbers and symbols chosen randomly and the recommended
length is around 32 characters. Can be generated with <code>cat
/dev/urandom | tr -dc a-zA-Z0-9 | fold -w 48 | head -n 1</code>.

- services.davis.config
- services.davis.dataDir: Davis data directory.

- services.davis.database.createLocally: Create the database and database user locally.
- services.davis.database.driver: Database type, required in all circumstances.
- services.davis.database.name: Database name, only used when the databse is created locally.
- services.davis.database.urlFile: A file containing the database connection url. If set then it
overrides all other database settings (except driver). This is
mandatory if you want to use an external database, that is when
`services.davis.database.createLocally` is `false`.

- services.davis.enable: Whether to enable Davis is a caldav and carddav server.
- services.davis.group: Group davis runs as.
- services.davis.hostname: Domain of the host to serve davis under. You may want to change it if you
run Davis on a different URL than davis.yourdomain.

- services.davis.mail.dsn: Mail DSN for sending emails. Mutually exclusive with `services.davis.mail.dsnFile`.
- services.davis.mail.dsnFile: A file containing the mail DSN for sending emails.  Mutually exclusive with `servies.davis.mail.dsn`.
- services.davis.mail.inviteFromAddress: Email address to send invitations from.
- services.davis.nginx: Use this option to customize an nginx virtual host. To disable the nginx set this to null.

- services.davis.package: The davis package to use.
- services.davis.poolConfig: Options for the davis PHP pool. See the documentation on <literal>php-fpm.conf</literal>
for details on configuration directives.

- services.davis.user: User davis runs as.
- services.davmail.config: Davmail configuration. Refer to
<http://davmail.sourceforge.net/serversetup.html>
and <http://davmail.sourceforge.net/advanced.html>
for details on supported values.

- services.davmail.enable: Whether to enable davmail, an MS Exchange gateway.
- services.davmail.url: Outlook Web Access URL to access the exchange server, i.e. the base webmail URL.
- services.db-rest.enable: Whether to enable db-rest service.
- services.db-rest.group: Group under which db-rest runs.
- services.db-rest.host: The host address the db-rest server should listen on.
- services.db-rest.package: The db-rest package to use.
- services.db-rest.port: The port the db-rest server should listen on.
- services.db-rest.redis.createLocally: Configure a local redis server for db-rest.
- services.db-rest.redis.enable: Enable caching with redis for db-rest.
- services.db-rest.redis.host: Redis host.
- services.db-rest.redis.passwordFile: Path to a file containing the redis password.
- services.db-rest.redis.port: Redis port.
- services.db-rest.redis.useSSL: Use SSL if using a redis network connection.
- services.db-rest.redis.user: Optional username used for authentication with redis.
- services.db-rest.user: User account under which db-rest runs.
- services.dbus.apparmor: AppArmor mode for dbus.

`enabled` enables mediation when it's
supported in the kernel, `disabled`
always disables AppArmor even with kernel support, and
`required` fails when AppArmor was not found
in the kernel.

- services.dbus.brokerPackage: The dbus-broker package to use.
- services.dbus.dbusPackage: The dbus package to use.
- services.dbus.enable: Whether to start the D-Bus message bus daemon, which is
required by many other system services and applications.

- services.dbus.implementation: The implementation to use for the message bus defined by the D-Bus specification.
Can be either the classic dbus daemon or dbus-broker, which aims to provide high
performance and reliability, while keeping compatibility to the D-Bus
reference implementation.

- services.dbus.packages: Packages whose D-Bus configuration files should be included in
the configuration of the D-Bus system-wide or session-wide
message bus.  Specifically, files in the following directories
will be included into their respective DBus configuration paths:
{file}`«pkg»/etc/dbus-1/system.d`
{file}`«pkg»/share/dbus-1/system.d`
{file}`«pkg»/share/dbus-1/system-services`
{file}`«pkg»/etc/dbus-1/session.d`
{file}`«pkg»/share/dbus-1/session.d`
{file}`«pkg»/share/dbus-1/services`

- services.dd-agent
- services.ddccontrol.enable: Whether to enable ddccontrol for controlling displays.
- services.ddclient.configFile: Path to configuration file.
When set this overrides the generated configuration from module options.

- services.ddclient.domain
- services.ddclient.domains: Domain name(s) to synchronize.

- services.ddclient.enable: Whether to synchronise your machine's IP address with a dynamic DNS provider (e.g. dyndns.org).

- services.ddclient.extraConfig: Extra configuration. Contents will be added verbatim to the configuration file.

::: {.note}
`daemon` should not be added here because it does not work great with the systemd-timer approach the service uses.
:::

- services.ddclient.homeDir
- services.ddclient.interval: The interval at which to run the check and update.
See {command}`man 7 systemd.time` for the format.

- services.ddclient.ipv6
- services.ddclient.package: The ddclient executable package run by the service.

- services.ddclient.password
- services.ddclient.passwordFile: A file containing the password or a TSIG key in named format when using the nsupdate protocol.

- services.ddclient.protocol: Protocol to use with dynamic DNS provider (see <https://ddclient.net/protocols.html> ).

- services.ddclient.quiet: Print no messages for unnecessary updates.

- services.ddclient.script: script as required by some providers.

- services.ddclient.secretsFile: A file containing the secrets for the dynamic DNS provider.
This file should contain lines of valid secrets in the format specified by the ddclient documentation.
If this option is set, it overrides the `passwordFile` option.

- services.ddclient.server: Server address.

- services.ddclient.ssl: Whether to use SSL/TLS to connect to dynamic DNS provider.

- services.ddclient.use: Method to determine the IP address to send to the dynamic DNS provider.

- services.ddclient.username: User name.

- services.ddclient.usev4: Method to determine the IPv4 address to send to the dynamic DNS provider. Only used if `use` is not set.

- services.ddclient.usev6: Method to determine the IPv6 address to send to the dynamic DNS provider. Only used if `use` is not set.

- services.ddclient.verbose: Print verbose information.

- services.ddclient.zone: zone as required by some providers.

- services.ddns-updater.enable: Whether to enable Container to update DNS records periodically with WebUI for many DNS providers.
- services.ddns-updater.environment: Environment variables to be set for the ddns-updater service. DATADIR is ignored to enable using systemd DynamicUser. For full list see <https://github.com/qdm12/ddns-updater>
- services.ddns-updater.package: The ddns-updater package to use.
- services.deconz.allowRebootSystem: Whether to enable rebooting the system.
- services.deconz.allowRestartService: Whether to enable killing/restarting processes.
- services.deconz.allowSetSystemTime: Whether to enable setting the system time.
- services.deconz.device: Force deCONZ to use a specific USB device (e.g. /dev/ttyACM0). By
default it does a search.

- services.deconz.enable: Whether to enable deCONZ, a Zigbee gateway for use with ConBee/RaspBee hardware (https://phoscon.de/).
- services.deconz.extraArgs: Extra command line arguments for deCONZ, see
<https://github.com/dresden-elektronik/deconz-rest-plugin/wiki/deCONZ-command-line-parameters>.

- services.deconz.httpPort: TCP port for the web server.
- services.deconz.listenAddress: Pin deCONZ to the network interface specified through the provided IP
address. This applies for the webserver as well as the websocket
notifications.

- services.deconz.openFirewall: Whether to enable opening up the service ports in the firewall.
- services.deconz.package: The deconz package to use.
- services.deconz.wsPort: TCP port for the WebSocket.
- services.deepin
- services.deluge.authFile: The file managing the authentication for deluge, the format of this
file is straightforward, each line contains a
username:password:level tuple in plaintext. It only has an effect
when {option}`services.deluge.declarative` is set to
`true`.
See <https://dev.deluge-torrent.org/wiki/UserGuide/Authentication> for
more information.

- services.deluge.config: Deluge core configuration for the core.conf file. Only has an effect
when {option}`services.deluge.declarative` is set to
`true`. String values must be quoted, integer and
boolean values must not. See
<https://git.deluge-torrent.org/deluge/tree/deluge/core/preferencesmanager.py#n41>
for the available options.

- services.deluge.dataDir: The directory where deluge will create files.

- services.deluge.declarative: Whether to use a declarative deluge configuration.
Only if set to `true`, the options
{option}`services.deluge.config`,
{option}`services.deluge.openFirewall` and
{option}`services.deluge.authFile` will be
applied.

- services.deluge.enable: Whether to enable Deluge daemon.
- services.deluge.extraPackages: Extra packages available at runtime to enable Deluge's plugins. For example,
extraction utilities are required for the built-in "Extractor" plugin.
This always contains unzip, gnutar, xz and bzip2.

- services.deluge.group: Group under which deluge runs.

- services.deluge.openFilesLimit: Number of files to allow deluged to open.

- services.deluge.openFirewall: Whether to open the firewall for the ports in
{option}`services.deluge.config.listen_ports`. It only takes effet if
{option}`services.deluge.declarative` is set to
`true`.

It does NOT apply to the daemon port nor the web UI port. To access those
ports securely check the documentation
<https://dev.deluge-torrent.org/wiki/UserGuide/ThinClient#CreateSSHTunnel>
or use a VPN or configure certificates for deluge.

- services.deluge.package: The deluge-2_x package to use.
- services.deluge.user: User account under which deluge runs.

- services.deluge.web.enable: Whether to enable Deluge Web daemon.
- services.deluge.web.openFirewall: Open ports in the firewall for deluge web daemon

- services.deluge.web.port: Deluge web UI port.

- services.dendrite.enable: Whether to enable matrix.org dendrite.
- services.dendrite.environmentFile: Environment file as defined in {manpage}`systemd.exec(5)`.
Secrets may be passed to the service without adding them to the world-readable
Nix store, by specifying placeholder variables as the option value in Nix and
setting these variables accordingly in the environment file. Currently only used
for the registration secret to allow secure registration when
client_api.registration_disabled is true.

```
  # snippet of dendrite-related config
  services.dendrite.settings.client_api.registration_shared_secret = "$REGISTRATION_SHARED_SECRET";
```

```
  # content of the environment file
  REGISTRATION_SHARED_SECRET=verysecretpassword
```

Note that this file needs to be available on the host on which
`dendrite` is running.

- services.dendrite.httpPort: The port to listen for HTTP requests on.

- services.dendrite.httpsPort: The port to listen for HTTPS requests on.

- services.dendrite.loadCredential: This can be used to pass secrets to the systemd service without adding them to
the nix store.
To use the example setting, see the example of
{option}`services.dendrite.settings.global.private_key`.
See the LoadCredential section of systemd.exec manual for more information.

- services.dendrite.openRegistration: Allow open registration without secondary verification (reCAPTCHA).

- services.dendrite.settings: Configuration for dendrite, see:
<https://github.com/matrix-org/dendrite/blob/main/dendrite-sample.yaml>
for available options with which to populate settings.

- services.dendrite.tlsCert: The path to the TLS certificate.

```
  nix-shell -p dendrite --command "generate-keys --tls-cert server.crt --tls-key server.key"
```

- services.dendrite.tlsKey: The path to the TLS key.

```
  nix-shell -p dendrite --command "generate-keys --tls-cert server.crt --tls-key server.key"
```

- services.dependency-track.database
- services.dependency-track.enable: Whether to enable dependency-track.
- services.dependency-track.frontend.baseUrl: The base URL of the API server.

NOTE:
* This URL must be reachable by the browsers of your users.
* The frontend container itself does NOT communicate with the API server directly, it just serves static files.
* When deploying to dedicated servers, please use the external IP or domain of the API server.

- services.dependency-track.javaArgs: Java options passed to JVM. Configuring this is usually not necessary, but for small systems
it can be useful to tweak the JVM heap size.

- services.dependency-track.ldap.bindPasswordFile: The path to a file containing the LDAP bind password.

- services.dependency-track.logLevel: Log level for dependency-track
- services.dependency-track.nginx.domain: The domain name under which to set up the virtual host.

- services.dependency-track.nginx.enable: Whether to set up an nginx virtual host.

- services.dependency-track.oidc.clientId: Defines the client ID for OpenID Connect.

- services.dependency-track.oidc.enable: Whether to enable oidc support.
- services.dependency-track.oidc.flow: Specifies the OpenID Connect flow to use.
Values other than "implicit" will result in the Code+PKCE flow to be used.
Usage of the implicit flow is strongly discouraged, but may be necessary when
the IdP of choice does not support the Code+PKCE flow.
See also:
  - <https://oauth.net/2/grant-types/implicit/>
  - <https://oauth.net/2/pkce/>

- services.dependency-track.oidc.issuer: Defines the issuer URL to be used for OpenID Connect.
See alpine.oidc.issuer property of the API server.

- services.dependency-track.oidc.loginButtonText: Defines the scopes to request for OpenID Connect.
See also: <https://openid.net/specs/openid-connect-basic-1_0.html#Scopes>

- services.dependency-track.oidc.scope: Defines the scopes to request for OpenID Connect.
See also: <https://openid.net/specs/openid-connect-basic-1_0.html#Scopes>

- services.dependency-track.oidc.teamSynchronization: This option will ensure that team memberships for OpenID Connect users are dynamic and
synchronized with membership of OpenID Connect groups or assigned roles. When a team is
mapped to an OpenID Connect group, all local OpenID Connect users will automatically be
assigned to the team if they are a member of the group the team is mapped to. If the user
is later removed from the OpenID Connect group, they will also be removed from the team. This
option provides the ability to dynamically control user permissions via the identity provider.
Note that team synchronization is only performed during user provisioning and after successful
authentication.

- services.dependency-track.oidc.teams.claim: Defines the name of the claim that contains group memberships or role assignments in the provider's userinfo endpoint.
The claim must be an array of strings. Most public identity providers do not support group or role management.
When using a customizable / on-demand hosted identity provider, name, content, and inclusion in the userinfo endpoint
will most likely need to be configured.

- services.dependency-track.oidc.teams.default: Defines one or more team names that auto-provisioned OIDC users shall be added to.
Multiple team names may be provided as comma-separated list.

Has no effect when {option}`services.dependency-track.oidc.userProvisioning`=false,
or {option}`services.dependency-track.oidc.teamSynchronization`=true.

- services.dependency-track.oidc.userProvisioning: Specifies if mapped OpenID Connect accounts are automatically created upon successful
authentication. When a user logs in with a valid access token but an account has
not been previously provisioned, an authentication failure will be returned.
This allows admins to control specifically which OpenID Connect users can access the
system and which users cannot. When this value is set to true, a local OpenID Connect
user will be created and mapped to the OpenID Connect account automatically. This
automatic provisioning only affects authentication, not authorization.

- services.dependency-track.oidc.usernameClaim: Defines the name of the claim that contains the username in the provider's userinfo endpoint.
Common claims are "name", "username", "preferred_username" or "nickname".
See also: <https://openid.net/specs/openid-connect-core-1_0.html#UserInfoResponse>

- services.dependency-track.package: The dependency-track package to use.
- services.dependency-track.port: On which port dependency-track should listen for new HTTP connections.

- services.dependency-track.settings: See <https://docs.dependencytrack.org/getting-started/configuration/#default-configuration> for possible options
- services.desktopManager.cosmic.enable: Whether to enable COSMIC desktop environment.
- services.desktopManager.cosmic.showExcludedPkgsWarning: Whether to enable the warning for excluding core packages.
- services.desktopManager.cosmic.xwayland.enable: Whether to enable Xwayland support for the COSMIC compositor.
- services.desktopManager.gnome.debug: Whether to enable pkgs.gnome-session debug messages.
- services.desktopManager.gnome.enable: Enable GNOME desktop manager.
- services.desktopManager.gnome.extraGSettingsOverridePackages: List of packages for which gsettings are overridden.
- services.desktopManager.gnome.extraGSettingsOverrides: Additional gsettings overrides.
- services.desktopManager.gnome.favoriteAppsOverride: List of desktop files to put as favorite apps into pkgs.gnome-shell. These need to be installed somehow globally.
- services.desktopManager.gnome.flashback.customSessions: Other GNOME Flashback sessions to enable.
- services.desktopManager.gnome.flashback.enableMetacity: Whether to enable the standard GNOME Flashback session with Metacity.
- services.desktopManager.gnome.flashback.panelModulePackages: Packages containing modules that should be made available to `pkgs.gnome-panel` (usually for applets).

If you're packaging something to use here, please install the modules in `$out/lib/gnome-panel/modules`.

- services.desktopManager.gnome.sessionPath: Additional list of packages to be added to the session search path.
Useful for GNOME Shell extensions or GSettings-conditional autostart.

Note that this should be a last resort; patching the package is preferred (see GPaste).

- services.desktopManager.lomiri.basics: Enable basic things for getting Lomiri working.

- services.desktopManager.lomiri.enable: Whether to enable the Lomiri graphical shell (formerly known as Unity8)
.
- services.desktopManager.pantheon.debug: Whether to enable gnome-session debug messages.
- services.desktopManager.pantheon.enable: Enable the pantheon desktop manager
- services.desktopManager.pantheon.extraGSettingsOverridePackages: List of packages for which gsettings are overridden.
- services.desktopManager.pantheon.extraGSettingsOverrides: Additional gsettings overrides.
- services.desktopManager.pantheon.extraSwitchboardPlugs: Plugs to add to Switchboard.
- services.desktopManager.pantheon.extraWingpanelIndicators: Indicators to add to Wingpanel.
- services.desktopManager.pantheon.sessionPath: Additional list of packages to be added to the session search path.
Useful for GSettings-conditional autostart.

Note that this should be a last resort; patching the package is preferred (see GPaste).

- services.desktopManager.plasma6.enable: Enable the Plasma 6 (KDE 6) desktop environment.
- services.desktopManager.plasma6.enableQt5Integration: Enable Qt 5 integration (theming, etc). Disable for a pure Qt 6 system.
- services.desktopManager.plasma6.notoPackage: The Noto fonts - used for UI by default package to use.
- services.devmon.enable: Whether to enable devmon, an automatic device mounting daemon.
- services.devpi-server.enable: Whether to enable Devpi Server.
- services.devpi-server.host: domain/ip address to listen on

- services.devpi-server.openFirewall: Whether to enable opening the default ports in the firewall for Devpi Server.
- services.devpi-server.package: The devpi-server package to use.
- services.devpi-server.port: The port on which Devpi Server will listen.
- services.devpi-server.primaryUrl: Url for the primary node. Required option for replica nodes.
- services.devpi-server.replica: Run node as a replica.
Requires the secretFile option and the primaryUrl to be enabled.

- services.devpi-server.secretFile: Path to a shared secret file used for synchronization,
Required for all nodes in a replica/primary setup.

- services.dex.enable: Whether to enable the OpenID Connect and OAuth2 identity provider.
- services.dex.environmentFile: Environment file (see {manpage}`systemd.exec(5)`
"EnvironmentFile=" section for the syntax) to define variables for dex.
This option can be used to safely include secret keys into the dex configuration.

- services.dex.package: The dex-oidc package to use.
- services.dex.settings: The available options can be found in
[the example configuration](https://github.com/dexidp/dex/blob/v2.42.0/config.yaml.dist).

It's also possible to refer to environment variables (defined in [services.dex.environmentFile](#opt-services.dex.environmentFile))
using the syntax `$VARIABLE_NAME`.

- services.dgraph.alpha.host: The host which dgraph alpha will be run on.

- services.dgraph.alpha.port: The port which to run dgraph alpha on.

- services.dgraph.enable: Whether to enable Dgraph native GraphQL database with a graph backend.
- services.dgraph.package: The dgraph package to use.
- services.dgraph.settings: Contents of the dgraph config. For more details see <https://dgraph.io/docs/deploy/config>

- services.dgraph.zero.host: The host which dgraph zero will be run on.

- services.dgraph.zero.port: The port which to run dgraph zero on.

- services.dhcpd4
- services.dhcpd6
- services.dictd.DBs: List of databases to make available.
- services.dictd.enable: Whether to enable the DICT.org dictionary server.

- services.diod.allsquash: Remap all users to "nobody". The attaching user need not be present in the
password file.

- services.diod.authRequired: Allow clients to connect without authentication, i.e. without a valid MUNGE credential.

- services.diod.enable: Whether to enable the diod 9P file server.
- services.diod.exportall: Export all file systems listed in /proc/mounts. If new file systems are mounted
after diod has started, they will become immediately mountable. If there is a
duplicate entry for a file system in the exports list, any options listed in
the exports entry will apply.

- services.diod.exportopts: Establish a default set of export options. These are overridden, not appended
to, by opts attributes in an "exports" entry.

- services.diod.exports: List the file systems that clients will be allowed to mount. All paths should
be fully qualified. The exports table can include two types of element:
a string element (as above),
or an alternate table element form { path="/path", opts="ro" }.
In the alternate form, the (optional) opts attribute is a comma-separated list
of export options. The two table element forms can be mixed in the exports
table. Note that although diod will not traverse file system boundaries for a
given mount due to inode uniqueness constraints, subdirectories of a file
system can be separately exported.

- services.diod.extraConfig: Extra configuration options for diod.conf.
- services.diod.listen: [ "IP:PORT" [,"IP:PORT",...] ]
List the interfaces and ports that diod should listen on.

- services.diod.logdest: Set the destination for logging.
The value has the form of "syslog:facility:level" or "filename".

- services.diod.nwthreads: Sets the (fixed) number of worker threads created to handle 9P
requests for a unique aname.

- services.diod.squashuser: Change the squash user. The squash user must be present in the password file.

- services.diod.statfsPassthru: This option configures statfs to return the host file system's type
rather than V9FS_MAGIC.

- services.diod.userdb: This option disables password/group lookups. It allows any uid to attach and
assumes gid=uid, and supplementary groups contain only the primary gid.

- services.discourse.admin.email: The admin user email address.

- services.discourse.admin.fullName: The admin user's full name.

- services.discourse.admin.passwordFile: A path to a file containing the admin user's password.

This should be a string, not a nix path, since nix paths are
copied into the world-readable nix store.

- services.discourse.admin.skipCreate: Do not create the admin account, instead rely on other
existing admin accounts.

- services.discourse.admin.username: The admin user username.

- services.discourse.backendSettings: Additional settings to put in the
{file}`discourse.conf` file.

Look in the
[discourse_defaults.conf](https://github.com/discourse/discourse/blob/master/config/discourse_defaults.conf)
file in the upstream distribution to find available options.

Setting an option to `null` means
“define variable, but leave right-hand side empty”.

- services.discourse.database.createLocally: Whether a database should be automatically created on the
local host. Set this to `false` if you plan
on provisioning a local database yourself. This has no effect
if {option}`services.discourse.database.host` is customized.

- services.discourse.database.host: Discourse database hostname. `null` means
“prefer local unix socket connection”.

- services.discourse.database.ignorePostgresqlVersion: Whether to allow other versions of PostgreSQL than the
recommended one. Only effective when
{option}`services.discourse.database.createLocally`
is enabled.

- services.discourse.database.name: Discourse database name.

- services.discourse.database.passwordFile: File containing the Discourse database user password.

This should be a string, not a nix path, since nix paths are
copied into the world-readable nix store.

- services.discourse.database.pool: Database connection pool size.

- services.discourse.database.username: Discourse database user.

- services.discourse.enable: Whether to enable Discourse, an open source discussion platform.
- services.discourse.enableACME: Whether an ACME certificate should be used to secure
connections to the server.

- services.discourse.hostname: The hostname to serve Discourse on.

- services.discourse.mail.contactEmailAddress: Email address of key contact responsible for this
site. Used for critical notifications, as well as on the
`/about` contact form for urgent matters.

- services.discourse.mail.incoming.apiKeyFile: A file containing the Discourse API key used to add
posts and messages from mail. If left at its default
value `null`, one will be automatically
generated.

This should be a string, not a nix path, since nix paths
are copied into the world-readable nix store.

- services.discourse.mail.incoming.enable: Whether to set up Postfix to receive incoming mail.

- services.discourse.mail.incoming.mailReceiverPackage: The discourse-mail-receiver package to use.

- services.discourse.mail.incoming.replyEmailAddress: Template for reply by email incoming email address, for
example: %{reply_key}@reply.example.com or
replies+%{reply_key}@example.com

- services.discourse.mail.notificationEmailAddress: The `from:` email address used when
sending all essential system emails. The domain specified
here must have SPF, DKIM and reverse PTR records set
correctly for email to arrive.

- services.discourse.mail.outgoing.authentication: Authentication type to use, see <https://api.rubyonrails.org/classes/ActionMailer/Base.html>

- services.discourse.mail.outgoing.domain: HELO domain to use for outgoing mail.

- services.discourse.mail.outgoing.enableStartTLSAuto: Whether to try to use StartTLS.

- services.discourse.mail.outgoing.forceTLS: Force implicit TLS as per RFC 8314 3.3.

- services.discourse.mail.outgoing.opensslVerifyMode: How OpenSSL checks the certificate, see <https://api.rubyonrails.org/classes/ActionMailer/Base.html>

- services.discourse.mail.outgoing.passwordFile: A file containing the password of the SMTP server account.

This should be a string, not a nix path, since nix paths
are copied into the world-readable nix store.

- services.discourse.mail.outgoing.port: The port of the SMTP server Discourse should use to
send email.

- services.discourse.mail.outgoing.serverAddress: The address of the SMTP server Discourse should use to
send email.

- services.discourse.mail.outgoing.username: The username of the SMTP server.

- services.discourse.nginx.enable: Whether an `nginx` virtual host should be
set up to serve Discourse. Only disable if you're planning
to use a different web server, which is not recommended.

- services.discourse.package: The discourse package to use.

- services.discourse.plugins: Plugins to install as part of Discourse, expressed as a list of derivations.

- services.discourse.redis.dbNumber: Redis database number.

- services.discourse.redis.host: Redis server hostname.

- services.discourse.redis.passwordFile: File containing the Redis password.

This should be a string, not a nix path, since nix paths are
copied into the world-readable nix store.

- services.discourse.redis.useSSL: Connect to Redis with SSL.

- services.discourse.secretKeyBaseFile: The path to a file containing the
`secret_key_base` secret.

Discourse uses `secret_key_base` to encrypt
the cookie store, which contains session data, and to digest
user auth tokens.

Needs to be a 64 byte long string of hexadecimal
characters. You can generate one by running

```
openssl rand -hex 64 >/path/to/secret_key_base_file
```

This should be a string, not a nix path, since nix paths are
copied into the world-readable nix store.

- services.discourse.sidekiqProcesses: How many Sidekiq processes should be spawned.

- services.discourse.siteSettings: Discourse site settings. These are the settings that can be
changed from the UI. This only defines their default values:
they can still be overridden from the UI.

Available settings can be found by looking in the
[site_settings.yml](https://github.com/discourse/discourse/blob/master/config/site_settings.yml)
file of the upstream distribution. To find a setting's path,
you only need to care about the first two levels; i.e. its
category and name. See the example.

Settings containing secret data should be set to an
attribute set containing the attribute
`_secret` - a string pointing to a file
containing the value the option should be set to. See the
example to get a better picture of this: in the resulting
{file}`config/nixos_site_settings.json` file,
the `login.github_client_secret` key will
be set to the contents of the
{file}`/run/keys/discourse_github_client_secret`
file.

- services.discourse.sslCertificate: The path to the server SSL certificate. Set this to enable
SSL.

- services.discourse.sslCertificateKey: The path to the server SSL certificate key. Set this to
enable SSL.

- services.discourse.unicornTimeout: Time in seconds before a request to Unicorn times out.

This can be raised if the system Discourse is running on is
too slow to handle many requests within 30 seconds.

- services.disnix.enable: Whether to enable Disnix.
- services.disnix.enableMultiUser: Whether to support multi-user mode by enabling the Disnix D-Bus service
- services.disnix.enableProfilePath: Whether to enable exposing the Disnix profiles in the system's PATH.
- services.disnix.package: The disnix package to use.
- services.disnix.profiles: Names of the Disnix profiles to expose in the system's PATH
- services.disnix.useWebServiceInterface: Whether to enable the DisnixWebService interface running on Apache Tomcat.
- services.displayManager.autoLogin: Auto login configuration attrset.

- services.displayManager.cosmic-greeter.enable: Whether to enable COSMIC greeter.
- services.displayManager.cosmic-greeter.package: The cosmic-greeter package to use.
- services.displayManager.defaultSession: Graphical session to pre-select in the session chooser (only effective for GDM, LightDM and SDDM).

On GDM, LightDM and SDDM, it will also be used as a session for auto-login.

Set this option to empty string to get an error with a list of currently available sessions.

- services.displayManager.enable: Whether to enable systemd's display-manager service.
- services.displayManager.environment: Additional environment variables needed by the display manager.
- services.displayManager.execCmd: Command to start the display manager.
- services.displayManager.gdm.autoLogin.delay: Seconds of inactivity after which the autologin will be performed.

- services.displayManager.gdm.autoSuspend: On the GNOME Display Manager login screen, suspend the machine after inactivity.
(Does not affect automatic suspend while logged in, or at lock screen.)

- services.displayManager.gdm.banner: Optional message to display on the login screen.

- services.displayManager.gdm.debug: Whether to enable debugging messages in GDM.
- services.displayManager.gdm.enable: Whether to enable GDM, the GNOME Display Manager.
- services.displayManager.gdm.settings: Options passed to the gdm daemon.
See [here](https://help.gnome.org/admin/gdm/stable/configuration.html.en#daemonconfig) for supported options.

- services.displayManager.gdm.wayland: Allow GDM to run on Wayland instead of Xserver.

- services.displayManager.hiddenUsers: A list of users which will not be shown in the display manager.

- services.displayManager.lemurs.enable: Whether to enable lemurs, a customizable TUI display/login manager.

::: {.note}
For Wayland compositors, your user must be in the "seat" group.
:::

- services.displayManager.lemurs.package: The lemurs package to use.
- services.displayManager.lemurs.settings: Configuration for lemurs, provided as a Nix attribute set and automatically
serialized to TOML.
See [lemurs configuration documentation](https://github.com/coastalwhite/lemurs/blob/main/extra/config.toml) for available options.

- services.displayManager.lemurs.vt
- services.displayManager.logToFile: Whether the display manager redirects the output of the
session script to {file}`~/.xsession-errors`.

- services.displayManager.logToJournal: Whether the display manager redirects the output of the
session script to the systemd journal.

- services.displayManager.ly.enable: Whether to enable ly as the display manager.
- services.displayManager.ly.package: The ly package to use.
- services.displayManager.ly.settings: Extra settings merged in and overwriting defaults in config.ini.

- services.displayManager.ly.x11Support: Whether to enable support for X11
- services.displayManager.preStart: Script executed before the display manager is started.
- services.displayManager.sddm.autoLogin.enable: Alias of {option}`services.displayManager.autoLogin.enable`.
- services.displayManager.sddm.autoLogin.minimumUid: Minimum user ID for auto-login user.

- services.displayManager.sddm.autoLogin.relogin: If true automatic login will kick in again on session exit (logout), otherwise it
will only log in automatically when the display-manager is started.

- services.displayManager.sddm.autoLogin.user: Alias of {option}`services.displayManager.autoLogin.user`.
- services.displayManager.sddm.autoNumlock: Enable numlock at login.

- services.displayManager.sddm.enable: Whether to enable sddm as the display manager.

- services.displayManager.sddm.enableHidpi: Whether to enable automatic HiDPI mode.

- services.displayManager.sddm.extraConfig
- services.displayManager.sddm.extraPackages: Extra Qt plugins / QML libraries to add to the environment.

- services.displayManager.sddm.package: The sddm package to use.
- services.displayManager.sddm.settings: Extra settings merged in and overwriting defaults in sddm.conf.

- services.displayManager.sddm.setupScript: A script to execute when starting the display server. DEPRECATED, please
use {option}`services.xserver.displayManager.setupCommands`.

- services.displayManager.sddm.stopScript: A script to execute when stopping the display server.

- services.displayManager.sddm.theme: Greeter theme to use.

- services.displayManager.sddm.themes
- services.displayManager.sddm.wayland.compositor: The compositor to use: kwin, weston
- services.displayManager.sddm.wayland.compositorCommand: Command used to start the selected compositor
- services.displayManager.sddm.wayland.enable: Whether to enable experimental Wayland support.
- services.displayManager.sessionData: Data exported for display managers’ convenience
- services.displayManager.sessionPackages: A list of packages containing x11 or wayland session files to be passed to the display manager.

- services.distccd.allowedClients: Client IPs which are allowed to connect to distccd in CIDR notation.

Anyone who can connect to the distccd server can run arbitrary
commands on that system as the distcc user, therefore you should use
this judiciously.

- services.distccd.enable: Whether to enable distccd, a distributed C/C++ compiler.
- services.distccd.jobTimeout: Maximum duration, in seconds, of a single compilation request.

- services.distccd.logLevel: Set the minimum severity of error that will be included in the log
file. Useful if you only want to see error messages rather than an
entry for each connection.

- services.distccd.maxJobs: Maximum number of tasks distccd should execute at lib.any time.

- services.distccd.nice: Niceness of the compilation tasks.

- services.distccd.openFirewall: Opens the specified TCP port for distcc.

- services.distccd.package: The distcc package to use.
- services.distccd.port: The TCP port which distccd will listen on.

- services.distccd.stats.enable: Whether to enable statistics reporting via HTTP server.
- services.distccd.stats.port: The TCP port which the distccd statistics HTTP server will listen
on.

- services.distccd.zeroconf: Whether to register via mDNS/DNS-SD

- services.dkimproxy-out.domains: List of domains DKIMproxy can sign for.
- services.dkimproxy-out.enable: Whether to enable dkimproxy_out.

Note that a key will be auto-generated, and can be found in
/var/lib/dkimproxy-out.

- services.dkimproxy-out.keySize: Size of the RSA key to use to sign outgoing emails. Note that the
maximum mandatorily verified as per RFC6376 is 2048.

- services.dkimproxy-out.listen: Address:port DKIMproxy should listen on.
- services.dkimproxy-out.relay: Address:port DKIMproxy should forward mail to.
- services.dkimproxy-out.selector: The selector to use for DKIM key identification.

For example, if 'selector1' is used here, then for each domain
'example.org' given in `domain`, 'selector1._domainkey.example.org'
should contain the TXT record indicating the public key is the one
in /var/lib/dkimproxy-out/public.key: "v=DKIM1; t=s; p=[THE PUBLIC KEY]".

- services.dleyna.enable: Whether to enable dleyna-renderer and dleyna-server service,
a DBus service for handling DLNA servers and renderers.

- services.dleyna-renderer: Alias of {option}`services.dleyna`.
- services.dleyna-server: Alias of {option}`services.dleyna`.
- services.dnscache.clientIps: Client IP addresses (or prefixes) from which to accept connections.
- services.dnscache.domainServers: Table of {hostname: server} pairs to use as authoritative servers for hosts (and subhosts).
If entry for @ is not specified predefined list of root servers is used.

- services.dnscache.enable: Whether to run the dnscache caching dns server.
- services.dnscache.forwardOnly: Whether to treat root servers (for @) as caching
servers, requesting addresses the same way a client does. This is
needed if you want to use e.g. Google DNS as your upstream DNS.

- services.dnscache.ip: IP address on which to listen for connections.
- services.dnscrypt-proxy.configFile: Path to TOML config file. See: <https://github.com/DNSCrypt/dnscrypt-proxy/blob/master/dnscrypt-proxy/example-dnscrypt-proxy.toml>
If this option is set, it will override any configuration done in options.services.dnscrypt-proxy.settings.

- services.dnscrypt-proxy.enable: Whether to enable dnscrypt-proxy.
- services.dnscrypt-proxy.package: The dnscrypt-proxy package to use.
- services.dnscrypt-proxy.settings: Attrset that is converted and passed as TOML config file.
For available params, see: <https://github.com/DNSCrypt/dnscrypt-proxy/blob/2.1.14/dnscrypt-proxy/example-dnscrypt-proxy.toml>

- services.dnscrypt-proxy.upstreamDefaults: Whether to base the config declared in {option}`services.dnscrypt-proxy.settings` on the upstream example config (<https://github.com/DNSCrypt/dnscrypt-proxy/blob/master/dnscrypt-proxy/example-dnscrypt-proxy.toml>)

Disable this if you want to declare your dnscrypt config from scratch.

- services.dnscrypt-proxy2: Alias of {option}`services.dnscrypt-proxy`.
- services.dnscrypt-wrapper
- services.dnsdist.dnscrypt.certLifetime: The lifetime (in minutes) of the resolver certificate.
This will be automatically rotated before expiration.

- services.dnsdist.dnscrypt.enable: Whether to enable a DNSCrypt endpoint to dnsdist.
- services.dnsdist.dnscrypt.listenAddress: Listen IP address of the endpoint
- services.dnsdist.dnscrypt.listenPort: Listen port of the endpoint
- services.dnsdist.dnscrypt.providerKey: The filepath to the provider secret key.
If not given a new provider key pair will be generated in
/var/lib/dnsdist on the first run.

::: {.note}
The file must be readable by the dnsdist user/group.
:::

- services.dnsdist.dnscrypt.providerName: The name that will be given to this DNSCrypt resolver.

::: {.note}
The provider name must start with `2.dnscrypt-cert.`.
:::

- services.dnsdist.enable: Whether to enable dnsdist domain name server.
- services.dnsdist.extraConfig: Extra lines to be added verbatim to dnsdist.conf.

- services.dnsdist.listenAddress: Listen IP address
- services.dnsdist.listenPort: Listen port
- services.dnsmasq.alwaysKeepRunning: If enabled, systemd will always respawn dnsmasq even if shut down manually. The default, disabled, will only restart it on error.

- services.dnsmasq.configFile: Path to the configuration file of dnsmasq.

- services.dnsmasq.enable: Whether to run dnsmasq.

- services.dnsmasq.extraConfig
- services.dnsmasq.package: The dnsmasq package to use.
- services.dnsmasq.resolveLocalQueries: Whether dnsmasq should resolve local queries (i.e. add 127.0.0.1 to
/etc/resolv.conf).

- services.dnsmasq.servers: Alias of {option}`services.dnsmasq.settings.server`.
- services.dnsmasq.settings: Configuration of dnsmasq. Lists get added one value per line (empty
lists and false values don't get added, though false values get
turned to comments). Gets merged with

    {
      dhcp-leasefile = "/var/lib/dnsmasq/dnsmasq.leases";
      conf-file = optional cfg.resolveLocalQueries "/etc/dnsmasq-conf.conf";
      resolv-file = optional cfg.resolveLocalQueries "/etc/dnsmasq-resolv.conf";
    }

- services.dnsproxy.enable: Whether to enable dnsproxy.
- services.dnsproxy.flags: A list of extra command-line flags to pass to dnsproxy. For details on the
available options, see <https://github.com/AdguardTeam/dnsproxy#usage>.
Keep in mind that options passed through command-line flags override
config options.

- services.dnsproxy.package: The dnsproxy package to use.
- services.dnsproxy.settings: Contents of the `config.yaml` config file.
The `--config-path` argument will only be passed if this set is not empty.

See <https://github.com/AdguardTeam/dnsproxy/blob/master/config.yaml.dist>.

- services.do-agent.enable: Whether to enable do-agent, the DigitalOcean droplet metrics agent.
- services.dockerRegistry.configFile: Path to CNCF distribution config file.

Setting this option will override any configuration applied by the extraConfig option.

- services.dockerRegistry.enable: Whether to enable Docker Registry.
- services.dockerRegistry.enableDelete: Enable delete for manifests and blobs.
- services.dockerRegistry.enableGarbageCollect: Whether to enable garbage collect.
- services.dockerRegistry.enableRedisCache: Whether to enable redis as blob cache.
- services.dockerRegistry.extraConfig: Docker extra registry configuration.

- services.dockerRegistry.garbageCollectDates: Specification (in the format described by
{manpage}`systemd.time(7)`) of the time at
which the garbage collect will occur.

- services.dockerRegistry.listenAddress: Docker registry host or ip to bind to.
- services.dockerRegistry.openFirewall: Opens the port used by the firewall.
- services.dockerRegistry.package: The docker-distribution package to use.
- services.dockerRegistry.port: Docker registry port to bind to.
- services.dockerRegistry.redisPassword: Set redis password.
- services.dockerRegistry.redisUrl: Set redis host and port.
- services.dockerRegistry.storagePath: Docker registry storage path for the filesystem storage backend. Set to
null to configure another backend via extraConfig.

- services.docling-serve.enable: Whether to enable Docling Serve server.
- services.docling-serve.environment: Extra environment variables for Docling Serve.
For more details see <https://github.com/docling-project/docling-serve/blob/main/docs/configuration.md>

- services.docling-serve.environmentFile: Environment file to be passed to the systemd service.
Useful for passing secrets to the service to prevent them from being
world-readable in the Nix store.

- services.docling-serve.host: The host address which the Docling Serve server HTTP interface listens to.

- services.docling-serve.openFirewall: Whether to open the firewall for Docling Serve.
This adds `services.Docling Serve.port` to `networking.firewall.allowedTCPPorts`.

- services.docling-serve.package: The docling-serve package to use.
- services.docling-serve.port: Which port the Docling Serve server listens to.

- services.docling-serve.stateDir: State directory of Docling Serve.
- services.documize.cert: The {file}`cert.pem` file used for https.

- services.documize.db: Database specific connection string for example:
- MySQL/Percona/MariaDB:
  `user:password@tcp(host:3306)/documize`
- MySQLv8+:
  `user:password@tcp(host:3306)/documize?allowNativePasswords=true`
- PostgreSQL:
  `host=localhost port=5432 dbname=documize user=admin password=secret sslmode=disable`
- MSSQL:
  `sqlserver://username:password@localhost:1433?database=Documize` or
  `sqlserver://sa@localhost/SQLExpress?database=Documize`

- services.documize.dbtype: Specify the database provider: `mysql`, `percona`, `mariadb`, `postgresql`, `sqlserver`

- services.documize.enable: Whether to enable Documize Wiki.
- services.documize.forcesslport: Redirect given http port number to TLS.

- services.documize.key: The {file}`key.pem` file used for https.

- services.documize.location: reserved

- services.documize.offline: Set `true` for offline mode.

- services.documize.package: The documize-community package to use.
- services.documize.port: The http/https port number.

- services.documize.salt: The salt string used to encode JWT tokens, if not set a random value will be generated.

- services.documize.stateDirectoryName: The name of the directory below {file}`/var/lib/private`
where documize runs in and stores, for example, backups.

- services.docuseal.enable: Whether to enable DocuSeal, open source document signing.
- services.docuseal.extraConfig: Extra environment variables to pass to DocuSeal services.

- services.docuseal.extraEnvFiles: Extra environment files to pass to DocuSeal services. Useful for passing down environmental secrets.
e.g. DATABASE_URL

- services.docuseal.host: DocuSeal host.
- services.docuseal.package: The docuseal package to use.
- services.docuseal.port: DocuSeal port.
- services.docuseal.redis.createLocally: Whether to create a local redis automatically.
- services.docuseal.redis.host: Redis server address.

- services.docuseal.redis.name: Name of the redis server. Only used if `createLocally` is set to true.

- services.docuseal.redis.port: Port of the redis server.
- services.docuseal.secretKeyBaseFile: Path to file containing the secret key base.
A new secret key base can be generated by running:

`openssl rand -hex 64`

If this file does not exist, it will be created with a new secret key base.

- services.docuum.deletionChunkSize: Removes specified quantity of images at a time.
- services.docuum.enable: Whether to enable docuum daemon.
- services.docuum.keep: Prevents deletion of images for which repository:tag matches the specified regex.
- services.docuum.minAge: Sets the minimum age of images to be considered for deletion.
- services.docuum.threshold: Threshold for deletion in bytes, like `10 GB`, `10 GiB`, `10GB` or percentage-based thresholds like `50%`
- services.doh-proxy-rust.enable: Whether to enable doh-proxy-rust.
- services.doh-proxy-rust.flags: A list of command-line flags to pass to doh-proxy. For details on the
available options, see <https://github.com/jedisct1/doh-server#usage>.

- services.doh-server.configFile: The config file for the doh-server.
Setting this option will override any configuration applied by the `settings` option.

- services.doh-server.enable: Whether to enable DNS-over-HTTPS server.
- services.doh-server.package: The dns-over-https package to use.
- services.doh-server.settings: Configuration of doh-server in toml. See example in <https://github.com/m13253/dns-over-https/blob/master/doh-server/doh-server.conf>
- services.doh-server.useACMEHost: A host of an existing Let's Encrypt certificate to use.
*Note that this option does not create any certificates, nor it does add subdomains to existing ones – you will need to create them manually using [](#opt-security.acme.certs).*

- services.dokuwiki.sites: Specification of one or more DokuWiki sites to serve
- services.dokuwiki.webserver: Whether to use nginx or caddy for virtual host management.

Further nginx configuration can be done by adapting `services.nginx.virtualHosts.<name>`.
See [](#opt-services.nginx.virtualHosts) for further information.

Further caddy configuration can be done by adapting `services.caddy.virtualHosts.<name>`.
See [](#opt-services.caddy.virtualHosts) for further information.

- services.dolibarr.database
- services.dolibarr.domain: Domain name of your server.

- services.dolibarr.enable: Whether to enable dolibarr.
- services.dolibarr.group: Group account under which dolibarr runs.

::: {.note}
If left as the default value this group will automatically be created
on system activation, otherwise you are responsible for
ensuring the group exists before the dolibarr application starts.
:::

- services.dolibarr.h2o: With this option, you can customize an H2O virtual host which already
has sensible defaults for Dolibarr. Set to `{ }` if you do not need any
customization to the virtual host. If enabled, then by default, the
{option}`serverName` is `${domain}`, If this is set to `null` (the
default), no H2O `hosts` will be configured.

- services.dolibarr.nginx: With this option, you can customize an nginx virtual host which already has sensible defaults for Dolibarr.
Set to {} if you do not need any customization to the virtual host.
If enabled, then by default, the {option}`serverName` is
`${domain}`,
SSL is active, and certificates are acquired via ACME.
If this is set to null (the default), no nginx virtualHost will be configured.

- services.dolibarr.package: The dolibarr package to use.
- services.dolibarr.poolConfig: Options for the Dolibarr PHP pool. See the documentation on [`php-fpm.conf`](https://www.php.net/manual/en/install.fpm.configuration.php)
for details on configuration directives.

- services.dolibarr.settings: Dolibarr settings, see <https://github.com/Dolibarr/dolibarr/blob/develop/htdocs/conf/conf.php.example> for details.
- services.dolibarr.stateDir: State and configuration directory dolibarr will use.

- services.dolibarr.user: User account under which dolibarr runs.

::: {.note}
If left as the default value this user will automatically be created
on system activation, otherwise you are responsible for
ensuring the user exists before the dolibarr application starts.
:::

- services.domoticz.bind: IP address to bind to.
- services.domoticz.enable: Whether to enable Domoticz home automation.
- services.domoticz.port: Port to bind to for HTTP, set to 0 to disable HTTP.
- services.dovecot2.configFile: Config file used for the whole dovecot configuration.
- services.dovecot2.createMailUser: Whether to enable automatically creating the user
      given in {option}`services.dovecot.user` and the group
      given in {option}`services.dovecot.group`.
- services.dovecot2.enable: Whether to enable the dovecot 2.x POP3/IMAP server.
- services.dovecot2.enableDHE: Whether to enable ssl_dh and generation of primes for the key exchange.
- services.dovecot2.enableImap: Whether to enable starting the IMAP listener (when Dovecot is enabled).
- services.dovecot2.enableLmtp: Whether to enable starting the LMTP listener (when Dovecot is enabled).
- services.dovecot2.enablePAM: Whether to enable creating a own Dovecot PAM service and configure PAM user logins.
- services.dovecot2.enablePop3: Whether to enable starting the POP3 listener (when Dovecot is enabled).
- services.dovecot2.enableQuota: Whether to enable the dovecot quota service.
- services.dovecot2.extraConfig: Additional entries to put verbatim into Dovecot's config file.
- services.dovecot2.group: Dovecot group name.
- services.dovecot2.hasNewUnitName: Inspectable option to confirm that the dovecot module uses the new
`dovecot.service` name, instead of `dovecot2.service`.

This is a helper added for the nixos-mailserver project and can be
removed after branching off nixos-25.11.

- services.dovecot2.imapsieve.mailbox: Configure Sieve filtering rules on IMAP actions
- services.dovecot2.mailGroup: Default group to store mail for virtual users.
- services.dovecot2.mailLocation: Location that dovecot will use for mail folders. Dovecot mail_location option.

- services.dovecot2.mailPlugins: Additional entries to add to the mail_plugins variable, globally and per protocol
- services.dovecot2.mailUser: Default user to store mail for virtual users.
- services.dovecot2.mailboxes: Configure mailboxes and auto create or subscribe them.
- services.dovecot2.modules
- services.dovecot2.package
- services.dovecot2.pluginSettings: Plugin settings for dovecot in general, e.g. `sieve`, `sieve_default`, etc.

Some of the other knobs of this module will influence by default the plugin settings, but you
can still override any plugin settings.

If you override a plugin setting, its value is cleared and you have to copy over the defaults.

- services.dovecot2.protocols: Additional listeners to start when Dovecot is enabled.
- services.dovecot2.quotaGlobalPerUser: Quota limit for the user in bytes. Supports suffixes b, k, M, G, T and %.
- services.dovecot2.quotaPort: The Port the dovecot quota service binds to.
If using postfix, add check_policy_service inet:localhost:12340 to your smtpd_recipient_restrictions in your postfix config.

- services.dovecot2.showPAMFailure: Whether to enable showing the PAM failure message on authentication error (useful for OTPW).
- services.dovecot2.sieve.extensions: Sieve extensions for use in user scripts
- services.dovecot2.sieve.globalExtensions: Sieve extensions for use in global scripts
- services.dovecot2.sieve.pipeBins: Programs available for use by the vnd.dovecot.pipe extension
- services.dovecot2.sieve.plugins: Sieve plugins to load
- services.dovecot2.sieve.scripts: Sieve scripts to be executed. Key is a sequence, e.g. 'before2', 'after' etc.
- services.dovecot2.sieveScripts: Alias of {option}`services.dovecot2.sieve.scripts`.
- services.dovecot2.sslCACert: Path to the server's CA certificate key.
- services.dovecot2.sslServerCert: Path to the server's public key.
- services.dovecot2.sslServerKey: Path to the server's private key.
- services.dovecot2.user: Dovecot user name.
- services.dragonflydb.bind: The IP interface to bind to.
`null` means "all interfaces".

- services.dragonflydb.cacheMode: Once this mode is on, Dragonfly will evict items least likely to be stumbled
upon in the future but only when it is near maxmemory limit.

- services.dragonflydb.dbNum: Maximum number of supported databases for `select`
- services.dragonflydb.enable: Whether to enable DragonflyDB.
- services.dragonflydb.keysOutputLimit: Maximum number of returned keys in keys command.
`keys` is a dangerous command.
We truncate its result to avoid blowup in memory when fetching too many keys.

- services.dragonflydb.maxMemory: The maximum amount of memory to use for storage (in bytes).
`null` means this will be automatically set.

- services.dragonflydb.memcachePort: To enable memcached compatible API on this port.
`null` means disabled.

- services.dragonflydb.port: The TCP port to accept connections.
- services.dragonflydb.requirePass: Password for database
- services.dragonflydb.user: The user to run DragonflyDB as
- services.draupnir.accessTokenFile: Alias of {option}`services.draupnir.secrets.accessToken`.
- services.draupnir.dataPath: Alias of {option}`services.draupnir.settings.dataPath`.
- services.draupnir.enable: Whether to enable Draupnir, a moderations bot for Matrix.
- services.draupnir.homeserverUrl: Alias of {option}`services.draupnir.settings.homeserverUrl`.
- services.draupnir.managementRoom: Alias of {option}`services.draupnir.settings.managementRoom`.
- services.draupnir.package: The draupnir package to use.
- services.draupnir.pantalaimon
- services.draupnir.secrets.accessToken: File containing the access token for Draupnir's Matrix account
to be used in place of {option}`services.draupnir.settings.accessToken`.

- services.draupnir.secrets.pantalaimon.password: File containing the password for Draupnir's Matrix account when used in
conjunction with Pantalaimon to be used in place of
{option}`services.draupnir.settings.pantalaimon.password`.

::: {.warning}
Take note that upstream has limited Pantalaimon and E2EE support:
<https://the-draupnir-project.github.io/draupnir-documentation/bot/encryption> and
<https://the-draupnir-project.github.io/draupnir-documentation/shared/dogfood#e2ee-support>.
:::

- services.draupnir.secrets.web.synapseHTTPAntispam.authorization: File containing the secret token when using the Synapse HTTP Antispam module
to be used in place of
{option}`services.draupnir.settings.web.synapseHTTPAntispam.authorization`.

See <https://the-draupnir-project.github.io/draupnir-documentation/bot/synapse-http-antispam> for details.

- services.draupnir.settings: Free-form settings written to Draupnir's configuration file.
See [Draupnir's default configuration](https://github.com/the-draupnir-project/Draupnir/blob/main/config/default.yaml) for available settings.

- services.drbd.config: Contents of the {file}`drbd.conf` configuration file.

- services.drbd.enable: Whether to enable support for DRBD, the Distributed Replicated
Block Device.

- services.druid.broker.config: (key=value) Configuration to be written to runtime.properties of the druid Druid Broker
<https://druid.apache.org/docs/latest/configuration/index.html>

- services.druid.broker.enable: Whether to enable Druid Broker.
- services.druid.broker.internalConfig: Internal Option to add to runtime.properties for Druid Broker.
- services.druid.broker.jdk: The JDK package to use.
- services.druid.broker.jvmArgs: Arguments to pass to the JVM
- services.druid.broker.openFirewall: Open firewall ports for Druid Broker.
- services.druid.broker.restartIfChanged: Automatically restart the service on config change.
This can be set to false to defer restarts on clusters running critical applications.
Please consider the security implications of inadvertently running an older version,
and the possibility of unexpected behavior caused by inconsistent versions across a cluster when disabling this option.

- services.druid.commonConfig: (key=value) Configuration to be written to common.runtime.properties
- services.druid.commonTmpDirs: Common List of directories used by druid processes
- services.druid.coordinator.config: (key=value) Configuration to be written to runtime.properties of the druid Druid Coordinator
<https://druid.apache.org/docs/latest/configuration/index.html>

- services.druid.coordinator.enable: Whether to enable Druid Coordinator.
- services.druid.coordinator.internalConfig: Internal Option to add to runtime.properties for Druid Coordinator.
- services.druid.coordinator.jdk: The JDK package to use.
- services.druid.coordinator.jvmArgs: Arguments to pass to the JVM
- services.druid.coordinator.openFirewall: Open firewall ports for Druid Coordinator.
- services.druid.coordinator.restartIfChanged: Automatically restart the service on config change.
This can be set to false to defer restarts on clusters running critical applications.
Please consider the security implications of inadvertently running an older version,
and the possibility of unexpected behavior caused by inconsistent versions across a cluster when disabling this option.

- services.druid.extraClassPaths: Extra classpath to include in the jvm
- services.druid.extraConfDirs: Extra Conf Dirs to include in the jvm
- services.druid.historical.config: (key=value) Configuration to be written to runtime.properties of the druid Druid Historical
<https://druid.apache.org/docs/latest/configuration/index.html>

- services.druid.historical.enable: Whether to enable Druid Historical.
- services.druid.historical.internalConfig: Internal Option to add to runtime.properties for Druid Historical.
- services.druid.historical.jdk: The JDK package to use.
- services.druid.historical.jvmArgs: Arguments to pass to the JVM
- services.druid.historical.openFirewall: Open firewall ports for Druid Historical.
- services.druid.historical.restartIfChanged: Automatically restart the service on config change.
This can be set to false to defer restarts on clusters running critical applications.
Please consider the security implications of inadvertently running an older version,
and the possibility of unexpected behavior caused by inconsistent versions across a cluster when disabling this option.

- services.druid.historical.segmentLocations: Locations where the historical will store its data.
- services.druid.log4j: Log4j Configuration for the druid process
- services.druid.middleManager.config: (key=value) Configuration to be written to runtime.properties of the druid Druid middleManager
<https://druid.apache.org/docs/latest/configuration/index.html>

- services.druid.middleManager.enable: Whether to enable Druid middleManager.
- services.druid.middleManager.internalConfig: Internal Option to add to runtime.properties for Druid middleManager.
- services.druid.middleManager.jdk: The JDK package to use.
- services.druid.middleManager.jvmArgs: Arguments to pass to the JVM
- services.druid.middleManager.openFirewall: Open firewall ports for Druid middleManager.
- services.druid.middleManager.restartIfChanged: Automatically restart the service on config change.
This can be set to false to defer restarts on clusters running critical applications.
Please consider the security implications of inadvertently running an older version,
and the possibility of unexpected behavior caused by inconsistent versions across a cluster when disabling this option.

- services.druid.overlord.config: (key=value) Configuration to be written to runtime.properties of the druid Druid Overlord
<https://druid.apache.org/docs/latest/configuration/index.html>

- services.druid.overlord.enable: Whether to enable Druid Overlord.
- services.druid.overlord.internalConfig: Internal Option to add to runtime.properties for Druid Overlord.
- services.druid.overlord.jdk: The JDK package to use.
- services.druid.overlord.jvmArgs: Arguments to pass to the JVM
- services.druid.overlord.openFirewall: Open firewall ports for Druid Overlord.
- services.druid.overlord.restartIfChanged: Automatically restart the service on config change.
This can be set to false to defer restarts on clusters running critical applications.
Please consider the security implications of inadvertently running an older version,
and the possibility of unexpected behavior caused by inconsistent versions across a cluster when disabling this option.

- services.druid.package: The apache-druid package to use.
- services.druid.router.config: (key=value) Configuration to be written to runtime.properties of the druid Druid Router
<https://druid.apache.org/docs/latest/configuration/index.html>

- services.druid.router.enable: Whether to enable Druid Router.
- services.druid.router.internalConfig: Internal Option to add to runtime.properties for Druid Router.
- services.druid.router.jdk: The JDK package to use.
- services.druid.router.jvmArgs: Arguments to pass to the JVM
- services.druid.router.openFirewall: Open firewall ports for Druid Router.
- services.druid.router.restartIfChanged: Automatically restart the service on config change.
This can be set to false to defer restarts on clusters running critical applications.
Please consider the security implications of inadvertently running an older version,
and the possibility of unexpected behavior caused by inconsistent versions across a cluster when disabling this option.

- services.drupal.enable: Whether to enable drupal.
- services.drupal.package: The drupal package to use.
- services.drupal.sites: Specification of one or more Drupal sites to serve
- services.drupal.webserver: Whether to use nginx or caddy for virtual host management.

Further nginx configuration can be done by adapting `services.nginx.virtualHosts.<name>`.
See [](#opt-services.nginx.virtualHosts) for further information.

Further caddy configuration can be done by adapting `services.caddy.virtualHosts.<name>`.
See [](#opt-services.caddy.virtualHosts) for further information.

- services.dsnet.enable: Whether to enable dsnet, a centralised Wireguard VPN manager.
- services.dsnet.package: The dsnet package to use.
- services.dsnet.settings: The settings to use for dsnet. This will be converted to a JSON
object that will be passed to dsnet as a patch, using the patch
command when the service is started. See the dsnet documentation for
more information on the additional options.

Note that the resulting /etc/dsnetconfg.json is more of a database
than it is a configuration file. It is therefore recommended that
system specific values are configured here, rather than the full
configuration including peers.

Peers may be managed via the dsnet add/remove commands, negating the
need to manage key material and cumbersom configuration with nix. If
you want peer configuration in nix, you may as well use the regular
wireguard module.

- services.dspam.domainSocket: Path to local domain socket which is used for communication with the daemon. Set to null to disable UNIX socket.
- services.dspam.enable: Whether to enable the dspam spam filter.
- services.dspam.extraConfig: Additional dspam configuration.
- services.dspam.group: Group for the dspam daemon.
- services.dspam.maintenanceInterval: If set, maintenance script will be run at specified (in systemd.timer format) interval
- services.dspam.storageDriver: Storage driver backend to use for dspam.
- services.dspam.user: User for the dspam daemon.
- services.duckdns.domains: The domain(s) to update in DuckDNS
(without the .duckdns.org suffix)

- services.duckdns.domainsFile: The path to a file containing a
newline-separated list of DuckDNS
domain(s) to be updated
(without the .duckdns.org suffix)

- services.duckdns.enable: Whether to enable DuckDNS Dynamic DNS Client.
- services.duckdns.tokenFile: The path to a file containing the token
used to authenticate with DuckDNS.

- services.duckling.enable: Whether to enable duckling.
- services.duckling.port: Port on which duckling will run.

- services.dump1090-fa.enable: Whether to enable dump1090-fa.
- services.dump1090-fa.extraArgs: Additional passed arguments
- services.dump1090-fa.package: The dump1090-fa package to use.
- services.duplicati.dataDir: The directory where Duplicati stores its data files.

::: {.note}
If left as the default value this directory will automatically be created
before the Duplicati server starts, otherwise you are responsible for ensuring
the directory exists with appropriate ownership and permissions.
:::

- services.duplicati.enable: Whether to enable Duplicati.
- services.duplicati.interface: Listening interface for the web UI
Set it to "any" to listen on all available interfaces

- services.duplicati.package: The duplicati package to use.
- services.duplicati.parameters: This option can be used to store some or all of the options given to the
commandline client.
Each line in this option should be of the format --option=value.
The options in this file take precedence over the options provided
through command line arguments.
<link xlink:href="https://duplicati.readthedocs.io/en/latest/06-advanced-options/#parameters-file">Duplicati docs: parameters-file</link>

- services.duplicati.parametersFile: This file can be used to store some or all of the options given to the
commandline client.
Each line in the file option should be of the format --option=value.
The options in this file take precedence over the options provided
through command line arguments.
<link xlink:href="https://duplicati.readthedocs.io/en/latest/06-advanced-options/#parameters-file">Duplicati docs: parameters-file</link>

- services.duplicati.port: Port serving the web interface

- services.duplicati.user: Duplicati runs as it's own user. It will only be able to backup world-readable files.
Run as root with special care.

- services.duplicity.cleanup.maxAge: If non-null, delete all backup sets older than the given time.  Old backup sets
will not be deleted if backup sets newer than time depend on them.

- services.duplicity.cleanup.maxFull: If non-null, delete all backups sets that are older than the count:th last full
backup (in other words, keep the last count full backups and
associated incremental sets).

- services.duplicity.cleanup.maxIncr: If non-null, delete incremental sets of all backups sets that are
older than the count:th last full backup (in other words, keep only
old full backups and not their increments).

- services.duplicity.enable: Whether to enable backups with duplicity.
- services.duplicity.exclude: List of paths to exclude from backups. See the FILE SELECTION section in
{manpage}`duplicity(1)` for details on the syntax.

- services.duplicity.excludeFileList: File containing newline-separated list of paths to exclude into the
backups. See the FILE SELECTION section in {manpage}`duplicity(1)` for
details on the syntax.

- services.duplicity.extraFlags: Extra command-line flags passed to duplicity. See
{manpage}`duplicity(1)`.

- services.duplicity.frequency: Run duplicity with the given frequency (see
{manpage}`systemd.time(7)` for the format).
If null, do not run automatically.

- services.duplicity.fullIfOlderThan: If `"never"` (the default) always do incremental
backups (the first backup will be a full backup, of course).  If
`"always"` always do full backups.  Otherwise, this
must be a string representing a duration. Full backups will be made
when the latest full backup is older than this duration. If this is not
the case, an incremental backup is performed.

- services.duplicity.include: List of paths to include into the backups. See the FILE SELECTION
section in {manpage}`duplicity(1)` for details on the syntax.

- services.duplicity.includeFileList: File containing newline-separated list of paths to include into the
backups. See the FILE SELECTION section in {manpage}`duplicity(1)` for
details on the syntax.

- services.duplicity.root: Root directory to backup.

- services.duplicity.secretFile: Path of a file containing secrets (gpg passphrase, access key...) in
the format of EnvironmentFile as described by
{manpage}`systemd.exec(5)`. For example:
```
PASSPHRASE=«...»
AWS_ACCESS_KEY_ID=«...»
AWS_SECRET_ACCESS_KEY=«...»
```

- services.duplicity.targetUrl: Target url to backup to. See the URL FORMAT section in
{manpage}`duplicity(1)` for supported urls.

- services.dwm-status.enable: Whether to enable dwm-status user service.
- services.dwm-status.extraConfig
- services.dwm-status.order: Alias of {option}`services.dwm-status.settings.order`.
- services.dwm-status.package: The dwm-status package to use.
- services.dwm-status.settings: Config options for dwm-status, see <https://github.com/Gerschtli/dwm-status#configuration>
for available options.

- services.dysnomia.components: An attribute set in which each key represents a container and each value an attribute set in which each key represents a component and each value a derivation constructing its initial state
- services.dysnomia.containers: An attribute set in which each key represents a container and each value an attribute set providing its configuration properties
- services.dysnomia.enable: Whether to enable Dysnomia
- services.dysnomia.enableAuthentication: Whether to publish privacy-sensitive authentication credentials
- services.dysnomia.enableLegacyModules: Whether to enable Dysnomia legacy process and wrapper modules
- services.dysnomia.extraContainerPaths: A list of paths containing additional container configurations that are added to the search folders
- services.dysnomia.extraContainerProperties: An attribute set providing additional container settings in addition to the default properties
- services.dysnomia.extraModulePaths: A list of paths containing additional modules that are added to the search folders
- services.dysnomia.package: The Dysnomia package
- services.dysnomia.properties: An attribute set in which each attribute represents a machine property. Optionally, these values can be shell substitutions.
- services.e-imzo.enable: Whether to enable E-IMZO.
- services.e-imzo.package: The e-imzo package to use. Official mirror deletes old versions as soon as they release new one. Feel free to use either unstable or your own custom e-imzo package and ping maintainer.
- services.earlyoom.enable: Whether to enable early out of memory killing.
- services.earlyoom.enableDebugInfo: Enable debugging messages.

- services.earlyoom.enableNotifications: Send notifications about killed processes via the system d-bus.

WARNING: enabling this option (while convenient) should *not* be done on a
machine where you do not trust the other users as it allows any other
local user to DoS your session by spamming notifications.

To actually see the notifications in your GUI session, you need to have
`systembus-notify` running as your user, which this
option handles by enabling {option}`services.systembus-notify`.

See [README](https://github.com/rfjakob/earlyoom#notifications) for details.

- services.earlyoom.extraArgs: Extra command-line arguments to be passed to earlyoom. Each element in
the value list will be escaped as an argument without further
word-breaking.

- services.earlyoom.freeMemKillThreshold: Minimum available memory (in percent) before sending SIGKILL.
If unset, this defaults to half of {option}`freeMemThreshold`.

See the description of [](#opt-services.earlyoom.freeMemThreshold).

- services.earlyoom.freeMemThreshold: Minimum available memory (in percent).

If the available memory falls below this threshold (and the analog is true for
{option}`freeSwapThreshold`) the killing begins.
SIGTERM is sent first to the process that uses the most memory; then, if the available
memory falls below {option}`freeMemKillThreshold` (and the analog is true for
{option}`freeSwapKillThreshold`), SIGKILL is sent.

See [README](https://github.com/rfjakob/earlyoom#command-line-options) for details.

- services.earlyoom.freeSwapKillThreshold: Minimum free swap space (in percent) before sending SIGKILL.
If unset, this defaults to half of {option}`freeSwapThreshold`.

See the description of [](#opt-services.earlyoom.freeMemThreshold).

- services.earlyoom.freeSwapThreshold: Minimum free swap space (in percent) before sending SIGTERM.

See the description of [](#opt-services.earlyoom.freeMemThreshold).

- services.earlyoom.ignoreOOMScoreAdjust
- services.earlyoom.killHook: An absolute path to an executable to be run for each process killed.
Some environment variables are available, see
[README](https://github.com/rfjakob/earlyoom#notifications) and
[the man page](https://github.com/rfjakob/earlyoom/blob/master/MANPAGE.md#-n-pathtoscript)
for details.

WARNING: earlyoom is running in a sandbox with ProtectSystem="strict"
by default, so filesystem write is also prohibited for the hook.
If you want to change these protection rules, override the systemd
service via `systemd.services.earlyoom.serviceConfig.ProtectSystem`.

- services.earlyoom.notificationsCommand
- services.earlyoom.package: The earlyoom package to use.
- services.earlyoom.reportInterval: Interval (in seconds) at which a memory report is printed (set to 0 to disable).
- services.earlyoom.useKernelOOMKiller
- services.easytier.allowSystemForward: Whether to enable Allow the system to forward packets from easytier. Useful when
`proxy_forward_by_system` enabled.
.
- services.easytier.enable: Whether to enable EasyTier daemon.
- services.easytier.instances: EasyTier instances.

- services.easytier.package: The easytier package to use.
- services.ebusd.configpath: Directory to read CSV config files from. This can be a local folder or a URL.

- services.ebusd.device: Use DEV as eBUS device [/dev/ttyUSB0].
This can be either:
  enh:DEVICE or enh:IP:PORT for enhanced device (only adapter v3 and newer),
  ens:DEVICE for enhanced high speed serial device (only adapter v3 and newer with firmware since 20220731),
  DEVICE for serial device (normal speed, for all other serial adapters like adapter v2 as well as adapter v3 in non-enhanced mode), or
  [udp:]IP:PORT for network device.

Source: <https://github.com/john30/ebusd/wiki/2.-Run#device-options>

- services.ebusd.enable: Whether to enable ebusd, a daemon for communication with eBUS heating systems.
- services.ebusd.extraArguments: Extra arguments to the ebus daemon

- services.ebusd.logs.all: Only write log for matching `AREA`s (all|main|network|bus|device|update|other) below or equal to `LEVEL` (none|error|notice|info|debug)

- services.ebusd.logs.bus: Only write log for matching `AREA`s (all|main|network|bus|device|update|other) below or equal to `LEVEL` (none|error|notice|info|debug)

- services.ebusd.logs.device: Only write log for matching `AREA`s (all|main|network|bus|device|update|other) below or equal to `LEVEL` (none|error|notice|info|debug)

- services.ebusd.logs.main: Only write log for matching `AREA`s (all|main|network|bus|device|update|other) below or equal to `LEVEL` (none|error|notice|info|debug)

- services.ebusd.logs.network: Only write log for matching `AREA`s (all|main|network|bus|device|update|other) below or equal to `LEVEL` (none|error|notice|info|debug)

- services.ebusd.logs.other: Only write log for matching `AREA`s (all|main|network|bus|device|update|other) below or equal to `LEVEL` (none|error|notice|info|debug)

- services.ebusd.logs.update: Only write log for matching `AREA`s (all|main|network|bus|device|update|other) below or equal to `LEVEL` (none|error|notice|info|debug)

- services.ebusd.mqtt.enable: Whether to enable support for MQTT.
- services.ebusd.mqtt.home-assistant: Adds the Home Assistant topics to MQTT, read more at [MQTT Integration](https://github.com/john30/ebusd/wiki/MQTT-integration)

- services.ebusd.mqtt.host: Connect to MQTT broker on HOST.

- services.ebusd.mqtt.password: The MQTT password.

- services.ebusd.mqtt.port: The port on which to connect to MQTT

- services.ebusd.mqtt.retain: Whether to enable set the retain flag on all topics instead of only selected global ones.
- services.ebusd.mqtt.user: The MQTT user to use

- services.ebusd.package: The ebusd package to use.
- services.ebusd.port: The port on which to listen on

- services.ebusd.readonly: Only read from device, never write to it

- services.ebusd.scanconfig: Pick CSV config files matching initial scan ("none" or empty for no initial scan message, "full" for full scan, or a single hex address to scan, default is to send a broadcast ident message).
If combined with --checkconfig, you can add scan message data as arguments for checking a particular scan configuration, e.g. "FF08070400/0AB5454850303003277201". For further details on this option,
see [Automatic configuration](https://github.com/john30/ebusd/wiki/4.7.-Automatic-configuration).

- services.echoip.enable: Whether to enable echoip.
- services.echoip.enablePortLookup: Whether to enable port lookup.
- services.echoip.enableReverseHostnameLookups: Whether to enable reverse hostname lookups.
- services.echoip.extraArgs: Extra command line arguments to pass to echoip. See <https://github.com/mpolden/echoip> for details.
- services.echoip.listenAddress: The address echoip should listen on
- services.echoip.package: The echoip package to use.
- services.echoip.remoteIpHeader: Header to trust for remote IP, if present
- services.echoip.virtualHost: Name of the nginx virtual host to use and setup. If null, do not setup anything.

- services.ecs-agent.enable: Whether to enable Amazon ECS agent.
- services.ecs-agent.extra-environment: The environment the ECS agent should run with. See the ECS agent documentation for keys that work here.
- services.ecs-agent.package: The ecs-agent package to use.
- services.eg25-manager.enable: Whether to enable Quectel EG25 modem manager service.
- services.eg25-manager.package: The eg25-manager package to use.
- services.eintopf.enable: Whether to enable Lauti (Eintopf) community event calendar web app.
- services.eintopf.secrets: A list of files containing the various secrets. Should be in the
format expected by systemd's `EnvironmentFile` directory.

- services.eintopf.settings: Settings to configure web service. See
<https://codeberg.org/Klasse-Methode/lauti/src/branch/main/DEPLOYMENT.md>
for available options.

- services.ejabberd.configFile: Configuration file for ejabberd in YAML format
- services.ejabberd.ctlConfig: Configuration of ejabberdctl
- services.ejabberd.enable: Whether to enable ejabberd server
- services.ejabberd.group: Group under which ejabberd is ran
- services.ejabberd.imagemagick: Add ImageMagick to server's path; allows for image thumbnailing
- services.ejabberd.loadDumps: Configuration dumps that should be loaded on the first startup
- services.ejabberd.logsDir: Location of the logfile directory of ejabberd
- services.ejabberd.package: The ejabberd package to use.
- services.ejabberd.spoolDir: Location of the spooldir of ejabberd
- services.ejabberd.user: User under which ejabberd is ran
- services.elasticsearch.cluster_name: Elasticsearch name that identifies your cluster for auto-discovery.
- services.elasticsearch.dataDir: Data directory for elasticsearch.

- services.elasticsearch.enable: Whether to enable elasticsearch.
- services.elasticsearch.extraCmdLineOptions: Extra command line options for the elasticsearch launcher.
- services.elasticsearch.extraConf: Extra configuration for elasticsearch.
- services.elasticsearch.extraJavaOptions: Extra command line options for Java.
- services.elasticsearch.listenAddress: Elasticsearch listen address.
- services.elasticsearch.logging: Elasticsearch logging configuration.
- services.elasticsearch.package: The elasticsearch package to use.
- services.elasticsearch.plugins: Extra elasticsearch plugins
- services.elasticsearch.port: Elasticsearch port to listen for HTTP traffic.
- services.elasticsearch.restartIfChanged: Automatically restart the service on config change.
This can be set to false to defer restarts on a server or cluster.
Please consider the security implications of inadvertently running an older version,
and the possibility of unexpected behavior caused by inconsistent versions across a cluster when disabling this option.

- services.elasticsearch.single_node: Start a single-node cluster
- services.elasticsearch.tcp_port: Elasticsearch port for the node to node communication.
- services.elasticsearch-curator.actionYAML: curator action.yaml file contents, alternatively use curator-cli which takes a simple action command
- services.elasticsearch-curator.enable: Whether to enable elasticsearch curator.
- services.elasticsearch-curator.hosts: a list of elasticsearch hosts to connect to
- services.elasticsearch-curator.interval: The frequency to run curator, a systemd.time such as 'hourly'
- services.elasticsearch-curator.port: the port that elasticsearch is listening on
- services.emacs.defaultEditor: When enabled, configures emacsclient to be the default editor
using the EDITOR environment variable.

- services.emacs.enable: Whether to enable a user service for the Emacs daemon. Use `emacsclient` to connect to the
daemon. If `true`, {var}`services.emacs.install` is
considered `true`.

- services.emacs.install: Whether to install a user service for the Emacs daemon. Once
the service is started, use emacsclient to connect to the
daemon.

The service must be manually started for each user with
"systemctl --user start emacs" or globally through
{var}`services.emacs.enable`.

- services.emacs.package: The emacs package to use.
- services.emacs.startWithGraphical: Start emacs with the graphical session instead of any session. Without this, emacs clients will not be able to create frames in the graphical session.

- services.endlessh.enable: Whether to enable endlessh service.
- services.endlessh.extraOptions: Additional command line options to pass to the endlessh daemon.

- services.endlessh.openFirewall: Whether to open a firewall port for the SSH listener.

- services.endlessh.port: Specifies on which port the endlessh daemon listens for SSH
connections.

Setting this to `22` may conflict with {option}`services.openssh`.

- services.endlessh-go.enable: Whether to enable endlessh-go service.
- services.endlessh-go.extraOptions: Additional command line options to pass to the endlessh-go daemon.

- services.endlessh-go.listenAddress: Interface address to bind the endlessh-go daemon to SSH connections.

- services.endlessh-go.openFirewall: Whether to open a firewall port for the SSH listener.

- services.endlessh-go.package: The endlessh-go package to use.
- services.endlessh-go.port: Specifies on which port the endlessh-go daemon listens for SSH
connections.

Setting this to `22` may conflict with {option}`services.openssh`.

- services.endlessh-go.prometheus.enable: Whether to enable Prometheus integration.
- services.endlessh-go.prometheus.listenAddress: Interface address to bind the endlessh-go daemon to answer Prometheus
queries.

- services.endlessh-go.prometheus.port: Specifies on which port the endlessh-go daemon listens for Prometheus
queries.

- services.engelsystem.config: Alias of {option}`services.engelsystem.settings`.
- services.engelsystem.createDatabase: Whether to create a local database automatically.
This will override every database setting in {option}`services.engelsystem.settings`.

- services.engelsystem.domain: Domain to serve on.
- services.engelsystem.enable: Whether to enable engelsystem, an online tool for coordinating volunteers and shifts on large events.
- services.engelsystem.package: The engelsystem package to use.
- services.engelsystem.settings: Options to be added to config.php, as a nix attribute set. Options containing secret data
should be set to an attribute set containing the attribute _secret - a string pointing to a
file containing the value the option should be set to. See the example to get a better
picture of this: in the resulting config.php file, the email.password key will be set to
the contents of the /var/keys/engelsystem/mail file.

See <https://engelsystem.de/doc/admin/configuration/> for available options.

Note that the admin user login credentials cannot be set here - they always default to
admin:asdfasdf. Log in and change them immediately.

- services.ente.api.domain: The domain under which the api will be served.
- services.ente.api.enable: Whether to enable Museum (API server for ente.io).
- services.ente.api.enableLocalDB: Whether to enable the automatic creation of a local postgres database for museum..
- services.ente.api.group: Group under which museum runs. If you set this option you must make sure the group exists.
- services.ente.api.nginx.enable: Whether to enable nginx proxy for the API server.
- services.ente.api.package: The museum package to use.
- services.ente.api.settings: Museum yaml configuration. Refer to upstream [local.yaml](https://github.com/ente-io/ente/blob/main/server/configurations/local.yaml) for more information.
You can specify secret values in this configuration by setting `somevalue._secret = "/path/to/file"` instead of setting `somevalue` directly.

- services.ente.api.user: User under which museum runs. If you set this option you must make sure the user exists.
- services.ente.web.domains.accounts: The domain under which the accounts frontend will be served.
- services.ente.web.domains.albums: The domain under which the albums frontend will be served.
- services.ente.web.domains.api: The domain under which the api is served. This will NOT serve the api itself,
but is a required setting to host the frontends! This will automatically be set
for you if you enable both the api server and web frontends.

- services.ente.web.domains.cast: The domain under which the cast frontend will be served.
- services.ente.web.domains.photos: The domain under which the photos frontend will be served.
- services.ente.web.enable: Whether to enable Ente web frontend (Photos, Albums).
- services.ente.web.package: The ente-web package to use.
- services.envfs.enable: Fuse filesystem that returns symlinks to executables based on the PATH
of the requesting process. This is useful to execute shebangs on NixOS
that assume hard coded locations in locations like /bin or /usr/bin
etc.

- services.envfs.extraFallbackPathCommands: Extra commands to run in the package that contains fallback executables in case not other executable is found
- services.envfs.package: Which package to use for the envfs.
- services.envoy.enable: Whether to enable Envoy reverse proxy.
- services.envoy.package: The envoy package to use.
- services.envoy.requireValidConfig: Whether a failure during config validation at build time is fatal.
When the config can't be checked during build time, for example when it includes
other files, disable this option.

- services.envoy.settings: Specify the configuration for Envoy in Nix.

- services.epgstation.basicAuth
- services.epgstation.clientSocketioPort: Alias of {option}`services.epgstation.settings.clientSocketioPort`.
- services.epgstation.database.name: Name of the MySQL database that holds EPGStation's data.

- services.epgstation.database.passwordFile: A file containing the password for the database named
{option}`database.name`.

- services.epgstation.enable: Whether to enable EPGStation: DVR system for Mirakurun-managed TV tuners.
- services.epgstation.ffmpeg: The ffmpeg package to use.
- services.epgstation.openFirewall: Open ports in the firewall for the EPGStation web interface.

::: {.warning}
Exposing EPGStation to the open internet is generally advised
against. Only use it inside a trusted local network, or consider
putting it behind a VPN if you want remote access.
:::

- services.epgstation.package: The epgstation package to use.
- services.epgstation.port: Alias of {option}`services.epgstation.settings.port`.
- services.epgstation.settings: Options to add to config.yml.

Documentation:
<https://github.com/l3tnun/EPGStation/blob/master/doc/conf-manual.md>

- services.epgstation.socketioPort: Alias of {option}`services.epgstation.settings.socketioPort`.
- services.epgstation.usePreconfiguredStreaming: Use preconfigured default streaming options.

Upstream defaults:
<https://github.com/l3tnun/EPGStation/blob/master/config/config.yml.template>

- services.epmd.enable: Whether to enable socket activation for Erlang Port Mapper Daemon (epmd),
which acts as a name server on all hosts involved in distributed
Erlang computations.

- services.epmd.listenStream: the listenStream used by the systemd socket.
see <https://www.freedesktop.org/software/systemd/man/systemd.socket.html#ListenStream=> for more information.
use this to change the port epmd will run on.
if not defined, epmd will use "[::]:4369"

- services.epmd.package: The erlang package to use.
- services.ergo.api.keyHash: Hex-encoded Blake2b256 hash of an API key as a 64-chars long Base16 string.
- services.ergo.api.listen.ip: IP address that the Ergo node API should listen on if {option}`api.keyHash` is defined.
- services.ergo.api.listen.port: Listen port for the API endpoint if {option}`api.keyHash` is defined.
- services.ergo.dataDir: The data directory for the Ergo node.
- services.ergo.enable: Whether to enable Ergo service.
- services.ergo.group: The group as which to run the Ergo node.
- services.ergo.listen.ip: IP address on which the Ergo node should listen.
- services.ergo.listen.port: Listen port for the Ergo node.
- services.ergo.openFirewall: Open ports in the firewall for the Ergo node as well as the API.
- services.ergo.testnet: Connect to testnet network instead of the default mainnet.
- services.ergo.user: The user as which to run the Ergo node.
- services.ergochat.configFile: Path to configuration file.
Setting this will skip any configuration done via `settings`

- services.ergochat.enable: Whether to enable Ergo IRC daemon.
- services.ergochat.openFilesLimit: Maximum number of open files. Limits the clients and server connections.

- services.ergochat.settings: Ergo IRC daemon configuration file.
https://raw.githubusercontent.com/ergochat/ergo/master/default.yaml

- services.erigon.enable: Whether to enable Ethereum implementation on the efficiency frontier.
- services.erigon.extraArgs: Additional arguments passed to Erigon
- services.erigon.package: The erigon package to use.
- services.erigon.secretJwtPath: Path to the secret jwt used for the http api authentication.

- services.erigon.settings: Configuration for Erigon
Refer to <https://github.com/ledgerwatch/erigon#usage> for details on supported values.

- services.errbot.instances: Errbot instance configs
- services.esdm.cuseRandomEnable
- services.esdm.cuseUrandomEnable
- services.esdm.enable: Whether to enable ESDM service configuration.
- services.esdm.enableLinuxCompatServices: Enable /dev/random, /dev/urandom and /proc/sys/kernel/random/* userspace wrapper.

- services.esdm.package: The esdm package to use.
- services.esdm.procEnable
- services.esdm.verbose
- services.espanso.enable: Whether to enable Espanso.
- services.espanso.package: The espanso package to use.
- services.esphome.address: esphome address
- services.esphome.allowedDevices: A list of device nodes to which {command}`esphome` has access to.
Refer to DeviceAllow in {manpage}`systemd.resource-control(5)` for more information.
Beware that if a device is referred to by an absolute path instead of a device category,
it will only allow devices that already are plugged in when the service is started.

- services.esphome.enable: Whether to enable esphome, for making custom firmwares for ESP32/ESP8266.
- services.esphome.enableUnixSocket: Listen on a unix socket `/run/esphome/esphome.sock` instead of the TCP port.
- services.esphome.openFirewall: Whether to open the firewall for the specified port.
- services.esphome.package: The esphome package to use.
- services.esphome.port: esphome port
- services.esphome.usePing: Use ping to check online status of devices instead of mDNS
- services.etcd.advertiseClientUrls: Etcd list of this member's client URLs to advertise to the rest of the cluster.
- services.etcd.certFile: Cert file to use for clients
- services.etcd.clientCertAuth: Whether to use certs for client authentication
- services.etcd.dataDir: Etcd data directory.
- services.etcd.discovery: Etcd discovery url
- services.etcd.enable: Whether to enable etcd.
- services.etcd.extraConf: Etcd extra configuration. See
<https://github.com/coreos/etcd/blob/master/Documentation/op-guide/configuration.md#configuration-flags>

- services.etcd.initialAdvertisePeerUrls: Etcd list of this member's peer URLs to advertise to rest of the cluster.
- services.etcd.initialCluster: Etcd initial cluster configuration for bootstrapping.
- services.etcd.initialClusterState: Etcd initial cluster configuration for bootstrapping.
- services.etcd.initialClusterToken: Etcd initial cluster token for etcd cluster during bootstrap.
- services.etcd.keyFile: Key file to use for clients
- services.etcd.listenClientUrls: Etcd list of URLs to listen on for client traffic.
- services.etcd.listenPeerUrls: Etcd list of URLs to listen on for peer traffic.
- services.etcd.name: Etcd unique node name.
- services.etcd.openFirewall: Open etcd ports in the firewall.
Ports opened:
- 2379/tcp for client requests
- 2380/tcp for peer communication

- services.etcd.package: The etcd package to use.
- services.etcd.peerCertFile: Cert file to use for peer to peer communication
- services.etcd.peerClientCertAuth: Whether to check all incoming peer requests from the cluster for valid client certificates signed by the supplied CA
- services.etcd.peerKeyFile: Key file to use for peer to peer communication
- services.etcd.peerTrustedCaFile: Certificate authority file to use for peer to peer communication
- services.etcd.trustedCaFile: Certificate authority file to use for clients
- services.etebase-server.customIni
- services.etebase-server.dataDir: Directory to store the Etebase server data.
- services.etebase-server.database
- services.etebase-server.enable: Whether to enable the Etebase server.

Once enabled you need to create an admin user by invoking the
shell command `etebase-server createsuperuser` with
the user specified by the `user` option or a superuser.
Then you can login and create accounts on your-etebase-server.com/admin

- services.etebase-server.host: Alias of {option}`services.etebase-server.settings.allowed_hosts.allowed_host1`.
- services.etebase-server.openFirewall: Whether to open ports in the firewall for the server.

- services.etebase-server.package: The etebase-server package to use.
- services.etebase-server.port: Port to listen on.
- services.etebase-server.secretFile: Alias of {option}`services.etebase-server.settings.secret_file`.
- services.etebase-server.settings: Configuration for `etebase-server`. Refer to
<https://github.com/etesync/server/blob/master/etebase-server.ini.example>
and <https://github.com/etesync/server/wiki>
for details on supported values.

- services.etebase-server.unixSocket: The path to the socket to bind to.
- services.etebase-server.user: User under which Etebase server runs.
- services.eternal-terminal.enable: Whether to enable Eternal Terminal server.
- services.eternal-terminal.logSize: The maximum log size.

- services.eternal-terminal.port: The port the server should listen on. Will use the server's default (2022) if not specified.

Make sure to open this port in the firewall if necessary.

- services.eternal-terminal.silent: If enabled, disables all logging.

- services.eternal-terminal.verbosity: The verbosity level (0-9).

- services.etesync-dav.apiUrl: The url to the etesync API.
- services.etesync-dav.enable: Whether to enable etesync-dav, end-to-end encrypted sync for contacts, calendars and tasks.
- services.etesync-dav.host: The server host address.
- services.etesync-dav.openFirewall: Whether to open the firewall for the specified port.
- services.etesync-dav.port: The server host port.
- services.etesync-dav.sslCertificate: Path to server SSL certificate. It will be copied into
etesync-dav's data directory.

- services.etesync-dav.sslCertificateKey: Path to server SSL certificate key.  It will be copied into
etesync-dav's data directory.

- services.ethercalc.enable: ethercalc, an online collaborative spreadsheet server.

Persistent state will be maintained under
{file}`/var/lib/ethercalc`. Upstream supports using a
redis server for storage and recommends the redis backend for
intensive use; however, the Nix module doesn't currently support
redis.

Note that while ethercalc is a good and robust project with an active
issue tracker, there haven't been new commits since the end of 2020.

- services.ethercalc.host: Address to listen on (use 0.0.0.0 to allow access from any address).
- services.ethercalc.package: The ethercalc package to use.
- services.ethercalc.port: Port to bind to.
- services.evcc.enable: Whether to enable EVCC, the extensible EV Charge Controller and Home Energy Management System.
- services.evcc.environmentFile: File with environment variables to pass into the runtime environment.

Useful to pass secrets into the configuration, that get applied using `envsubst`.

- services.evcc.extraArgs: Extra arguments to pass to the `evcc` executable.

- services.evcc.package: The evcc package to use.
- services.evcc.settings: evcc configuration as a Nix attribute set. Supports substitution of secrets using `envsubst` from the `environmentFile`.

Check for possible options in the sample [evcc.dist.yaml](https://github.com/andig/evcc/blob/0.209.2/evcc.dist.yaml).

- services.evdevremapkeys.enable: Whether to enable evdevremapkeys, a daemon to remap events on linux input devices.
- services.evdevremapkeys.settings: config.yaml for evdevremapkeys

- services.evremap.enable: Whether to enable evremap, a keyboard input remapper for Linux/Wayland systems.
- services.evremap.settings: Settings for evremap.

See the [upstream documentation](https://github.com/wez/evremap/blob/master/README.md#configuration)
for how to configure evremap.

- services.exhibitor
- services.exim.config: Verbatim Exim configuration.  This should not contain exim_user,
exim_group, exim_path, or spool_directory.

- services.exim.enable: Whether to enable the Exim mail transfer agent.
- services.exim.group: Group to use when no root privileges are required.

- services.exim.package: The exim package to use. This can be used to enable features such as LDAP or PAM support.

- services.exim.queueRunnerInterval: How often to spawn a new queue runner.

- services.exim.spoolDir: Location of the spool directory of exim.

- services.exim.user: User to use when no root privileges are required.
In particular, this applies when receiving messages and when doing
remote deliveries.  (Local deliveries run as various non-root users,
typically as the owner of a local mailbox.) Specifying this value
as root is not supported.

- services.expressvpn.enable: Enable the ExpressVPN daemon.

- services.factorio.admins: List of player names which will be admin.

- services.factorio.allowedPlayers: If non-empty, only these player names are allowed to connect. The game
will not be able to save any changes made in-game with the /whitelist
console command, though they will still take effect until the server
is restarted.

If empty, the whitelist defaults to open, but can be managed with the
in-game /whitelist console command (see: /help whitelist), which will
cause changes to be saved to the game's state directory (see also:
`stateDirName`).

- services.factorio.autosave-interval: Autosave interval in minutes.

- services.factorio.bind: The address to which the service should bind.

- services.factorio.configFile: The server's configuration file.

The default file generated by this module contains lines essential to
the server's operation. Use its contents as a basis for any
customizations.

- services.factorio.description: Description of the game that will appear in the listing.

- services.factorio.enable: Whether to enable Factorio.
- services.factorio.extraArgs: Extra command line arguments.
- services.factorio.extraSettings: Extra game configuration that will go into server-settings.json

- services.factorio.extraSettingsFile: File, which is dynamically applied to server-settings.json before
startup.

This option should be used for credentials.

For example a settings file could contain:
```json
{
  "game-password": "hunter1"
}
```

- services.factorio.game-name: Name of the game as it will appear in the game listing.

- services.factorio.game-password: Game password.

This option is insecure. Use extraSettingsFile instead.

- services.factorio.lan: Game will be broadcast on LAN.

- services.factorio.loadLatestSave: Load the latest savegame on startup. This overrides saveName, in that the latest
save will always be used even if a saved game of the given name exists. It still
controls the 'canonical' name of the savegame.

Set this to true to have the server automatically reload a recent autosave after
a crash or desync.

- services.factorio.mods: Mods the server should install and activate.

The derivations in this list must "build" the mod by simply copying
the .zip, named correctly, into the output directory. Eventually,
there will be a way to pull in the most up-to-date list of
derivations via nixos-channel. Until then, this is for experts only.

- services.factorio.mods-dat: Mods settings can be changed by specifying a dat file, in the [mod
settings file
format](https://wiki.factorio.com/Mod_settings_file_format).

- services.factorio.nonBlockingSaving: Highly experimental feature, enable only at your own risk of losing your saves.
On UNIX systems, server will fork itself to create an autosave.
Autosaving on connected Windows clients will be disabled regardless of autosave_only_on_server option.

- services.factorio.openFirewall: Whether to automatically open the specified UDP port in the firewall.

- services.factorio.package: The factorio-headless package to use.
- services.factorio.password: Your factorio.com login credentials. Required for games with visibility public.

This option is insecure. Use extraSettingsFile instead.

- services.factorio.port: The port to which the service should bind.

- services.factorio.public: Game will be published on the official Factorio matching server.

- services.factorio.requireUserVerification: When set to true, the server will only allow clients that have a valid factorio.com account.

- services.factorio.saveName: The name of the savegame that will be used by the server.

When not present in /var/lib/${config.services.factorio.stateDirName}/saves,
a new map with default settings will be generated before starting the service.

- services.factorio.stateDirName: Name of the directory under /var/lib holding the server's data.

The configuration and map will be stored here.

- services.factorio.token: Authentication token. May be used instead of 'password' above.

- services.factorio.username: Your factorio.com login credentials. Required for games with visibility public.

This option is insecure. Use extraSettingsFile instead.

- services.fail2ban.banaction: Default banning action (e.g. iptables, iptables-new, iptables-multiport,
iptables-ipset-proto6-allports, shorewall, etc). It is used to
define action_* variables. Can be overridden globally or per
section within jail.local file

- services.fail2ban.banaction-allports: Default banning action (e.g. iptables, iptables-new, iptables-multiport,
shorewall, etc) for "allports" jails. It is used to define action_* variables. Can be overridden
globally or per section within jail.local file

- services.fail2ban.bantime: Number of seconds that a host is banned.
- services.fail2ban.bantime-increment.enable: "bantime.increment" allows to use database for searching of previously banned ip's to increase
a default ban time using special formula, default it is banTime * 1, 2, 4, 8, 16, 32 ...

- services.fail2ban.bantime-increment.factor: "bantime.factor" is a coefficient to calculate exponent growing of the formula or common multiplier,
default value of factor is 1 and with default value of formula, the ban time grows by 1, 2, 4, 8, 16 ...

- services.fail2ban.bantime-increment.formula: "bantime.formula" used by default to calculate next value of ban time, default value below,
the same ban time growing will be reached by multipliers 1, 2, 4, 8, 16, 32 ...

- services.fail2ban.bantime-increment.maxtime: "bantime.maxtime" is the max number of seconds using the ban time can reach (don't grows further)

- services.fail2ban.bantime-increment.multipliers: "bantime.multipliers" used to calculate next value of ban time instead of formula, corresponding
previously ban count and given "bantime.factor" (for multipliers default is 1);
following example grows ban time by 1, 2, 4, 8, 16 ... and if last ban count greater as multipliers count,
always used last multiplier (64 in example), for factor '1' and original ban time 600 - 10.6 hours

- services.fail2ban.bantime-increment.overalljails: "bantime.overalljails" (if true) specifies the search of IP in the database will be executed
cross over all jails, if false (default), only current jail of the ban IP will be searched.

- services.fail2ban.bantime-increment.rndtime: "bantime.rndtime" is the max number of seconds using for mixing with random time
to prevent "clever" botnets calculate exact time IP can be unbanned again

- services.fail2ban.daemonConfig
- services.fail2ban.daemonSettings: The contents of Fail2ban's main configuration file.
It's generally not necessary to change it.

- services.fail2ban.enable: Whether to enable the fail2ban service.

See the documentation of [](#opt-services.fail2ban.jails)
for what jails are enabled by default.

- services.fail2ban.extraPackages: Extra packages to be made available to the fail2ban service. The example contains
the packages needed by the `iptables-ipset-proto6` action.

- services.fail2ban.extraSettings
- services.fail2ban.ignoreIP: "ignoreIP" can be a list of IP addresses, CIDR masks or DNS hosts. Fail2ban will not ban a host which
matches an address in this list. Several addresses can be defined using space (and/or comma) separator.

- services.fail2ban.jails: The configuration of each Fail2ban “jail”.  A jail
consists of an action (such as blocking a port using
{command}`iptables`) that is triggered when a
filter applied to a log file triggers more than a certain
number of times in a certain time period.  Actions are
defined in {file}`/etc/fail2ban/action.d`,
while filters are defined in
{file}`/etc/fail2ban/filter.d`.

NixOS comes with a default `sshd` jail;
for it to work well,
[](#opt-services.openssh.settings.LogLevel) should be set to
`"VERBOSE"` or higher so that fail2ban
can observe failed login attempts.
This module sets it to `"VERBOSE"` if
not set otherwise, so enabling fail2ban can make SSH logs
more verbose.

- services.fail2ban.maxretry: Number of failures before a host gets banned.
- services.fail2ban.package: The fail2ban package to use.
- services.fail2ban.packageFirewall: The firewall package used by fail2ban service. Defaults to the package for your firewall (iptables or nftables).
- services.fakeroute.enable: Whether to enable the fakeroute service.
- services.fakeroute.route: Fake route that will appear after the real
one to any host running a traceroute.

- services.fanout.bufferSize: Size of /dev/fanout buffer in bytes
- services.fanout.enable: Whether to enable fanout.
- services.fanout.fanoutDevices: Number of /dev/fanout devices
- services.fastnetmon-advanced.bgpPeers: BGP Peers to declaratively load into FastNetMon Advanced
- services.fastnetmon-advanced.enable: Whether to enable the fastnetmon-advanced DDoS Protection daemon.
- services.fastnetmon-advanced.enableAdvancedTrafficPersistence: Store historical flow data in clickhouse
- services.fastnetmon-advanced.hostgroups: Hostgroups to declaratively load into FastNetMon Advanced
- services.fastnetmon-advanced.settings: Extra configuration options to declaratively load into FastNetMon Advanced.

See the [FastNetMon Advanced Configuration options reference](https://fastnetmon.com/docs-fnm-advanced/fastnetmon-advanced-configuration-options/) for more details.

- services.fastnetmon-advanced.traffic_db.settings: Additional settings for /etc/fastnetmon/traffic_db.conf
- services.fcgiwrap.enable
- services.fcgiwrap.group
- services.fcgiwrap.instances: Configuration for fcgiwrap instances.
- services.fcgiwrap.preforkProcesses
- services.fcgiwrap.socketAddress
- services.fcgiwrap.socketType
- services.fcgiwrap.user
- services.fcron.allow: Users allowed to use fcrontab and fcrondyn (one name per
line, `all` for everyone).

- services.fcron.deny: Users forbidden from using fcron.
- services.fcron.enable: Whether to enable the {command}`fcron` daemon.
- services.fcron.maxSerialJobs: Maximum number of serial jobs which can run simultaneously.
- services.fcron.queuelen: Number of jobs the serial queue and the lavg queue can contain.
- services.fcron.systab: The "system" crontab contents.
- services.fedimintd: Specification of one or more fedimintd instances.
- services.fediwall.enable: Whether to enable fediwall, a social media wall for the fediverse.
- services.fediwall.hostName: The hostname to serve fediwall on.
- services.fediwall.nginx: Allows customizing the nginx virtualHost settings
- services.fediwall.package: The fediwall package to use.
- services.fediwall.settings: Fediwall configuration. See
https://github.com/defnull/fediwall/blob/main/public/wall-config.json.example
for information on supported values.

- services.felix.bundles: List of bundles that should be activated on startup
- services.felix.enable: Whether to enable the Apache Felix OSGi service.
- services.felix.group: Group account under which Apache Felix runs.
- services.felix.user: User account under which Apache Felix runs.
- services.ferm.config: Verbatim ferm.conf configuration.
- services.ferm.enable: Whether to enable Ferm Firewall.
*Warning*: Enabling this service WILL disable the existing NixOS
firewall! Default firewall rules provided by packages are not
considered at the moment.

- services.ferm.package: The ferm package to use.
- services.ferretdb.enable: Whether to enable FerretDB, an Open Source MongoDB alternative.
- services.ferretdb.package: The ferretdb package to use.
- services.ferretdb.settings: Additional configuration for FerretDB, see
<https://docs.ferretdb.io/configuration/flags/>
for supported values.

- services.fider.dataDir: Default data folder for Fider.
- services.fider.database.url: URI to use for the main PostgreSQL database. If this needs to include
credentials that shouldn't be world-readable in the Nix store, set an
environment file on the systemd service and override the
`DATABASE_URL` entry. Pass the string
`local` to setup a database on the local server.

- services.fider.enable: Whether to enable the Fider server.
- services.fider.environment: Environment variables to set for the service. Secrets should be
specified using {option}`environmentFiles`.
Refer to <https://github.com/getfider/fider/blob/stable/.example.env>
and <https://github.com/getfider/fider/blob/stable/app/pkg/env/env.go>
for available options.

- services.fider.environmentFiles: Files to load environment variables from. Loaded variables override
values set in {option}`environment`.

- services.fider.package: The fider package to use.
- services.filebeat.enable: Whether to enable filebeat.
- services.filebeat.inputs: Inputs specify how Filebeat locates and processes input data.

This is like `services.filebeat.settings.filebeat.inputs`,
but structured as an attribute set. This has the benefit
that multiple NixOS modules can contribute settings to a
single filebeat input.

An input type can be specified multiple times by choosing a
different `<name>` for each, but setting
[](#opt-services.filebeat.inputs._name_.type)
to the same value.

See <https://www.elastic.co/guide/en/beats/filebeat/current/configuration-filebeat-options.html>.

- services.filebeat.modules: Filebeat modules provide a quick way to get started
processing common log formats. They contain default
configurations, Elasticsearch ingest pipeline definitions,
and Kibana dashboards to help you implement and deploy a log
monitoring solution.

This is like `services.filebeat.settings.filebeat.modules`,
but structured as an attribute set. This has the benefit
that multiple NixOS modules can contribute settings to a
single filebeat module.

A module can be specified multiple times by choosing a
different `<name>` for each, but setting
[](#opt-services.filebeat.modules._name_.module)
to the same value.

See <https://www.elastic.co/guide/en/beats/filebeat/current/filebeat-modules.html>.

- services.filebeat.package: The filebeat package to use.
- services.filebeat.settings: Configuration for filebeat. See
<https://www.elastic.co/guide/en/beats/filebeat/current/filebeat-reference-yml.html>
for supported values.

Options containing secret data should be set to an attribute
set containing the attribute `_secret` - a
string pointing to a file containing the value the option
should be set to. See the example to get a better picture of
this: in the resulting
{file}`filebeat.yml` file, the
`output.elasticsearch.password`
key will be set to the contents of the
{file}`/var/keys/elasticsearch_password` file.

- services.filebrowser.enable: Whether to enable FileBrowser.
- services.filebrowser.group: Group under which FileBrowser runs.
- services.filebrowser.openFirewall: Whether to enable opening firewall ports for FileBrowser.
- services.filebrowser.package: The filebrowser package to use.
- services.filebrowser.settings: Settings for FileBrowser.
Refer to <https://filebrowser.org/cli/filebrowser#options> for all supported values.

- services.filebrowser.user: User account under which FileBrowser runs.
- services.filesender
- services.firebird.baseDir: Location containing data/ and system/ directories.
data/ stores the databases, system/ stores the password database security2.fdb.

- services.firebird.enable: Whether to enable the Firebird super server.
- services.firebird.package: The firebird package to use. For SuperServer use override: `pkgs.firebird_3.override { superServer = true; };`

- services.firebird.port: Port Firebird uses.

- services.firebird.user: User account under which firebird runs.

- services.firefly-iii.dataDir: The place where firefly-iii stores its state.

- services.firefly-iii.enable: Whether to enable Firefly III: A free and open source personal finance manager.
- services.firefly-iii.enableNginx: Whether to enable nginx or not. If enabled, an nginx virtual host will
be created for access to firefly-iii. If not enabled, then you may use
`${config.services.firefly-iii.package}` as your document root in
whichever webserver you wish to setup.

- services.firefly-iii.group: Group under which firefly-iii runs. It is best to set this to the group
of whatever webserver is being used as the frontend.

- services.firefly-iii.package: The firefly-iii package to use.
- services.firefly-iii.poolConfig: Options for the Firefly III PHP pool. See the documentation on <literal>php-fpm.conf</literal>
for details on configuration directives.

- services.firefly-iii.settings: Options for firefly-iii configuration. Refer to
<https://github.com/firefly-iii/firefly-iii/blob/main/.env.example> for
details on supported values. All <option>_FILE values supported by
upstream are supported here.

APP_URL will be the same as `services.firefly-iii.virtualHost` if the
former is unset in `services.firefly-iii.settings`.

- services.firefly-iii.user: User account under which firefly-iii runs.
- services.firefly-iii.virtualHost: The hostname at which you wish firefly-iii to be served. If you have
enabled nginx using `services.firefly-iii.enableNginx` then this will
be used.

- services.firefly-iii-data-importer.dataDir: The place where firefly-iii data importer stores its state.

- services.firefly-iii-data-importer.enable: Whether to enable Firefly III Data Importer.
- services.firefly-iii-data-importer.enableNginx: Whether to enable nginx or not. If enabled, an nginx virtual host will
be created for access to firefly-iii data importer. If not enabled, then you may use
`${config.services.firefly-iii-data-importer.package}` as your document root in
whichever webserver you wish to setup.

- services.firefly-iii-data-importer.group: Group under which firefly-iii-data-importer runs. It is best to set this to the group
of whatever webserver is being used as the frontend.

- services.firefly-iii-data-importer.package: The firefly-iii-data-importer package served by php-fpm and the webserver of choice.
This option can be used to point the webserver to the correct root. It
may also be used to set the package to a different version, say a
development version.

- services.firefly-iii-data-importer.poolConfig: Options for the Firefly III Data Importer PHP pool. See the documentation on <literal>php-fpm.conf</literal>
for details on configuration directives.

- services.firefly-iii-data-importer.settings: Options for firefly-iii data importer configuration. Refer to
<https://github.com/firefly-iii/data-importer/blob/main/.env.example> for
details on supported values. All <option>_FILE values supported by
upstream are supported here.

APP_URL will be the same as `services.firefly-iii-data-importer.virtualHost` if the
former is unset in `services.firefly-iii-data-importer.settings`.

- services.firefly-iii-data-importer.user: User account under which firefly-iii-data-importer runs.
- services.firefly-iii-data-importer.virtualHost: The hostname at which you wish firefly-iii-data-importer to be served. If you have
enabled nginx using `services.firefly-iii-data-importer.enableNginx` then this will
be used.

- services.firefox.syncserver
- services.firefox-syncserver.database.createLocally: Whether to create database and user on the local machine if they do not exist.
This includes enabling unix domain socket authentication for the configured user.

- services.firefox-syncserver.database.host: Database host name. `localhost` is treated specially and inserts
systemd dependencies, other hostnames or IP addresses of the local machine do not.

- services.firefox-syncserver.database.name: Database to use for storage. Will be created automatically if it does not exist
and `config.services.firefox-syncserver.database.createLocally` is set.

- services.firefox-syncserver.database.user: Username for database connections.

- services.firefox-syncserver.enable: Whether to enable the Firefox Sync storage service.

Out of the box this will not be very useful unless you also configure at least
one service and one nodes by inserting them into the mysql database manually, e.g.
by running

```
  INSERT INTO `services` (`id`, `service`, `pattern`) VALUES ('1', 'sync-1.5', '{node}/1.5/{uid}');
  INSERT INTO `nodes` (`id`, `service`, `node`, `available`, `current_load`,
      `capacity`, `downed`, `backoff`)
    VALUES ('1', '1', 'https://mydomain.tld', '1', '0', '10', '0', '0');
```

{option}`services.firefox-syncserver.singleNode.enable` does this automatically when enabled
.
- services.firefox-syncserver.logLevel: Log level to run with. This can be a simple log level like `error`
or `trace`, or a more complicated logging expression.

- services.firefox-syncserver.package: The syncstorage-rs package to use.
- services.firefox-syncserver.secrets: A file containing the various secrets. Should be in the format expected by systemd's
`EnvironmentFile` directory. Two secrets are currently available:
`SYNC_MASTER_SECRET` and
`SYNC_TOKENSERVER__FXA_METRICS_HASH_SECRET`.

- services.firefox-syncserver.settings: Settings for the sync server. These take priority over values computed
from NixOS options.

See the example config in
<https://github.com/mozilla-services/syncstorage-rs/blob/master/config/local.example.toml>
and the doc comments on the `Settings` structs in
<https://github.com/mozilla-services/syncstorage-rs/blob/master/syncstorage-settings/src/lib.rs>
and
<https://github.com/mozilla-services/syncstorage-rs/blob/master/tokenserver-settings/src/lib.rs>
for available options.

- services.firefox-syncserver.singleNode.capacity: How many sync accounts are allowed on this server. Setting this value
equal to or less than the number of currently active accounts will
effectively deny service to accounts not yet registered here.

- services.firefox-syncserver.singleNode.enable: Whether to enable auto-configuration for a simple single-node setup.
- services.firefox-syncserver.singleNode.enableNginx: Whether to enable nginx virtualhost definitions.
- services.firefox-syncserver.singleNode.enableTLS: Whether to enable automatic TLS setup.
- services.firefox-syncserver.singleNode.hostname: Host name to use for this service.

- services.firefox-syncserver.singleNode.url: URL of the host. If you are not using the automatic webserver proxy setup you will have
to change this setting or your sync server may not be functional.

- services.fireqos.config: The FireQOS configuration.

- services.fireqos.enable: Whether to enable FireQOS.
- services.firezone.gateway.apiUrl: The URL of your firezone server's API. This should be the same
as your server's setting for {option}`services.firezone.server.settings.api.externalUrl`,
but with `wss://` instead of `https://`.

- services.firezone.gateway.enable: Whether to enable the firezone gateway.

You have to manually masquerade and forward traffic from the
tun-firezone interface to your resource! Refer to the
[upstream setup script](https://github.com/firezone/firezone/blob/8c7c0a9e8e33ae790aeb75fdb5a15432c2870b79/scripts/gateway-systemd-install.sh#L154-L168)
for a list of iptable commands.

See the firezone nixos test in this repository for an nftables based example.

- services.firezone.gateway.enableTelemetry: Whether to enable telemetry.
- services.firezone.gateway.logLevel: The log level for the firezone application. See
[RUST_LOG](https://docs.rs/env_logger/latest/env_logger/#enabling-logging)
for the format.

- services.firezone.gateway.name: The name of this gateway as shown in firezone
- services.firezone.gateway.package: The firezone-gateway package to use.
- services.firezone.gateway.tokenFile: A file containing the firezone gateway token. Do not use a nix-store path here
as it will make the token publicly readable!

This file will be passed via systemd credentials, it should only be accessible
by the root user.

- services.firezone.gui-client.allowedUsers: All listed users will become part of the `firezone-client` group so
they can control the tunnel service. This is a convenience option.

- services.firezone.gui-client.enable: Whether to enable the firezone gui client.
- services.firezone.gui-client.logLevel: The log level for the firezone application. See
[RUST_LOG](https://docs.rs/env_logger/latest/env_logger/#enabling-logging)
for the format.

- services.firezone.gui-client.name: The name of this client as shown in firezone
- services.firezone.gui-client.package: The firezone-gui-client package to use.
- services.firezone.headless-client.apiUrl: The URL of your firezone server's API. This should be the same
as your server's setting for {option}`services.firezone.server.settings.api.externalUrl`,
but with `wss://` instead of `https://`.

- services.firezone.headless-client.enable: Whether to enable the firezone headless client.
- services.firezone.headless-client.enableTelemetry: Whether to enable telemetry.
- services.firezone.headless-client.logLevel: The log level for the firezone application. See
[RUST_LOG](https://docs.rs/env_logger/latest/env_logger/#enabling-logging)
for the format.

- services.firezone.headless-client.name: The name of this client as shown in firezone
- services.firezone.headless-client.package: The firezone-headless-client package to use.
- services.firezone.headless-client.tokenFile: A file containing the firezone client token. Do not use a nix-store path here
as it will make the token publicly readable!

This file will be passed via systemd credentials, it should only be accessible
by the root user.

- services.firezone.relay.apiUrl: The URL of your firezone server's API. This should be the same
as your server's setting for {option}`services.firezone.server.settings.api.externalUrl`,
but with `wss://` instead of `https://`.

- services.firezone.relay.enable: Whether to enable the firezone relay server.
- services.firezone.relay.enableTelemetry: Whether to enable telemetry.
- services.firezone.relay.highestPort: The highest port to use in TURN allocation
- services.firezone.relay.logLevel: The log level for the firezone application. See
[RUST_LOG](https://docs.rs/env_logger/latest/env_logger/#enabling-logging)
for the format.

- services.firezone.relay.lowestPort: The lowest port to use in TURN allocation
- services.firezone.relay.name: The name of this gateway as shown in firezone
- services.firezone.relay.openFirewall: Opens up the main STUN port and the TURN allocation range.
- services.firezone.relay.package: The firezone-relay package to use.
- services.firezone.relay.port: The port to listen on for STUN messages
- services.firezone.relay.publicIpv4: The public ipv4 address of this relay
- services.firezone.relay.publicIpv6: The public ipv6 address of this relay
- services.firezone.relay.tokenFile: A file containing the firezone relay token. Do not use a nix-store path here
as it will make the token publicly readable!

This file will be passed via systemd credentials, it should only be accessible
by the root user.

- services.firezone.server.api.address: The address to listen on
- services.firezone.server.api.enable: Whether to enable the Firezone api server.
- services.firezone.server.api.externalUrl: The external URL under which you will serve the api. You need to
setup a reverse proxy for TLS termination, either with
{option}`services.firezone.server.nginx.enable` or manually.

- services.firezone.server.api.package: The firezone-server-api package to use.
- services.firezone.server.api.port: The port under which the api will be served locally
- services.firezone.server.api.settings: Environment variables for this component of the Firezone server. For a
list of available variables, please refer to the [upstream definitions](https://github.com/firezone/firezone/blob/main/elixir/apps/domain/lib/domain/config/definitions.ex).
Some variables like `OUTBOUND_EMAIL_ADAPTER_OPTS` require json values
for which you can use `VAR = builtins.toJSON { /* ... */ }`.

This component will automatically inherit all variables defined via
{option}`services.firezone.server.settings` and
{option}`services.firezone.server.settingsSecret`, but which can be
overwritten by this option.

- services.firezone.server.api.trustedProxies: A list of trusted proxies
- services.firezone.server.clusterHosts: A list of components and their hosts that are part of this cluster. For
a single-machine setup, the default value will be sufficient. This
value will automatically set `ERLANG_CLUSTER_ADAPTER_CONFIG`.

The format is `<COMPONENT_NAME>@<HOSTNAME>`.

- services.firezone.server.domain.enable: Whether to enable the Firezone domain server.
- services.firezone.server.domain.package: The firezone-server-domain package to use.
- services.firezone.server.domain.settings: Environment variables for this component of the Firezone server. For a
list of available variables, please refer to the [upstream definitions](https://github.com/firezone/firezone/blob/main/elixir/apps/domain/lib/domain/config/definitions.ex).
Some variables like `OUTBOUND_EMAIL_ADAPTER_OPTS` require json values
for which you can use `VAR = builtins.toJSON { /* ... */ }`.

This component will automatically inherit all variables defined via
{option}`services.firezone.server.settings` and
{option}`services.firezone.server.settingsSecret`, but which can be
overwritten by this option.

- services.firezone.server.enable: Whether to enable all Firezone components.
- services.firezone.server.enableLocalDB: Whether to enable a local postgresql database for Firezone.
- services.firezone.server.nginx.enable: Whether to enable nginx virtualhost definition.
- services.firezone.server.openClusterFirewall: Opens up the erlang distribution port of all enabled components to
allow reaching the server cluster from the internet. You only need to
set this if you are actually distributing your cluster across multiple
machines.

- services.firezone.server.provision.accounts: All accounts to provision. The attribute name specified here will
become the account slug. By using `"{file:/path/to/file}"` as a
string value anywhere in these settings, the provisioning script will
replace that value with the content of the given file at runtime.

Please refer to the [Firezone source code](https://github.com/firezone/firezone/blob/main/elixir/apps/domain/lib/domain/accounts/account.ex)
for all available properties.

- services.firezone.server.provision.enable: Whether to enable provisioning of the Firezone domain server.
- services.firezone.server.settings: Environment variables for the Firezone server. For a list of available
variables, please refer to the [upstream definitions](https://github.com/firezone/firezone/blob/main/elixir/apps/domain/lib/domain/config/definitions.ex).
Some variables like `OUTBOUND_EMAIL_ADAPTER_OPTS` require json values
for which you can use `VAR = builtins.toJSON { /* ... */ }`.

Each component has an additional `settings` option which allows you to
override specific variables passed to that component.

- services.firezone.server.settingsSecret: This is a convenience option which allows you to set secret values for
environment variables by specifying a file which will contain the value
at runtime. Before starting the server, the content of each file will
be loaded into the respective environment variable.

Otherwise, this option is equivalent to
{option}`services.firezone.server.settings`. Refer to the settings
option for more information regarding the actual variables and how
filtering rules are applied for each component.

- services.firezone.server.smtp.configureManually: Outbound email configuration is mandatory for Firezone and supports
many different delivery adapters. Yet, most users will only need an
SMTP relay to send emails, so this configuration enforced by default.

If you want to utilize an alternative way to send emails (e.g. via a
supportd API-based service), enable this option and define
`OUTBOUND_EMAIL_FROM`, `OUTBOUND_EMAIL_ADAPTER` and
`OUTBOUND_EMAIL_ADAPTER_OPTS` manually via
{option}`services.firezone.server.settings` and/or
{option}`services.firezone.server.settingsSecret`.

The Firezone documentation holds [a list of supported Swoosh adapters](https://github.com/firezone/firezone/blob/main/website/src/app/docs/reference/env-vars/readme.mdx#outbound-emails).

- services.firezone.server.smtp.from: Outbound SMTP FROM address
- services.firezone.server.smtp.host: Outbound SMTP host
- services.firezone.server.smtp.implicitTls: Whether to use implicit TLS instead of STARTTLS (usually port 465)
- services.firezone.server.smtp.passwordFile: File containing the password for the given username. Beware that a file in the nix store will be world readable.
- services.firezone.server.smtp.port: Outbound SMTP port
- services.firezone.server.smtp.username: Username to authenticate against the SMTP relay
- services.firezone.server.web.address: The address to listen on
- services.firezone.server.web.enable: Whether to enable the Firezone web server.
- services.firezone.server.web.externalUrl: The external URL under which you will serve the web interface. You
need to setup a reverse proxy for TLS termination, either with
{option}`services.firezone.server.nginx.enable` or manually.

- services.firezone.server.web.package: The firezone-server-web package to use.
- services.firezone.server.web.port: The port under which the web interface will be served locally
- services.firezone.server.web.settings: Environment variables for this component of the Firezone server. For a
list of available variables, please refer to the [upstream definitions](https://github.com/firezone/firezone/blob/main/elixir/apps/domain/lib/domain/config/definitions.ex).
Some variables like `OUTBOUND_EMAIL_ADAPTER_OPTS` require json values
for which you can use `VAR = builtins.toJSON { /* ... */ }`.

This component will automatically inherit all variables defined via
{option}`services.firezone.server.settings` and
{option}`services.firezone.server.settingsSecret`, but which can be
overwritten by this option.

- services.firezone.server.web.trustedProxies: A list of trusted proxies
- services.flannel.backend: Type of backend to use and specific configurations for that backend.
- services.flannel.enable: Whether to enable flannel.
- services.flannel.etcd.caFile: Etcd certificate authority file
- services.flannel.etcd.certFile: Etcd cert file
- services.flannel.etcd.endpoints: Etcd endpoints
- services.flannel.etcd.keyFile: Etcd key file
- services.flannel.etcd.prefix: Etcd key prefix
- services.flannel.extraNetworkConfig: Extra configuration to be added to the net-conf.json/etcd-backed network configuration.
- services.flannel.iface: Interface to use (IP or name) for inter-host communication.
Defaults to the interface for the default route on the machine.

- services.flannel.kubeconfig: Path to kubeconfig to use for storing flannel config using the
Kubernetes API

- services.flannel.network: IPv4 network in CIDR format to use for the entire flannel network
- services.flannel.nodeName: Needed when running with Kubernetes as backend as this cannot be auto-detected";

- services.flannel.package: The flannel package to use.
- services.flannel.publicIp: IP accessible by other nodes for inter-host communication.
Defaults to the IP of the interface being used for communication.

- services.flannel.storageBackend: Determines where flannel stores its configuration at runtime
- services.flannel.subnetLen: The size of the subnet allocated to each host. Defaults to 24 (i.e. /24)
unless the Network was configured to be smaller than a /24 in which case
it is one less than the network.

- services.flannel.subnetMax: The end of IP range which the subnet allocation should start with.
Defaults to the last subnet of Network.

- services.flannel.subnetMin: The beginning of IP range which the subnet allocation should start with.
Defaults to the first subnet of Network.

- services.flaresolverr.enable: Whether to enable FlareSolverr, a proxy server to bypass Cloudflare protection.
- services.flaresolverr.openFirewall: Open the port in the firewall for FlareSolverr.
- services.flaresolverr.package: The flaresolverr package to use.
- services.flaresolverr.port: The port on which FlareSolverr will listen for incoming HTTP traffic.
- services.flarum.adminEmail: Email for first web application administrator
- services.flarum.adminUser: Username for first web application administrator
- services.flarum.baseUrl: Change `domain` instead.
- services.flarum.createDatabaseLocally: Create the database and database user locally, and run installation.

WARNING: Due to <https://github.com/flarum/framework/issues/4018>, this option is set
to false by default. The 'flarum install' command may delete existing database tables.
Only set this to true if you are certain you are working with a fresh, empty database.

- services.flarum.database: MySQL database parameters
- services.flarum.domain: Domain to serve on.
- services.flarum.enable: Whether to enable Flarum discussion platform.
- services.flarum.forumTitle: Title of the forum.
- services.flarum.group: System group to run Flarum
- services.flarum.initialAdminPassword: Initial password for the adminUser
- services.flarum.package: The flarum package to use.
- services.flarum.stateDir: Home directory for writable storage
- services.flarum.user: System user to run Flarum
- services.flashpolicyd
- services.flatpak.enable: Whether to enable flatpak.
- services.flatpak.extraPortals: Alias of {option}`xdg.portal.extraPortals`.
- services.flatpak.overrides: Applies the provided attribute set into a Flatpak overrides file with the
same structure, keeping externally applied changes.

- services.flatpak.package: The flatpak package to use.
- services.flatpak.packages: Declares a list of applications to install.

- services.flatpak.remotes: Declare a list of flatpak repositories.

- services.flatpak.restartOnFailure: If enabled, restart the flatpak-managed-install service in case of failure.
It is possible to specify a restart delay and an exponential backoff strategy.

- services.flatpak.uninstallUnmanaged: If enabled, uninstall packages and delete remotes not managed by this module on activation.
I.e. if packages were installed via Flatpak directly instead of this module,
they would get uninstalled on the next activation. The same applies to remotes manually setup via `flatpak remote-add`

- services.flatpak.uninstallUnmanagedPackages: uninstallUnmanagedPackages is deprecated. Use uninstallUnmanaged instead.
- services.flatpak.uninstallUnused: If enabled, uninstalls unused packages and runtimes.
Defaults to `config.services.flatpak.uninstallUnmanaged`, or `false`.

- services.flatpak.update: Whether to enable flatpak to upgrade applications during
{command}`nixos` system activation. The default is `false`
so that repeated invocations of {command}`nixos-rebuild switch` are idempotent.

Applications pinned to a specific commit hash will not be updated.

If {command}`auto.enable = true` a periodic update will be scheduled with (approximately)
weekly recurrence.

See https://wiki.archlinux.org/title/systemd/Timers for more information on systemd timers.

- services.flexget.config: The YAML configuration for FlexGet.
- services.flexget.enable: Whether to enable FlexGet daemon.
- services.flexget.homeDir: Where files live.
- services.flexget.interval: When to perform a {command}`flexget` run. See {command}`man 7 systemd.time` for the format.
- services.flexget.package: The flexget package to use.
- services.flexget.systemScheduler: When true, execute the runs via the flexget-runner.timer. If false, you have to specify the settings yourself in the YML file.
- services.flexget.user: The user under which to run flexget.
- services.flood.enable: Whether to enable flood.
- services.flood.extraArgs: Extra arguments passed to `flood`.
- services.flood.host: Host to bind webserver.
- services.flood.openFirewall: Whether to open the firewall for the port in {option}`services.flood.port`.
- services.flood.package: The flood package to use.
- services.flood.port: Port to bind webserver.
- services.fluent-bit.configurationFile: Fluent Bit configuration. See
<https://docs.fluentbit.io/manual/administration/configuring-fluent-bit/yaml>
for supported values.

{option}`configurationFile` takes precedence over {option}`settings`.

Note: Restricted evaluation blocks access to paths outside the Nix store.
This means detecting content changes for mutable paths (i.e. not input or content-addressed) can't be done.
As a result, `nixos-rebuild` won't reload/restart the systemd unit when mutable path contents change.
`systemctl restart fluent-bit.service` must be used instead.

- services.fluent-bit.enable: Whether to enable Fluent Bit.
- services.fluent-bit.graceLimit: The grace time limit. Sets the systemd unit's `TimeoutStopSec`.

The `service.grace` option in the Fluent Bit configuration should be ≤ this option.

- services.fluent-bit.package: The fluent-bit package to use.
- services.fluent-bit.settings: See {option}`configurationFile`.

{option}`configurationFile` takes precedence over {option}`settings`.

- services.fluentd.config: Fluentd config.
- services.fluentd.enable: Whether to enable fluentd, a data/log collector.
- services.fluentd.package: The fluentd package to use.
- services.fluentd.plugins: A list of plugin paths to pass into fluentd. It will make plugins defined in ruby files
there available in your config.

- services.fluidd.enable: Whether to enable Fluidd, a Klipper web interface for managing your 3d printer.
- services.fluidd.hostName: Hostname to serve fluidd on
- services.fluidd.nginx: Extra configuration for the nginx virtual host of fluidd.
- services.fluidd.package: The fluidd package to use.
- services.foldingAtHome: Alias of {option}`services.foldingathome`.
- services.foldingathome.config
- services.foldingathome.daemonNiceLevel: Daemon process priority for FAHClient.
0 is the default Unix process priority, 19 is the lowest.

- services.foldingathome.enable: Whether to enable Folding@home client.
- services.foldingathome.extraArgs: Extra startup options for the FAHClient. Run
`fah-client --help` to find all the available options.

- services.foldingathome.nickname: Alias of {option}`services.foldingathome.user`.
- services.foldingathome.package: The fahclient package to use.
- services.foldingathome.team: The team ID associated with the reported computation results. This
will be used in the ranking statistics.

By default, use the NixOS folding@home team ID is being used.

- services.foldingathome.user: The user associated with the reported computation results. This will
be used in the ranking statistics.

- services.forgejo.appName: Alias of {option}`services.forgejo.settings.DEFAULT.APP_NAME`.
- services.forgejo.cookieSecure: Alias of {option}`services.forgejo.settings.session.COOKIE_SECURE`.
- services.forgejo.customDir: Base directory for custom templates and other options.

If {option}`services.forgejo.useWizard` is disabled (default), this directory will also
hold secrets and the resulting {file}`app.ini` config at runtime.

- services.forgejo.database
- services.forgejo.disableRegistration: Alias of {option}`services.forgejo.settings.service.DISABLE_REGISTRATION`.
- services.forgejo.domain: Alias of {option}`services.forgejo.settings.server.DOMAIN`.
- services.forgejo.dump
- services.forgejo.enable: Whether to enable Forgejo, a software forge.
- services.forgejo.enableUnixSocket
- services.forgejo.extraConfig
- services.forgejo.group: Group under which Forgejo runs.
- services.forgejo.httpAddress: Alias of {option}`services.forgejo.settings.server.HTTP_ADDR`.
- services.forgejo.httpPort: Alias of {option}`services.forgejo.settings.server.HTTP_PORT`.
- services.forgejo.lfs.contentDir: Where to store LFS files.
- services.forgejo.lfs.enable: Enables git-lfs support.
- services.forgejo.log.level: Alias of {option}`services.forgejo.settings.log.LEVEL`.
- services.forgejo.log.rootPath: Alias of {option}`services.forgejo.settings.log.ROOT_PATH`.
- services.forgejo.mailerPasswordFile: Alias of {option}`services.forgejo.secrets.mailer.PASSWD`.
- services.forgejo.package: The forgejo-lts package to use.
- services.forgejo.repositoryRoot: Path to the git repositories.
- services.forgejo.rootUrl: Alias of {option}`services.forgejo.settings.server.ROOT_URL`.
- services.forgejo.secrets: This is a small wrapper over systemd's `LoadCredential`.

It takes the same sections and keys as {option}`services.forgejo.settings`,
but the value of each key is a path instead of a string or bool.

The path is then loaded as credential, exported as environment variable
and then feed through
<https://codeberg.org/forgejo/forgejo/src/branch/forgejo/contrib/environment-to-ini/environment-to-ini.go>.

It does the required environment variable escaping for you.

::: {.note}
Keys specified here take priority over the ones in {option}`services.forgejo.settings`!
:::

- services.forgejo.settings: Free-form settings written directly to the `app.ini` configfile file.
Refer to <https://forgejo.org/docs/latest/admin/config-cheat-sheet/> for supported values.

- services.forgejo.ssh.clonePort: Alias of {option}`services.forgejo.settings.server.SSH_PORT`.
- services.forgejo.ssh.enable
- services.forgejo.stateDir: Forgejo data directory.
- services.forgejo.staticRootPath: Alias of {option}`services.forgejo.settings.server.STATIC_ROOT_PATH`.
- services.forgejo.useWizard: Whether to use the built-in installation wizard instead of
declaratively managing the {file}`app.ini` config file in nix.

- services.forgejo.user: User account under which Forgejo runs.
- services.foundationdb.backupProcesses: Number of backup_agent processes to run for snapshots.
- services.foundationdb.class: Process class
- services.foundationdb.dataDir: Data directory. All cluster data will be put under here.
- services.foundationdb.enable: Whether to enable FoundationDB Server.
- services.foundationdb.extraReadWritePaths: An extra set of filesystem paths that FoundationDB can read to
and write from. By default, FoundationDB runs under a heavily
namespaced systemd environment without write access to most of
the filesystem outside of its data and log directories. By
adding paths to this list, the set of writeable paths will be
expanded. This is useful for allowing e.g. backups to local files,
which must be performed on behalf of the foundationdb service.

- services.foundationdb.group: Group account under which FoundationDB runs.
- services.foundationdb.listenAddress: Publicly visible IP address of the process. Port is determined by process ID
- services.foundationdb.listenPortStart: Starting port number for database listening sockets. Every FDB process binds to a
subsequent port, to this number reflects the start of the overall range. e.g. having
8 server processes will use all ports between 4500 and 4507.

- services.foundationdb.locality: FoundationDB locality settings.

- services.foundationdb.logDir: Log directory.
- services.foundationdb.logSize: Roll over to a new log file after the current log file
reaches the specified size.

- services.foundationdb.maxLogSize: Delete the oldest log file when the total size of all log
files exceeds the specified size. If set to 0, old log files
will not be deleted.

- services.foundationdb.memory: Maximum memory used by the process. The default value is
`8GiB`. When specified without a unit,
`MiB` is assumed. This parameter does not
change the memory allocation of the program. Rather, it sets
a hard limit beyond which the process will kill itself and
be restarted. The default value of `8GiB`
is double the intended memory usage in the default
configuration (providing an emergency buffer to deal with
memory leaks or similar problems). It is not recommended to
decrease the value of this parameter below its default
value. It may be increased if you wish to allocate a very
large amount of storage engine memory or cache. In
particular, when the `storageMemory`
parameter is increased, the `memory`
parameter should be increased by an equal amount.

- services.foundationdb.openFirewall: Open the firewall ports corresponding to FoundationDB processes and coordinators
using {option}`config.networking.firewall.*`.

- services.foundationdb.package: The FoundationDB package to use for this server. This must be specified by the user
in order to ensure migrations and upgrades are controlled appropriately.

- services.foundationdb.pidfile: Path to pidfile for fdbmonitor.
- services.foundationdb.publicAddress: Publicly visible IP address of the process. Port is determined by process ID
- services.foundationdb.restartDelay: Number of seconds to wait before restarting servers.
- services.foundationdb.serverProcesses: Number of fdbserver processes to run.
- services.foundationdb.storageMemory: Maximum memory used for data storage. The default value is
`1GiB`. When specified without a unit,
`MB` is assumed. Clusters using the memory
storage engine will be restricted to using this amount of
memory per process for purposes of data storage. Memory
overhead associated with storing the data is counted against
this total. If you increase the
`storageMemory`, you should also increase
the `memory` parameter by the same amount.

- services.foundationdb.tls: FoundationDB Transport Security Layer (TLS) settings.

- services.foundationdb.traceFormat: Trace logging format.
- services.foundationdb.user: User account under which FoundationDB runs.
- services.fourStore
- services.fourStoreEndpoint
- services.fprintd.enable: Whether to enable fprintd daemon and PAM module for fingerprint readers handling.
- services.fprintd.package: fprintd package to use.

- services.fprintd.tod.driver: Touch OEM Drivers (TOD) package to use.

- services.fprintd.tod.enable: Whether to enable Touch OEM Drivers library support.
- services.fprot
- services.frab
- services.fractalart.enable: Enable FractalArt for generating colorful wallpapers on login
- services.fractalart.height: Screen height
- services.fractalart.width: Screen width
- services.freeciv.enable: Whether to enable freeciv.
- services.freeciv.openFirewall: Whether to enable opening the firewall for the port listening for clients.
- services.freeciv.settings: Parameters of freeciv-server.

- services.freefall.devices: Device paths to all internal spinning hard drives.

- services.freefall.enable: Whether to protect HP/Dell laptop hard drives (not SSDs) in free fall.

- services.freefall.package: The freefall package to use.
- services.freenet.enable: Whether to enable Freenet daemon.
- services.freenet.nice: Set the nice level for the Freenet daemon
- services.freeradius.configDir: The path of the freeradius server configuration directory.

- services.freeradius.debug: Whether to enable debug logging for freeradius (-xx
option). This should not be left on, since it includes
sensitive data such as passwords in the logs.

- services.freeradius.enable: Whether to enable the freeradius server.
- services.freeradius.package: The freeradius package to use.
- services.freeswitch.configDir: Override file in FreeSWITCH config template directory.
Each top-level attribute denotes a file path in the configuration directory, its value is the file path.
See [FreeSWITCH documentation](https://freeswitch.org/confluence/display/FREESWITCH/Default+Configuration) for more info.
Also check available templates in [FreeSWITCH repository](https://github.com/signalwire/freeswitch/tree/master/conf).

- services.freeswitch.configTemplate: Configuration template to use.
See available templates in [FreeSWITCH repository](https://github.com/signalwire/freeswitch/tree/master/conf).
You can also set your own configuration directory.

- services.freeswitch.enable: Whether to enable FreeSWITCH.
- services.freeswitch.enableReload: Issue the `reloadxml` command to FreeSWITCH when configuration directory changes (instead of restart).
See [FreeSWITCH documentation](https://freeswitch.org/confluence/display/FREESWITCH/Reloading) for more info.
The configuration directory is exposed at {file}`/etc/freeswitch`.
See also `systemd.services.*.restartIfChanged`.

- services.freeswitch.package: The freeswitch package to use.
- services.freshrss.authType: Authentication type for FreshRSS.
- services.freshrss.baseUrl: Default URL for FreshRSS.
- services.freshrss.dataDir: Default data folder for FreshRSS.
- services.freshrss.database
- services.freshrss.defaultUser: Default username for FreshRSS.
- services.freshrss.enable: Whether to enable FreshRSS RSS aggregator and reader with php-fpm backend.
- services.freshrss.extensions: Additional extensions to be used.
- services.freshrss.language: Default language for FreshRSS.
- services.freshrss.package: The freshrss package to use.
- services.freshrss.passwordFile: Password for the defaultUser for FreshRSS.
- services.freshrss.pool: Name of the php-fpm pool to use and setup. If not specified, a pool will be created
with default values.

- services.freshrss.user: User under which FreshRSS runs.
- services.freshrss.virtualHost: Name of the caddy/nginx virtualhost to use and setup.

- services.freshrss.webserver: Whether to use nginx or caddy for virtual host management.

Further nginx configuration can be done by adapting `services.nginx.virtualHosts.<name>`.
See [](#opt-services.nginx.virtualHosts) for further information.

Further caddy configuration can be done by adapting `services.caddy.virtualHosts.<name>`.
See [](#opt-services.caddy.virtualHosts) for further information.

- services.frigate.checkConfig: Whether to check the configuration at build time.

- services.frigate.enable: Whether to enable Frigate NVR.
- services.frigate.hostname: Hostname of the nginx vhost to configure.

Only nginx is supported by upstream for direct reverse proxying.

- services.frigate.package: The frigate package to use.
- services.frigate.settings: Frigate configuration as a nix attribute set.

See the project documentation for how to configure frigate.
- [Creating a config file](https://docs.frigate.video/guides/getting_started)
- [Configuration reference](https://docs.frigate.video/configuration/index)

- services.frigate.vaapiDriver: Force usage of a particular VA-API driver for video acceleration. Use together with `settings.ffmpeg.hwaccel_args`.

Setting this *is not required* for VA-API to work, but it can help steer VA-API towards the correct card if you have multiple.

:::{.note}
For VA-API to work you must enable {option}`hardware.graphics.enable` (sufficient for AMDGPU) and pass for example
`pkgs.intel-media-driver` (required for Intel 5th Gen. and newer) into {option}`hardware.graphics.extraPackages`.
:::

See also:

- <https://docs.frigate.video/configuration/hardware_acceleration>
- <https://docs.frigate.video/configuration/ffmpeg_presets#hwaccel-presets>

- services.froide-govplan.dataDir: Directory to store the Froide-Govplan server data.
- services.froide-govplan.enable: Whether to enable Gouvernment planer web app Govplan.
- services.froide-govplan.hostName: FQDN for the froide-govplan instance.
- services.froide-govplan.package: The froide-govplan package to use.
- services.froide-govplan.secretKeyFile: Path to a file containing the secret key.

- services.froide-govplan.settings: Configuration options to set in `extra_settings.py`.

- services.frp.enable: Whether to enable frp.
- services.frp.package: The frp package to use.
- services.frp.role: The frp consists of `client` and `server`. The server is usually
deployed on the machine with a public IP address, and
the client is usually deployed on the machine
where the Intranet service to be penetrated resides.

- services.frp.settings: Frp configuration, for configuration options
see the example of [client](https://github.com/fatedier/frp/blob/dev/conf/frpc_full_example.toml)
or [server](https://github.com/fatedier/frp/blob/dev/conf/frps_full_example.toml) on github.

- services.frr.babel.config
- services.frr.babel.configFile
- services.frr.babel.enable: Alias of {option}`services.frr.babeld.enable`.
- services.frr.babel.extraOptions: Alias of {option}`services.frr.babeld.extraOptions`.
- services.frr.babel.vtyListenAddress
- services.frr.babel.vtyListenPort
- services.frr.babeld.enable: Whether to enable FRR babeld.
- services.frr.babeld.extraOptions: Extra options to be appended to the FRR babeld daemon options.

- services.frr.babeld.options: Options for the FRR babeld daemon.

- services.frr.bfd.config
- services.frr.bfd.configFile
- services.frr.bfd.enable: Alias of {option}`services.frr.bfdd.enable`.
- services.frr.bfd.extraOptions: Alias of {option}`services.frr.bfdd.extraOptions`.
- services.frr.bfd.vtyListenAddress
- services.frr.bfd.vtyListenPort
- services.frr.bfdd.enable: Whether to enable FRR bfdd.
- services.frr.bfdd.extraOptions: Extra options to be appended to the FRR bfdd daemon options.

- services.frr.bfdd.options: Options for the FRR bfdd daemon.

- services.frr.bgp.config
- services.frr.bgp.configFile
- services.frr.bgp.enable: Alias of {option}`services.frr.bgpd.enable`.
- services.frr.bgp.extraOptions: Alias of {option}`services.frr.bgpd.extraOptions`.
- services.frr.bgp.vtyListenAddress
- services.frr.bgp.vtyListenPort
- services.frr.bgpd.enable: Whether to enable FRR bgpd.
- services.frr.bgpd.extraOptions: Extra options to be appended to the FRR bgpd daemon options.

- services.frr.bgpd.options: Options for the FRR bgpd daemon.

- services.frr.config: FRR configuration statements.

- services.frr.configFile: Configuration file to use for FRR.
By default the NixOS generated files are used.

- services.frr.eigrp.config
- services.frr.eigrp.configFile
- services.frr.eigrp.enable: Alias of {option}`services.frr.eigrpd.enable`.
- services.frr.eigrp.extraOptions: Alias of {option}`services.frr.eigrpd.extraOptions`.
- services.frr.eigrp.vtyListenAddress
- services.frr.eigrp.vtyListenPort
- services.frr.eigrpd.enable: Whether to enable FRR eigrpd.
- services.frr.eigrpd.extraOptions: Extra options to be appended to the FRR eigrpd daemon options.

- services.frr.eigrpd.options: Options for the FRR eigrpd daemon.

- services.frr.fabric.config
- services.frr.fabric.configFile
- services.frr.fabric.enable: Alias of {option}`services.frr.fabricd.enable`.
- services.frr.fabric.extraOptions: Alias of {option}`services.frr.fabricd.extraOptions`.
- services.frr.fabric.vtyListenAddress
- services.frr.fabric.vtyListenPort
- services.frr.fabricd.enable: Whether to enable FRR fabricd.
- services.frr.fabricd.extraOptions: Extra options to be appended to the FRR fabricd daemon options.

- services.frr.fabricd.options: Options for the FRR fabricd daemon.

- services.frr.isis.config
- services.frr.isis.configFile
- services.frr.isis.enable: Alias of {option}`services.frr.isisd.enable`.
- services.frr.isis.extraOptions: Alias of {option}`services.frr.isisd.extraOptions`.
- services.frr.isis.vtyListenAddress
- services.frr.isis.vtyListenPort
- services.frr.isisd.enable: Whether to enable FRR isisd.
- services.frr.isisd.extraOptions: Extra options to be appended to the FRR isisd daemon options.

- services.frr.isisd.options: Options for the FRR isisd daemon.

- services.frr.ldp.config
- services.frr.ldp.configFile
- services.frr.ldp.enable: Alias of {option}`services.frr.ldpd.enable`.
- services.frr.ldp.extraOptions: Alias of {option}`services.frr.ldpd.extraOptions`.
- services.frr.ldp.vtyListenAddress
- services.frr.ldp.vtyListenPort
- services.frr.ldpd.enable: Whether to enable FRR ldpd.
- services.frr.ldpd.extraOptions: Extra options to be appended to the FRR ldpd daemon options.

- services.frr.ldpd.options: Options for the FRR ldpd daemon.

- services.frr.mgmt.config
- services.frr.mgmt.configFile
- services.frr.mgmt.enable
- services.frr.mgmt.extraOptions: Alias of {option}`services.frr.mgmtd.extraOptions`.
- services.frr.mgmt.vtyListenAddress
- services.frr.mgmt.vtyListenPort
- services.frr.mgmtd.extraOptions: Extra options to be appended to the FRR mgmtd daemon options.

- services.frr.mgmtd.options: Options for the FRR mgmtd daemon.

- services.frr.nhrp.config
- services.frr.nhrp.configFile
- services.frr.nhrp.enable: Alias of {option}`services.frr.nhrpd.enable`.
- services.frr.nhrp.extraOptions: Alias of {option}`services.frr.nhrpd.extraOptions`.
- services.frr.nhrp.vtyListenAddress
- services.frr.nhrp.vtyListenPort
- services.frr.nhrpd.enable: Whether to enable FRR nhrpd.
- services.frr.nhrpd.extraOptions: Extra options to be appended to the FRR nhrpd daemon options.

- services.frr.nhrpd.options: Options for the FRR nhrpd daemon.

- services.frr.openFilesLimit: This is the maximum number of FD's that will be available.  Use a
reasonable value for your setup if you are expecting a large number
of peers in say BGP.

- services.frr.ospf.config
- services.frr.ospf.configFile
- services.frr.ospf.enable: Alias of {option}`services.frr.ospfd.enable`.
- services.frr.ospf.extraOptions: Alias of {option}`services.frr.ospfd.extraOptions`.
- services.frr.ospf.vtyListenAddress
- services.frr.ospf.vtyListenPort
- services.frr.ospf6.config
- services.frr.ospf6.configFile
- services.frr.ospf6.enable: Alias of {option}`services.frr.ospf6d.enable`.
- services.frr.ospf6.extraOptions: Alias of {option}`services.frr.ospf6d.extraOptions`.
- services.frr.ospf6.vtyListenAddress
- services.frr.ospf6.vtyListenPort
- services.frr.ospf6d.enable: Whether to enable FRR ospf6d.
- services.frr.ospf6d.extraOptions: Extra options to be appended to the FRR ospf6d daemon options.

- services.frr.ospf6d.options: Options for the FRR ospf6d daemon.

- services.frr.ospfd.enable: Whether to enable FRR ospfd.
- services.frr.ospfd.extraOptions: Extra options to be appended to the FRR ospfd daemon options.

- services.frr.ospfd.options: Options for the FRR ospfd daemon.

- services.frr.pathd.enable: Whether to enable FRR pathd.
- services.frr.pathd.extraOptions: Extra options to be appended to the FRR pathd daemon options.

- services.frr.pathd.options: Options for the FRR pathd daemon.

- services.frr.pbr.config
- services.frr.pbr.configFile
- services.frr.pbr.enable: Alias of {option}`services.frr.pbrd.enable`.
- services.frr.pbr.extraOptions: Alias of {option}`services.frr.pbrd.extraOptions`.
- services.frr.pbr.vtyListenAddress
- services.frr.pbr.vtyListenPort
- services.frr.pbrd.enable: Whether to enable FRR pbrd.
- services.frr.pbrd.extraOptions: Extra options to be appended to the FRR pbrd daemon options.

- services.frr.pbrd.options: Options for the FRR pbrd daemon.

- services.frr.pim.config
- services.frr.pim.configFile
- services.frr.pim.enable: Alias of {option}`services.frr.pimd.enable`.
- services.frr.pim.extraOptions: Alias of {option}`services.frr.pimd.extraOptions`.
- services.frr.pim.vtyListenAddress
- services.frr.pim.vtyListenPort
- services.frr.pim6d.enable: Whether to enable FRR pim6d.
- services.frr.pim6d.extraOptions: Extra options to be appended to the FRR pim6d daemon options.

- services.frr.pim6d.options: Options for the FRR pim6d daemon.

- services.frr.pimd.enable: Whether to enable FRR pimd.
- services.frr.pimd.extraOptions: Extra options to be appended to the FRR pimd daemon options.

- services.frr.pimd.options: Options for the FRR pimd daemon.

- services.frr.rip.config
- services.frr.rip.configFile
- services.frr.rip.enable: Alias of {option}`services.frr.ripd.enable`.
- services.frr.rip.extraOptions: Alias of {option}`services.frr.ripd.extraOptions`.
- services.frr.rip.vtyListenAddress
- services.frr.rip.vtyListenPort
- services.frr.ripd.enable: Whether to enable FRR ripd.
- services.frr.ripd.extraOptions: Extra options to be appended to the FRR ripd daemon options.

- services.frr.ripd.options: Options for the FRR ripd daemon.

- services.frr.ripng.config
- services.frr.ripng.configFile
- services.frr.ripng.enable: Alias of {option}`services.frr.ripngd.enable`.
- services.frr.ripng.extraOptions: Alias of {option}`services.frr.ripngd.extraOptions`.
- services.frr.ripng.vtyListenAddress
- services.frr.ripng.vtyListenPort
- services.frr.ripngd.enable: Whether to enable FRR ripngd.
- services.frr.ripngd.extraOptions: Extra options to be appended to the FRR ripngd daemon options.

- services.frr.ripngd.options: Options for the FRR ripngd daemon.

- services.frr.sharp.config
- services.frr.sharp.configFile
- services.frr.sharp.enable: Alias of {option}`services.frr.sharpd.enable`.
- services.frr.sharp.extraOptions: Alias of {option}`services.frr.sharpd.extraOptions`.
- services.frr.sharp.vtyListenAddress
- services.frr.sharp.vtyListenPort
- services.frr.sharpd.enable: Whether to enable FRR sharpd.
- services.frr.sharpd.extraOptions: Extra options to be appended to the FRR sharpd daemon options.

- services.frr.sharpd.options: Options for the FRR sharpd daemon.

- services.frr.static.config
- services.frr.static.configFile
- services.frr.static.enable
- services.frr.static.extraOptions: Alias of {option}`services.frr.staticd.extraOptions`.
- services.frr.static.vtyListenAddress
- services.frr.static.vtyListenPort
- services.frr.staticd.extraOptions: Extra options to be appended to the FRR staticd daemon options.

- services.frr.staticd.options: Options for the FRR staticd daemon.

- services.frr.vrrpd.enable: Whether to enable FRR vrrpd.
- services.frr.vrrpd.extraOptions: Extra options to be appended to the FRR vrrpd daemon options.

- services.frr.vrrpd.options: Options for the FRR vrrpd daemon.

- services.frr.zebra.config
- services.frr.zebra.configFile
- services.frr.zebra.enable
- services.frr.zebra.extraOptions: Extra options to be appended to the FRR zebra daemon options.

- services.frr.zebra.options: Options for the FRR zebra daemon.

- services.frr.zebra.vtyListenAddress
- services.frr.zebra.vtyListenPort
- services.fstrim.enable: Whether to enable periodic SSD TRIM of mounted partitions in background.
- services.fstrim.interval: How often we run fstrim. For most desktop and server systems
a sufficient trimming frequency is once a week.

The format is described in
{manpage}`systemd.time(7)`.

- services.fusionInventory.enable: Whether to enable Fusion Inventory Agent.
- services.fusionInventory.extraConfig: Configuration that is injected verbatim into the configuration file.

- services.fusionInventory.servers: The urls of the OCS/GLPI servers to connect to.

- services.fwupd.blacklistDevices: Alias of {option}`services.fwupd.daemonSettings.DisabledDevices`.
- services.fwupd.blacklistPlugins: Alias of {option}`services.fwupd.daemonSettings.DisabledPlugins`.
- services.fwupd.daemonSettings: Configurations for the fwupd daemon.

- services.fwupd.disabledDevices: Alias of {option}`services.fwupd.daemonSettings.DisabledDevices`.
- services.fwupd.disabledPlugins: Alias of {option}`services.fwupd.daemonSettings.DisabledPlugins`.
- services.fwupd.enable: Whether to enable fwupd, a DBus service that allows
applications to update firmware.

- services.fwupd.enableTestRemote
- services.fwupd.extraRemotes: Enables extra remotes in fwupd. See `/etc/fwupd/remotes.d`.

- services.fwupd.extraTrustedKeys: Installing a public key allows firmware signed with a matching private key to be recognized as trusted, which may require less authentication to install than for untrusted files. By default trusted firmware can be upgraded (but not downgraded) without the user or administrator password. Only very few keys are installed by default.

- services.fwupd.package: The fwupd package to use.
- services.fwupd.uefiCapsuleSettings: UEFI capsule configurations for the fwupd daemon.

- services.g3proxy.enable: Whether to enable g3proxy, a generic purpose forward proxy.
- services.g3proxy.package: The g3proxy package to use.
- services.g3proxy.settings: Settings of g3proxy.

- services.g810-led.enable: Whether to enable g810-led, a Linux LED controller for some Logitech G Keyboards.
- services.g810-led.package: The g810-led package to use.
- services.g810-led.profile: Keyboard profile to apply at boot time.

The upstream repository provides [example configurations](https://github.com/MatMoul/g810-led/tree/master/sample_profiles).

- services.galene.certFile: Path to the server's certificate. The file is copied at runtime to
Galene's data directory where it needs to reside.

- services.galene.dataDir: Data directory.
- services.galene.enable: Whether to enable Galene Service.
- services.galene.group: Group under which galene runs.
- services.galene.groupsDir: Web server directory.
- services.galene.httpAddress: HTTP listen address for galene.
- services.galene.httpPort: HTTP listen port.
- services.galene.insecure: Whether Galene should listen in http or in https. If left as the default
value (false), Galene needs to be fed a private key and a certificate.

- services.galene.keyFile: Path to the server's private key. The file is copied at runtime to
Galene's data directory where it needs to reside.

- services.galene.package: The galene package to use.
- services.galene.recordingsDir: Recordings directory.
- services.galene.stateDir: The directory where Galene stores its internal state. If left as the default
value this directory will automatically be created before the Galene server
starts, otherwise the sysadmin is responsible for ensuring the directory
exists with appropriate ownership and permissions.

- services.galene.staticDir: Web server directory.
- services.galene.turnAddress: Built-in TURN server listen address and port. Set to "" to disable.
- services.galene.user: User account under which galene runs.
- services.gammu-smsd.backend.files.errorSMSPath: Where SMSes with error in transmission is placed
- services.gammu-smsd.backend.files.inboxPath: Where the received SMSes are stored
- services.gammu-smsd.backend.files.outboxPath: Where SMSes to be sent should be placed
- services.gammu-smsd.backend.files.sentSMSPath: Where the transmitted SMSes are placed
- services.gammu-smsd.backend.service: Service to use to store sms data.
- services.gammu-smsd.backend.sql.database: Database name to store sms data
- services.gammu-smsd.backend.sql.driver: DB driver to use
- services.gammu-smsd.backend.sql.host: Database server address
- services.gammu-smsd.backend.sql.password: User password used for connection to the database
- services.gammu-smsd.backend.sql.sqlDialect: SQL dialect to use (odbc driver only)
- services.gammu-smsd.backend.sql.user: User name used for connection to the database
- services.gammu-smsd.device.connection: Protocol which will be used to talk to the phone
- services.gammu-smsd.device.group: Owner group of the device
- services.gammu-smsd.device.path: Device node or address of the phone
- services.gammu-smsd.device.pin: PIN code for the simcard
- services.gammu-smsd.device.synchronizeTime: Whether to set time from computer to the phone during starting connection
- services.gammu-smsd.enable: Whether to enable gammu-smsd daemon.
- services.gammu-smsd.extraConfig.gammu: Extra config lines to be added into [gammu] section
- services.gammu-smsd.extraConfig.smsd: Extra config lines to be added into [smsd] section
- services.gammu-smsd.log.file: Path to file where information about communication will be stored
- services.gammu-smsd.log.format: Determines what will be logged to the LogFile
- services.gammu-smsd.user: User that has access to the device
- services.gancio.enable: Whether to enable Gancio, a shared agenda for local communities.
- services.gancio.nginx: Extra configuration for the nginx virtual host of gancio.
- services.gancio.package: The gancio package to use.
- services.gancio.plugins: Paths of gancio plugins to activate (linked under $WorkingDirectory/plugins/).

- services.gancio.settings: Configuration for Gancio, see <https://gancio.org/install/config> for supported values.

- services.gancio.user: The user (and PostgreSQL database name) used to run the gancio server
- services.gancio.userLocale: Override default locales within gancio.
See [default languages and locales](https://framagit.org/les/gancio/tree/master/locales).

- services.garage.enable: Whether to enable Garage Object Storage (S3 compatible).
- services.garage.environmentFile: File containing environment variables to be passed to the Garage server.
- services.garage.extraEnvironment: Extra environment variables to pass to the Garage server.
- services.garage.logLevel: Garage log level, see <https://garagehq.deuxfleurs.fr/documentation/quick-start/#launching-the-garage-server> for examples.
- services.garage.package: Garage package to use, needs to be set explicitly. If you are upgrading from a major version, please read NixOS and Garage release notes for upgrade instructions.
- services.garage.settings: Garage configuration, see <https://garagehq.deuxfleurs.fr/documentation/reference-manual/configuration/> for reference.
- services.gateone
- services.gatus.configFile: Path to the Gatus configuration file.
Overrides any configuration made using the `settings` option.

- services.gatus.enable: Whether to enable Gatus.
- services.gatus.environmentFile: File to load as environment file.
Environmental variables from this file can be interpolated in the configuration file using `${VARIABLE}`.
This is useful to avoid putting secrets into the nix store.

- services.gatus.openFirewall: Whether to open the firewall for the Gatus web interface.

- services.gatus.package: The gatus package to use.
- services.gatus.settings: Configuration for Gatus.
Supported options can be found at the [docs](https://gatus.io/docs).

- services.gdomap.enable: Whether to enable GNUstep Distributed Objects name server.
- services.gemstash.enable: Whether to enable gemstash, a cache for rubygems.org and a private gem server.
- services.gemstash.openFirewall: Whether to open the firewall for the port in {option}`services.gemstash.bind`.

- services.gemstash.settings: Configuration for Gemstash. The details can be found at in
[gemstash documentation](https://github.com/rubygems/gemstash/blob/master/man/gemstash-configuration.5.md).
Each key set here is automatically prefixed with ":" to match the gemstash expectations.

- services.geoclue2.appConfig: Specify extra settings per application.

- services.geoclue2.enable: Whether to enable GeoClue 2 daemon, a DBus service
that provides location information for accessing.

- services.geoclue2.enable3G: Whether to enable 3G source.

- services.geoclue2.enableCDMA: Whether to enable CDMA source.

- services.geoclue2.enableDemoAgent: Whether to use the GeoClue demo agent. This should be
overridden by desktop environments that provide their own
agent.

- services.geoclue2.enableModemGPS: Whether to enable Modem-GPS source.

- services.geoclue2.enableNmea: Whether to fetch location from NMEA sources on local network.

- services.geoclue2.enableStatic: Whether to enable the static source. This source defines a fixed
location using the `staticLatitude`, `staticLongitude`,
`staticAltitude`, and `staticAccuracy` options.

Setting `enableStatic` to true will disable all other sources, to
prevent conflicts. Use `lib.mkForce true` when enabling other sources
if for some reason you want to override this.

- services.geoclue2.enableWifi: Whether to enable WiFi source.

- services.geoclue2.geoProviderUrl: The url to the wifi GeoLocation Service.

- services.geoclue2.package: The geoclue2 package to use
- services.geoclue2.staticAccuracy: Accuracy radius in meters to use for the static source.

- services.geoclue2.staticAltitude: Altitude in meters to use for the static source.

- services.geoclue2.staticLatitude: Latitude to use for the static source. Defaults to `location.latitude`.

- services.geoclue2.staticLongitude: Longitude to use for the static source. Defaults to `location.longitude`.

- services.geoclue2.submissionNick: A nickname to submit network data with.
Must be 2-32 characters long.

- services.geoclue2.submissionUrl: The url to submit data to a GeoLocation Service.

- services.geoclue2.submitData: Whether to submit data to a GeoLocation Service.

- services.geoclue2.whitelistedAgents: Desktop IDs (without the .desktop extension) of whitelisted agents.

- services.geoip-updater
- services.geoipupdate.enable: Whether to enable periodic downloading of GeoIP databases using geoipupdate
.
- services.geoipupdate.interval: Update the GeoIP databases at this time / interval.
The format is described in
{manpage}`systemd.time(7)`.

- services.geoipupdate.settings: geoipupdate configuration options. See
<https://github.com/maxmind/geoipupdate/blob/main/doc/GeoIP.conf.md>
for a full list of available options.

Settings containing secret data should be set to an
attribute set containing the attribute
`_secret` - a string pointing to a file
containing the value the option should be set to. See the
example to get a better picture of this: in the resulting
{file}`GeoIP.conf` file, the
`ProxyUserPassword` key will be set to the
contents of the
{file}`/run/keys/proxy_pass` file.

- services.gerbil.environmentFile: Path to a file containing sensitive environment variables for Gerbil. See the [Gerbil Documentation](https://docs.fossorial.io/Pangolin/Configuration/config) for more information.
These will overwrite anything defined in the config.

- services.gerbil.port: Specifies the port to listen on for Gerbil.

- services.gerrit.builtinPlugins: List of builtins plugins to install. Those are shipped in the
`gerrit.war` file.

- services.gerrit.enable: Whether to enable Gerrit service.
- services.gerrit.jvmHeapLimit: How much memory to allocate to the JVM heap

- services.gerrit.jvmOpts: A list of JVM options to start gerrit with.
- services.gerrit.jvmPackage: The jdk21_headless package to use.
- services.gerrit.listenAddress: `hostname:port` to listen for HTTP traffic.

This is bound using the systemd socket activation.

- services.gerrit.package: The gerrit package to use.
- services.gerrit.plugins: List of plugins to add to Gerrit. Each derivation is a jar file
itself where the name of the derivation is the name of plugin.

- services.gerrit.replicationSettings: Replication configuration. This will be generated to the
`etc/replication.config` file.

- services.gerrit.serverId: Set a UUID that uniquely identifies the server.

This can be generated with
`nix-shell -p util-linux --run uuidgen`.

- services.gerrit.settings: Gerrit configuration. This will be generated to the
`etc/gerrit.config` file.

- services.geth: Specification of one or more geth instances.
- services.getty.autologinOnce: If enabled the automatic login will only happen in the first tty
once per boot. This can be useful to avoid retyping the account
password on systems with full disk encrypted.

- services.getty.autologinUser: Username of the account that will be automatically logged in at the console.
If unspecified, a login prompt is shown as usual.

- services.getty.extraArgs: Additional arguments passed to agetty.

- services.getty.greetingLine: Welcome line printed by agetty.
The default shows current NixOS version label, machine type and tty.

- services.getty.helpLine: Help line printed by agetty below the welcome line.
Used by the installation CD to give some hints on
how to proceed.

- services.getty.loginOptions: Template for arguments to be passed to
{manpage}`login(1)`.

See {manpage}`agetty(1)` for details,
including security considerations.  If unspecified, agetty
will not be invoked with a {option}`--login-options`
option.

- services.getty.loginProgram: Path to the login binary executed by agetty.

- services.getty.serialSpeed
- services.ghostunnel.enable: Whether to enable ghostunnel.
- services.ghostunnel.package: The ghostunnel package to use.
- services.ghostunnel.servers: Server mode ghostunnels (TLS listener -> plain TCP/UNIX target)

- services.gitDaemon.basePath: Remap all the path requests as relative to the given path. For example,
if you set base-path to /srv/git, then if you later try to pull
git://example.com/hello.git, Git daemon will interpret the path as /srv/git/hello.git.

- services.gitDaemon.enable: Enable Git daemon, which allows public hosting of git repositories
without any access controls. This is mostly intended for read-only access.

You can allow write access by setting daemon.receivepack configuration
item of the repository to true. This is solely meant for a closed LAN setting
where everybody is friendly.

If you need any access controls, use something else.

- services.gitDaemon.exportAll: Publish all directories that look like Git repositories (have the objects
and refs subdirectories), even if they do not have the git-daemon-export-ok file.

If disabled, you need to touch .git/git-daemon-export-ok in each repository
you want the daemon to publish.

Warning: enabling this without a repository whitelist or basePath
publishes every git repository you have.

- services.gitDaemon.group: Group under which Git daemon would be running.
- services.gitDaemon.listenAddress: Listen on a specific IP address or hostname.
- services.gitDaemon.options: Extra configuration options to be passed to Git daemon.
- services.gitDaemon.package: The git package to use.
- services.gitDaemon.port: Port to listen on.
- services.gitDaemon.repositories: A whitelist of paths of git repositories, or directories containing repositories
all of which would be published. Paths must not end in "/".

Warning: leaving this empty and enabling exportAll publishes all
repositories in your filesystem or basePath if specified.

- services.gitDaemon.user: User under which Git daemon would be running.
- services.gitea.appName: Application name.
- services.gitea.camoHmacKeyFile: Path to a file containing the camo HMAC key.
- services.gitea.captcha
- services.gitea.cookieSecure: Alias of {option}`services.gitea.settings.session.COOKIE_SECURE`.
- services.gitea.customDir: Gitea custom directory. Used for config, custom templates and other options.
- services.gitea.database
- services.gitea.disableRegistration: Alias of {option}`services.gitea.settings.service.DISABLE_REGISTRATION`.
- services.gitea.domain: Alias of {option}`services.gitea.settings.server.DOMAIN`.
- services.gitea.dump
- services.gitea.enable: Enable Gitea Service.
- services.gitea.enableUnixSocket
- services.gitea.extraConfig: Configuration lines appended to the generated gitea configuration file.
- services.gitea.group: Group under which gitea runs.
- services.gitea.httpAddress: Alias of {option}`services.gitea.settings.server.HTTP_ADDR`.
- services.gitea.httpPort: Alias of {option}`services.gitea.settings.server.HTTP_PORT`.
- services.gitea.lfs.contentDir: Where to store LFS files.
- services.gitea.lfs.enable: Enables git-lfs support.
- services.gitea.log.level: Alias of {option}`services.gitea.settings.log.LEVEL`.
- services.gitea.log.rootPath: Alias of {option}`services.gitea.settings.log.ROOT_PATH`.
- services.gitea.mailerPasswordFile: Path to a file containing the SMTP password.
- services.gitea.metricsTokenFile: Path to a file containing the metrics authentication token.
- services.gitea.minioAccessKeyId: Path to a file containing the Minio access key id.
- services.gitea.minioSecretAccessKey: Path to a file containing the Minio secret access key.
- services.gitea.package: The gitea package to use.
- services.gitea.repositoryRoot: Path to the git repositories.
- services.gitea.rootUrl: Alias of {option}`services.gitea.settings.server.ROOT_URL`.
- services.gitea.settings: Gitea configuration. Refer to <https://docs.gitea.io/en-us/config-cheat-sheet/>
for details on supported values.

- services.gitea.ssh.clonePort: Alias of {option}`services.gitea.settings.server.SSH_PORT`.
- services.gitea.ssh.enable
- services.gitea.stateDir: Gitea data directory.
- services.gitea.staticRootPath: Alias of {option}`services.gitea.settings.server.STATIC_ROOT_PATH`.
- services.gitea.useWizard
- services.gitea.user: User account under which gitea runs.
- services.gitea-actions-runner.instances: Gitea Actions Runner instances.

- services.gitea-actions-runner.package: The gitea-actions-runner package to use.
- services.github-runner
- services.github-runners: Multiple GitHub Runners.

- services.gitlab.backup.keepTime: How long to keep the backups around, in
hours. `0` means “keep forever”.

- services.gitlab.backup.path: GitLab path for backups.
- services.gitlab.backup.skip: Directories to exclude from the backup. The example excludes
CI artifacts and LFS objects from the backups. The
`tar` option skips the creation of a tar
file.

Refer to <https://docs.gitlab.com/ee/raketasks/backup_restore.html#excluding-specific-directories-from-the-backup>
for more information.

- services.gitlab.backup.startAt: The time(s) to run automatic backup of GitLab
state. Specified in systemd's time format; see
{manpage}`systemd.time(7)`.

- services.gitlab.backup.uploadOptions: GitLab automatic upload specification. Tells GitLab to
upload the backup to a remote location when done.

Attributes specified here are added under
`production -> backup -> upload` in
{file}`config/gitlab.yml`.

- services.gitlab.backupPath: Alias of {option}`services.gitlab.backup.path`.
- services.gitlab.databaseCreateLocally: Whether a database should be automatically created on the
local host. Set this to `false` if you plan
on provisioning a local database yourself. This has no effect
if {option}`services.gitlab.databaseHost` is customized.

- services.gitlab.databaseHost: GitLab database hostname. An empty string means
“use local unix socket connection”.

- services.gitlab.databaseName: GitLab database name.
- services.gitlab.databasePasswordFile: File containing the GitLab database user password.

This should be a string, not a nix path, since nix paths are
copied into the world-readable nix store.

- services.gitlab.databasePool: Database connection pool size.
- services.gitlab.databaseUsername: GitLab database user.
- services.gitlab.enable: Enable the gitlab service.

- services.gitlab.extraConfig: Extra options to be added under
`production` in
{file}`config/gitlab.yml`, as a nix attribute
set.

Options containing secret data should be set to an attribute
set containing the attribute `_secret` - a
string pointing to a file containing the value the option
should be set to. See the example to get a better picture of
this: in the resulting
{file}`config/gitlab.yml` file, the
`production.omniauth.providers[0].args.client_options.secret`
key will be set to the contents of the
{file}`/var/keys/gitlab_oidc_secret` file.

- services.gitlab.extraDatabaseConfig: Extra configuration in config/database.yml.
- services.gitlab.extraEnv: Additional environment variables for the GitLab environment.

- services.gitlab.extraGitlabRb: Extra configuration to be placed in config/extra-gitlab.rb. This can
be used to add configuration not otherwise exposed through this module's
options.

- services.gitlab.extraShellConfig: Extra configuration to merge into shell-config.yml
- services.gitlab.group: Group to run gitlab and all related services.
- services.gitlab.host: GitLab host name. Used e.g. for copy-paste URLs.
- services.gitlab.https: Whether gitlab prints URLs with https as scheme.
- services.gitlab.initialRootEmail: Initial email address of the root account if this is a new install.

- services.gitlab.initialRootPasswordFile: File containing the initial password of the root account if
this is a new install.

This should be a string, not a nix path, since nix paths are
copied into the world-readable nix store.

- services.gitlab.logrotate.enable: Enable rotation of log files.

- services.gitlab.logrotate.extraConfig
- services.gitlab.logrotate.frequency: How often to rotate the logs.
- services.gitlab.logrotate.keep: How many rotations to keep.
- services.gitlab.packages.gitaly: The gitaly package to use.
- services.gitlab.packages.gitlab: The gitlab package to use.
- services.gitlab.packages.gitlab-shell: The gitlab-shell package to use.
- services.gitlab.packages.gitlab-workhorse: The gitlab-workhorse package to use.
- services.gitlab.packages.pages: The gitlab-pages package to use.
- services.gitlab.pages.enable: Whether to enable the GitLab Pages service.
- services.gitlab.pages.settings: Configuration options to set in the GitLab Pages config
file.

Options containing secret data should be set to an attribute
set containing the attribute `_secret` - a string pointing
to a file containing the value the option should be set
to. See the example to get a better picture of this: in the
resulting configuration file, the `auth-client-secret` and
`auth-secret` keys will be set to the contents of the
{file}`/var/keys/auth-client-secret` and
{file}`/var/keys/auth-secret` files respectively.

- services.gitlab.pagesExtraArgs
- services.gitlab.port: GitLab server port for copy-paste URLs, e.g. 80 or 443 if you're
service over https.

- services.gitlab.puma.threadsMax: The maximum number of threads Puma should use per
worker. This limits how many threads Puma will automatically
spawn in response to requests. In contrast to workers,
threads will never be able to run Ruby code in parallel, but
give higher IO parallelism.

::: {.note}
Each thread consumes memory and contributes to Global VM
Lock contention, so be careful when increasing this.
:::

- services.gitlab.puma.threadsMin: The minimum number of threads Puma should use per
worker.

::: {.note}
Each thread consumes memory and contributes to Global VM
Lock contention, so be careful when increasing this.
:::

- services.gitlab.puma.workers: The number of worker processes Puma should spawn. This
controls the amount of parallel Ruby code can be
executed. GitLab recommends `Number of CPU cores - 1`, but at least two.

::: {.note}
Each worker consumes quite a bit of memory, so
be careful when increasing this.
:::

- services.gitlab.redisUrl: Redis URL for all GitLab services.
- services.gitlab.registry.certFile: Path to GitLab container registry certificate.
- services.gitlab.registry.defaultForProjects: If GitLab container registry should be enabled by default for projects.
- services.gitlab.registry.enable: Enable GitLab container registry.
- services.gitlab.registry.externalAddress: External address used to access registry from the internet
- services.gitlab.registry.externalPort: External port used to access registry from the internet
- services.gitlab.registry.host: GitLab container registry host name.
- services.gitlab.registry.issuer: GitLab container registry issuer.
- services.gitlab.registry.keyFile: Path to GitLab container registry certificate-key.
- services.gitlab.registry.package: Container registry package to use.

External container registries such as `pkgs.docker-distribution` are not supported
anymore since GitLab 16.0.0.

- services.gitlab.registry.port: GitLab container registry port.
- services.gitlab.registry.serviceName: GitLab container registry service name.
- services.gitlab.satelliteDir
- services.gitlab.secrets.activeRecordDeterministicKeyFile: A file containing the secret used to encrypt some rails data in a deterministic way
in the DB. This should not be the same as `services.gitlab.secrets.activeRecordPrimaryKeyFile`!

Make sure the secret is at ideally 32 characters and all random,
no regular words or you'll be exposed to dictionary attacks.

This should be a string, not a nix path, since nix paths are
copied into the world-readable nix store.

- services.gitlab.secrets.activeRecordPrimaryKeyFile: A file containing the secret used to encrypt some rails data
in the DB. This should not be the same as `services.gitlab.secrets.activeRecordDeterministicKeyFile`!

Make sure the secret is at ideally 32 characters and all random,
no regular words or you'll be exposed to dictionary attacks.

This should be a string, not a nix path, since nix paths are
copied into the world-readable nix store.

- services.gitlab.secrets.activeRecordSaltFile: A file containing the salt for active record encryption in the DB.

Make sure the secret is at ideally 32 characters and all random,
no regular words or you'll be exposed to dictionary attacks.

This should be a string, not a nix path, since nix paths are
copied into the world-readable nix store.

- services.gitlab.secrets.dbFile: A file containing the secret used to encrypt variables in
the DB. If you change or lose this key you will be unable to
access variables stored in database.

Make sure the secret is at least 32 characters and all random,
no regular words or you'll be exposed to dictionary attacks.

This should be a string, not a nix path, since nix paths are
copied into the world-readable nix store.

- services.gitlab.secrets.jwsFile: A file containing the secret used to encrypt session
keys. If you change or lose this key, users will be
disconnected.

Make sure the secret is an RSA private key in PEM format. You can
generate one with

openssl genrsa 2048

This should be a string, not a nix path, since nix paths are
copied into the world-readable nix store.

- services.gitlab.secrets.otpFile: A file containing the secret used to encrypt secrets for OTP
tokens. If you change or lose this key, users which have 2FA
enabled for login won't be able to login anymore.

Make sure the secret is at least 32 characters and all random,
no regular words or you'll be exposed to dictionary attacks.

This should be a string, not a nix path, since nix paths are
copied into the world-readable nix store.

- services.gitlab.secrets.secretFile: A file containing the secret used to encrypt variables in
the DB. If you change or lose this key you will be unable to
access variables stored in database.

Make sure the secret is at least 32 characters and all random,
no regular words or you'll be exposed to dictionary attacks.

This should be a string, not a nix path, since nix paths are
copied into the world-readable nix store.

- services.gitlab.sidekiq.concurrency: How many processor threads to use for processing sidekiq background job queues. When null, the GitLab default is used.

See <https://docs.gitlab.com/ee/administration/sidekiq/extra_sidekiq_processes.html#manage-thread-counts-explicitly> for details.

- services.gitlab.sidekiq.memoryKiller.enable: Whether the Sidekiq MemoryKiller should be turned
on. MemoryKiller kills Sidekiq when its memory consumption
exceeds a certain limit.

See <https://docs.gitlab.com/ee/administration/operations/sidekiq_memory_killer.html>
for details.

- services.gitlab.sidekiq.memoryKiller.graceTime: The time MemoryKiller waits after noticing excessive memory
consumption before killing Sidekiq.

- services.gitlab.sidekiq.memoryKiller.maxMemory: The maximum amount of memory, in MiB, a Sidekiq worker is
allowed to consume before being killed.

- services.gitlab.sidekiq.memoryKiller.shutdownWait: The time allowed for all jobs to finish before Sidekiq is
killed forcefully.

- services.gitlab.smtp.address: Address of the SMTP server for GitLab.
- services.gitlab.smtp.authentication: Authentication type to use, see <http://api.rubyonrails.org/classes/ActionMailer/Base.html>
- services.gitlab.smtp.domain: HELO domain to use for outgoing mail.
- services.gitlab.smtp.enable: Enable gitlab mail delivery over SMTP.
- services.gitlab.smtp.enableStartTLSAuto: Whether to try to use StartTLS.
- services.gitlab.smtp.opensslVerifyMode: How OpenSSL checks the certificate, see <http://api.rubyonrails.org/classes/ActionMailer/Base.html>
- services.gitlab.smtp.passwordFile: File containing the password of the SMTP server for GitLab.

This should be a string, not a nix path, since nix paths
are copied into the world-readable nix store.

- services.gitlab.smtp.port: Port of the SMTP server for GitLab.
- services.gitlab.smtp.tls: Whether to use TLS wrapper-mode.
- services.gitlab.smtp.username: Username of the SMTP server for GitLab.
- services.gitlab.stateDir: Alias of {option}`services.gitlab.statePath`.
- services.gitlab.statePath: GitLab state directory. Configuration, repositories and
logs, among other things, are stored here.

The directory will be created automatically if it doesn't
exist already. Its parent directories must be owned by
either `root` or the user set in
{option}`services.gitlab.user`.

- services.gitlab.user: User to run gitlab and all related services.
- services.gitlab.workhorse.config: Configuration options to add to Workhorse's configuration
file.

See
<https://gitlab.com/gitlab-org/gitlab/-/blob/master/workhorse/config.toml.example>
and
<https://docs.gitlab.com/ee/development/workhorse/configuration.html>
for examples and option documentation.

Options containing secret data should be set to an attribute
set containing the attribute `_secret` - a string pointing
to a file containing the value the option should be set
to. See the example to get a better picture of this: in the
resulting configuration file, the
`object_storage.s3.aws_secret_access_key` key will be set to
the contents of the {file}`/var/keys/aws_secret_access_key`
file.

- services.gitlab-runner.checkInterval: Alias of {option}`services.gitlab-runner.settings.check_interval`.
- services.gitlab-runner.clear-docker-cache.dates: Specification (in the format described by
{manpage}`systemd.time(7)`) of the time at
which the prune will occur.

- services.gitlab-runner.clear-docker-cache.enable: Whether to periodically prune gitlab runner's Docker resources. If
enabled, a systemd timer will run {command}`clear-docker-cache` as
specified by the `dates` option.

- services.gitlab-runner.clear-docker-cache.flags: Any additional flags passed to {command}`clear-docker-cache`.

- services.gitlab-runner.clear-docker-cache.package: Docker package to use for clearing up docker cache.
- services.gitlab-runner.concurrent: Alias of {option}`services.gitlab-runner.settings.concurrent`.
- services.gitlab-runner.configFile: Configuration file for gitlab-runner.

{option}`configFile` takes precedence over {option}`services`.
{option}`checkInterval` and {option}`concurrent` will be ignored too.

This option is deprecated, please use {option}`services` instead.
You can use {option}`registrationConfigFile` and
{option}`registrationFlags`
for settings not covered by this module.

- services.gitlab-runner.configOptions
- services.gitlab-runner.enable: Whether to enable Gitlab Runner.
- services.gitlab-runner.extraPackages: Extra packages to add to PATH for the gitlab-runner process.

- services.gitlab-runner.gracefulTermination: Finish all remaining jobs before stopping.
If not set gitlab-runner will stop immediately without waiting
for jobs to finish, which will lead to failed builds.

- services.gitlab-runner.gracefulTimeout: Time to wait until a graceful shutdown is turned into a forceful one.

- services.gitlab-runner.package: The gitlab-runner package to use.
- services.gitlab-runner.packages: Alias of {option}`services.gitlab-runner.extraPackages`.
- services.gitlab-runner.prometheusListenAddress: Alias of {option}`services.gitlab-runner.settings.listen_address`.
- services.gitlab-runner.sentryDSN: Alias of {option}`services.gitlab-runner.settings.sentry_dsn`.
- services.gitlab-runner.services: GitLab Runner services.
- services.gitlab-runner.sessionServer.advertiseAddress: Alias of {option}`services.gitlab-runner.settings.session_server.advertise_address`.
- services.gitlab-runner.sessionServer.listenAddress: Alias of {option}`services.gitlab-runner.settings.session_server.listen_address`.
- services.gitlab-runner.sessionServer.sessionTimeout: Alias of {option}`services.gitlab-runner.settings.session_server.session_timeout`.
- services.gitlab-runner.settings: Global gitlab-runner configuration. See
<https://docs.gitlab.com/runner/configuration/advanced-configuration.html#the-global-section>
for supported values.

- services.gitlab-runner.workDir
- services.gitolite.adminPubkey: Initial administrative public key for Gitolite. This should
be an SSH Public Key. Note that this key will only be used
once, upon the first initialization of the Gitolite user.
The key string cannot have any line breaks in it.

- services.gitolite.commonHooks: A list of custom git hooks that get copied to `~/.gitolite/hooks/common`.

- services.gitolite.dataDir: The gitolite home directory used to store all repositories. If left as the default value
this directory will automatically be created before the gitolite server starts, otherwise
the sysadmin is responsible for ensuring the directory exists with appropriate ownership
and permissions.

- services.gitolite.description: Gitolite user account's description.

- services.gitolite.enable: Enable gitolite management under the
`gitolite` user. After
switching to a configuration with Gitolite enabled, you can
then run `git clone gitolite@host:gitolite-admin.git` to manage it further.

- services.gitolite.enableGitAnnex: Enable git-annex support. Uses the `extraGitoliteRc` option
to apply the necessary configuration.

- services.gitolite.extraGitoliteRc: Extra configuration to append to the default `~/.gitolite.rc`.

This should be Perl code that modifies the `%RC`
configuration variable. The default `~/.gitolite.rc`
content is generated by invoking `gitolite print-default-rc`,
and extra configuration from this option is appended to it. The result
is placed to Nix store, and the `~/.gitolite.rc` file
becomes a symlink to it.

If you already have a customized (or otherwise changed)
`~/.gitolite.rc` file, NixOS will refuse to replace
it with a symlink, and the `gitolite-init` initialization service
will fail. In this situation, in order to use this option, you
will need to take any customizations you may have in
`~/.gitolite.rc`, convert them to appropriate Perl
statements, add them to this option, and remove the file.

See also the `enableGitAnnex` option.

- services.gitolite.group: Primary group of the Gitolite user account.

- services.gitolite.user: Gitolite user account. This is the username of the gitolite endpoint.

- services.gitwatch: A set of git repositories to watch for. See
[gitwatch](https://github.com/gitwatch/gitwatch) for more.

- services.gitweb.extraConfig: Verbatim configuration text appended to the generated gitweb.conf file.

- services.gitweb.gitwebConfigFile
- services.gitweb.gitwebTheme: Use an alternative theme for gitweb, strongly inspired by GitHub.

- services.gitweb.projectroot: Path to git projects (bare repositories) that should be served by
gitweb. Must not end with a slash.

- services.glance.enable: Whether to enable glance.
- services.glance.environmentFile: Path to an environment file as defined in {manpage}`systemd.exec(5)`.

See upstream documentation
<https://github.com/glanceapp/glance/blob/main/docs/configuration.md#environment-variables>.

Example content of the file:
```
TIMEZONE=Europe/Paris
```

Example `services.glance.settings.pages` configuration:
```nix
  [
    {
      name = "Home";
      columns = [
        {
          size = "full";
          widgets = [
            {
              type = "clock";
              timezone = "\${TIMEZONE}";
              label = "Local Time";
            }
          ];
        }
      ];
    }
  ];
```

Note that when using Glance's `${ENV_VAR}` syntax in Nix,
you need to escape it as follows: use `\${ENV_VAR}` in `"` strings
and `''${ENV_VAR}` in `''` strings.

Alternatively, you can put each secret in it's own file,
see `services.glance.settings`.

- services.glance.openFirewall: Whether to open the firewall for Glance.
This adds `services.glance.settings.server.port` to `networking.firewall.allowedTCPPorts`.

- services.glance.package: The glance package to use.
- services.glance.settings: Configuration written to a yaml file that is read by glance. See
<https://github.com/glanceapp/glance/blob/main/docs/configuration.md>
for more.

Settings containing secret data should be set to an
attribute set with this format: `{ _secret = "/path/to/secret"; }`.
See the example in `services.glance.settings.pages` at the weather widget
with a location secret to get a better picture of this.

Alternatively, you can use a single file with environment variables,
see `services.glance.environmentFile`.

- services.glances.enable: Whether to enable Glances.
- services.glances.extraArgs: Extra command-line arguments to pass to glances.

See <https://glances.readthedocs.io/en/latest/cmds.html> for all available options.

- services.glances.openFirewall: Open port in the firewall for glances.
- services.glances.package: The glances package to use.
- services.glances.port: Port the server will isten on.
- services.glitchtip.celery.extraArgs: Extra arguments for celery.
- services.glitchtip.database.createLocally: Whether to enable and configure a local PostgreSQL database server.

- services.glitchtip.enable: Whether to enable GlitchTip.
- services.glitchtip.environmentFiles: Files to load environment variables from in addition to [](#opt-services.glitchtip.settings).
This is useful to avoid putting secrets into the nix store.
See <https://glitchtip.com/documentation/install#configuration> for more information.

- services.glitchtip.group: The group under which GlitchTip runs.
- services.glitchtip.gunicorn.extraArgs: Extra arguments for gunicorn.
- services.glitchtip.listenAddress: The address to listen on.
- services.glitchtip.package: The glitchtip package to use.
- services.glitchtip.port: The port to listen on.
- services.glitchtip.redis.createLocally: Whether to enable and configure a local Redis instance.

- services.glitchtip.settings: Configuration of GlitchTip. See <https://glitchtip.com/documentation/install#configuration> for more information.

- services.glitchtip.stateDir: State directory of glitchtip.
- services.glitchtip.user: The user account under which GlitchTip runs.
- services.globalprotect.csdWrapper: A script that will produce a Host Integrity Protection (HIP) report,
as described at <https://www.infradead.org/openconnect/hip.html>

- services.globalprotect.enable: Whether to enable globalprotect.
- services.globalprotect.settings: GlobalProtect-openconnect configuration. For more information, visit
<https://github.com/yuezk/GlobalProtect-openconnect/wiki/Configuration>.

- services.glpiAgent.enable: Whether to enable GLPI Agent.
- services.glpiAgent.package: The glpi-agent package to use.
- services.glpiAgent.settings: GLPI Agent configuration options.
See <https://glpi-agent.readthedocs.io/en/latest/configuration.html> for all available options.

The 'server' option is mandatory and must point to your GLPI server.

- services.glpiAgent.stateDir: Directory where GLPI Agent stores its state.
- services.glusterfs.enable: Whether to enable GlusterFS Daemon.
- services.glusterfs.enableGlustereventsd: Whether to enable the GlusterFS Events Daemon
- services.glusterfs.extraFlags: Extra flags passed to the GlusterFS daemon
- services.glusterfs.killMode: The systemd KillMode to use for glusterd.

glusterd spawns other daemons like gsyncd.
If you want these to stop when glusterd is stopped (e.g. to ensure
that NixOS config changes are reflected even for these sub-daemons),
set this to 'control-group'.
If however you want running volume processes (glusterfsd) and thus
gluster mounts not be interrupted when glusterd is restarted
(for example, when you want to restart them manually at a later time),
set this to 'process'.

- services.glusterfs.logLevel: Log level used by the GlusterFS daemon
- services.glusterfs.stopKillTimeout: The systemd TimeoutStopSec to use.

After this time after having been asked to shut down, glusterd
(and depending on the killMode setting also its child processes)
are killed by systemd.

The default is set low because GlusterFS (as of 3.10) is known to
not tell its children (like gsyncd) to terminate at all.

- services.glusterfs.tlsSettings: Make the server communicate via TLS.
This means it will only connect to other gluster
servers having certificates signed by the same CA.

Enabling this will create a file {file}`/var/lib/glusterd/secure-access`.
Disabling will delete this file again.

See also: <https://gluster.readthedocs.io/en/latest/Administrator%20Guide/SSL/>

- services.glusterfs.useRpcbind: Enable use of rpcbind. This is required for Gluster's NFS functionality.

You may want to turn it off to reduce the attack surface for DDoS reflection attacks.

See <https://davelozier.com/glusterfs-and-rpcbind-portmap-ddos-reflection-attacks/>
and <https://bugzilla.redhat.com/show_bug.cgi?id=1426842> for details.

- services.gmediarender.audioDevice: The audio device to use.

- services.gmediarender.audioSink: The audio sink to use.

- services.gmediarender.enable: Whether to enable the gmediarender DLNA renderer.
- services.gmediarender.friendlyName: A "friendly name" for identifying the endpoint.

- services.gmediarender.initialVolume: A default volume attenuation (in dB) for the endpoint.

- services.gmediarender.package: The gmediarender package to use.
- services.gmediarender.port: Port that will be used to accept client connections.
- services.gmediarender.uuid: A UUID for uniquely identifying the endpoint.  If you have
multiple renderers on your network, you MUST set this.

- services.gnome.at-spi2-core.enable: Whether to enable at-spi2-core, a service for the Assistive Technologies
available on the GNOME platform.

Enable this if you get the error or warning
`The name org.a11y.Bus was not provided by any .service files`.

- services.gnome.core-apps.enable: Whether to enable GNOME core apps.
- services.gnome.core-developer-tools.enable: Whether to enable GNOME core developer tools.
- services.gnome.core-os-services.enable: Whether to enable essential services for GNOME3.
- services.gnome.core-shell.enable: Whether to enable GNOME Shell services.
- services.gnome.core-utilities.enable: Alias of {option}`services.gnome.core-apps.enable`.
- services.gnome.evolution-data-server.enable: Whether to enable Evolution Data Server, a collection of services for storing addressbooks and calendars.
- services.gnome.evolution-data-server.plugins: Plugins for Evolution Data Server.
- services.gnome.games.enable: Whether to enable GNOME games.
- services.gnome.gcr-ssh-agent.enable: Whether to enable GCR SSH agent.
- services.gnome.gcr-ssh-agent.package: The GCR package to use.
- services.gnome.glib-networking.enable: Whether to enable network extensions for GLib.
- services.gnome.gnome-browser-connector.enable: Whether to enable native host connector for the GNOME Shell browser extension, a DBus service
allowing to install GNOME Shell extensions from a web browser
.
- services.gnome.gnome-initial-setup.enable: Whether to enable GNOME Initial Setup, a Simple, easy, and safe way to prepare a new system.
- services.gnome.gnome-keyring.enable: Whether to enable GNOME Keyring daemon, a service designed to
take care of the user's security credentials,
such as user names and passwords
.
- services.gnome.gnome-online-accounts.enable: Whether to enable GNOME Online Accounts daemon, a service that provides
a single sign-on framework for the GNOME desktop.

- services.gnome.gnome-online-miners
- services.gnome.gnome-remote-desktop.enable: Whether to enable Remote Desktop support using Pipewire.
- services.gnome.gnome-settings-daemon.enable: Whether to enable GNOME Settings Daemon.
- services.gnome.gnome-user-share.enable: Whether to enable GNOME User Share, a user-level file sharing service for GNOME.
- services.gnome.localsearch.enable: Whether to enable LocalSearch, indexing services for TinySPARQL
search engine and metadata storage system.

- services.gnome.rygel.enable: Whether to enable Rygel UPnP Mediaserver.

You will need to also allow UPnP connections in firewall, see the following [comment](https://github.com/NixOS/nixpkgs/pull/45045#issuecomment-416030795).

- services.gnome.rygel.package: The rygel package to use.
- services.gnome.sushi.enable: Whether to enable Sushi, a quick previewer for nautilus.

- services.gnome.tinysparql.enable: Whether to enable TinySPARQL services, a search engine,
search tool and metadata storage system.

- services.gnome.tracker.enable: Alias of {option}`services.gnome.tinysparql.enable`.
- services.gnome.tracker.subcommandPackages
- services.gnome.tracker-miners.enable: Alias of {option}`services.gnome.localsearch.enable`.
- services.gns3-server.auth.enable: Whether to enable password based HTTP authentication to access the GNS3 Server.
- services.gns3-server.auth.passwordFile: A file containing the password to access the GNS3 Server.

::: {.warning}
This should be a string, not a nix path, since nix paths
are copied into the world-readable nix store.
:::

- services.gns3-server.auth.user: Username used to access the GNS3 Server.
- services.gns3-server.dynamips.enable: Whether to enable Dynamips support.
- services.gns3-server.dynamips.package: The dynamips package to use.
- services.gns3-server.enable: Whether to enable GNS3 Server daemon.
- services.gns3-server.log.debug: Whether to enable debug logging.
- services.gns3-server.log.file: Path of the file GNS3 Server should log to.
- services.gns3-server.package: The gns3-server package to use.
- services.gns3-server.settings: The global options in `config` file in ini format.

Refer to <https://docs.gns3.com/docs/using-gns3/administration/gns3-server-configuration-file/>
for all available options.

- services.gns3-server.ssl.certFile: Path to the SSL certificate file. This certificate will
be offered to, and may be verified by, clients.

- services.gns3-server.ssl.enable: Whether to enable SSL encryption.
- services.gns3-server.ssl.keyFile: Private key file for the certificate.
- services.gns3-server.ubridge.enable: Whether to enable uBridge support.
- services.gns3-server.ubridge.package: The ubridge package to use.
- services.gns3-server.vpcs.enable: Whether to enable VPCS support.
- services.gns3-server.vpcs.package: The vpcs package to use.
- services.gnunet.enable: Whether to run the GNUnet daemon.  GNUnet is GNU's anonymous
peer-to-peer communication and file sharing framework.

- services.gnunet.extraOptions: Additional options that will be copied verbatim in `gnunet.conf`.
See {manpage}`gnunet.conf(5)` for details.

- services.gnunet.fileSharing.quota: Maximum file system usage (in MiB) for file sharing.

- services.gnunet.load.hardNetUpBandwidth: Hard bandwidth limit (in bits per second) when uploading
data.

- services.gnunet.load.maxNetDownBandwidth: Maximum bandwidth usage (in bits per second) for GNUnet
when downloading data.

- services.gnunet.load.maxNetUpBandwidth: Maximum bandwidth usage (in bits per second) for GNUnet
when downloading data.

- services.gnunet.package: The gnunet package to use.
- services.gnunet.tcp.port: The TCP port for use by GNUnet.

- services.gnunet.udp.port: The UDP port for use by GNUnet.

- services.go-autoconfig.enable: Whether to enable IMAP/SMTP autodiscover feature for mail clients.
- services.go-autoconfig.settings: Configuration for go-autoconfig. See
<https://github.com/L11R/go-autoconfig/blob/master/config.yml>
for more information.

- services.go-camo.enable: Whether to enable go-camo service.
- services.go-camo.extraOptions: Extra options passed to the go-camo command.
- services.go-camo.keyFile: A file containing the HMAC key to use for signing URLs.
The file can contain any string. Can be generated using "openssl rand -base64 18 > the_file".

- services.go-camo.listen: Address:Port to bind to for HTTP (default: 0.0.0.0:8080).
- services.go-camo.sslCert: Path to TLS certificate.
- services.go-camo.sslKey: Path to TLS private key.
- services.go-camo.sslListen: Address:Port to bind to for HTTPS.
- services.go-httpbin.enable: Whether to enable go-httpbin.
- services.go-httpbin.package: The go-httpbin package to use.
- services.go-httpbin.settings: Configuration of go-httpbin.
See <https://github.com/mccutchen/go-httpbin#configuration> for a list of options.

- services.go-neb.baseUrl: Public-facing endpoint that can receive webhooks.
- services.go-neb.bindAddress: Port (and optionally address) to listen on.
- services.go-neb.config: Your {file}`config.yaml` as a Nix attribute set.
See [config.sample.yaml](https://github.com/matrix-org/go-neb/blob/master/config.sample.yaml)
for possible options.

- services.go-neb.enable: Whether to enable an extensible matrix bot written in Go.
- services.go-neb.secretFile: Environment variables from this file will be interpolated into the
final config file using envsubst with this syntax: `$ENVIRONMENT`
or `${VARIABLE}`.
The file should contain lines formatted as `SECRET_VAR=SECRET_VALUE`.
This is useful to avoid putting secrets into the nix store.

- services.go-shadowsocks2.server.enable: Whether to enable go-shadowsocks2 server.
- services.go-shadowsocks2.server.listenAddress: Server listen address or URL
- services.go2rtc.enable: Whether to enable go2rtc streaming server.
- services.go2rtc.package: The go2rtc package to use.
- services.go2rtc.settings: go2rtc configuration as a Nix attribute set.

See the [wiki](https://github.com/AlexxIT/go2rtc/wiki/Configuration) for possible configuration options.

- services.goatcounter.address: Web interface address.
- services.goatcounter.enable: Whether to enable goatcounter.
- services.goatcounter.extraArgs: List of extra arguments to be passed to goatcounter cli.
See {command}`goatcounter help serve` for more information.

- services.goatcounter.package: The goatcounter package to use.
- services.goatcounter.port: Web interface port.
- services.goatcounter.proxy: Whether Goatcounter service is running behind a reverse proxy. Will listen for HTTPS if `false`.
Refer to [documentation](https://github.com/arp242/goatcounter?tab=readme-ov-file#running) for more details.

- services.gobgpd.enable: Whether to enable GoBGP Routing Daemon.
- services.gobgpd.settings: GoBGP configuration. Refer to
<https://github.com/osrg/gobgp#documentation>
for details on supported values.

- services.gocd-agent.agentConfig: Agent registration configuration.

- services.gocd-agent.enable: Whether to enable gocd-agent.
- services.gocd-agent.environment: Additional environment variables to be passed to the Go.CD agent process.
As a base environment, Go.CD agent receives NIX_PATH from
{option}`environment.sessionVariables`, NIX_REMOTE is set to
"daemon".

- services.gocd-agent.extraGroups: List of extra groups that the "gocd-agent" user should be a part of.

- services.gocd-agent.extraOptions: Specifies additional command line arguments to pass to Go.CD agent
java process.  Example contains debug and gcLog arguments.

- services.gocd-agent.goServer: URL of the GoCD Server to attach the Go.CD Agent to.

- services.gocd-agent.group: If the default user "gocd-agent" is configured then this is the primary
group of that user.

- services.gocd-agent.initialJavaHeapSize: Specifies the initial java heap memory size for the Go.CD agent java process.

- services.gocd-agent.maxJavaHeapMemory: Specifies the java maximum heap memory size for the Go.CD agent java process.

- services.gocd-agent.packages: Packages to add to PATH for the Go.CD agent process.

- services.gocd-agent.startupOptions: Specifies startup command line arguments to pass to Go.CD agent
java process.

- services.gocd-agent.user: User the Go.CD agent should execute under.

- services.gocd-agent.workDir: Specifies the working directory in which the Go.CD agent java archive resides.

- services.gocd-server.enable: Whether to enable gocd-server.
- services.gocd-server.environment: Additional environment variables to be passed to the gocd-server process.
As a base environment, gocd-server receives NIX_PATH from
{option}`environment.sessionVariables`, NIX_REMOTE is set to
"daemon".

- services.gocd-server.extraGroups: List of extra groups that the "gocd-server" user should be a part of.

- services.gocd-server.extraOptions: Specifies additional command line arguments to pass to Go.CD server's
java process.  Example contains debug and gcLog arguments.

- services.gocd-server.group: If the default user "gocd-server" is configured then this is the primary group of that user.

- services.gocd-server.initialJavaHeapSize: Specifies the initial java heap memory size for the Go.CD server's java process.

- services.gocd-server.listenAddress: Specifies the bind address on which the Go.CD server HTTP interface listens.

- services.gocd-server.maxJavaHeapMemory: Specifies the java maximum heap memory size for the Go.CD server's java process.

- services.gocd-server.packages: Packages to add to PATH for the Go.CD server's process.

- services.gocd-server.port: Specifies port number on which the Go.CD server HTTP interface listens.

- services.gocd-server.sslPort: Specifies port number on which the Go.CD server HTTPS interface listens.

- services.gocd-server.startupOptions: Specifies startup command line arguments to pass to Go.CD server
java process.

- services.gocd-server.user: User the Go.CD server should execute under.

- services.gocd-server.workDir: Specifies the working directory in which the Go.CD server java archive resides.

- services.godns.enable: Whether to enable GoDNS service.
- services.godns.loadCredential: This can be used to pass secrets to the systemd service without adding
them to the nix store.

- services.godns.package: The godns package to use.
- services.godns.settings: Configuration for GoDNS. Refer to the [configuration section](1) in the
GoDNS GitHub repository for details.

[1]: https://github.com/TimothyYe/godns?tab=readme-ov-file#configuration

- services.goeland.enable: Whether to enable goeland, an alternative to rss2email.
- services.goeland.schedule: How often to run goeland, in systemd time format.
- services.goeland.settings: Configuration of goeland.
See the [example config file](https://github.com/slurdge/goeland/blob/master/cmd/asset/config.default.toml) for the available options.

- services.goeland.stateDir: The data directory for goeland where the database will reside if using the unseen filter.
If left as the default value this directory will automatically be created before the goeland
server starts, otherwise you are responsible for ensuring the directory exists with
appropriate ownership and permissions.

- services.gogoclient
- services.gokapi.enable: Whether to enable Lightweight selfhosted Firefox Send alternative without public upload.
- services.gokapi.environment: Environment variables to be set for the gokapi service. Can use systemd specifiers.
For full list see <https://gokapi.readthedocs.io/en/latest/advanced.html#environment-variables>.

- services.gokapi.mutableSettings: Allow changes to the program config made by the program to persist between restarts.
If disabled all required values must be set using nix, and all changes to config format over application updates must be resolved by user.

- services.gokapi.package: The gokapi package to use.
- services.gokapi.settings: Configuration settings for the generated config json file.
See <https://gokapi.readthedocs.io/en/latest/advanced.html#config-json> for more information

- services.gokapi.settingsFile: Path to config file to parse and append to settings.
Largely useful for loading secrets from a file not in the nix store. Can use systemd specifiers.
See <https://gokapi.readthedocs.io/en/latest/advanced.html#config-json> for more information

- services.gollum.address: IP address on which the web server will listen.
- services.gollum.allowUploads: Enable uploads of external files
- services.gollum.branch: Git branch to serve
- services.gollum.emoji: Parse and interpret emoji tags
- services.gollum.enable: Whether to enable Gollum, a git-powered wiki service.
- services.gollum.extraConfig: Content of the configuration file
- services.gollum.group: Specifies the owner group of the wiki directory
- services.gollum.h1-title: Use the first h1 as page title
- services.gollum.local-time: Use the browser's local timezone instead of the server's for displaying dates.
- services.gollum.math: Enable support for math rendering using KaTeX
- services.gollum.mathjax
- services.gollum.no-edit: Disable editing pages
- services.gollum.package: The gollum package to use.
- services.gollum.port: Port on which the web server will run.
- services.gollum.stateDir: Specifies the path of the repository directory. If it does not exist, Gollum will create it on startup.
- services.gollum.user: Specifies the owner of the wiki directory
- services.gollum.user-icons: Enable specific user icons for history view
- services.gonic.enable: Whether to enable Gonic music server.
- services.gonic.settings: Configuration for Gonic, see <https://github.com/sentriz/gonic#configuration-options> for supported values.

- services.goss.enable: Whether to enable Goss daemon.
- services.goss.environment: Environment variables to set for the goss service.

See <https://github.com/goss-org/goss/blob/master/docs/manual.md>

- services.goss.package: The goss package to use.
- services.goss.settings: The global options in `config` file in yaml format.

Refer to <https://github.com/goss-org/goss/blob/master/docs/goss-json-schema.yaml> for schema.

- services.gotenberg.bindIP: Port the API listener should bind to. Set to 0.0.0.0 to listen on all available IPs.
- services.gotenberg.bodyLimit: Sets the max limit for `multipart/form-data` requests. Accepts values like '5M', '20G', etc.
- services.gotenberg.chromium.autoStart: Automatically start Chromium when Gotenberg starts. If false, Chromium will start on the first conversion request that uses it.
- services.gotenberg.chromium.disableJavascript: Disable Javascript execution.
- services.gotenberg.chromium.disableRoutes: Disable all routes allowing Chromium-based conversion.
- services.gotenberg.chromium.maxQueueSize: Maximum queue size for chromium-based conversions. Setting to 0 disables the limit.
- services.gotenberg.chromium.package: The chromium package to use.
- services.gotenberg.downloadFrom.allowList: Allow these URLs to be used in the `downloadFrom` API field. Accepts a regular expression.
- services.gotenberg.downloadFrom.denyList: Deny accepting URLs from these domains in the `downloadFrom` API field. Accepts a regular expression.
- services.gotenberg.downloadFrom.disable: Whether to disable the ability to download files for conversion from outside sources.
- services.gotenberg.downloadFrom.maxRetries: The maximum amount of times to retry downloading a file specified with `downloadFrom`.
- services.gotenberg.enable: Whether to enable Gotenberg, a stateless API for PDF files.
- services.gotenberg.enableBasicAuth: HTTP Basic Authentication.

If you set this, be sure to set `GOTENBERG_API_BASIC_AUTH_USERNAME`and `GOTENBERG_API_BASIC_AUTH_PASSWORD`
in your `services.gotenberg.environmentFile` file.

- services.gotenberg.environmentFile: Environment file to load extra environment variables from.
- services.gotenberg.extraArgs: Any extra command-line flags to pass to the Gotenberg service.
- services.gotenberg.extraFontPackages: Extra fonts to make available.
- services.gotenberg.libreoffice.autoStart: Automatically start LibreOffice when Gotenberg starts. If false, LibreOffice will start on the first conversion request that uses it.
- services.gotenberg.libreoffice.disableRoutes: Disable all routes allowing LibreOffice-based conversion.
- services.gotenberg.libreoffice.maxQueueSize: Maximum queue size for LibreOffice-based conversions. Setting to 0 disables the limit.
- services.gotenberg.libreoffice.package: The libreoffice package to use.
- services.gotenberg.libreoffice.restartAfter: Restart LibreOffice after this many conversions. Setting to 0 disables this feature.
- services.gotenberg.logLevel: The logging level for Gotenberg.
- services.gotenberg.package: The gotenberg package to use.
- services.gotenberg.pdfEngines.convert: PDF Engines to use for converting files.
- services.gotenberg.pdfEngines.disableRoutes: Disable routes related to PDF engines.
- services.gotenberg.pdfEngines.merge: PDF Engines to use for merging files.
- services.gotenberg.pdfEngines.readMetadata: PDF Engines to use for reading metadata from files.
- services.gotenberg.pdfEngines.writeMetadata: PDF Engines to use for writing metadata to files.
- services.gotenberg.port: Port on which the API should listen.
- services.gotenberg.rootPath: Root path for the Gotenberg API.
- services.gotenberg.timeout: Timeout for API requests.
- services.gotify.enable: Whether to enable Gotify webserver.
- services.gotify.environment: Config environment variables for the gotify-server.
See <https://gotify.net/docs/config> for more details.

- services.gotify.environmentFiles: Files containing additional config environment variables for gotify-server.
Secrets should be set in environmentFiles instead of environment.

- services.gotify.package: The gotify-server package to use.
- services.gotify.port: Alias of {option}`services.gotify.environment.GOTIFY_SERVER_PORT`.
- services.gotify.stateDirectoryName: The name of the directory below {file}`/var/lib` where
gotify stores its runtime data.

- services.gotosocial.enable: Whether to enable ActivityPub social network server.
- services.gotosocial.environmentFile: File path containing environment variables for configuring the GoToSocial service
in the format of an EnvironmentFile as described by {manpage}`systemd.exec(5)`.

This option could be used to pass sensitive configuration to the GoToSocial daemon.

Please refer to the Environment Variables section in the
[documentation](https://docs.gotosocial.org/en/latest/configuration/).

- services.gotosocial.openFirewall: Open the configured port in the firewall.
Using a reverse proxy instead is highly recommended.

- services.gotosocial.package: The gotosocial package to use.
- services.gotosocial.settings: Contents of the GoToSocial YAML config.

Please refer to the
[documentation](https://docs.gotosocial.org/en/latest/configuration/)
and
[example config](https://github.com/superseriousbusiness/gotosocial/blob/main/example/config.yaml).

Please note that the `host` option cannot be changed later so it is important to configure this correctly before you start GoToSocial.

- services.gotosocial.setupPostgresqlDB: Whether to setup a local postgres database and populate the
`db-type` fields in `services.gotosocial.settings`.

- services.govee2mqtt.enable: Whether to enable Govee2MQTT.
- services.govee2mqtt.environmentFile: Environment file as defined in {manpage}`systemd.exec(5)`.

See upstream documentation <https://github.com/wez/govee2mqtt/blob/main/docs/CONFIG.md>.

- services.govee2mqtt.group: Group under which Govee2MQTT should run.
- services.govee2mqtt.package: The govee2mqtt package to use.
- services.govee2mqtt.user: User under which Govee2MQTT should run.
- services.goxlr-utility.autoStart.xdg: Start the daemon automatically using XDG autostart.
Sets `xdg.autostart.enable = true` if not already enabled.

- services.goxlr-utility.enable: Whether to enable goxlr-utility for controlling your TC-Helicon GoXLR or GoXLR Mini

- services.goxlr-utility.package: The goxlr-utility package to use.
- services.gpm.enable: Whether to enable GPM, the General Purpose Mouse daemon,
which enables mouse support in virtual consoles.

- services.gpm.protocol: Mouse protocol to use.
- services.gpsd.debugLevel: The debugging level.

- services.gpsd.device
- services.gpsd.devices: List of devices that `gpsd` should subscribe to.

A device may be a local serial device for GPS input, or a
URL of the form:
`[{dgpsip|ntrip}://][user:passwd@]host[:port][/stream]` in
which case it specifies an input source for DGPS or ntrip
data.

- services.gpsd.enable: Whether to enable `gpsd`, a GPS service daemon.

- services.gpsd.extraArgs: A list of extra command line arguments to pass to gpsd.
Check {manpage}`gpsd(8)` mangpage for possible arguments.

- services.gpsd.listenany: Listen on all addresses rather than just loopback.

- services.gpsd.nowait: don't wait for client connects to poll GPS

- services.gpsd.port: The port where to listen for TCP connections.

- services.gpsd.readonly: Whether to enable the broken-device-safety, otherwise
known as read-only mode.  Some popular bluetooth and USB
receivers lock up or become totally inaccessible when
probed or reconfigured.  This switch prevents gpsd from
writing to a receiver.  This means that gpsd cannot
configure the receiver for optimal performance, but it
also means that gpsd cannot break the receiver.  A better
solution would be for Bluetooth to not be so fragile.  A
platform independent method to identify
serial-over-Bluetooth devices would also be nice.

- services.grafana.addr: Alias of {option}`services.grafana.settings.server.http_addr`.
- services.grafana.analytics.reporting.enable: Alias of {option}`services.grafana.settings.analytics.reporting_enabled`.
- services.grafana.auth.anonymous.enable: Alias of {option}`services.grafana.settings."auth.anonymous".enabled`.
- services.grafana.auth.anonymous.org_name: Alias of {option}`services.grafana.settings."auth.anonymous".org_name`.
- services.grafana.auth.anonymous.org_role: Alias of {option}`services.grafana.settings."auth.anonymous".org_role`.
- services.grafana.auth.azuread.allowSignUp: Alias of {option}`services.grafana.settings."auth.azuread".allow_sign_up`.
- services.grafana.auth.azuread.allowedDomains: Alias of {option}`services.grafana.settings."auth.azuread".allowed_domains`.
- services.grafana.auth.azuread.allowedGroups: Alias of {option}`services.grafana.settings."auth.azuread".allowed_groups`.
- services.grafana.auth.azuread.clientId: Alias of {option}`services.grafana.settings."auth.azuread".client_id`.
- services.grafana.auth.azuread.clientSecretFile
- services.grafana.auth.azuread.enable: Alias of {option}`services.grafana.settings."auth.azuread".enabled`.
- services.grafana.auth.azuread.tenantId
- services.grafana.auth.disableLoginForm: Alias of {option}`services.grafana.settings.auth.disable_login_form`.
- services.grafana.auth.google.allowSignUp: Alias of {option}`services.grafana.settings."auth.google".allow_sign_up`.
- services.grafana.auth.google.clientId: Alias of {option}`services.grafana.settings."auth.google".client_id`.
- services.grafana.auth.google.clientSecretFile
- services.grafana.auth.google.enable: Alias of {option}`services.grafana.settings."auth.google".enabled`.
- services.grafana.certFile: Alias of {option}`services.grafana.settings.server.cert_file`.
- services.grafana.certKey: Alias of {option}`services.grafana.settings.server.cert_key`.
- services.grafana.dataDir: Data directory.
- services.grafana.database
- services.grafana.declarativePlugins: If non-null, then a list of packages containing Grafana plugins to install. If set, plugins cannot
be manually installed.

Keep in mind that this turns off drilldown: for this to work, you need to add
`grafana-metricsdrilldown-app`, `grafana-lokiexplore-app`, `grafana-exploretraces-app`
and `grafana-pyroscope-app` to this option.

- services.grafana.domain: Alias of {option}`services.grafana.settings.server.domain`.
- services.grafana.enable: Whether to enable grafana.
- services.grafana.extraOptions
- services.grafana.openFirewall: Open the ports in the firewall for the server.
- services.grafana.package: The grafana package to use.
- services.grafana.port: Alias of {option}`services.grafana.settings.server.http_port`.
- services.grafana.protocol: Alias of {option}`services.grafana.settings.server.protocol`.
- services.grafana.provision.alerting.contactPoints.path: Path to YAML contact points configuration. Can't be used with
[](#opt-services.grafana.provision.alerting.contactPoints.settings) simultaneously.
Can be either a directory or a single YAML file. Will end up in the store.

- services.grafana.provision.alerting.contactPoints.settings: Grafana contact points configuration in Nix. Can't be used with
[](#opt-services.grafana.provision.alerting.contactPoints.path) simultaneously. See
<https://grafana.com/docs/grafana/latest/administration/provisioning/#contact-points>
for supported options.

- services.grafana.provision.alerting.muteTimings.path: Path to YAML mute timings configuration. Can't be used with
[](#opt-services.grafana.provision.alerting.muteTimings.settings) simultaneously.
Can be either a directory or a single YAML file. Will end up in the store.

- services.grafana.provision.alerting.muteTimings.settings: Grafana mute timings configuration in Nix. Can't be used with
[](#opt-services.grafana.provision.alerting.muteTimings.path) simultaneously. See
<https://grafana.com/docs/grafana/latest/administration/provisioning/#mute-timings>
for supported options.

- services.grafana.provision.alerting.policies.path: Path to YAML notification policies configuration. Can't be used with
[](#opt-services.grafana.provision.alerting.policies.settings) simultaneously.
Can be either a directory or a single YAML file. Will end up in the store.

- services.grafana.provision.alerting.policies.settings: Grafana notification policies configuration in Nix. Can't be used with
[](#opt-services.grafana.provision.alerting.policies.path) simultaneously. See
<https://grafana.com/docs/grafana/latest/administration/provisioning/#notification-policies>
for supported options.

- services.grafana.provision.alerting.rules.path: Path to YAML rules configuration. Can't be used with
[](#opt-services.grafana.provision.alerting.rules.settings) simultaneously.
Can be either a directory or a single YAML file. Will end up in the store.

- services.grafana.provision.alerting.rules.settings: Grafana rules configuration in Nix. Can't be used with
[](#opt-services.grafana.provision.alerting.rules.path) simultaneously. See
<https://grafana.com/docs/grafana/latest/administration/provisioning/#rules>
for supported options.

- services.grafana.provision.alerting.templates.path: Path to YAML templates configuration. Can't be used with
[](#opt-services.grafana.provision.alerting.templates.settings) simultaneously.
Can be either a directory or a single YAML file. Will end up in the store.

- services.grafana.provision.alerting.templates.settings: Grafana templates configuration in Nix. Can't be used with
[](#opt-services.grafana.provision.alerting.templates.path) simultaneously. See
<https://grafana.com/docs/grafana/latest/administration/provisioning/#templates>
for supported options.

- services.grafana.provision.dashboards: Declaratively provision Grafana's dashboards.

- services.grafana.provision.datasources: Declaratively provision Grafana's datasources.

- services.grafana.provision.enable: Whether to enable provision.
- services.grafana.provision.notifiers
- services.grafana.rootUrl: Alias of {option}`services.grafana.settings.server.root_url`.
- services.grafana.security.adminPassword: Alias of {option}`services.grafana.settings.security.admin_password`.
- services.grafana.security.adminPasswordFile
- services.grafana.security.adminUser: Alias of {option}`services.grafana.settings.security.admin_user`.
- services.grafana.security.secretKey: Alias of {option}`services.grafana.settings.security.secret_key`.
- services.grafana.security.secretKeyFile
- services.grafana.server.serveFromSubPath: Alias of {option}`services.grafana.settings.server.serve_from_sub_path`.
- services.grafana.settings: Grafana settings. See <https://grafana.com/docs/grafana/latest/setup-grafana/configure-grafana/>
for available options. INI format is used.

- services.grafana.smtp.enable: Alias of {option}`services.grafana.settings.smtp.enabled`.
- services.grafana.smtp.fromAddress: Alias of {option}`services.grafana.settings.smtp.from_address`.
- services.grafana.smtp.password: Alias of {option}`services.grafana.settings.smtp.password`.
- services.grafana.smtp.passwordFile
- services.grafana.smtp.user: Alias of {option}`services.grafana.settings.smtp.user`.
- services.grafana.socket: Alias of {option}`services.grafana.settings.server.socket`.
- services.grafana.staticRootPath: Alias of {option}`services.grafana.settings.server.static_root_path`.
- services.grafana.users.allowOrgCreate: Alias of {option}`services.grafana.settings.users.allow_org_create`.
- services.grafana.users.allowSignUp: Alias of {option}`services.grafana.settings.users.allow_sign_up`.
- services.grafana.users.autoAssignOrg: Alias of {option}`services.grafana.settings.users.auto_assign_org`.
- services.grafana.users.autoAssignOrgRole: Alias of {option}`services.grafana.settings.users.auto_assign_org_role`.
- services.grafana-agent
- services.grafana-image-renderer.chromium: The chromium to use for image rendering.

- services.grafana-image-renderer.enable: Whether to enable grafana-image-renderer.
- services.grafana-image-renderer.provisionGrafana: Whether to enable Grafana configuration for grafana-image-renderer.
- services.grafana-image-renderer.settings: Configuration attributes for `grafana-image-renderer`.

See <https://github.com/grafana/grafana-image-renderer/blob/ce1f81438e5f69c7fd7c73ce08bab624c4c92e25/default.json>
for supported values.

- services.grafana-image-renderer.verbose: Whether to enable verbosity for the service.
- services.grafana-to-ntfy.enable: Whether to enable Grafana-to-ntfy (ntfy.sh) alerts channel.
- services.grafana-to-ntfy.package: The grafana-to-ntfy package to use.
- services.grafana-to-ntfy.settings.bauthPass: The path to the password you will use in the Grafana webhook settings.
- services.grafana-to-ntfy.settings.bauthUser: The user that you will authenticate with in the Grafana webhook settings.
You can set this to whatever you like, as this is not the same as the ntfy-sh user.

- services.grafana-to-ntfy.settings.ntfyBAuthPass: The path to the password for the specified ntfy-sh user.
Setting this option is required when using a ntfy-sh instance with access control enabled.

- services.grafana-to-ntfy.settings.ntfyBAuthUser: The ntfy-sh user to use for authenticating with the ntfy-sh instance.
Setting this option is required when using a ntfy-sh instance with access control enabled.

- services.grafana-to-ntfy.settings.ntfyUrl: The URL to the ntfy-sh topic.
- services.grafana_reporter.addr: Listening address.
- services.grafana_reporter.enable: Whether to enable grafana_reporter.
- services.grafana_reporter.grafana.addr: Grafana address.
- services.grafana_reporter.grafana.port: Grafana port.
- services.grafana_reporter.grafana.protocol: Grafana protocol.
- services.grafana_reporter.port: Listening port.
- services.grafana_reporter.templateDir: Optional template directory to use custom tex templates
- services.graphical-desktop.enable: Whether to enable bits and pieces required for a graphical desktop session.
- services.graphite.api
- services.graphite.beacon
- services.graphite.carbon.aggregationRules: Defines if and how received metrics will be aggregated.
- services.graphite.carbon.blacklist: Any metrics received which match one of the expressions will be dropped.
- services.graphite.carbon.config: Content of carbon configuration file.
- services.graphite.carbon.enableAggregator: Whether to enable carbon aggregator, the carbon buffering service.
- services.graphite.carbon.enableCache: Whether to enable carbon cache, the graphite storage daemon.
- services.graphite.carbon.enableRelay: Whether to enable carbon relay, the carbon replication and sharding service.
- services.graphite.carbon.relayRules: Relay rules are used to send certain metrics to a certain backend.
- services.graphite.carbon.rewriteRules: Regular expression patterns that can be used to rewrite metric names
in a search and replace fashion.

- services.graphite.carbon.storageAggregation: Defines how to aggregate data to lower-precision retentions.
- services.graphite.carbon.storageSchemas: Defines retention rates for storing metrics.
- services.graphite.carbon.whitelist: Only metrics received which match one of the expressions will be persisted.
- services.graphite.dataDir: Data directory for graphite.

- services.graphite.pager
- services.graphite.seyren.enable: Whether to enable seyren service.
- services.graphite.seyren.extraConfig: Extra seyren configuration. See
<https://github.com/scobal/seyren#config>

- services.graphite.seyren.graphiteUrl: Host where graphite service runs.
- services.graphite.seyren.mongoUrl: Mongodb connection string.
- services.graphite.seyren.port: Seyren listening port.
- services.graphite.seyren.seyrenUrl: Host where seyren is accessible.
- services.graphite.web.enable: Whether to enable graphite web frontend.
- services.graphite.web.extraConfig: Graphite webapp settings. See:
<https://graphite.readthedocs.io/en/latest/config-local-settings.html>

- services.graphite.web.listenAddress: Graphite web frontend listen address.
- services.graphite.web.port: Graphite web frontend port.
- services.grav.enable: Whether to enable grav.
- services.grav.maxUploadSize: The upload limit for files. This changes the relevant options in
{file}`php.ini` and nginx if enabled.

- services.grav.package: The grav package to use.
- services.grav.phpPackage: The php83 package to use.
- services.grav.pool: Name of existing phpfpm pool that is used to run web-application.
If not specified a pool will be created automatically with
default values.

- services.grav.root: Root of the application.

- services.grav.systemSettings: Settings written to {file}`user/config/system.yaml`.

- services.grav.virtualHost: Name of the nginx virtualhost to use and setup. If null, do not setup
any virtualhost.

- services.graylog.dataDir: Directory used to store Graylog server state.
- services.graylog.elasticsearchHosts: List of valid URIs of the http ports of your elastic nodes. If one or more of your elasticsearch hosts require authentication, include the credentials in each node URI that requires authentication
- services.graylog.enable: Whether to enable Graylog, a log management solution.
- services.graylog.extraConfig: Any other configuration options you might want to add
- services.graylog.isMaster: Whether this is the master instance of your Graylog cluster
- services.graylog.messageJournalDir: The directory which will be used to store the message journal. The directory must be exclusively used by Graylog and must not contain any other files than the ones created by Graylog itself
- services.graylog.mongodbUri: MongoDB connection string. See http://docs.mongodb.org/manual/reference/connection-string/ for details
- services.graylog.nodeIdFile: Path of the file containing the graylog node-id
- services.graylog.package: The graylog package to use.
- services.graylog.passwordSecret: You MUST set a secret to secure/pepper the stored user passwords here. Use at least 64 characters.
Generate one by using for example: pwgen -N 1 -s 96

- services.graylog.plugins: Extra graylog plugins
- services.graylog.rootPasswordSha2: You MUST specify a hash password for the root user (which you only need to initially set up the
system and in case you lose connectivity to your authentication backend)
This password cannot be changed using the API or via the web interface. If you need to change it,
modify it here.
Create one by using for example: echo -n yourpassword | shasum -a 256
and use the resulting hash value as string for the option

- services.graylog.rootUsername: Name of the default administrator user
- services.graylog.user: User account under which graylog runs
- services.greenclip.enable: Whether to enable Greenclip, a clipboard manager.
- services.greenclip.package: The greenclip package to use.
- services.greetd.enable: Whether to enable greetd, a minimal and flexible login manager daemon.
- services.greetd.greeterManagesPlymouth: Don't configure the greetd service to wait for Plymouth to exit.

Enable this if the greeter you're using can manage Plymouth itself to provide a smoother handoff.

- services.greetd.package: The greetd package to use.
- services.greetd.restart: Whether to restart greetd when it terminates (e.g. on failure).
This is usually desirable so a user can always log in, but should be disabled when using 'settings.initial_session' (autologin),
because every greetd restart will trigger the autologin again.

- services.greetd.settings: greetd configuration ([documentation](https://man.sr.ht/~kennylevinsen/greetd/))
as a Nix attribute set.

- services.greetd.useTextGreeter: Whether the greeter uses text-based user interfaces (For example, tuigreet).

When set to true, some systemd service configuration will be adjusted to avoid systemd boot messages interrupt TUI.

- services.greetd.vt
- services.grocy.dataDir: Home directory of the `grocy` user which contains
the application's state.

- services.grocy.enable: Whether to enable grocy.
- services.grocy.hostName: FQDN for the grocy instance.

- services.grocy.nginx.enableSSL: Whether or not to enable SSL (with ACME and let's encrypt)
for the grocy vhost.

- services.grocy.package: The grocy package to use.
- services.grocy.phpfpm.settings: Options for grocy's PHPFPM pool.

- services.grocy.settings.calendar.firstDayOfWeek: Which day of the week (0=Sunday, 1=Monday etc.) should be the
first day.

- services.grocy.settings.calendar.showWeekNumber: Show the number of the weeks in the calendar views.

- services.grocy.settings.culture: Display language of the frontend.

- services.grocy.settings.currency: ISO 4217 code for the currency to display.

- services.gsignond
- services.guacamole-client.enable: Whether to enable Apache Guacamole Client (Tomcat).
- services.guacamole-client.enableWebserver: Enable the Guacamole web application in a Tomcat webserver.

- services.guacamole-client.package: The guacamole-client package to use.
- services.guacamole-client.settings: Configuration written to `guacamole.properties`.

::: {.note}
The Guacamole web application uses one main configuration file called
`guacamole.properties`. This file is the common location for all
configuration properties read by Guacamole or any extension of
Guacamole, including authentication providers.
:::

- services.guacamole-server.enable: Whether to enable Apache Guacamole Server (guacd).
- services.guacamole-server.extraEnvironment: Environment variables to pass to guacd.
- services.guacamole-server.host: The host name or IP address the server should listen to.

- services.guacamole-server.logbackXml: Configuration file that correspond to `logback.xml`.

- services.guacamole-server.package: The guacamole-server package to use.
- services.guacamole-server.port: The port the guacd server should listen to.

- services.guacamole-server.userMappingXml: Configuration file that correspond to `user-mapping.xml`.

- services.guix.enable: Whether to enable Guix build daemon service.
- services.guix.extraArgs: Extra flags to pass to the Guix daemon service.

- services.guix.gc.dates: How often the garbage collection occurs. This takes the time format
from {manpage}`systemd.time(7)`.

- services.guix.gc.enable: Whether to enable automatic garbage collection service for Guix.
- services.guix.gc.extraArgs: List of arguments to be passed to {command}`guix gc`.

When given no option, it will try to collect all garbage which is
often inconvenient so it is recommended to set [some
options](https://guix.gnu.org/en/manual/en/html_node/Invoking-guix-gc.html).

- services.guix.group: The group of the Guix build user pool.

- services.guix.nrBuildUsers: Number of Guix build users to be used in the build pool.

- services.guix.package: The guix package to use. It should contain {command}`guix-daemon` and {command}`guix`
executable.

- services.guix.publish.enable: Whether to enable substitute server for your Guix store directory.
- services.guix.publish.extraArgs: Extra flags to pass to the substitute server.

- services.guix.publish.generateKeyPair: Whether to generate signing keys in {file}`/etc/guix` which are
required to initialize a substitute server. Otherwise,
`--public-key=$FILE` and `--private-key=$FILE` can be passed in
{option}`services.guix.publish.extraArgs`.

- services.guix.publish.port: Port of the substitute server to listen on.

- services.guix.publish.user: Name of the user to change once the server is up.

- services.guix.stateDir: The state directory where Guix service will store its data such as its
user-specific profiles, cache, and state files.

::: {.warning}
Changing it to something other than the default will rebuild the
package.
:::

- services.guix.storeDir: The store directory where the Guix service will serve to/from. Take
note Guix cannot take advantage of substitutes if you set it something
other than {file}`/gnu/store` since most of the cached builds are
assumed to be in there.

::: {.warning}
This will also recompile all packages because the normal cache no
longer applies.
:::

- services.guix.substituters.authorizedKeys: A list of signing keys for each substitute server to be authorized as
a source of substitutes. Without this, the listed substitute servers
from {option}`services.guix.substituters.urls` would be ignored [with
some
exceptions](https://guix.gnu.org/manual/en/html_node/Substitute-Authentication.html).

- services.guix.substituters.urls: A list of substitute servers' URLs for the Guix daemon to download
substitutes from.

- services.gvfs.enable: Whether to enable GVfs, a userspace virtual filesystem.
- services.gvfs.package: The gvfs package to use.
- services.gvpe.configFile: GVPE config file, if already present

- services.gvpe.configText: GVPE config contents

- services.gvpe.customIFSetup: Additional commands to apply in ifup script

- services.gvpe.enable: Whether to enable gvpe.
- services.gvpe.ipAddress: IP address to assign to GVPE interface

- services.gvpe.nodename: GVPE node name

- services.gvpe.subnet: IP subnet assigned to GVPE network

- services.h2o.defaultHTTPListenPort: If hosts do not specify listen.port, use these ports for HTTP by default.

- services.h2o.defaultTLSListenPort: If hosts do not specify listen.port, use these ports for SSL by default.

- services.h2o.defaultTLSRecommendations: By default, H2O, without prejudice, will use as many TLS versions &
cipher suites as it & the TLS library (OpenSSL) can support. The user is
expected to hone settings for the security of their server. Setting some
constraints is recommended, & if unsure about what TLS settings to use,
this option gives curated TLS settings recommendations from Mozilla’s
‘SSL Configuration Generator’ project (see
<https://ssl-config.mozilla.org>) or read more at Mozilla’s Wiki (see
<https://wiki.mozilla.org/Security/Server_Side_TLS>).

modern
: Services with clients that support TLS 1.3 & don’t need backward
  compatibility

intermediate
: General-purpose servers with a variety of clients, recommended for
  almost all systems

old
: Compatible with a number of very old clients, & should be used only as
  a last resort

The default for all virtual hosts can be set with
services.h2o.defaultTLSRecommendations, but this value can be overridden
on a per-host basis using services.h2o.hosts.<name>.tls.recommmendations.
The settings will also be overidden by manual values set with
services.settings.h2o.hosts.<name>.tls.extraSettings.

NOTE: older/weaker ciphers might require overriding the OpenSSL version
of H2O (such as `openssl_legacy`). This can be done with
sevices.settings.h2o.package.

- services.h2o.enable: Whether to enable H2O web server.
- services.h2o.group: Group running H2O services
- services.h2o.hosts: The `hosts` config to be merged with the settings.

Note that unlike YAML used for H2O, Nix will not support duplicate
keys to, for instance, have multiple listens in a host block; use the
virtual host options in like `http` & `tls` or use `$HOST:$PORT`
keys if manually specifying config.

- services.h2o.package: The h2o package to use.
- services.h2o.settings: Configuration for H2O (see <https://h2o.examp1e.net/configure.html>)
- services.h2o.user: User running H2O service
- services.hadoop.containerExecutorCfg: Yarn container-executor.cfg definition
<https://hadoop.apache.org/docs/r2.7.2/hadoop-yarn/hadoop-yarn-site/SecureContainer.html>

- services.hadoop.coreSite: Hadoop core-site.xml definition
<https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/core-default.xml>

- services.hadoop.coreSiteInternal: Internal option to add configs to core-site.xml based on module options

- services.hadoop.extraConfDirs: Directories containing additional config files to be added to HADOOP_CONF_DIR
- services.hadoop.gatewayRole.enable: Whether to enable gateway role for deploying hadoop configs.
- services.hadoop.gatewayRole.enableHbaseCli: Whether to enable HBase CLI tools.
- services.hadoop.hbase.master.enable: Whether to enable HBase master.
- services.hadoop.hbase.master.environment: Environment variables passed to master.
- services.hadoop.hbase.master.extraFlags: Extra flags for the master service.
- services.hadoop.hbase.master.initHDFS: Whether to enable initialization of the hbase directory on HDFS.
- services.hadoop.hbase.master.openFirewall: Open firewall ports for HBase master.
- services.hadoop.hbase.master.restartIfChanged: Restart master con config change.
- services.hadoop.hbase.package: The hbase package to use.
- services.hadoop.hbase.regionServer.enable: Whether to enable HBase regionServer.
- services.hadoop.hbase.regionServer.environment: Environment variables passed to regionServer.
- services.hadoop.hbase.regionServer.extraFlags: Extra flags for the regionServer service.
- services.hadoop.hbase.regionServer.openFirewall: Open firewall ports for HBase regionServer.
- services.hadoop.hbase.regionServer.overrideHosts: Remove /etc/hosts entries for "127.0.0.2" and "::1" defined in nixos/modules/config/networking.nix
Regionservers must be able to resolve their hostnames to their IP addresses, through PTR records
or /etc/hosts entries.

- services.hadoop.hbase.regionServer.restartIfChanged: Restart regionServer con config change.
- services.hadoop.hbase.rest.enable: Whether to enable HBase rest.
- services.hadoop.hbase.rest.environment: Environment variables passed to rest.
- services.hadoop.hbase.rest.extraFlags: Extra flags for the rest service.
- services.hadoop.hbase.rest.infoPort: web UI port
- services.hadoop.hbase.rest.openFirewall: Open firewall ports for HBase rest.
- services.hadoop.hbase.rest.port: RPC port
- services.hadoop.hbase.rest.restartIfChanged: Restart rest con config change.
- services.hadoop.hbase.rootdir: This option will set "hbase.rootdir" in hbase-site.xml and determine
the directory shared by region servers and into which HBase persists.
The URL should be 'fully-qualified' to include the filesystem scheme.
If a core-site.xml is provided, the FS scheme defaults to the value
of "fs.defaultFS".

Filesystems other than HDFS (like S3, QFS, Swift) are also supported.

- services.hadoop.hbase.thrift.enable: Whether to enable HBase thrift.
- services.hadoop.hbase.thrift.environment: Environment variables passed to thrift.
- services.hadoop.hbase.thrift.extraFlags: Extra flags for the thrift service.
- services.hadoop.hbase.thrift.infoPort: web UI port
- services.hadoop.hbase.thrift.openFirewall: Open firewall ports for HBase thrift.
- services.hadoop.hbase.thrift.port: RPC port
- services.hadoop.hbase.thrift.restartIfChanged: Restart thrift con config change.
- services.hadoop.hbase.zookeeperQuorum: This option will set "hbase.zookeeper.quorum" in hbase-site.xml.
Comma separated list of servers in the ZooKeeper ensemble.

- services.hadoop.hbaseSite: Additional options and overrides for hbase-site.xml
<https://github.com/apache/hbase/blob/rel/2.4.11/hbase-common/src/main/resources/hbase-default.xml>

- services.hadoop.hbaseSiteDefault: Default options for hbase-site.xml

- services.hadoop.hbaseSiteInternal: Internal option to add configs to hbase-site.xml based on module options

- services.hadoop.hdfs.datanode.dataDirs: Tier and path definitions for datanode storage.
- services.hadoop.hdfs.datanode.enable: Whether to enable HDFS DataNode.
- services.hadoop.hdfs.datanode.extraEnv: Extra environment variables for HDFS DataNode
- services.hadoop.hdfs.datanode.extraFlags: Extra command line flags to pass to HDFS DataNode
- services.hadoop.hdfs.datanode.openFirewall: Open firewall ports for HDFS DataNode.
- services.hadoop.hdfs.datanode.restartIfChanged: Automatically restart the service on config change.
This can be set to false to defer restarts on clusters running critical applications.
Please consider the security implications of inadvertently running an older version,
and the possibility of unexpected behavior caused by inconsistent versions across a cluster when disabling this option.

- services.hadoop.hdfs.httpfs.enable: Whether to enable HDFS JournalNode.
- services.hadoop.hdfs.httpfs.extraEnv: Extra environment variables for HDFS JournalNode
- services.hadoop.hdfs.httpfs.extraFlags: Extra command line flags to pass to HDFS JournalNode
- services.hadoop.hdfs.httpfs.openFirewall: Open firewall ports for HDFS JournalNode.
- services.hadoop.hdfs.httpfs.restartIfChanged: Automatically restart the service on config change.
This can be set to false to defer restarts on clusters running critical applications.
Please consider the security implications of inadvertently running an older version,
and the possibility of unexpected behavior caused by inconsistent versions across a cluster when disabling this option.

- services.hadoop.hdfs.httpfs.tempPath: HTTPFS_TEMP path used by HTTPFS
- services.hadoop.hdfs.journalnode.enable: Whether to enable HDFS JournalNode.
- services.hadoop.hdfs.journalnode.extraEnv: Extra environment variables for HDFS JournalNode
- services.hadoop.hdfs.journalnode.extraFlags: Extra command line flags to pass to HDFS JournalNode
- services.hadoop.hdfs.journalnode.openFirewall: Open firewall ports for HDFS JournalNode.
- services.hadoop.hdfs.journalnode.restartIfChanged: Automatically restart the service on config change.
This can be set to false to defer restarts on clusters running critical applications.
Please consider the security implications of inadvertently running an older version,
and the possibility of unexpected behavior caused by inconsistent versions across a cluster when disabling this option.

- services.hadoop.hdfs.namenode.enable: Whether to enable HDFS NameNode.
- services.hadoop.hdfs.namenode.extraEnv: Extra environment variables for HDFS NameNode
- services.hadoop.hdfs.namenode.extraFlags: Extra command line flags to pass to HDFS NameNode
- services.hadoop.hdfs.namenode.formatOnInit: Format HDFS namenode on first start. This is useful for quickly spinning up
ephemeral HDFS clusters with a single namenode.
For HA clusters, initialization involves multiple steps across multiple nodes.
Follow this guide to initialize an HA cluster manually:
<https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-hdfs/HDFSHighAvailabilityWithQJM.html>

- services.hadoop.hdfs.namenode.openFirewall: Open firewall ports for HDFS NameNode.
- services.hadoop.hdfs.namenode.restartIfChanged: Automatically restart the service on config change.
This can be set to false to defer restarts on clusters running critical applications.
Please consider the security implications of inadvertently running an older version,
and the possibility of unexpected behavior caused by inconsistent versions across a cluster when disabling this option.

- services.hadoop.hdfs.zkfc.enable: Whether to enable HDFS ZooKeeper failover controller.
- services.hadoop.hdfs.zkfc.extraEnv: Extra environment variables for HDFS ZooKeeper failover controller
- services.hadoop.hdfs.zkfc.extraFlags: Extra command line flags to pass to HDFS ZooKeeper failover controller
- services.hadoop.hdfs.zkfc.restartIfChanged: Automatically restart the service on config change.
This can be set to false to defer restarts on clusters running critical applications.
Please consider the security implications of inadvertently running an older version,
and the possibility of unexpected behavior caused by inconsistent versions across a cluster when disabling this option.

- services.hadoop.hdfsSite: Additional options and overrides for hdfs-site.xml
<https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/hdfs-default.xml>

- services.hadoop.hdfsSiteDefault: Default options for hdfs-site.xml

- services.hadoop.hdfsSiteInternal: Internal option to add configs to hdfs-site.xml based on module options

- services.hadoop.httpfsSite: Hadoop httpfs-site.xml definition
<https://hadoop.apache.org/docs/current/hadoop-hdfs-httpfs/httpfs-default.html>

- services.hadoop.log4jProperties: log4j.properties file added to HADOOP_CONF_DIR
- services.hadoop.mapredSite: Additional options and overrides for mapred-site.xml
<https://hadoop.apache.org/docs/current/hadoop-mapreduce-client/hadoop-mapreduce-client-core/mapred-default.xml>

- services.hadoop.mapredSiteDefault: Default options for mapred-site.xml

- services.hadoop.package: The hadoop package to use.
- services.hadoop.yarn.nodemanager.addBinBash: Add /bin/bash. This is needed by the linux container executor's launch script.

- services.hadoop.yarn.nodemanager.enable: Whether to enable Hadoop YARN NodeManager.
- services.hadoop.yarn.nodemanager.extraEnv: Extra environment variables
- services.hadoop.yarn.nodemanager.extraFlags: Extra command line flags to pass to the service
- services.hadoop.yarn.nodemanager.localDir: List of directories to store localized files in.
- services.hadoop.yarn.nodemanager.openFirewall: Open firewall ports for nodemanager.
Because containers can listen on any ephemeral port, TCP ports 1024–65535 will be opened.

- services.hadoop.yarn.nodemanager.resource.cpuVCores: Number of vcores that can be allocated for containers.
- services.hadoop.yarn.nodemanager.resource.maximumAllocationMB: The maximum physical memory any container can be allocated.
- services.hadoop.yarn.nodemanager.resource.maximumAllocationVCores: The maximum virtual CPU cores any container can be allocated.
- services.hadoop.yarn.nodemanager.resource.memoryMB: Amount of physical memory, in MB, that can be allocated for containers.
- services.hadoop.yarn.nodemanager.restartIfChanged: Automatically restart the service on config change.
This can be set to false to defer restarts on clusters running critical applications.
Please consider the security implications of inadvertently running an older version,
and the possibility of unexpected behavior caused by inconsistent versions across a cluster when disabling this option.

- services.hadoop.yarn.nodemanager.useCGroups: Use cgroups to enforce resource limits on containers

- services.hadoop.yarn.resourcemanager.enable: Whether to enable Hadoop YARN ResourceManager.
- services.hadoop.yarn.resourcemanager.extraEnv: Extra environment variables
- services.hadoop.yarn.resourcemanager.extraFlags: Extra command line flags to pass to the service
- services.hadoop.yarn.resourcemanager.openFirewall: Open firewall ports for resourcemanager

- services.hadoop.yarn.resourcemanager.restartIfChanged: Automatically restart the service on config change.
This can be set to false to defer restarts on clusters running critical applications.
Please consider the security implications of inadvertently running an older version,
and the possibility of unexpected behavior caused by inconsistent versions across a cluster when disabling this option.

- services.hadoop.yarnSite: Additional options and overrides for yarn-site.xml
<https://hadoop.apache.org/docs/current/hadoop-yarn/hadoop-yarn-common/yarn-default.xml>

- services.hadoop.yarnSiteDefault: Default options for yarn-site.xml

- services.hadoop.yarnSiteInternal: Internal option to add configs to yarn-site.xml based on module options

- services.haka
- services.handheld-daemon.enable: Whether to enable Handheld Daemon.
- services.handheld-daemon.package: The handheld-daemon package to use.
- services.handheld-daemon.ui.enable: Whether to enable Handheld Daemon UI.
- services.handheld-daemon.ui.package: The handheld-daemon-ui package to use.
- services.handheld-daemon.user: The user to run Handheld Daemon with.

- services.hans.clients: Each attribute of this option defines a systemd service that
runs hans. Many or none may be defined.
The name of each service is
`hans-«name»`
where «name» is the name of the
corresponding attribute name.

- services.hans.server.enable: enable hans server
- services.hans.server.extraConfig: Additional command line parameters
- services.hans.server.ip: The assigned ip range
- services.hans.server.passwordFile: File that contains password
- services.hans.server.respondToSystemPings: Force hans respond to ordinary pings
- services.haproxy.config: Contents of the HAProxy configuration file,
{file}`haproxy.conf`.

- services.haproxy.enable: Whether to enable HAProxy, the reliable, high performance TCP/HTTP load balancer.
- services.haproxy.group: Group account under which haproxy runs.
- services.haproxy.package: The haproxy package to use.
- services.haproxy.user: User account under which haproxy runs.
- services.hardware.argonone.enable: Whether to enable the driver for Argon One Raspberry Pi case fan and power button.
- services.hardware.argonone.package: The argononed package to use.
- services.hardware.bolt.enable: Whether to enable Bolt, a userspace daemon to enable
security levels for Thunderbolt 3 on GNU/Linux.

Bolt is used by GNOME 3 to handle Thunderbolt settings.

- services.hardware.bolt.package: The bolt package to use.
- services.hardware.deepcool-digital-linux.enable: Whether to enable DeepCool Digital monitoring daemon.
- services.hardware.deepcool-digital-linux.extraArgs: Extra command line arguments to be passed to the deepcool-digital-linux daemon.

- services.hardware.deepcool-digital-linux.package: The deepcool-digital-linux package to use.
- services.hardware.lcd.client.enable: Enable the LCD panel client (LCDproc)
- services.hardware.lcd.client.extraConfig: Additional configuration added verbatim to the client config.
- services.hardware.lcd.client.restartForever: Try restarting the client forever.
- services.hardware.lcd.server.enable: Enable the LCD panel server (LCDd)
- services.hardware.lcd.server.extraConfig: Additional configuration added verbatim to the server config.
- services.hardware.lcd.server.openPorts: Open the ports in the firewall
- services.hardware.lcd.server.usbGroup: The group to use for settings permissions. This group must exist or you will have to create it.
- services.hardware.lcd.server.usbPermissions: Set group-write permissions on a USB device.

A USB connected LCD panel will most likely require having its
permissions modified for lcdd to write to it. Enabling this option
sets group-write permissions on the device identified by
{option}`services.hardware.lcd.usbVid` and
{option}`services.hardware.lcd.usbPid`. In order to find the
values, you can run the {command}`lsusb` command. Example
output:

```
Bus 005 Device 002: ID 0403:c630 Future Technology Devices International, Ltd lcd2usb interface
```

In this case the vendor id is 0403 and the product id is c630.

- services.hardware.lcd.server.usbPid: The product ID of the USB device to claim.
- services.hardware.lcd.server.usbVid: The vendor ID of the USB device to claim.
- services.hardware.lcd.serverHost: Host on which LCDd is listening.
- services.hardware.lcd.serverPort: Port on which LCDd is listening.
- services.hardware.openrgb.enable: Whether to enable OpenRGB server, for RGB lighting control.
- services.hardware.openrgb.motherboard: CPU family of motherboard. Allows for addition motherboard i2c support.
- services.hardware.openrgb.package: The openrgb package to use.
- services.hardware.openrgb.server.port: Set server port of openrgb.
- services.hardware.openrgb.startupProfile: The profile file to load from "/var/lib/OpenRGB" at startup.
- services.hardware.pommed.configFile: The path to the {file}`pommed.conf` file. Leave
to null to use the default config file
({file}`/etc/pommed.conf.mactel`). See the
files {file}`/etc/pommed.conf.mactel` and
{file}`/etc/pommed.conf.pmac` for examples to
build on.

- services.hardware.pommed.enable: Whether to use the pommed tool to handle Apple laptop
keyboard hotkeys.

- services.harmonia.enable: Whether to enable Harmonia: Nix binary cache written in Rust.
- services.harmonia.package: The harmonia package to use.
- services.harmonia.settings: Settings to merge with the default configuration.
For the list of the default configuration, see <https://github.com/nix-community/harmonia/tree/master#configuration>.

- services.harmonia.signKeyPath: DEPRECATED: Use `services.harmonia.signKeyPaths` instead. Path to the signing key to use for signing the cache
- services.harmonia.signKeyPaths: Paths to the signing keys to use for signing the cache
- services.haste-server.enable: Whether to enable haste-server.
- services.haste-server.openFirewall: Whether to enable firewall passthrough for haste-server.
- services.haste-server.settings: Configuration for haste-server.
For documentation see [project readme](https://github.com/toptal/haste-server#settings)

- services.hatsu.enable: Whether to enable Self-hosted and fully-automated ActivityPub bridge for static sites.
- services.hatsu.package: The hatsu package to use.
- services.hatsu.settings: Configuration for Hatsu, see
<link xlink:href="https://hatsu.cli.rs/admins/environments.html"/>
for supported values.

- services.haveged.enable: Whether to enable haveged entropy daemon, which refills /dev/random when low.
NOTE: does nothing on kernels newer than 5.6
.
- services.haveged.refill_threshold: The number of bits of available entropy beneath which
haveged should refill the entropy pool.

- services.haven.blastrRelays: List of relay configurations for blastr
- services.haven.enable: Whether to enable haven.
- services.haven.environmentFile: Path to a file containing sensitive environment variables. See <https://github.com/bitvora/haven> for documentation.
The file should contain environment-variable assignments like:
S3_SECRET_KEY=mysecretkey
S3_ACCESS_KEY_ID=myaccesskey

- services.haven.importRelays: List of relay configurations for importing historical events
- services.haven.package: The haven package to use.
- services.haven.settings: See <https://github.com/bitvora/haven> for documentation.
- services.hbase: Alias of {option}`services.hbase-standalone`.
- services.hbase-standalone.dataDir: Specifies location of HBase database files. This location should be
writable and readable for the user the HBase service runs as
(hbase by default).

- services.hbase-standalone.enable: Whether to enable HBase master in standalone mode with embedded regionserver and zookeper.
Do not use this configuration for production nor for evaluating HBase performance
.
- services.hbase-standalone.group: Group account under which HBase runs.

- services.hbase-standalone.logDir: Specifies the location of HBase log files.

- services.hbase-standalone.package: The hbase package to use.
- services.hbase-standalone.settings: configurations in hbase-site.xml, see <https://github.com/apache/hbase/blob/master/hbase-server/src/test/resources/hbase-site.xml> for details.

- services.hbase-standalone.user: User account under which HBase runs.

- services.hdapsd.enable: Whether to enable Hard Drive Active Protection System Daemon,
devices are detected and managed automatically by udev and systemd
.
- services.hddfancontrol.disks
- services.hddfancontrol.enable: Whether to enable hddfancontrol daemon.
- services.hddfancontrol.extraArgs
- services.hddfancontrol.logVerbosity
- services.hddfancontrol.package: The hddfancontrol package to use.
- services.hddfancontrol.pwmPaths
- services.hddfancontrol.settings: Parameter-sets for each instance of hddfancontrol.

- services.hddfancontrol.smartctl
- services.headphones.configFile: Path to config file.
- services.headphones.dataDir: Path where to store data files.
- services.headphones.enable: Whether to enable the headphones server.
- services.headphones.group: Group to run the service as
- services.headphones.host: Host to listen on.
- services.headphones.port: Port to bind to.
- services.headphones.user: User to run the service as
- services.headscale.address: Listening address of headscale.

- services.headscale.derp.autoUpdate: Alias of {option}`services.headscale.settings.derp.auto_update_enabled`.
- services.headscale.derp.auto_update_enable: Alias of {option}`services.headscale.settings.derp.auto_update_enabled`.
- services.headscale.derp.paths: Alias of {option}`services.headscale.settings.derp.paths`.
- services.headscale.derp.updateFrequency: Alias of {option}`services.headscale.settings.derp.update_frequency`.
- services.headscale.derp.urls: Alias of {option}`services.headscale.settings.derp.urls`.
- services.headscale.enable: Whether to enable headscale, Open Source coordination server for Tailscale.
- services.headscale.ephemeralNodeInactivityTimeout: Alias of {option}`services.headscale.settings.ephemeral_node_inactivity_timeout`.
- services.headscale.group: Group under which headscale runs.

::: {.note}
If left as the default value this group will automatically be created
on system activation, otherwise you are responsible for
ensuring the user exists before the headscale service starts.
:::

- services.headscale.logLevel: Alias of {option}`services.headscale.settings.log.level`.
- services.headscale.openIdConnect.clientId: Alias of {option}`services.headscale.settings.oidc.client_id`.
- services.headscale.openIdConnect.clientSecretFile: Alias of {option}`services.headscale.settings.oidc.client_secret_path`.
- services.headscale.openIdConnect.domainMap
- services.headscale.openIdConnect.issuer: Alias of {option}`services.headscale.settings.oidc.issuer`.
- services.headscale.package: The headscale package to use.
- services.headscale.port: Listening port of headscale.

- services.headscale.serverUrl: Alias of {option}`services.headscale.settings.server_url`.
- services.headscale.settings: Overrides to {file}`config.yaml` as a Nix attribute set.
Check the [example config](https://github.com/juanfont/headscale/blob/main/config-example.yaml)
for possible options.

- services.headscale.tls.certFile: Alias of {option}`services.headscale.settings.tls_cert_path`.
- services.headscale.tls.keyFile: Alias of {option}`services.headscale.settings.tls_key_path`.
- services.headscale.tls.letsencrypt.challengeType: Alias of {option}`services.headscale.settings.tls_letsencrypt_challenge_type`.
- services.headscale.tls.letsencrypt.hostname: Alias of {option}`services.headscale.settings.tls_letsencrypt_hostname`.
- services.headscale.tls.letsencrypt.httpListen: Alias of {option}`services.headscale.settings.tls_letsencrypt_listen`.
- services.headscale.user: User account under which headscale runs.

::: {.note}
If left as the default value this user will automatically be created
on system activation, otherwise you are responsible for
ensuring the user exists before the headscale service starts.
:::

- services.healthchecks.dataDir: The directory used to store all data for healthchecks.

::: {.note}
If left as the default value this directory will automatically be created before
the healthchecks server starts, otherwise you are responsible for ensuring the
directory exists with appropriate ownership and permissions.
:::

- services.healthchecks.enable: Enable healthchecks.
It is expected to be run behind a HTTP reverse proxy.

- services.healthchecks.group: Group account under which healthchecks runs.

::: {.note}
If left as the default value this group will automatically be created
on system activation, otherwise you are responsible for
ensuring the group exists before the healthchecks service starts.
:::

- services.healthchecks.listenAddress: Address the server will listen on.
- services.healthchecks.package: The healthchecks package to use.
- services.healthchecks.port: Port the server will listen on.
- services.healthchecks.settings: Environment variables which are read by healthchecks `(local)_settings.py`.

Settings which are explicitly covered in options below, are type-checked and/or transformed
before added to the environment, everything else is passed as a string.

See <https://healthchecks.io/docs/self_hosted_configuration/>
for a full documentation of settings.

We add additional variables to this list inside the packages `local_settings.py.`
- `STATIC_ROOT` to set a state directory for dynamically generated static files.
- `SECRET_KEY_FILE` to read `SECRET_KEY` from a file at runtime and keep it out of
  /nix/store.
- `_FILE` variants for several values that hold sensitive information in
  [Healthchecks configuration](https://healthchecks.io/docs/self_hosted_configuration/) so
  that they also can be read from a file and kept out of /nix/store. To see which values
  have support for a `_FILE` variant, run:
  - `nix-instantiate --eval --expr '(import <nixpkgs> {}).healthchecks.secrets'`
  - or `nix eval 'nixpkgs#healthchecks.secrets'` if the flake support has been enabled.

If the same variable is set in both `settings` and `settingsFile` the value from `settingsFile` has priority.

- services.healthchecks.settingsFile: Environment variables which are read by healthchecks `(local)_settings.py`.

Settings which are explicitly covered in options below, are type-checked and/or transformed
before added to the environment, everything else is passed as a string.

See <https://healthchecks.io/docs/self_hosted_configuration/>
for a full documentation of settings.

We add additional variables to this list inside the packages `local_settings.py.`
- `STATIC_ROOT` to set a state directory for dynamically generated static files.
- `SECRET_KEY_FILE` to read `SECRET_KEY` from a file at runtime and keep it out of
  /nix/store.
- `_FILE` variants for several values that hold sensitive information in
  [Healthchecks configuration](https://healthchecks.io/docs/self_hosted_configuration/) so
  that they also can be read from a file and kept out of /nix/store. To see which values
  have support for a `_FILE` variant, run:
  - `nix-instantiate --eval --expr '(import <nixpkgs> {}).healthchecks.secrets'`
  - or `nix eval 'nixpkgs#healthchecks.secrets'` if the flake support has been enabled.

If the same variable is set in both `settings` and `settingsFile` the value from `settingsFile` has priority.

- services.healthchecks.user: User account under which healthchecks runs.

::: {.note}
If left as the default value this user will automatically be created
on system activation, otherwise you are responsible for
ensuring the user exists before the healthchecks service starts.
:::

- services.heapster.enable: Whether to enable Heapster monitoring.
- services.heapster.extraOpts: Heapster extra options
- services.heapster.package: The heapster package to use.
- services.heapster.sink: Heapster metic sink
- services.heapster.source: Heapster metric source
- services.heartbeat.enable: Whether to enable heartbeat, uptime monitoring.
- services.heartbeat.extraConfig: Any other configuration options you want to add
- services.heartbeat.name: Name of the beat
- services.heartbeat.package: The heartbeat package to use.
- services.heartbeat.stateDir: The state directory. heartbeat's own logs and other data are stored here.
- services.heartbeat.tags: Tags to place on the shipped log messages
- services.hebbot.botPasswordFile: A path to the password file for your bot.

Consider using a path that does not end up in your Nix store
as it would be world readable.

- services.hebbot.enable: Whether to enable hebbot.
- services.hebbot.package: The hebbot package to use.
- services.hebbot.settings: Configuration for Hebbot, see, for examples:

- <https://github.com/matrix-org/twim-config/blob/master/config.toml>
- <https://gitlab.gnome.org/Teams/Websites/thisweek.gnome.org/-/blob/main/hebbot/config.toml>

- services.hebbot.templates.project: A path to the Markdown file for the project template.

- services.hebbot.templates.report: A path to the Markdown file for the report template.

- services.hebbot.templates.section: A path to the Markdown file for the section template.

- services.hedgedoc.configuration: Alias of {option}`services.hedgedoc.settings`.
- services.hedgedoc.configureNginx: Whether to configure nginx as a reverse proxy.
- services.hedgedoc.enable: Whether to enable the HedgeDoc Markdown Editor.
- services.hedgedoc.environmentFile: Environment file as defined in {manpage}`systemd.exec(5)`.

Secrets may be passed to the service without adding them to the world-readable
Nix store, by specifying placeholder variables as the option value in Nix and
setting these variables accordingly in the environment file.

```
  # snippet of HedgeDoc-related config
  services.hedgedoc.settings.dbURL = "postgres://hedgedoc:\${DB_PASSWORD}@db-host:5432/hedgedocdb";
  services.hedgedoc.settings.minio.secretKey = "$MINIO_SECRET_KEY";
```

```
  # content of the environment file
  DB_PASSWORD=verysecretdbpassword
  MINIO_SECRET_KEY=verysecretminiokey
```

Note that this file needs to be available on the host on which
`HedgeDoc` is running.

- services.hedgedoc.groups: Alias of {option}`users.users.hedgedoc.extraGroups`.
- services.hedgedoc.package: The hedgedoc package to use.
- services.hedgedoc.settings: HedgeDoc configuration, see
<https://docs.hedgedoc.org/configuration/>
for documentation.

- services.hedgedoc.workDir
- services.heisenbridge.address: Address to listen on. IPv6 does not seem to be supported.
- services.heisenbridge.debug: More verbose logging. Recommended during initial setup.
- services.heisenbridge.enable: Whether to enable the Matrix to IRC bridge.
- services.heisenbridge.extraArgs: Heisenbridge is configured over the command line. Append extra arguments here
- services.heisenbridge.homeserver: The URL to the home server for client-server API calls
- services.heisenbridge.identd.enable: Whether to enable identd service support.
- services.heisenbridge.identd.port: identd listen port
- services.heisenbridge.namespaces: Configure the 'namespaces' section of the registration.yml for the bridge and the server
- services.heisenbridge.owner: Set owner MXID otherwise first talking local user will claim the bridge

- services.heisenbridge.package: The heisenbridge package to use.
- services.heisenbridge.port: The port to listen on
- services.heisenbridge.registrationUrl: The URL where the application service is listening for HS requests, from the Matrix HS perspective.#
The default value assumes the bridge runs on the same host as the home server, in the same network.

- services.hercules-ci-agent.baseDirectory: Alias of {option}`services.hercules-ci-agent.settings.baseDirectory`.
- services.hercules-ci-agent.concurrentTasks: Alias of {option}`services.hercules-ci-agent.settings.concurrentTasks`.
- services.hercules-ci-agent.enable: Enable to run Hercules CI Agent as a system service.

[Hercules CI](https://hercules-ci.com) is a
continuous integation service that is centered around Nix.

Support is available at [help@hercules-ci.com](mailto:help@hercules-ci.com).

- services.hercules-ci-agent.extraOptions: Alias of {option}`services.hercules-ci-agent.settings`.
- services.hercules-ci-agent.package: The hercules-ci-agent package to use.
- services.hercules-ci-agent.patchNix
- services.hercules-ci-agent.settings: These settings are written to the `agent.toml` file.

Not all settings are listed as options, can be set nonetheless.

For the exhaustive list of settings, see <https://docs.hercules-ci.com/hercules-ci/reference/agent-config/>.

- services.hercules-ci-agent.tomlFile: The fully assembled config file.

- services.hercules-ci-agent.user: Alias of {option}`systemd.services.hercules-ci-agent.serviceConfig.User`.
- services.hickory-dns.configFile: Path to an existing toml file to configure hickory-dns with.

This can usually be left unspecified, in which case it will be
generated from the values in `settings`.
If manually specified, then the options in `settings` are ignored.

- services.hickory-dns.debug: Log DEBUG, INFO, WARN and ERROR messages.
This option is mutually exclusive with the `debug` option.
If neither `quiet` nor `debug` are enabled, logging defaults to the INFO level.

- services.hickory-dns.enable: Whether to enable hickory-dns.
- services.hickory-dns.package: The hickory-dns package to use. ::: {.note}
The package must provide `meta.mainProgram` which names the server binary; any other utilities (client, resolver) are not needed.
:::

- services.hickory-dns.quiet: Log ERROR level messages only.
This option is mutually exclusive with the `debug` option.
If neither `quiet` nor `debug` are enabled, logging defaults to the INFO level.

- services.hickory-dns.settings: Settings for hickory-dns. The options enumerated here are not exhaustive.
Refer to upstream documentation for all available options:
- [Example settings](https://github.com/hickory-dns/hickory-dns/blob/main/tests/test-data/test_configs/example.toml)

- services.hitch.backend: The host and port Hitch connects to when receiving
a connection in the form [HOST]:PORT

- services.hitch.ciphers: The list of ciphers to use
- services.hitch.enable: Whether to enable Hitch Server.
- services.hitch.extraConfig: Additional configuration lines
- services.hitch.frontend: The port and interface of the listen endpoint in the
form [HOST]:PORT[+CERT].

- services.hitch.group: The group to run as
- services.hitch.ocsp-stapling.enabled: Whether to enable OCSP Stapling
- services.hitch.pem-files: PEM files to use
- services.hitch.user: The user to run as
- services.hledger-web.allow: User's access level for changing data.

* view: view only permission.
* add: view and add permissions.
* edit: view, add, and edit permissions.
* sandstorm: permissions from the `X-Sandstorm-Permissions` request header.

- services.hledger-web.baseUrl: Base URL, when sharing over a network.

- services.hledger-web.capabilities
- services.hledger-web.enable: Whether to enable hledger-web service.
- services.hledger-web.extraOptions: Extra command line arguments to pass to hledger-web.

- services.hledger-web.host: Address to listen on.

- services.hledger-web.journalFiles: Paths to journal files relative to {option}`services.hledger-web.stateDir`.

- services.hledger-web.port: Port to listen on.

- services.hledger-web.serveApi: Whether to enable serving only the JSON web API, without the web UI.
- services.hledger-web.stateDir: Path the service has access to. If left as the default value this
directory will automatically be created before the hledger-web server
starts, otherwise the sysadmin is responsible for ensuring the
directory exists with appropriate ownership and permissions.

- services.hockeypuck.enable: Whether to enable Hockeypuck OpenPGP Key Server.
- services.hockeypuck.port: HKP port to listen on.
- services.hockeypuck.settings: Configuration file for hockeypuck, here you can override
certain settings (`loglevel` and
`openpgp.db.dsn`) by just setting those values.

For other settings you need to use lib.mkForce to override them.

This service doesn't provision or enable postgres on your
system, it rather assumes that you enable postgres and create
the database yourself.

Example:
```
  services.postgresql = {
    enable = true;
    ensureDatabases = [ "hockeypuck" ];
    ensureUsers = [{
      name = "hockeypuck";
      ensureDBOwnership = true;
    }];
  };
```

- services.hologram-agent.dialAddress: Hologram server and port.
- services.hologram-agent.enable: Whether to enable the Hologram agent for AWS instance credentials
- services.hologram-agent.httpPort: Port for metadata service to listen on.
- services.hologram-server.awsAccount: AWS account number
- services.hologram-server.awsDefaultRole: AWS default role
- services.hologram-server.cacheTimeoutSeconds: How often (in seconds) to refresh the LDAP cache
- services.hologram-server.enable: Whether to enable the Hologram server for AWS instance credentials
- services.hologram-server.enableLdapRoles: Whether to assign user roles based on the user's LDAP group memberships
- services.hologram-server.groupClassAttr: The objectclass attribute to search for groups when enableLdapRoles is true
- services.hologram-server.ldapBaseDN: The base DN for your Hologram users
- services.hologram-server.ldapBindDN: DN of account to use to query the LDAP server
- services.hologram-server.ldapBindPassword: Password of account to use to query the LDAP server
- services.hologram-server.ldapHost: Address of the LDAP server to use
- services.hologram-server.ldapInsecure: Whether to connect to LDAP over SSL or not
- services.hologram-server.ldapUserAttr: The LDAP attribute for usernames
- services.hologram-server.listenAddress: Address and port to listen on
- services.hologram-server.roleAttr: Which LDAP group attribute to search for authorized role ARNs
- services.hologram-server.statsAddress: Address of statsd server
- services.home-assistant.applyDefaultConfig
- services.home-assistant.autoExtraComponents
- services.home-assistant.blueprints.automation: List of automation
[blueprints](https://www.home-assistant.io/docs/blueprint/) to
install into {file}`${config.services.home-assistant.configDir}/blueprints/automation`.

- services.home-assistant.blueprints.script: List of script
[blueprints](https://www.home-assistant.io/docs/blueprint/) to
install into {file}`${config.services.home-assistant.configDir}/blueprints/script`.

- services.home-assistant.blueprints.template: List of template
[blueprints](https://www.home-assistant.io/docs/blueprint/) to
install into {file}`${config.services.home-assistant.configDir}/blueprints/template`.

- services.home-assistant.config: Your {file}`configuration.yaml` as a Nix attribute set.

YAML functions like [secrets](https://www.home-assistant.io/docs/configuration/secrets/)
can be passed as a string and will be unquoted automatically.

Unless this option is explicitly set to `null`
we assume your {file}`configuration.yaml` is
managed through this module and thereby overwritten on startup.

- services.home-assistant.configDir: The config directory, where your {file}`configuration.yaml` is located.
- services.home-assistant.configWritable: Whether to make {file}`configuration.yaml` writable.

This will allow you to edit it from Home Assistant's web interface.

This only has an effect if {option}`config` is set.
However, bear in mind that it will be overwritten at every start of the service.

- services.home-assistant.customComponents: List of custom component packages to install.

Available components can be found below `pkgs.home-assistant-custom-components`.

- services.home-assistant.customLovelaceModules: List of custom lovelace card packages to load as lovelace resources.

Available cards can be found below `pkgs.home-assistant-custom-lovelace-modules`.

::: {.note}
Automatic loading only works with lovelace in `yaml` mode.
:::

- services.home-assistant.defaultIntegrations: List of integrations set are always set up, unless in recovery mode.

- services.home-assistant.enable: Whether to enable Home Assistant. Please note that this installation method is unsupported upstream.
- services.home-assistant.extraArgs: Extra arguments to pass to the hass executable.

- services.home-assistant.extraComponents: List of [components](https://www.home-assistant.io/integrations/) that have their dependencies included in the package.

The component name can be found in the URL, for example `https://www.home-assistant.io/integrations/ffmpeg/` would map to `ffmpeg`.

- services.home-assistant.extraPackages: List of packages to add to propagatedBuildInputs.

A popular example is `python3Packages.psycopg2`
for PostgreSQL support in the recorder component.

- services.home-assistant.lovelaceConfig: Your {file}`ui-lovelace.yaml` as a Nix attribute set.
Setting this option will automatically set `lovelace.mode` to `yaml`.

Beware that setting this option will delete your previous {file}`ui-lovelace.yaml`

- services.home-assistant.lovelaceConfigFile: Your {file}`ui-lovelace.yaml` managed as configuraton file.
Setting this option will automatically set `lovelace.mode` to `yaml`.

- services.home-assistant.lovelaceConfigWritable: Whether to make {file}`ui-lovelace.yaml` writable.

This will allow you to edit it from Home Assistant's web interface.

This only has an effect if {option}`lovelaceConfig` is set.
However, bear in mind that it will be overwritten at every start of the service.

- services.home-assistant.openFirewall: Whether to open the firewall for the specified port.
- services.home-assistant.package: The Home Assistant package to use.

- services.home-assistant.port: Alias of {option}`services.home-assistant.config.http.server_port`.
- services.homeassistant-satellite
- services.homebox.database.createLocally: Configure local PostgreSQL database server for Homebox.

- services.homebox.enable: Whether to enable homebox.
- services.homebox.group: Group under which Homebox runs.
- services.homebox.package: The homebox package to use.
- services.homebox.settings: The homebox configuration as environment variables. For definitions and available options see the upstream
[documentation](https://homebox.software/en/configure/#configure-homebox).

- services.homebox.user: User account under which Homebox runs.
- services.homebridge.enable: Whether to enable Homebridge: Homekit home automation.
- services.homebridge.environmentFile: Path to an environment-file which may contain secrets.

- services.homebridge.group: Group to run homebridge as.
- services.homebridge.openFirewall: Open ports in the firewall for the Homebridge web interface and service.

- services.homebridge.pluginPath: Path to the plugin download directory (needs to be writeable).
Seems this needs to end with node_modules, as Homebridge will run npm
on the parent directory.

- services.homebridge.settings: Configuration options for homebridge.

For more details, see [the homebridge documentation](https://github.com/homebridge/homebridge/wiki/Homebridge-Config-JSON-Explained).

- services.homebridge.uiSettings: Configuration options for homebridge config UI plugin.

For more details, see [the homebridge-config-ui-x documentation](https://github.com/homebridge/homebridge-config-ui-x/wiki/Config-Options).

- services.homebridge.user: User to run homebridge as.
- services.homebridge.userStoragePath: Path to store homebridge user files (needs to be writeable).

- services.homed.enable: Whether to enable systemd home area/user account manager.
- services.homed.promptOnFirstBoot: Whether to enable interactively prompting for user creation on first boot
.
- services.homed.settings.Home: Options for systemd-homed. See {manpage}`homed.conf(5)` man page for
available options.

- services.homepage-dashboard.allowedHosts: Hosts that homepage-dashboard will be running under.
You will want to change this in order to acess homepage from anything other than localhost.
see the upsream documentation:

<https://gethomepage.dev/installation/#homepage_allowed_hosts>

- services.homepage-dashboard.bookmarks: Homepage bookmarks configuration.

See <https://gethomepage.dev/configs/bookmarks/>.

- services.homepage-dashboard.customCSS: Custom CSS for styling Homepage.

See <https://gethomepage.dev/configs/custom-css-js/>.

- services.homepage-dashboard.customJS: Custom Javascript for Homepage.

See <https://gethomepage.dev/configs/custom-css-js/>.

- services.homepage-dashboard.docker: Homepage docker configuration.

See <https://gethomepage.dev/configs/docker/>.

- services.homepage-dashboard.enable: Whether to enable Homepage Dashboard, a highly customizable application dashboard.
- services.homepage-dashboard.environmentFile: The path to an environment file that contains environment variables to pass
to the homepage-dashboard service, for the purpose of passing secrets to
the service.

See the upstream documentation:

<https://gethomepage.dev/installation/docker/#using-environment-secrets>

- services.homepage-dashboard.kubernetes: Homepage kubernetes configuration.

See <https://gethomepage.dev/configs/kubernetes/>.

- services.homepage-dashboard.listenPort: Port for Homepage to bind to.
- services.homepage-dashboard.openFirewall: Open ports in the firewall for Homepage.
- services.homepage-dashboard.package: The homepage-dashboard package to use.
- services.homepage-dashboard.proxmox: Homepage proxmox configuration.

See <https://gethomepage.dev/configs/proxmox/>.

- services.homepage-dashboard.services: Homepage services configuration.

See <https://gethomepage.dev/configs/services/>.

- services.homepage-dashboard.settings: Homepage settings.

See <https://gethomepage.dev/configs/settings/>.

- services.homepage-dashboard.widgets: Homepage widgets configuration.

See <https://gethomepage.dev/widgets/>.

- services.homer.enable: Whether to enable A dead simple static HOMepage for your servER to keep your services on hand, from a simple yaml configuration file.
.
- services.homer.package: The homer package to use.
- services.homer.settings: Settings serialized into `config.yml` before build.
If left empty, the default configuration shipped with the package will be used instead.
For more information, see the [official documentation](https://github.com/bastienwirtz/homer/blob/main/docs/configuration.md).

Note that the full configuration will be written to the nix store as world readable, which may include secrets such as [api-keys](https://github.com/bastienwirtz/homer/blob/main/docs/customservices.md).

To add files such as icons or backgrounds, you can reference them in line such as
```nix
icon = "${./icon.png}";
```
This will add the file to the nix store upon build, referencing it by file path as expected by Homer.

- services.homer.virtualHost.caddy.enable: Whether to enable a virtualhost to serve homer through caddy.
- services.homer.virtualHost.domain: Domain to use for the virtual host.

This can be used to change nginx options like
```nix
services.nginx.virtualHosts."$\{config.services.homer.virtualHost.domain}".listen = [ ... ]
```
or
```nix
services.nginx.virtualHosts."example.com".listen = [ ... ]
```

- services.homer.virtualHost.nginx.enable: Whether to enable a virtualhost to serve homer through nginx.
- services.honk.enable: Whether to enable the Honk server.
- services.honk.extraCSS: An extra CSS file to be loaded by the client.

- services.honk.extraJS: An extra JavaScript file to be loaded by the client.

- services.honk.host: The host name or IP address the server should listen to.

- services.honk.package: The honk package to use.
- services.honk.passwordFile: Password for admin account.
NOTE: Should be string not a store path, to prevent the password from being world readable

- services.honk.port: The port the server should listen to.

- services.honk.servername: The server name.

- services.honk.username: The admin account username.

- services.hoogle.enable: Whether to enable Haskell documentation server.
- services.hoogle.extraOptions: Additional command-line arguments to pass to
{command}`hoogle server`

- services.hoogle.haskellPackages: Which haskell package set to use.
- services.hoogle.home: Url for hoogle logo
- services.hoogle.host: Set the host to bind on.
- services.hoogle.packages: The Haskell packages to generate documentation for.

The option value is a function that takes the package set specified in
the {var}`haskellPackages` option as its sole parameter and
returns a list of packages.

- services.hoogle.port: Port number Hoogle will be listening to.

- services.hostapd.channel
- services.hostapd.countryCode
- services.hostapd.driver
- services.hostapd.enable: Whether to enable hostapd, a user space daemon for access point and
authentication servers. It implements IEEE 802.11 access point management,
IEEE 802.1X/WPA/WPA2/EAP Authenticators, RADIUS client, EAP server, and RADIUS
authentication server
.
- services.hostapd.extraConfig
- services.hostapd.group
- services.hostapd.hwMode
- services.hostapd.interface
- services.hostapd.logLevel
- services.hostapd.noScan
- services.hostapd.package: The hostapd package to use.
- services.hostapd.radios: This option allows you to define APs for one or multiple physical radios.
At least one radio must be specified.

For each radio, hostapd requires a separate logical interface (like wlp3s0, wlp3s1, ...).
A default interface is usually be created automatically by your system, but to use
multiple radios of a single device, it may be required to create additional logical interfaces
for example by using {option}`networking.wlanInterfaces`.

Each physical radio can only support a single hardware-mode that is configured via
({option}`services.hostapd.radios.<radio>.band`). To create a dual-band
or tri-band AP, you will have to use a device that has multiple physical radios
and supports configuring multiple APs (Refer to valid interface combinations in
{command}`iw list`).

- services.hostapd.ssid
- services.hostapd.wpa
- services.hostapd.wpaPassphrase
- services.hound.config
- services.hound.enable: Whether to enable hound.
- services.hound.extraGroups
- services.hound.group: Group the hound daemon should execute under.

- services.hound.home: The path to use as hound's $HOME.
If the default user "hound" is configured then this is the home of the "hound" user.

- services.hound.listen: Listen on this [IP]:port

- services.hound.package: The hound package to use.
- services.hound.settings: The full configuration of the Hound daemon.
See the upstream documentation <https://github.com/hound-search/hound/blob/main/docs/config-options.md> for details.

:::{.note}
The `dbpath` should be an absolute path to a writable directory.
:::.com/hound-search/hound/blob/main/docs/config-options.md>.

- services.hound.user: User the hound daemon should execute under.

- services.hqplayerd.auth.password: Password used for HQPlayer's WebUI.

Without this you will need to manually create the credentials after
first start by going to http://your.ip/8088/auth

- services.hqplayerd.auth.username: Username used for HQPlayer's WebUI.

Without this you will need to manually create the credentials after
first start by going to http://your.ip/8088/auth

- services.hqplayerd.config: HQplayer daemon configuration, written to /etc/hqplayer/hqplayerd.xml.

Refer to share/doc/hqplayerd/readme.txt in the hqplayerd derivation for possible values.

- services.hqplayerd.enable: Whether to enable HQPlayer Embedded.
- services.hqplayerd.licenseFile: Path to the HQPlayer license key file.

Without this, the service will run in trial mode and restart every 30
minutes.

- services.hqplayerd.openFirewall: Opens ports needed for the WebUI and controller API.

- services.htpdate.enable: Enable htpdate daemon.

- services.htpdate.extraOptions: Additional command line arguments to pass to htpdate.

- services.htpdate.proxy: HTTP proxy used for requests.

- services.htpdate.servers: HTTP servers to use for time synchronization.

- services.httpd.adminAddr: E-mail address of the server administrator.
- services.httpd.configFile: Override the configuration file used by Apache. By default,
NixOS generates one automatically.

- services.httpd.documentRoot
- services.httpd.enable: Whether to enable the Apache HTTP Server.
- services.httpd.enableMellon: Whether to enable the mod_auth_mellon module.
- services.httpd.enablePHP: Whether to enable the PHP module.
- services.httpd.enablePerl: Whether to enable the Perl module (mod_perl).
- services.httpd.enableSSL
- services.httpd.enableUserDir
- services.httpd.extraConfig: Configuration lines appended to the generated Apache
configuration file. Note that this mechanism will not work
when {option}`configFile` is overridden.

- services.httpd.extraModules: Additional Apache modules to be used. These can be
specified as a string in the case of modules distributed
with Apache, or as an attribute set specifying the
{var}`name` and {var}`path` of the
module.

- services.httpd.extraSubservices
- services.httpd.globalRedirect
- services.httpd.group: Group under which httpd children processes run.

- services.httpd.hostName
- services.httpd.listen
- services.httpd.logDir: Directory for Apache's log files. It is created automatically.

- services.httpd.logFormat: Log format for log files. Possible values are: combined, common, referer, agent, none.
See <https://httpd.apache.org/docs/2.4/logs.html> for more details.

- services.httpd.logPerVirtualHost: If enabled, each virtual host gets its own
{file}`access.log` and
{file}`error.log`, namely suffixed by the
{option}`hostName` of the virtual host.

- services.httpd.maxClients: Maximum number of httpd processes (prefork)
- services.httpd.maxRequestsPerChild: Maximum number of httpd requests answered per httpd child (prefork), 0 means unlimited.

- services.httpd.mpm: Multi-processing module to be used by Apache. Available
modules are `prefork` (handles each
request in a separate child process), `worker`
(hybrid approach that starts a number of child processes
each running a number of threads) and `event`
(the default; a recent variant of `worker`
that handles persistent connections more efficiently).

- services.httpd.multiProcessingModule: Alias of {option}`services.httpd.mpm`.
- services.httpd.package: The apacheHttpd package to use.
- services.httpd.phpOptions: Options appended to the PHP configuration file {file}`php.ini`.

- services.httpd.phpPackage: The php package to use.
- services.httpd.robotsEntries
- services.httpd.servedDirs
- services.httpd.servedFiles
- services.httpd.serverAliases
- services.httpd.sslCiphers: Cipher Suite available for negotiation in SSL proxy handshake.
- services.httpd.sslProtocols: Allowed SSL/TLS protocol versions.
- services.httpd.sslServerCert
- services.httpd.sslServerChain
- services.httpd.sslServerKey
- services.httpd.stateDir
- services.httpd.user: User account under which httpd children processes run.

If you require the main httpd process to run as
`root` add the following configuration:
```
systemd.services.httpd.serviceConfig.User = lib.mkForce "root";
```

- services.httpd.virtualHosts: Specification of the virtual hosts served by Apache. Each
element should be an attribute set specifying the
configuration of the virtual host.

- services.https-dns-proxy.address: The address on which to listen
- services.https-dns-proxy.enable: Whether to enable https-dns-proxy daemon.
- services.https-dns-proxy.extraArgs: Additional arguments to pass to the process.
- services.https-dns-proxy.port: The port on which to listen
- services.https-dns-proxy.preferIPv4: https_dns_proxy will by default use IPv6 and fail if it is not available.
To play it safe, we choose IPv4.

- services.https-dns-proxy.provider.ips: The custom provider IPs
- services.https-dns-proxy.provider.kind: The upstream provider to use or custom in case you do not trust any of
the predefined providers or just want to use your own.

The default is quad9 and there are privacy and security
trade-offs when using any upstream provider. Please consider that
before using any of them.

Supported providers: cloudflare, custom, google, opendns, quad9

If you pick the custom provider, you will need to provide the
bootstrap IP addresses as well as the resolver https URL.

- services.https-dns-proxy.provider.url: The custom provider URL
- services.hydra.buildMachinesFiles: List of files containing build machines.
- services.hydra.dbi: The DBI string for Hydra database connection.

NOTE: Attempts to set `application_name` will be overridden by
`hydra-TYPE` (where TYPE is e.g. `evaluator`, `queue-runner`,
etc.) in all hydra services to more easily distinguish where
queries are coming from.

- services.hydra.debugServer: Whether to run the server in debug mode.
- services.hydra.enable: Whether to run Hydra services.

- services.hydra.extraConfig: Extra lines for the Hydra configuration.
- services.hydra.extraEnv: Extra environment variables for Hydra.
- services.hydra.gcRootsDir: Directory that holds Hydra garbage collector roots.
- services.hydra.hydraURL: The base URL for the Hydra webserver instance. Used for links in emails.

- services.hydra.listenHost: The hostname or address to listen on or `*` to listen
on all interfaces.

- services.hydra.logo: Path to a file containing the logo of your Hydra instance.

- services.hydra.maxServers: Maximum number of starman workers to spawn.
- services.hydra.maxSpareServers: Maximum number of spare starman workers to keep.
- services.hydra.minSpareServers: Minimum number of spare starman workers to keep.
- services.hydra.minimumDiskFree: Threshold of minimum disk space (GiB) to determine if the queue runner should run or not.

- services.hydra.minimumDiskFreeEvaluator: Threshold of minimum disk space (GiB) to determine if the evaluator should run or not.

- services.hydra.notificationSender: Sender email address used for email notifications.

- services.hydra.package: The hydra package to use.
- services.hydra.port: TCP port the web server should listen to.

- services.hydra.smtpHost: Hostname of the SMTP server to use to send email.

- services.hydra.tracker: Piece of HTML that is included on all pages.

- services.hydra.useSubstitutes: Whether to use binary caches for downloading store paths. Note that
binary substitutions trigger (a potentially large number of) additional
HTTP requests that slow down the queue monitor thread significantly.
Also, this Hydra instance will serve those downloaded store paths to
its users with its own signature attached as if it had built them
itself, so don't enable this feature unless your active binary caches
are absolute trustworthy.

- services.hydron
- services.hylafax.areaCode: Area code for server and all modems.
- services.hylafax.autostart: Autostart the HylaFAX queue manager at system start.
If this is `false`, the queue manager
will still be started if there are pending
jobs or if a user tries to connect to it.

- services.hylafax.commonModemConfig: Attribute set of default values for
modem config files {file}`etc/config.*`.
Values can be either strings or integers
(which will be added to the config file verbatimly)
or lists thereof
(which will be translated to multiple
lines with the same configuration key).
Boolean values are translated to "Yes" or "No".
The default contains some reasonable
configuration to yield an operational system.

Think twice before changing
paths of fax-processing scripts.

- services.hylafax.countryCode: Country code for server and all modems.
- services.hylafax.enable: Whether to enable HylaFAX server.
- services.hylafax.faxcron.enable.frequency: purging old files from the spooling area with
{file}`faxcron` with the given frequency
(see {manpage}`systemd.time(7)`)

- services.hylafax.faxcron.enable.spoolInit: Whether to enable purging old files from the spooling area with
{file}`faxcron`
each time the spooling area is initialized
.
- services.hylafax.faxcron.infoDays: Set the expiration time for data in the
remote machine information directory in days.

- services.hylafax.faxcron.logDays: Set the expiration time for
session trace log files in days.

- services.hylafax.faxcron.rcvDays: Set the expiration time for files in
the received facsimile queue in days.

- services.hylafax.faxqConfig: Attribute set of lines for the global
faxq config file {file}`etc/config`.
Values can be either strings or integers
(which will be added to the config file verbatimly)
or lists thereof
(which will be translated to multiple
lines with the same configuration key).
Boolean values are translated to "Yes" or "No".
The default contains some reasonable
configuration to yield an operational system.


- services.hylafax.faxqclean.archiving: Enable or suppress job archiving:
`never` disables job archiving,
`as-flagged` archives jobs that
have been flagged for archiving by sendfax,
`always` forces archiving of all jobs.
See also {manpage}`sendfax(1)` and {manpage}`faxqclean(8)`.

- services.hylafax.faxqclean.docqMinutes: Set the document
age threshold (in minutes) that controls how long
unreferenced files may reside in the docq directory.

- services.hylafax.faxqclean.doneqMinutes: Set the job
age threshold (in minutes) that controls how long
jobs may reside in the doneq directory.

- services.hylafax.faxqclean.enable.frequency: Purge old files from the spooling area with
{file}`faxcron` with the given frequency
(see {manpage}`systemd.time(7)`).

- services.hylafax.faxqclean.enable.spoolInit: Whether to enable purging old files from the spooling area with
{file}`faxqclean`
each time the spooling area is initialized
.
- services.hylafax.hfaxdConfig: Attribute set of lines for the global
hfaxd config file {file}`etc/hfaxd.conf`.
Values can be either strings or integers
(which will be added to the config file verbatimly)
or lists thereof
(which will be translated to multiple
lines with the same configuration key).
Boolean values are translated to "Yes" or "No".
The default contains some reasonable
configuration to yield an operational system.


- services.hylafax.internationalPrefix: International prefix for server and all modems.
- services.hylafax.longDistancePrefix: Long distance prefix for server and all modems.
- services.hylafax.modems: Description of installed modems.
At least on modem must be defined
to enable the HylaFAX server.

- services.hylafax.package: The HylaFAX package to use.
- services.hylafax.sendmailPath: Path to {file}`sendmail` program.
The default uses the local sendmail wrapper
(see {option}`config.services.mail.sendmailSetuidWrapper`),
otherwise the {file}`false`
binary to cause an error if used.

- services.hylafax.spoolAreaPath: The spooling area will be created/maintained
at the location given here.

- services.hylafax.spoolExtraInit: Additional shell code that is executed within the
spooling area directory right after its setup.

- services.hylafax.userAccessFile: The {file}`hosts.hfaxd`
file entry in the spooling area
will be symlinked to the location given here.
This file must exist and be
readable only by the `uucp` user.
See {manpage}`hosts.hfaxd(5)` for details.
This configuration permits access for all users:
```
  environment.etc."hosts.hfaxd" = {
    mode = "0600";
    user = "uucp";
    text = ".*";
  };
```
Note that host-based access can be controlled with
{option}`config.systemd.sockets.hylafax-hfaxd.listenStreams`;
by default, only 127.0.0.1 is permitted to connect.

- services.hypridle.enable: Whether to enable hypridle, Hyprland's idle daemon.
- services.hypridle.package: The hypridle package to use.
- services.i2p.enable: Whether to enable I2P router.
- services.i2pd.address: Your external IP or hostname.

- services.i2pd.addressbook.defaulturl: AddressBook subscription URL for initial setup

- services.i2pd.addressbook.subscriptions: AddressBook subscription URLs

- services.i2pd.bandwidth: Set a router bandwidth limit integer in KBps.
If not set, {command}`i2pd` defaults to 32KBps.

- services.i2pd.dataDir: Alternative path to storage of i2pd data (RI, keys, peer profiles, ...)

- services.i2pd.enable: Enables I2Pd as a running service upon activation.
Please read <https://i2pd.readthedocs.io/en/latest/> for further
configuration help.

- services.i2pd.enableIPv4: Whether to enable IPv4 connectivity.
- services.i2pd.enableIPv6: Whether to enable IPv6 connectivity.
- services.i2pd.exploratory.inbound.length: Guaranteed minimum hops for exploratory tunnels.
- services.i2pd.exploratory.inbound.quantity: Number of simultaneous exploratory tunnels.
- services.i2pd.exploratory.outbound.length: Guaranteed minimum hops for exploratory tunnels.
- services.i2pd.exploratory.outbound.quantity: Number of simultaneous exploratory tunnels.
- services.i2pd.extIp: Alias of {option}`services.i2pd.address`.
- services.i2pd.family: Specify a family the router belongs to.

- services.i2pd.floodfill: If the router is declared to be unreachable and needs introduction nodes.

- services.i2pd.ifname: Network interface to bind to.

- services.i2pd.ifname4: IPv4 interface to bind to.

- services.i2pd.ifname6: IPv6 interface to bind to.

- services.i2pd.inTunnels: Serve something on I2P network at port and delegate requests to address inPort.

- services.i2pd.limits.coreSize: Maximum size of corefile in Kb (0 - use system limit).

- services.i2pd.limits.ntcpHard: Maximum number of active transit sessions.

- services.i2pd.limits.ntcpSoft: Threshold to start probabalistic backoff with ntcp sessions (default: use system limit).

- services.i2pd.limits.ntcpThreads: Maximum number of threads used by NTCP DH worker.

- services.i2pd.limits.openFiles: Maximum number of open files (0 - use system default).

- services.i2pd.limits.transittunnels: Maximum number of active transit sessions.

- services.i2pd.logCLFTime: Whether to enable full CLF-formatted date and time to log.
- services.i2pd.logLevel: The log level. {command}`i2pd` defaults to "info"
but that generates copious amounts of log messages.

We default to "error" which is similar to the default log
level of {command}`tor`.

- services.i2pd.nat: Whether to enable NAT bypass.
- services.i2pd.netid: I2P overlay netid.

- services.i2pd.notransit: Tells the router to not accept transit tunnels during startup.

- services.i2pd.ntcp: Whether to enable ntcp.
- services.i2pd.ntcp2.enable: Whether to enable NTCP2.
- services.i2pd.ntcp2.port: Port to listen for incoming NTCP2 connections (0=auto).

- services.i2pd.ntcp2.published: Whether to enable NTCP2 publication.
- services.i2pd.ntcpProxy: Proxy URL for NTCP transport.

- services.i2pd.outTunnels: Connect to someone as a client and establish a local accept endpoint

- services.i2pd.package: The i2pd package to use.
- services.i2pd.port: I2P listen port. If no one is given the router will pick between 9111 and 30777.

- services.i2pd.precomputation.elgamal: Whenever to use precomputated tables for ElGamal.
{command}`i2pd` defaults to `false`
to save 64M of memory (and looses some performance).

We default to `true` as that is what most
users want anyway.

- services.i2pd.proto.bob.address: Bind address for bob endpoint.
- services.i2pd.proto.bob.enable: Whether to enable bob.
- services.i2pd.proto.bob.name: The endpoint name.
- services.i2pd.proto.bob.port: Bind port for bob endpoint.
- services.i2pd.proto.http.address: Bind address for http endpoint.
- services.i2pd.proto.http.auth: Whether to enable webconsole authentication.
- services.i2pd.proto.http.enable: Whether to enable http.
- services.i2pd.proto.http.hostname: Expected hostname for WebUI.

- services.i2pd.proto.http.name: The endpoint name.
- services.i2pd.proto.http.pass: Password for webconsole access.

- services.i2pd.proto.http.port: Bind port for http endpoint.
- services.i2pd.proto.http.strictHeaders: Enable strict host checking on WebUI.

- services.i2pd.proto.http.user: Username for webconsole access

- services.i2pd.proto.httpProxy.address: Bind address for httpproxy endpoint.
- services.i2pd.proto.httpProxy.enable: Whether to enable httpproxy.
- services.i2pd.proto.httpProxy.inbound.length: Guaranteed minimum hops for httpproxy tunnels.
- services.i2pd.proto.httpProxy.inbound.quantity: Number of simultaneous httpproxy tunnels.
- services.i2pd.proto.httpProxy.keys: File to persist HTTPPROXY keys.

- services.i2pd.proto.httpProxy.latency.max: Max latency for tunnels.
- services.i2pd.proto.httpProxy.latency.min: Min latency for tunnels.
- services.i2pd.proto.httpProxy.name: The endpoint name.
- services.i2pd.proto.httpProxy.outbound.length: Guaranteed minimum hops for httpproxy tunnels.
- services.i2pd.proto.httpProxy.outbound.quantity: Number of simultaneous httpproxy tunnels.
- services.i2pd.proto.httpProxy.outproxy: Upstream outproxy bind address.
- services.i2pd.proto.httpProxy.port: Bind port for httpproxy endpoint.
- services.i2pd.proto.i2cp.address: Bind address for i2cp endpoint.
- services.i2pd.proto.i2cp.enable: Whether to enable i2cp.
- services.i2pd.proto.i2cp.name: The endpoint name.
- services.i2pd.proto.i2cp.port: Bind port for i2cp endpoint.
- services.i2pd.proto.i2pControl.address: Bind address for i2pcontrol endpoint.
- services.i2pd.proto.i2pControl.enable: Whether to enable i2pcontrol.
- services.i2pd.proto.i2pControl.name: The endpoint name.
- services.i2pd.proto.i2pControl.port: Bind port for i2pcontrol endpoint.
- services.i2pd.proto.sam.address: Bind address for sam endpoint.
- services.i2pd.proto.sam.enable: Whether to enable sam.
- services.i2pd.proto.sam.name: The endpoint name.
- services.i2pd.proto.sam.port: Bind port for sam endpoint.
- services.i2pd.proto.socksProxy.address: Bind address for socksproxy endpoint.
- services.i2pd.proto.socksProxy.enable: Whether to enable socksproxy.
- services.i2pd.proto.socksProxy.inbound.length: Guaranteed minimum hops for socksproxy tunnels.
- services.i2pd.proto.socksProxy.inbound.quantity: Number of simultaneous socksproxy tunnels.
- services.i2pd.proto.socksProxy.keys: File to persist SOCKSPROXY keys.

- services.i2pd.proto.socksProxy.latency.max: Max latency for tunnels.
- services.i2pd.proto.socksProxy.latency.min: Min latency for tunnels.
- services.i2pd.proto.socksProxy.name: The endpoint name.
- services.i2pd.proto.socksProxy.outbound.length: Guaranteed minimum hops for socksproxy tunnels.
- services.i2pd.proto.socksProxy.outbound.quantity: Number of simultaneous socksproxy tunnels.
- services.i2pd.proto.socksProxy.outproxy: Upstream outproxy bind address.
- services.i2pd.proto.socksProxy.outproxyEnable: Whether to enable SOCKS outproxy.
- services.i2pd.proto.socksProxy.outproxyPort: Upstream outproxy bind port.
- services.i2pd.proto.socksProxy.port: Bind port for socksproxy endpoint.
- services.i2pd.reseed.file: Full path to SU3 file to reseed from.

- services.i2pd.reseed.floodfill: Path to router info of floodfill to reseed from.

- services.i2pd.reseed.proxy: URL for reseed proxy, supports http/socks.

- services.i2pd.reseed.urls: Reseed URLs.

- services.i2pd.reseed.verify: Whether to enable SU3 signature verification.
- services.i2pd.reseed.zipfile: Path to local .zip file to reseed from.

- services.i2pd.share: Limit of transit traffic from max bandwidth in percents.

- services.i2pd.ssu: Whether to enable ssu.
- services.i2pd.ssu2.enable: Whether to enable SSU2.
- services.i2pd.ssu2.port: Port to listen for incoming SSU2 connections (0=auto).

- services.i2pd.ssu2.published: Whether to enable SSU2 publication.
- services.i2pd.trust.enable: Whether to enable explicit trust options.
- services.i2pd.trust.family: Router Family to trust for first hops.

- services.i2pd.trust.hidden: Whether to enable router concealment.
- services.i2pd.trust.routers: Only connect to the listed routers.

- services.i2pd.upnp.enable: Whether to enable UPnP service discovery.
- services.i2pd.upnp.name: Name i2pd appears in UPnP forwardings list.

- services.i2pd.websocket.address: Bind address for websockets endpoint.
- services.i2pd.websocket.enable: Whether to enable websockets.
- services.i2pd.websocket.name: The endpoint name.
- services.i2pd.websocket.port: Bind port for websockets endpoint.
- services.i2pd.yggdrasil.address: Your local yggdrasil address. Specify it if you want to bind your router to a
particular address.

- services.i2pd.yggdrasil.enable: Whether to enable Yggdrasil.
- services.icecast.admin.password: Password used for all administration functions.
- services.icecast.admin.user: Username used for all administration functions.
- services.icecast.enable: Whether to enable Icecast server.
- services.icecast.extraConf: icecast.xml content.
- services.icecast.group: Group privileges for the server.
- services.icecast.hostname: DNS name or IP address that will be used for the stream directory lookups or possibly the playlist generation if a Host header is not provided.
- services.icecast.listen.address: Address Icecast will listen on.
- services.icecast.listen.port: TCP port that will be used to accept client connections.
- services.icecast.logDir: Base directory used for logging.
- services.icecast.user: User privileges for the server.
- services.icecream.daemon.cacheLimit: Maximum size in Megabytes of cache used to store compile environments of compile clients.

- services.icecream.daemon.enable: Whether to enable Icecream Daemon.
- services.icecream.daemon.extraArgs: Additional command line parameters.
- services.icecream.daemon.hostname: Hostname of the daemon in the icecream infrastructure.

Uses the hostname retrieved via uname if set to null.

- services.icecream.daemon.maxProcesses: Maximum number of compile jobs started in parallel for this daemon.

Uses the number of CPUs if set to null.

- services.icecream.daemon.netName: Network name to connect to. A scheduler with the same name needs to be running.

- services.icecream.daemon.nice: The level of niceness to use.

- services.icecream.daemon.noRemote: Prevent jobs from other nodes being scheduled on this daemon.

- services.icecream.daemon.openBroadcast: Whether to automatically open the firewall for scheduler discovery.

- services.icecream.daemon.openFirewall: Whether to automatically open receive port in the firewall.

- services.icecream.daemon.package: The icecream package to use.
- services.icecream.daemon.schedulerHost: Explicit scheduler hostname, useful in firewalled environments.

Uses scheduler autodiscovery via broadcast if set to null.

- services.icecream.daemon.user: User to run the icecream daemon as. Set to root to enable receive of
remote compile environments.

- services.icecream.scheduler.enable: Whether to enable Icecream Scheduler.
- services.icecream.scheduler.extraArgs: Additional command line parameters
- services.icecream.scheduler.netName: Network name for the icecream scheduler.

Uses the default ICECREAM if null.

- services.icecream.scheduler.openFirewall: Whether to automatically open the daemon port in the firewall.

- services.icecream.scheduler.openTelnet: Whether to open the telnet TCP port on 8766.

- services.icecream.scheduler.package: The icecream package to use.
- services.icecream.scheduler.persistentClientConnection: Whether to prevent clients from connecting to a better scheduler.

- services.icecream.scheduler.port: Server port to listen for icecream daemon requests.

- services.icingaweb2.authentications: authentication.ini contents.
Will automatically be converted to a .ini file.

If the value is null, no authentication.ini is created and you can
modify it manually (e.g. via the web interface).

- services.icingaweb2.enable: Whether to enable the icingaweb2 web interface.
- services.icingaweb2.generalConfig: config.ini contents.
Will automatically be converted to a .ini file.
If you don't set global.module_path, the module will take care of it.

If the value is null, no config.ini is created and you can
modify it manually (e.g. via the web interface).
Note that you need to update module_path manually.

- services.icingaweb2.groupBackends: groups.ini contents.
Will automatically be converted to a .ini file.

If the value is null, no groups.ini is created and you can
modify it manually (e.g. via the web interface).

- services.icingaweb2.libraryPaths: Libraries to add to the Icingaweb2 library path.
The name of the attribute is the name of the library, the value
is the package to add.

- services.icingaweb2.modulePackages: Name-package attrset of Icingaweb 2 modules packages to enable.

If you enable modules manually (e.g. via the web ui), they will not be touched.

- services.icingaweb2.modules.doc.enable: Whether to enable the icingaweb2 doc module.
- services.icingaweb2.modules.migrate.enable: Whether to enable the icingaweb2 migrate module.
- services.icingaweb2.modules.monitoring.backends: Monitoring backends to define
- services.icingaweb2.modules.monitoring.enable: Whether to enable the icingaweb2 monitoring module.
- services.icingaweb2.modules.monitoring.generalConfig.mutable: Make config.ini of the monitoring module mutable (e.g. via the web interface).
- services.icingaweb2.modules.monitoring.generalConfig.protectedVars: List of string patterns for custom variables which should be excluded from user’s view.
- services.icingaweb2.modules.monitoring.mutableBackends: Make backends.ini of the monitoring module mutable (e.g. via the web interface).
- services.icingaweb2.modules.monitoring.mutableTransports: Make commandtransports.ini of the monitoring module mutable (e.g. via the web interface).
- services.icingaweb2.modules.monitoring.transports: Command transports to define
- services.icingaweb2.modules.setup.enable: Whether to enable the icingaweb2 setup module.
- services.icingaweb2.modules.test.enable: Whether to enable the icingaweb2 test module.
- services.icingaweb2.modules.translation.enable: Whether to enable the icingaweb2 translation module.
- services.icingaweb2.pool: Name of existing PHP-FPM pool that is used to run Icingaweb2.
If not specified, a pool will automatically created with default values.

- services.icingaweb2.resources: resources.ini contents.
Will automatically be converted to a .ini file.

If the value is null, no resources.ini is created and you can
modify it manually (e.g. via the web interface).
Note that if you set passwords here, they will go into the nix store.

- services.icingaweb2.roles: roles.ini contents.
Will automatically be converted to a .ini file.

If the value is null, no roles.ini is created and you can
modify it manually (e.g. via the web interface).

- services.icingaweb2.timezone: PHP-compliant timezone specification
- services.icingaweb2.virtualHost: Name of the nginx virtualhost to use and setup. If null, no virtualhost is set up.

- services.ifm.dataDir: Directory to serve throught the file managing service
- services.ifm.enable: Whether to enable Improved file manager, a single-file web-based filemanager

Lightweight and minimal, served using PHP's built-in server
.
- services.ifm.listenAddress: Address on which the service is listening
- services.ifm.port: Port on which to serve the IFM service
- services.ifm.settings: Configuration of the IFM service.

See [the documentation](https://github.com/misterunknown/ifm/wiki/Configuration)
for available options and default values.

- services.ihaskell.enable: Autostart an IHaskell notebook service.
- services.ihaskell.extraPackages: Extra packages available to ghc when running ihaskell. The
value must be a function which receives the attrset defined
in {var}`haskellPackages` as the sole argument.

- services.ihatemoney
- services.illum.enable: Enable illum, a daemon for controlling screen brightness with brightness buttons.

- services.imaginary.address: Bind address. Corresponds to the `-a` flag.
Set to `""` to bind to all addresses.

- services.imaginary.enable: Whether to enable imaginary image processing microservice.
- services.imaginary.port: Bind port. Corresponds to the `-p` flag.
- services.imaginary.settings: Command line arguments passed to the imaginary executable, stripped of
the prefix `-`. See upstream's
[README](https://github.com/h2non/imaginary#command-line-usage) for all
options.

- services.immich.accelerationDevices: A list of device paths to hardware acceleration devices that immich should
have access to. This is useful when transcoding media files.
The special value `[ ]` will disallow all devices using `PrivateDevices`. `null` will give access to all devices.

- services.immich.database.createDB: Whether to enable the automatic creation of the database for immich..
- services.immich.database.enable: Whether to enable the postgresql database for use with immich. See {option}`services.postgresql`.
- services.immich.database.enableVectorChord: Whether to enable the new VectorChord extension for full-text search in Postgres.
- services.immich.database.enableVectors: Whether to enable pgvecto.rs in the database. You may disable this, if you have migrated to VectorChord and deleted the `vectors` schema..
- services.immich.database.host: Hostname or address of the postgresql server. If an absolute path is given here, it will be interpreted as a unix socket path.
- services.immich.database.name: The name of the immich database.
- services.immich.database.port: Port of the postgresql server.
- services.immich.database.user: The database user for immich.
- services.immich.enable: Whether to enable Immich.
- services.immich.environment: Extra configuration environment variables. Refer to the [documentation](https://immich.app/docs/install/environment-variables) for options tagged with 'server', 'api' or 'microservices'.

- services.immich.group: The group immich should run as.
- services.immich.host: The host that immich will listen on.
- services.immich.machine-learning.enable: Whether to enable immich's machine-learning functionality to detect faces and search for objects.
- services.immich.machine-learning.environment: Extra configuration environment variables. Refer to the [documentation](https://immich.app/docs/install/environment-variables) for options tagged with 'machine-learning'.

- services.immich.mediaLocation: Directory used to store media files. If it is not the default, the directory has to be created manually such that the immich user is able to read and write to it.
- services.immich.openFirewall: Whether to open the immich port in the firewall
- services.immich.package: The immich package to use.
- services.immich.port: The port that immich will listen on.
- services.immich.redis.enable: Whether to enable a redis cache for use with immich.
- services.immich.redis.host: The host that redis will listen on.
- services.immich.redis.port: The port that redis will listen on. Set to zero to disable TCP.
- services.immich.secretSettings: Secrets to to be added to the JSON file generated from {option}`settings`, read from files.

- services.immich.secretsFile: Path of a file with extra environment variables to be loaded from disk. This file is not added to the nix store, so it can be used to pass secrets to immich. Refer to the [documentation](https://immich.app/docs/install/environment-variables) for options.

To set a database password set this to a file containing:
```
DB_PASSWORD=<pass>
```

- services.immich.settings: Configuration for Immich.
See <https://immich.app/docs/install/config-file/> or navigate to
<https://my.immich.app/admin/system-settings> for
options and defaults.
Setting it to `null` allows configuring Immich in the web interface.

- services.immich.user: The user immich should run as.
- services.immich-public-proxy.enable: Whether to enable Immich Public Proxy.
- services.immich-public-proxy.immichUrl: URL of the Immich instance
- services.immich-public-proxy.openFirewall: Whether to open the IPP port in the firewall
- services.immich-public-proxy.package: The immich-public-proxy package to use.
- services.immich-public-proxy.port: The port that IPP will listen on.
- services.immich-public-proxy.settings: Configuration for IPP. See <https://github.com/alangrainger/immich-public-proxy/blob/main/README.md#additional-configuration> for options and defaults.

- services.inadyn.configFile: Configuration file for inadyn.

Setting this will override all other configuration options.

Passed to the inadyn service using LoadCredential.

- services.inadyn.enable: Whether to enable synchronise your machine's IP address with a dynamic DNS provider using inadyn
.
- services.inadyn.group: Group account under which inadyn runs.

::: {.note}
If left as the default value this user will automatically be created
on system activation, otherwise you are responsible for
ensuring the user exists before the inadyn service starts.
:::

- services.inadyn.interval: How often to check the current IP.
Uses the format described in {manpage}`systemd.time(7)`";

- services.inadyn.logLevel: Set inadyn's log level.
- services.inadyn.settings: See `inadyn.conf (5)`
- services.inadyn.user: User account under which inadyn runs.

::: {.note}
If left as the default value this user will automatically be created
on system activation, otherwise you are responsible for
ensuring the user exists before the inadyn service starts.
:::

- services.incron.allow: Users allowed to use incrontab.

If empty then no user will be allowed to have their own incrontab.
If `null` then will defer to {option}`deny`.
If both {option}`allow` and {option}`deny` are null
then all users will be allowed to have their own incrontab.

- services.incron.deny: Users forbidden from using incrontab.
- services.incron.enable: Whether to enable the incron daemon.

Note that commands run under incrontab only support common Nix profiles for the {env}`PATH` provided variable.

- services.incron.extraPackages: Extra packages available to the system incrontab.
- services.incron.systab: The system incrontab contents.
- services.infinoted.certificateChain: Chain of CA-certificates to which our `certificateFile` is relative.
Optional for TLS.

- services.infinoted.certificateFile: Server certificate to use for TLS

- services.infinoted.enable: Whether to enable infinoted.
- services.infinoted.extraConfig: Additional configuration to append to infinoted.conf

- services.infinoted.group: What to call the primary group of the dedicated user under which infinoted is run

- services.infinoted.keyFile: Private key to use for TLS

- services.infinoted.package: The libinfinity package to use.
- services.infinoted.passwordFile: File to read server-wide password from

- services.infinoted.plugins: Plugins to enable

- services.infinoted.port: Port to listen on

- services.infinoted.rootDirectory: Root of the directory structure to serve

- services.infinoted.securityPolicy: How strictly to enforce clients connection with TLS.

- services.infinoted.user: What to call the dedicated user under which infinoted is run

- services.influxdb.dataDir: Data directory for influxd data files.
- services.influxdb.enable: Whether to enable the influxdb server
- services.influxdb.extraConfig: Extra configuration options for influxdb
- services.influxdb.group: Group under which influxdb runs
- services.influxdb.package: The influxdb package to use.
- services.influxdb.user: User account under which influxdb runs
- services.influxdb2.enable: Whether to enable the influxdb2 server.
- services.influxdb2.package: The influxdb2 package to use.
- services.influxdb2.provision.enable: Whether to enable initial database setup and provisioning.
- services.influxdb2.provision.initialSetup.bucket: Primary bucket name
- services.influxdb2.provision.initialSetup.organization: Primary organization name
- services.influxdb2.provision.initialSetup.passwordFile: Password for primary user. Don't use a file from the nix store!
- services.influxdb2.provision.initialSetup.retention: The duration in seconds for which the bucket will retain data (0 is infinite).
- services.influxdb2.provision.initialSetup.tokenFile: API Token to set for the admin user. Don't use a file from the nix store!
- services.influxdb2.provision.initialSetup.username: Primary username
- services.influxdb2.provision.organizations: Organizations to provision.
- services.influxdb2.provision.users: Users to provision.
- services.influxdb2.settings: configuration options for influxdb2, see <https://docs.influxdata.com/influxdb/v2.0/reference/config-options> for details.
- services.infnoise.enable: Whether to enable the Infinite Noise TRNG driver.
- services.infnoise.fillDevRandom: Whether to run the infnoise driver as a daemon to refill /dev/random.

If disabled, you can use the `infnoise` command-line tool to
manually obtain randomness.

- services.input-remapper.enable: Whether to enable input-remapper, an easy to use tool to change the mapping of your input device buttons.
- services.input-remapper.enableUdevRules: Whether to enable udev rules added by input-remapper to handle hotplugged devices. Currently disabled by default due to <https://github.com/sezanzeb/input-remapper/issues/140>.
- services.input-remapper.package: The input-remapper package to use.
- services.input-remapper.serviceWantedBy: Specifies the WantedBy setting for the input-remapper service.
- services.inputplumber.enable: Whether to enable InputPlumber.
- services.inputplumber.package: The inputplumber package to use.
- services.inspircd.config: Verbatim `inspircd.conf` file.
For a list of options, consult the
[InspIRCd documentation](https://docs.inspircd.org/3/configuration/), the
[Module documentation](https://docs.inspircd.org/3/modules/)
and the example configuration files distributed
with `pkgs.inspircd.doc`

- services.inspircd.enable: Whether to enable InspIRCd.
- services.inspircd.package: The InspIRCd package to use. This is mainly useful
to specify an overridden version of the
`pkgs.inspircd` dervivation, for
example if you want to use a more minimal InspIRCd
distribution with less modules enabled or with
modules enabled which can't be distributed in binary
form due to licensing issues.

- services.interception-tools.enable: Whether to enable the interception tools service.
- services.interception-tools.plugins: A list of interception tools plugins that will be made available to use
inside the udevmon configuration.

- services.interception-tools.udevmonConfig: String of udevmon YAML configuration, or path to a udevmon YAML
configuration file.

- services.intune.enable: Whether to enable Microsoft Intune.
- services.invidious.address: The IP address Invidious should bind to.

- services.invidious.database.createLocally: Whether to create a local database with PostgreSQL.

- services.invidious.database.host: The database host Invidious should use.

If `null`, the local unix socket is used. Otherwise
TCP is used.

- services.invidious.database.passwordFile: Path to file containing the database password.

- services.invidious.database.port: The port of the database Invidious should use.

Defaults to the the default postgresql port.

- services.invidious.domain: The FQDN Invidious is reachable on.

This is used to configure nginx and for building absolute URLs.

- services.invidious.enable: Whether to enable Invidious.
- services.invidious.extraSettingsFile: A file including Invidious settings.

It gets merged with the settings specified in {option}`services.invidious.settings`
and can be used to store secrets like `hmac_key` outside of the nix store.

- services.invidious.hmacKeyFile: A path to a file containing the `hmac_key`. If `null`, a key will be generated automatically on first
start.

If non-`null`, this option overrides any `hmac_key` specified in {option}`services.invidious.settings` or
via {option}`services.invidious.extraSettingsFile`.

- services.invidious.http3-ytproxy.enable: Whether to enable http3-ytproxy for faster loading of images and video playback.

If {option}`services.invidious.nginx.enable` is used, nginx will be configured automatically. If not, you
need to configure a reverse proxy yourself according to
<https://docs.invidious.io/improve-public-instance/#3-speed-up-video-playback-with-http3-ytproxy>.

- services.invidious.http3-ytproxy.package: The http3-ytproxy package to use.
- services.invidious.nginx.enable: Whether to configure nginx as a reverse proxy for Invidious.

It serves it under the domain specified in {option}`services.invidious.settings.domain` with enabled TLS and ACME.
Further configuration can be done through {option}`services.nginx.virtualHosts.${config.services.invidious.settings.domain}.*`,
which can also be used to disable AMCE and TLS.

- services.invidious.package: The invidious package to use.
- services.invidious.port: The port Invidious should listen on.

To allow access from outside,
you can use either {option}`services.invidious.nginx`
or add `config.services.invidious.port` to {option}`networking.firewall.allowedTCPPorts`.

- services.invidious.serviceScale: How many invidious instances to run.

See <https://docs.invidious.io/improve-public-instance/#2-multiple-invidious-processes> for more details
on how this is intended to work. All instances beyond the first one have the options `channel_threads`
and `feed_threads` set to 0 to avoid conflicts with multiple instances refreshing subscriptions. Instances
will be configured to bind to consecutive ports starting with {option}`services.invidious.port` for the
first instance.

- services.invidious.settings: The settings Invidious should use.

See [config.example.yml](https://github.com/iv-org/invidious/blob/master/config/config.example.yml) for a list of all possible options.

- services.invidious.sig-helper.enable: Whether to enable and configure inv-sig-helper to emulate the youtube client's javascript. This is required
to make certain videos playable.

This will download and run completely untrusted javascript from youtube! While this service is sandboxed,
this may still be an issue!

- services.invidious.sig-helper.listenAddress: The IP address/port where inv-sig-helper should listen.

- services.invidious.sig-helper.package: The inv-sig-helper package to use.
- services.invidious-router.address: Address on which invidious-router should listen on.

- services.invidious-router.enable: Whether to enable the invidious-router service.
- services.invidious-router.nginx.domain: The domain on which invidious-router should be served.

- services.invidious-router.nginx.enable: Whether to enable Automatic nginx proxy configuration
.
- services.invidious-router.nginx.extraDomains: Additional domains to serve invidious-router on.

- services.invidious-router.package: The invidious-router package to use.
- services.invidious-router.port: Port to bind to.

- services.invidious-router.settings: Configuration for invidious-router.
Check <https://gitlab.com/gaincoder/invidious-router#configuration>
for configuration options.

- services.invoiceplane
- services.iodine.clients: Each attribute of this option defines a systemd service that
runs iodine. Many or none may be defined.
The name of each service is
`iodine-«name»`
where «name» is the name of the
corresponding attribute name.

- services.iodine.server.domain: Domain or subdomain of which nameservers point to us
- services.iodine.server.enable: enable iodined server
- services.iodine.server.extraConfig: Additional command line parameters
- services.iodine.server.ip: The assigned ip address or ip range
- services.iodine.server.passwordFile: File that contains password
- services.iodined.client
- services.iodined.domain: Alias of {option}`services.iodine.server.domain`.
- services.iodined.enable: Alias of {option}`services.iodine.server.enable`.
- services.iodined.extraConfig: Alias of {option}`services.iodine.server.extraConfig`.
- services.iodined.ip: Alias of {option}`services.iodine.server.ip`.
- services.iperf3.affinity: CPU affinity for the process.
- services.iperf3.authorizedUsersFile: Path to the configuration file containing authorized users credentials to run iperf tests.
- services.iperf3.bind: Bind to the specific interface associated with the given address.
- services.iperf3.debug: Emit debugging output.
- services.iperf3.enable: Whether to enable iperf3 network throughput testing server.
- services.iperf3.extraFlags: Extra flags to pass to iperf3(1).
- services.iperf3.forceFlush: Force flushing output at every interval.
- services.iperf3.openFirewall: Open ports in the firewall for iperf3.
- services.iperf3.package: The iperf3 package to use.
- services.iperf3.port: Server port to listen on for iperf3 client requests.
- services.iperf3.rsaPrivateKey: Path to the RSA private key (not password-protected) used to decrypt authentication credentials from the client.
- services.iperf3.verbose: Give more detailed output.
- services.ipfs.apiAddress: Alias of {option}`services.kubo.settings.Addresses.API`.
- services.ipfs.autoMigrate: Alias of {option}`services.kubo.autoMigrate`.
- services.ipfs.autoMount: Alias of {option}`services.kubo.autoMount`.
- services.ipfs.dataDir: Alias of {option}`services.kubo.dataDir`.
- services.ipfs.defaultMode: Alias of {option}`services.kubo.defaultMode`.
- services.ipfs.emptyRepo: Alias of {option}`services.kubo.emptyRepo`.
- services.ipfs.enable: Alias of {option}`services.kubo.enable`.
- services.ipfs.enableGC: Alias of {option}`services.kubo.enableGC`.
- services.ipfs.extraConfig: Alias of {option}`services.kubo.settings`.
- services.ipfs.extraFlags: Alias of {option}`services.kubo.extraFlags`.
- services.ipfs.gatewayAddress: Alias of {option}`services.kubo.settings.Addresses.Gateway`.
- services.ipfs.group: Alias of {option}`services.kubo.group`.
- services.ipfs.ipfsMountDir: Alias of {option}`services.kubo.settings.Mounts.IPFS`.
- services.ipfs.ipnsMountDir: Alias of {option}`services.kubo.settings.Mounts.IPNS`.
- services.ipfs.localDiscovery: Alias of {option}`services.kubo.localDiscovery`.
- services.ipfs.package: Alias of {option}`services.kubo.package`.
- services.ipfs.serviceFdlimit: Alias of {option}`services.kubo.serviceFdlimit`.
- services.ipfs.startWhenNeeded: Alias of {option}`services.kubo.startWhenNeeded`.
- services.ipfs.swarmAddress: Alias of {option}`services.kubo.settings.Addresses.Swarm`.
- services.ipfs.user: Alias of {option}`services.kubo.user`.
- services.ipfs-cluster.consensus: Consensus protocol - 'raft' or 'crdt'. <https://cluster.ipfs.io/documentation/guides/consensus/>
- services.ipfs-cluster.dataDir: The data dir for ipfs-cluster.
- services.ipfs-cluster.enable: Whether to enable Pinset orchestration for IPFS - requires ipfs daemon to be useful.
- services.ipfs-cluster.initPeers: Peer addresses to initialize with on first run.
- services.ipfs-cluster.openSwarmPort: Open swarm port, secured by the cluster secret. This does not expose the API or proxy. <https://cluster.ipfs.io/documentation/guides/security/>
- services.ipfs-cluster.secretFile: File containing the cluster secret in the format of EnvironmentFile as described by
{manpage}`systemd.exec(5)`. For example:
<programlisting>
CLUSTER_SECRET=<replaceable>...</replaceable>
</programlisting>

If null, a new secret will be generated on first run and stored in the data directory.
A secret in the correct format can also be generated by: `openssl rand -hex 32`

- services.ipp-usb.enable: Whether to enable ipp-usb, a daemon to turn an USB printer/scanner supporting IPP everywhere (aka AirPrint, WSD, AirScan) into a locally accessible network printer/scanner.
- services.iptsd.config: Configuration for IPTSD. See the
[reference configuration](https://github.com/linux-surface/iptsd/blob/master/etc/iptsd.conf)
for available options and defaults.

- services.iptsd.enable: Whether to enable the userspace daemon for Intel Precise Touch & Stylus.
- services.ircdHybrid.adminEmail: IRCD server administrator e-mail.

- services.ircdHybrid.certificate: IRCD server SSL certificate. There are some limitations - read manual.

- services.ircdHybrid.description: IRCD server description.

- services.ircdHybrid.enable: Whether to enable IRCD.
- services.ircdHybrid.extraIPs: Extra IP's to bind.

- services.ircdHybrid.extraPort: Extra port to avoid filtering.

- services.ircdHybrid.rsaKey: IRCD server RSA key.

- services.ircdHybrid.serverName: IRCD server name.

- services.ircdHybrid.sid: IRCD server unique ID in a net of servers.

- services.irkerd.enable: Whether to enable irker, an IRC notification daemon.
- services.irkerd.listenAddress: Specifies the bind address on which the irker daemon listens.
The default is localhost.

Irker authors strongly warn about the risks of running this on
a publicly accessible interface, so change this with caution.

- services.irkerd.nick: Nick to use for irker
- services.irkerd.openPorts: Open ports in the firewall for irkerd
- services.irqbalance.enable: Whether to enable irqbalance daemon.
- services.irqbalance.package: The irqbalance package to use.
- services.isso.enable: Whether to enable isso, a commenting server similar to Disqus.

Note: The application's author suppose to run isso behind a reverse proxy.
The embedded solution offered by NixOS is also only suitable for small installations
below 20 requests per second
.
- services.isso.settings: Configuration for `isso`.

See [Isso Server Configuration](https://posativ.org/isso/docs/configuration/server/)
for supported values.

- services.ivpn.enable: This option enables iVPN daemon.
This sets {option}`networking.firewall.checkReversePath` to "loose", which might be undesirable for security.

- services.jack.alsa.enable: Route audio to/from generic ALSA-using applications using ALSA JACK PCM plugin.

- services.jack.alsa.support32Bit: Whether to support sound for 32-bit ALSA applications on 64-bit system.

- services.jack.jackd.enable: Whether to enable JACK Audio Connection Kit. You need to add yourself to the "jackaudio" group
.
- services.jack.jackd.extraOptions: Specifies startup command line arguments to pass to JACK server.

- services.jack.jackd.package: The jack2 package to use.
- services.jack.jackd.session: Commands to run after JACK is started.

- services.jack.loopback.config: ALSA config for loopback device.

- services.jack.loopback.dmixConfig: For music production software that still doesn't support JACK natively you
would like to put buffer/period adjustments here
to decrease dmix device latency.

- services.jack.loopback.enable: Create ALSA loopback device, instead of using PCM plugin. Has broader
application support (things like Steam will work), but may need fine-tuning
for concrete hardware.

- services.jack.loopback.index: Index of an ALSA loopback device.

- services.jack.loopback.session: Additional commands to run to setup loopback device.

- services.jackett.dataDir: The directory where Jackett stores its data files.
- services.jackett.enable: Whether to enable Jackett, API support for your favorite torrent trackers.
- services.jackett.group: Group under which Jackett runs.
- services.jackett.openFirewall: Open ports in the firewall for the Jackett web interface.
- services.jackett.package: The jackett package to use.
- services.jackett.port: Port serving the web interface

- services.jackett.user: User account under which Jackett runs.
- services.jboss.deployDir: Location of the deployment files
- services.jboss.enable: Whether to enable JBoss. WARNING : this package is outdated and is known to have vulnerabilities.
- services.jboss.libUrl: Location where the shared library JARs are stored
- services.jboss.logDir: Location of the logfile directory of JBoss
- services.jboss.serverDir: Location of the server instance files
- services.jboss.tempDir: Location where JBoss stores its temp files
- services.jboss.useJK: Whether to use to connector to the Apache HTTP server
- services.jboss.user: User account under which jboss runs.
- services.jellyfin.cacheDir: Directory containing the jellyfin server cache,
passed with `--cachedir` see [#cache-directory](https://jellyfin.org/docs/general/administration/configuration/#cache-directory)

- services.jellyfin.configDir: Directory containing the server configuration files,
passed with `--configdir` see [configuration-directory](https://jellyfin.org/docs/general/administration/configuration/#configuration-directory)

- services.jellyfin.dataDir: Base data directory,
passed with `--datadir` see [#data-directory](https://jellyfin.org/docs/general/administration/configuration/#data-directory)

- services.jellyfin.enable: Whether to enable Jellyfin Media Server.
- services.jellyfin.group: Group under which jellyfin runs.
- services.jellyfin.logDir: Directory where the Jellyfin logs will be stored,
passed with `--logdir` see [#log-directory](https://jellyfin.org/docs/general/administration/configuration/#log-directory)

- services.jellyfin.openFirewall: Open the default ports in the firewall for the media server. The
HTTP/HTTPS ports can be changed in the Web UI, so this option should
only be used if they are unchanged, see [Port Bindings](https://jellyfin.org/docs/general/networking/#port-bindings).

- services.jellyfin.package: The jellyfin package to use.
- services.jellyfin.user: User account under which Jellyfin runs.
- services.jellyseerr.configDir: Config data directory
- services.jellyseerr.enable: Whether to enable Jellyseerr, a requests manager for Jellyfin.
- services.jellyseerr.openFirewall: Open port in the firewall for the Jellyseerr web interface.
- services.jellyseerr.package: The jellyseerr package to use.
- services.jellyseerr.port: The port which the Jellyseerr web UI should listen to.
- services.jenkins.enable: Whether to enable Jenkins, a continuous integration server.
- services.jenkins.environment: Additional environment variables to be passed to the jenkins process.
As a base environment, jenkins receives NIX_PATH from
{option}`environment.sessionVariables`, NIX_REMOTE is set to
"daemon" and JENKINS_HOME is set to the value of
{option}`services.jenkins.home`.
This option has precedence and can be used to override those
mentioned variables.

- services.jenkins.extraGroups: List of extra groups that the "jenkins" user should be a part of.

- services.jenkins.extraJavaOptions: Additional command line arguments to pass to the Java run time (as opposed to Jenkins).

- services.jenkins.extraOptions: Additional command line arguments to pass to Jenkins.

- services.jenkins.group: If the default user "jenkins" is configured then this is the primary
group of that user.

- services.jenkins.home: The path to use as JENKINS_HOME. If the default user "jenkins" is configured then
this is the home of the "jenkins" user.

- services.jenkins.javaPackage: The jdk21 package to use.
- services.jenkins.jobBuilder.accessToken: User token in Jenkins used to reload config.
WARNING: This token will be world readable in the Nix store. To keep
it secret, use the {option}`accessTokenFile` option instead.

- services.jenkins.jobBuilder.accessTokenFile: File containing the API token for the {option}`accessUser`
user.

- services.jenkins.jobBuilder.accessUser: User id in Jenkins used to reload config.

- services.jenkins.jobBuilder.enable: Whether to enable the Jenkins Job Builder (JJB) service. It
allows defining jobs for Jenkins in a declarative manner.

Jobs managed through the Jenkins WebUI (or by other means) are left
unchanged.

Note that it really is declarative configuration; if you remove a
previously defined job, the corresponding job directory will be
deleted.

Please see the Jenkins Job Builder documentation for more info:
<https://jenkins-job-builder.readthedocs.io/>
.
- services.jenkins.jobBuilder.jsonJobs: Job descriptions for Jenkins Job Builder in JSON format.

- services.jenkins.jobBuilder.nixJobs: Job descriptions for Jenkins Job Builder in Nix format.

This is a trivial wrapper around jsonJobs, using builtins.toJSON
behind the scene.

- services.jenkins.jobBuilder.yamlJobs: Job descriptions for Jenkins Job Builder in YAML format.

- services.jenkins.listenAddress: Specifies the bind address on which the jenkins HTTP interface listens.
The default is the wildcard address.

- services.jenkins.package: The jenkins package to use.
- services.jenkins.packages: Packages to add to PATH for the jenkins process.

- services.jenkins.plugins: A set of plugins to activate. Note that this will completely
remove and replace any previously installed plugins. If you
have manually-installed plugins that you want to keep while
using this module, set this option to
`null`. You can generate this set with a
tool such as `jenkinsPlugins2nix`.

- services.jenkins.port: Specifies port number on which the jenkins HTTP interface listens.
The default is 8080.

- services.jenkins.prefix: Specifies a urlPrefix to use with jenkins.
If the example /jenkins is given, the jenkins server will be
accessible using localhost:8080/jenkins.

- services.jenkins.user: User the jenkins server should execute under.

- services.jenkins.withCLI: Whether to make the CLI available.

More info about the CLI available at
[
https://www.jenkins.io/doc/book/managing/cli](https://www.jenkins.io/doc/book/managing/cli) .

- services.jenkinsSlave.enable: If true the system will be configured to work as a jenkins slave.
If the system is also configured to work as a jenkins master then this has no effect.
In progress: Currently only assures the jenkins user is configured.

- services.jenkinsSlave.group: If the default slave agent user "jenkins" is configured then this is
the primary group of that user.

- services.jenkinsSlave.home: The path to use as JENKINS_HOME. If the default user "jenkins" is configured then
this is the home of the "jenkins" user.

- services.jenkinsSlave.javaPackage: The jdk package to use.
- services.jenkinsSlave.user: User the jenkins slave agent should execute under.

- services.jibri.config: Jibri configuration.
See <https://github.com/jitsi/jibri/blob/master/src/main/resources/reference.conf>
for default configuration with comments.

- services.jibri.enable: Whether to enable Jitsi BRoadcasting Infrastructure. Currently Jibri must be run on a host that is also running {option}`services.jitsi-meet.enable`, so for most use cases it will be simpler to run {option}`services.jitsi-meet.jibri.enable`.
- services.jibri.finalizeScript: This script runs when jibri finishes recording a video of a conference.

- services.jibri.ignoreCert: Whether to enable the flag "--ignore-certificate-errors" for the Chromium browser opened by Jibri.
Intended for use in automated tests or anywhere else where using a verified cert for Jitsi-Meet is not possible.

- services.jibri.xmppEnvironments: XMPP servers to connect to.

- services.jicofo.bridgeMuc: JID of the internal MUC used to communicate with Videobridges.

- services.jicofo.componentPasswordFile: Path to file containing component secret.

- services.jicofo.config: Contents of the {file}`jicofo.conf` configuration file.

- services.jicofo.enable: Whether to enable Jitsi Conference Focus - component of Jitsi Meet.
- services.jicofo.userDomain: Domain part of the JID for XMPP user connection.

- services.jicofo.userName: User part of the JID for XMPP user connection.

- services.jicofo.userPasswordFile: Path to file containing password for XMPP user connection.

- services.jicofo.xmppDomain: Domain name of the XMMP server to which to connect as a component.

If null, {option}`xmppHost` is used.

- services.jicofo.xmppHost: Hostname of the XMPP server to connect to.

- services.jigasi.bridgeMuc: JID of the internal MUC used to communicate with Videobridges.

- services.jigasi.componentPasswordFile: Path to file containing component secret.

- services.jigasi.config: Contents of the <filename>sip-communicator.properties</filename> configuration file for jigasi.

- services.jigasi.defaultJvbRoomName: Name of the default JVB room that will be joined if no special header is included in SIP invite.

- services.jigasi.enable: Whether to enable Jitsi Gateway to SIP - component of Jitsi Meet.
- services.jigasi.environmentFile: File containing environment variables to be passed to the jigasi service,
in which secret tokens can be specified securely by defining values for
<literal>JIGASI_SIPUSER</literal>,
<literal>JIGASI_SIPPWD</literal>,
<literal>JIGASI_SIPSERVER</literal> and
<literal>JIGASI_SIPPORT</literal>.

- services.jigasi.userDomain: Domain part of the JID for XMPP user connection.

- services.jigasi.userName: User part of the JID for XMPP user connection.

- services.jigasi.userPasswordFile: Path to file containing password for XMPP user connection.

- services.jigasi.xmppDomain: Domain name of the XMMP server to which to connect as a component.

If null, <option>xmppHost</option> is used.

- services.jigasi.xmppHost: Hostname of the XMPP server to connect to.

- services.jira
- services.jirafeau.adminPasswordSha256: SHA-256 of the desired administration password. Leave blank/unset for no password.

- services.jirafeau.dataDir: Location of Jirafeau storage directory.
- services.jirafeau.enable: Whether to enable Jirafeau file upload application.
- services.jirafeau.extraConfig: Jirefeau configuration. Refer to <https://gitlab.com/mojo42/Jirafeau/-/blob/4.4.0/lib/config.original.php> for supported
values.

- services.jirafeau.hostName: URL of instance. Must have trailing slash.
- services.jirafeau.maxUploadSizeMegabytes: Maximum upload size of accepted files.
- services.jirafeau.maxUploadTimeout: Timeout for reading client request bodies and headers. Refer to
<http://nginx.org/en/docs/http/ngx_http_core_module.html#client_body_timeout> and
<http://nginx.org/en/docs/http/ngx_http_core_module.html#client_header_timeout> for accepted values.

- services.jirafeau.nginxConfig: Extra configuration for the nginx virtual host of Jirafeau.
- services.jirafeau.package: The jirafeau package to use.
- services.jirafeau.poolConfig: Options for Jirafeau PHP pool. See documentation on `php-fpm.conf` for
details on configuration directives.

- services.jitsi-meet.caddy.enable: Whether to enable caddy reverse proxy to expose jitsi-meet.
- services.jitsi-meet.config: Client-side web application settings that override the defaults in {file}`config.js`.

See <https://github.com/jitsi/jitsi-meet/blob/master/config.js> for default
configuration with comments.

- services.jitsi-meet.enable: Whether to enable Jitsi Meet - Secure, Simple and Scalable Video Conferences.
- services.jitsi-meet.excalidraw.enable: Whether to enable Excalidraw collaboration backend for Jitsi.
- services.jitsi-meet.excalidraw.port: The port which the Excalidraw backend for Jitsi should listen to.
- services.jitsi-meet.extraConfig: Text to append to {file}`config.js` web application config file.

Can be used to insert JavaScript logic to determine user's region in cascading bridges setup.

- services.jitsi-meet.hostName: FQDN of the Jitsi Meet instance.

- services.jitsi-meet.interfaceConfig: Client-side web-app interface settings that override the defaults in {file}`interface_config.js`.

See <https://github.com/jitsi/jitsi-meet/blob/master/interface_config.js> for
default configuration with comments.

- services.jitsi-meet.jibri.enable: Whether to enable a Jibri instance and configure it to connect to Prosody.

Additional configuration is possible with {option}`services.jibri`, and
{option}`services.jibri.finalizeScript` is especially useful.

- services.jitsi-meet.jicofo.enable: Whether to enable JiCoFo instance and configure it to connect to Prosody.

Additional configuration is possible with {option}`services.jicofo`.

- services.jitsi-meet.jigasi.enable: Whether to enable jigasi instance and configure it to connect to Prosody.

Additional configuration is possible with <option>services.jigasi</option>.

- services.jitsi-meet.nginx.enable: Whether to enable nginx virtual host that will serve the javascript application and act as
a proxy for the XMPP server. Further nginx configuration can be done by adapting
{option}`services.nginx.virtualHosts.<hostName>`.
When this is enabled, ACME will be used to retrieve a TLS certificate by default. To disable
this, set the {option}`services.nginx.virtualHosts.<hostName>.enableACME` to
`false` and if appropriate do the same for
{option}`services.nginx.virtualHosts.<hostName>.forceSSL`.

- services.jitsi-meet.prosody.allowners_muc: Add module allowners, any user in chat is able to
kick other. Usefull in jitsi-meet to kick ghosts.

- services.jitsi-meet.prosody.enable: Whether to configure Prosody to relay XMPP messages between Jitsi Meet components. Turn this
off if you want to configure it manually.

- services.jitsi-meet.prosody.lockdown: Whether to disable Prosody features not needed by Jitsi Meet.

The default Prosody configuration assumes that it will be used as a
general-purpose XMPP server rather than as a companion service for
Jitsi Meet. This option reconfigures Prosody to only listen on
localhost without support for TLS termination, XMPP federation or
the file transfer proxy.

- services.jitsi-meet.secureDomain.authentication: The authentication type to be used by jitsi
- services.jitsi-meet.secureDomain.enable: Whether to enable Authenticated room creation.
- services.jitsi-meet.videobridge.enable: Jitsi Videobridge instance and configure it to connect to Prosody.

Additional configuration is possible with {option}`services.jitsi-videobridge`

- services.jitsi-meet.videobridge.passwordFile: File containing password to the Prosody account for videobridge.

If `null`, a file with password will be generated automatically. Setting
this option is useful if you plan to connect additional videobridges to the XMPP server.

- services.jitsi-videobridge.apis
- services.jitsi-videobridge.colibriRestApi: Whether to enable the private rest API for the COLIBRI control interface.
Needed for monitoring jitsi, enabling scraping of the /colibri/stats endpoint.

- services.jitsi-videobridge.config: Videobridge configuration.

See <https://github.com/jitsi/jitsi-videobridge/blob/master/jvb/src/main/resources/reference.conf>
for default configuration with comments.

- services.jitsi-videobridge.enable: Whether to enable Jitsi Videobridge, a WebRTC compatible video router.
- services.jitsi-videobridge.extraProperties: Additional Java properties passed to jitsi-videobridge.

- services.jitsi-videobridge.nat.harvesterAddresses: Addresses of public STUN services to use to automatically find
the public and local addresses of this Jitsi-Videobridge instance
without the need for manual configuration.

This option is ignored if {option}`services.jitsi-videobridge.nat.localAddress`
and {option}`services.jitsi-videobridge.nat.publicAddress` are set.

- services.jitsi-videobridge.nat.localAddress: Local address to assume when running behind NAT.

- services.jitsi-videobridge.nat.publicAddress: Public address to assume when running behind NAT.

- services.jitsi-videobridge.openFirewall: Whether to open ports in the firewall for the videobridge.

- services.jitsi-videobridge.xmppConfigs: XMPP servers to connect to.

See <https://github.com/jitsi/jitsi-videobridge/blob/master/doc/muc.md> for more information.

- services.jitterentropy-rngd.enable: Whether to enable jitterentropy-rngd service configuration.
- services.jitterentropy-rngd.package: The jitterentropy-rngd package to use.
- services.jmusicbot.enable: Whether to enable jmusicbot, a Discord music bot that's easy to set up and run yourself.
- services.jmusicbot.package: The jmusicbot package to use.
- services.jmusicbot.stateDir: The directory where config.txt and serversettings.json is saved.
If left as the default value this directory will automatically be created before JMusicBot starts, otherwise the sysadmin is responsible for ensuring the directory exists with appropriate ownership and permissions.
Untouched by the value of this option config.txt needs to be placed manually into this directory.

- services.jotta-cli.enable: Whether to enable Jottacloud Command-line Tool.
- services.jotta-cli.options: Command-line options passed to jottad.
- services.jotta-cli.package: The jotta-cli package to use.
- services.journalbeat.enable: Whether to enable journalbeat.
- services.journalbeat.extraConfig: Any other configuration options you want to add
- services.journalbeat.name: Name of the beat
- services.journalbeat.package: The journalbeat package to use.
- services.journalbeat.stateDir: Directory below `/var/lib/` to store journalbeat's
own logs and other data. This directory will be created automatically
using systemd's StateDirectory mechanism.

- services.journalbeat.tags: Tags to place on the shipped log messages
- services.journald.audit: If enabled systemd-journald will turn on auditing on start-up.
If disabled it will turn it off. If unset it will neither enable nor disable it, leaving the previous state unchanged.

NixOS defaults to leaving this unset as enabling audit without auditd running leads to spamming /dev/kmesg with random messages
and if you enable auditd then auditd is responsible for turning auditing on.

If you want to have audit logs in journald and do not mind audit logs also ending up in /dev/kmesg you can set this option to true.

If you want to for some ununderstandable reason disable auditing if auditd enabled it then you can set this option to false.
It is of NixOS' opinion that setting this to false is definitely the wrong thing to do - but it's an option.

- services.journald.console: If non-empty, write log messages to the specified TTY device.
- services.journald.enableHttpGateway: Alias of {option}`services.journald.gateway.enable`.
- services.journald.extraConfig: Extra config options for systemd-journald. See {manpage}`journald.conf(5)`
for available options.

- services.journald.forwardToSyslog: Whether to forward log messages to syslog.

- services.journald.gateway.cert: The path to a file or `AF_UNIX` stream socket to read the server
certificate from.

The certificate must be in PEM format. This option switches
`systemd-journal-gatewayd` into HTTPS mode and must be used together
with {option}`services.journald.gateway.key`.

- services.journald.gateway.enable: Whether to enable the HTTP gateway to the journal.
- services.journald.gateway.key: Specify the path to a file or `AF_UNIX` stream socket to read the
secret server key corresponding to the certificate specified with
{option}`services.journald.gateway.cert` from.

The key must be in PEM format.

This key should not be world-readable, and must be readably by the
`systemd-journal-gateway` user.

- services.journald.gateway.merge: Serve entries interleaved from all available journals, including other
machines.

This has the same meaning as `--merge` option for
{manpage}`journalctl(1)`.

- services.journald.gateway.port: The port to listen to.

- services.journald.gateway.system: Serve entries from system services and the kernel.

This has the same meaning as `--system` for {manpage}`journalctl(1)`.

- services.journald.gateway.trust: Specify the path to a file or `AF_UNIX` stream socket to read a CA
certificate from.

The certificate must be in PEM format.

Setting this option enforces client certificate checking.

- services.journald.gateway.user: Serve entries from services for the current user.

This has the same meaning as `--user` for {manpage}`journalctl(1)`.

- services.journald.rateLimitBurst: Configures the rate limiting burst limit (number of messages per
interval) that is applied to all messages generated on the system.
This rate limiting is applied per-service, so that two services
which log do not interfere with each other's limit.

Note that the effective rate limit is multiplied by a factor derived
from the available free disk space for the journal as described on
{manpage}`journald.conf(5)`.

Note that the total amount of logs stored is limited by journald settings
such as `SystemMaxUse`, which defaults to 10% the file system size
(capped at max 4GB), and `SystemKeepFree`, which defaults to 15% of the
file system size.

It is thus recommended to compute what period of time that you will be
able to store logs for when an application logs at full burst rate.
With default settings for log lines that are 100 Bytes long, this can
amount to just a few hours.

- services.journald.rateLimitInterval: Configures the rate limiting interval that is applied to all
messages generated on the system. This rate limiting is applied
per-service, so that two services which log do not interfere with
each other's limit. The value may be specified in the following
units: s, min, h, ms, us. To turn off any kind of rate limiting,
set either value to 0.

See {option}`services.journald.rateLimitBurst` for important
considerations when setting this value.

- services.journald.remote.enable: Whether to enable receiving systemd journals from the network.
- services.journald.remote.listen: Which protocol to listen to.

- services.journald.remote.output: The location of the output journal.

In case the output file is not specified, journal files will be created
underneath the selected directory. Files will be called
{file}`remote-hostname.journal`, where the `hostname` part is the
escaped hostname of the source endpoint of the connection, or the
numerical address if the hostname cannot be determined.

- services.journald.remote.port: The port to listen to.

Note that this option is used only if
{option}`services.journald.upload.listen` is configured to be either
"https" or "http".

- services.journald.remote.settings: Configuration in the journal-remote configuration file. See
{manpage}`journal-remote.conf(5)` for available options.

- services.journald.storage: Controls where to store journal data. See
{manpage}`journald.conf(5)` for further information.

- services.journald.upload.enable: Whether to enable uploading the systemd journal to a remote server.
- services.journald.upload.settings: Configuration for journal-upload. See {manpage}`journal-upload.conf(5)`
for available options.

- services.journaldriver.applicationCredentials: Path to the service account private key (in JSON-format) used
to forward log entries to Stackdriver Logging on non-GCP
instances.

This option is required on non-GCP machines, but should not be
set on GCP instances.

- services.journaldriver.enable: Whether to enable journaldriver to forward journald logs to
Stackdriver Logging.

- services.journaldriver.googleCloudProject: Configures the name of the Google Cloud project to which to
forward journald logs.

This option is required on non-GCP machines, but should not be
set on GCP instances.

- services.journaldriver.logLevel: Log level at which journaldriver logs its own output.

- services.journaldriver.logName: Configures the name of the target log in Stackdriver Logging.
This option can be set to, for example, the hostname of a
machine to improve the user experience in the logging
overview.

- services.journaldriver.logStream: Configures the name of the Stackdriver Logging log stream into
which to write journald entries.

This option is required on non-GCP machines, but should not be
set on GCP instances.

- services.journalwatch.accuracy: The time window around the interval in which the journalwatch run will be scheduled.

The format is described in {manpage}`systemd.time(7)`.

- services.journalwatch.enable: If enabled, periodically check the journal with journalwatch and report the results by mail.

- services.journalwatch.extraConfig: Extra lines to be added verbatim to the journalwatch/config configuration file.
You can add any commandline argument to the config, without the '--'.
See `journalwatch --help` for all arguments and their description.

- services.journalwatch.filterBlocks: filterBlocks can be defined to blacklist journal messages which are not errors.
Each block matches on a log entry field, and the filters in that block then are matched
against all messages with a matching log entry field.

All messages whose PRIORITY is at least 6 (INFO) are processed by journalwatch.
If you don't specify any filterBlocks, PRIORITY is reduced to 5 (NOTICE) by default.

All regular expressions are extended Python regular expressions, for details
see: http://doc.pyschools.com/html/regex.html

- services.journalwatch.interval: How often to run journalwatch.

The format is described in {manpage}`systemd.time(7)`.

- services.journalwatch.mailBinary: Sendmail-compatible binary to be used to send the messages.

- services.journalwatch.mailFrom: Mail address to send journalwatch reports from.

- services.journalwatch.mailTo: Mail address to send journalwatch reports to.

- services.journalwatch.package: The journalwatch package to use.
- services.journalwatch.priority: Lowest priority of message to be considered.
A value between 7 ("debug"), and 0 ("emerg"). Defaults to 6 ("info").
If you don't care about anything with "info" priority, you can reduce
this to e.g. 5 ("notice") to considerably reduce the amount of
messages without needing many {option}`filterBlocks`.

- services.joycond.enable: Whether to enable support for Nintendo Pro Controllers and Joycons.
- services.joycond.package: The joycond package to use.
- services.jupyter.command: Which command the service runs. Note that not all jupyter packages
have all commands, e.g. `jupyter lab` isn't present in the `notebook` package.

- services.jupyter.enable: Whether to enable Jupyter development server.
- services.jupyter.extraEnvironmentVariables: Extra environment variables to be set in the runtime context of jupyter notebook
- services.jupyter.extraPackages: Extra packages to be available in the jupyter runtime environment
- services.jupyter.group: Name of the group used to run the jupyter service.
Use this if you want to create a group of users that are able to view the notebook directory's content.

- services.jupyter.ip: IP address Jupyter will be listening on.

- services.jupyter.kernels: Declarative kernel config.

Kernels can be declared in any language that supports and has the required
dependencies to communicate with a jupyter server.
In python's case, it means that ipykernel package must always be included in
the list of packages of the targeted environment.

- services.jupyter.notebookConfig: Raw jupyter config.
Please use the password configuration option to set a password instead of passing it in here.

- services.jupyter.notebookDir: Root directory for notebooks.

- services.jupyter.package: The jupyter package to use.
- services.jupyter.password: Password to use with notebook.
Can be generated following: <https://jupyter-server.readthedocs.io/en/stable/operators/public-server.html#preparing-a-hashed-password>

- services.jupyter.port: Port number Jupyter will be listening on.

- services.jupyter.user: Name of the user used to run the jupyter service.
For security reason, jupyter should really not be run as root.
If not set (jupyter), the service will create a jupyter user with appropriate settings.

- services.jupyterhub.authentication: Jupyterhub authentication to use

There are many authenticators available including: oauth, pam,
ldap, kerberos, etc.

- services.jupyterhub.enable: Whether to enable Jupyterhub development server.
- services.jupyterhub.extraConfig: Extra contents appended to the jupyterhub configuration

Jupyterhub configuration is a normal python file using
Traitlets. <https://jupyterhub.readthedocs.io/en/stable/getting-started/config-basics.html>. The
base configuration of this module was designed to have sane
defaults for configuration but you can override anything since
this is a python file.

- services.jupyterhub.host: Bind IP JupyterHub will be listening on

- services.jupyterhub.jupyterhubEnv: Python environment to run jupyterhub

Customizing will affect the packages available in the hub and
proxy. This will allow packages to be available for the
extraConfig that you may need. This will not normally need to
be changed.

- services.jupyterhub.jupyterlabEnv: Python environment to run jupyterlab

Customizing will affect the packages available in the
jupyterlab server and the default kernel provided. This is the
way to customize the jupyterlab extensions and jupyter
notebook extensions. This will not normally need to
be changed.

- services.jupyterhub.kernels: Declarative kernel config

Kernels can be declared in any language that supports and has
the required dependencies to communicate with a jupyter server.
In python's case, it means that ipykernel package must always be
included in the list of packages of the targeted environment.

- services.jupyterhub.port: Port number Jupyterhub will be listening on

- services.jupyterhub.spawner: Jupyterhub spawner to use

There are many spawners available including: local process,
systemd, docker, kubernetes, yarn, batch, etc.

- services.jupyterhub.stateDirectory: Directory for jupyterhub state (token + database)

- services.k3s.autoDeployCharts: Auto deploying Helm charts that are installed by the k3s Helm controller. Avoid to use
attribute names that are also used in the [](#opt-services.k3s.manifests) and
[](#opt-services.k3s.charts) options. Manifests with the same name will override
auto deploying charts with the same name. Similiarly, charts with the same name will
overwrite the Helm chart contained in auto deploying charts. This option only makes
sense on server nodes (`role = server`). See the
[k3s Helm documentation](https://docs.k3s.io/helm) for further information.

- services.k3s.charts: Packaged Helm charts that are linked to {file}`/var/lib/rancher/k3s/server/static/charts` before k3s starts.
The attribute name will be used as the link target (relative to {file}`/var/lib/rancher/k3s/server/static/charts`).
The specified charts will only be placed on the file system and made available to the
Kubernetes APIServer from within the cluster. See the [](#opt-services.k3s.autoDeployCharts)
option and the [k3s Helm controller docs](https://docs.k3s.io/helm#using-the-helm-controller)
to deploy Helm charts. This option only makes sense on server nodes (`role = server`).

- services.k3s.clusterInit: Initialize HA cluster using an embedded etcd datastore.

If this option is `false` and `role` is `server`

On a server that was using the default embedded sqlite backend,
enabling this option will migrate to an embedded etcd DB.

If an HA cluster using the embedded etcd datastore was already initialized,
this option has no effect.

This option only makes sense in a server that is not connecting to another server.

If you are configuring an HA cluster with an embedded etcd,
the 1st server must have `clusterInit = true`
and other servers must connect to it using `serverAddr`.

- services.k3s.configPath: File path containing the k3s YAML config. This is useful when the config is generated (for example on boot).
- services.k3s.containerdConfigTemplate: Config template for containerd, to be placed at
`/var/lib/rancher/k3s/agent/etc/containerd/config.toml.tmpl`.
See the K3s docs on [configuring containerd](https://docs.k3s.io/advanced#configuring-containerd).

- services.k3s.disableAgent: Only run the server. This option only makes sense for a server.
- services.k3s.docker
- services.k3s.enable: Whether to enable k3s.
- services.k3s.environmentFile: File path containing environment variables for configuring the k3s service in the format of an EnvironmentFile. See {manpage}`systemd.exec(5)`.

- services.k3s.extraFlags: Extra flags to pass to the k3s command.
- services.k3s.extraKubeProxyConfig: Extra configuration to add to the kube-proxy's configuration file. The subset of the kube-proxy's
configuration that can be configured via a file is defined by the
[KubeProxyConfiguration](https://kubernetes.io/docs/reference/config-api/kube-proxy-config.v1alpha1/)
struct. Note that the kubeconfig param will be override by `clientConnection.kubeconfig`, so you must
set the `clientConnection.kubeconfig` if you want to use `extraKubeProxyConfig`.

- services.k3s.extraKubeletConfig: Extra configuration to add to the kubelet's configuration file. The subset of the kubelet's
configuration that can be configured via a file is defined by the
[KubeletConfiguration](https://kubernetes.io/docs/reference/config-api/kubelet-config.v1beta1/)
struct. See the
[documentation](https://kubernetes.io/docs/tasks/administer-cluster/kubelet-config-file/)
for further information.

- services.k3s.gracefulNodeShutdown.enable: Whether to enable graceful node shutdowns where the kubelet attempts to detect
node system shutdown and terminates pods running on the node. See the
[documentation](https://kubernetes.io/docs/concepts/cluster-administration/node-shutdown/#graceful-node-shutdown)
for further information.
.
- services.k3s.gracefulNodeShutdown.shutdownGracePeriod: Specifies the total duration that the node should delay the shutdown by. This is the total
grace period for pod termination for both regular and critical pods.

- services.k3s.gracefulNodeShutdown.shutdownGracePeriodCriticalPods: Specifies the duration used to terminate critical pods during a node shutdown. This should be
less than `shutdownGracePeriod`.

- services.k3s.images: List of derivations that provide container images.
All images are linked to {file}`/var/lib/rancher/k3s/agent/images` before k3s starts and consequently imported
by the k3s agent. Consider importing the k3s airgap images archive of the k3s package in
use, if you want to pre-provision this node with all k3s container images. This option
only makes sense on nodes with an enabled agent.

- services.k3s.manifests: Auto-deploying manifests that are linked to {file}`/var/lib/rancher/k3s/server/manifests` before k3s starts.
Note that deleting manifest files will not remove or otherwise modify the resources
it created. Please use the the `--disable` flag or `.skip` files to delete/disable AddOns,
as mentioned in the [docs](https://docs.k3s.io/installation/packaged-components#disabling-manifests).
This option only makes sense on server nodes (`role = server`).
Read the [auto-deploying manifests docs](https://docs.k3s.io/installation/packaged-components#auto-deploying-manifests-addons)
for further information.

- services.k3s.package: The k3s package to use.
- services.k3s.role: Whether k3s should run as a server or agent.

If it's a server:

- By default it also runs workloads as an agent.
- Starts by default as a standalone server using an embedded sqlite datastore.
- Configure `clusterInit = true` to switch over to embedded etcd datastore and enable HA mode.
- Configure `serverAddr` to join an already-initialized HA cluster.

If it's an agent:

- `serverAddr` is required.

- services.k3s.serverAddr: The k3s server to connect to.

Servers and agents need to communicate each other. Read
[the networking docs](https://rancher.com/docs/k3s/latest/en/installation/installation-requirements/#networking)
to know how to configure the firewall.

- services.k3s.token: The k3s token to use when connecting to a server.

WARNING: This option will expose store your token unencrypted world-readable in the nix store.
If this is undesired use the tokenFile option instead.

- services.k3s.tokenFile: File path containing k3s token to use when connecting to the server.
- services.kanata.enable: Whether to enable kanata, a tool to improve keyboard comfort and usability with advanced customization.
- services.kanata.keyboards: Keyboard configurations.
- services.kanata.package: The kanata package to use. ::: {.note}
If {option}`danger-enable-cmd` is enabled in any of the keyboards, the
`kanata-with-cmd` package should be used.
:::

- services.kanboard.dataDir: Default data folder for Kanboard.
- services.kanboard.domain: FQDN for the Kanboard instance.
- services.kanboard.enable: Whether to enable Kanboard.
- services.kanboard.group: Group under which Kanboard runs.
- services.kanboard.nginx: With this option, you can customize an NGINX virtual host which already
has sensible defaults for Kanboard. Set to `{ }` if you do not need any
customization for the virtual host. If enabled, then by default, the
{option}`serverName` is `${domain}`. If this is set to null (the
default), no NGINX virtual host will be configured.

- services.kanboard.package: The kanboard package to use.
- services.kanboard.phpfpm.settings: Options for kanboard's PHPFPM pool.

- services.kanboard.settings: Customize the default settings, refer to <https://github.com/kanboard/kanboard/blob/main/config.default.php>
for details on supported values.

- services.kanboard.user: User under which Kanboard runs.
- services.kanidm.clientSettings: Configure Kanidm clients, needed for the PAM daemon. See
[the documentation](https://kanidm.github.io/kanidm/stable/client_tools.html#kanidm-configuration)
and [example configuration](https://github.com/kanidm/kanidm/blob/master/examples/config)
for possible values.

- services.kanidm.enableClient: Whether to enable the Kanidm client.
- services.kanidm.enablePam: Whether to enable the Kanidm PAM and NSS integration.
- services.kanidm.enableServer: Whether to enable the Kanidm server.
- services.kanidm.package: The kanidm package to use. If not set will receive a specific version based on stateVersion. Set to `pkgs.kanidm` to always receive the latest version, with the understanding that this could introduce breaking changes.
- services.kanidm.provision.acceptInvalidCerts: Whether to allow invalid certificates when provisioning the target instance.
By default this is only allowed when the instanceUrl is localhost. This is
dangerous when used with an external URL.

- services.kanidm.provision.adminPasswordFile: Path to a file containing the admin password for kanidm. Do NOT use a file from the nix store here!
- services.kanidm.provision.autoRemove: Determines whether deleting an entity in this provisioning config should automatically
cause them to be removed from kanidm, too. This works because the provisioning tool tracks
all entities it has ever created. If this is set to false, you need to explicitly specify
`present = false` to delete an entity.

- services.kanidm.provision.enable: Whether to enable provisioning of groups, users and oauth2 resource servers.
- services.kanidm.provision.extraJsonFile: A JSON file for provisioning persons, groups & systems.
Options set in this file take precedence over values set using the other options.
The files get deeply merged, and deduplicated.
The accepted JSON schema can be found at <https://github.com/oddlama/kanidm-provision#json-schema>.

- services.kanidm.provision.groups: Provisioning of kanidm groups
- services.kanidm.provision.idmAdminPasswordFile: Path to a file containing the idm admin password for kanidm. Do NOT use a file from the nix store here!
If this is not given but provisioning is enabled, the idm_admin password will be reset on each restart.

- services.kanidm.provision.instanceUrl: The instance url to which the provisioning tool should connect.
- services.kanidm.provision.persons: Provisioning of kanidm persons
- services.kanidm.provision.systems.oauth2: Provisioning of oauth2 resource servers
- services.kanidm.serverSettings: Settings for Kanidm, see
[the documentation](https://kanidm.github.io/kanidm/stable/server_configuration.html)
and [example configuration](https://github.com/kanidm/kanidm/blob/master/examples/server.toml)
for possible values.

- services.kanidm.unixSettings: Configure Kanidm unix daemon.
See [the documentation](https://kanidm.github.io/kanidm/stable/integrations/pam_and_nsswitch.html#the-unix-daemon)
and [example configuration](https://github.com/kanidm/kanidm/blob/master/examples/unixd)
for possible values.

- services.kapacitor.alerta.enable: Whether to enable kapacitor alerta integration.
- services.kapacitor.alerta.environment: Default Alerta environment
- services.kapacitor.alerta.origin: Default origin of alert
- services.kapacitor.alerta.token: Default Alerta authentication token
- services.kapacitor.alerta.url: The URL to the Alerta REST API
- services.kapacitor.bind: Address to bind to. The default is to bind to all addresses
- services.kapacitor.dataDir: Location where Kapacitor stores its state
- services.kapacitor.defaultDatabase.enable: Whether to enable kapacitor.defaultDatabase.
- services.kapacitor.defaultDatabase.password: The password to connect to the remote InfluxDB server
- services.kapacitor.defaultDatabase.url: The URL to an InfluxDB server that serves as the default database
- services.kapacitor.defaultDatabase.username: The username to connect to the remote InfluxDB server
- services.kapacitor.enable: Whether to enable kapacitor.
- services.kapacitor.extraConfig: These lines go into kapacitord.conf verbatim.
- services.kapacitor.group: Group under which Kapacitor runs
- services.kapacitor.loadDirectory: Directory where to load services from, such as tasks, templates and handlers (or null to disable service loading on startup)
- services.kapacitor.port: Port of Kapacitor
- services.kapacitor.taskSnapshotInterval: Specifies how often to snapshot the task state  (in InfluxDB time units)
- services.kapacitor.user: User account under which Kapacitor runs
- services.karakeep.browser.enable: Enable the karakeep-browser service that runs a chromium instance in
the background with debugging ports exposed. This is necessary for
certain features like screenshots.

- services.karakeep.browser.exe: The browser executable (must be Chrome-like).
- services.karakeep.browser.port: The port the browser should run on.
- services.karakeep.enable: Whether to enable Enable the Karakeep service.
- services.karakeep.environmentFile: An optional path to an environment file that will be used in the web and workers
services. This is useful for loading private keys.

- services.karakeep.extraEnvironment: Environment variables to pass to Karakaeep. This is how most settings
can be configured. Changing DATA_DIR is possible but not supported.

See <https://docs.karakeep.app/configuration/>

- services.karakeep.meilisearch.enable: Enable Meilisearch and configure Karakeep to use it. Meilisearch is
required for text search.

- services.karakeep.package: The karakeep package to use.
- services.karma.configFile: A YAML config file which can be used to configure karma instead of the nix-generated file.

- services.karma.enable: Whether to enable the Karma dashboard service.
- services.karma.environment: Additional environment variables to provide to karma.

- services.karma.extraOptions: Extra command line options.

- services.karma.openFirewall: Whether to open ports in the firewall needed for karma to function.

- services.karma.package: The karma package to use.
- services.karma.settings: Karma dashboard configuration as nix attributes.

Reference: <https://github.com/prymitive/karma/blob/main/docs/CONFIGURATION.md>

- services.kasmweb.datastorePath: The directory used to store all data for kasmweb.

- services.kasmweb.defaultAdminPassword: default admin password to use.

- services.kasmweb.defaultGuacToken: default guac token to use.

- services.kasmweb.defaultManagerToken: default manager token to use.

- services.kasmweb.defaultRegistrationToken: default registration token to use.

- services.kasmweb.defaultUserPassword: default user password to use.

- services.kasmweb.enable: Whether to enable kasmweb.
- services.kasmweb.listenAddress: The address on which kasmweb should listen.

- services.kasmweb.listenPort: The port on which kasmweb should listen.

- services.kasmweb.networkSubnet: The network subnet to use for the containers.

- services.kasmweb.postgres.password: password to use for the postgres database.

- services.kasmweb.postgres.user: Username to use for the postgres database.

- services.kasmweb.redisPassword: password to use for the redis cache.

- services.kasmweb.sslCertificate: The SSL certificate to be used for kasmweb.

- services.kasmweb.sslCertificateKey: The SSL certificate's key to be used for kasmweb. Make sure to specify
this as a string and not a literal path, so that it is not accidentally
included in your nixstore.

- services.kavita.dataDir: The directory where Kavita stores its state.
- services.kavita.enable: Whether to enable Kavita reading server.
- services.kavita.ipAdresses
- services.kavita.package: The kavita package to use.
- services.kavita.port: Alias of {option}`services.kavita.settings.Port`.
- services.kavita.settings: Kavita configuration options, as configured in {file}`appsettings.json`.

- services.kavita.tokenKeyFile: A file containing the TokenKey, a secret with at 512+ bits.
It can be generated with `head -c 64 /dev/urandom | base64 --wrap=0`.

- services.kavita.user: User account under which Kavita runs.
- services.kbfs.enable: Whether to mount the Keybase filesystem.
- services.kbfs.enableRedirector: Whether to enable the Keybase root redirector service, allowing
any user to access KBFS files via `/keybase`,
which will show different contents depending on the requester.

- services.kbfs.extraFlags: Additional flags to pass to the Keybase filesystem on launch.

- services.kbfs.mountPoint: Mountpoint for the Keybase filesystem.
- services.kea.ctrl-agent: Kea Control Agent configuration

- services.kea.dhcp-ddns: Kea DHCP-DDNS configuration

- services.kea.dhcp4: DHCP4 Server configuration

- services.kea.dhcp6: DHCP6 Server configuration

- services.kea.package: The kea package to use.
- services.keepalived.enable: Whether to enable Keepalived.

- services.keepalived.enableScriptSecurity: Don't run scripts configured to be run as root if any part of the path is writable by a non-root user.

- services.keepalived.extraConfig: Extra lines to be added verbatim to the configuration file.

- services.keepalived.extraGlobalDefs: Extra lines to be added verbatim to the 'global_defs' block of the
configuration file

- services.keepalived.openFirewall: Whether to automatically allow VRRP and AH packets in the firewall.

- services.keepalived.package: The keepalived package to use.
- services.keepalived.secretFile: Environment variables from this file will be interpolated into the
final config file using envsubst with this syntax: `$ENVIRONMENT`
or `${VARIABLE}`.
The file should contain lines formatted as `SECRET_VAR=SECRET_VALUE`.
This is useful to avoid putting secrets into the nix store.

- services.keepalived.snmp.enable: Whether to enable the builtin AgentX subagent.

- services.keepalived.snmp.enableChecker: Enable SNMP handling of checker element of KEEPALIVED MIB.

- services.keepalived.snmp.enableKeepalived: Enable SNMP handling of vrrp element of KEEPALIVED MIB.

- services.keepalived.snmp.enableRfc: Enable SNMP handling of RFC2787 and RFC6527 VRRP MIBs.

- services.keepalived.snmp.enableRfcV2: Enable SNMP handling of RFC2787 VRRP MIB.

- services.keepalived.snmp.enableRfcV3: Enable SNMP handling of RFC6527 VRRP MIB.

- services.keepalived.snmp.enableTraps: Enable SNMP traps.

- services.keepalived.snmp.socket: Socket to use for connecting to SNMP master agent. If this value is
set to null, keepalived's default will be used, which is
unix:/var/agentx/master, unless using a network namespace, when the
default is udp:localhost:705.

- services.keepalived.vrrpInstances: Declarative vhost config
- services.keepalived.vrrpScripts: Declarative vrrp script config
- services.kerberos_server.enable: Whether to enable the kerberos authentication server.
- services.kerberos_server.extraKDCArgs: Extra arguments to pass to the KDC process. See {manpage}`kdc(8)`.

- services.kerberos_server.realms: Alias of {option}`services.kerberos_server.settings.realms`.
- services.kerberos_server.settings: Settings for the kerberos server of choice.

See the following documentation:
- Heimdal: {manpage}`kdc.conf(5)`
- MIT Kerberos: <https://web.mit.edu/kerberos/krb5-1.21/doc/admin/conf_files/kdc_conf.html>

- services.keter.bundle.appName: The name keter assigns to this bundle
- services.keter.bundle.domain: The domain keter will bind to
- services.keter.bundle.executable: The executable to be run
- services.keter.bundle.publicScript: Allows loading of public environment variables,
these are emitted to the log so it shouldn't contain secrets.

- services.keter.bundle.secretScript: Allows loading of private environment variables
- services.keter.enable: Whether to enable keter, a web app deployment manager.
Note that this module only support loading of webapps:
Keep an old app running and swap the ports when the new one is booted
.
- services.keter.globalKeterConfig: Global config for keter, see <https://github.com/snoyberg/keter/blob/master/etc/keter-config.yaml> for reference
- services.keter.keterPackage: Alias of {option}`services.keter.package`.
- services.keter.keterRoot: Alias of {option}`services.keter.root`.
- services.keter.package: The keter package to use.
- services.keter.root: Mutable state folder for keter
- services.keybase.enable: Whether to start the Keybase service.
- services.keycloak.bindAddress: Alias of {option}`services.keycloak.settings.http-host`.
- services.keycloak.database
- services.keycloak.enable: Whether to enable the Keycloak identity and access management
server.

- services.keycloak.extraConfig
- services.keycloak.forceBackendUrlToFrontendUrl: Alias of {option}`services.keycloak.settings.hostname-strict-backchannel`.
- services.keycloak.frontendUrl
- services.keycloak.httpPort
- services.keycloak.httpsPort
- services.keycloak.initialAdminPassword: Initial password set for the temporary `admin` user.
The password is not stored safely and should be changed
immediately in the admin panel.

See [Admin bootstrap and recovery](https://www.keycloak.org/server/bootstrap-admin-recovery) for details.

- services.keycloak.package: The keycloak package to use.
- services.keycloak.plugins: Keycloak plugin jar, ear files or derivations containing
them. Packaged plugins are available through
`pkgs.keycloak.plugins`.

- services.keycloak.realmFiles: Realm files that the server is going to import during startup.
If a realm already exists in the server, the import operation is
skipped. Importing the master realm is not supported. All files are
expected to be in `json` format. See the
[documentation](https://www.keycloak.org/server/importExport) for
further information.

- services.keycloak.settings: Configuration options corresponding to parameters set in
{file}`conf/keycloak.conf`.

Most available options are documented at <https://www.keycloak.org/server/all-config>.

Options containing secret data should be set to an attribute
set containing the attribute `_secret` - a
string pointing to a file containing the value the option
should be set to. See the example to get a better picture of
this: in the resulting
{file}`conf/keycloak.conf` file, the
`https-key-store-password` key will be set
to the contents of the
{file}`/run/keys/store_password` file.

- services.keycloak.sslCertificate: The path to a PEM formatted certificate to use for TLS/SSL
connections.

- services.keycloak.sslCertificateKey: The path to a PEM formatted private key to use for TLS/SSL
connections.

- services.keycloak.themes: Additional theme packages for Keycloak. Each theme is linked into
subdirectory with a corresponding attribute name.

Theme packages consist of several subdirectories which provide
different theme types: for example, `account`,
`login` etc. After adding a theme to this option you
can select it by its name in Keycloak administration console.

- services.keyd.enable: Whether to enable keyd, a key remapping daemon.
- services.keyd.ids
- services.keyd.keyboards: Configuration for one or more device IDs. Corresponding files in the /etc/keyd/ directory are created according to the name of the keys (like `default` or `externalKeyboard`).

- services.keyd.settings
- services.kimai.sites: Specification of one or more Kimai sites to serve
- services.kimai.webserver: The webserver to configure for the PHP frontend.

At the moment, only `nginx` is supported. PRs are welcome for support
for other web servers.

- services.kippo
- services.kismet.dataDir: The Kismet data directory.
- services.kismet.enable: Whether to enable kismet.
- services.kismet.extraConfig: Literal Kismet config lines appended to the site config.
Note that `services.kismet.settings` allows you to define
all options here using Nix attribute sets.

- services.kismet.group: The group to run Kismet as.
- services.kismet.httpd.address: The address to listen on. Note that this cannot be a hostname or Kismet will not start.
- services.kismet.httpd.enable: True to enable the HTTP server.
- services.kismet.httpd.port: The port to listen on.
- services.kismet.logTypes: The log types.
- services.kismet.package: The kismet package to use.
- services.kismet.serverDescription: The description of the server.
- services.kismet.serverName: The name of the server.
- services.kismet.settings: Options for Kismet. See:
https://www.kismetwireless.net/docs/readme/configuring/configfiles/

- services.kismet.user: The user to run Kismet as.
- services.klipper.apiSocket: Path of the API socket to create.
- services.klipper.configDir: Path to Klipper config file.
- services.klipper.configFile: Path to default Klipper config.
- services.klipper.enable: Whether to enable Klipper, the 3D printer firmware.
- services.klipper.extraSettings: Extra lines to append to the generated Klipper configuration.
- services.klipper.firmwares: Firmwares Klipper should manage
- services.klipper.group: Group account under which Klipper runs.

If null is specified (default), a temporary user will be created by systemd.

- services.klipper.inputTTY: Path of the virtual printer symlink to create.
- services.klipper.logFile: Path of the file Klipper should log to.
If `null`, it logs to stdout, which is not recommended by upstream.

- services.klipper.mutableConfig: Whether to manage the config outside of NixOS.

It will still be initialized with the defined NixOS config if the file doesn't already exist.

- services.klipper.mutableConfigFolder: Alias of {option}`services.klipper.configDir`.
- services.klipper.octoprintIntegration: Allows Octoprint to control Klipper.
- services.klipper.package: The klipper package to use.
- services.klipper.settings: Configuration for Klipper. See the [documentation](https://www.klipper3d.org/Overview.html#configuration-and-tuning-guides)
for supported values.

- services.klipper.user: User account under which Klipper runs.

If null is specified (default), a temporary user will be created by systemd.

- services.kmonad.enable: Whether to enable KMonad: an advanced keyboard manager.
- services.kmonad.extraArgs: Extra arguments to pass to KMonad.
- services.kmonad.keyboards: Keyboard configuration.
- services.kmonad.package: The KMonad package to use.
- services.kmscon.autologinUser: Username of the account that will be automatically logged in at the console.
If unspecified, a login prompt is shown as usual.

- services.kmscon.enable: Whether to enable kmscon as the virtual console instead of gettys.
kmscon is a kms/dri-based userspace virtual terminal implementation.
It supports a richer feature set than the standard linux console VT,
including full unicode support, and when the video card supports drm
should be much faster
.
- services.kmscon.extraConfig: Extra contents of the kmscon.conf file.
- services.kmscon.extraOptions: Extra flags to pass to kmscon.
- services.kmscon.fonts: Fonts used by kmscon, in order of priority.
- services.kmscon.hwRender: Whether to enable 3D hardware acceleration to render the console.
- services.kmscon.package: The kmscon package to use.
- services.kmscon.useXkbConfig: Whether to configure keymap from xserver keyboard settings.
- services.knot.checkConfig: Toggles the configuration test at build time. It runs in a
sandbox, and therefore cannot be used in all scenarios.

- services.knot.enable: Whether to enable Knot authoritative-only DNS server.
- services.knot.enableXDP: Extends the systemd unit with permissions to allow for the use of
the eXpress Data Path (XDP).

::: {.note}
  Make sure to read up on functional [limitations](https://www.knot-dns.cz/docs/latest/singlehtml/index.html#mode-xdp-limitations)
  when running in XDP mode.
:::

- services.knot.extraArgs: List of additional command line parameters for knotd

- services.knot.extraConfig
- services.knot.keyFiles: A list of files containing additional configuration
to be included using the include directive. This option
allows to include configuration like TSIG keys without
exposing them to the nix store readable to any process.
Note that using this option will also disable configuration
checks at build time.

- services.knot.package: The knot-dns package to use.
- services.knot.settings: Extra configuration as nix values.

- services.knot.settingsFile: As alternative to ``settings``, you can provide whole configuration
directly in the almost-YAML format of Knot DNS.
You might want to utilize ``pkgs.writeText "knot.conf" "longConfigString"`` for this.

- services.komga.enable: Whether to enable Komga, a free and open source comics/mangas media server.
- services.komga.group: Group under which Komga runs.
- services.komga.openFirewall: Whether to open the firewall for the port in {option}`services.komga.settings.server.port`.
- services.komga.port: Alias of {option}`services.komga.settings.server.port`.
- services.komga.settings: Komga configuration.

See [documentation](https://komga.org/docs/installation/configuration).

- services.komga.stateDir: State and configuration directory Komga will use.
- services.komga.user: User account under which Komga runs.
- services.kresd.cacheDir
- services.kresd.enable: Whether to enable knot-resolver domain name server.
DNSSEC validation is turned on by default.
You can run `kresd-cli 1` and give commands interactively to kresd@1.service.

- services.kresd.extraConfig: Extra lines to be added verbatim to the generated configuration file.
See upstream documentation <https://www.knot-resolver.cz/documentation/stable/config-overview.html> for more details.

- services.kresd.instances: The number of instances to start.  They will be called kresd@{1,2,...}.service.
Knot Resolver uses no threads, so this is the way to scale.
You can dynamically start/stop them at will, so this is just system default.

- services.kresd.interfaces
- services.kresd.listenDoH: Addresses and ports on which kresd should provide DNS over HTTPS/2 (see RFC 8484).
For detailed syntax see ListenStream in {manpage}`systemd.socket(5)`.

- services.kresd.listenPlain: What addresses and ports the server should listen on.
For detailed syntax see ListenStream in {manpage}`systemd.socket(5)`.

- services.kresd.listenTLS: Addresses and ports on which kresd should provide DNS over TLS (see RFC 7858).
For detailed syntax see ListenStream in {manpage}`systemd.socket(5)`.

- services.kresd.package: The knot-resolver package to use.
- services.kthxbye.alertmanager.timeout: Alertmanager request timeout duration in the [time.Duration](https://pkg.go.dev/time#ParseDuration) format.

- services.kthxbye.alertmanager.uri: Alertmanager URI to use.

- services.kthxbye.enable: Whether to enable kthxbye alert acknowledgement management daemon.
- services.kthxbye.extendBy: Extend silences by adding DURATION seconds.

DURATION should be provided in the [time.Duration](https://pkg.go.dev/time#ParseDuration) format.

- services.kthxbye.extendIfExpiringIn: Extend silences that are about to expire in the next DURATION seconds.

DURATION should be provided in the [time.Duration](https://pkg.go.dev/time#ParseDuration) format.

- services.kthxbye.extendWithPrefix: Extend silences with comment starting with PREFIX string.

- services.kthxbye.extraOptions: Extra command line options.

Documentation can be found [here](https://github.com/prymitive/kthxbye/blob/main/README.md).

- services.kthxbye.interval: Silence check interval duration in the [time.Duration](https://pkg.go.dev/time#ParseDuration) format.

- services.kthxbye.listenAddress: The address to listen on for HTTP requests.

- services.kthxbye.logJSON: Format logged messages as JSON.

- services.kthxbye.maxDuration: Maximum duration of a silence, it won't be extended anymore after reaching it.

Duration should be provided in the [time.Duration](https://pkg.go.dev/time#ParseDuration) format.

- services.kthxbye.openFirewall: Whether to open ports in the firewall needed for the daemon to function.

- services.kthxbye.package: The kthxbye package to use.
- services.kthxbye.port: The port to listen on for HTTP requests.

- services.kubernetes.addonManager.addons: Kubernetes addons (any kind of Kubernetes resource can be an addon).
- services.kubernetes.addonManager.bootstrapAddons: Bootstrap addons are like regular addons, but they are applied with cluster-admin rights.
They are applied at addon-manager startup only.

- services.kubernetes.addonManager.enable: Whether to enable Kubernetes addon manager.
- services.kubernetes.addons.dashboard
- services.kubernetes.addons.dns.clusterDomain: Dns cluster domain
- services.kubernetes.addons.dns.clusterIp: Dns addon clusterIP
- services.kubernetes.addons.dns.coredns: Docker image to seed for the CoreDNS container.
- services.kubernetes.addons.dns.corefile: Custom coredns corefile configuration.

See: <https://coredns.io/manual/toc/#configuration>.

- services.kubernetes.addons.dns.enable: Whether to enable kubernetes dns addon.
- services.kubernetes.addons.dns.reconcileMode: Controls the addon manager reconciliation mode for the DNS addon.

Setting reconcile mode to EnsureExists makes it possible to tailor DNS behavior by editing the coredns ConfigMap.

See: <https://github.com/kubernetes/kubernetes/blob/master/cluster/addons/addon-manager/README.md>.

- services.kubernetes.addons.dns.replicas: Number of DNS pod replicas to deploy in the cluster.
- services.kubernetes.apiserver.address: Alias of {option}`services.kubernetes.apiserver.bindAddress`.
- services.kubernetes.apiserver.admissionControl: Alias of {option}`services.kubernetes.apiserver.enableAdmissionPlugins`.
- services.kubernetes.apiserver.advertiseAddress: Kubernetes apiserver IP address on which to advertise the apiserver
to members of the cluster. This address must be reachable by the rest
of the cluster.

- services.kubernetes.apiserver.allowPrivileged: Whether to allow privileged containers on Kubernetes.
- services.kubernetes.apiserver.apiAudiences: Kubernetes apiserver ServiceAccount issuer.

- services.kubernetes.apiserver.authorizationMode: Kubernetes apiserver authorization mode (AlwaysAllow/AlwaysDeny/ABAC/Webhook/RBAC/Node). See
<https://kubernetes.io/docs/reference/access-authn-authz/authorization/>

- services.kubernetes.apiserver.authorizationPolicy: Kubernetes apiserver authorization policy file. See
<https://kubernetes.io/docs/reference/access-authn-authz/authorization/>

- services.kubernetes.apiserver.basicAuthFile: Kubernetes apiserver basic authentication file. See
<https://kubernetes.io/docs/reference/access-authn-authz/authentication>

- services.kubernetes.apiserver.bindAddress: The IP address on which to listen for the --secure-port port.
The associated interface(s) must be reachable by the rest
of the cluster, and by CLI/web clients.

- services.kubernetes.apiserver.clientCaFile: Kubernetes apiserver CA file for client auth.
- services.kubernetes.apiserver.disableAdmissionPlugins: Kubernetes admission control plugins to disable. See
<https://kubernetes.io/docs/admin/admission-controllers/>

- services.kubernetes.apiserver.enable: Whether to enable Kubernetes apiserver.
- services.kubernetes.apiserver.enableAdmissionPlugins: Kubernetes admission control plugins to enable. See
<https://kubernetes.io/docs/admin/admission-controllers/>

- services.kubernetes.apiserver.etcd.caFile: Etcd ca file.
- services.kubernetes.apiserver.etcd.certFile: Etcd cert file.
- services.kubernetes.apiserver.etcd.keyFile: Etcd key file.
- services.kubernetes.apiserver.etcd.servers: List of etcd servers.
- services.kubernetes.apiserver.extraOpts: Kubernetes apiserver extra command line options.
- services.kubernetes.apiserver.extraSANs: Extra x509 Subject Alternative Names to be added to the kubernetes apiserver tls cert.
- services.kubernetes.apiserver.featureGates: Attribute set of feature gates.
- services.kubernetes.apiserver.insecureBindAddress
- services.kubernetes.apiserver.insecurePort
- services.kubernetes.apiserver.kubeletClientCaFile: Path to a cert file for connecting to kubelet.
- services.kubernetes.apiserver.kubeletClientCertFile: Client certificate to use for connections to kubelet.
- services.kubernetes.apiserver.kubeletClientKeyFile: Key to use for connections to kubelet.
- services.kubernetes.apiserver.preferredAddressTypes: List of the preferred NodeAddressTypes to use for kubelet connections.
- services.kubernetes.apiserver.proxyClientCertFile: Client certificate to use for connections to proxy.
- services.kubernetes.apiserver.proxyClientKeyFile: Key to use for connections to proxy.
- services.kubernetes.apiserver.publicAddress
- services.kubernetes.apiserver.runtimeConfig: Api runtime configuration. See
<https://kubernetes.io/docs/tasks/administer-cluster/cluster-management/>

- services.kubernetes.apiserver.securePort: Kubernetes apiserver secure port.
- services.kubernetes.apiserver.serviceAccountIssuer: Kubernetes apiserver ServiceAccount issuer.

- services.kubernetes.apiserver.serviceAccountKeyFile: File containing PEM-encoded x509 RSA or ECDSA private or public keys,
used to verify ServiceAccount tokens. The specified file can contain
multiple keys, and the flag can be specified multiple times with
different files. If unspecified, --tls-private-key-file is used.
Must be specified when --service-account-signing-key is provided

- services.kubernetes.apiserver.serviceAccountSigningKeyFile: Path to the file that contains the current private key of the service
account token issuer. The issuer will sign issued ID tokens with this
private key.

- services.kubernetes.apiserver.serviceClusterIpRange: A CIDR notation IP range from which to assign service cluster IPs.
This must not overlap with any IP ranges assigned to nodes for pods.

- services.kubernetes.apiserver.storageBackend: Kubernetes apiserver storage backend.

- services.kubernetes.apiserver.tlsCertFile: Kubernetes apiserver certificate file.
- services.kubernetes.apiserver.tlsKeyFile: Kubernetes apiserver private key file.
- services.kubernetes.apiserver.tokenAuthFile: Kubernetes apiserver token authentication file. See
<https://kubernetes.io/docs/reference/access-authn-authz/authentication>

- services.kubernetes.apiserver.verbosity: Optional glog verbosity level for logging statements. See
<https://github.com/kubernetes/community/blob/master/contributors/devel/logging.md>

- services.kubernetes.apiserver.webhookConfig: Kubernetes apiserver Webhook config file. It uses the kubeconfig file format.
See <https://kubernetes.io/docs/reference/access-authn-authz/webhook/>

- services.kubernetes.apiserverAddress: Clusterwide accessible address for the kubernetes apiserver,
including protocol and optional port.

- services.kubernetes.caFile: Default kubernetes certificate authority
- services.kubernetes.clusterCidr: Kubernetes controller manager and proxy CIDR Range for Pods in cluster.
- services.kubernetes.controllerManager.address: Alias of {option}`services.kubernetes.controllerManager.bindAddress`.
- services.kubernetes.controllerManager.allocateNodeCIDRs: Whether to automatically allocate CIDR ranges for cluster nodes.
- services.kubernetes.controllerManager.bindAddress: Kubernetes controller manager listening address.
- services.kubernetes.controllerManager.clusterCidr: Kubernetes CIDR Range for Pods in cluster.
- services.kubernetes.controllerManager.enable: Whether to enable Kubernetes controller manager.
- services.kubernetes.controllerManager.extraOpts: Kubernetes controller manager extra command line options.
- services.kubernetes.controllerManager.featureGates: Attribute set of feature gates.
- services.kubernetes.controllerManager.insecurePort
- services.kubernetes.controllerManager.kubeconfig.caFile: Kubernetes controller manager certificate authority file used to connect to kube-apiserver.
- services.kubernetes.controllerManager.kubeconfig.certFile: Kubernetes controller manager client certificate file used to connect to kube-apiserver.
- services.kubernetes.controllerManager.kubeconfig.keyFile: Kubernetes controller manager client key file used to connect to kube-apiserver.
- services.kubernetes.controllerManager.kubeconfig.server: Kubernetes controller manager kube-apiserver server address.
- services.kubernetes.controllerManager.leaderElect: Whether to start leader election before executing main loop.
- services.kubernetes.controllerManager.rootCaFile: Kubernetes controller manager certificate authority file included in
service account's token secret.

- services.kubernetes.controllerManager.securePort: Kubernetes controller manager secure listening port.
- services.kubernetes.controllerManager.serviceAccountKeyFile: Kubernetes controller manager PEM-encoded private RSA key file used to
sign service account tokens

- services.kubernetes.controllerManager.tlsCertFile: Kubernetes controller-manager certificate file.
- services.kubernetes.controllerManager.tlsKeyFile: Kubernetes controller-manager private key file.
- services.kubernetes.controllerManager.verbosity: Optional glog verbosity level for logging statements. See
<https://github.com/kubernetes/community/blob/master/contributors/devel/logging.md>

- services.kubernetes.dataDir: Kubernetes root directory for managing kubelet files.
- services.kubernetes.easyCerts: Automatically setup x509 certificates and keys for the entire cluster.
- services.kubernetes.etcd.caFile: Alias of {option}`services.kubernetes.apiserver.etcd.caFile`.
- services.kubernetes.etcd.certFile: Alias of {option}`services.kubernetes.apiserver.etcd.certFile`.
- services.kubernetes.etcd.keyFile: Alias of {option}`services.kubernetes.apiserver.etcd.keyFile`.
- services.kubernetes.etcd.servers: Alias of {option}`services.kubernetes.apiserver.etcd.servers`.
- services.kubernetes.featureGates: List set of feature gates.
- services.kubernetes.flannel.enable: Whether to enable flannel networking.
- services.kubernetes.flannel.openFirewallPorts: Whether to open the Flannel UDP ports in the firewall on all interfaces.
- services.kubernetes.kubeconfig.caFile: Default kubeconfig certificate authority file used to connect to kube-apiserver.
- services.kubernetes.kubeconfig.certFile: Default kubeconfig client certificate file used to connect to kube-apiserver.
- services.kubernetes.kubeconfig.keyFile: Default kubeconfig client key file used to connect to kube-apiserver.
- services.kubernetes.kubeconfig.server: Default kubeconfig kube-apiserver server address.
- services.kubernetes.kubelet.address: Kubernetes kubelet info server listening address.
- services.kubernetes.kubelet.allowPrivileged
- services.kubernetes.kubelet.applyManifests
- services.kubernetes.kubelet.cadvisorPort
- services.kubernetes.kubelet.clientCaFile: Kubernetes apiserver CA file for client authentication.
- services.kubernetes.kubelet.clusterDns: Use alternative DNS.
- services.kubernetes.kubelet.clusterDomain: Use alternative domain.
- services.kubernetes.kubelet.cni.config: Kubernetes CNI configuration.
- services.kubernetes.kubelet.cni.configDir: Path to Kubernetes CNI configuration directory.
- services.kubernetes.kubelet.cni.packages: List of network plugin packages to install.
- services.kubernetes.kubelet.containerRuntime
- services.kubernetes.kubelet.containerRuntimeEndpoint: Endpoint at which to find the container runtime api interface/socket
- services.kubernetes.kubelet.enable: Whether to enable Kubernetes kubelet.
- services.kubernetes.kubelet.extraConfig: Kubernetes kubelet extra configuration file entries.

See also [Set Kubelet Parameters Via A Configuration File](https://kubernetes.io/docs/tasks/administer-cluster/kubelet-config-file/)
and [Kubelet Configuration](https://kubernetes.io/docs/reference/config-api/kubelet-config.v1beta1/).

- services.kubernetes.kubelet.extraOpts: Kubernetes kubelet extra command line options.
- services.kubernetes.kubelet.featureGates: Attribute set of feature gate
- services.kubernetes.kubelet.healthz.bind: Kubernetes kubelet healthz listening address.
- services.kubernetes.kubelet.healthz.port: Kubernetes kubelet healthz port.
- services.kubernetes.kubelet.hostname: Kubernetes kubelet hostname override.
- services.kubernetes.kubelet.kubeconfig.caFile: Kubelet certificate authority file used to connect to kube-apiserver.
- services.kubernetes.kubelet.kubeconfig.certFile: Kubelet client certificate file used to connect to kube-apiserver.
- services.kubernetes.kubelet.kubeconfig.keyFile: Kubelet client key file used to connect to kube-apiserver.
- services.kubernetes.kubelet.kubeconfig.server: Kubelet kube-apiserver server address.
- services.kubernetes.kubelet.manifests: List of manifests to bootstrap with kubelet (only pods can be created as manifest entry)
- services.kubernetes.kubelet.networkPlugin
- services.kubernetes.kubelet.nodeIp: IP address of the node. If set, kubelet will use this IP address for the node.
- services.kubernetes.kubelet.port: Kubernetes kubelet info server listening port.
- services.kubernetes.kubelet.registerNode: Whether to auto register kubelet with API server.
- services.kubernetes.kubelet.seedDockerImages: List of docker images to preload on system
- services.kubernetes.kubelet.taints: Node taints (https://kubernetes.io/docs/concepts/configuration/assign-pod-node/).
- services.kubernetes.kubelet.tlsCertFile: File containing x509 Certificate for HTTPS.
- services.kubernetes.kubelet.tlsKeyFile: File containing x509 private key matching tlsCertFile.
- services.kubernetes.kubelet.unschedulable: Whether to set node taint to unschedulable=true as it is the case of node that has only master role.
- services.kubernetes.kubelet.verbosity: Optional glog verbosity level for logging statements. See
<https://github.com/kubernetes/community/blob/master/contributors/devel/logging.md>

- services.kubernetes.lib: Common functions for the kubernetes modules.
- services.kubernetes.masterAddress: Clusterwide available network address or hostname for the kubernetes master server.
- services.kubernetes.package: The kubernetes package to use.
- services.kubernetes.path: Packages added to the services' PATH environment variable. Both the bin and sbin subdirectories of each package are added.
- services.kubernetes.pki.caCertPathPrefix: Path-prefrix for the CA-certificate to be used for cfssl signing.
Suffixes ".pem" and "-key.pem" will be automatically appended for
the public and private keys respectively.

- services.kubernetes.pki.caSpec: Certificate specification for the auto-generated CAcert.
- services.kubernetes.pki.certs: List of certificate specs to feed to cert generator.
- services.kubernetes.pki.cfsslAPIExtraSANs: Extra x509 Subject Alternative Names to be added to the cfssl API webserver TLS cert.

- services.kubernetes.pki.enable: Whether to enable easyCert issuer service.
- services.kubernetes.pki.etcClusterAdminKubeconfig: Symlink a kubeconfig with cluster-admin privileges to environment path
(/etc/\<path\>).

- services.kubernetes.pki.genCfsslAPICerts: Whether to automatically generate cfssl API webserver TLS cert and key,
if they don't exist.

- services.kubernetes.pki.genCfsslAPIToken: Whether to automatically generate cfssl API-token secret,
if they doesn't exist.

- services.kubernetes.pki.genCfsslCACert: Whether to automatically generate cfssl CA certificate and key,
if they don't exist.

- services.kubernetes.pki.pkiTrustOnBootstrap: Whether to always trust remote cfssl server upon initial PKI bootstrap.
- services.kubernetes.proxy.address: Alias of {option}`services.kubernetes.proxy.bindAddress`.
- services.kubernetes.proxy.bindAddress: Kubernetes proxy listening address.
- services.kubernetes.proxy.enable: Whether to enable Kubernetes proxy.
- services.kubernetes.proxy.extraOpts: Kubernetes proxy extra command line options.
- services.kubernetes.proxy.featureGates: Attribute set of feature gates.
- services.kubernetes.proxy.hostname: Kubernetes proxy hostname override.
- services.kubernetes.proxy.kubeconfig.caFile: Kubernetes proxy certificate authority file used to connect to kube-apiserver.
- services.kubernetes.proxy.kubeconfig.certFile: Kubernetes proxy client certificate file used to connect to kube-apiserver.
- services.kubernetes.proxy.kubeconfig.keyFile: Kubernetes proxy client key file used to connect to kube-apiserver.
- services.kubernetes.proxy.kubeconfig.server: Kubernetes proxy kube-apiserver server address.
- services.kubernetes.proxy.verbosity: Optional glog verbosity level for logging statements. See
<https://github.com/kubernetes/community/blob/master/contributors/devel/logging.md>

- services.kubernetes.roles: Kubernetes role that this machine should take.

Master role will enable etcd, apiserver, scheduler, controller manager
addon manager, flannel and proxy services.
Node role will enable flannel, docker, kubelet and proxy services.

- services.kubernetes.scheduler.address: Kubernetes scheduler listening address.
- services.kubernetes.scheduler.enable: Whether to enable Kubernetes scheduler.
- services.kubernetes.scheduler.extraOpts: Kubernetes scheduler extra command line options.
- services.kubernetes.scheduler.featureGates: Attribute set of feature gates.
- services.kubernetes.scheduler.kubeconfig.caFile: Kubernetes scheduler certificate authority file used to connect to kube-apiserver.
- services.kubernetes.scheduler.kubeconfig.certFile: Kubernetes scheduler client certificate file used to connect to kube-apiserver.
- services.kubernetes.scheduler.kubeconfig.keyFile: Kubernetes scheduler client key file used to connect to kube-apiserver.
- services.kubernetes.scheduler.kubeconfig.server: Kubernetes scheduler kube-apiserver server address.
- services.kubernetes.scheduler.leaderElect: Whether to start leader election before executing main loop.
- services.kubernetes.scheduler.port: Kubernetes scheduler listening port.
- services.kubernetes.scheduler.verbosity: Optional glog verbosity level for logging statements. See
<https://github.com/kubernetes/community/blob/master/contributors/devel/logging.md>

- services.kubernetes.secretsPath: Default location for kubernetes secrets. Not a store location.
- services.kubernetes.verbose
- services.kubo.apiAddress: Alias of {option}`services.kubo.settings.Addresses.API`.
- services.kubo.autoMigrate: Whether Kubo should try to run the fs-repo-migration at startup.
- services.kubo.autoMount: Whether Kubo should try to mount /ipfs, /ipns and /mfs at startup.
- services.kubo.dataDir: The data dir for Kubo
- services.kubo.defaultMode: systemd service that is enabled by default
- services.kubo.emptyRepo: If set to false, the repo will be initialized with help files
- services.kubo.enable: Whether to enable the Interplanetary File System (WARNING: may cause severe network degradation).
NOTE: after enabling this option and rebuilding your system, you need to log out
and back in for the `IPFS_PATH` environment variable to be present in your shell.
Until you do that, the CLI tools won't be able to talk to the daemon by default
.
- services.kubo.enableGC: Whether to enable automatic garbage collection
- services.kubo.extraConfig: Alias of {option}`services.kubo.settings`.
- services.kubo.extraFlags: Extra flags passed to the Kubo daemon
- services.kubo.gatewayAddress: Alias of {option}`services.kubo.settings.Addresses.Gateway`.
- services.kubo.group: Group under which the Kubo daemon runs
- services.kubo.ipfsMountDir: Alias of {option}`services.kubo.settings.Mounts.IPFS`.
- services.kubo.ipnsMountDir: Alias of {option}`services.kubo.settings.Mounts.IPNS`.
- services.kubo.localDiscovery: Whether to enable local discovery for the Kubo daemon.
          This will allow Kubo to scan ports on your local network. Some hosting services will ban you if you do this.

- services.kubo.package: The kubo package to use.
- services.kubo.serviceFdlimit: The fdlimit for the Kubo systemd unit or `null` to have the daemon attempt to manage it
- services.kubo.settings: Attrset of daemon configuration.
See [https://github.com/ipfs/kubo/blob/master/docs/config.md](https://github.com/ipfs/kubo/blob/master/docs/config.md) for reference.
You can't set `Identity` or `Pinning`.

- services.kubo.startWhenNeeded: Whether to use socket activation to start Kubo when needed.
- services.kubo.swarmAddress: Alias of {option}`services.kubo.settings.Addresses.Swarm`.
- services.kubo.user: User under which the Kubo daemon runs
- services.lact.enable: Whether to enable LACT, a tool for monitoring, configuring and overclocking GPUs.

::: {.note}
If you are on an AMD GPU, it is recommended to enable overdrive mode by using
`hardware.amdgpu.overdrive.enable = true;` in your configuration.
See [LACT wiki](https://github.com/ilya-zlobintsev/LACT/wiki/Overclocking-(AMD)) for more information.
:::

- services.lact.package: The lact package to use.
- services.lact.settings: Settings for LACT.

The easiest method of acquiring the settings is to delete
{file}`/etc/lact/config.yaml`, enter your settings and look
at the file.

::: {.note}
When `settings` is populated, the config file will be a symbolic link
and thus LACT daemon will not be able to modify it through the GUI.
:::

- services.lambdabot.enable: Enable the Lambdabot IRC bot
- services.lambdabot.package: The lambdabot package to use.
- services.lambdabot.script: Lambdabot script
- services.languagetool.allowOrigin: Set the Access-Control-Allow-Origin header in the HTTP response,
used for direct (non-proxy) JavaScript-based access from browsers.
`"*"` to allow access from all sites.

- services.languagetool.enable: Whether to enable the LanguageTool server, a multilingual spelling, style, and grammar checker that helps correct or paraphrase texts.
- services.languagetool.jrePackage: The jre package to use.
- services.languagetool.jvmOptions: Extra command line options for the JVM running languagetool.
More information can be found here: <https://docs.oracle.com/en/java/javase/19/docs/specs/man/java.html#standard-options-for-java>

- services.languagetool.package: The languagetool package to use.
- services.languagetool.port: Port on which LanguageTool listens.

- services.languagetool.public: Whether to enable access from anywhere (rather than just localhost).
- services.languagetool.settings: Configuration file options for LanguageTool, see
'languagetool-http-server --help'
for supported settings.

- services.lanraragi.enable: Whether to enable LANraragi.
- services.lanraragi.openFirewall: Open ports in the firewall for LANraragi's web interface.
- services.lanraragi.package: The lanraragi package to use.
- services.lanraragi.passwordFile: A file containing the password for LANraragi's admin interface.

- services.lanraragi.port: Port for LANraragi's web interface.
- services.lanraragi.redis.passwordFile: A file containing the password for LANraragi's Redis server.

- services.lanraragi.redis.port: Port for LANraragi's Redis server.
- services.lasuite-docs.backendPackage: The lasuite-docs package to use.
- services.lasuite-docs.bind: The path, host/port or file descriptior to bind the gunicorn socket to.

See  <https://docs.gunicorn.org/en/stable/settings.html#bind> for possible options.

- services.lasuite-docs.celery.extraArgs: Extra arguments to pass to the celery process.

- services.lasuite-docs.collaborationServer.package: The lasuite-docs-collaboration-server package to use.
- services.lasuite-docs.collaborationServer.port: Port used by the collaboration server to listen.

- services.lasuite-docs.collaborationServer.settings: Configuration options of collaboration server.

See <https://github.com/suitenumerique/docs/blob/v3.6.0/docs/env.md>

- services.lasuite-docs.domain: Domain name of the docs instance.

- services.lasuite-docs.enable: Whether to enable SuiteNumérique Docs.
- services.lasuite-docs.enableNginx: Whether to enable enable and configure Nginx for reverse proxying.
- services.lasuite-docs.environmentFile: Path to environment file.

This can be useful to pass secrets to docs via tools like `agenix` or `sops`.

- services.lasuite-docs.frontendPackage: The lasuite-docs-frontend package to use.
- services.lasuite-docs.gunicorn.extraArgs: Extra arguments to pass to the gunicorn process.

- services.lasuite-docs.postgresql.createLocally: Configure local PostgreSQL database server for docs.

- services.lasuite-docs.redis.createLocally: Configure local Redis cache server for docs.

- services.lasuite-docs.s3Url: URL of the S3 bucket.

- services.lasuite-docs.secretKeyPath: Path to the Django secret key.

The key can be generated using:
```
python3 -c 'import secrets; print(secrets.token_hex())'
```

If not set, the secret key will be automatically generated.

- services.lasuite-docs.settings: Configuration options of docs.

See <https://github.com/suitenumerique/docs/blob/v3.6.0/docs/env.md>

`REDIS_URL` and `CELERY_BROKER_URL` are set if `services.lasuite-docs.redis.createLocally` is true.
`DB_HOST` is set if `services.lasuite-docs.postgresql.createLocally` is true.

- services.lasuite-meet.backendPackage: The lasuite-meet package to use.
- services.lasuite-meet.bind: The path, host/port or file descriptior to bind the gunicorn socket to.

See  <https://docs.gunicorn.org/en/stable/settings.html#bind> for possible options.

- services.lasuite-meet.celery.extraArgs: Extra arguments to pass to the celery process.

- services.lasuite-meet.domain: Domain name of the meet instance.

- services.lasuite-meet.enable: Whether to enable SuiteNumérique Meet.
- services.lasuite-meet.enableNginx: Whether to enable enable and configure Nginx for reverse proxying.
- services.lasuite-meet.environmentFile: Path to environment file.

This can be useful to pass secrets to meet via tools like `agenix` or `sops`.

- services.lasuite-meet.frontendPackage: The lasuite-meet-frontend package to use.
- services.lasuite-meet.gunicorn.extraArgs: Extra arguments to pass to the gunicorn process.

- services.lasuite-meet.livekit.enable: Whether to enable Configure local livekit server.
- services.lasuite-meet.livekit.keyFile: LiveKit key file holding one or multiple application secrets.
Use `livekit-server generate-keys` to generate a random key name and secret.

The file should have the YAML format `<keyname>: <secret>`.
Example:
`lasuite-meet: f6lQGaHtM5HfgZjIcec3cOCRfiDqIine4CpZZnqdT5cE`

Individual key/secret pairs need to be passed to clients to connect to this instance.

- services.lasuite-meet.livekit.openFirewall: Whether to enable Open firewall ports for livekit.
- services.lasuite-meet.livekit.settings: Settings to pass to the livekit server.

See `services.livekit.settings` for more details.

- services.lasuite-meet.postgresql.createLocally: Whether to enable Configure local PostgreSQL database server for meet.
- services.lasuite-meet.redis.createLocally: Whether to enable Configure local Redis cache server for meet.
- services.lasuite-meet.secretKeyPath: Path to the Django secret key.

The key can be generated using:
```
python3 -c 'import secrets; print(secrets.token_hex())'
```

If not set, the secret key will be automatically generated.

- services.lasuite-meet.settings: Configuration options of meet.
See https://github.com/suitenumerique/meet/blob/v0.1.40/docs/env.md
`REDIS_URL` and `CELERY_BROKER_URL` are set if `services.lasuite-meet.redis.createLocally` is true.
`DB_NAME` `DB_USER` and `DB_HOST` are set if `services.lasuite-meet.postgresql.createLocally` is true.

- services.lavalink.address: The network address to bind to.

- services.lavalink.enable: Whether to enable Lavalink.
- services.lavalink.enableHttp2: Whether to enable HTTP/2 support.
- services.lavalink.environmentFile: Add custom environment variables from a file.
See <https://lavalink.dev/configuration/index.html#example-environment-variables> for the full documentation.

- services.lavalink.extraConfig: Configuration to write to {file}`application.yml`.
See <https://lavalink.dev/configuration/#example-applicationyml> for the full documentation.

Individual configuration parameters can be overwritten using environment variables.
See <https://lavalink.dev/configuration/#example-environment-variables> for more information.

- services.lavalink.group: The group of the service.

- services.lavalink.home: The home directory for lavalink.

- services.lavalink.jvmArgs: Set custom JVM arguments.

- services.lavalink.openFirewall: Whether to expose the port to the network.

- services.lavalink.package: The lavalink package to use.
- services.lavalink.password: The password for Lavalink's authentication in plain text.

- services.lavalink.plugins: A list of plugins for lavalink.

- services.lavalink.port: The port that Lavalink will use.

- services.lavalink.user: The user of the service.

- services.leaps.address: Hostname or IP-address to listen to. By default it will listen on all interfaces.
- services.leaps.enable: Whether to enable leaps, a pair programming service.
- services.leaps.path: Subdirectory used for reverse proxy setups
- services.leaps.port: A port where leaps listens for incoming http requests
- services.legit.enable: Whether to enable legit git web frontend.
- services.legit.group: Group account under which legit runs.
- services.legit.package: The legit-web package to use.
- services.legit.settings: The primary legit configuration. See the
[sample configuration](https://github.com/icyphox/legit/blob/master/config.yaml)
for possible values.

- services.legit.user: User account under which legit runs.
- services.lemmy.adminPasswordFile: File which contains the value of `setup.admin_password`.
- services.lemmy.caddy.enable: Whether to enable exposing lemmy with the caddy reverse proxy.
- services.lemmy.database.createLocally: Whether to enable creation of database on the instance.
- services.lemmy.database.uri: The connection URI to use. Takes priority over the configuration file if set.
- services.lemmy.database.uriFile: File which contains the database uri.
- services.lemmy.enable: Whether to enable lemmy a federated alternative to reddit in rust.
- services.lemmy.jwtSecretPath
- services.lemmy.nginx.enable: Whether to enable exposing lemmy with the nginx reverse proxy.
- services.lemmy.pictrsApiKeyFile: File which contains the value of `pictrs.api_key`.
- services.lemmy.server.package: The lemmy-server package to use.
- services.lemmy.settings: Lemmy configuration
- services.lemmy.smtpPasswordFile: File which contains the value of `email.smtp_password`.
- services.lemmy.ui.package: The lemmy-ui package to use.
- services.lemmy.ui.port: Port where lemmy-ui should listen for incoming requests.
- services.libeufin.bank.createLocalDatabase: Whether to enable automatic creation of a local postgres database.
- services.libeufin.bank.debug: Whether to enable debug logging.
- services.libeufin.bank.enable: Whether to enable libeufin core banking system and web interface.
- services.libeufin.bank.initialAccounts: Accounts to enable before the bank service starts.

This is mainly needed for the nexus currency conversion
since the exchange's bank account is expected to be already
registered.

Don't forget to change the account passwords afterwards.

- services.libeufin.bank.openFirewall: Whether to open ports in the firewall
- services.libeufin.bank.package: The libeufin package to use.
- services.libeufin.bank.settings: Configuration options for the libeufin bank system config file.

For a list of all possible options, please see the man page [`libeufin-bank.conf(5)`](https://docs.taler.net/manpages/libeufin-bank.conf.5.html)

- services.libeufin.nexus.createLocalDatabase: Whether to enable automatic creation of a local postgres database.
- services.libeufin.nexus.debug: Whether to enable debug logging.
- services.libeufin.nexus.enable: Whether to enable libeufin core banking system and web interface.
- services.libeufin.nexus.openFirewall: Whether to open ports in the firewall
- services.libeufin.nexus.package: The libeufin package to use.
- services.libeufin.nexus.settings: Configuration options for the libeufin nexus config file.

For a list of all possible options, please see the man page [`libeufin-nexus.conf(5)`](https://docs.taler.net/manpages/libeufin-nexus.conf.5.html)

- services.libeufin.settings: Global configuration options for the libeufin bank system config file.
- services.libinput.enable: Whether to enable libinput.
- services.libinput.mouse.accelPointsFallback: Sets the points of the fallback acceleration function. The value must be a list of
floating point non-negative numbers. This only applies to the custom profile.

- services.libinput.mouse.accelPointsMotion: Sets the points of the (pointer) motion acceleration function. The value must be a
list of floating point non-negative numbers. This only applies to the custom profile.

- services.libinput.mouse.accelPointsScroll: Sets the points of the scroll acceleration function. The value must be a list of
floating point non-negative numbers. This only applies to the custom profile.

- services.libinput.mouse.accelProfile: Sets the pointer acceleration profile to the given profile.
Permitted values are `adaptive`, `flat`, `custom`.
Not all devices support this option or all profiles.
If a profile is unsupported, the default profile for this is used.
`flat`: Pointer motion is accelerated by a constant
(device-specific) factor, depending on the current speed.
`adaptive`: Pointer acceleration depends on the input speed.
This is the default profile for most devices.
`custom`: Allows the user to define a custom acceleration function.
To define custom functions use the accelPoints<Fallback/Motion/Scroll>
and accelStep<Fallback/Motion/Scroll> options.

- services.libinput.mouse.accelSpeed: Cursor acceleration (how fast speed increases from minSpeed to maxSpeed).
This only applies to the flat or adaptive profile.

- services.libinput.mouse.accelStepFallback: Sets the step between the points of the fallback acceleration function. When a step of
0.0 is provided, libinput's Fallback acceleration function is used. This only applies
to the custom profile.

- services.libinput.mouse.accelStepMotion: Sets the step between the points of the (pointer) motion acceleration function. When a
step of 0.0 is provided, libinput's Fallback acceleration function is used. This only
applies to the custom profile.

- services.libinput.mouse.accelStepScroll: Sets the step between the points of the scroll acceleration function. When a step of
0.0 is provided, libinput's Fallback acceleration function is used. This only applies
to the custom profile.

- services.libinput.mouse.additionalOptions: Additional options for libinput mouse driver. See
{manpage}`libinput(4)`
for available options.";

- services.libinput.mouse.buttonMapping: Sets the logical button mapping for this device, see {manpage}`XSetPointerMapping(3)`. The string  must
be  a  space-separated  list  of  button mappings in the order of the logical buttons on the
device, starting with button 1.  The default mapping is "1 2 3 ... 32". A mapping of 0 deac‐
tivates the button. Multiple buttons can have the same mapping.  Invalid mapping strings are
discarded and the default mapping is used for all buttons.  Buttons  not  specified  in  the
user's mapping use the default mapping. See section BUTTON MAPPING for more details.

- services.libinput.mouse.calibrationMatrix: A string of 9 space-separated floating point numbers. Sets the calibration matrix to the
3x3 matrix where the first row is (abc), the second row is (def) and the third row is (ghi).

- services.libinput.mouse.clickMethod: Enables a click method. Permitted values are `none`,
`buttonareas`, `clickfinger`.
Not all devices support all methods, if an option is unsupported,
the default click method for this device is used.

- services.libinput.mouse.dev: Path for mouse device.  Set to `null` to apply to any
auto-detected mouse.

- services.libinput.mouse.disableWhileTyping: Disable input method while typing.

- services.libinput.mouse.horizontalScrolling: Enables or disables horizontal scrolling. When disabled, this driver will discard any
horizontal scroll events from libinput. This does not disable horizontal scroll events
from libinput; it merely discards the horizontal axis from any scroll events.

- services.libinput.mouse.leftHanded: Enables left-handed button orientation, i.e. swapping left and right buttons.
- services.libinput.mouse.middleEmulation: Enables middle button emulation. When enabled, pressing the left and right buttons
simultaneously produces a middle mouse button click.

- services.libinput.mouse.naturalScrolling: Enables or disables natural scrolling behavior.
- services.libinput.mouse.scrollButton: Designates a button as scroll button. If the ScrollMethod is button and the button is logically
held down, x/y axis movement is converted into scroll events.

- services.libinput.mouse.scrollMethod: Specify the scrolling method: `twofinger`, `edge`,
`button`, or `none`

- services.libinput.mouse.sendEventsMode: Sets the send events mode to `disabled`, `enabled`,
or `disabled-on-external-mouse`

- services.libinput.mouse.tapping: Enables or disables tap-to-click behavior.

- services.libinput.mouse.tappingButtonMap: Set the button mapping for 1/2/3-finger taps to left/right/middle or left/middle/right, respectively.

- services.libinput.mouse.tappingDragLock: Enables or disables drag lock during tapping behavior. When enabled, a finger up during tap-
and-drag will not immediately release the button. If the finger is set down again within the
timeout, the dragging process continues.

- services.libinput.mouse.transformationMatrix: A string of 9 space-separated floating point numbers. Sets the transformation matrix to
the 3x3 matrix where the first row is (abc), the second row is (def) and the third row is (ghi).

- services.libinput.touchpad.accelPointsFallback: Sets the points of the fallback acceleration function. The value must be a list of
floating point non-negative numbers. This only applies to the custom profile.

- services.libinput.touchpad.accelPointsMotion: Sets the points of the (pointer) motion acceleration function. The value must be a
list of floating point non-negative numbers. This only applies to the custom profile.

- services.libinput.touchpad.accelPointsScroll: Sets the points of the scroll acceleration function. The value must be a list of
floating point non-negative numbers. This only applies to the custom profile.

- services.libinput.touchpad.accelProfile: Sets the pointer acceleration profile to the given profile.
Permitted values are `adaptive`, `flat`, `custom`.
Not all devices support this option or all profiles.
If a profile is unsupported, the default profile for this is used.
`flat`: Pointer motion is accelerated by a constant
(device-specific) factor, depending on the current speed.
`adaptive`: Pointer acceleration depends on the input speed.
This is the default profile for most devices.
`custom`: Allows the user to define a custom acceleration function.
To define custom functions use the accelPoints<Fallback/Motion/Scroll>
and accelStep<Fallback/Motion/Scroll> options.

- services.libinput.touchpad.accelSpeed: Cursor acceleration (how fast speed increases from minSpeed to maxSpeed).
This only applies to the flat or adaptive profile.

- services.libinput.touchpad.accelStepFallback: Sets the step between the points of the fallback acceleration function. When a step of
0.0 is provided, libinput's Fallback acceleration function is used. This only applies
to the custom profile.

- services.libinput.touchpad.accelStepMotion: Sets the step between the points of the (pointer) motion acceleration function. When a
step of 0.0 is provided, libinput's Fallback acceleration function is used. This only
applies to the custom profile.

- services.libinput.touchpad.accelStepScroll: Sets the step between the points of the scroll acceleration function. When a step of
0.0 is provided, libinput's Fallback acceleration function is used. This only applies
to the custom profile.

- services.libinput.touchpad.additionalOptions: Additional options for libinput touchpad driver. See
{manpage}`libinput(4)`
for available options.";

- services.libinput.touchpad.buttonMapping: Sets the logical button mapping for this device, see {manpage}`XSetPointerMapping(3)`. The string  must
be  a  space-separated  list  of  button mappings in the order of the logical buttons on the
device, starting with button 1.  The default mapping is "1 2 3 ... 32". A mapping of 0 deac‐
tivates the button. Multiple buttons can have the same mapping.  Invalid mapping strings are
discarded and the default mapping is used for all buttons.  Buttons  not  specified  in  the
user's mapping use the default mapping. See section BUTTON MAPPING for more details.

- services.libinput.touchpad.calibrationMatrix: A string of 9 space-separated floating point numbers. Sets the calibration matrix to the
3x3 matrix where the first row is (abc), the second row is (def) and the third row is (ghi).

- services.libinput.touchpad.clickMethod: Enables a click method. Permitted values are `none`,
`buttonareas`, `clickfinger`.
Not all devices support all methods, if an option is unsupported,
the default click method for this device is used.

- services.libinput.touchpad.dev: Path for touchpad device.  Set to `null` to apply to any
auto-detected touchpad.

- services.libinput.touchpad.disableWhileTyping: Disable input method while typing.

- services.libinput.touchpad.horizontalScrolling: Enables or disables horizontal scrolling. When disabled, this driver will discard any
horizontal scroll events from libinput. This does not disable horizontal scroll events
from libinput; it merely discards the horizontal axis from any scroll events.

- services.libinput.touchpad.leftHanded: Enables left-handed button orientation, i.e. swapping left and right buttons.
- services.libinput.touchpad.middleEmulation: Enables middle button emulation. When enabled, pressing the left and right buttons
simultaneously produces a middle mouse button click.

- services.libinput.touchpad.naturalScrolling: Enables or disables natural scrolling behavior.
- services.libinput.touchpad.scrollButton: Designates a button as scroll button. If the ScrollMethod is button and the button is logically
held down, x/y axis movement is converted into scroll events.

- services.libinput.touchpad.scrollMethod: Specify the scrolling method: `twofinger`, `edge`,
`button`, or `none`

- services.libinput.touchpad.sendEventsMode: Sets the send events mode to `disabled`, `enabled`,
or `disabled-on-external-mouse`

- services.libinput.touchpad.tapping: Enables or disables tap-to-click behavior.

- services.libinput.touchpad.tappingButtonMap: Set the button mapping for 1/2/3-finger taps to left/right/middle or left/middle/right, respectively.

- services.libinput.touchpad.tappingDragLock: Enables or disables drag lock during tapping behavior. When enabled, a finger up during tap-
and-drag will not immediately release the button. If the finger is set down again within the
timeout, the dragging process continues.

- services.libinput.touchpad.transformationMatrix: A string of 9 space-separated floating point numbers. Sets the transformation matrix to
the 3x3 matrix where the first row is (abc), the second row is (def) and the third row is (ghi).

- services.libreddit: Alias of {option}`services.redlib`.
- services.librenms.dataDir: Path of the LibreNMS state directory.

- services.librenms.database.createLocally: Whether to create a local database automatically.

- services.librenms.database.database: Name of the database on the MySQL/MariaDB server.

- services.librenms.database.host: Hostname or IP of the MySQL/MariaDB server.
Ignored if 'socket' is defined.

- services.librenms.database.passwordFile: A file containing the password for the user of the MySQL/MariaDB server.
Must be readable for the LibreNMS user.
Ignored if 'socket' is defined, mandatory otherwise.

- services.librenms.database.port: Port of the MySQL/MariaDB server.
Ignored if 'socket' is defined.

- services.librenms.database.socket: A unix socket to mysql, accessible by the librenms user.
Useful when mysql is on the localhost.

- services.librenms.database.username: Name of the user on the MySQL/MariaDB server.
Ignored if 'socket' is defined.

- services.librenms.distributedPoller.distributedBilling: Enable distributed billing on this poller.

Note: according to [the docs](https://docs.librenms.org/Extensions/Distributed-Poller/#discovery),
billing should only be calculated on a single node per poller group. You can disable billing on
some nodes with the `services.librenms.enableLocalBilling` option.

- services.librenms.distributedPoller.enable: Configure this LibreNMS instance as a [distributed poller](https://docs.librenms.org/Extensions/Distributed-Poller/).
This will disable all web features and just configure the poller features.
Use the `mysql` database of your main LibreNMS instance in the database settings.

- services.librenms.distributedPoller.group: Group(s) of this poller.

- services.librenms.distributedPoller.memcachedHost: Hostname or IP of the `memcached` server.

- services.librenms.distributedPoller.memcachedPort: Port of the `memcached` server.

- services.librenms.distributedPoller.name: Custom name of this poller.

- services.librenms.distributedPoller.rrdcachedHost: Hostname or IP of the `rrdcached` server.

- services.librenms.distributedPoller.rrdcachedPort: Port of the `memcached` server.

- services.librenms.enable: Whether to enable LibreNMS network monitoring system.
- services.librenms.enableLocalBilling: Enable billing Cron-Jobs on the local instance. Enabled by default, but you may disable it
on some nodes within a distributed poller setup. See [the docs](https://docs.librenms.org/Extensions/Distributed-Poller/#discovery)
for more informations about billing with distributed pollers.

- services.librenms.enableOneMinutePolling: Enables the [1-Minute Polling](https://docs.librenms.org/Support/1-Minute-Polling/).
Changing this option will automatically convert your existing rrd files.

- services.librenms.environmentFile: File containing env-vars to be substituted into the final config. Useful for secrets.
Does not apply to settings defined in `extraConfig`.

- services.librenms.extraConfig: Additional config for LibreNMS that will be appended to the `config.php`. See
<https://github.com/librenms/librenms/blob/master/misc/config_definitions.json>
for possible options. Useful if you want to use PHP-Functions in your config.

- services.librenms.finalPackage: The final package used by the module. This is the package that has all overrides.

- services.librenms.group: Name of the LibreNMS group.

- services.librenms.hostname: The hostname to serve LibreNMS on.

- services.librenms.logDir: Path of the LibreNMS logging directory.

- services.librenms.nginx: With this option, you can customize the nginx virtualHost settings.

- services.librenms.package: The librenms package to use.
- services.librenms.pollerThreads: Amount of threads of the cron-poller.

- services.librenms.poolConfig: Options for the LibreNMS PHP pool. See the documentation on `php-fpm.conf`
for details on configuration directives.

- services.librenms.settings: Attrset of the LibreNMS configuration.
See <https://docs.librenms.org/Support/Configuration/> for reference.
All possible options are listed [here](https://github.com/librenms/librenms/blob/master/resources/definitions/config_definitions.json).
See <https://docs.librenms.org/Extensions/Authentication/> for setting other authentication methods.

- services.librenms.useDistributedPollers: Enables [distributed pollers](https://docs.librenms.org/Extensions/Distributed-Poller/)
for this LibreNMS instance. This will enable a local `rrdcached` and `memcached` server.

To use this feature, make sure to configure your firewall that the distributed pollers
can reach the local `mysql`, `rrdcached` and `memcached` ports.

- services.librenms.user: Name of the LibreNMS user.

- services.librespeed.domain: If not `null`, this will add an entry to `services.librespeed.servers` and
configure librespeed to use TLS.

- services.librespeed.downloadIPDB: Whether to download the IP info database before starting librespeed.
Disable this if you want to use the Go implementation.

- services.librespeed.enable: Whether to enable LibreSpeed server.
- services.librespeed.frontend.contactEmail: Email address listed in the privacy policy.
- services.librespeed.frontend.enable: Enables the LibreSpeed frontend and adds a nginx virtual host if
not explicitly disabled and `services.librespeed.domain` is not `null`.

- services.librespeed.frontend.pageTitle: Title of the webpage.
- services.librespeed.frontend.servers: LibreSpeed servers that should appear in the server list.
- services.librespeed.frontend.settings: Override default settings of the speedtest web client.
See [speedtest_worker.js][link] for a list of possible values.

[link]: https://github.com/librespeed/speedtest/blob/master/speedtest_worker.js#L39

- services.librespeed.frontend.useNginx: Configure nginx for the LibreSpeed frontend.
This will only create a virtual host for the frontend and won't proxy all requests because
the reported upload and download speeds are inaccurate if proxied.

- services.librespeed.package: The librespeed-rust package to use.
- services.librespeed.secrets: Attribute set of filesystem paths.
The contents of the specified paths will be read at service start time and merged with the attributes provided in `settings`.

- services.librespeed.settings: LibreSpeed configuration written as Nix expression.
All values set to `null` will be excluded from the evaluated config.
This is useful if you want to omit certain defaults when using a different LibreSpeed implementation.

See [github.com/librespeed](https://github.com/librespeed/speedtest-rust) for configuration help.

- services.librespeed.tlsCertificate: TLS certificate to use. Use together with `tlsKey`.
- services.librespeed.tlsKey: TLS private key to use. Use together with `tlsCertificate`.
- services.librespeed.useACMEHost: Use a certificate generated by the NixOS ACME module for the given host.
Note that this will not generate a new certificate - you will need to do so with `security.acme.certs`.

- services.libreswan.configSetup: Options to go in the 'config setup' section of the Libreswan IPsec configuration
- services.libreswan.connections: A set of connections to define for the Libreswan IPsec service
- services.libreswan.disableRedirects: Whether to disable send and accept redirects for all network interfaces.
See the Libreswan [
FAQ](https://libreswan.org/wiki/FAQ#Why_is_it_recommended_to_disable_send_redirects_in_.2Fproc.2Fsys.2Fnet_.3F) page for why this is recommended.

- services.libreswan.enable: Whether to enable Libreswan IPsec service.
- services.libreswan.policies: A set of policies to apply to the IPsec connections.

::: {.note}
The policy name must match the one of connection it needs to apply to.
:::

- services.libretranslate.configureNginx: Configure nginx as a reverse proxy for LibreTranslate.
- services.libretranslate.dataDir: The data directory.
- services.libretranslate.disableWebUI: Whether to disable the Web UI.
- services.libretranslate.domain: The domain serving your LibreTranslate instance.
Required for configure nginx as a reverse proxy.

- services.libretranslate.enable: Whether to enable LibreTranslate service.
- services.libretranslate.enableApiKeys: Whether to enable the API keys database.
- services.libretranslate.extraArgs: Extra arguments passed to the LibreTranslate.
- services.libretranslate.group: Group account under which libretranslate runs.
- services.libretranslate.host: The address the application should listen on.
- services.libretranslate.package: The libretranslate package to use.
- services.libretranslate.port: The the application should listen on.
- services.libretranslate.threads: Set number of threads.
- services.libretranslate.updateModels: Update language models at startup
- services.libretranslate.user: User account under which libretranslate runs.
- services.libvirtd.autoSnapshot.calendar: When to create snapshots (systemd calendar format).
Default is 4:15 AM.

- services.libvirtd.autoSnapshot.enable: Whether to enable LibVirt VM snapshots.
- services.libvirtd.autoSnapshot.keep: Default number of snapshots to keep for VMs that don't specify a keep value.
- services.libvirtd.autoSnapshot.prefix: Prefix for automatic snapshot names.
This is used to identify and manage automatic snapshots
separately from manual ones.

- services.libvirtd.autoSnapshot.snapshotType: Type of snapshot to create (internal or external).
- services.libvirtd.autoSnapshot.vms: If specified only the list of VMs will be snapshotted else all existing one. Each entry can be either:
- A string (VM name, uses default settings)
- An attribute set with VM configuration

- services.lidarr.dataDir: The directory where Lidarr stores its data files.
- services.lidarr.enable: Whether to enable Lidarr, a Usenet/BitTorrent music downloader.
- services.lidarr.environmentFiles: Environment file to pass secret configuration values.
Each line must follow the `LIDARR__SECTION__KEY=value` pattern.
Please consult the documentation at the [wiki](https://wiki.servarr.com/useful-tools#using-environment-variables-for-config).

- services.lidarr.group: Group under which Lidarr runs.

- services.lidarr.openFirewall: Open ports in the firewall for Lidarr

- services.lidarr.package: The lidarr package to use.
- services.lidarr.settings: Attribute set of arbitrary config options.
Please consult the documentation at the [wiki](https://wiki.servarr.com/useful-tools#using-environment-variables-for-config).

WARNING: this configuration is stored in the world-readable Nix store!
For secrets use [](#opt-services.lidarr.environmentFiles).

- services.lidarr.user: User account under which Lidarr runs.

- services.lifecycled.awsRegion: The region used for accessing AWS services.

- services.lifecycled.cloudwatchGroup: Write logs to a specific Cloudwatch Logs group.

- services.lifecycled.cloudwatchStream: Write logs to a specific Cloudwatch Logs stream. Defaults to the instance ID.

- services.lifecycled.debug: Enable debugging information.

- services.lifecycled.enable: Whether to enable lifecycled, a daemon for responding to AWS AutoScaling Lifecycle Hooks.
- services.lifecycled.handler: The script to invoke to handle events.

- services.lifecycled.instanceId: The instance ID to listen for events for.

- services.lifecycled.json: Enable JSON logging.

- services.lifecycled.noSpot: Disable the spot termination listener.

- services.lifecycled.queueCleaner.enable: Whether to enable lifecycled-queue-cleaner.
- services.lifecycled.queueCleaner.frequency: How often to trigger the queue cleaner.

NOTE: This string should be a valid value for a systemd
timer's `OnCalendar` configuration. See
{manpage}`systemd.timer(5)`
for more information.

- services.lifecycled.queueCleaner.parallel: The number of parallel deletes to run.

- services.lifecycled.snsTopic: The SNS topic that receives events.

- services.lighthouse.beacon: Beacon node
- services.lighthouse.extraArgs: Additional arguments passed to every lighthouse command.

- services.lighthouse.network: The network to connect to. Mainnet is the default ethereum network.

- services.lighthouse.package: The lighthouse package to use.
- services.lighthouse.validator: Validator node
- services.lighttpd.cgit.configText: Verbatim contents of the cgit runtime configuration file. Documentation
(with cgitrc example file) is available in "man cgitrc". Or online:
<http://git.zx2c4.com/cgit/tree/cgitrc.5.txt>

- services.lighttpd.cgit.enable: If true, enable cgit (fast web interface for git repositories) as a
sub-service in lighttpd.

- services.lighttpd.cgit.subdir: The subdirectory in which to serve cgit. The web application will be
accessible at http://yourserver/${subdir}

- services.lighttpd.collectd.collectionCgi: Path to collection.cgi script from (collectd sources)/contrib/collection.cgi
This option allows to use a customized version

- services.lighttpd.collectd.enable: Whether to enable collectd subservice accessible at http://yourserver/collectd.
- services.lighttpd.configText: Overridable config file contents to use for lighttpd. By default, use
the contents automatically generated by NixOS.

- services.lighttpd.document-root: Document-root of the web server. Must be readable by the "lighttpd" user.

- services.lighttpd.enable: Enable the lighttpd web server.

- services.lighttpd.enableModules: List of lighttpd modules to enable. Sub-services take care of
enabling modules as needed, so this option is mainly for when you
want to add custom stuff to
{option}`services.lighttpd.extraConfig` that depends on a
certain module.

- services.lighttpd.enableUpstreamMimeTypes: Whether to include the list of mime types bundled with lighttpd
(upstream). If you disable this, no mime types will be added by
NixOS and you will have to add your own mime types in
{option}`services.lighttpd.extraConfig`.

- services.lighttpd.extraConfig: These configuration lines will be appended to the generated lighttpd
config file. Note that this mechanism does not work when the manual
{option}`configText` option is used.

- services.lighttpd.gitweb.enable: If true, enable gitweb in lighttpd. Access it at http://yourserver/gitweb

- services.lighttpd.mod_status: Show server status overview at /server-status, statistics at
/server-statistics and list of loaded modules at /server-config.

- services.lighttpd.mod_userdir: If true, requests in the form /~user/page.html are rewritten to take
the file public_html/page.html from the home directory of the user.

- services.lighttpd.package: The lighttpd package to use.
- services.lighttpd.port: TCP port number for lighttpd to bind to.

- services.limesurvey.config: LimeSurvey configuration. Refer to
<https://manual.limesurvey.org/Optional_settings>
for details on supported values.

- services.limesurvey.database
- services.limesurvey.enable: Whether to enable Limesurvey web application.
- services.limesurvey.encryptionKey: This is a 32-byte key used to encrypt variables in the database.
You _must_ change this from the default value.

- services.limesurvey.encryptionKeyFile: 32-byte key used to encrypt variables in the database.

Note: It should be string not a store path in order to prevent the password from being world readable

- services.limesurvey.encryptionNonce: This is a 24-byte nonce used to encrypt variables in the database.
You _must_ change this from the default value.

- services.limesurvey.encryptionNonceFile: 24-byte used to encrypt variables in the database.

Note: It should be string not a store path in order to prevent the password from being world readable

- services.limesurvey.httpd.virtualHost: Apache configuration can be done by adapting `services.httpd.virtualHosts.<name>`.
See [](#opt-services.httpd.virtualHosts) for further information.

- services.limesurvey.nginx.virtualHost: Nginx configuration can be done by adapting `services.nginx.virtualHosts.<name>`.
See [](#opt-services.nginx.virtualHosts) for further information.

- services.limesurvey.package: The limesurvey package to use.
- services.limesurvey.poolConfig: Options for the LimeSurvey PHP pool. See the documentation on `php-fpm.conf`
for details on configuration directives.

- services.limesurvey.virtualHost: Alias of {option}`services.limesurvey.httpd.virtualHost`.
- services.limesurvey.webserver: Webserver to configure for reverse-proxying limesurvey.

- services.linkwarden.cacheLocation: Directory used as cache. If it is not the default, the directory has to be created manually such that the linkwarden user is able to read and write to it.
- services.linkwarden.database.createLocally: Whether to enable the automatic creation of the database for Linkwarden..
- services.linkwarden.database.host: Hostname or address of the postgresql server. If an absolute path is given here, it will be interpreted as a unix socket path.
- services.linkwarden.database.name: The name of the Linkwarden database.
- services.linkwarden.database.port: Port of the postgresql server.
- services.linkwarden.database.user: The database user for Linkwarden.
- services.linkwarden.enable: Whether to enable Linkwarden.
- services.linkwarden.enableRegistration: Whether to enable registration for new users.
- services.linkwarden.environment: Extra configuration environment variables. Refer to the [documentation](https://docs.linkwarden.app/self-hosting/environment-variables) for options.

- services.linkwarden.environmentFile: Path of a file with extra environment variables to be loaded from disk.
This file is not added to the nix store, so it can be used to pass secrets to linkwarden.
Refer to the [documentation](https://docs.linkwarden.app/self-hosting/environment-variables) for options.

Linkwarden needs at least a nextauth secret. To set a database password use POSTGRES_PASSWORD:
```
NEXTAUTH_SECRET=<secret>
POSTGRES_PASSWORD=<pass>
```

- services.linkwarden.group: The group Linkwarden should run as.
- services.linkwarden.host: The host that Linkwarden will listen on.
- services.linkwarden.openFirewall: Whether to open the Linkwarden port in the firewall
- services.linkwarden.package: The linkwarden package to use.
- services.linkwarden.port: The port that Linkwarden will listen on.
- services.linkwarden.secretFiles: Attribute set containing paths to files to add to the environment of linkwarden.
The files are not added to the nix store, so they can be used to pass secrets to linkwarden.
Refer to the [documentation](https://docs.linkwarden.app/self-hosting/environment-variables) for options.

Linkwarden needs at least a nextauth secret. To set a database password use POSTGRES_PASSWORD:
```
NEXTAUTH_SECRET=<secret>
POSTGRES_PASSWORD=<pass>
```

- services.linkwarden.storageLocation: Directory used to store media files. If it is not the default, the directory has to be created manually such that the linkwarden user is able to read and write to it.
- services.linkwarden.user: The user Linkwarden should run as.
- services.linyaps.boxPackage: The linyaps-box package to use.
- services.linyaps.enable: Whether to enable linyaps, a cross-distribution package manager with sandboxed apps and shared runtime.
- services.linyaps.package: The linyaps package to use.
- services.linyaps.webStoreInstallerPackage: The linyaps-web-store-installer package to use.
- services.liquidsoap.streams: Set of Liquidsoap streams to start,
one systemd service per stream.

- services.lirc.configs: Configurations for lircd to load, see man:lircd.conf(5) for details ({file}`lircd.conf`)
- services.lirc.enable: Whether to enable the LIRC daemon, to receive and send infrared signals.
- services.lirc.extraArguments: Extra arguments to lircd.
- services.lirc.options: LIRC default options described in man:lircd(8) ({file}`lirc_options.conf`)
- services.listmonk.database.createLocally: Create the PostgreSQL database and database user locally.
- services.listmonk.database.mutableSettings: Database settings will be reset to the value set in this module if this is not enabled.
Enable this if you want to persist changes you have done in the application.

- services.listmonk.database.settings: Dynamic settings in the PostgreSQL database, set by a SQL script, see <https://github.com/knadh/listmonk/blob/master/schema.sql#L177-L230> for details.
- services.listmonk.enable: Whether to enable Listmonk, this module assumes a reverse proxy to be set.
- services.listmonk.package: The listmonk package to use.
- services.listmonk.secretFile: A file containing secrets as environment variables. See <https://listmonk.app/docs/configuration/#environment-variables> for details on supported values.
- services.listmonk.settings: Static settings set in the config.toml, see <https://github.com/knadh/listmonk/blob/master/config.toml.sample> for details.
You can set secrets using the secretFile option with environment variables following <https://listmonk.app/docs/configuration/#environment-variables>.

- services.litellm.enable: Whether to enable LiteLLM server.
- services.litellm.environment: Extra environment variables for LiteLLM.

- services.litellm.environmentFile: Environment file to be passed to the systemd service.
Useful for passing secrets to the service to prevent them from being
world-readable in the Nix store.

- services.litellm.host: The host address which the LiteLLM server HTTP interface listens to.

- services.litellm.openFirewall: Whether to open the firewall for LiteLLM.
This adds `services.litellm.port` to `networking.firewall.allowedTCPPorts`.

- services.litellm.package: The litellm package to use.
- services.litellm.port: Which port the LiteLLM server listens to.

- services.litellm.settings: Configuration for LiteLLM.
See <https://docs.litellm.ai/docs/proxy/configs> for more.

- services.litellm.stateDir: State directory of LiteLLM.
- services.litestream.enable: Whether to enable litestream.
- services.litestream.environmentFile: Environment file as defined in {manpage}`systemd.exec(5)`.

Secrets may be passed to the service without adding them to the
world-readable Nix store, by specifying placeholder variables as
the option value in Nix and setting these variables accordingly in the
environment file.

By default, Litestream will perform environment variable expansion
within the config file before reading it. Any references to $VAR or
${VAR} formatted variables will be replaced with their environment
variable values. If no value is set then it will be replaced with an
empty string.

```
  # Content of the environment file
  LITESTREAM_ACCESS_KEY_ID=AKIAxxxxxxxxxxxxxxxx
  LITESTREAM_SECRET_ACCESS_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx/xxxxxxxxx
```

Note that this file needs to be available on the host on which
this exporter is running.

- services.litestream.package: The litestream package to use.
- services.litestream.settings: See the [documentation](https://litestream.io/reference/config/).

- services.livebook.enableUserService: Whether to enable a user service for Livebook.
- services.livebook.environment: Environment variables to set.

Livebook is configured through the use of environment variables. The
available configuration options can be found in the [Livebook
documentation](https://hexdocs.pm/livebook/readme.html#environment-variables).

Note that all environment variables set through this configuration
parameter will be readable by anyone with access to the host
machine. Therefore, sensitive information like {env}`LIVEBOOK_PASSWORD`
or {env}`LIVEBOOK_COOKIE` should never be set using this configuration
option, but should instead use
[](#opt-services.livebook.environmentFile). See the documentation for
that option for more information.

Any environment variables specified in the
[](#opt-services.livebook.environmentFile) will supersede environment
variables specified in this option.

- services.livebook.environmentFile: Additional environment file as defined in {manpage}`systemd.exec(5)`.

Secrets like {env}`LIVEBOOK_PASSWORD` (which is used to specify the
password needed to access the livebook site) or {env}`LIVEBOOK_COOKIE`
(which is used to specify the
[cookie](https://www.erlang.org/doc/reference_manual/distributed.html#security)
used to connect to the running Elixir system) may be passed to the
service without making them readable to everyone with access to
systemctl by using this configuration parameter.

Note that this file needs to be available on the host on which
`livebook` is running.

For security purposes, this file should contain at least
{env}`LIVEBOOK_PASSWORD` or {env}`LIVEBOOK_TOKEN_ENABLED=false`.

See the [Livebook
documentation](https://hexdocs.pm/livebook/readme.html#environment-variables)
and the [](#opt-services.livebook.environment) configuration parameter
for further options.

- services.livebook.extraPackages: Extra packages to make available to the Livebook service.

- services.livebook.package: The livebook package to use.
- services.livekit.enable: Whether to enable the livekit server.
- services.livekit.ingress.enable: Whether to enable the livekit ingress service.
- services.livekit.ingress.environmentFile: Environment file as defined in {manpage}`systemd.exec(5)` passed to the service.

Use this to specify `LIVEKIT_API_KEY` and `LIVEKIT_API_SECRET`.

- services.livekit.ingress.openFirewall.rtc: Open WebRTC ports in the firewall.
- services.livekit.ingress.openFirewall.rtmp: Open RTMP port in the firewall.
- services.livekit.ingress.openFirewall.whip: Open WHIP port in the firewall.
- services.livekit.ingress.package: The livekit-ingress package to use.
- services.livekit.ingress.settings: LiveKit Ingress configuration.

See <https://github.com/livekit/ingress?tab=readme-ov-file#config> for possible options.

- services.livekit.keyFile: LiveKit key file holding one or multiple application secrets. Use `livekit-server generate-keys` to generate a random key name and secret.

The file should have the format `<keyname>: <secret>`.
Example:
`lk-jwt-service: f6lQGaHtM5HfgZjIcec3cOCRfiDqIine4CpZZnqdT5cE`

Individual key/secret pairs need to be passed to clients to connect to this instance.

- services.livekit.openFirewall: Opens port range for LiveKit on the firewall.
- services.livekit.package: The livekit package to use.
- services.livekit.redis.createLocally: Whether to set up a local redis instance.
- services.livekit.redis.host: Address to bind local redis instance to.

- services.livekit.redis.port: Port to bind local redis instance to.

- services.livekit.settings: LiveKit configuration file expressed in nix.

For an example configuration, see <https://docs.livekit.io/home/self-hosting/deployment/#configuration>.
For all possible values, see <https://github.com/livekit/livekit/blob/master/config-sample.yaml>.

- services.lk-jwt-service.enable: Whether to enable lk-jwt-service.
- services.lk-jwt-service.keyFile: Path to a file containing the credential mapping (`<keyname>: <secret>`) to access LiveKit.

Example:
`lk-jwt-service: f6lQGaHtM5HfgZjIcec3cOCRfiDqIine4CpZZnqdT5cE`

For more information, see <https://github.com/element-hq/lk-jwt-service#configuration>.

- services.lk-jwt-service.livekitUrl: The public websocket URL for livekit.
The proto needs to be either  `wss://` (recommended) or `ws://` (insecure).

- services.lk-jwt-service.package: The lk-jwt-service package to use.
- services.lk-jwt-service.port: Port that lk-jwt-service should listen on.
- services.llama-cpp.enable: Whether to enable LLaMA C++ server.
- services.llama-cpp.extraFlags: Extra flags passed to llama-cpp-server.
- services.llama-cpp.host: IP address the LLaMA C++ server listens on.
- services.llama-cpp.model: Model path.
- services.llama-cpp.openFirewall: Open ports in the firewall for LLaMA C++ server.
- services.llama-cpp.package: The llama-cpp package to use.
- services.llama-cpp.port: Listen port for LLaMA C++ server.
- services.llama-swap.enable: Whether to enable enable the llama-swap service.
- services.llama-swap.openFirewall: Whether to open the firewall for llama-swap.
This adds {option}`port` to [](#opt-networking.firewall.allowedTCPPorts).

- services.llama-swap.package: The llama-swap package to use.
- services.llama-swap.port: Port that llama-swap listens on.

- services.llama-swap.settings: llama-swap configuration. Refer to the [llama-swap example configuration](https://github.com/mostlygeek/llama-swap/blob/main/config.example.yaml)
for details on supported values.

- services.lldap.enable: Whether to enable lldap, a lightweight authentication server that provides an opinionated, simplified LDAP interface for authentication.
- services.lldap.environment: Environment variables passed to the service.
Any config option name prefixed with `LLDAP_` takes priority over the one in the configuration file.

- services.lldap.environmentFile: Environment file as defined in {manpage}`systemd.exec(5)` passed to the service.

- services.lldap.package: The lldap package to use.
- services.lldap.settings: Free-form settings written directly to the `lldap_config.toml` file.
Refer to <https://github.com/lldap/lldap/blob/main/lldap_config.docker_template.toml> for supported values.

- services.lldap.silenceForceUserPassResetWarning: Disable warning when the admin password is set declaratively with the `ldap_user_pass_file` setting
but the `force_ldap_user_pass_reset` is set to `false`.

This can lead to the admin password to drift from the one given declaratively.
If that is okay for you and you want to silence the warning, set this option to `true`.

- services.lldpd.enable: Whether to enable Link Layer Discovery Protocol Daemon.
- services.lldpd.extraArgs: List of command line parameters for lldpd
- services.local-content-share.enable: Whether to enable Local-Content-Share.
- services.local-content-share.listenAddress: Address on which the service will be available.

The service will listen on all interfaces if set to an empty string.

- services.local-content-share.openFirewall: Whether to automatically open the specified port in the firewall
- services.local-content-share.package: The local-content-share package to use.
- services.local-content-share.port: Port on which the service will be available
- services.localtime: Alias of {option}`services.localtimed`.
- services.localtimed.enable: Enable `localtimed`, a simple daemon for keeping the
system timezone up-to-date based on the current location. It uses
geoclue2 to determine the current location.

To avoid silent overriding by the service, if you have explicitly set a
timezone, either remove it or ensure that it is set with a lower priority
than the default value using `lib.mkDefault` or `lib.mkOverride`. This is
to make the choice deliberate. An error will be presented otherwise.

- services.localtimed.geoclue2Package: The Geoclue2 package to use.
- services.localtimed.package: The localtime package to use.
- services.locate.enable: If enabled, NixOS will periodically update the database of
files used by the {command}`locate` command.

- services.locate.extraFlags: Extra flags to pass to {command}`updatedb`.

- services.locate.includeStore
- services.locate.interval: Update the locate database at this interval. Updates by
default at 2:15 AM every day.

The format is described in
{manpage}`systemd.time(7)`.

To disable automatic updates, set to `"never"`
and run {command}`updatedb` manually.

- services.locate.localuser
- services.locate.locate: Alias of {option}`services.locate.package`.
- services.locate.output: The database file to build.

- services.locate.package: The plocate package to use.
- services.locate.period: Alias of {option}`services.locate.interval`.
- services.locate.pruneBindMounts: Whether not to index bind mounts

- services.locate.pruneFS: Which filesystem types to exclude from indexing

- services.locate.pruneNames: Directory components which should exclude paths containing them from indexing

- services.locate.prunePaths: Which paths to exclude from indexing

- services.logcheck.config: Config options that you would like in logcheck.conf.

- services.logcheck.enable: Whether to enable logcheck cron job, to mail anomalies in the system logfiles to the administrator.
- services.logcheck.extraGroups: Extra groups for the logcheck user, for example to be able to use sendmail,
or to access certain log files.

- services.logcheck.extraRulesDirs: Directories with extra rules.

- services.logcheck.files: Which log files to check.

- services.logcheck.ignore: This option defines extra ignore rules.

- services.logcheck.ignoreCron: This option defines extra ignore rules for cronjobs.

- services.logcheck.level: Set the logcheck level. Either "workstation", "server", or "paranoid".

- services.logcheck.mailTo: Email address to send reports to.

- services.logcheck.timeOfDay: Time of day to run logcheck. A logcheck will be scheduled at xx:02 each day.
Leave default (*) to run every hour. Of course when nothing special was logged,
logcheck will be silent.

- services.logcheck.user: Username for the logcheck user.

- services.logind.extraConfig
- services.logind.hibernateKey: Alias of {option}`services.logind.settings.Login.HandleHibernateKey`.
- services.logind.hibernateKeyLongPress: Alias of {option}`services.logind.settings.Login.HandleHibernateKeyLongPress`.
- services.logind.killUserProcesses: Alias of {option}`services.logind.settings.Login.KillUserProcesses`.
- services.logind.lidSwitch: Alias of {option}`services.logind.settings.Login.HandleLidSwitch`.
- services.logind.lidSwitchDocked: Alias of {option}`services.logind.settings.Login.HandleLidSwitchDocked`.
- services.logind.lidSwitchExternalPower: Alias of {option}`services.logind.settings.Login.HandleLidSwitchExternalPower`.
- services.logind.powerKey: Alias of {option}`services.logind.settings.Login.HandlePowerKey`.
- services.logind.powerKeyLongPress: Alias of {option}`services.logind.settings.Login.HandlePowerKeyLongPress`.
- services.logind.rebootKey: Alias of {option}`services.logind.settings.Login.HandleRebootKey`.
- services.logind.rebootKeyLongPress: Alias of {option}`services.logind.settings.Login.HandleRebootKeyLongPress`.
- services.logind.settings.Login: Settings option for systemd-logind.
See {manpage}`logind.conf(5)` for available options.

- services.logind.suspendKey: Alias of {option}`services.logind.settings.Login.HandleSuspendKey`.
- services.logind.suspendKeyLongPress: Alias of {option}`services.logind.settings.Login.HandleSuspendKeyLongPress`.
- services.logkeys.device: Use the given device as keyboard input event device instead of /dev/input/eventX default.
- services.logkeys.enable: Whether to enable logkeys, a keylogger service.
- services.logmein-hamachi.enable: Whether to enable LogMeIn Hamachi, a proprietary
(closed source) commercial VPN software.

- services.logrotate.allowNetworking: Whether to enable network access for logrotate.
- services.logrotate.checkConfig: Whether the config should be checked at build time.

Some options are not checkable at build time because of the build sandbox:
for example, the test does not know about existing files and system users are
not known.
These limitations mean we must adjust the file for tests (missingok is forced
and users are replaced by dummy users), so tests are complemented by a
logrotate-checkconf service that is enabled by default.
This extra check can be disabled by disabling it at the systemd level with the
{option}`systemd.services.logrotate-checkconf.enable` option.

Conversely there are still things that might make this check fail incorrectly
(e.g. a file path where we don't have access to intermediate directories):
in this case you can disable the failing check with this option.

- services.logrotate.config
- services.logrotate.configFile: Override the configuration file used by logrotate. By default,
NixOS generates one automatically from [](#opt-services.logrotate.settings).

- services.logrotate.enable: Whether to enable the logrotate systemd service.
- services.logrotate.extraArgs: Additional command line arguments to pass on logrotate invocation
- services.logrotate.extraConfig
- services.logrotate.paths
- services.logrotate.settings: logrotate freeform settings: each attribute here will define its own section,
ordered by {option}`services.logrotate.settings.<name>.priority`,
which can either define files to rotate with their settings
or settings common to all further files settings.
All attribute names not explicitly defined as sub-options here are passed through
as logrotate config directives,
refer to <https://linux.die.net/man/8/logrotate> for details.

- services.logstash.address: Alias of {option}`services.logstash.listenAddress`.
- services.logstash.dataDir: A path to directory writable by logstash that it uses to store data.
Plugins will also have access to this path.

- services.logstash.enable: Enable logstash.
- services.logstash.enableWeb
- services.logstash.extraJvmOptions: Extra JVM options, one per line (jvm.options format).
- services.logstash.extraSettings: Extra Logstash settings in YAML format.
- services.logstash.filterConfig: logstash filter configuration.
- services.logstash.filterWorkers: The quantity of filter workers to run.
- services.logstash.inputConfig: Logstash input configuration.
- services.logstash.listenAddress: Address on which to start webserver.
- services.logstash.logLevel: Logging verbosity level.
- services.logstash.outputConfig: Logstash output configuration.
- services.logstash.package: The logstash package to use.
- services.logstash.plugins: The paths to find other logstash plugins in.
- services.logstash.port: Port on which to start webserver.
- services.loki.configFile: Specify a configuration file that Loki should use.

Cannot be specified together with {option}`services.loki.configuration`.

- services.loki.configuration: Specify the configuration for Loki in Nix.

See [documentation of Grafana Loki](https://grafana.com/docs/loki/latest/configure/) for all available options.

Cannot be specified together with {option}`services.loki.configFile`.

- services.loki.dataDir: Specify the data directory for Loki.

- services.loki.enable: Whether to enable Grafana Loki.
- services.loki.extraFlags: Specify a list of additional command line flags,
which get escaped and are then passed to Loki.

- services.loki.group: Group under which the Loki service runs.

- services.loki.package: The grafana-loki package to use.
- services.loki.user: User under which the Loki service runs.

- services.lokinet.enable: Whether to enable Lokinet daemon.
- services.lokinet.package: The lokinet package to use.
- services.lokinet.settings: Configuration for Lokinet.
Currently, the best way to view the available settings is by
generating a config file using `lokinet -g`.

- services.lokinet.useLocally: Whether to use Lokinet locally.
- services.longview.apacheStatusUrl: The Apache status page URL. If provided, Longview will
gather statistics from this location. This requires Apache
mod_status to be loaded and enabled.

- services.longview.apiKey: Longview API key. To get this, look in Longview settings which
are found at <https://manager.linode.com/longview/>.

Warning: this secret is stored in the world-readable Nix store!
Use {option}`apiKeyFile` instead.

- services.longview.apiKeyFile: A file containing the Longview API key.
To get this, look in Longview settings which
are found at <https://manager.linode.com/longview/>.

{option}`apiKeyFile` takes precedence over {option}`apiKey`.

- services.longview.enable: If enabled, system metrics will be sent to Linode LongView.

- services.longview.mysqlPassword: The password corresponding to {option}`mysqlUser`.
Warning: this is stored in cleartext in the Nix store!
Use {option}`mysqlPasswordFile` instead.

- services.longview.mysqlPasswordFile: A file containing the password corresponding to {option}`mysqlUser`.

- services.longview.mysqlUser: The user for connecting to the MySQL database. If provided,
Longview will connect to MySQL and collect statistics about
queries, etc. This user does not need to have been granted
any extra privileges.

- services.longview.nginxStatusUrl: The Nginx status page URL. Longview will gather statistics
from this URL. This requires the Nginx stub_status module to
be enabled and configured at the given location.

- services.lorri.enable: Enables the daemon for `lorri`, a nix-shell replacement for project
development. The socket-activated daemon starts on the first request
issued by the `lorri` command.

- services.lorri.package: The lorri package to use.
- services.lshd
- services.lvm.boot.thin.enable: Whether to enable support for booting from ThinLVs.
- services.lvm.boot.vdo.enable: Whether to enable support for booting from VDOLVs.
- services.lvm.dmeventd.enable: Whether to enable the LVM dmevent daemon.
- services.lvm.enable: Whether to enable lvm2.

:::{.note}
The lvm2 package contains device-mapper udev rules and without those tools like cryptsetup do not fully function!
:::

- services.lvm.package: This option allows you to override the LVM package that's used on the system
(udev rules, tmpfiles, systemd services).
Defaults to pkgs.lvm2, pkgs.lvm2_dmeventd if dmeventd or pkgs.lvm2_vdo if vdo is enabled.

- services.lxd-image-server.enable: Whether to enable lxd-image-server.
- services.lxd-image-server.group: Group assigned to the user and the webroot directory.
- services.lxd-image-server.nginx.domain: Domain to use for nginx virtual host.
- services.lxd-image-server.nginx.enable: Whether to enable nginx.
- services.lxd-image-server.settings: Configuration for lxd-image-server.

Example see <https://github.com/Avature/lxd-image-server/blob/master/config.toml>.

- services.mackerel-agent.apiKeyFile: Path to file containing the Mackerel API key. The file should contain a
single line of the following form:

`apikey = "EXAMPLE_API_KEY"`

- services.mackerel-agent.autoRetirement: Whether to enable retiring the host upon OS shutdown
.
- services.mackerel-agent.enable: Whether to enable mackerel.io agent.
- services.mackerel-agent.runAsRoot: Whether to enable running as root.
- services.mackerel-agent.settings: Options for mackerel-agent.conf.

Documentation:
<https://mackerel.io/docs/entry/spec/agent>

- services.maddy.config: Server configuration, see
[https://maddy.email](https://maddy.email) for
more information. The default configuration of this module will setup
minimal Maddy instance for mail transfer without TLS encryption.

::: {.note}
This should not be used in a production environment.
:::

- services.maddy.enable: Whether to enable Maddy, a free an open source mail server.
- services.maddy.ensureAccounts: List of IMAP accounts which get automatically created. Note that for
a complete setup, user credentials for these accounts are required
and can be created using the `ensureCredentials` option.
This option does not delete accounts which are not (anymore) listed.

- services.maddy.ensureCredentials: List of user accounts which get automatically created if they don't
exist yet. Note that for a complete setup, corresponding mail boxes
have to get created using the `ensureAccounts` option.
This option does not delete accounts which are not (anymore) listed.

- services.maddy.group: Group account under which maddy runs.

::: {.note}
If left as the default value this group will automatically be created
on system activation, otherwise the sysadmin is responsible for
ensuring the group exists before the maddy service starts.
:::

- services.maddy.hostname: Hostname to use. It should be FQDN.

- services.maddy.localDomains: Define list of allowed domains.

- services.maddy.openFirewall: Open the configured incoming and outgoing mail server ports.

- services.maddy.package: The maddy package to use.
- services.maddy.primaryDomain: Primary MX domain to use. It should be FQDN.

- services.maddy.secrets: A list of files containing the various secrets. Should be in the format
expected by systemd's `EnvironmentFile` directory. Secrets can be
referenced in the format `{env:VAR}`.

- services.maddy.tls.certificates: A list of attribute sets containing paths to TLS certificates and
keys. Maddy will use SNI if multiple pairs are selected.

- services.maddy.tls.extraConfig: Arguments for the specified certificate loader.

In case the `tls` loader is set, the defaults are considered secure
and there is no need to change anything in most cases.
For available options see [upstream manual](https://maddy.email/reference/tls/).

For ACME configuration, see [following page](https://maddy.email/reference/tls-acme).

- services.maddy.tls.loader: TLS certificates are obtained by modules called "certificate
loaders".

The `file` loader module reads certificates from files specified by
the `certificates` option.

Alternatively the `acme` module can be used to automatically obtain
certificates using the ACME protocol.

Module configuration is done via the `tls.extraConfig` option.

Secrets such as API keys or passwords should not be supplied in
plaintext. Instead the `secrets` option can be used to read secrets
at runtime as environment variables. Secrets can be referenced with
`{env:VAR}`.

- services.maddy.user: User account under which maddy runs.

::: {.note}
If left as the default value this user will automatically be created
on system activation, otherwise the sysadmin is responsible for
ensuring the user exists before the maddy service starts.
:::

- services.magic-wormhole-mailbox-server.enable: Whether to enable Magic Wormhole Mailbox Server.
- services.magnetico.crawler.address: Address to be used for indexing DHT nodes.

- services.magnetico.crawler.extraOptions: Extra command line arguments to pass to magneticod.

- services.magnetico.crawler.maxLeeches: Maximum number of simultaneous leeches.

- services.magnetico.crawler.maxNeighbors: Maximum number of simultaneous neighbors of an indexer.
Be careful changing this number: high values can very
easily cause your network to be congested or even crash
your router.

- services.magnetico.crawler.port: Port to be used for indexing DHT nodes.
This port should be added to
{option}`networking.firewall.allowedTCPPorts`.

- services.magnetico.enable: Whether to enable Magnetico, Bittorrent DHT crawler.
- services.magnetico.web.address: Address the web interface will listen to.

- services.magnetico.web.credentials: The credentials to access the web interface, in case authentication is
enabled, in the format `username:hash`. If unset no
authentication will be required.

Usernames must start with a lowercase ([a-z]) ASCII character, might
contain non-consecutive underscores except at the end, and consists of
small-case a-z characters and digits 0-9.  The
{command}`htpasswd` tool from the `apacheHttpd`
package may be used to generate the hash:
{command}`htpasswd -bnBC 12 username password`

::: {.warning}
The hashes will be stored world-readable in the nix store.
Consider using the `credentialsFile` option if you
don't want this.
:::

- services.magnetico.web.credentialsFile: The path to the file holding the credentials to access the web
interface. If unset no authentication will be required.

The file must contain user names and password hashes in the format
`username:hash`, one for each line.  Usernames must
start with a lowecase ([a-z]) ASCII character, might contain
non-consecutive underscores except at the end, and consists of
small-case a-z characters and digits 0-9.
The {command}`htpasswd` tool from the `apacheHttpd`
package may be used to generate the hash:
{command}`htpasswd -bnBC 12 username password`

- services.magnetico.web.extraOptions: Extra command line arguments to pass to magneticow.

- services.magnetico.web.port: Port the web interface will listen to.

- services.mail.sendmailSetuidWrapper: Configuration for the sendmail setuid wapper.

- services.mailcatcher.enable: Whether to enable MailCatcher, an SMTP server and web interface to locally test outbound emails.
- services.mailcatcher.http.ip: The ip address of the http server.
- services.mailcatcher.http.path: Prefix to all HTTP paths.
- services.mailcatcher.http.port: The port address of the http server.
- services.mailcatcher.smtp.ip: The ip address of the smtp server.
- services.mailcatcher.smtp.port: The port address of the smtp server.
- services.mailhog.apiPort: Port on which the API endpoint will listen.
- services.mailhog.enable: Whether to enable MailHog, web and API based SMTP testing.
- services.mailhog.extraArgs: List of additional arguments to pass to the MailHog process.
- services.mailhog.setSendmail: Whether to enable set the system sendmail to mailhogs's.
- services.mailhog.smtpPort: Port on which the SMTP endpoint will listen.
- services.mailhog.storage: Store mails on disk or in memory.
- services.mailhog.uiPort: Port on which the HTTP UI will listen.
- services.mailhog.user
- services.mailman.enable: Enable Mailman on this host. Requires an active MTA on the host (e.g. Postfix).
- services.mailman.enablePostfix: Enable Postfix integration. Requires an active Postfix installation.

If you want to use another MTA, set this option to false and configure
settings in services.mailman.settings.mta.

Refer to the Mailman manual for more info.

- services.mailman.extraPythonPackages
- services.mailman.hyperkitty.baseUrl: Where can Mailman connect to Hyperkitty's internal API, preferably on
localhost?

- services.mailman.hyperkitty.enable: Whether to enable the Hyperkitty archiver for Mailman.
- services.mailman.hyperkittyApiKey
- services.mailman.hyperkittyBaseUrl: Alias of {option}`services.mailman.hyperkitty.baseUrl`.
- services.mailman.ldap.attrMap.email: LDAP-attribute that corresponds to the `email`-attribute in mailman.

- services.mailman.ldap.attrMap.firstName: LDAP-attribute that corresponds to the `firstName`-attribute in mailman.

- services.mailman.ldap.attrMap.lastName: LDAP-attribute that corresponds to the `lastName`-attribute in mailman.

- services.mailman.ldap.attrMap.username: LDAP-attribute that corresponds to the `username`-attribute in mailman.

- services.mailman.ldap.bindDn: Service account to bind against.

- services.mailman.ldap.bindPasswordFile: Path to the file containing the bind password of the service account
defined by [](#opt-services.mailman.ldap.bindDn).

- services.mailman.ldap.enable: Whether to enable LDAP auth.
- services.mailman.ldap.groupSearch
- services.mailman.ldap.serverUri: LDAP host to connect against.

- services.mailman.ldap.superUserGroup: Group where a user must be a member of to gain superuser rights.

- services.mailman.ldap.userSearch.ou: Organizational unit to look up a user.

- services.mailman.ldap.userSearch.query: Query to find a user in the LDAP database.

- services.mailman.package
- services.mailman.packageSet: The mailmanPackages package to use.
- services.mailman.restApiPassFile: Path to the file containing the value for `MAILMAN_REST_API_PASS`.

- services.mailman.serve.enable: Whether to enable automatic nginx and uwsgi setup for mailman-web.
- services.mailman.serve.uwsgiSettings: Extra configuration to merge into uwsgi config.

- services.mailman.serve.virtualRoot: Path to mount the mailman-web django application on.

- services.mailman.settings: Settings for mailman.cfg
- services.mailman.siteOwner: Certain messages that must be delivered to a human, but which can't
be delivered to a list owner (e.g. a bounce from a list owner), will
be sent to this address. It should point to a human.

- services.mailman.webHosts: The list of hostnames and/or IP addresses from which the Mailman Web
UI will accept requests. By default, "localhost" and "127.0.0.1" are
enabled. All additional names under which your web server accepts
requests for the UI must be listed here or incoming requests will be
rejected.

- services.mailman.webSettings: Overrides for the default mailman-web Django settings.

- services.mailman.webUser: User to run mailman-web as

- services.mailpile
- services.mailpit.instances: Configure mailpit instances. The attribute-set values are
CLI flags passed to the `mailpit` CLI.

See [upstream docs](https://mailpit.axllent.org/docs/configuration/runtime-options/)
for all available options.

- services.mainsail.enable: Whether to enable a modern and responsive user interface for Klipper.
- services.mainsail.hostName: Hostname to serve mainsail on
- services.mainsail.nginx: Extra configuration for the nginx virtual host of mainsail.
- services.mainsail.package: The mainsail package to use.
- services.malcontent.enable: Whether to enable Malcontent, parental control support for applications.
- services.mame.emuAddr: IP address of the guest system. The same you set inside guest OS under
MAME. Should be on the same subnet as {option}`services.mame.hostAddr`.

- services.mame.enable: Whether to setup TUN/TAP Ethernet interface for MAME emulator.

- services.mame.hostAddr: IP address of the host system. Usually an address of the main network
adapter or the adapter through which you get an internet connection.

- services.mame.user: User from which you run MAME binary.

- services.manticore.enable: Whether to enable Manticoresearch.
- services.manticore.settings: Configuration for Manticoresearch. See
<https://manual.manticoresearch.com/Server%20settings>
for more information.

- services.marathon
- services.marytts.basePath: The base path in which MaryTTS runs.

- services.marytts.enable: Whether to enable MaryTTS.
- services.marytts.openFirewall: Whether to open the port in the firewall for MaryTTS.

- services.marytts.package: The marytts package to use.
- services.marytts.port: Port to bind the MaryTTS server to.

- services.marytts.settings: Settings for MaryTTS.

See the [default settings](https://github.com/marytts/marytts/blob/master/marytts-runtime/conf/marybase.config)
for a list of possible keys.

- services.marytts.userDictionaries: Paths to the user dictionary files for MaryTTS.

- services.marytts.voices: Paths to the JAR files that contain additional voices for MaryTTS.

Voices are automatically detected by MaryTTS, so there is no need to alter
your config to make use of new voices.

- services.mastodon.activeRecordEncryptionDeterministicKeyFile: This key must be set to enable the Active Record Encryption feature within
Rails that Mastodon uses to encrypt and decrypt some database attributes.
A new Active Record keys can be generated by running:

`nix build -f '<nixpkgs>' mastodon; cd result; RAILS_ENV=production ./bin/rails db:encryption:init`

If this file does not exist, it will be created with a new Active Record
keys.

- services.mastodon.activeRecordEncryptionKeyDerivationSaltFile: This key must be set to enable the Active Record Encryption feature within
Rails that Mastodon uses to encrypt and decrypt some database attributes.
A new Active Record keys can be generated by running:

`nix build -f '<nixpkgs>' mastodon; cd result; RAILS_ENV=production ./bin/rails db:encryption:init`

If this file does not exist, it will be created with a new Active Record
keys.

- services.mastodon.activeRecordEncryptionPrimaryKeyFile: This key must be set to enable the Active Record Encryption feature within
Rails that Mastodon uses to encrypt and decrypt some database attributes.
A new Active Record keys can be generated by running:

`nix build -f '<nixpkgs>' mastodon; cd result; RAILS_ENV=production ./bin/rails db:encryption:init`

If this file does not exist, it will be created with a new Active Record
keys.

- services.mastodon.automaticMigrations: Do automatic database migrations.

- services.mastodon.configureNginx: Configure nginx as a reverse proxy for mastodon.
Note that this makes some assumptions on your setup, and sets settings that will
affect other virtualHosts running on your nginx instance, if any.
Alternatively you can configure a reverse-proxy of your choice to serve these paths:

`/ -> ${pkgs.mastodon}/public`

`/ -> 127.0.0.1:{{ webPort }} `(If there was no file in the directory above.)

`/system/ -> /var/lib/mastodon/public-system/`

`/api/v1/streaming/ -> 127.0.0.1:{{ streamingPort }}`

Make sure that websockets are forwarded properly. You might want to set up caching
of some requests. Take a look at mastodon's provided nginx configuration at
`https://github.com/mastodon/mastodon/blob/master/dist/nginx.conf`.

- services.mastodon.database.createLocally: Configure local PostgreSQL database server for Mastodon.
- services.mastodon.database.host: Database host address or unix socket.
- services.mastodon.database.name: Database name.
- services.mastodon.database.passwordFile: A file containing the password corresponding to
{option}`database.user`.

- services.mastodon.database.port: Database host port.
- services.mastodon.database.user: Database user.
- services.mastodon.elasticsearch.host: Elasticsearch host.
If it is not null, Elasticsearch full text search will be enabled.

- services.mastodon.elasticsearch.passwordFile: Path to file containing password for optionally authenticating with Elasticsearch.

- services.mastodon.elasticsearch.port: Elasticsearch port.
- services.mastodon.elasticsearch.prefix: If provided, adds a prefix to indexes in Elasticsearch. This allows to use the same
Elasticsearch cluster between different projects or Mastodon servers.

- services.mastodon.elasticsearch.preset: It controls the ElasticSearch indices configuration (number of shards and replica).

- services.mastodon.elasticsearch.user: Used for optionally authenticating with Elasticsearch.
- services.mastodon.enable: Whether to enable Mastodon, a federated social network server.
- services.mastodon.enableUnixSocket: Instead of binding to an IP address like 127.0.0.1, you may bind to a Unix socket. This variable
is process-specific, e.g. you need different values for every process, and it works for both web (Puma)
processes and streaming API (Node.js) processes.

- services.mastodon.extraConfig: Extra environment variables to pass to all mastodon services.

- services.mastodon.extraEnvFiles: Extra environment files to pass to all mastodon services. Useful for passing down environmental secrets.

- services.mastodon.group: Group under which mastodon runs.

- services.mastodon.localDomain: The domain serving your Mastodon instance.
- services.mastodon.mediaAutoRemove.enable: Automatically remove remote media attachments and preview cards older than the configured amount of days.

Recommended in <https://docs.joinmastodon.org/admin/setup/>.

- services.mastodon.mediaAutoRemove.olderThanDays: How old remote media needs to be in order to be removed.

- services.mastodon.mediaAutoRemove.startAt: How often to remove remote media.

The format is described in {manpage}`systemd.time(7)`.

- services.mastodon.otpSecretFile
- services.mastodon.package: The mastodon package to use.
- services.mastodon.redis.createLocally: Configure local Redis server for Mastodon.
- services.mastodon.redis.enableUnixSocket: Use Unix socket
- services.mastodon.redis.host: Redis host.
- services.mastodon.redis.passwordFile: A file containing the password for Redis database.
- services.mastodon.redis.port: Redis port.
- services.mastodon.secretKeyBaseFile: Path to file containing the secret key base.
A new secret key base can be generated by running:

`nix build -f '<nixpkgs>' mastodon; cd result; bin/bundle exec rails secret`

If this file does not exist, it will be created with a new secret key base.

- services.mastodon.sidekiqPort: TCP port used by the mastodon-sidekiq service.
- services.mastodon.sidekiqProcesses: How many Sidekiq processes should be used to handle background jobs, and which job classes they handle. *Read the [upstream documentation](https://docs.joinmastodon.org/admin/scaling/#sidekiq) before configuring this!*
- services.mastodon.sidekiqThreads: Worker threads used by the mastodon-sidekiq-all service. If `sidekiqProcesses` is configured and any processes specify null `threads`, this value is used.
- services.mastodon.smtp.authenticate: Authenticate with the SMTP server using username and password.
- services.mastodon.smtp.createLocally: Configure local Postfix SMTP server for Mastodon.
- services.mastodon.smtp.fromAddress: "From" address used when sending Emails to users.
- services.mastodon.smtp.host: SMTP host used when sending emails to users.
- services.mastodon.smtp.passwordFile: Path to file containing the SMTP password.

- services.mastodon.smtp.port: SMTP port used when sending emails to users.
- services.mastodon.smtp.user: SMTP login name.
- services.mastodon.streamingPort
- services.mastodon.streamingProcesses: Number of processes used by the mastodon-streaming service.
Please define this explicitly, recommended is the amount of your CPU cores minus one.

- services.mastodon.trustedProxy: You need to set it to the IP from which your reverse proxy sends requests to Mastodon's web process,
otherwise Mastodon will record the reverse proxy's own IP as the IP of all requests, which would be
bad because IP addresses are used for important rate limits and security functions.

- services.mastodon.user: User under which mastodon runs. If it is set to "mastodon",
that user will be created, otherwise it should be set to the
name of a user created elsewhere.
In both cases, the `mastodon` package will be added to the user's package set
and a tootctl wrapper to system packages that switches to the configured account
and load the right environment.

- services.mastodon.vapidPrivateKeyFile: Path to file containing the private key used for Web Push
Voluntary Application Server Identification.  A new keypair can
be generated by running:

`nix build -f '<nixpkgs>' mastodon; cd result; bin/rake webpush:generate_keys`

If this file does not exist, it will be created with a new
private key.

- services.mastodon.vapidPublicKeyFile: Path to file containing the public key used for Web Push
Voluntary Application Server Identification.  A new keypair can
be generated by running:

`nix build -f '<nixpkgs>' mastodon; cd result; RAILS_ENV=production bin/rake webpush:generate_keys`

If {option}`mastodon.vapidPrivateKeyFile`does not
exist, it and this file will be created with a new keypair.

- services.mastodon.webPort: TCP port used by the mastodon-web service.
- services.mastodon.webProcesses: Processes used by the mastodon-web service.
- services.mastodon.webThreads: Threads per process used by the mastodon-web service.
- services.mathics
- services.matomo.enable: Enable Matomo web analytics with php-fpm backend.
Either the nginx option or the webServerUser option is mandatory.

- services.matomo.hostname: URL of the host, without https prefix. You may want to change it if you
run Matomo on a different URL than matomo.yourdomain.

- services.matomo.nginx: With this option, you can customize an nginx virtualHost which already has sensible defaults for Matomo.
Either this option or the webServerUser option is mandatory.
Set this to {} to just enable the virtualHost if you don't need any customization.
If enabled, then by default, the {option}`serverName` is
`${user}.${config.networking.hostName}.${config.networking.domain}`,
SSL is active, and certificates are acquired via ACME.
If this is set to null (the default), no nginx virtualHost will be configured.

- services.matomo.package: The matomo package to use.
- services.matomo.periodicArchiveProcessing: Enable periodic archive processing, which generates aggregated reports from the visits.

This means that you can safely disable browser triggers for Matomo archiving,
and safely enable to delete old visitor logs.
Before deleting visitor logs,
make sure though that you run `systemctl start matomo-archive-processing.service`
at least once without errors if you have already collected data before.

- services.matomo.periodicArchiveProcessingUrl: Alias of {option}`services.matomo.hostname`.
- services.matomo.phpfpmProcessManagerConfig
- services.matomo.webServerUser: Name of the web server user that forwards requests to {option}`services.phpfpm.pools.<name>.socket` the fastcgi socket for Matomo if the nginx
option is not used. Either this option or the nginx option is mandatory.
If you want to use another webserver than nginx, you need to set this to that server's user
and pass fastcgi requests to `index.php`, `matomo.php` and `piwik.php` (legacy name) to this socket.

- services.matrix-alertmanager.enable: Whether to enable matrix-alertmanager.
- services.matrix-alertmanager.homeserverUrl: URL of the Matrix homeserver to use.
- services.matrix-alertmanager.matrixRooms: Combination of Alertmanager receiver(s) and rooms for the bot to join.
Each Alertmanager receiver can be mapped to post to a matrix room.

Note, you must use a room ID and not a room alias/name. Room IDs start
with a "!".

- services.matrix-alertmanager.matrixUser: Matrix user to use for the bot.
- services.matrix-alertmanager.mention: Makes the bot mention @room when posting an alert
- services.matrix-alertmanager.package: The matrix-alertmanager package to use.
- services.matrix-alertmanager.port: Port that matrix-alertmanager listens on.
- services.matrix-alertmanager.secretFile: File that contains a secret for the Alertmanager webhook.
- services.matrix-alertmanager.tokenFile: File that contains a valid Matrix token for the Matrix user.
- services.matrix-appservice-discord.enable: Whether to enable a bridge between Matrix and Discord.
- services.matrix-appservice-discord.environmentFile: File containing environment variables to be passed to the matrix-appservice-discord service,
in which secret tokens can be specified securely by defining values for
`APPSERVICE_DISCORD_AUTH_CLIENT_I_D` and
`APPSERVICE_DISCORD_AUTH_BOT_TOKEN`.

- services.matrix-appservice-discord.localpart: The user_id localpart to assign to the AS.

- services.matrix-appservice-discord.package: The matrix-appservice-discord package to use.
- services.matrix-appservice-discord.port: Port number on which the bridge should listen for internal communication with the Matrix homeserver.

- services.matrix-appservice-discord.serviceDependencies: List of Systemd services to require and wait for when starting the application service,
such as the Matrix homeserver if it's running on the same host.

- services.matrix-appservice-discord.settings: {file}`config.yaml` configuration as a Nix attribute set.

Configuration options should match those described in
[config.sample.yaml](https://github.com/Half-Shot/matrix-appservice-discord/blob/master/config/config.sample.yaml).

{option}`config.bridge.domain` and {option}`config.bridge.homeserverUrl`
should be set to match the public host name of the Matrix homeserver for webhooks and avatars to work.

Secret tokens should be specified using {option}`environmentFile`
instead of this world-readable attribute set.

- services.matrix-appservice-discord.url: The URL where the application service is listening for HS requests.

- services.matrix-appservice-irc.enable: Whether to enable the Matrix/IRC bridge.
- services.matrix-appservice-irc.localpart: The user_id localpart to assign to the appservice
- services.matrix-appservice-irc.needBindingCap: Whether the daemon needs to bind to ports below 1024 (e.g. for the ident service)
- services.matrix-appservice-irc.passwordEncryptionKeyLength: Length of the key to encrypt IRC passwords with
- services.matrix-appservice-irc.port: The port to listen on
- services.matrix-appservice-irc.registrationUrl: The URL where the application service is listening for homeserver requests,
from the Matrix homeserver perspective.

- services.matrix-appservice-irc.settings: Configuration for the appservice, see
<https://github.com/matrix-org/matrix-appservice-irc/blob/3.0.5/config.sample.yaml>
for supported values

- services.matrix-conduit.enable: Whether to enable matrix-conduit.
- services.matrix-conduit.extraEnvironment: Extra Environment variables to pass to the conduit server.
- services.matrix-conduit.package: The matrix-conduit package to use.
- services.matrix-conduit.secretFile: Path to a file containing sensitive environment as described in {manpage}`systemd.exec(5).
Some variables that can be considered secrets are:

- CONDUIT_JWT_SECRET:
  The secret used to enable JWT login. Without it a 400 error will be returned.

- CONDUIT_TURN_SECRET:
  The TURN secret

- services.matrix-conduit.settings: Generates the conduit.toml configuration file. Refer to
<https://docs.conduit.rs/configuration.html>
for details on supported values.
Note that database_path can not be edited because the service's reliance on systemd StateDir.
For secrets use the `secretFile` option instead.

- services.matrix-continuwuity.enable: Whether to enable continuwuity.
- services.matrix-continuwuity.extraEnvironment: Extra Environment variables to pass to the continuwuity server.
- services.matrix-continuwuity.group: The group {command}`continuwuity` is run as.

- services.matrix-continuwuity.package: The matrix-continuwuity package to use.
- services.matrix-continuwuity.settings: Generates the continuwuity.toml configuration file. Refer to
<https://continuwuity.org/configuration.html>
for details on supported values.

- services.matrix-continuwuity.user: The user {command}`continuwuity` is run as.

- services.matrix-hookshot.enable: Whether to enable matrix-hookshot, a bridge between Matrix and project management services.
- services.matrix-hookshot.package: The matrix-hookshot package to use.
- services.matrix-hookshot.registrationFile: Appservice registration file.
As it contains secret tokens, you may not want to add this to the publicly readable Nix store.

- services.matrix-hookshot.serviceDependencies: List of Systemd services to require and wait for when starting the application service,
such as the Matrix homeserver if it's running on the same host.

- services.matrix-hookshot.settings: {file}`config.yml` configuration as a Nix attribute set.

For details please see the [documentation](https://matrix-org.github.io/matrix-hookshot/latest/setup/sample-configuration.html).

- services.matrix-sliding-sync
- services.matrix-synapse.account_threepid_delegates.email
- services.matrix-synapse.account_threepid_delegates.msisdn
- services.matrix-synapse.allow_guest_access
- services.matrix-synapse.app_service_config_files
- services.matrix-synapse.bcrypt_rounds
- services.matrix-synapse.bind_host
- services.matrix-synapse.bind_port
- services.matrix-synapse.configFile: Path to the configuration file on the target system. Useful to configure e.g. workers
that also need this.

- services.matrix-synapse.configureRedisLocally: Whether to automatically configure a local redis server for matrix-synapse.

- services.matrix-synapse.create_local_database
- services.matrix-synapse.dataDir: The directory where matrix-synapse stores its stateful data such as
certificates, media and uploads.

- services.matrix-synapse.database_args
- services.matrix-synapse.database_name
- services.matrix-synapse.database_type
- services.matrix-synapse.database_user
- services.matrix-synapse.dynamic_thumbnails
- services.matrix-synapse.enable: Whether to enable matrix.org synapse, the reference homeserver.
- services.matrix-synapse.enableRegistrationScript: Whether to install the `register_new_matrix_user` script, that
allows account creation on the terminal.

::: {.note}
  This script does not work when the client listener uses UNIX domain sockets
:::

- services.matrix-synapse.enable_metrics
- services.matrix-synapse.enable_registration
- services.matrix-synapse.enable_registration_captcha
- services.matrix-synapse.event_cache_size
- services.matrix-synapse.expire_access_tokens
- services.matrix-synapse.extraConfig
- services.matrix-synapse.extraConfigFiles: Extra config files to include.

The configuration files will be included based on the command line
argument --config-path. This allows to configure secrets without
having to go through the Nix store, e.g. based on deployment keys if
NixOps is in use.

- services.matrix-synapse.extras: Explicitly install extras provided by matrix-synapse. Most
will require some additional configuration.

Extras will automatically be enabled, when the relevant
configuration sections are present.

Please note that this option is additive: i.e. when adding a new item
to this list, the defaults are still kept. To override the defaults as well,
use `lib.mkForce`.

- services.matrix-synapse.federation_rc_concurrent
- services.matrix-synapse.federation_rc_reject_limit
- services.matrix-synapse.federation_rc_sleep_delay
- services.matrix-synapse.federation_rc_sleep_limit
- services.matrix-synapse.federation_rc_window_size
- services.matrix-synapse.key_refresh_interval
- services.matrix-synapse.listeners
- services.matrix-synapse.log: Default configuration for the loggers used by `matrix-synapse` and its workers.
The defaults are added with the default priority which means that
these will be merged with additional declarations. These additional
declarations also take precedence over the defaults when declared
with at least normal priority. For instance
the log-level for synapse and its workers can be changed like this:

```nix
{ lib, ... }: {
  services.matrix-synapse.log.root.level = "WARNING";
}
```

And another field can be added like this:

```nix
{
  services.matrix-synapse.log = {
    loggers."synapse.http.matrixfederationclient".level = "DEBUG";
  };
}
```

Additionally, the field `handlers.journal.SYSLOG_IDENTIFIER` will be added to
each log config, i.e.
* `synapse` for `matrix-synapse.service`
* `synapse-<worker name>` for `matrix-synapse-worker-<worker name>.service`

This is only done if this option has a `handlers.journal` field declared.

To discard all settings declared by this option for each worker and synapse,
`lib.mkForce` can be used.

To discard all settings declared by this option for a single worker or synapse only,
[](#opt-services.matrix-synapse.workers._name_.worker_log_config) or
[](#opt-services.matrix-synapse.settings.log_config) can be used.

- services.matrix-synapse.logConfig
- services.matrix-synapse.macaroon_secret_key
- services.matrix-synapse.max_image_pixels
- services.matrix-synapse.max_upload_size
- services.matrix-synapse.no_tls
- services.matrix-synapse.package: Reference to the `matrix-synapse` wrapper with all extras
(e.g. for `oidc` or `saml2`) added to the `PYTHONPATH` of all executables.

This option is useful to reference the "final" `matrix-synapse` package that's
actually used by `matrix-synapse.service`. For instance, when using
workers, it's possible to run
`${config.services.matrix-synapse.package}/bin/synapse_worker` and
no additional PYTHONPATH needs to be specified for extras or plugins configured
via `services.matrix-synapse`.

However, this means that this option is supposed to be only declared
by the `services.matrix-synapse` module itself and is thus read-only.
In order to modify `matrix-synapse` itself, use an overlay to override
`pkgs.matrix-synapse-unwrapped`.

- services.matrix-synapse.plugins: List of additional Matrix plugins to make available.

- services.matrix-synapse.presence.enabled
- services.matrix-synapse.public_baseurl
- services.matrix-synapse.rc_messages_burst_count
- services.matrix-synapse.rc_messages_per_second
- services.matrix-synapse.recaptcha_private_key
- services.matrix-synapse.recaptcha_public_key
- services.matrix-synapse.redaction_retention_period
- services.matrix-synapse.registration_shared_secret
- services.matrix-synapse.report_stats
- services.matrix-synapse.room_invite_state_types
- services.matrix-synapse.room_prejoin_state.additional_event_types
- services.matrix-synapse.room_prejoin_state.disable_default_event_types
- services.matrix-synapse.server_name
- services.matrix-synapse.servers
- services.matrix-synapse.serviceUnit: The systemd unit (a service or a target) for other services to depend on if they
need to be started after matrix-synapse.

This option is useful as the actual parent unit for all matrix-synapse processes
changes when configuring workers.

- services.matrix-synapse.settings: The primary synapse configuration. See the
[sample configuration](https://github.com/element-hq/synapse/blob/v1.140.0/docs/sample_config.yaml)
for possible values.

Secrets should be passed in by using the `extraConfigFiles` option.

- services.matrix-synapse.tls_certificate_path
- services.matrix-synapse.tls_dh_param_path
- services.matrix-synapse.tls_private_key_path
- services.matrix-synapse.trusted_third_party_id_servers
- services.matrix-synapse.turn_shared_secret
- services.matrix-synapse.turn_uris
- services.matrix-synapse.turn_user_lifetime
- services.matrix-synapse.unsecure_port
- services.matrix-synapse.url_preview_enabled
- services.matrix-synapse.url_preview_ip_range_blacklist
- services.matrix-synapse.url_preview_ip_range_whitelist
- services.matrix-synapse.url_preview_url_blacklist
- services.matrix-synapse.user_creation_max_duration
- services.matrix-synapse.verbose
- services.matrix-synapse.web_client
- services.matrix-synapse.withJemalloc: Whether to preload jemalloc to reduce memory fragmentation and overall usage.

- services.matrix-synapse.workers: Options for configuring workers. Worker support will be enabled if at least one worker is configured here.

See the [worker documention](https://element-hq.github.io/synapse/latest/workers.html#worker-configuration)
for possible options for each worker. Worker-specific options overriding the shared homeserver configuration can be
specified here for each worker.

::: {.note}
  Worker support will add a replication listener on port 9093 to the main synapse process using the default
  value of [`services.matrix-synapse.settings.listeners`](#opt-services.matrix-synapse.settings.listeners) and configure that
  listener as `services.matrix-synapse.settings.instance_map.main`.
  If you set either of those options, make sure to configure a replication listener yourself.

  A redis server is required for running workers. A local one can be enabled
  using [`services.matrix-synapse.configureRedisLocally`](#opt-services.matrix-synapse.configureRedisLocally).

  Workers also require a proper reverse proxy setup to direct incoming requests to the appropriate process. See
  the [reverse proxy documentation](https://element-hq.github.io/synapse/latest/reverse_proxy.html) for a
  general reverse proxying setup and
  the [worker documentation](https://element-hq.github.io/synapse/latest/workers.html#available-worker-applications)
  for the available endpoints per worker application.
:::

- services.matrix-tuwunel.enable: Whether to enable tuwunel.
- services.matrix-tuwunel.extraEnvironment: Extra Environment variables to pass to the tuwunel server.
- services.matrix-tuwunel.group: The group {command}`tuwunel` is run as.  If left as the default, the group will
automatically be created by the service.

- services.matrix-tuwunel.package: The matrix-tuwunel package to use.
- services.matrix-tuwunel.settings: Generates the tuwunel.toml configuration file. Refer to
<https://matrix-construct.github.io/tuwunel/configuration.html>
for details on supported values.

- services.matrix-tuwunel.stateDirectory: The name of the directory under /var/lib/ where the database will be stored.

Note that `stateDirectory` cannot be changed once created because of the service's reliance on
systemd `StateDirectory`.

- services.matrix-tuwunel.user: The user {command}`tuwunel` is run as.  If left as the default, the user will
automatically be created by the service.

- services.matter-server.enable: Whether to enable Matter-server.
- services.matter-server.extraArgs: Extra arguments to pass to the matter-server executable.
See <https://github.com/home-assistant-libs/python-matter-server?tab=readme-ov-file#running-the-development-server> for options.

- services.matter-server.logLevel: Verbosity of logs from the matter-server
- services.matter-server.package: The python-matter-server package to use.
- services.matter-server.port: Port to expose the matter-server service on.
- services.matterbridge.configFile: WARNING: THIS IS INSECURE, as your password will end up in
{file}`/nix/store`, thus publicly readable. Use
`services.matterbridge.configPath` instead.

The matterbridge configuration file in the TOML file format.

- services.matterbridge.configPath: The path to the matterbridge configuration file.

- services.matterbridge.enable: Whether to enable Matterbridge chat platform bridge.
- services.matterbridge.group: Group which runs the matterbridge service.

- services.matterbridge.package: The matterbridge package to use.
- services.matterbridge.user: User which runs the matterbridge service.

- services.mattermost.configDir: Mattermost config directory.

- services.mattermost.dataDir: Mattermost working directory.

- services.mattermost.database.create: Create a local PostgreSQL or MySQL database for Mattermost automatically.

- services.mattermost.database.driver: The database driver to use (Postgres or MySQL).

- services.mattermost.database.extraConnectionOptions: Extra options that are placed in the connection URI's query parameters.

- services.mattermost.database.fromEnvironment: Use services.mattermost.environmentFile to configure the database instead of writing the database URI
to the Nix store. Useful if you use password authentication with peerAuth set to false.

- services.mattermost.database.host: Host to use for the database. Can also be set to a path if you'd like to connect
to a socket using a username and password.

- services.mattermost.database.name: Local Mattermost database name.

- services.mattermost.database.password: Password for local Mattermost database user. If set and peerAuth is not true,
will cause a warning nagging you to use environmentFile instead since it will
end up in the Nix store.

- services.mattermost.database.peerAuth: If set, will use peer auth instead of connecting to a Postgres server.
Use services.mattermost.database.socketPath to configure the socket path.

- services.mattermost.database.port: Port to use for the database.

- services.mattermost.database.socketPath: The database (Postgres or MySQL) socket path.

- services.mattermost.database.user: Local Mattermost database username.

- services.mattermost.enable: Whether to enable Mattermost chat server.
- services.mattermost.environment: Extra environment variables to export to the Mattermost process
from the systemd unit configuration.

- services.mattermost.environmentFile: Environment file (see {manpage}`systemd.exec(5)`
"EnvironmentFile=" section for the syntax) which sets config options
for mattermost (see [the Mattermost documentation](https://docs.mattermost.com/configure/configuration-settings.html#environment-variables)).

Settings defined in the environment file will overwrite settings
set via Nix or via the {option}`services.mattermost.extraConfig`
option.

Useful for setting config options without their value ending up in the
(world-readable) Nix store, e.g. for a database password.

- services.mattermost.extraConfig: Alias of {option}`services.mattermost.settings`.
- services.mattermost.group: Group which runs the Mattermost service.

- services.mattermost.host: Host or address that this Mattermost instance listens on.

- services.mattermost.listenAddress: Alias of {option}`services.mattermost.host`.
- services.mattermost.localDatabaseCreate: Alias of {option}`services.mattermost.database.create`.
- services.mattermost.localDatabaseName: Alias of {option}`services.mattermost.database.name`.
- services.mattermost.localDatabasePassword: Alias of {option}`services.mattermost.database.password`.
- services.mattermost.localDatabaseUser: Alias of {option}`services.mattermost.database.user`.
- services.mattermost.logDir: Mattermost log directory.

- services.mattermost.matterircd.enable: Whether to enable Mattermost IRC bridge.
- services.mattermost.matterircd.package: The matterircd package to use.
- services.mattermost.matterircd.parameters: Set commandline parameters to pass to matterircd. See
<https://github.com/42wim/matterircd#usage> for more information.

- services.mattermost.mutableConfig: Whether the Mattermost config.json is writeable by Mattermost.

Most of the settings can be edited in the system console of
Mattermost if this option is enabled. A template config using
the options specified in services.mattermost will be generated
but won't be overwritten on changes or rebuilds.

If this option is disabled, persistent changes in the system
console won't be possible (the default). If a config.json is
present, it will be overwritten at service start!

- services.mattermost.package: The mattermost package to use.
- services.mattermost.plugins: Plugins to add to the configuration. Overrides any installed if non-null.
This is a list of paths to .tar.gz files or derivations evaluating to
.tar.gz files. You can use `mattermost.buildPlugin` to build plugins;
see the NixOS documentation for more details.

- services.mattermost.pluginsBundle: Derivation building to a directory of plugin tarballs.
This overrides {option}`services.mattermost.plugins` if provided.

- services.mattermost.port: Port for Mattermost server to listen on.

- services.mattermost.preferNixConfig: If both mutableConfig and this option are set, the Nix configuration
will take precedence over any settings configured in the server
console.

- services.mattermost.settings: Additional configuration options as Nix attribute set in config.json schema.

- services.mattermost.siteName: Name of this Mattermost site.
- services.mattermost.siteUrl: URL this Mattermost instance is reachable under, without trailing slash.

- services.mattermost.socket.enable: Whether to enable Mattermost control socket.
- services.mattermost.socket.export: Whether to enable Export socket control to system environment variables.
- services.mattermost.socket.path: Default location for the Mattermost control socket used by `mmctl`.

- services.mattermost.statePath: Alias of {option}`services.mattermost.dataDir`.
- services.mattermost.telemetry.enableDiagnostics: True if we should enable sending diagnostic data. This reaches out to Mattermost's servers:
https://docs.mattermost.com/manage/telemetry.html#error-and-diagnostics-reporting-feature

- services.mattermost.telemetry.enableSecurityAlerts: True if we should enable security update checking. This reaches out to Mattermost's servers:
https://docs.mattermost.com/manage/telemetry.html#security-update-check-feature

- services.mattermost.user: User which runs the Mattermost service.

- services.maubot.configMutable: Whether maubot should write updated config into `extraConfigFile`. **This will make your Nix module settings have no effect besides the initial config, as extraConfigFile takes precedence over NixOS settings!**

- services.maubot.dataDir: The directory where maubot stores its stateful data.

- services.maubot.enable: Whether to enable maubot.
- services.maubot.extraConfigFile: A file for storing secrets. You can pass homeserver registration keys here.
If it already exists, **it must contain `server.unshared_secret`** which is used for signing API keys.
If `configMutable` is not set to true, **maubot user must have write access to this file**.

- services.maubot.package: The maubot package to use.
- services.maubot.plugins: List of additional maubot plugins to make available.

- services.maubot.pythonPackages: List of additional Python packages to make available for maubot.

- services.maubot.settings: YAML settings for maubot. See the
[example configuration](https://github.com/maubot/maubot/blob/master/maubot/example-config.yaml)
for more info.

Secrets should be passed in by using `extraConfigFile`.

- services.mautrix-discord.dataDir: Directory to store the bridge's configuration and database files.
This directory will be created if it does not exist.

- services.mautrix-discord.enable: Whether to enable Mautrix-Discord, a Matrix-Discord puppeting/relay-bot bridge.
- services.mautrix-discord.environmentFile: File containing environment variables to substitute when copying the configuration
out of Nix store to the `services.mautrix-discord.dataDir`.
Can be used for storing the secrets without making them available in the Nix store.
For example, you can set `services.mautrix-discord.settings.appservice.as_token = "$MAUTRIX_DISCORD_APPSERVICE_AS_TOKEN"`
and then specify `MAUTRIX_DISCORD_APPSERVICE_AS_TOKEN="{token}"` in the environment file.
This value will get substituted into the configuration file as a token.

- services.mautrix-discord.package: The mautrix-discord package to use.
- services.mautrix-discord.registerToSynapse: Whether to add the bridge's app service registration file to
`services.matrix-synapse.settings.app_service_config_files`.

- services.mautrix-discord.registrationServiceUnit: The registration service that generates the registration file.
Systemd unit (a service or a target) for other services to depend on if they
need to be started after mautrix-discord registration service.
This option is useful as the actual parent unit for all matrix-synapse processes
changes when configuring workers.

- services.mautrix-discord.serviceDependencies: List of Systemd services to require and wait for when starting the application service.

- services.mautrix-discord.serviceUnit: The systemd unit (a service or a target) for other services to depend on if they
need to be started after matrix-synapse.
This option is useful as the actual parent unit for all matrix-synapse processes
changes when configuring workers.

- services.mautrix-discord.settings: {file}`config.yaml` configuration as a Nix attribute set.
Configuration options should match those described in
[example-config.yaml](https://github.com/mautrix/discord/blob/main/example-config.yaml).

- services.mautrix-meta.instances: Configuration of multiple `mautrix-meta` instances.
`services.mautrix-meta.instances.facebook` and `services.mautrix-meta.instances.instagram`
come preconfigured with network.mode, appservice.id, bot username, display name and avatar.

- services.mautrix-meta.package: The mautrix-meta package to use.
- services.mautrix-signal.enable: Whether to enable mautrix-signal, a Matrix-Signal puppeting bridge.
- services.mautrix-signal.environmentFile: File containing environment variables to be passed to the mautrix-signal service.
If an environment variable `MAUTRIX_SIGNAL_BRIDGE_LOGIN_SHARED_SECRET` is set,
then its value will be used in the configuration file for the option
`double_puppet.secrets` without leaking it to the store, using the configured
`homeserver.domain` as key.

- services.mautrix-signal.package: The mautrix-signal package to use.
- services.mautrix-signal.registerToSynapse: Whether to add the bridge's app service registration file to
`services.matrix-synapse.settings.app_service_config_files`.

- services.mautrix-signal.serviceDependencies: List of systemd units to require and wait for when starting the application service.

- services.mautrix-signal.settings: {file}`config.yaml` configuration as a Nix attribute set.
Configuration options should match those described in the example configuration.
Get an example configuration by executing `mautrix-signal -c example.yaml --generate-example-config`
Secret tokens should be specified using {option}`environmentFile`
instead of this world-readable attribute set.

- services.mautrix-telegram.enable: Whether to enable Mautrix-Telegram, a Matrix-Telegram hybrid puppeting/relaybot bridge.
- services.mautrix-telegram.environmentFile: File containing environment variables to be passed to the mautrix-telegram service,
in which secret tokens can be specified securely by defining values for e.g.
`MAUTRIX_TELEGRAM_APPSERVICE_AS_TOKEN`,
`MAUTRIX_TELEGRAM_APPSERVICE_HS_TOKEN`,
`MAUTRIX_TELEGRAM_TELEGRAM_API_ID`,
`MAUTRIX_TELEGRAM_TELEGRAM_API_HASH` and optionally
`MAUTRIX_TELEGRAM_TELEGRAM_BOT_TOKEN`.

These environment variables can also be used to set other options by
replacing hierarchy levels by `.`, converting the name to uppercase
and prepending `MAUTRIX_TELEGRAM_`.
For example, the first value above maps to
{option}`settings.appservice.as_token`.

The environment variable values can be prefixed with `json::` to have
them be parsed as JSON. For example, `login_shared_secret_map` can be
set as follows:
`MAUTRIX_TELEGRAM_BRIDGE_LOGIN_SHARED_SECRET_MAP=json::{"example.com":"secret"}`.

- services.mautrix-telegram.package: The mautrix-telegram package to use.
- services.mautrix-telegram.registerToSynapse: Whether to add the bridge's app service registration file to
`services.matrix-synapse.settings.app_service_config_files`.

- services.mautrix-telegram.serviceDependencies: List of Systemd services to require and wait for when starting the application service.

- services.mautrix-telegram.settings: {file}`config.yaml` configuration as a Nix attribute set.
Configuration options should match those described in
[example-config.yaml](https://github.com/mautrix/telegram/blob/master/mautrix_telegram/example-config.yaml).

Secret tokens should be specified using {option}`environmentFile`
instead of this world-readable attribute set.

- services.mautrix-whatsapp.enable: Whether to enable mautrix-whatsapp, a Matrix-WhatsApp puppeting bridge.
- services.mautrix-whatsapp.environmentFile: File containing environment variables to be passed to the mautrix-whatsapp service.
If an environment variable `MAUTRIX_WHATSAPP_BRIDGE_LOGIN_SHARED_SECRET` is set,
then its value will be used in the configuration file for the option
`double_puppet.secrets` without leaking it to the store, using the configured
`homeserver.domain` as key.

- services.mautrix-whatsapp.package: The mautrix-whatsapp package to use.
- services.mautrix-whatsapp.registerToSynapse: Whether to add the bridge's app service registration file to
`services.matrix-synapse.settings.app_service_config_files`.

- services.mautrix-whatsapp.serviceDependencies: List of systemd units to require and wait for when starting the application service.

- services.mautrix-whatsapp.settings: {file}`config.yaml` configuration as a Nix attribute set.
Configuration options should match those described in the example configuration.
Get an example configuration by executing `mautrix-whatsapp -c example.yaml --generate-example-config`
Secret tokens should be specified using {option}`environmentFile`
instead of this world-readable attribute set.

- services.mbpfan.aggressive: If true, favors higher default fan speeds.
- services.mbpfan.enable: Whether to enable mbpfan, fan controller daemon for Apple Macs and MacBooks.
- services.mbpfan.highTemp: Alias of {option}`services.mbpfan.settings.general.high_temp`.
- services.mbpfan.lowTemp: Alias of {option}`services.mbpfan.settings.general.low_temp`.
- services.mbpfan.maxFanSpeed: Alias of {option}`services.mbpfan.settings.general.max_fan1_speed`.
- services.mbpfan.maxTemp: Alias of {option}`services.mbpfan.settings.general.max_temp`.
- services.mbpfan.minFanSpeed: Alias of {option}`services.mbpfan.settings.general.min_fan1_speed`.
- services.mbpfan.package: The mbpfan package to use.
- services.mbpfan.pollingInterval: Alias of {option}`services.mbpfan.settings.general.polling_interval`.
- services.mbpfan.settings: INI configuration for Mbpfan.
- services.mbpfan.verbose: If true, sets the log level to verbose.
- services.mchprs.dataDir: Directory to store MCHPRS database and other state/data files.

- services.mchprs.declarativeSettings: Whether to use a declarative configuration for MCHPRS.

- services.mchprs.declarativeWhitelist: Whether to use a declarative whitelist.
The options {option}`services.mchprs.whitelist.list`
will be applied if and only if set to `true`.

- services.mchprs.enable: Whether to enable MCHPRS, a Minecraft server.
- services.mchprs.maxRuntime: Automatically restart the server after
{option}`services.mchprs.maxRuntime`.
The {manpage}`systemd.time(7)` time span format is described here:
<https://www.freedesktop.org/software/systemd/man/systemd.time.html#Parsing%20Time%20Spans>.
If `null`, then the server is not restarted automatically.

- services.mchprs.openFirewall: Whether to open ports in the firewall for the server.
Only has effect when
{option}`services.mchprs.declarativeSettings` is `true`.

- services.mchprs.package: The mchprs package to use.
- services.mchprs.settings: Configuration for MCHPRS via `Config.toml`.
See <https://github.com/MCHPR/MCHPRS/blob/master/README.md> for documentation.

- services.mchprs.whitelist.enable: Whether or not the whitelist (in `whitelist.json`) shoud be enabled.
Only has effect when {option}`services.mchprs.declarativeSettings` is `true`.

- services.mchprs.whitelist.list: Whitelisted players, only has an effect when
{option}`services.mchprs.declarativeWhitelist` is
`true` and the whitelist is enabled
via {option}`services.mchprs.whitelist.enable`.
This is a mapping from Minecraft usernames to UUIDs.
You can use <https://mcuuid.net/> to get a
Minecraft UUID for a username.

- services.mealie.credentialsFile: File containing credentials used in mealie such as {env}`POSTGRES_PASSWORD`
or sensitive LDAP options.

Expects the format of an `EnvironmentFile=`, as described by {manpage}`systemd.exec(5)`.

- services.mealie.database.createLocally: Configure local PostgreSQL database server for Mealie.

- services.mealie.enable: Whether to enable Mealie, a recipe manager and meal planner.
- services.mealie.extraOptions: Specifies extra command line arguments to pass to mealie (Gunicorn).

- services.mealie.listenAddress: Address on which the service should listen.
- services.mealie.package: The mealie package to use.
- services.mealie.port: Port on which to serve the Mealie service.
- services.mealie.settings: Configuration of the Mealie service.

See [the mealie documentation](https://nightly.mealie.io/documentation/getting-started/installation/backend-config/) for available options and default values.

- services.mediagoblin.createDatabaseLocally: Whether to configure a local postgres database and connect to it.
- services.mediagoblin.domain: Domain under which mediagoblin will be served.
- services.mediagoblin.enable: Whether to enable MediaGoblin.

After the initial deployment, make sure to add an admin account:
```
mediagoblin-gmg adduser --username admin --email admin@example.com
mediagoblin-gmg makeadmin admin
```

- services.mediagoblin.package: The mediagoblin package to use.
- services.mediagoblin.paste.port: Port under which paste will listen.
- services.mediagoblin.paste.settings: Settings which are written into `paste.ini`.
- services.mediagoblin.pluginPackages: Plugins to add to the environment of MediaGoblin. They still need to be enabled in the config.
- services.mediagoblin.settings: Settings which are written into `mediagoblin.ini`.
- services.mediamtx.allowVideoAccess: Whether to enable access to video devices like cameras on the system
.
- services.mediamtx.enable: Whether to enable MediaMTX.
- services.mediamtx.env: Extra environment variables for MediaMTX
- services.mediamtx.package: The mediamtx package to use.
- services.mediamtx.settings: Settings for MediaMTX. Refer to the defaults at
<https://github.com/bluenviron/mediamtx/blob/main/mediamtx.yml>.

- services.mediatomb.customCfg: Allow the service to create and use its own config file inside the `dataDir` as
configured by {option}`services.mediatomb.dataDir`.
Deactivated by default, the service then runs with the configuration generated from this module.
Otherwise, when enabled, no service configuration is generated. Gerbera/Mediatomb then starts using
config.xml within the configured `dataDir`. It's up to the user to make a correct
configuration file.

- services.mediatomb.dataDir: The directory where Gerbera/Mediatomb stores its state, data, etc.

- services.mediatomb.dsmSupport: Whether to enable D-Link DSM 320 specific tweaks.
WARNING: incompatible with ps3 support.

- services.mediatomb.enable: Whether to enable the Gerbera/Mediatomb DLNA server.

- services.mediatomb.group: Group account under which the service runs.
- services.mediatomb.interface: A specific interface to bind to.

- services.mediatomb.mediaDirectories: Declare media directories to index.

- services.mediatomb.openFirewall: If false (the default), this is up to the user to declare the firewall rules.
If true, this opens port 1900 (tcp and udp) and the port specified by
{option}`sercvices.mediatomb.port`.

If the option {option}`services.mediatomb.interface` is set,
the firewall rules opened are dedicated to that interface. Otherwise,
those rules are opened globally.

- services.mediatomb.package: The gerbera package to use.
- services.mediatomb.pcDirectoryHide: Whether to list the top-level directory or not (from upnp client standpoint).

- services.mediatomb.port: The network port to listen on.

- services.mediatomb.ps3Support: Whether to enable ps3 specific tweaks.
WARNING: incompatible with DSM 320 support.

- services.mediatomb.serverName: How to identify the server on the network.

- services.mediatomb.tg100Support: Whether to enable Telegent TG100 specific tweaks.

- services.mediatomb.transcoding: Whether to enable transcoding.

- services.mediatomb.user: User account under which the service runs.
- services.mediatomb.uuid: A unique (on your network) to identify the server by.

- services.mediawiki.database
- services.mediawiki.enable: Whether to enable MediaWiki.
- services.mediawiki.extensions: Attribute set of paths whose content is copied to the {file}`extensions`
subdirectory of the MediaWiki installation and enabled in configuration.

Use `null` instead of path to enable extensions that are part of MediaWiki.

- services.mediawiki.extraConfig: Any additional text to be appended to MediaWiki's
LocalSettings.php configuration file. For configuration
settings, see <https://www.mediawiki.org/wiki/Manual:Configuration_settings>.

- services.mediawiki.finalPackage: The final package used by the module. This is the package that will have extensions and skins installed.

- services.mediawiki.httpd.virtualHost: Apache configuration can be done by adapting {option}`services.httpd.virtualHosts`.
See [](#opt-services.httpd.virtualHosts) for further information.

- services.mediawiki.name: Name of the wiki.
- services.mediawiki.nginx.hostName: The hostname to use for the nginx virtual host.
This is used to generate the nginx configuration.

- services.mediawiki.package: The mediawiki package to use.
- services.mediawiki.passwordFile: A file containing the initial password for the administrator account "admin".

- services.mediawiki.passwordSender: Contact address for password reset.
- services.mediawiki.poolConfig: Options for the MediaWiki PHP pool. See the documentation on `php-fpm.conf`
for details on configuration directives.

- services.mediawiki.skins: Attribute set of paths whose content is copied to the {file}`skins`
subdirectory of the MediaWiki installation in addition to the default skins.

- services.mediawiki.uploadsDir: This directory is used for uploads of pictures. The directory passed here is automatically
created and permissions adjusted as required.

- services.mediawiki.url: URL of the wiki.
- services.mediawiki.virtualHost: Alias of {option}`services.mediawiki.httpd.virtualHost`.
- services.mediawiki.webserver: Webserver to use.
- services.meguca
- services.meilisearch.dumplessUpgrade: Alias of {option}`services.meilisearch.settings.experimental_dumpless_upgrade`.
- services.meilisearch.enable: Whether to enable Meilisearch - a RESTful search API.
- services.meilisearch.environment: Alias of {option}`services.meilisearch.settings.env`.
- services.meilisearch.listenAddress: The IP address that Meilisearch will listen on.

It can also be a hostname like "localhost". If it resolves to an IPv4 and IPv6 address, Meilisearch will listen on both.

- services.meilisearch.listenPort: The port that Meilisearch will listen on.

- services.meilisearch.logLevel: Alias of {option}`services.meilisearch.settings.log_level`.
- services.meilisearch.masterKeyEnvironmentFile
- services.meilisearch.masterKeyFile: Path to file which contains the master key.
By doing so, all routes will be protected and will require a key to be accessed.
If no master key is provided, all routes can be accessed without requiring any key.

- services.meilisearch.maxIndexSize: Alias of {option}`services.meilisearch.settings.max_index_size`.
- services.meilisearch.noAnalytics: Alias of {option}`services.meilisearch.settings.no_analytics`.
- services.meilisearch.package: The meilisearch package to use. Use this if you require specific features to be enabled. The default package has no features.

- services.meilisearch.payloadSizeLimit: Alias of {option}`services.meilisearch.settings.http_payload_size_limit`.
- services.meilisearch.settings: Configuration settings for Meilisearch.
Look at the documentation for available options:
https://github.com/meilisearch/meilisearch/blob/main/config.toml
https://www.meilisearch.com/docs/learn/self_hosted/configure_meilisearch_at_launch#all-instance-options

- services.memcached.enable: Whether to enable Memcached.
- services.memcached.enableUnixSocket: Whether to enable Unix Domain Socket at /run/memcached/memcached.sock instead of listening on an IP address and port. The `listen` and `port` options are ignored.
- services.memcached.extraOptions: A list of extra options that will be added as a suffix when running memcached.
- services.memcached.listen: The IP address to bind to.
- services.memcached.maxConnections: The maximum number of simultaneous connections.
- services.memcached.maxMemory: The maximum amount of memory to use for storage, in MiB (1024×1024 bytes).
- services.memcached.port: The port to bind to.
- services.memcached.socket
- services.memcached.user: The user to run Memcached as
- services.meme-bingo-web.address: The address the webserver will bind to.

- services.meme-bingo-web.baseUrl: URL to be used for the HTML \<base\> element on all HTML routes.

- services.meme-bingo-web.enable: Whether to enable a web app for the meme bingo, rendered entirely on the web server and made interactive with forms.

Note: The application's author suppose to run meme-bingo-web behind a reverse proxy for SSL and HTTP/3
.
- services.meme-bingo-web.openFirewall: Whether to enable Opens the specified port in the firewall.
.
- services.meme-bingo-web.package: The meme-bingo-web package to use.
- services.meme-bingo-web.port: Port to be used for the web server.

- services.memos.dataDir: Specifies the directory where Memos will store its data.

::: {.note}
It will be automatically created with the permissions of [{option}`services.memos.user`](#opt-services.memos.user) and [{option}`services.memos.group`](#opt-services.memos.group).
:::

- services.memos.enable: Whether to enable Memos note-taking.
- services.memos.environmentFile: The environment file to use when starting Memos.

::: {.note}
By default, generated from [](opt-services.memos.settings).
:::

- services.memos.group: The group to run Memos as.

::: {.note}
If changing the default value, **you** are responsible of creating the corresponding group with [{option}`users.groups`](#opt-users.groups).
:::

- services.memos.openFirewall: Whether to enable opening the ports in the firewall.
- services.memos.package: The Memos package to use.
- services.memos.settings: The environment variables to configure Memos.

::: {.note}
At time of writing, there is no clear documentation about possible values.
It's possible to convert CLI flags into these variables.
Example : CLI flag "--unix-sock" converts to {env}`MEMOS_UNIX_SOCK`.
:::

- services.memos.user: The user to run Memos as.

::: {.note}
If changing the default value, **you** are responsible of creating the corresponding user with [{option}`users.users`](#opt-users.users).
:::

- services.merecat.enable: Whether to enable Merecat HTTP server.
- services.merecat.settings: Merecat configuration. Refer to {manpage}`merecat(8)` for details on supported values.

- services.meshcentral.enable: Whether to enable MeshCentral computer management server.
- services.meshcentral.package: The meshcentral package to use.
- services.meshcentral.settings: Settings for MeshCentral. Refer to upstream documentation for details:

- [JSON Schema definition](https://github.com/Ylianst/MeshCentral/blob/master/meshcentral-config-schema.json)
- [simple sample configuration](https://github.com/Ylianst/MeshCentral/blob/master/sample-config.json)
- [complex sample configuration](https://github.com/Ylianst/MeshCentral/blob/master/sample-config-advanced.json)
- [Old homepage with documentation link](https://www.meshcommander.com/meshcentral2)

- services.mesos
- services.metabase.enable: Whether to enable Metabase service.
- services.metabase.listen.ip: IP address that Metabase should listen on.

- services.metabase.listen.port: Listen port for Metabase.

- services.metabase.openFirewall: Open ports in the firewall for Metabase.

- services.metabase.package: The metabase package to use.
- services.metabase.ssl.enable: Whether to enable SSL (https) support.

- services.metabase.ssl.keystore: [Java KeyStore](https://www.digitalocean.com/community/tutorials/java-keytool-essentials-working-with-java-keystores) file containing the certificates.

- services.metabase.ssl.port: Listen port over SSL (https) for Metabase.

- services.metricbeat.enable: Whether to enable metricbeat.
- services.metricbeat.modules: Metricbeat modules are responsible for reading metrics from the various sources.

This is like `services.metricbeat.settings.metricbeat.modules`,
but structured as an attribute set. This has the benefit that multiple
NixOS modules can contribute settings to a single metricbeat module.

A module can be specified multiple times by choosing a different `<name>`
for each, but setting [](#opt-services.metricbeat.modules._name_.module) to the same value.

See <https://www.elastic.co/guide/en/beats/metricbeat/current/metricbeat-modules.html>.

- services.metricbeat.package: The metricbeat package to use.
- services.metricbeat.settings: Configuration for metricbeat. See <https://www.elastic.co/guide/en/beats/metricbeat/current/configuring-howto-metricbeat.html> for supported values.

- services.microbin.dataDir: Default data folder for MicroBin.
- services.microbin.enable: Whether to enable MicroBin is a super tiny, feature rich, configurable paste bin web application.
- services.microbin.package: The microbin package to use.
- services.microbin.passwordFile: Path to file containing environment variables.
Useful for passing down secrets.
Variables that can be considered secrets are:
 - MICROBIN_BASIC_AUTH_USERNAME
 - MICROBIN_BASIC_AUTH_PASSWORD
 - MICROBIN_ADMIN_USERNAME
 - MICROBIN_ADMIN_PASSWORD
 - MICROBIN_UPLOADER_PASSWORD

- services.microbin.settings: Additional configuration for MicroBin, see
<https://microbin.eu/docs/installation-and-configuration/configuration/>
for supported values.

For secrets use passwordFile option instead.

- services.microsocks.authOnce: If true, once a specific ip address authed successfully with user/pass,
it is added to a whitelist and may use the proxy without auth.

- services.microsocks.authPasswordFile: Path to a file containing the password for authentication.
- services.microsocks.authUsername: Optional username to use for authentication.
- services.microsocks.disableLogging: If true, microsocks will not log any messages to stdout/stderr.
- services.microsocks.enable: Whether to enable Tiny, portable SOCKS5 server with very moderate resource usage.
- services.microsocks.execWrapper: An optional command to prepend to the microsocks command (such as proxychains, or a VPN exclude command).

- services.microsocks.group: Group microsocks runs as.
- services.microsocks.ip: IP on which microsocks should listen. Defaults to 127.0.0.1 for
security reasons.

- services.microsocks.outgoingBindIp: Specifies which ip outgoing connections are bound to
- services.microsocks.package: The microsocks package to use.
- services.microsocks.port: Port on which microsocks should listen.
- services.microsocks.user: User microsocks runs as.
- services.mighttpd2.config: Verbatim config file to use
(see <https://kazu-yamamoto.github.io/mighttpd2/config.html>)

- services.mighttpd2.cores: How many cores to use.
If null it will be determined automatically

- services.mighttpd2.enable: Whether to enable Mighttpd2 web server.
- services.mighttpd2.routing: Verbatim routing file to use
(see <https://kazu-yamamoto.github.io/mighttpd2/config.html>)

- services.mihomo.configFile: Configuration file to use.
- services.mihomo.enable: Whether to enable Mihomo, A rule-based proxy in Go.
- services.mihomo.extraOpts: Extra command line options to use.
- services.mihomo.package: The mihomo package to use.
- services.mihomo.tunMode: Whether to enable necessary permission for Mihomo's systemd service for TUN mode to function properly.

Keep in mind, that you still need to enable TUN mode manually in Mihomo's configuration
.
- services.mihomo.webui: Local web interface to use.

You can also use the following website:
- metacubexd:
  - <https://d.metacubex.one>
  - <https://metacubex.github.io/metacubexd>
  - <https://metacubexd.pages.dev>
- yacd:
  - <https://yacd.haishan.me>
- clash-dashboard:
  - <https://clash.razord.top>

- services.mimir.configFile: Specify a configuration file that Mimir should use.

- services.mimir.configuration: Specify the configuration for Mimir in Nix.

- services.mimir.enable: Whether to enable mimir.
- services.mimir.extraFlags: Specify a list of additional command line flags,
which get escaped and are then passed to Mimir.

- services.mimir.package: The mimir package to use.
- services.minecraft-server.dataDir: Directory to store Minecraft database and other state/data files.

- services.minecraft-server.declarative: Whether to use a declarative Minecraft server configuration.
Only if set to `true`, the options
{option}`services.minecraft-server.whitelist` and
{option}`services.minecraft-server.serverProperties` will be
applied.

- services.minecraft-server.enable: If enabled, start a Minecraft Server. The server
data will be loaded from and saved to
{option}`services.minecraft-server.dataDir`.

- services.minecraft-server.eula: Whether you agree to [Mojangs EULA](https://www.minecraft.net/eula).
This option must be set to `true` to run Minecraft server.

- services.minecraft-server.jvmOpts: JVM options for the Minecraft server.
- services.minecraft-server.openFirewall: Whether to open ports in the firewall for the server.

- services.minecraft-server.package: The minecraft-server package to use.
- services.minecraft-server.serverProperties: Minecraft server properties for the server.properties file. Only has
an effect when {option}`services.minecraft-server.declarative`
is set to `true`. See
<https://minecraft.wiki/w/Server.properties#Java_Edition>
for documentation on these values.

- services.minecraft-server.whitelist: Whitelisted players, only has an effect when
{option}`services.minecraft-server.declarative` is
`true` and the whitelist is enabled
via {option}`services.minecraft-server.serverProperties` by
setting `white-list` to `true`.
This is a mapping from Minecraft usernames to UUIDs.
You can use <https://mcuuid.net/> to get a
Minecraft UUID for a username.

- services.minetest-server.config: Settings to add to the minetest config file.

This option is ignored if `configPath` is set.

- services.minetest-server.configPath: Path to the config to use.

If set to null, the config of the running user will be used:
`~/.minetest/minetest.conf`.

- services.minetest-server.enable: If enabled, starts a Minetest Server.
- services.minetest-server.extraArgs: Additional command line flags to pass to the minetest executable.

- services.minetest-server.gameId: Id of the game to use. To list available games run
`minetestserver --gameid list`.

If only one game exists, this option can be null.

- services.minetest-server.logPath: Path to logfile for logging.

If set to null, logging will be output to stdout which means
all output will be caught by systemd.

- services.minetest-server.port: Port number to bind to.

If set to null, the default 30000 will be used.

- services.minetest-server.world: Name of the world to use. To list available worlds run
`minetestserver --world list`.

If only one world exists, this option can be null.

- services.mingetty: Alias of {option}`services.getty`.
- services.minidlna.enable: Whether to enable MiniDLNA, a simple DLNA server. Consider adding `openFirewall = true` into your config.
- services.minidlna.openFirewall: Whether to enable opening HTTP (TCP) and SSDP (UDP) ports in the firewall.
- services.minidlna.package: The minidlna package to use.
- services.minidlna.settings: Configuration for {manpage}`minidlna.conf(5)`.
- services.miniflux.adminCredentialsFile: File containing the ADMIN_USERNAME and
ADMIN_PASSWORD (length >= 6) in the format of
an EnvironmentFile=, as described by {manpage}`systemd.exec(5)`.

- services.miniflux.config: Configuration for Miniflux, refer to
<https://miniflux.app/docs/configuration.html>
for documentation on the supported values.

- services.miniflux.createDatabaseLocally: Whether a PostgreSQL database should be automatically created and
configured on the local host. If set to `false`, you need provision a
database yourself and make sure to create the hstore extension in it.

- services.miniflux.enable: Whether to enable miniflux.
- services.miniflux.package: The miniflux package to use.
- services.minio.accessKey: Access key of 5 to 20 characters in length that clients use to access the server.
This overrides the access key that is generated by minio on first startup and stored inside the
`configDir` directory.

- services.minio.browser: Enable or disable access to web UI.
- services.minio.certificatesDir: The directory where TLS certificates are stored.
- services.minio.configDir: The config directory, for the access keys and other settings.
- services.minio.consoleAddress: IP address and port of the web UI (console).
- services.minio.dataDir: The list of data directories or nodes for storing the objects. Use one path for regular operation and the minimum of 4 endpoints for Erasure Code mode.
- services.minio.enable: Whether to enable Minio Object Storage.
- services.minio.listenAddress: IP address and port of the server.
- services.minio.package: The minio package to use.
- services.minio.region: The physical location of the server. By default it is set to us-east-1, which is same as AWS S3's and Minio's default region.

- services.minio.rootCredentialsFile: File containing the MINIO_ROOT_USER, default is "minioadmin", and
MINIO_ROOT_PASSWORD (length >= 8), default is "minioadmin"; in the format of
an EnvironmentFile=, as described by {manpage}`systemd.exec(5)`.

- services.minio.secretKey: Specify the Secret key of 8 to 40 characters in length that clients use to access the server.
This overrides the secret key that is generated by minio on first startup and stored inside the
`configDir` directory.

- services.miniupnpd.appendConfig: Configuration lines appended to the MiniUPnP config.

- services.miniupnpd.enable: Whether to enable MiniUPnP daemon.
- services.miniupnpd.externalInterface: Name of the external interface.

- services.miniupnpd.internalIPs: The IP address ranges to listen on.

- services.miniupnpd.natpmp: Whether to enable NAT-PMP support.
- services.miniupnpd.upnp: Whether to enable UPNP support.

- services.mirakurun.allowSmartCardAccess: Install polkit rules to allow Mirakurun to access smart card readers
which is commonly used along with tuner devices.

- services.mirakurun.channelSettings: Options which are added to channels.yml. If none is specified, it
will automatically be generated at runtime.

Documentation:
<https://github.com/Chinachu/Mirakurun/blob/master/doc/Configuration.md>

- services.mirakurun.enable: Whether to enable the Mirakurun DVR Tuner Server.
- services.mirakurun.openFirewall: Open ports in the firewall for Mirakurun.

::: {.warning}
Exposing Mirakurun to the open internet is generally advised
against. Only use it inside a trusted local network, or
consider putting it behind a VPN if you want remote access.
:::

- services.mirakurun.port: Port to listen on. If `null`, it won't listen on
any port.

- services.mirakurun.serverSettings: Options for server.yml.

Documentation:
<https://github.com/Chinachu/Mirakurun/blob/master/doc/Configuration.md>

- services.mirakurun.tunerSettings: Options which are added to tuners.yml. If none is specified, it will
automatically be generated at runtime.

Documentation:
<https://github.com/Chinachu/Mirakurun/blob/master/doc/Configuration.md>

- services.mirakurun.unixSocket: Path to unix socket to listen on. If `null`, it
won't listen on any unix sockets.

- services.miredo.bindAddress: Depending on the local firewall/NAT rules, you might need to force
Miredo to use a fixed UDP port and or IPv4 address.

- services.miredo.bindPort: Depending on the local firewall/NAT rules, you might need to force
Miredo to use a fixed UDP port and or IPv4 address.

- services.miredo.enable: Whether to enable the Miredo IPv6 tunneling service.
- services.miredo.interfaceName: Name of the network tunneling interface.

- services.miredo.package: The miredo package to use.
- services.miredo.serverAddress: The hostname or primary IPv4 address of the Teredo server.
This setting is required if Miredo runs as a Teredo client.
"teredo.remlab.net" is an experimental service for testing only.
Please use another server for production and/or large scale deployments.

- services.misc.nzbget.configFile
- services.misc.nzbget.dataDir
- services.misc.nzbget.openFirewall
- services.misskey.database.createLocally: Create the PostgreSQL database locally. Sets `services.misskey.settings.db.{db,host,port,user,pass}`.
- services.misskey.database.passwordFile: The path to a file containing the database password. Sets `services.misskey.settings.db.pass`.
- services.misskey.enable: Whether to enable misskey.
- services.misskey.meilisearch.createLocally: Create and use a local Meilisearch instance. Sets `services.misskey.settings.meilisearch.{host,port,ssl}`.
- services.misskey.meilisearch.keyFile: The path to a file containing the Meilisearch API key. Sets `services.misskey.settings.meilisearch.apiKey`.
- services.misskey.package: The misskey package to use.
- services.misskey.redis.createLocally: Create and use a local Redis instance. Sets `services.misskey.settings.redis.host`.
- services.misskey.redis.passwordFile: The path to a file containing the Redis password. Sets `services.misskey.settings.redis.pass`.
- services.misskey.reverseProxy.enable: Whether to enable a HTTP reverse proxy for Misskey.
- services.misskey.reverseProxy.host: The fully qualified domain name to bind to. Sets `services.misskey.settings.url`.

This is required when using `services.misskey.reverseProxy.enable = true`.

- services.misskey.reverseProxy.ssl: Whether to enable SSL for the reverse proxy. Sets `services.misskey.settings.url`.

This is required when using `services.misskey.reverseProxy.enable = true`.

- services.misskey.reverseProxy.webserver: The webserver to use as the reverse proxy.
- services.misskey.settings: Configuration for Misskey, see
[`example.yml`](https://github.com/misskey-dev/misskey/blob/develop/.config/example.yml)
for all supported options.

- services.mjolnir.accessTokenFile: File containing the matrix access token for the `mjolnir` user.

- services.mjolnir.dataPath: The directory the bot should store various bits of information in.

- services.mjolnir.enable: Whether to enable Mjolnir, a moderation tool for Matrix.
- services.mjolnir.homeserverUrl: Where the homeserver is located (client-server URL).

If `pantalaimon.enable` is `true`, this option will become the homeserver to which `pantalaimon` connects.
The listen address of `pantalaimon` will then become the `homeserverUrl` of `mjolnir`.

- services.mjolnir.managementRoom: The room ID where people can use the bot. The bot has no access controls, so
anyone in this room can use the bot - secure your room!
This should be a room alias or room ID - not a matrix.to URL.
Note: `mjolnir` is fairly verbose - expect a lot of messages from it.

- services.mjolnir.pantalaimon: `pantalaimon` options (enables E2E Encryption support).

This will create a `pantalaimon` instance with the name "mjolnir".

- services.mjolnir.protectedRooms: A list of rooms to protect (matrix.to URLs).

- services.mjolnir.settings: Additional settings (see [mjolnir default config](https://github.com/matrix-org/mjolnir/blob/main/config/default.yaml) for available settings). These settings will override settings made by the module config.

- services.mjpg-streamer.enable: Whether to enable mjpg-streamer webcam streamer.
- services.mjpg-streamer.group: mjpg-streamer group name.
- services.mjpg-streamer.inputPlugin: Input plugin. See plugins documentation for more information.

- services.mjpg-streamer.outputPlugin: Output plugin. `@www@` is substituted for default mjpg-streamer www directory.
See plugins documentation for more information.

- services.mjpg-streamer.user: mjpg-streamer user name.
- services.mlmmj.enable: Enable mlmmj
- services.mlmmj.group: mailinglist local group
- services.mlmmj.listDomain: Set the mailing list domain
- services.mlmmj.mailLists: The collection of hosted maillists
- services.mlmmj.maintInterval: Time interval between mlmmj-maintd runs, see
{manpage}`systemd.time(7)` for format information.

- services.mlmmj.user: mailinglist local user
- services.mmsd.enable: Whether to enable Multimedia Messaging Service Daemon.
- services.mmsd.extraArgs: Extra arguments passed to `mmsd-tng`
- services.mobilizon.enable: Whether to enable Mobilizon federated organization and mobilization platform.
- services.mobilizon.nginx.enable: Whether an Nginx virtual host should be
set up to serve Mobilizon.

- services.mobilizon.package: The mobilizon package to use.
- services.mobilizon.settings: Mobilizon Elixir documentation, see
<https://docs.joinmobilizon.org/administration/configure/reference/>
for supported values.

- services.moinmoin
- services.molly-brown.certPath: Path to TLS certificate. An ACME certificate and key may be
shared with an HTTP server, but only if molly-brown has
permissions allowing it to read such keys.

As an example:
```
systemd.services.molly-brown.serviceConfig.SupplementaryGroups =
  [ config.security.acme.certs."example.com".group ];
```

- services.molly-brown.docBase: Base directory for Gemini content.
- services.molly-brown.enable: Whether to enable Molly-Brown Gemini server.
- services.molly-brown.hostName: The hostname to respond to requests for. Requests for URLs with
other hosts will result in a status 53 (PROXY REQUEST REFUSED)
response.

- services.molly-brown.keyPath: Path to TLS key. See {option}`CertPath`.
- services.molly-brown.port: TCP port for molly-brown to bind to.

- services.molly-brown.settings: molly-brown configuration. Refer to
<https://tildegit.org/solderpunk/molly-brown/src/branch/master/example.conf>
for details on supported values.

- services.mollysocket.enable: Whether to enable [MollySocket](https://github.com/mollyim/mollysocket) for getting Signal
notifications via UnifiedPush
.
- services.mollysocket.environmentFile: Environment file (see {manpage}`systemd.exec(5)` "EnvironmentFile="
section for the syntax) passed to the service. This option can be
used to safely include secrets in the configuration.

- services.mollysocket.logLevel: Set the {env}`RUST_LOG` environment variable
- services.mollysocket.settings: Configuration for MollySocket. Available options are listed
[here](https://github.com/mollyim/mollysocket#configuration).

- services.monado.defaultRuntime: Whether to enable Monado as the default OpenXR runtime on the system.

Note that applications can bypass this option by setting an active
runtime in a writable XDG_CONFIG_DIRS location like `~/.config`.

- services.monado.enable: Whether to enable Monado user service.
- services.monado.forceDefaultRuntime: Whether to ensure that Monado is the active runtime set for the current
user.

This replaces the file `XDG_CONFIG_HOME/openxr/1/active_runtime.json`
when starting the service.

- services.monado.highPriority: Whether to enable high priority capability for monado-service.
- services.monado.package: The monado package to use.
- services.monero.banlist: Path to a text file containing IPs to block.
Useful to prevent DDoS/deanonymization attacks.

<https://github.com/monero-project/meta/issues/1124>

- services.monero.dataDir: The directory where Monero stores its data files.

- services.monero.enable: Whether to enable Monero node daemon.
- services.monero.environmentFile: Path to an EnvironmentFile for the monero service as defined in {manpage}`systemd.exec(5)`.

Secrets may be passed to the service by specifying placeholder variables in the Nix config
and setting values in the environment file.

Example:

```
# In environment file:
MINING_ADDRESS=888tNkZrPN6JsEgekjMnABU4TBzc2Dt29EPAvkRxbANsAnjyPbb3iQ1YBRk1UXcdRsiKc9dhwMVgN5S9cQUiyoogDavup3H
```

```
# Service config
services.monero.mining.address = "$MINING_ADDRESS";
```

- services.monero.exclusiveNodes: List of peer IP addresses to connect to *only*.
If given the other peer options will be ignored.

- services.monero.extraConfig: Extra lines to be added verbatim to monerod configuration.

- services.monero.extraNodes: List of additional peer IP addresses to add to the local list.

- services.monero.limits.download: Limit of the download rate in kB/s.
Set to `-1` to leave unlimited.

- services.monero.limits.syncSize: Maximum number of blocks to sync at once.
Set to `0` for adaptive.

- services.monero.limits.threads: Maximum number of threads used for a parallel job.
Set to `0` to leave unlimited.

- services.monero.limits.upload: Limit of the upload rate in kB/s.
Set to `-1` to leave unlimited.

- services.monero.mining.address: Monero address where to send mining rewards.

- services.monero.mining.enable: Whether to mine monero.

- services.monero.mining.threads: Number of threads used for mining.
Set to `0` to use all available.

- services.monero.priorityNodes: List of peer IP addresses to connect to and
attempt to keep the connection open.

- services.monero.prune: Whether to prune the blockchain.
<https://www.getmonero.org/resources/moneropedia/pruning.html>

- services.monero.rpc.address: IP address the RPC server will bind to.

- services.monero.rpc.password: Password for RPC connections.

- services.monero.rpc.port: Port the RPC server will bind to.

- services.monero.rpc.restricted: Whether to restrict RPC to view only commands.

- services.monero.rpc.user: User name for RPC connections.

- services.monetdb.dataDir: Data directory for the dbfarm.
- services.monetdb.enable: Whether to enable the MonetDB database server.
- services.monetdb.group: Group under which MonetDB runs.
- services.monetdb.listenAddress: Address to listen on.
- services.monetdb.package: The monetdb package to use.
- services.monetdb.port: Port to listen on.
- services.monetdb.user: User account under which MonetDB runs.
- services.mongodb.bind_ip: IP to bind to
- services.mongodb.dbpath: Location where MongoDB stores its files
- services.mongodb.enable: Whether to enable the MongoDB server.
- services.mongodb.enableAuth: Enable client authentication. Creates a default superuser with username root!
- services.mongodb.extraConfig: MongoDB extra configuration in YAML format
- services.mongodb.initialRootPassword
- services.mongodb.initialRootPasswordFile: Path to the file containing the password for the root user if auth is enabled.
- services.mongodb.initialScript: A file containing MongoDB statements to execute on first startup.

- services.mongodb.mongoshPackage: The mongosh package to use.
- services.mongodb.package: The mongodb package to use.
- services.mongodb.pidFile: Location of MongoDB pid file
- services.mongodb.quiet: quieter output
- services.mongodb.replSetName: If this instance is part of a replica set, set its name here.
Otherwise, leave empty to run as single node.

- services.mongodb.user: User account under which MongoDB runs
- services.monica.appKeyFile: A file containing the Laravel APP_KEY - a 32 character long,
base64 encoded key used for encryption where needed. Can be
generated with <code>head -c 32 /dev/urandom | base64</code>.

- services.monica.appURL: The root URL that you want to host monica on. All URLs in monica will be generated using this value.
If you change this in the future you may need to run a command to update stored URLs in the database.
Command example: <code>php artisan monica:update-url https://old.example.com https://new.example.com</code>

- services.monica.config: monica configuration options to set in the
<filename>.env</filename> file.

Refer to <link xlink:href="https://github.com/monicahq/monica"/>
for details on supported values.

Settings containing secret data should be set to an attribute
set containing the attribute <literal>_secret</literal> - a
string pointing to a file containing the value the option
should be set to. See the example to get a better picture of
this: in the resulting <filename>.env</filename> file, the
<literal>OIDC_CLIENT_SECRET</literal> key will be set to the
contents of the <filename>/run/keys/oidc_secret</filename>
file.

- services.monica.dataDir: monica data directory
- services.monica.database.createLocally: Create the database and database user locally.
- services.monica.database.host: Database host address.
- services.monica.database.name: Database name.
- services.monica.database.passwordFile: A file containing the password corresponding to
<option>database.user</option>.

- services.monica.database.port: Database host port.
- services.monica.database.user: Database username.
- services.monica.enable: Whether to enable monica.
- services.monica.group: Group monica runs as.
- services.monica.hostname: The hostname to serve monica on.

- services.monica.mail.driver: Mail driver to use.
- services.monica.mail.encryption: SMTP encryption mechanism to use.
- services.monica.mail.from: Mail "from" email.
- services.monica.mail.fromName: Mail "from" name.
- services.monica.mail.host: Mail host address.
- services.monica.mail.passwordFile: A file containing the password corresponding to
<option>mail.user</option>.

- services.monica.mail.port: Mail host port.
- services.monica.mail.user: Mail username.
- services.monica.maxUploadSize: The maximum size for uploads (e.g. images).
- services.monica.nginx: With this option, you can customize the nginx virtualHost settings.

- services.monica.phpPackage: The php83 package to use.
- services.monica.poolConfig: Options for the monica PHP pool. See the documentation on <literal>php-fpm.conf</literal>
for details on configuration directives.

- services.monica.user: User monica runs as.
- services.monit.config: monitrc content
- services.monit.enable: Whether to enable Monit.
- services.moodle.database
- services.moodle.enable: Whether to enable Moodle web application.
- services.moodle.extraConfig: Any additional text to be appended to the config.php
configuration file. This is a PHP script. For configuration
details, see <https://docs.moodle.org/37/en/Configuration_file>.

- services.moodle.initialPassword: Specifies the initial password for the admin, i.e. the password assigned if the user does not already exist.
The password specified here is world-readable in the Nix store, so it should be changed promptly.

- services.moodle.package: The moodle package to use.
- services.moodle.poolConfig: Options for the Moodle PHP pool. See the documentation on `php-fpm.conf`
for details on configuration directives.

- services.moodle.virtualHost: Apache configuration can be done by adapting {option}`services.httpd.virtualHosts`.
See [](#opt-services.httpd.virtualHosts) for further information.

- services.moonraker.address: The IP or host to listen on.
- services.moonraker.allowSystemControl: Whether to allow Moonraker to perform system-level operations.

Moonraker exposes APIs to perform system-level operations, such as
reboot, shutdown, and management of systemd units. See the
[documentation](https://moonraker.readthedocs.io/en/latest/web_api/#machine-commands)
for details on what clients are able to do.

- services.moonraker.analysis.enable: Whether to enable Runtime analysis with klipper-estimator.
- services.moonraker.configDir: Deprecated directory containing client-writable configuration files.

Clients will be able to edit files in this directory via the API. This directory must be writable.

- services.moonraker.enable: Whether to enable Moonraker, an API web server for Klipper.
- services.moonraker.group: Group account under which Moonraker runs.
- services.moonraker.klipperSocket: Path to Klipper's API socket.
- services.moonraker.package: The moonraker package to use.
- services.moonraker.port: The port to listen on.
- services.moonraker.settings: Configuration for Moonraker. See the [documentation](https://moonraker.readthedocs.io/en/latest/configuration/)
for supported values.

- services.moonraker.stateDir: The directory containing the Moonraker databases.
- services.moonraker.user: User account under which Moonraker runs.
- services.moosefs.cgiserver.enable: Whether to enable MooseFS CGI server for web interface.
Warning: The CGI server interface should be properly secured from unauthorized access,
as it provides full control over your MooseFS installation.
.
- services.moosefs.cgiserver.openFirewall: Whether to automatically open the web interface port.
- services.moosefs.cgiserver.settings: CGI server configuration options.
- services.moosefs.chunkserver.enable: Whether to enable MooseFS chunkserver daemon that stores file data.
- services.moosefs.chunkserver.hdds: Mount points used by chunkserver for data storage (see mfshdd.cfg).
- services.moosefs.chunkserver.openFirewall: Whether to automatically open required firewall ports for chunkserver service.
- services.moosefs.chunkserver.settings: Chunkserver configuration options (mfschunkserver.cfg).
- services.moosefs.client.enable: Whether to enable MooseFS client.
- services.moosefs.master.autoInit: Whether to automatically initialize the master's metadata directory on first run. Use with caution.
- services.moosefs.master.enable: Enable MooseFS master daemon.
The master server coordinates all MooseFS operations and stores metadata.

- services.moosefs.master.exports: Export definitions for MooseFS (see mfsexports.cfg).
- services.moosefs.master.openFirewall: Whether to automatically open required firewall ports for master service.
- services.moosefs.master.settings: Master configuration options (mfsmaster.cfg).
- services.moosefs.masterHost: IP or DNS name of the MooseFS master server.
- services.moosefs.metalogger.enable: Whether to enable MooseFS metalogger daemon that maintains a backup copy of the master's metadata.
- services.moosefs.metalogger.settings: Metalogger configuration options (mfsmetalogger.cfg).
- services.moosefs.runAsUser: Run daemons as moosefs user instead of root for better security.
- services.mopidy.configuration
- services.mopidy.dataDir: The directory where Mopidy stores its state.

- services.mopidy.enable: Whether to enable Mopidy, a music player daemon.
- services.mopidy.extensionPackages: Mopidy extensions that should be loaded by the service.

- services.mopidy.extraConfigFiles: Extra config file read by Mopidy when the service starts.
Later files in the list overrides earlier configuration.

- services.mopidy.settings: The configuration that Mopidy should use.
See the upstream documentation <https://docs.mopidy.com/stable/config/> for details.

- services.morty
- services.mosquitto.bridges: Bridges to build to other MQTT brokers.

- services.mosquitto.dataDir: The data directory.

- services.mosquitto.enable: Whether to enable the MQTT Mosquitto broker.
- services.mosquitto.includeDirs: Directories to be scanned for further config files to include.
Directories will processed in the order given,
`*.conf` files in the directory will be
read in case-sensitive alphabetical order.

- services.mosquitto.listeners: Listeners to configure on this broker.

- services.mosquitto.logDest: Destinations to send log messages to.

- services.mosquitto.logType: Types of messages to log.

- services.mosquitto.package: The mosquitto package to use.
- services.mosquitto.persistence: Enable persistent storage of subscriptions and messages.

- services.mosquitto.settings: Global configuration options for the mosquitto broker.

- services.movim.dataDir: State directory of the `movim` user which holds the application’s state & data.
- services.movim.database
- services.movim.debug: Debugging logs.
- services.movim.domain: Fully-qualified domain name (FQDN) for the Movim instance.
- services.movim.enable: Whether to enable a Movim instance.
- services.movim.group: Group running Movim service
- services.movim.h2o: With this option, you can customize an H2O virtual host which already
has sensible defaults for Movim. Set to `{ }` if you do not need any
customization to the virtual host. If enabled, then by default, the
{option}`serverName` is `${domain}`, If this is set to `null` (the
default), no H2O `hosts` will be configured.

- services.movim.logDir: Log directory of the `movim` user which holds the application’s logs.
- services.movim.minifyStaticFiles: Do minification on public static files which reduces the size of
assets — saving data for the server & users as well as offering a
performance improvement. This adds typing for the `minifyStaticFiles`
attribute for the Movim package which *will* override any existing
override value. The default `true` will enable minification for all
supported asset types with sane defaults.

- services.movim.nginx: With this option, you can customize an Nginx virtual host which
already has sensible defaults for Movim. Set to `{ }` if you do not
need any customization to the virtual host. If enabled, then by
default, the {option}`serverName` is `${domain}`, If this is set to
`null` (the default), no Nginx `virtualHost` will be configured.

- services.movim.package: The movim package to use.
- services.movim.phpCfg: Extra PHP INI options such as `memory_limit`, `max_execution_time`, etc.
- services.movim.phpPackage: The php package to use.
- services.movim.podConfig: Pod configuration (values from `php daemon.php config --help`).
Note that these values will now be disabled in the admin panel.

- services.movim.poolConfig: Options for Movim’s PHP-FPM pool.
- services.movim.port: Movim daemon port.
- services.movim.precompressStaticFiles: Aggressively precompress static files
- services.movim.runtimeDir: Runtime directory of the `movim` user which holds the application’s caches & temporary files.
- services.movim.secretFile: The secret file to be sourced for the .env settings.
- services.movim.settings: .env settings for Movim. Secrets should use `secretFile` option instead. `null`s will be culled.
- services.movim.user: User running Movim service
- services.movim.verbose: Verbose logs.
- services.mozillavpn.enable: Whether to enable Mozilla VPN daemon.
- services.mpd.credentials: Credentials and permissions for accessing the mpd server.

- services.mpd.dataDir: The directory where MPD stores its state, tag cache, playlists etc. If
left as the default value this directory will automatically be created
before the MPD server starts, otherwise the sysadmin is responsible for
ensuring the directory exists with appropriate ownership and permissions.

- services.mpd.dbFile: The path to MPD's database. If set to `null` the
parameter is omitted from the configuration.

- services.mpd.enable: Whether to enable MPD, the music player daemon.

- services.mpd.extraConfig: Extra directives added to to the end of MPD's configuration file,
mpd.conf. Basic configuration like file location and uid/gid
is added automatically to the beginning of the file. For available
options see {manpage}`mpd.conf(5)`.

- services.mpd.fluidsynth: If set, add fluidsynth soundfont and configure the plugin.

- services.mpd.group: Group account under which MPD runs.
- services.mpd.musicDirectory: The directory or NFS/SMB network share where MPD reads music from. If left
as the default value this directory will automatically be created before
the MPD server starts, otherwise the sysadmin is responsible for ensuring
the directory exists with appropriate ownership and permissions.

- services.mpd.network.listenAddress: The address for the daemon to listen on.
Use `any` to listen on all addresses.

- services.mpd.network.port: This setting is the TCP port that is desired for the daemon to get assigned
to.

- services.mpd.playlistDirectory: The directory where MPD stores playlists. If left as the default value
this directory will automatically be created before the MPD server starts,
otherwise the sysadmin is responsible for ensuring the directory exists
with appropriate ownership and permissions.

- services.mpd.startWhenNeeded: If set, {command}`mpd` is socket-activated; that
is, instead of having it permanently running as a daemon,
systemd will start it on the first incoming connection.

- services.mpd.user: User account under which MPD runs.
- services.mpdscribble.enable: Whether to enable mpdscribble, an MPD client which submits info about tracks being played to Last.fm (formerly AudioScrobbler).
- services.mpdscribble.endpoints: Endpoints to scrobble to.
If the endpoint is one of "jamendo", "last.fm", "libre.fm", "listenbrainz" the url is set automatically.

- services.mpdscribble.host: Host for the mpdscribble daemon to search for a mpd daemon on.

- services.mpdscribble.journalInterval: How often should mpdscribble save the journal file? [seconds]

- services.mpdscribble.passwordFile: File containing the password for the mpd daemon.
If there is a local mpd configured using {option}`services.mpd.credentials`
the default is automatically set to a matching passwordFile of the local mpd.

- services.mpdscribble.port: Port for the mpdscribble daemon to search for a mpd daemon on.

- services.mpdscribble.proxy: HTTP proxy URL.

- services.mpdscribble.verbose: Log level for the mpdscribble daemon.

- services.mptcpd.enable: Whether to enable the Multipath TCP path management daemon.
- services.mptcpd.package: The mptcpd package to use.
- services.mqtt2influxdb.enable: Whether to enable BigClown MQTT to InfluxDB bridge.
- services.mqtt2influxdb.environmentFiles: File to load as environment file. Environment variables from this file
will be interpolated into the config file using envsubst with this
syntax: `$ENVIRONMENT` or `${VARIABLE}`.
This is useful to avoid putting secrets into the nix store.

- services.mqtt2influxdb.influxdb.database: Name of the InfluxDB database.
- services.mqtt2influxdb.influxdb.host: Host where InfluxDB server is running.
- services.mqtt2influxdb.influxdb.password: Password for InfluxDB login.

It is highly suggested to use here replacement through
environmentFiles as otherwise the password is put world readable to
the store.

- services.mqtt2influxdb.influxdb.port: InfluxDB server port
- services.mqtt2influxdb.influxdb.ssl: Use SSL to connect to the InfluxDB server.
- services.mqtt2influxdb.influxdb.username: Username for InfluxDB login.
- services.mqtt2influxdb.influxdb.verify_ssl: Verify SSL certificate when connecting to the InfluxDB server.
- services.mqtt2influxdb.mqtt.cafile: Certification Authority file for MQTT
- services.mqtt2influxdb.mqtt.certfile: Certificate file for MQTT
- services.mqtt2influxdb.mqtt.host: Host where MQTT server is running.
- services.mqtt2influxdb.mqtt.keyfile: Key file for MQTT
- services.mqtt2influxdb.mqtt.password: MQTT password.

It is highly suggested to use here replacement through
environmentFiles as otherwise the password is put world readable to
the store.

- services.mqtt2influxdb.mqtt.port: MQTT server port.
- services.mqtt2influxdb.mqtt.username: Username used to connect to the MQTT server.
- services.mqtt2influxdb.package: The mqtt2influxdb package to use.
- services.mqtt2influxdb.points: Points to bridge from MQTT to InfluxDB.
- services.mstpd.enable: Whether to enable the multiple spanning tree protocol daemon.

- services.mtprotoproxy.adTag: Tag for advertising that can be obtained from @MTProxybot.

- services.mtprotoproxy.enable: Whether to enable mtprotoproxy.
- services.mtprotoproxy.extraConfig: Extra configuration options for mtprotoproxy.

- services.mtprotoproxy.port: TCP port to accept mtproto connections on.

- services.mtprotoproxy.secureOnly: Don't allow users to connect in non-secure mode (without random padding).

- services.mtprotoproxy.users: Allowed users and their secrets. A secret is a 32 characters long hex string.

- services.mtr-exporter.address: Listen address for MTR exporter.
- services.mtr-exporter.enable: Whether to enable a Prometheus exporter for MTR.
- services.mtr-exporter.extraFlags: Extra command line options to pass to MTR exporter.

- services.mtr-exporter.jobs: List of MTR jobs. Will be added to /etc/mtr-exporter.conf
- services.mtr-exporter.mtrFlags
- services.mtr-exporter.mtrPackage: The mtr package to use.
- services.mtr-exporter.package: The mtr-exporter package to use.
- services.mtr-exporter.port: Listen port for MTR exporter.
- services.mtr-exporter.target
- services.mullvad-vpn.enable: This option enables Mullvad VPN daemon.

- services.mullvad-vpn.enableExcludeWrapper: This option activates the wrapper that allows the use of mullvad-exclude.
Might have minor security impact, so consider disabling if you do not use the feature.

- services.mullvad-vpn.package: The mullvad package to use. `pkgs.mullvad` only provides the CLI tool, `pkgs.mullvad-vpn` provides both the CLI and the GUI.

- services.multipath.blacklist: This section defines which devices should be excluded from the
multipath topology discovery.

- services.multipath.blacklist_exceptions: This section defines which devices should be included in the
multipath topology discovery, despite being listed in the
blacklist section.

- services.multipath.defaults: This section defines default values for attributes which are used
whenever no values are given in the appropriate device or multipath
sections.

- services.multipath.devices: This option allows you to define arrays for use in multipath
groups.

- services.multipath.enable: Whether to enable the device mapper multipath (DM-MP) daemon.
- services.multipath.extraConfig: Lines to append to default multipath.conf
- services.multipath.extraConfigFile: Append an additional file's contents to /etc/multipath.conf
- services.multipath.overrides: This section defines values for attributes that should override the
device-specific settings for all devices.

- services.multipath.package: The multipath-tools package to use.
- services.multipath.pathGroups: This option allows you to define multipath groups as described
in http://christophe.varoqui.free.fr/usage.html.

- services.munge.enable: Whether to enable munge service.
- services.munge.password: The path to a daemon's secret key.

- services.munin-cron.enable: Enable munin-cron. Takes care of all heavy lifting to collect data from
nodes and draws graphs to html. Runs munin-update, munin-limits,
munin-graphs and munin-html in that order.

HTML output is in {file}`/var/www/munin/`, configure your
favourite webserver to serve static files.

- services.munin-cron.extraCSS: Custom styling for the HTML that munin-cron generates. This will be
appended to the CSS files used by munin-cron and will thus take
precedence over the builtin styles.

- services.munin-cron.extraGlobalConfig: {file}`munin.conf` extra global configuration.
See <https://guide.munin-monitoring.org/en/latest/reference/munin.conf.html>.
Useful to setup notifications, see
<https://guide.munin-monitoring.org/en/latest/tutorial/alert.html>

- services.munin-cron.hosts: Definitions of hosts of nodes to collect data from. Needs at least one
host for cron to succeed. See
<https://guide.munin-monitoring.org/en/latest/reference/munin.conf.html>

- services.munin-node.disabledPlugins: Munin plugins to disable, even if
`munin-node-configure --suggest` tries to enable
them. To disable a wildcard plugin, use an actual wildcard, as in
the example.

munin_stats is disabled by default as it tries to read
`/var/log/munin/munin-update.log` for timing
information, and the NixOS build of Munin does not write this file.

- services.munin-node.enable: Enable Munin Node agent. Munin node listens on 0.0.0.0 and
by default accepts connections only from 127.0.0.1 for security reasons.

See <https://guide.munin-monitoring.org/en/latest/architecture/index.html>.

- services.munin-node.extraAutoPlugins: Additional Munin plugins to autoconfigure, using
`munin-node-configure --suggest`. These should be
the actual paths to the plugin files (or directories containing them),
not just their names.

If you want to manually enable individual plugins instead, use
{option}`services.munin-node.extraPlugins`.

Note that only plugins that have the 'autoconfig' capability will do
anything if listed here, since plugins that cannot autoconfigure
won't be automatically enabled by
`munin-node-configure`.

Plugins will be copied into the Nix store, and it will attempt to
modify them to run properly by fixing hardcoded references to
`/bin`, `/usr/bin`,
`/sbin`, and `/usr/sbin`.

- services.munin-node.extraConfig: {file}`munin-node.conf` extra configuration. See
<https://guide.munin-monitoring.org/en/latest/reference/munin-node.conf.html>

- services.munin-node.extraPluginConfig: {file}`plugin-conf.d` extra plugin configuration. See
<https://guide.munin-monitoring.org/en/latest/plugin/use.html>

- services.munin-node.extraPlugins: Additional Munin plugins to activate. Keys are the name of the plugin
symlink, values are the path to the underlying plugin script. You
can use the same plugin script multiple times (e.g. for wildcard
plugins).

Note that these plugins do not participate in autoconfiguration. If
you want to autoconfigure additional plugins, use
{option}`services.munin-node.extraAutoPlugins`.

Plugins enabled in this manner take precedence over autoconfigured
plugins.

Plugins will be copied into the Nix store, and it will attempt to
modify them to run properly by fixing hardcoded references to
`/bin`, `/usr/bin`,
`/sbin`, and `/usr/sbin`.

- services.murmur.allowHtml: Allow HTML in client messages, comments, and channel
descriptions.

- services.murmur.autobanAttempts: Number of attempts a client is allowed to make in
`autobanTimeframe` seconds, before being
banned for `autobanTime`.

- services.murmur.autobanTime: The amount of time an IP ban lasts (in seconds).
- services.murmur.autobanTimeframe: Timeframe in which a client can connect without being banned
for repeated attempts (in seconds).

- services.murmur.bandwidth: Maximum bandwidth (in bits per second) that clients may send
speech at.

- services.murmur.bonjour: Whether to enable Bonjour auto-discovery, which allows clients over your LAN to automatically discover Mumble servers.
- services.murmur.clientCertRequired: Whether to enable requiring clients to authenticate via certificates.
- services.murmur.dbus: Enable D-Bus remote control. Set to the bus you want Murmur to connect to.
- services.murmur.enable: Whether to enable Mumble server.
- services.murmur.environmentFile: Environment file as defined in {manpage}`systemd.exec(5)`.

Secrets may be passed to the service without adding them to the world-readable
Nix store, by specifying placeholder variables as the option value in Nix and
setting these variables accordingly in the environment file.

```
  # snippet of murmur-related config
  services.murmur.password = "$MURMURD_PASSWORD";
```

```
  # content of the environment file
  MURMURD_PASSWORD=verysecretpassword
```

Note that this file needs to be available on the host on which
`murmur` is running.

- services.murmur.extraConfig: Extra configuration to put into murmur.ini.
- services.murmur.group: The name of an existing group to use to run the service.
If not specified, the default group will be created.

- services.murmur.hostName: Host to bind to. Defaults binding on all addresses.
- services.murmur.imgMsgLength: Max length of image messages. Set 0 for no limit.
- services.murmur.logDays: How long to store RPC logs for in the database. Set 0 to
keep logs forever, or -1 to disable DB logging.

- services.murmur.logFile
- services.murmur.logToFile: Whether to enable logging to a file instead of journald, which is stored in /var/log/murmur.
- services.murmur.openFirewall: Whether to enable opening ports in the firewall for the Mumble server.
- services.murmur.package: The murmur package to use.
- services.murmur.password: Required password to join server, if specified.
- services.murmur.port: Ports to bind to (UDP and TCP).
- services.murmur.registerHostname: DNS hostname where your server can be reached. This is only
needed if you want your server to be accessed by its
hostname and not IP - but the name *must* resolve on the
internet properly.

- services.murmur.registerName: Public server registration name, and also the name of the
Root channel. Even if you don't publicly register your
server, you probably still want to set this.

- services.murmur.registerPassword: Public server registry password, used authenticate your
server to the registry to prevent impersonation; required for
subsequent registry updates.

- services.murmur.registerUrl: URL website for your server.
- services.murmur.sendVersion: Send Murmur version in UDP response.
- services.murmur.sslCa: Path to your SSL CA certificate.
- services.murmur.sslCert: Path to your SSL certificate.
- services.murmur.sslKey: Path to your SSL key.
- services.murmur.stateDir: Directory to store data for the server.

- services.murmur.textMsgLength: Max length of text messages. Set 0 for no limit.
- services.murmur.user: The name of an existing user to use to run the service.
If not specified, the default user will be created.

- services.murmur.users: Maximum number of concurrent clients allowed.
- services.murmur.welcometext: Welcome message for connected clients.
- services.music-assistant.enable: Whether to enable Music Assistant.
- services.music-assistant.extraOptions: List of extra options to pass to the music-assistant executable.

- services.music-assistant.package: The music-assistant package to use.
- services.music-assistant.providers: List of provider names for which dependencies will be installed.

- services.mwlib
- services.mx-puppet-discord
- services.mxisd
- services.mycelium.addHostedPublicNodes: Adds the hosted peers from <https://github.com/threefoldtech/mycelium#hosted-public-nodes>.

- services.mycelium.enable: Whether to enable mycelium network.
- services.mycelium.extraArgs: Extra command-line arguments to pass to mycelium.

See `mycelium --help` for all available options.

- services.mycelium.keyFile: Optional path to a file containing the mycelium key material.
If unset, the default location (`/var/lib/mycelium/key.bin`) will be used.
If no key exist at this location, it will be generated on startup.

- services.mycelium.openFirewall: Open the firewall for mycelium
- services.mycelium.package: The mycelium package to use.
- services.mycelium.peers: List of peers to connect to, in the formats:
 - `quic://[2001:0db8::1]:9651`
 - `quic://192.0.2.1:9651`
 - `tcp://[2001:0db8::1]:9651`
 - `tcp://192.0.2.1:9651`

If addHostedPublicNodes is set to true, the hosted public nodes will also be added.

- services.mympd.enable: Whether to enable MyMPD server.
- services.mympd.extraGroups: Additional groups for the systemd service.

- services.mympd.openFirewall: Open ports needed for the functionality of the program.

- services.mympd.package: The mympd package to use.
- services.mympd.settings: Manages the configuration files declaratively. For all the configuration
options, see <https://jcorporation.github.io/myMPD/020-configuration/configuration-files>.

Each key represents the "File" column from the upstream configuration table, and the
value is the content of that file.

- services.mysql.bind
- services.mysql.configFile: Override the configuration file used by MySQL. By default,
NixOS generates one automatically from {option}`services.mysql.settings`.

- services.mysql.dataDir: The data directory for MySQL.

::: {.note}
If left as the default value of `/var/lib/mysql` this directory will automatically be created before the MySQL
server starts, otherwise you are responsible for ensuring the directory exists with appropriate ownership and permissions.
:::

- services.mysql.enable: Whether to enable MySQL server.
- services.mysql.ensureDatabases: Ensures that the specified databases exist.
This option will never delete existing databases, especially not when the value of this
option is changed. This means that databases created once through this option or
otherwise have to be removed manually.

- services.mysql.ensureUsers: Ensures that the specified users exist and have at least the ensured permissions.
The MySQL users will be identified using Unix socket authentication. This authenticates the Unix user with the
same name only, and that without the need for a password.
This option will never delete existing users or remove permissions, especially not when the value of this
option is changed. This means that users created and permissions assigned once through this option or
otherwise have to be removed manually.

- services.mysql.extraOptions
- services.mysql.galeraCluster.clusterAddress: Full Galera cluster connection string. If nodeAddresses is set, this will be auto-generated, but you can override it with a custom value. Format is typically 'gcomm://node1,node2,node3' with optional parameters.
- services.mysql.galeraCluster.clusterPassword: Optional password for securing cluster communications. If provided, it will be used in the clusterAddress for authentication between nodes.
- services.mysql.galeraCluster.enable: Whether to enable MariaDB Galera Cluster.
- services.mysql.galeraCluster.localAddress: IP address or hostname of this node that will be used for cluster communication. Must be reachable by all other nodes.
- services.mysql.galeraCluster.localName: The unique name that identifies this particular node within the cluster. Each node must have a different name.
- services.mysql.galeraCluster.name: The logical name of the Galera cluster. All nodes in the same cluster must use the same name.
- services.mysql.galeraCluster.nodeAddresses: IP addresses or hostnames of all nodes in the cluster, including this node. This is used to construct the default clusterAddress connection string.
- services.mysql.galeraCluster.package: The MariaDB Galera package that provides the shared library 'libgalera_smm.so' required for cluster functionality.
- services.mysql.galeraCluster.sstMethod: Method for the initial state transfer (wsrep_sst_method) when a node joins the cluster. Be aware that rsync needs SSH keys to be generated and authorized on all nodes!
- services.mysql.group: Group account under which MySQL runs.

::: {.note}
If left as the default value this group will automatically be created
on system activation, otherwise you are responsible for
ensuring the user exists before the MySQL service starts.
:::

- services.mysql.initialDatabases: List of database names and their initial schemas that should be used to create databases on the first startup
of MySQL. The schema attribute is optional: If not specified, an empty database is created.

- services.mysql.initialScript: A file containing SQL statements to be executed on the first startup. Can be used for granting certain permissions on the database.
- services.mysql.package: Which MySQL derivation to use. MariaDB packages are supported too.

- services.mysql.pidDir
- services.mysql.port
- services.mysql.replication.masterHost: Hostname of the MySQL master server.
- services.mysql.replication.masterPassword: Password of the MySQL replication user.
- services.mysql.replication.masterPort: Port number on which the MySQL master server runs.
- services.mysql.replication.masterUser: Username of the MySQL replication user.
- services.mysql.replication.role: Role of the MySQL server instance.
- services.mysql.replication.serverId: Id of the MySQL server instance. This number must be unique for each instance.
- services.mysql.replication.slaveHost: Hostname of the MySQL slave server.
- services.mysql.rootPassword
- services.mysql.settings: MySQL configuration. Refer to
<https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html>,
<https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html>,
and <https://mariadb.com/kb/en/server-system-variables/>
for details on supported values.

::: {.note}
MySQL configuration options such as `--quick` should be treated as
boolean options and provided values such as `true`, `false`,
`1`, or `0`. See the provided example below.
:::

- services.mysql.user: User account under which MySQL runs.

::: {.note}
If left as the default value this user will automatically be created
on system activation, otherwise you are responsible for
ensuring the user exists before the MySQL service starts.
:::

- services.mysqlBackup.calendar: Configured when to run the backup service systemd unit (DayOfWeek Year-Month-Day Hour:Minute:Second).

- services.mysqlBackup.compressionAlg: Compression algorithm to use for database dumps.

- services.mysqlBackup.compressionLevel: Compression level to use for gzip, xz or zstd.
- For gzip: 1-9
- For xz: 0-9
- For zstd: 1-19

:::{.note}
If compression level is also specified in gzipOptions, the gzipOptions value will be overwritten
:::

- services.mysqlBackup.databases: List of database names to dump.

- services.mysqlBackup.enable: Whether to enable MySQL backups.
- services.mysqlBackup.gzipOptions: Command line options to use when invoking `gzip`.
Only used when compression is set to "gzip".
If compression level is specified both here and in compressionLevel, the compressionLevel value will take precedence.

- services.mysqlBackup.location: Location to put the compressed MySQL database dumps.

- services.mysqlBackup.singleTransaction: Whether to create database dump in a single transaction.
Can be either a boolean for all databases or a list of database names.

- services.mysqlBackup.user: User to be used to perform backup.

- services.n8n.enable: Whether to enable n8n server.
- services.n8n.openFirewall: Open ports in the firewall for the n8n web interface.
- services.n8n.settings: Configuration for n8n, see <https://docs.n8n.io/hosting/environment-variables/configuration-methods/>
for supported values.

- services.n8n.webhookUrl: WEBHOOK_URL for n8n, in case we're running behind a reverse proxy.
This cannot be set through configuration and must reside in an environment variable.

- services.nagios.cgiConfigFile: Derivation for the configuration file of Nagios CGI scripts
that can be used in web servers for running the Nagios web interface.

- services.nagios.enable: Whether to enable [Nagios](https://www.nagios.org/) to monitor your system or network.
- services.nagios.enableWebInterface: Whether to enable the Nagios web interface.  You should also
enable Apache ({option}`services.httpd.enable`).

- services.nagios.extraConfig: Configuration to add to /etc/nagios.cfg
- services.nagios.mainConfigFile: If non-null, overrides the main configuration file of Nagios.

- services.nagios.objectDefs: A list of Nagios object configuration files that must define
the hosts, host groups, services and contacts for the
network that you want Nagios to monitor.

- services.nagios.plugins: Packages to be added to the Nagios {env}`PATH`.
Typically used to add plugins, but can be anything.

- services.nagios.urlPath
- services.nagios.validateConfig: if true, the syntax of the nagios configuration file is checked at build time
- services.nagios.virtualHost: Apache configuration can be done by adapting {option}`services.httpd.virtualHosts`.
See [](#opt-services.httpd.virtualHosts) for further information.

- services.namecoind.enable: Whether to enable namecoind, Namecoin client.
- services.namecoind.extraNodes: List of additional peer IP addresses to connect to.

- services.namecoind.generate: Whether to generate (mine) Namecoins.

- services.namecoind.rpc.address: IP address the RPC server will bind to.

- services.namecoind.rpc.allowFrom: List of IP address ranges allowed to use the RPC API.
Wiledcards (*) can be user to specify a range.

- services.namecoind.rpc.certificate: Certificate file for securing RPC connections.

- services.namecoind.rpc.key: Key file for securing RPC connections.

- services.namecoind.rpc.password: Password for RPC connections.

- services.namecoind.rpc.port: Port the RPC server will bind to.

- services.namecoind.rpc.user: User name for RPC connections.

- services.namecoind.trustedNodes: List of the only peer IP addresses to connect to. If specified
no other connection will be made.

- services.namecoind.wallet: Wallet file. The ownership of the file has to be
namecoin:namecoin, and the permissions must be 0640.

- services.nar-serve.cacheURL: Binary cache URL to connect to.

The URL format is compatible with the nix remote url style, such as:
- http://, https:// for binary caches via HTTP or HTTPS
- s3:// for binary caches stored in Amazon S3
- gs:// for binary caches stored in Google Cloud Storage

- services.nar-serve.domain: When set, enables the feature of serving <nar-hash>.<domain>
on top of <domain>/nix/store/<nar-hash>-<pname>.

Useful to preview static websites where paths are absolute.

- services.nar-serve.enable: Whether to enable serving NAR file contents via HTTP.
- services.nar-serve.package: The nar-serve package to use.
- services.nar-serve.port: Port number where nar-serve will listen on.

- services.nats.dataDir: The NATS data directory. Only used if JetStream is enabled, for
storing stream metadata and messages.

If left as the default value this directory will automatically be
created before the NATS server starts, otherwise the sysadmin is
responsible for ensuring the directory exists with appropriate
ownership and permissions.

- services.nats.enable: Whether to enable NATS messaging system.
- services.nats.group: Group under which NATS runs.
- services.nats.jetstream: Whether to enable JetStream.
- services.nats.port: Port on which to listen.

- services.nats.serverName: Name of the NATS server, must be unique if clustered.

- services.nats.settings: Declarative NATS configuration. See the
[
NATS documentation](https://docs.nats.io/nats-server/configuration) for a list of options.

- services.nats.user: User account under which NATS runs.
- services.nats.validateConfig: If true, validate nats config at build time. When the config can't
be checked during build time, for example when it includes other
files, disable this option.

- services.navidrome.enable: Whether to enable Navidrome music server.
- services.navidrome.environmentFile: Environment file, used to set any secret ND_* environment variables.
- services.navidrome.group: Group under which Navidrome runs.
- services.navidrome.openFirewall: Whether to open the TCP port in the firewall
- services.navidrome.package: The navidrome package to use.
- services.navidrome.settings: Configuration for Navidrome, see <https://www.navidrome.org/docs/usage/configuration-options/> for supported values.
- services.navidrome.user: User under which Navidrome runs.
- services.nbd.server.enable: Whether to enable the Network Block Device (nbd) server.
- services.nbd.server.exports: Files or block devices to make available over the network.
- services.nbd.server.extraOptions: Extra options for the server. See
{manpage}`nbd-server(5)`.

- services.nbd.server.listenAddress: Address to listen on. If not specified, the server will listen on all interfaces.
- services.nbd.server.listenPort: Port to listen on. The port is NOT automatically opened in the firewall.
- services.ncdns.address: The IP address the ncdns resolver will bind to.  Leave this unchanged
if you do not wish to directly expose the resolver.

- services.ncdns.dnssec.enable: Whether to enable DNSSEC support in ncdns. This will generate KSK and ZSK keypairs
(unless provided via the options
{option}`services.ncdns.dnssec.publicKey`,
{option}`services.ncdns.dnssec.privateKey` etc.) and add a trust
anchor to recursive resolvers
.
- services.ncdns.dnssec.keys.private: Path to the file containing the KSK private key.

- services.ncdns.dnssec.keys.public: Path to the file containing the KSK public key.
The key can be generated using the `dnssec-keygen`
command, provided by the package `bind` as follows:
```
$ dnssec-keygen -a RSASHA256 -3 -b 2048 -f KSK bit
```

- services.ncdns.dnssec.keys.zonePrivate: Path to the file containing the ZSK private key.

- services.ncdns.dnssec.keys.zonePublic: Path to the file containing the ZSK public key.
The key can be generated using the `dnssec-keygen`
command, provided by the package `bind` as follows:
```
$ dnssec-keygen -a RSASHA256 -3 -b 2048 bit
```

- services.ncdns.enable: Whether to enable ncdns, a Go daemon to bridge Namecoin to DNS.
To resolve .bit domains set `services.namecoind.enable = true;`
and an RPC username/password
.
- services.ncdns.identity.address: The IP address the hostname specified in
{option}`services.ncdns.identity.hostname` should resolve to.
If you are only using ncdns locally you can ignore this.

- services.ncdns.identity.hostmaster: An email address for the SOA record at the bit zone.
If you are only using ncdns locally you can ignore this.

- services.ncdns.identity.hostname: The hostname of this ncdns instance, which defaults to the machine
hostname. If specified, ncdns lists the hostname as an NS record at
the zone apex:
```
bit. IN NS ns1.example.com.
```
If unset ncdns will generate an internal pseudo-hostname under the
zone, which will resolve to the value of
{option}`services.ncdns.identity.address`.
If you are only using ncdns locally you can ignore this.

- services.ncdns.port: The port the ncdns resolver will bind to.

- services.ncdns.settings: ncdns settings. Use this option to configure ncds
settings not exposed in a NixOS option or to bypass one.
See the example ncdns.conf file at <https://github.com/namecoin/ncdns/blob/master/_doc/ncdns.conf.example>
for the available options.

- services.ncps.cache.allowDeleteVerb: Whether to enable Whether to allow the DELETE verb to delete narinfo and nar files from
the cache.
.
- services.ncps.cache.allowPutVerb: Whether to enable Whether to allow the PUT verb to push narinfo and nar files directly
to the cache.
.
- services.ncps.cache.dataPath: The local directory for storing configuration and cached store paths

- services.ncps.cache.databaseURL: The URL of the database (currently only SQLite is supported)

- services.ncps.cache.hostName: The hostname of the cache server. **This is used to generate the
private key used for signing store paths (.narinfo)**

- services.ncps.cache.lru.schedule: The cron spec for cleaning the store to keep it under
config.ncps.cache.maxSize. Refer to
https://pkg.go.dev/github.com/robfig/cron/v3#hdr-Usage for
documentation.

- services.ncps.cache.lru.scheduleTimeZone: The name of the timezone to use for the cron schedule. See
<https://en.wikipedia.org/wiki/List_of_tz_database_time_zones>
for a comprehensive list of possible values for this setting.

- services.ncps.cache.maxSize: The maximum size of the store. It can be given with units such as
5K, 10G etc. Supported units: B, K, M, G, T.

- services.ncps.cache.secretKeyPath: The path to load the secretKey for signing narinfos. Leave this
empty to automatically generate a private/public key.

- services.ncps.cache.tempPath: The path to the temporary directory that is used by the cache to download NAR files

- services.ncps.dbmatePackage: The dbmate package to use.
- services.ncps.enable: Whether to enable ncps: Nix binary cache proxy service implemented in Go.
- services.ncps.logLevel: Set the level for logging. Refer to
<https://pkg.go.dev/github.com/rs/zerolog#readme-leveled-logging> for
more information.

- services.ncps.netrcFile: The path to netrc file for upstream authentication.
When unspecified ncps will look for ``$HOME/.netrc`.

- services.ncps.openTelemetry.enable: Whether to enable Enable OpenTelemetry logs, metrics, and tracing.
- services.ncps.openTelemetry.grpcURL: Configure OpenTelemetry gRPC URL. Missing or "https" scheme enables
secure gRPC, "insecure" otherwise. Omit to emit telemetry to
stdout.

- services.ncps.package: The ncps package to use.
- services.ncps.prometheus.enable: Whether to enable Enable Prometheus metrics endpoint at /metrics.
- services.ncps.server.addr: The address and port the server listens on.

- services.ncps.upstream.caches: A list of URLs of upstream binary caches.

- services.ncps.upstream.publicKeys: A list of public keys of upstream caches in the format
`host[-[0-9]*]:public-key`. This flag is used to verify the
signatures of store paths downloaded from upstream caches.

- services.ndppd.configFile: Path to configuration file.
- services.ndppd.enable: Whether to enable daemon that proxies NDP (Neighbor Discovery Protocol) messages between interfaces.
- services.ndppd.interface: Interface which is on link-level with router.
(Legacy option, use services.ndppd.proxies.\<interface\>.rules.\<network\> instead)

- services.ndppd.network: Network that we proxy.
(Legacy option, use services.ndppd.proxies.\<interface\>.rules.\<network\> instead)

- services.ndppd.proxies: This sets up a listener, that will listen for any Neighbor Solicitation
messages, and respond to them according to a set of rules.

- services.ndppd.routeTTL: This tells 'ndppd' how often to reload the route file /proc/net/ipv6_route,
in milliseconds.

- services.neard.enable: Whether to enable neard, an NFC daemon.
- services.neard.settings: Neard INI-style configuration file as a Nix attribute set.

See the upstream [configuration file](https://github.com/linux-nfc/neard/blob/master/src/main.conf).

- services.nebula.networks: Nebula network definitions.
- services.neo4j.bolt.advertisedAddress: Neo4j advertised address for BOLT traffic. The advertised address is
expressed in the format `<ip-address>:<port-number>`.

- services.neo4j.bolt.enable: Enable the BOLT connector for Neo4j. Setting this option to
`false` will stop Neo4j from listening for incoming
connections on the BOLT port (7687 by default).

- services.neo4j.bolt.listenAddress: Neo4j listen address for BOLT traffic. The listen address is
expressed in the format `<ip-address>:<port-number>`.

- services.neo4j.bolt.sslPolicy: Neo4j SSL policy for BOLT traffic.

The legacy policy is a special policy which is not defined in
the policy configuration section, but rather derives from
{option}`directories.certificates` and
associated files (by default: {file}`neo4j.key` and
{file}`neo4j.cert`). Its use will be deprecated.

Note: This connector must be configured to support/require
SSL/TLS for the legacy policy to actually be utilized. See
{option}`bolt.tlsLevel`.

- services.neo4j.bolt.tlsLevel: SSL/TSL requirement level for BOLT traffic.

- services.neo4j.boltPort
- services.neo4j.certDir: Alias of {option}`services.neo4j.directories.certificates`.
- services.neo4j.constrainLoadCsv: Sets the root directory for file URLs used with the Cypher
`LOAD CSV` clause to be that defined by
{option}`directories.imports`. It restricts
access to only those files within that directory and its
subdirectories.

Setting this option to `false` introduces
possible security problems.

- services.neo4j.dataDir: Alias of {option}`services.neo4j.directories.home`.
- services.neo4j.defaultListenAddress: Default network interface to listen for incoming connections. To
listen for connections on all interfaces, use "0.0.0.0".

Specifies the default IP address and address part of connector
specific {option}`listenAddress` options. To bind specific
connectors to a specific network interfaces, specify the entire
{option}`listenAddress` option for that connector.

- services.neo4j.directories.certificates: Directory for storing certificates to be used by Neo4j for
TLS connections.

When setting this directory to something other than its default,
ensure the directory's existence, and that read/write permissions are
given to the Neo4j daemon user `neo4j`.

Note that changing this directory from its default will prevent
the directory structure required for each SSL policy from being
automatically generated. A policy's directory structure as defined by
its {option}`baseDirectory`,{option}`revokedDir` and
{option}`trustedDir` must then be setup manually. The
existence of these directories is mandatory, as well as the presence
of the certificate file and the private key. Ensure the correct
permissions are set on these directories and files.

- services.neo4j.directories.data: Path of the data directory. You must not configure more than one
Neo4j installation to use the same data directory.

When setting this directory to something other than its default,
ensure the directory's existence, and that read/write permissions are
given to the Neo4j daemon user `neo4j`.

- services.neo4j.directories.home: Path of the Neo4j home directory. Other default directories are
subdirectories of this path. This directory will be created if
non-existent, and its ownership will be {command}`chown` to
the Neo4j daemon user `neo4j`.

- services.neo4j.directories.imports: The root directory for file URLs used with the Cypher
`LOAD CSV` clause. Only meaningful when
{option}`constrainLoadCvs` is set to
`true`.

When setting this directory to something other than its default,
ensure the directory's existence, and that read permission is
given to the Neo4j daemon user `neo4j`.

- services.neo4j.directories.plugins: Path of the database plugin directory. Compiled Java JAR files that
contain database procedures will be loaded if they are placed in
this directory.

When setting this directory to something other than its default,
ensure the directory's existence, and that read permission is
given to the Neo4j daemon user `neo4j`.

- services.neo4j.enable: Whether to enable Neo4j Community Edition.

- services.neo4j.enableBolt: Alias of {option}`services.neo4j.bolt.enable`.
- services.neo4j.enableHttps: Alias of {option}`services.neo4j.https.enable`.
- services.neo4j.extraServerConfig: Extra configuration for Neo4j Community server. Refer to the
[complete reference](https://neo4j.com/docs/operations-manual/current/reference/configuration-settings/)
of Neo4j configuration settings.

- services.neo4j.host: Alias of {option}`services.neo4j.defaultListenAddress`.
- services.neo4j.http.advertisedAddress: Neo4j advertised address for HTTP traffic. The advertised address is
expressed in the format `<ip-address>:<port-number>`.

- services.neo4j.http.enable: Enable the HTTP connector for Neo4j. Setting this option to
`false` will stop Neo4j from listening for incoming
connections on the HTTPS port (7474 by default).

- services.neo4j.http.listenAddress: Neo4j listen address for HTTP traffic. The listen address is
expressed in the format `<ip-address>:<port-number>`.

- services.neo4j.https.advertisedAddress: Neo4j advertised address for HTTPS traffic. The advertised address is
expressed in the format `<ip-address>:<port-number>`.

- services.neo4j.https.enable: Enable the HTTPS connector for Neo4j. Setting this option to
`false` will stop Neo4j from listening for incoming
connections on the HTTPS port (7473 by default).

- services.neo4j.https.listenAddress: Neo4j listen address for HTTPS traffic. The listen address is
expressed in the format `<ip-address>:<port-number>`.

- services.neo4j.https.sslPolicy: Neo4j SSL policy for HTTPS traffic.

The legacy policy is a special policy which is not defined in the
policy configuration section, but rather derives from
{option}`directories.certificates` and
associated files (by default: {file}`neo4j.key` and
{file}`neo4j.cert`). Its use will be deprecated.

- services.neo4j.httpsPort
- services.neo4j.listenAddress: Alias of {option}`services.neo4j.defaultListenAddress`.
- services.neo4j.package: The neo4j package to use.
- services.neo4j.port
- services.neo4j.readOnly: Only allow read operations from this Neo4j instance.

- services.neo4j.shell.enable: Enable a remote shell server which Neo4j Shell clients can log in to.
Only applicable to {command}`neo4j-shell`.

- services.neo4j.shell.enabled
- services.neo4j.ssl.policies: Defines the SSL policies for use with Neo4j connectors. Each attribute
of this set defines a policy, with the attribute name defining the name
of the policy and its namespace. Refer to the operations manual section
on Neo4j's
[SSL Framework](https://neo4j.com/docs/operations-manual/current/security/ssl-framework/)
for further details.

- services.neo4j.udc.enabled
- services.neo4j.workerCount: Number of Neo4j worker threads, where the default of
`0` indicates a worker count equal to the number of
available processors.

- services.netatalk.enable: Whether to enable the Netatalk AFP fileserver.
- services.netatalk.extmap: File name extension mappings.
See {manpage}`extmap.conf(5)`. for more information.

- services.netatalk.extraConfig
- services.netatalk.homes
- services.netatalk.port: TCP port to be used for AFP.
- services.netatalk.settings: Configuration for Netatalk. See
{manpage}`afp.conf(5)`.

- services.netatalk.volumes
- services.netbird.clients: Attribute set of NetBird client daemons, by default each one will:

1. be manageable using dedicated tooling:
  - `netbird-<name>` script,
  - `NetBird - netbird-<name>` graphical interface when appropriate (see `ui.enable`),
2. run as a `netbird-<name>.service`,
3. listen for incoming remote connections on the port `51820` (`openFirewall` by default),
4. manage the `netbird-<name>` wireguard interface,
5. use the `/var/lib/netbird-<name>/config.json` configuration file,
6. override `/var/lib/netbird-<name>/config.json` with values from `/etc/netbird-<name>/config.d/*.json`,
7. (`hardened`) be locally manageable by `netbird-<name>` system group,

With following caveats:

- multiple daemons will interfere with each other's DNS resolution of `netbird.cloud`, but
  should remain fully operational otherwise.
  Setting up custom (non-conflicting) DNS zone is currently possible only when self-hosting.

- services.netbird.enable: Enables backward-compatible NetBird client service.

This is strictly equivalent to:

```nix
services.netbird.clients.default = {
  port = 51820;
  name = "netbird";
  systemd.name = "netbird";
  interface = "wt0";
  hardened = false;
};
```

- services.netbird.package: The netbird package to use.
- services.netbird.server.coturn.domain: The domain under which the coturn server runs.
- services.netbird.server.coturn.enable: Whether to enable a Coturn server for Netbird, will also open the firewall on the configured range.
- services.netbird.server.coturn.openPorts: The list of ports used by coturn for listening to open in the firewall.

- services.netbird.server.coturn.password: The password of the user used by netbird to connect to the coturn server.
Be advised this will be world readable in the nix store.

- services.netbird.server.coturn.passwordFile: The path to a file containing the password of the user used by netbird to connect to the coturn server.

- services.netbird.server.coturn.useAcmeCertificates: Whether to use ACME certificates corresponding to the given domain for the server.

- services.netbird.server.coturn.user: The username used by netbird to connect to the coturn server.

- services.netbird.server.dashboard.domain: The domain under which the dashboard runs.
- services.netbird.server.dashboard.enable: Whether to enable the static netbird dashboard frontend.
- services.netbird.server.dashboard.enableNginx: Whether to enable Nginx reverse-proxy to serve the dashboard.
- services.netbird.server.dashboard.finalDrv: The derivation containing the final templated dashboard.

- services.netbird.server.dashboard.managementServer: The address of the management server, used for the API endpoints.
- services.netbird.server.dashboard.package: The netbird-dashboard package to use.
- services.netbird.server.dashboard.settings: An attribute set that will be used to substitute variables when building the dashboard.
Any values set here will be templated into the frontend and be public for anyone that can reach your website.
The exact values sadly aren't documented anywhere.
A starting point when searching for valid values is this [script](https://github.com/netbirdio/dashboard/blob/main/docker/init_react_envs.sh)
The only mandatory value is 'AUTH_AUTHORITY' as we cannot set a default value here.

- services.netbird.server.domain: The domain under which the netbird server runs.
- services.netbird.server.enable: Whether to enable Netbird Server stack, comprising the dashboard, management API and signal service.
- services.netbird.server.enableNginx: Whether to enable Nginx reverse-proxy for the netbird server services.
- services.netbird.server.management.disableAnonymousMetrics: Disables push of anonymous usage metrics to NetBird.
- services.netbird.server.management.disableSingleAccountMode: If set to true, disables single account mode.
The `singleAccountModeDomain` property will be ignored and every new user will have a separate NetBird account.

- services.netbird.server.management.dnsDomain: Domain used for peer resolution.
- services.netbird.server.management.domain: The domain under which the management API runs.
- services.netbird.server.management.enable: Whether to enable Netbird Management Service.
- services.netbird.server.management.enableNginx: Whether to enable Nginx reverse-proxy for the netbird management service.
- services.netbird.server.management.extraOptions: Additional options given to netbird-mgmt as commandline arguments.

- services.netbird.server.management.logLevel: Log level of the netbird services.
- services.netbird.server.management.metricsPort: Internal port of the metrics server.
- services.netbird.server.management.oidcConfigEndpoint: The oidc discovery endpoint.
- services.netbird.server.management.package: The netbird-management package to use.
- services.netbird.server.management.port: Internal port of the management server.
- services.netbird.server.management.settings: Configuration of the netbird management server.
Options containing secret data should be set to an attribute set containing the attribute _secret
- a string pointing to a file containing the value the option should be set to.
See the example to get a better picture of this: in the resulting management.json file,
the `DataStoreEncryptionKey` key will be set to the contents of the /run/agenix/netbird_mgmt-data_store_encryption_key file.

- services.netbird.server.management.singleAccountModeDomain: Enables single account mode.
This means that all the users will be under the same account grouped by the specified domain.
If the installation has more than one account, the property is ineffective.

- services.netbird.server.management.turnDomain: The domain of the TURN server to use.
- services.netbird.server.management.turnPort: The port of the TURN server to use.

- services.netbird.server.signal.domain: The domain name for the signal service.
- services.netbird.server.signal.enable: Whether to enable Netbird's Signal Service.
- services.netbird.server.signal.enableNginx: Whether to enable Nginx reverse-proxy for the netbird signal service.
- services.netbird.server.signal.extraOptions: Additional options given to netbird-signal as commandline arguments.

- services.netbird.server.signal.logLevel: Log level of the netbird signal service.
- services.netbird.server.signal.metricsPort: Internal port of the metrics server.
- services.netbird.server.signal.package: The netbird-signal package to use.
- services.netbird.server.signal.port: Internal port of the signal server.
- services.netbird.tunnels: Alias of {option}`services.netbird.clients`.
- services.netbird.ui.enable: Controls presence `netbird-ui` wrappers, defaults to presence of graphical sessions.

- services.netbird.ui.package: The netbird-ui package to use.
- services.netbird.useRoutingFeatures: Enables settings required for NetBird's routing features: Network Resources, Network Routes & Exit Nodes.

When set to `client` or `both`, reverse path filtering will be set to loose instead of strict.
When set to `server` or `both`, IP forwarding will be enabled.

- services.netbox.dataDir: Storage path of netbox.

- services.netbox.enable: Enable Netbox.

This module requires a reverse proxy that serves `/static` separately.
See this [example](https://github.com/netbox-community/netbox/blob/develop/contrib/nginx.conf/) on how to configure this.

- services.netbox.enableLdap: Enable LDAP-Authentication for Netbox.

This requires a configuration file being pass through `ldapConfigPath`.

- services.netbox.extraConfig: Additional lines of configuration appended to the `configuration.py`.
See the [documentation](https://docs.netbox.dev/en/stable/configuration/) for more possible options.

- services.netbox.keycloakClientSecret: File that contains the keycloak client secret.

- services.netbox.ldapConfigPath: Path to the Configuration-File for LDAP-Authentication, will be loaded as `ldap_config.py`.
See the [documentation](https://netbox.readthedocs.io/en/stable/installation/6-ldap/#configuration) for possible options.

- services.netbox.listenAddress: Address the server will listen on.
Ignored if `unixSocket` is set.

- services.netbox.package: NetBox package to use.

- services.netbox.plugins: List of plugin packages to install.

- services.netbox.port: Port the server will listen on.
Ignored if `unixSocket` is set.

- services.netbox.secretKeyFile: Path to a file containing the secret key.

- services.netbox.settings: Configuration options to set in `configuration.py`.
See the [documentation](https://docs.netbox.dev/en/stable/configuration/) for more possible options.

- services.netbox.unixSocket: Enable Unix Socket for the server to listen on.
`listenAddress` and `port` will be ignored.

- services.netclient.enable: Whether to enable Netclient Daemon.
- services.netclient.package: The netclient package to use.
- services.netdata.claimTokenFile: If set, automatically registers the agent using the given claim token
file.

- services.netdata.config: netdata.conf configuration as nix attributes. cannot be combined with configText.
- services.netdata.configDir: Complete netdata config directory except netdata.conf.
The default configuration is merged with changes
defined in this option.
Each top-level attribute denotes a path in the configuration
directory as in environment.etc.
Its value is the absolute path and must be readable by netdata.
Cannot be combined with configText.

- services.netdata.configText: Verbatim netdata.conf, cannot be combined with config.
- services.netdata.deadlineBeforeStopSec: In order to detect when netdata is misbehaving, we run a concurrent task pinging netdata (wait-for-netdata-up)
in the systemd unit.

If after a while, this task does not succeed, we stop the unit and mark it as failed.

You can control this deadline in seconds with this option, it's useful to bump it
if you have (1) a lot of data (2) doing upgrades (3) have low IOPS/throughput.

- services.netdata.enable: Whether to enable netdata.
- services.netdata.enableAnalyticsReporting: Enable reporting of anonymous usage statistics to Netdata Inc. via either
Google Analytics (in versions prior to 1.29.4), or Netdata Inc.'s
self-hosted PostHog (in versions 1.29.4 and later).
See: <https://learn.netdata.cloud/docs/agent/anonymous-statistics>

- services.netdata.extraNdsudoPackages: Extra packages to add to `PATH` to make available to `ndsudo`.
::: {.warning}
`ndsudo` has SUID privileges, be careful what packages you list here.
:::

::: {.note}
`cfg.package` must be built with `withNdsudo = true`
:::

- services.netdata.extraPluginPaths: Extra paths to add to the netdata global "plugins directory"
option.  Useful for when you want to include your own
collection scripts.

Details about writing a custom netdata plugin are available at:
<https://docs.netdata.cloud/collectors/plugins.d/>

Cannot be combined with configText.

- services.netdata.group: Group under which netdata runs.
- services.netdata.package: The netdata package to use.
- services.netdata.python.enable: Whether to enable python-based plugins

- services.netdata.python.extraPackages: Extra python packages available at runtime
to enable additional python plugins.

- services.netdata.python.recommendedPythonPackages: Whether to enable a set of recommended Python plugins
by installing extra Python packages.

- services.netdata.user: User account under which netdata runs.
- services.networkaudiod.enable: Whether to enable Networkaudiod (NAA).
- services.networkd-dispatcher.enable: Whether to enable Networkd-dispatcher service for systemd-networkd connection status
change. See [upstream instructions](https://gitlab.com/craftyguy/networkd-dispatcher)
for usage
.
- services.networkd-dispatcher.extraArgs: Extra arguments to pass to the networkd-dispatcher command.

- services.networkd-dispatcher.rules: Declarative configuration of networkd-dispatcher rules. See
[upstream instructions](https://gitlab.com/craftyguy/networkd-dispatcher)
for an introduction and example scripts.

- services.networking.websockify.enable: Whether to enable websockify to forward websocket connections to TCP connections.
- services.networking.websockify.portMap: Ports to map by default.
- services.networking.websockify.sslCert: Path to the SSL certificate.
- services.networking.websockify.sslKey: Path to the SSL key.
- services.newt.enable: Whether to enable Newt, user space tunnel client for Pangolin.
- services.newt.endpoint: Alias of {option}`services.newt.settings.endpoint`.
- services.newt.environmentFile: Path to a file containing sensitive environment variables for Newt. See <https://docs.fossorial.io/Newt/overview#cli-args>
These will overwrite anything defined in the config.
The file should contain environment-variable assignments like:
NEWT_ID=2ix2t8xk22ubpfy
NEWT_SECRET=nnisrfsdfc7prqsp9ewo1dvtvci50j5uiqotez00dgap0ii2

- services.newt.id: Alias of {option}`services.newt.settings.id`.
- services.newt.logLevel: Alias of {option}`services.newt.settings.log-level`.
- services.newt.package: The fosrl-newt package to use.
- services.newt.settings: Settings for Newt module, see [Newt CLI docs](https://github.com/fosrl/newt?tab=readme-ov-file#cli-args) for more information.
- services.nextcloud.appstoreEnable: Allow the installation and updating of apps from the Nextcloud appstore.
Enabled by default unless there are packages in [](#opt-services.nextcloud.extraApps).
Set this to true to force enable the store even if [](#opt-services.nextcloud.extraApps) is used.
Set this to false to disable the installation of apps from the global appstore. App management is always enabled regardless of this setting.

- services.nextcloud.autoUpdateApps.enable: Run a regular auto-update of all apps installed from the Nextcloud app store.

- services.nextcloud.autoUpdateApps.startAt: When to run the update. See `systemd.services.<name>.startAt`.

- services.nextcloud.caching.apcu: Whether to load the APCu module into PHP.

- services.nextcloud.caching.memcached: Whether to load the Memcached module into PHP.
You still need to enable Memcached in your config.php.
See <https://docs.nextcloud.com/server/latest/admin_manual/configuration_server/caching_configuration.html>

- services.nextcloud.caching.redis: Whether to load the Redis module into PHP.
You still need to enable Redis in your config.php.
See <https://docs.nextcloud.com/server/latest/admin_manual/configuration_server/caching_configuration.html>

- services.nextcloud.caddyProxy.enable: Serve Nextcloud via Caddy with automatic HTTPS and php_fastcgi to the Nextcloud PHP-FPM pool.
Requires `services.nextcloud.hostName` to be a reachable DNS name.

- services.nextcloud.cli.memoryLimit: The `memory_limit` of PHP is equal to [](#opt-services.nextcloud.maxUploadSize).
The value can be customized for `nextcloud-cron.service` using this option.

- services.nextcloud.config.adminpassFile: The full path to a file that contains the admin's password. The password is
set only in the initial setup of Nextcloud by the systemd service `nextcloud-setup.service`.

- services.nextcloud.config.adminuser: Username for the admin account. The username is only set during the
initial setup of Nextcloud! Since the username also acts as unique
ID internally, it cannot be changed later!

- services.nextcloud.config.dbhost: Database host (+port) or socket path.
If [](#opt-services.nextcloud.database.createLocally) is true and
[](#opt-services.nextcloud.config.dbtype) is either `pgsql` or `mysql`,
defaults to the correct Unix socket instead.

- services.nextcloud.config.dbname: Database name.
- services.nextcloud.config.dbpassFile: The full path to a file that contains the database password.

- services.nextcloud.config.dbport
- services.nextcloud.config.dbtableprefix: Table prefix in Nextcloud's database.

__Note:__ since Nextcloud 20 it's not an option anymore to create a database
schema with a custom table prefix. This option only exists for backwards compatibility
with installations that were originally provisioned with Nextcloud <20.

- services.nextcloud.config.dbtype: Database type.
- services.nextcloud.config.dbuser: Database user.
- services.nextcloud.config.defaultPhoneRegion: Alias of {option}`services.nextcloud.settings.default_phone_region`.
- services.nextcloud.config.extraTrustedDomains: Alias of {option}`services.nextcloud.settings.trusted_domains`.
- services.nextcloud.config.objectstore.s3.autocreate: Alias of {option}`services.nextcloud.config.objectstore.s3.verify_bucket_exists`.
- services.nextcloud.config.objectstore.s3.bucket: The name of the S3 bucket.

- services.nextcloud.config.objectstore.s3.enable: Whether to enable S3 object storage as primary storage.

This mounts a bucket on an Amazon S3 object storage or compatible
implementation into the virtual filesystem.

Further details about this feature can be found in the
[upstream documentation](https://docs.nextcloud.com/server/22/admin_manual/configuration_files/primary_storage.html)
.
- services.nextcloud.config.objectstore.s3.hostname: Required for some non-Amazon implementations.

- services.nextcloud.config.objectstore.s3.key: The access key for the S3 bucket.

- services.nextcloud.config.objectstore.s3.port: Required for some non-Amazon implementations.

- services.nextcloud.config.objectstore.s3.region: Required for some non-Amazon implementations.

- services.nextcloud.config.objectstore.s3.secretFile: The full path to a file that contains the access secret.

- services.nextcloud.config.objectstore.s3.sseCKeyFile: If provided this is the full path to a file that contains the key
to enable [server-side encryption with customer-provided keys][1]
(SSE-C).

The file must contain a random 32-byte key encoded as a base64
string, e.g. generated with the command

```
openssl rand 32 | base64
```

[1]: https://docs.aws.amazon.com/AmazonS3/latest/userguide/ServerSideEncryptionCustomerKeys.html

- services.nextcloud.config.objectstore.s3.usePathStyle: Required for some non-Amazon S3 implementations.

Ordinarily, requests will be made with
`http://bucket.hostname.domain/`, but with path style
enabled requests are made with
`http://hostname.domain/bucket` instead.

- services.nextcloud.config.objectstore.s3.useSsl: Use SSL for objectstore access.

- services.nextcloud.config.objectstore.s3.verify_bucket_exists: Create the objectstore bucket if it does not exist.

- services.nextcloud.config.overwriteProtocol: Alias of {option}`services.nextcloud.settings.overwriteprotocol`.
- services.nextcloud.config.trustedProxies: Alias of {option}`services.nextcloud.settings.trusted_proxies`.
- services.nextcloud.configureRedis: Whether to configure Nextcloud to use the recommended Redis settings for small instances.

::: {.note}
The Nextcloud system check recommends to configure either Redis or Memcache for file lock caching.
:::

::: {.note}
The `notify_push` app requires Redis to be configured. If this option is turned off, this must be configured manually.
:::

- services.nextcloud.cron.memoryLimit: Alias of {option}`services.nextcloud.cli.memoryLimit`.
- services.nextcloud.database.createLocally: Whether to create the database and database user locally.

- services.nextcloud.datadir: Nextcloud's data storage path.  Will be [](#opt-services.nextcloud.home) by default.
This folder will be populated with a config.php file and a data folder which contains the state of the instance (excluding the database).";

- services.nextcloud.enable: Whether to enable nextcloud.
- services.nextcloud.enableBrokenCiphersForSSE
- services.nextcloud.enableImagemagick: Whether to enable the ImageMagick module for PHP.
This is used by the theming app and for generating previews of certain images (e.g. SVG and HEIF).
You may want to disable it for increased security. In that case, previews will still be available
for some images (e.g. JPEG and PNG).
See <https://github.com/nextcloud/server/issues/13099>
.
- services.nextcloud.extraApps: Extra apps to install. Should be an attrSet of appid to packages generated by fetchNextcloudApp.
The appid must be identical to the "id" value in the apps appinfo/info.xml.
Using this will disable the appstore to prevent Nextcloud from updating these apps (see [](#opt-services.nextcloud.appstoreEnable)).

- services.nextcloud.extraAppsEnable: Automatically enable the apps in [](#opt-services.nextcloud.extraApps) every time Nextcloud starts.
If set to false, apps need to be enabled in the Nextcloud web user interface or with `nextcloud-occ app:enable`.

- services.nextcloud.extraOptions: Alias of {option}`services.nextcloud.settings`.
- services.nextcloud.fastcgiTimeout: FastCGI timeout for database connection in seconds.

- services.nextcloud.finalPackage: Package to the finalized Nextcloud package, including all installed apps.
This is automatically set by the module.

- services.nextcloud.globalProfiles: Alias of {option}`services.nextcloud.settings."profile.enabled"`.
- services.nextcloud.home: Storage path of nextcloud.
- services.nextcloud.hostName: FQDN for the nextcloud instance.
- services.nextcloud.https: Use HTTPS for generated links.

Be aware that this also enables HTTP Strict Transport Security (HSTS) headers.

- services.nextcloud.logLevel: Alias of {option}`services.nextcloud.settings.loglevel`.
- services.nextcloud.logType: Alias of {option}`services.nextcloud.settings.log_type`.
- services.nextcloud.maxUploadSize: The upload limit for files. This changes the relevant options
in php.ini and nginx if enabled.

- services.nextcloud.nginx.enableFastcgiRequestBuffering: Whether to buffer requests against fastcgi requests. This is a workaround
for `PUT` requests with the `Transfer-Encoding: chunked` header set and
an unspecified `Content-Length`. Without request buffering for these requests,
Nextcloud will create files with zero bytes length as described in
[nextcloud/server#7995](https://github.com/nextcloud/server/issues/7995).

::: {.note}
Please keep in mind that upstream suggests to not enable this as it might
lead to timeouts on large files being uploaded as described in the
[administrator manual](https://docs.nextcloud.com/server/latest/admin_manual/configuration_files/big_file_upload_configuration.html#nginx).
:::

- services.nextcloud.nginx.hstsMaxAge: Value for the `max-age` directive of the HTTP
`Strict-Transport-Security` header.

See section 6.1.1 of IETF RFC 6797 for detailed information on this
directive and header.

- services.nextcloud.nginx.recommendedHttpHeaders
- services.nextcloud.nginxProxy.enable: Enable nginx reverse proxy and Let's Encrypt (ACME) for Nextcloud.
Requires `services.nextcloud.hostName` to be a reachable DNS name.

- services.nextcloud.notify_push.bendDomainToLocalhost: Whether to add an entry to `/etc/hosts` for the configured nextcloud domain to point to `localhost` and add `localhost `to nextcloud's `trusted_proxies` config option.

This is useful when nextcloud's domain is not a static IP address and when the reverse proxy cannot be bypassed because the backend connection is done via unix socket.

- services.nextcloud.notify_push.dbhost: Database host (+port) or socket path.
If [](#opt-services.nextcloud.database.createLocally) is true and
[](#opt-services.nextcloud.config.dbtype) is either `pgsql` or `mysql`,
defaults to the correct Unix socket instead.

- services.nextcloud.notify_push.dbname: Database name.
- services.nextcloud.notify_push.dbpassFile: The full path to a file that contains the database password.

- services.nextcloud.notify_push.dbport
- services.nextcloud.notify_push.dbtableprefix: Table prefix in Nextcloud's database.

__Note:__ since Nextcloud 20 it's not an option anymore to create a database
schema with a custom table prefix. This option only exists for backwards compatibility
with installations that were originally provisioned with Nextcloud <20.

- services.nextcloud.notify_push.dbtype: Database type.
- services.nextcloud.notify_push.dbuser: Database user.
- services.nextcloud.notify_push.enable: Whether to enable Notify push.
- services.nextcloud.notify_push.logLevel: Log level
- services.nextcloud.notify_push.nextcloudUrl: Configure the nextcloud URL notify_push tries to connect to.
- services.nextcloud.notify_push.package: The nextcloud-notify_push package to use.
- services.nextcloud.notify_push.socketPath: Socket path to use for notify_push
- services.nextcloud.occ: The nextcloud-occ program preconfigured to target this Nextcloud instance.

- services.nextcloud.package: Which package to use for the Nextcloud instance.
- services.nextcloud.phpExtraExtensions: Additional PHP extensions to use for Nextcloud.
By default, only extensions necessary for a vanilla Nextcloud installation are enabled,
but you may choose from the list of available extensions and add further ones.
This is sometimes necessary to be able to install a certain Nextcloud app that has additional requirements.

- services.nextcloud.phpOptions: Options for PHP's php.ini file for nextcloud.

Please note that this option is _additive_ on purpose while the
attribute values inside the default are option defaults: that means that

```nix
{
  services.nextcloud.phpOptions."opcache.interned_strings_buffer" = "23";
}
```

will override the `php.ini` option `opcache.interned_strings_buffer` without
discarding the rest of the defaults.

Overriding all of `phpOptions` (including `upload_max_filesize`, `post_max_size`
and `memory_limit` which all point to [](#opt-services.nextcloud.maxUploadSize)
by default) can be done like this:

```nix
{
  services.nextcloud.phpOptions = lib.mkForce {
    /* ... */
  };
}
```

- services.nextcloud.phpPackage: The php package to use.
- services.nextcloud.poolConfig: Options for Nextcloud's PHP pool. See the documentation on `php-fpm.conf` for details on configuration directives.

- services.nextcloud.poolSettings: Options for nextcloud's PHP pool. See the documentation on `php-fpm.conf` for details on
configuration directives. The above are recommended for a server with 4GiB of RAM.

It's advisable to read the [section about PHPFPM tuning in the upstream manual](https://docs.nextcloud.com/server/latest/admin_manual/installation/server_tuning.html#tune-php-fpm)
and consider customizing the values.

- services.nextcloud.secretFile: Secret options which will be appended to Nextcloud's config.php file (written as JSON, in the same
form as the [](#opt-services.nextcloud.settings) option), for example
`{"redis":{"password":"secret"}}`.

- services.nextcloud.settings: Extra options which should be appended to Nextcloud's config.php file.

- services.nextcloud.skeletonDirectory: Alias of {option}`services.nextcloud.settings.skeletondirectory`.
- services.nextcloud.webfinger: Enable this option if you plan on using the webfinger plugin.
The appropriate nginx rewrite rules will be added to your configuration.

- services.nextcloud-whiteboard-server.enable: Whether to enable Nextcloud backend server for the Whiteboard app.
- services.nextcloud-whiteboard-server.secrets: A list of files containing the various secrets. Should be in the
format expected by systemd's `EnvironmentFile` directory.

- services.nextcloud-whiteboard-server.settings: Settings to configure backend server. Especially the Nextcloud host
url has to be set. The required environment variable `JWT_SECRET_KEY`
should be set via the secrets option.

- services.nextdns.arguments: Additional arguments to be passed to nextdns run.
- services.nextdns.enable: Whether to enable the NextDNS DNS/53 to DoH Proxy service.
- services.nextjs-ollama-llm-ui.enable: Whether to enable Simple Ollama web UI service; an easy to use web frontend for a Ollama backend service.
Run state-of-the-art AI large language models (LLM) similar to ChatGPT locally with privacy
on your personal computer.
This service is stateless and doesn't store any data on the server; all data is kept
locally in your web browser.
See <https://github.com/jakobhoeg/nextjs-ollama-llm-ui>.

Required: You need the Ollama backend service running by having
"services.nextjs-ollama-llm-ui.ollamaUrl" point to the correct url.
You can host such a backend service with NixOS through "services.ollama".
.
- services.nextjs-ollama-llm-ui.hostname: The hostname under which the Ollama UI interface should be accessible.
By default it uses localhost/127.0.0.1 to be accessible only from the local machine.
Change to "0.0.0.0" to make it directly accessible from the local network.

Note: You should keep it at 127.0.0.1 and only serve to the local
network or internet from a (home) server behind a reverse-proxy and secured encryption.
See <https://wiki.nixos.org/wiki/Nginx> for instructions on how to set up a reverse-proxy.

- services.nextjs-ollama-llm-ui.ollamaUrl: The address (including host and port) under which we can access the Ollama backend server.
!Note that if the the UI service is running under a domain "https://ui.example.org",
the Ollama backend service must allow "CORS" requests from this domain, e.g. by adding
"services.ollama.environment.OLLAMA_ORIGINS = [ ... "https://ui.example.org" ];"!

- services.nextjs-ollama-llm-ui.package: The nextjs-ollama-llm-ui package to use.
- services.nextjs-ollama-llm-ui.port: The port under which the Ollama UI interface should be accessible.

- services.nexus.enable: Whether to enable Sonatype Nexus3 OSS service.
- services.nexus.group: Group which runs Nexus3.
- services.nexus.home: Home directory of the Nexus3 instance.
- services.nexus.jdkPackage: The openjdk8 package to use.
- services.nexus.jvmOpts: Options for the JVM written to `nexus.jvmopts`.
Please refer to the docs (https://help.sonatype.com/repomanager3/installation/configuring-the-runtime-environment)
for further information.

- services.nexus.listenAddress: Address to listen on.
- services.nexus.listenPort: Port to listen on.
- services.nexus.package: The nexus package to use.
- services.nexus.user: User which runs Nexus3.
- services.nezha-agent.clientSecretFile: Path to the file contained the client_secret of the dashboard.

- services.nezha-agent.debug: Whether to enable verbose log.
- services.nezha-agent.disableCommandExecute: Alias of {option}`services.nezha-agent.settings.disable_command_execute`.
- services.nezha-agent.disableNat: Alias of {option}`services.nezha-agent.settings.disable_nat`.
- services.nezha-agent.disableSendQuery: Alias of {option}`services.nezha-agent.settings.disable_send_query`.
- services.nezha-agent.enable: Whether to enable Agent of Nezha Monitoring.
- services.nezha-agent.extraFlags
- services.nezha-agent.genUuid: Whether to generate uuid from fqdn automatically.
Please note that changes in hostname/domain will result in different uuid.

- services.nezha-agent.gpu: Alias of {option}`services.nezha-agent.settings.gpu`.
- services.nezha-agent.package: The nezha-agent package to use.
- services.nezha-agent.passwordFile
- services.nezha-agent.reportDelay: Alias of {option}`services.nezha-agent.settings.report_delay`.
- services.nezha-agent.server: Alias of {option}`services.nezha-agent.settings.server`.
- services.nezha-agent.settings: Generate to {file}`config.json` as a Nix attribute set.
Check the [guide](https://nezha.wiki/en_US/guide/agent.html)
for possible options.

- services.nezha-agent.skipConnection: Alias of {option}`services.nezha-agent.settings.skip_connection_count`.
- services.nezha-agent.skipProcess: Alias of {option}`services.nezha-agent.settings.skip_procs_count`.
- services.nezha-agent.temperature: Alias of {option}`services.nezha-agent.settings.temperature`.
- services.nezha-agent.tls: Alias of {option}`services.nezha-agent.settings.tls`.
- services.nezha-agent.useIPv6CountryCode: Alias of {option}`services.nezha-agent.settings.use_ipv6_country_code`.
- services.nfs.extraConfig: Extra nfs-utils configuration.

- services.nfs.idmapd.settings: libnfsidmap configuration. Refer to
<https://linux.die.net/man/5/idmapd.conf>
for details.

- services.nfs.lockdPort: Alias of {option}`services.nfs.server.lockdPort`.
- services.nfs.server.createMountPoints: Whether to create the mount points in the exports file at startup time.
- services.nfs.server.enable: Whether to enable the kernel's NFS server.

- services.nfs.server.exports: Contents of the /etc/exports file.  See
{manpage}`exports(5)` for the format.

- services.nfs.server.extraNfsdConfig: Extra configuration options for the [nfsd] section of /etc/nfs.conf.

- services.nfs.server.hostName: Hostname or address on which NFS requests will be accepted.
Default is all.  See the {option}`-H` option in
{manpage}`nfsd(8)`.

- services.nfs.server.lockdPort: Use a fixed port for the NFS lock manager kernel module
(`lockd/nlockmgr`).  This is useful if the
NFS server is behind a firewall.

- services.nfs.server.mountdPort: Use fixed port for rpc.mountd, useful if server is behind firewall.

- services.nfs.server.nproc: Number of NFS server threads.  Defaults to the recommended value of 8.

- services.nfs.server.statdPort: Use a fixed port for {command}`rpc.statd`. This is
useful if the NFS server is behind a firewall.

- services.nfs.settings: General configuration for NFS daemons and tools.
See {manpage}`nfs.conf(5)` and related man pages for details.

- services.nfs.statdPort: Alias of {option}`services.nfs.server.statdPort`.
- services.nghttpx.backend-address-family: Specify address family of backend connections. If "auto" is
given, both IPv4 and IPv6 are considered. If "IPv4" is given,
only IPv4 address is considered. If "IPv6" is given, only IPv6
address is considered.

Please see <https://nghttp2.org/documentation/nghttpx.1.html#cmdoption-nghttpx--backend-address-family>

- services.nghttpx.backends: A list of backend specifications.

- services.nghttpx.backlog: Listen backlog size.

Please see <https://nghttp2.org/documentation/nghttpx.1.html#cmdoption-nghttpx--backlog>

- services.nghttpx.enable: Whether to enable nghttpx.
- services.nghttpx.extraConfig: Extra configuration options to be appended to the generated
configuration file.

- services.nghttpx.frontends: A list of frontend listener specifications.

- services.nghttpx.rlimit-nofile: Set maximum number of open files (RLIMIT_NOFILE) to \<N\>. If 0
is given, nghttpx does not set the limit.

Please see <https://nghttp2.org/documentation/nghttpx.1.html#cmdoption-nghttpx--rlimit-nofile>

- services.nghttpx.single-process: Run this program in a single process mode for debugging
purpose. Without this option, nghttpx creates at least 2
processes: master and worker processes. If this option is
used, master and worker are unified into a single
process. nghttpx still spawns additional process if neverbleed
is used. In the single process mode, the signal handling
feature is disabled.

Please see <https://nghttp2.org/documentation/nghttpx.1.html#cmdoption-nghttpx--single-process>

- services.nghttpx.single-thread: Run everything in one thread inside the worker process. This
feature is provided for better debugging experience, or for
the platforms which lack thread support. If threading is
disabled, this option is always enabled.

Please see <https://nghttp2.org/documentation/nghttpx.1.html#cmdoption-nghttpx--single-thread>

- services.nghttpx.tls: TLS certificate and key paths. Note that this does not enable
TLS for a frontend listener, to do so, a frontend
specification must set `params.tls` to true.

- services.nghttpx.workers: Set the number of worker threads.

Please see <https://nghttp2.org/documentation/nghttpx.1.html#cmdoption-nghttpx-n>

- services.nginx.additionalModules: Additional [third-party nginx modules](https://www.nginx.com/resources/wiki/modules/)
to install. Packaged modules are available in `pkgs.nginxModules`.

- services.nginx.appendConfig: Configuration lines appended to the generated Nginx
configuration file. Commonly used by different modules
providing http snippets. {option}`appendConfig`
can be specified more than once and its value will be
concatenated (contrary to {option}`config` which
can be set only once).

- services.nginx.appendHttpConfig: Configuration lines to be appended to the generated http block.
This is mutually exclusive with using config and httpConfig for
specifying the whole http block verbatim.

- services.nginx.clientMaxBodySize: Set nginx global client_max_body_size.
- services.nginx.commonHttpConfig: With nginx you must provide common http context definitions before
they are used, e.g. log_format, resolver, etc. inside of server
or location contexts. Use this attribute to set these definitions
at the appropriate location.

- services.nginx.config: Verbatim {file}`nginx.conf` configuration.
This is mutually exclusive to any other config option for
{file}`nginx.conf` except for
- [](#opt-services.nginx.appendConfig)
- [](#opt-services.nginx.httpConfig)
- [](#opt-services.nginx.logError)

If additional verbatim config in addition to other options is needed,
[](#opt-services.nginx.appendConfig) should be used instead.

- services.nginx.defaultHTTPListenPort: If vhosts do not specify listen.port, use these ports for HTTP by default.

- services.nginx.defaultListen: If vhosts do not specify listen, use these addresses by default.
This option takes precedence over {option}`defaultListenAddresses` and
other listen-related defaults options.

- services.nginx.defaultListenAddresses: If vhosts do not specify listenAddresses, use these addresses by default.
This is akin to writing `defaultListen = [ { addr = "0.0.0.0" } ]`.

- services.nginx.defaultMimeTypes: Default MIME types for NGINX, as MIME types definitions from NGINX are very incomplete,
we use by default the ones bundled in the mailcap package, used by most of the other
Linux distributions.

- services.nginx.defaultSSLListenPort: If vhosts do not specify listen.port, use these ports for SSL by default.

- services.nginx.enable: Whether to enable Nginx Web Server.
- services.nginx.enableQuicBPF: Enables routing of QUIC packets using eBPF. When enabled, this allows
to support QUIC connection migration. The directive is only supported
on Linux 5.7+.
Note that enabling this option will make nginx run with extended
capabilities that are usually limited to processes running as root
namely `CAP_SYS_ADMIN` and `CAP_NET_ADMIN`.

- services.nginx.enableReload: Reload nginx when configuration file changes (instead of restart).
The configuration file is exposed at {file}`/etc/nginx/nginx.conf`.
See also `systemd.services.*.restartIfChanged`.

- services.nginx.eventsConfig: Configuration lines to be set inside the events block.

- services.nginx.experimentalZstdSettings: Enable alpha quality zstd module with recommended settings.
Learn more about compression in Zstd format [here](https://github.com/tokers/zstd-nginx-module).

This adds `pkgs.nginxModules.zstd` to `services.nginx.additionalModules`.

- services.nginx.gitweb.enable: If true, enable gitweb in nginx.

- services.nginx.gitweb.group: Group that the CGI process will belong to. (Set to `config.services.gitolite.group` if you are using gitolite.)

- services.nginx.gitweb.location: Location to serve gitweb on.

- services.nginx.gitweb.user: Existing user that the CGI process will belong to. (Default almost surely will do.)

- services.nginx.gitweb.virtualHost: VirtualHost to serve gitweb on. Default is catch-all.

- services.nginx.group: Group account under which nginx runs.
- services.nginx.httpConfig: Configuration lines to be set inside the http block.
This is mutually exclusive with the structured configuration
via virtualHosts and the recommendedXyzSettings configuration
options. See appendHttpConfig for appending to the generated http block.

- services.nginx.logError: Configures logging.
The first parameter defines a file that will store the log. The
special value stderr selects the standard error file. Logging to
syslog can be configured by specifying the “syslog:” prefix.
The second parameter determines the level of logging, and can be
one of the following: debug, info, notice, warn, error, crit,
alert, or emerg. Log levels above are listed in the order of
increasing severity. Setting a certain log level will cause all
messages of the specified and more severe log levels to be logged.
If this parameter is omitted then error is used.

- services.nginx.mapHashBucketSize: Sets the bucket size for the map variables hash tables. Default
value depends on the processor’s cache line size.

Refer to [the nginx docs on hashes](https://nginx.org/en/docs/hash.html)
for more information.

- services.nginx.mapHashMaxSize: Sets the maximum size of the map variables hash tables.

- services.nginx.package: Nginx package to use. This defaults to the stable version. Note
that the nginx team recommends to use the mainline version which
available in nixpkgs as `nginxMainline`.
Supported Nginx forks include `angie`, `openresty` and `tengine`.
For HTTP/3 support use `nginxQuic` or `angieQuic`.

- services.nginx.preStart: Shell commands executed before the service's nginx is started.

- services.nginx.prependConfig: Configuration lines prepended to the generated Nginx
configuration file. Can for example be used to load modules.
{option}`prependConfig` can be specified more than once
and its value will be concatenated (contrary to {option}`config`
which can be set only once).

- services.nginx.proxyCache.enable: Alias of {option}`services.nginx.proxyCachePath."".enable`.
- services.nginx.proxyCache.inactive: Alias of {option}`services.nginx.proxyCachePath."".inactive`.
- services.nginx.proxyCache.keysZoneName: Alias of {option}`services.nginx.proxyCachePath."".keysZoneName`.
- services.nginx.proxyCache.keysZoneSize: Alias of {option}`services.nginx.proxyCachePath."".keysZoneSize`.
- services.nginx.proxyCache.levels: Alias of {option}`services.nginx.proxyCachePath."".levels`.
- services.nginx.proxyCache.useTempPath: Alias of {option}`services.nginx.proxyCachePath."".useTempPath`.
- services.nginx.proxyCachePath: Configure a proxy cache path entry.
See <https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_path> for documentation.

- services.nginx.proxyResolveWhileRunning: Resolves domains of proxyPass targets at runtime and not only at startup.
This can be used as a workaround if nginx fails to start because of not-yet-working DNS.

:::{.warn}
`services.nginx.resolver` must be set for this option to work.
:::

- services.nginx.proxyTimeout: Change the proxy related timeouts in recommendedProxySettings.

- services.nginx.recommendedBrotliSettings: Enable recommended brotli settings.
Learn more about compression in Brotli format [here](https://github.com/google/ngx_brotli/).

This adds `pkgs.nginxModules.brotli` to `services.nginx.additionalModules`.

- services.nginx.recommendedGzipSettings: Enable recommended gzip settings.
Learn more about compression in Gzip format [here](https://docs.nginx.com/nginx/admin-guide/web-server/compression/).

- services.nginx.recommendedOptimisation: Enable recommended optimisation settings.

- services.nginx.recommendedProxySettings: Whether to enable recommended proxy settings if a vhost does not specify the option manually.

- services.nginx.recommendedTlsSettings: Enable recommended TLS settings.

- services.nginx.recommendedUwsgiSettings: Whether to enable recommended uwsgi settings if a vhost does not specify the option manually.

- services.nginx.recommendedZstdSettings
- services.nginx.resolver: Configures name servers used to resolve names of upstream servers into addresses

- services.nginx.serverNamesHashBucketSize: Sets the bucket size for the server names hash tables. Default
value depends on the processor’s cache line size.

- services.nginx.serverNamesHashMaxSize: Sets the maximum size of the server names hash tables.

- services.nginx.serverTokens: Show nginx version in headers and error pages.
- services.nginx.sslCiphers: Ciphers to choose from when negotiating TLS handshakes.
- services.nginx.sslDhparam: Path to DH parameters file.
- services.nginx.sslProtocols: Allowed TLS protocol versions.
- services.nginx.sso.configuration: nginx-sso configuration
([documentation](https://github.com/Luzifer/nginx-sso/wiki/Main-Configuration))
as a Nix attribute set.

Options containing secret data should be set to an attribute set
with the singleton attribute `_secret` - a string value set to the path
to the file containing the secret value which should be used in the
configuration. This file must be readable by `nginx-sso`.

- services.nginx.sso.enable: Whether to enable nginx-sso service.
- services.nginx.sso.package: The nginx-sso package to use.
- services.nginx.stateDir
- services.nginx.statusPage: Enable status page reachable from localhost on http://127.0.0.1/nginx_status.

- services.nginx.streamConfig: Configuration lines to be set inside the stream block.

- services.nginx.tailscaleAuth.enable: Whether to enable tailscale.nginx-auth, to authenticate nginx users via tailscale.
- services.nginx.tailscaleAuth.expectedTailnet: If you want to prevent node sharing from allowing users to access services
across tailnets, declare your expected tailnets domain here.

- services.nginx.tailscaleAuth.group: Alias of {option}`services.tailscaleAuth.group`.
- services.nginx.tailscaleAuth.package: Alias of {option}`services.tailscaleAuth.package`.
- services.nginx.tailscaleAuth.socketPath: Alias of {option}`services.tailscaleAuth.socketPath`.
- services.nginx.tailscaleAuth.user: Alias of {option}`services.tailscaleAuth.user`.
- services.nginx.tailscaleAuth.virtualHosts: A list of nginx virtual hosts to put behind tailscale.nginx-auth

- services.nginx.typesHashMaxSize: Sets the maximum size of the types hash tables (`types_hash_max_size`).
It is recommended that the minimum size possible size is used.
If {option}`recommendedOptimisation` is disabled, nginx would otherwise
fail to start since the mailmap `mime.types` database has more entries
than the nginx default value 1024.

- services.nginx.upstreams: Defines a group of servers to use as proxy target.

- services.nginx.user: User account under which nginx runs.
- services.nginx.uwsgiResolveWhileRunning: Resolves domains of uwsgi targets at runtime
and not only at start, you have to set
services.nginx.resolver, too.

- services.nginx.uwsgiTimeout: Change the uwsgi related timeouts in recommendedUwsgiSettings.

- services.nginx.validateConfigFile: Whether to enable validating configuration with pkgs.writeNginxConfig.
- services.nginx.virtualHosts: Declarative vhost config
- services.ngircd.config: The ngircd configuration (see {manpage}`ngircd.conf(5)`).
- services.ngircd.enable: Whether to enable the ngircd IRC server.
- services.ngircd.package: The ngircd package to use.
- services.nifi.enable: Whether to enable Apache NiFi.
- services.nifi.enableHTTPS: Enable HTTPS protocol. Don`t use in production.
- services.nifi.group: Group account where Apache NiFi runs.
- services.nifi.initJavaHeapSize: Set the initial heap size for the JVM in MB.
- services.nifi.initPasswordFile: nitial password for Apache NiFi. Password must be at least 12 characters.
- services.nifi.initUser: Initial user account for Apache NiFi. Username must be at least 4 characters.
- services.nifi.listenHost: Bind to an ip for Apache NiFi web-ui.
- services.nifi.listenPort: Bind to a port for Apache NiFi web-ui.
- services.nifi.maxJavaHeapSize: Set the initial heap size for the JVM in MB.
- services.nifi.package: The nifi package to use.
- services.nifi.proxyHost: Allow requests from a specific host.
- services.nifi.proxyPort: Allow requests from a specific port.
- services.nifi.user: User account where Apache NiFi runs.
- services.nipap.authBackendSettings: auth.backends options to set in /etc/nipap/nipap.conf.

- services.nipap.enable: Whether to enable global Neat IP Address Planner (NIPAP) configuration.
- services.nipap.nipap-www.enable: Whether to enable nipap-www server.
- services.nipap.nipap-www.host: Host to bind to.
- services.nipap.nipap-www.package: The nipap-www package to use.
- services.nipap.nipap-www.port: Port to bind to.
- services.nipap.nipap-www.umask: umask for files written by Gunicorn, including UNIX socket.
- services.nipap.nipap-www.unixSocket: Path to UNIX socket to bind to.
- services.nipap.nipap-www.workers: Number of worker processes for Gunicorn to fork.
- services.nipap.nipap-www.xmlrpcURIFile: Path to file containing XMLRPC URI for use by web UI - this is a secret, since it contains auth credentials. If null, it will be initialized assuming that the auth database is local.
- services.nipap.nipapd.database.createLocally: Create a nipap database automatically.
- services.nipap.nipapd.enable: Whether to enable nipapd server.
- services.nipap.nipapd.package: The nipap package to use.
- services.nipap.settings: Configuration options to set in /etc/nipap/nipap.conf.

- services.nipap.user: User to use for running NIPAP services.
- services.nitter.cache.listMinutes: How long to cache list info (not the tweets, so keep it high).
- services.nitter.cache.redisConnections: Redis connection pool size.
- services.nitter.cache.redisHost: Redis host.
- services.nitter.cache.redisMaxConnections: Maximum number of connections to Redis.

New connections are opened when none are available, but if the
pool size goes above this, they are closed when released, do not
worry about this unless you receive tons of requests per second.

- services.nitter.cache.redisPort: Redis port.
- services.nitter.cache.rssMinutes: How long to cache RSS queries.
- services.nitter.config.base64Media: Use base64 encoding for proxied media URLs.
- services.nitter.config.enableDebug: Whether to enable request logs and debug endpoints.
- services.nitter.config.enableRSS: Whether to enable RSS feeds.
- services.nitter.config.proxy: URL to a HTTP/HTTPS proxy.
- services.nitter.config.proxyAuth: Credentials for proxy.
- services.nitter.config.tokenCount: Minimum amount of usable tokens.

Tokens are used to authorize API requests, but they expire after
~1 hour, and have a limit of 187 requests. The limit gets reset
every 15 minutes, and the pool is filled up so there is always at
least tokenCount usable tokens. Only increase this if you receive
major bursts all the time.

- services.nitter.enable: Whether to enable Nitter, an alternative Twitter front-end.
- services.nitter.guestAccounts: Alias of {option}`services.nitter.sessionsFile`.
- services.nitter.openFirewall: Open ports in the firewall for Nitter web interface.
- services.nitter.package: The nitter package to use.
- services.nitter.preferences.autoplayGifs: Autoplay GIFs.
- services.nitter.preferences.bidiSupport: Support bidirectional text (makes clicking on tweets harder).
- services.nitter.preferences.hideBanner: Hide profile banner.
- services.nitter.preferences.hidePins: Hide pinned tweets.
- services.nitter.preferences.hideReplies: Hide tweet replies.
- services.nitter.preferences.hideTweetStats: Hide tweet stats (replies, retweets, likes).
- services.nitter.preferences.hlsPlayback: Enable HLS video streaming (requires JavaScript).
- services.nitter.preferences.infiniteScroll: Infinite scrolling (requires JavaScript, experimental!).
- services.nitter.preferences.mp4Playback: Enable MP4 video playback.
- services.nitter.preferences.muteVideos: Mute videos by default.
- services.nitter.preferences.proxyVideos: Proxy video streaming through the server (might be slow).
- services.nitter.preferences.replaceReddit: Replace Reddit links with links to this instance (blank to disable).
- services.nitter.preferences.replaceTwitter: Replace Twitter links with links to this instance (blank to disable).
- services.nitter.preferences.replaceYouTube: Replace YouTube links with links to this instance (blank to disable).
- services.nitter.preferences.squareAvatars: Square profile pictures.
- services.nitter.preferences.stickyProfile: Make profile sidebar stick to top.
- services.nitter.preferences.theme: Instance theme.
- services.nitter.redisCreateLocally: Configure local Redis server for Nitter.
- services.nitter.replaceInstagram
- services.nitter.server.address: The address to listen on.
- services.nitter.server.hostname: Hostname of the instance.
- services.nitter.server.httpMaxConnections: Maximum number of HTTP connections.
- services.nitter.server.https: Set secure attribute on cookies. Keep it disabled to enable cookies when not using HTTPS.
- services.nitter.server.port: The port to listen on.
- services.nitter.server.staticDir: Path to the static files directory.
- services.nitter.server.title: Title of the instance.
- services.nitter.sessionsFile: Path to the session tokens file.

This file contains a list of session tokens that can be used to
access the instance without logging in. The file is in JSONL format,
where each line is a JSON object with the following fields:

{"oauth_token":"some_token","oauth_token_secret":"some_secret_key"}

See <https://github.com/zedeus/nitter/wiki/Creating-session-tokens>
for more information on session tokens and how to generate them.

- services.nitter.settings: Add settings here to override NixOS module generated settings.

Check the official repository for the available settings:
<https://github.com/zedeus/nitter/blob/master/nitter.example.conf>

- services.nix-serve.bindAddress: IP address where nix-serve will bind its listening socket.

- services.nix-serve.enable: Whether to enable nix-serve, the standalone Nix binary cache server.
- services.nix-serve.extraParams: Extra command line parameters for nix-serve.

- services.nix-serve.openFirewall: Open ports in the firewall for nix-serve.
- services.nix-serve.package: The nix-serve package to use.
- services.nix-serve.port: Port number where nix-serve will listen on.

- services.nix-serve.secretKeyFile: The path to the file used for signing derivation data.
Generate with:

```
nix-store --generate-binary-cache-key key-name secret-key-file public-key-file
```

For more details see {manpage}`nix-store(1)`.

- services.nix-store-gcs-proxy: An attribute set describing an HTTP to GCS proxy that allows us to use GCS
bucket via HTTP protocol.

- services.nixops-dns.dnsmasq: Enable dnsmasq forwarding to nixops-dns. This allows to use
nixops-dns for `services.nixops-dns.domain` resolution
while forwarding the rest of the queries to original resolvers.

- services.nixops-dns.domain: Fake domain name to resolve to NixOps virtual machines.

For example "ops" will resolve "vm.ops".

- services.nixops-dns.enable: Whether to enable the nixops-dns resolution
of NixOps virtual machines via dnsmasq and fake domain name.

- services.nixops-dns.user: The user the nixops-dns daemon should run as.
This should be the user, which is also used for nixops and
have the .nixops directory in its home.

- services.nixosManual.enable: Alias of {option}`documentation.nixos.enable`.
- services.nixseparatedebuginfod.allowOldNix: Do not fail evaluation when {option}`services.nixseparatedebuginfod.nixPackage` is older than nix 2.18.

- services.nixseparatedebuginfod.enable: Whether to enable separatedebuginfod, a debuginfod server providing source and debuginfo for nix packages.
- services.nixseparatedebuginfod.nixPackage: The version of nix that nixseparatedebuginfod should use as client for the nix daemon. It is strongly advised to use nix version >= 2.18, otherwise some debug info may go missing.

- services.nixseparatedebuginfod.port: port to listen
- services.nixseparatedebuginfod2.cacheExpirationDelay: keep unused cache entries for this long. A number followed by a unit
- services.nixseparatedebuginfod2.enable: Whether to enable nixseparatedebuginfod2, a debuginfod server providing source and debuginfo for nix packages.
- services.nixseparatedebuginfod2.package: The nixseparatedebuginfod2 package to use.
- services.nixseparatedebuginfod2.port: port to listen
- services.nixseparatedebuginfod2.substituter: nix substituter to fetch debuginfo from. Either http/https substituters, or `local:` to use debuginfo present in the local store.
- services.nncp.caller.enable: Whether to enable cron'ed NNCP TCP daemon caller.
The daemon will take configuration from
[](#opt-programs.nncp.settings)
.
- services.nncp.caller.extraArgs: Extra command-line arguments to pass to caller.
- services.nncp.daemon.enable: Whether to enable NNCP TCP synronization daemon.
The daemon will take configuration from
[](#opt-programs.nncp.settings)
.
- services.nncp.daemon.extraArgs: Extra command-line arguments to pass to daemon.
- services.nncp.daemon.socketActivation.enable: Whether to enable socket activation for nncp-daemon.
- services.nncp.daemon.socketActivation.listenStreams: TCP sockets to bind to.
See [](#opt-systemd.sockets._name_.listenStreams).

- services.nntp-proxy.enable: Whether to enable NNTP-Proxy.
- services.nntp-proxy.listenAddress: Proxy listen address (IPv6 literal addresses need to be enclosed in "[" and "]" characters)

- services.nntp-proxy.port: Proxy listen port

- services.nntp-proxy.prohibitPosting: Whether to prohibit posting to the upstream server

- services.nntp-proxy.sslCert: Proxy ssl certificate path

- services.nntp-proxy.sslKey: Proxy ssl key path

- services.nntp-proxy.upstreamMaxConnections: Upstream server maximum allowed concurrent connections

- services.nntp-proxy.upstreamPassword: Upstream server password

- services.nntp-proxy.upstreamPort: Upstream server port

- services.nntp-proxy.upstreamServer: Upstream server address

- services.nntp-proxy.upstreamUser: Upstream server username

- services.nntp-proxy.users: NNTP-Proxy user configuration

- services.nntp-proxy.verbosity: Verbosity level

- services.node-red.configFile: Path to the JavaScript configuration file.
See <https://github.com/node-red/node-red/blob/master/packages/node_modules/node-red/settings.js>
for a configuration example.

- services.node-red.define: List of settings.js overrides to pass via -D to Node-RED.
- services.node-red.enable: Whether to enable the Node-RED service.
- services.node-red.group: Group under which Node-RED runs.If left as the default value this group
will automatically be created on system activation, otherwise the
sysadmin is responsible for ensuring the group exists.

- services.node-red.openFirewall: Open ports in the firewall for the server.

- services.node-red.package: The node-red package to use.
- services.node-red.port: Listening port.
- services.node-red.safe: Whether to launch Node-RED in --safe mode.
- services.node-red.user: User under which Node-RED runs.If left as the default value this user
will automatically be created on system activation, otherwise the
sysadmin is responsible for ensuring the user exists.

- services.node-red.userDir: The directory to store all user data, such as flow and credential files and all library data. If left
as the default value this directory will automatically be created before the node-red service starts,
otherwise the sysadmin is responsible for ensuring the directory exists with appropriate ownership
and permissions.

- services.node-red.withNpmAndGcc: Give Node-RED access to NPM and GCC at runtime, so 'Nodes' can be
downloaded and managed imperatively via the 'Palette Manager'.

- services.nomad.credentials: Credentials envs used to configure nomad secrets.

- services.nomad.dropPrivileges: Whether the nomad agent should be run as a non-root nomad user.

- services.nomad.enable: Whether to enable Nomad, a distributed, highly available, datacenter-aware scheduler.
- services.nomad.enableDocker: Enable Docker support. Needed for Nomad's docker driver.

Note that the docker group membership is effectively equivalent
to being root, see <https://github.com/moby/moby/issues/9976>.

- services.nomad.extraPackages: Extra packages to add to {env}`PATH` for the Nomad agent process.

- services.nomad.extraSettingsPaths: Additional settings paths used to configure nomad. These can be files or directories.

- services.nomad.extraSettingsPlugins: Additional plugins dir used to configure nomad.

- services.nomad.package: The nomad package to use.
- services.nomad.settings: Configuration for Nomad. See the [documentation](https://www.nomadproject.io/docs/configuration)
for supported values.

Notes about `data_dir`:

If `data_dir` is set to a value other than the
default value of `"/var/lib/nomad"` it is the Nomad
cluster manager's responsibility to make sure that this directory
exists and has the appropriate permissions.

Additionally, if `dropPrivileges` is
`true` then `data_dir`
*cannot* be customized. Setting
`dropPrivileges` to `true` enables
the `DynamicUser` feature of systemd which directly
manages and operates on `StateDirectory`.

- services.nominatim.database.apiUser: Postgresql database user with read-only permissions used for Nominatim
web API service.

- services.nominatim.database.dbname: Name of the postgresql database.
- services.nominatim.database.extraConnectionParams: Extra Nominatim database connection parameters.

Format:
<param1>=<value1>;<param2>=<value2>

See <https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-PARAMKEYWORDS>.

- services.nominatim.database.host: Host of the postgresql server. If not set to `localhost`, Nominatim
database and postgresql superuser with appropriate permissions must
exist on target host.

- services.nominatim.database.passwordFile: Password file used for Nominatim database connection.
Must be readable only for the Nominatim web API user.

The file must be a valid `.pgpass` file as described in:
<https://www.postgresql.org/docs/current/libpq-pgpass.html>

In most cases, the following will be enough:
```
*:*:*:*:<password>
```

- services.nominatim.database.port: Port of the postgresql database.
- services.nominatim.database.superUser: Postgresql database superuser used to create Nominatim database and
import data. If `database.host` is set to `localhost`, a unix user and
group of the same name will be automatically created.

- services.nominatim.enable: Whether to enable nominatim.

Also enables nginx virtual host management. Further nginx configuration
can be done by adapting `services.nginx.virtualHosts.<name>`.
See [](#opt-services.nginx.virtualHosts).

- services.nominatim.hostName: Hostname to use for the nginx vhost.
- services.nominatim.package: The nominatim-api package to use.
- services.nominatim.settings: Nominatim configuration settings.
For the list of available configuration options see
<https://nominatim.org/release-docs/latest/customize/Settings>.

- services.nominatim.ui.config: Nominatim UI configuration placed to theme/config.theme.js file.

For the list of available configuration options see
<https://github.com/osm-search/nominatim-ui/blob/master/dist/config.defaults.js>.

- services.nominatim.ui.package: The nominatim-ui package to use.
- services.nostr-rs-relay.dataDir: Directory for SQLite files.
- services.nostr-rs-relay.enable: Whether to enable nostr-rs-relay.
- services.nostr-rs-relay.package: The nostr-rs-relay package to use.
- services.nostr-rs-relay.port: Listen on this port.
- services.nostr-rs-relay.settings: See <https://git.sr.ht/~gheartsfield/nostr-rs-relay/#configuration> for documentation.
- services.novacomd.enable: Whether to enable Novacom service for connecting to WebOS devices.
- services.nscd.config: Configuration to use for Name Service Cache Daemon.
Only used in case glibc-nscd is used.

- services.nscd.enable: Whether to enable the Name Service Cache Daemon.
Disabling this is strongly discouraged, as this effectively disables NSS Lookups
from all non-glibc NSS modules, including the ones provided by systemd.

- services.nscd.enableNsncd: Whether to use nsncd instead of nscd from glibc.
This is a nscd-compatible daemon, that proxies lookups, without any caching.
Using nscd from glibc is discouraged.

- services.nscd.group: User group under which nscd runs.

- services.nscd.package: package containing the nscd binary to be used by the service.
Ignored when enableNsncd is set to true.

- services.nscd.user: User account under which nscd runs.

- services.nsd.bind8Stats: Whether to enable BIND8 like statistics.
- services.nsd.dnssecInterval: How often to check whether dnssec key rollover is required

- services.nsd.enable: Whether to enable NSD authoritative DNS server.
- services.nsd.extraConfig: Extra nsd config.

- services.nsd.hideVersion: Whether NSD should answer VERSION.BIND and VERSION.SERVER CHAOS class queries.

- services.nsd.identity: Identify the server (CH TXT ID.SERVER entry).

- services.nsd.interfaces: What addresses the server should listen to.

- services.nsd.ipFreebind: Whether to bind to nonlocal addresses and interfaces that are down.
Similar to ip-transparent.

- services.nsd.ipTransparent: Allow binding to non local addresses.

- services.nsd.ipv4: Whether to listen on IPv4 connections.

- services.nsd.ipv4EDNSSize: Preferred EDNS buffer size for IPv4.

- services.nsd.ipv6: Whether to listen on IPv6 connections.

- services.nsd.ipv6EDNSSize: Preferred EDNS buffer size for IPv6.

- services.nsd.keys: Define your TSIG keys here.

- services.nsd.logTimeAscii: Log time in ascii, if false then in unix epoch seconds.

- services.nsd.nsid: NSID identity (hex string, or "ascii_somestring").

- services.nsd.port: Port the service should bind do.

- services.nsd.ratelimit.enable: Whether to enable ratelimit capabilities.
- services.nsd.ratelimit.ipv4PrefixLength: IPv4 prefix length. Addresses are grouped by netblock.

- services.nsd.ratelimit.ipv6PrefixLength: IPv6 prefix length. Addresses are grouped by netblock.

- services.nsd.ratelimit.ratelimit: Max qps allowed from any query source.
0 means unlimited. With an verbosity of 2 blocked and
unblocked subnets will be logged.

- services.nsd.ratelimit.size: Size of the hashtable. More buckets use more memory but lower
the chance of hash hash collisions.

- services.nsd.ratelimit.slip: Number of packets that get discarded before replying a SLIP response.
0 disables SLIP responses. 1 will make every response a SLIP response.

- services.nsd.ratelimit.whitelistRatelimit: Max qps allowed from whitelisted sources.
0 means unlimited. Set the rrl-whitelist option for specific
queries to apply this limit instead of the default to them.

- services.nsd.remoteControl.controlCertFile: Path to the client certificate signed with the server certificate.
This file is used by nsd-control and generated by nsd-control-setup.

- services.nsd.remoteControl.controlKeyFile: Path to the client private key, which is used by nsd-control
but not by the server. This file is generated by nsd-control-setup.

- services.nsd.remoteControl.enable: Whether to enable remote control via nsd-control.
- services.nsd.remoteControl.interfaces: Which interfaces NSD should bind to for remote control.

- services.nsd.remoteControl.port: Port number for remote control operations (uses TLS over TCP).

- services.nsd.remoteControl.serverCertFile: Path to the server self signed certificate, which is used by the server
but and by nsd-control. This file is generated by nsd-control-setup.

- services.nsd.remoteControl.serverKeyFile: Path to the server private key, which is used by the server
but not by nsd-control. This file is generated by nsd-control-setup.

- services.nsd.reuseport: Whether to enable SO_REUSEPORT on all used sockets. This lets multiple
processes bind to the same port. This speeds up operation especially
if the server count is greater than one and makes fast restarts less
prone to fail

- services.nsd.rootServer: Whether this server will be a root server (a DNS root server, you
usually don't want that).

- services.nsd.roundRobin: Whether to enable round robin rotation of records.
- services.nsd.serverCount: Number of NSD servers to fork. Put the number of CPUs to use here.

- services.nsd.statistics: Statistics are produced every number of seconds. Prints to log.
If null no statistics are logged.

- services.nsd.tcpCount: Maximum number of concurrent TCP connections per server.

- services.nsd.tcpQueryCount: Maximum number of queries served on a single TCP connection.
0 means no maximum.

- services.nsd.tcpTimeout: TCP timeout in seconds.

- services.nsd.verbosity: Verbosity level.

- services.nsd.version: The version string replied for CH TXT version.server and version.bind
queries. Will use the compiled package version on null.
See hideVersion for enabling/disabling this responses.

- services.nsd.xfrdReloadTimeout: Number of seconds between reloads triggered by xfrd.

- services.nsd.zonefilesCheck: Whether to check mtime of all zone files on start and sighup.

- services.nsd.zonefilesWrite: Write changed secondary zones to their zonefile every N seconds.
If the zone (pattern) configuration has "" zonefile, it is not written.
Zones that have received zone transfer updates are written to their zonefile.
0 disables writing to zone files.

- services.nsd.zones: Define your zones here. Zones can cascade other zones and therefore
inherit settings from parent zones. Look at the definition of
children to learn about inheritance and child zones.
The given example will define 3 zones (example.(com|org|net).). Both
example.com. and example.org. inherit their configuration from
serverGroup1.

- services.ntfy-sh.enable: Whether to enable [ntfy-sh](https://ntfy.sh), a push notification service.
- services.ntfy-sh.environmentFile: Path to a file containing extra ntfy environment variables in the systemd `EnvironmentFile`
format. Refer to the [documentation](https://docs.ntfy.sh/config/) for config options.

This can be used to pass secrets such as creating declarative users or token without putting them in the Nix store.

- services.ntfy-sh.group: Primary group of ntfy-sh user.
- services.ntfy-sh.package: The ntfy-sh package to use.
- services.ntfy-sh.settings: Configuration for ntfy.sh, supported values are [here](https://ntfy.sh/docs/config/#config-options).

- services.ntfy-sh.user: User the ntfy-sh server runs under.
- services.ntopng.configText: Overridable configuration file contents to use for ntopng. By
default, use the contents automatically generated by NixOS.

- services.ntopng.enable: Enable ntopng, a high-speed web-based traffic analysis and flow
collection tool.

With the default configuration, ntopng monitors all network
interfaces and displays its findings at http://localhost:${toString
config.services.ntopng.http-port}. Default username and password is admin/admin.

See the {manpage}`ntopng(8)` manual page and http://www.ntop.org/products/ntop/
for more info.

Note that enabling ntopng will also enable redis (key-value
database server) for persistent data storage.

- services.ntopng.extraConfig: Configuration lines that will be appended to the generated ntopng
configuration file. Note that this mechanism does not work when the
manual {option}`configText` option is used.

- services.ntopng.http-port: Alias of {option}`services.ntopng.httpPort`.
- services.ntopng.httpPort: Sets the HTTP port of the embedded web server.

- services.ntopng.interfaces: List of interfaces to monitor. Use "any" to monitor all interfaces.

- services.ntopng.redis.address: Redis address - may be a Unix socket or a network host and port.

- services.ntopng.redis.createInstance: Local Redis instance name. Set to `null` to disable
local Redis instance. Defaults to `""` for
`system.stateVersion` older than 22.05.

- services.ntp.enable: Whether to synchronise your machine's time using ntpd, as a peer in
the NTP network.

Disables `systemd.timesyncd` if enabled.

- services.ntp.extraConfig: Additional text appended to {file}`ntp.conf`.

- services.ntp.extraFlags: Extra flags passed to the ntpd command.
- services.ntp.restrictDefault: The restriction flags to be set by default.

The default flags prevent external hosts from using ntpd as a DDoS
reflector, setting system time, and querying OS/ntpd version. As
recommended in section 6.5.1.1.3, answer "No" of
https://support.ntp.org/Support/AccessRestrictions

- services.ntp.restrictSource: The restriction flags to be set on source.

The default flags allow peers to be added by ntpd from configured
pool(s), but not by other means.

- services.ntp.servers: The set of NTP servers from which to synchronise.

- services.ntpd-rs.enable: Whether to enable Network Time Service (ntpd-rs).
- services.ntpd-rs.metrics.enable: Whether to enable ntpd-rs Prometheus Metrics Exporter.
- services.ntpd-rs.package: The ntpd-rs package to use.
- services.ntpd-rs.settings: Settings to write to {file}`ntp.toml`

See <https://docs.ntpd-rs.pendulum-project.org/man/ntp.toml.5>
for more information about available options.

- services.ntpd-rs.useNetworkingTimeServers: Use source time servers from {var}`networking.timeServers` in config.

- services.nullidentdmod.enable: Whether to enable the nullidentdmod identd daemon.
- services.nullidentdmod.userid: User ID to return. Set to null to return a random string each time.
- services.nullmailer.config.adminaddr: If set, all recipients to users at either "localhost" (the literal string)
or the canonical host name (from the me control attribute) are remapped to this address.
This is provided to allow local daemons to be able to send email to
"somebody@localhost" and have it go somewhere sensible instead of being  bounced
by your relay host. To send to multiple addresses,
put them all on one line separated by a comma.

- services.nullmailer.config.allmailfrom: If set, content will override the envelope sender on all messages.

- services.nullmailer.config.defaultdomain: The content of this attribute is appended to any host name that
does not contain a period (except localhost), including defaulthost
and idhost. Defaults to the value of the me attribute, if it exists,
otherwise the literal name defauldomain.

- services.nullmailer.config.defaulthost: The content of this attribute is appended to any address that
is missing a host name. Defaults to the value of the me control
attribute, if it exists, otherwise the literal name defaulthost.

- services.nullmailer.config.doublebounceto: If the original sender was empty (the original message was a
delivery status or disposition notification), the double bounce
is sent to the address in this attribute.

- services.nullmailer.config.helohost: Sets  the  environment variable $HELOHOST which is used by the
SMTP protocol module to set the parameter given to the HELO command.
Defaults to the value of the me configuration attribute.

- services.nullmailer.config.idhost: The content of this attribute is used when building the message-id
string for the message. Defaults to the canonicalized value of defaulthost.

- services.nullmailer.config.maxpause: The maximum time to pause between successive queue runs, in seconds.
Defaults to 24 hours (86400).

- services.nullmailer.config.me: The fully-qualifiled host name of the computer running nullmailer.
Defaults to the literal name me.

- services.nullmailer.config.pausetime: The minimum time to pause between successive queue runs when there
are messages in the queue, in seconds. Defaults to 1 minute (60).
Each time this timeout is reached, the timeout is doubled to a
maximum of maxpause. After new messages are injected, the timeout
is reset.  If this is set to 0, nullmailer-send will exit
immediately after going through the queue once (one-shot mode).

- services.nullmailer.config.remotes: A list of remote servers to which to send each message. Each line
contains a remote host name or address followed by an optional
protocol string, separated by white space.

See `man 8 nullmailer-send` for syntax and available
options.

WARNING: This is stored world-readable in the nix store. If you need
to specify any secret credentials here, consider using the
`remotesFile` option instead.

- services.nullmailer.config.sendtimeout: The  time to wait for a remote module listed above to complete sending
a message before killing it and trying again, in seconds.
Defaults to 1 hour (3600).  If this is set to 0, nullmailer-send
will wait forever for messages to complete sending.

- services.nullmailer.enable: Whether to enable nullmailer daemon.
- services.nullmailer.group: Group to use to run nullmailer-send.

- services.nullmailer.remotesFile: Path to the `remotes` control file. This file contains a
list of remote servers to which to send each message.

See `man 8 nullmailer-send` for syntax and available
options.

- services.nullmailer.setSendmail: Whether to set the system sendmail to nullmailer's.
- services.nullmailer.user: User to use to run nullmailer-send.

- services.nvme-rs.enable: Whether to enable nvme-rs, a monitoring service.
- services.nvme-rs.package: The nvme-rs package to use.
- services.nvme-rs.settings: Configuration for nvme-rs in TOML format.
See the config.toml example for all available options.

- services.nylon: Collection of named nylon instances
- services.nzbget.enable: Whether to enable NZBGet, for downloading files from news servers.
- services.nzbget.group: Group under which NZBGet runs
- services.nzbget.package: The nzbget package to use.
- services.nzbget.settings: NZBGet configuration, passed via command line using switch -o. Refer to
<https://github.com/nzbgetcom/nzbget/blob/develop/nzbget.conf>
for details on supported values.

- services.nzbget.user: User account under which NZBGet runs
- services.nzbhydra2.dataDir: The directory where NZBHydra2 stores its data files.
- services.nzbhydra2.enable: Whether to enable NZBHydra2, Usenet meta search.
- services.nzbhydra2.openFirewall: Open ports in the firewall for the NZBHydra2 web interface.
- services.nzbhydra2.package: The nzbhydra2 package to use.
- services.oauth2-proxy.approvalPrompt: OAuth approval_prompt.

- services.oauth2-proxy.azure.resource: The resource that is protected.

- services.oauth2-proxy.azure.tenant: Go to a tenant-specific or common (tenant-independent) endpoint.

- services.oauth2-proxy.basicAuthPassword: The password to set when passing the HTTP Basic Auth header.

- services.oauth2-proxy.clientID: The OAuth Client ID.

- services.oauth2-proxy.clientSecret: The OAuth Client Secret.

- services.oauth2-proxy.cookie.domain: Optional cookie domains to force cookies to (ie: `.yourcompany.com`).
The longest domain matching the request's host will be used (or the shortest
cookie domain if there is no match).

- services.oauth2-proxy.cookie.expire: Expire timeframe for cookie.

- services.oauth2-proxy.cookie.httpOnly: Set HttpOnly cookie flag.

- services.oauth2-proxy.cookie.name: The name of the cookie that the oauth_proxy creates.

- services.oauth2-proxy.cookie.refresh: Refresh the cookie after this duration; 0 to disable.

- services.oauth2-proxy.cookie.secret: The seed string for secure cookies.

- services.oauth2-proxy.cookie.secure: Set secure (HTTPS) cookie flag.

- services.oauth2-proxy.customTemplatesDir: Path to custom HTML templates.

- services.oauth2-proxy.email.addresses: Line-separated email addresses that are allowed to authenticate.

- services.oauth2-proxy.email.domains: Authenticate emails with the specified domains. Use
`*` to authenticate any email.

- services.oauth2-proxy.enable: Whether to enable oauth2-proxy.
- services.oauth2-proxy.extraConfig: Extra config to pass to oauth2-proxy.

- services.oauth2-proxy.github.org: Restrict logins to members of this organisation.

- services.oauth2-proxy.github.team: Restrict logins to members of this team.

- services.oauth2-proxy.google.adminEmail: The Google Admin to impersonate for API calls.

Only users with access to the Admin APIs can access the Admin SDK
Directory API, thus the service account needs to impersonate one of
those users to access the Admin SDK Directory API.

See <https://developers.google.com/admin-sdk/directory/v1/guides/delegation#delegate_domain-wide_authority_to_your_service_account>.

- services.oauth2-proxy.google.groups: Restrict logins to members of these Google groups.

- services.oauth2-proxy.google.serviceAccountJSON: The path to the service account JSON credentials.

- services.oauth2-proxy.htpasswd.displayForm: Display username / password login form if an htpasswd file is provided.

- services.oauth2-proxy.htpasswd.file: Additionally authenticate against a htpasswd file. Entries must be
created with `htpasswd -s` for SHA encryption.

- services.oauth2-proxy.httpAddress: HTTPS listening address.  This module does not expose the port by
default. If you want this URL to be accessible to other machines, please
add the port to `networking.firewall.allowedTCPPorts`.

- services.oauth2-proxy.keyFile: oauth2-proxy allows passing sensitive configuration via environment variables.
Make a file that contains lines like
OAUTH2_PROXY_CLIENT_SECRET=asdfasdfasdf.apps.googleuserscontent.com
and specify the path here.

- services.oauth2-proxy.loginURL: Authentication endpoint.

You only need to set this if you are using a self-hosted provider (e.g.
Github Enterprise). If you're using a publicly hosted provider
(e.g github.com), then the default works.

- services.oauth2-proxy.nginx.domain: The domain under which the oauth2-proxy will be accesible and the path of cookies are set to.
This setting must be set to ensure back-redirects are working properly
if oauth2-proxy is configured with {option}`services.oauth2-proxy.cookie.domain`
or multiple {option}`services.oauth2-proxy.nginx.virtualHosts` that are not on the same domain.

- services.oauth2-proxy.nginx.proxy: The address of the reverse proxy endpoint for oauth2-proxy

- services.oauth2-proxy.nginx.virtualHosts: Nginx virtual hosts to put behind the oauth2 proxy.
You can exclude specific locations by setting `auth_request off;` in the locations extraConfig setting.

- services.oauth2-proxy.oidcIssuerUrl: The OAuth issuer URL.

- services.oauth2-proxy.package: The oauth2-proxy package to use.
- services.oauth2-proxy.passAccessToken: Pass OAuth access_token to upstream via X-Forwarded-Access-Token header.

- services.oauth2-proxy.passBasicAuth: Pass HTTP Basic Auth, X-Forwarded-User and X-Forwarded-Email information to upstream.

- services.oauth2-proxy.passHostHeader: Pass the request Host Header to upstream.

- services.oauth2-proxy.profileURL: Profile access endpoint.

- services.oauth2-proxy.provider: OAuth provider.

- services.oauth2-proxy.proxyPrefix: The url root path that this proxy should be nested under.

- services.oauth2-proxy.redeemURL: Token redemption endpoint.

You only need to set this if you are using a self-hosted provider (e.g.
Github Enterprise). If you're using a publicly hosted provider
(e.g github.com), then the default works.

- services.oauth2-proxy.redirectURL: The OAuth2 redirect URL.

- services.oauth2-proxy.requestLogging: Log requests to stdout.

- services.oauth2-proxy.reverseProxy: In case when running behind a reverse proxy, controls whether headers
like `X-Real-Ip` are accepted. Usage behind a reverse
proxy will require this flag to be set to avoid logging the reverse
proxy IP address.

- services.oauth2-proxy.scope: OAuth scope specification.

- services.oauth2-proxy.setXauthrequest: Set X-Auth-Request-User and X-Auth-Request-Email response headers (useful in Nginx auth_request mode). Setting this to 'null' means using the upstream default (false).

- services.oauth2-proxy.signatureKey: GAP-Signature request signature key.

- services.oauth2-proxy.skipAuthRegexes: Skip authentication for requests matching any of these regular
expressions.

- services.oauth2-proxy.tls.certificate: Path to certificate file.

- services.oauth2-proxy.tls.enable: Whether to serve over TLS.

- services.oauth2-proxy.tls.httpsAddress: `addr:port` to listen on for HTTPS clients.

Remember to add `port` to
`allowedTCPPorts` if you want other machines to be
able to connect to it.

- services.oauth2-proxy.tls.key: Path to private key file.

- services.oauth2-proxy.upstream: The http url(s) of the upstream endpoint or `file://`
paths for static files. Routing is based on the path.

- services.oauth2-proxy.validateURL: Access token validation endpoint.

You only need to set this if you are using a self-hosted provider (e.g.
Github Enterprise). If you're using a publicly hosted provider
(e.g github.com), then the default works.

- services.oauth2_proxy: Alias of {option}`services.oauth2-proxy`.
- services.ocis.address: Web interface address.
- services.ocis.configDir: Path to directory containing oCIS config file.

Example config can be generated by `ocis init --config-path fileName --admin-password "adminPass"`.
Add `--insecure true` if SSL certificates are generated and managed externally (e.g. using oCIS behind reverse proxy).

Note: This directory must contain at least a `ocis.yaml`. Ensure
[user](#opt-services.ocis.user) has read/write access to it. In some
circumstances you may need to add additional oCIS configuration files (e.g.,
`proxy.yaml`) to this directory.

- services.ocis.enable: Whether to enable ownCloud Infinite Scale.
- services.ocis.environment: Extra config options.

See [the documentation](https://doc.owncloud.com/ocis/next/deployment/services/services.html) for available options.
See [notes for environment variables](https://doc.owncloud.com/ocis/next/deployment/services/env-var-note.html) for more information.

Note that all the attributes here will be copied to /nix/store/ and will be world readable. Options like *_PASSWORD or *_SECRET should be part of     [environmentFile](#opt-services.ocis.environmentFile) instead, and are only provided here for illustrative purpose.

Configuration here will override those from [environmentFile](#opt-services.ocis.environmentFile) and will have highest precedence, at the cost of security. Do NOT put security sensitive stuff here.

- services.ocis.environmentFile: An environment file as defined in {manpage}`systemd.exec(5)`.

Configuration provided in this file will override those from [configDir](#opt-services.ocis.configDir)/ocis.yaml.

- services.ocis.group: The group to run oCIS under.
By default, a group named `ocis` will be created.

- services.ocis.package: Which package to use for the ownCloud Infinite Scale instance.
- services.ocis.port: Web interface port.
- services.ocis.stateDir: ownCloud data directory.
- services.ocis.url: Web interface address.
- services.ocis.user: The user to run oCIS as.
By default, a user named `ocis` will be created whose home
directory is [stateDir](#opt-services.ocis.stateDir).

- services.ocserv.config: Configuration content to start an OCServ server.

For a full configuration reference,please refer to the online documentation
(https://ocserv.gitlab.io/www/manual.html), the openconnect
recipes (https://github.com/openconnect/recipes) or `man ocserv`.

- services.ocserv.enable: Whether to enable ocserv.
- services.ocsinventory-agent.enable: Whether to enable OCS Inventory Agent.
- services.ocsinventory-agent.interval: How often we run the ocsinventory-agent service. Runs by default every daily.

The format is described in
{manpage}`systemd.time(7)`.

- services.ocsinventory-agent.package: The ocsinventory-agent package to use.
- services.ocsinventory-agent.settings: Configuration for /etc/ocsinventory-agent/ocsinventory-agent.cfg.

Refer to
{manpage}`ocsinventory-agent(1)` for available options.

- services.octoprint.enable: Whether to enable OctoPrint, web interface for 3D printers.
- services.octoprint.extraConfig: Extra options which are added to OctoPrint's YAML configuration file.
- services.octoprint.group: Group for the daemon.
- services.octoprint.host: Host to bind OctoPrint to.

- services.octoprint.openFirewall: Open ports in the firewall for OctoPrint.
- services.octoprint.package: The octoprint package to use.
- services.octoprint.plugins: Additional plugins to be used. Available plugins are passed through the plugins input.
- services.octoprint.port: Port to bind OctoPrint to.

- services.octoprint.stateDir: State directory of the daemon.
- services.octoprint.user: User for the daemon.
- services.odoo.addons: Odoo addons.
- services.odoo.autoInit: Whether to enable automatically initialize the DB.
- services.odoo.autoInitExtraFlags: Extra flags passed to odoo when run for the first time by autoInit
- services.odoo.domain: Domain to host Odoo with nginx
- services.odoo.enable: Whether to enable odoo, an open source ERP and CRM system.
- services.odoo.package: The odoo package to use.
- services.odoo.settings: Odoo configuration settings. For more details see <https://www.odoo.com/documentation/15.0/administration/install/deploy.html>

- services.offlineimap.enable: Whether to enable OfflineIMAP, a software to dispose your mailbox(es) as a local Maildir(s).
- services.offlineimap.install: Whether to install a user service for Offlineimap. Once
the service is started, emails will be fetched automatically.

The service must be manually started for each user with
"systemctl --user start offlineimap" or globally through
{var}`services.offlineimap.enable`.

- services.offlineimap.onCalendar: How often is offlineimap started. Default is '*:0/3' meaning every 3 minutes. See {manpage}`systemd.time(7)` for more information about the format.
- services.offlineimap.package: The offlineimap package to use.
- services.offlineimap.path: List of derivations to put in Offlineimap's path.
- services.offlineimap.timeoutStartSec: How long waiting for offlineimap before killing it. Default is '120sec' meaning every 2 minutes. See {manpage}`systemd.time(7)` for more information about the format.
- services.ofono.enable: Whether to enable Ofono.
- services.ofono.plugins: The list of plugins to install.

- services.oidentd.enable: Whether to enable ‘oidentd’, an implementation of the Ident
protocol (RFC 1413).  It allows remote systems to identify the
name of the user associated with a TCP connection.

- services.oink.domains: List of attribute sets containing configuration for each domain.

Each attribute set must have two attributes, one named *domain*
and another named *subdomain*. The domain attribute must specify
the root domain that you want to configure, and the subdomain
attribute must specify its subdomain if any. If you want to
configure the root domain rather than a subdomain, leave the
subdomain attribute as an empty string.

Additionally, you can use attributes from *services.oink.settings*
to override settings per-domain.

Every domain listed here *must* have API access enabled in
Porkbun's control panel.

- services.oink.enable: Whether to enable Oink, a dynamic DNS client for Porkbun.
- services.oink.package: The oink package to use.
- services.oink.settings.apiKey: API key to use when modifying DNS records.
- services.oink.settings.interval: Seconds to wait before sending another request.
- services.oink.settings.secretApiKey: Secret API key to use when modifying DNS records.
- services.oink.settings.ttl: The TTL ("Time to Live") value to set for your DNS records.

The TTL controls how long in seconds your records will be cached
for. A smaller value will allow the record to update quicker.

- services.olivetin.enable: Whether to enable OliveTin.
- services.olivetin.extraConfigFiles: Config files to merge into the settings defined in [](#opt-services.olivetin.settings).
This is useful to avoid putting secrets into the nix store.
See <https://docs.olivetin.app/config.html> for more information.

- services.olivetin.group: The group under which OliveTin runs.
- services.olivetin.package: The olivetin package to use.
- services.olivetin.path: Packages added to the service's {env}`PATH`.

- services.olivetin.settings: Configuration of OliveTin. See <https://docs.olivetin.app/config.html> for more information.

- services.olivetin.user: The user account under which OliveTin runs.
- services.ollama.acceleration: What interface to use for hardware acceleration.

- `null`: default behavior
  - if `nixpkgs.config.rocmSupport` is enabled, uses `"rocm"`
  - if `nixpkgs.config.cudaSupport` is enabled, uses `"cuda"`
  - otherwise defaults to `false`
- `false`: disable GPU, only use CPU
- `"rocm"`: supported by most modern AMD GPUs
  - may require overriding gpu type with `services.ollama.rocmOverrideGfx`
    if rocm doesn't detect your AMD gpu
- `"cuda"`: supported by most modern NVIDIA GPUs

- services.ollama.enable: Whether to enable ollama server for local large language models.
- services.ollama.environmentVariables: Set arbitrary environment variables for the ollama service.

Be aware that these are only seen by the ollama server (systemd service),
not normal invocations like `ollama run`.
Since `ollama run` is mostly a shell around the ollama server, this is usually sufficient.

- services.ollama.group: Group under which to run ollama. Only used when `services.ollama.user` is set.

The group will automatically be created, if this option is set to a non-null value.

- services.ollama.home: The home directory that the ollama service is started in.

- services.ollama.host: The host address which the ollama server HTTP interface listens to.

- services.ollama.listenAddress
- services.ollama.loadModels: Download these models using `ollama pull` as soon as `ollama.service` has started.

This creates a systemd unit `ollama-model-loader.service`.

Search for models of your choice from: <https://ollama.com/library>

- services.ollama.models: The directory that the ollama service will read models from and download new models to.

- services.ollama.openFirewall: Whether to open the firewall for ollama.

This adds `services.ollama.port` to `networking.firewall.allowedTCPPorts`.

- services.ollama.package: The ollama package to use.
- services.ollama.port: Which port the ollama server listens to.

- services.ollama.rocmOverrideGfx: Override what rocm will detect your gpu model as.
For example, if you have an RX 5700 XT, try setting this to `"10.1.0"` (gfx 1010).

This sets the value of `HSA_OVERRIDE_GFX_VERSION`. See [ollama's docs](
https://github.com/ollama/ollama/blob/main/docs/gpu.md#amd-radeon
) for details.

- services.ollama.sandbox
- services.ollama.user: User account under which to run ollama. Defaults to [`DynamicUser`](https://www.freedesktop.org/software/systemd/man/latest/systemd.exec.html#DynamicUser=)
when set to `null`.

The user will automatically be created, if this option is set to a non-null value.

- services.ollama.writablePaths
- services.ombi.dataDir: The directory where Ombi stores its data files.
- services.ombi.enable: Whether to enable Ombi, a web application that automatically gives your shared Plex or
Emby users the ability to request content by themselves!

Optionally see <https://docs.ombi.app/info/reverse-proxy>
on how to set up a reverse proxy
.
- services.ombi.group: Group under which Ombi runs.
- services.ombi.openFirewall: Open ports in the firewall for the Ombi web interface.
- services.ombi.package: The ombi package to use.
- services.ombi.port: The port for the Ombi web interface.
- services.ombi.user: User account under which Ombi runs.
- services.omnom.dataDir: The directory where Omnom stores its data files.
- services.omnom.enable: Whether to enable Omnom, a webpage bookmarking and snapshotting service.
- services.omnom.group: The Omnom service group.
- services.omnom.openFirewall: Whether to open ports in the firewall.
- services.omnom.package: The omnom package to use.
- services.omnom.passwordFile: File containing the password for the SMTP user.
- services.omnom.port: The Omnom service port.
- services.omnom.settings: Configuration options for the /etc/omnom/config.yml file.

- services.omnom.user: The Omnom service user.
- services.oncall.database.createLocally: Whether to enable Create the database and database user locally..
- services.oncall.enable: Whether to enable Oncall web app.
- services.oncall.package: The oncall package to use.
- services.oncall.secretFile: A YAML file containing secrets such as database or user passwords.
Some variables that can be considered secrets are:

- db.conn.kwargs.password:
  Password used to authenticate to the database.

- session.encrypt_key:
  Key for encrypting/signing session cookies.
  Change to random long values in production.

- session.sign_key:
  Key for encrypting/signing session cookies.
  Change to random long values in production.

- services.oncall.settings: Extra configuration options to append or override.
For available and default option values see
[upstream configuration file](https://github.com/linkedin/oncall/blob/master/configs/config.yaml)
and the administration part in the
[offical documentation](https://oncall.tools/docs/admin_guide.html).

- services.onedrive.enable: Whether to enable OneDrive service.
- services.onedrive.package: The onedrive package to use.
- services.onlyoffice.enable: Whether to enable OnlyOffice DocumentServer.
- services.onlyoffice.enableExampleServer: Whether to enable OnlyOffice example server.
- services.onlyoffice.examplePort: Port the OnlyOffice example server should listen on.
- services.onlyoffice.hostname: FQDN for the OnlyOffice instance.
- services.onlyoffice.jwtSecretFile: Path to a file that contains the secret to sign web requests using JSON Web Tokens.
If left at the default value null signing is disabled.

- services.onlyoffice.package: The onlyoffice-documentserver package to use.
- services.onlyoffice.port: Port the OnlyOffice document server should listen on.
- services.onlyoffice.postgresHost: The Postgresql hostname or socket path OnlyOffice should connect to.
- services.onlyoffice.postgresName: The name of database OnlyOffice should use.
- services.onlyoffice.postgresPasswordFile: Path to a file that contains the password OnlyOffice should use to connect to Postgresql.
Unused when using socket authentication.

- services.onlyoffice.postgresUser: The username OnlyOffice should use to connect to Postgresql.
Unused when using socket authentication.

- services.onlyoffice.rabbitmqUrl: The Rabbitmq in amqp URI style OnlyOffice should connect to.
- services.onlyoffice.x2t: The x2t package to use.
- services.open-web-calendar.calendarSettings: Configure the default calendar.

See the documentation options in <https://open-web-calendar.quelltext.eu/host/configure/#configuring-the-default-calendar> and <https://github.com/niccokunzmann/open-web-calendar/blob/master/open_web_calendar/default_specification.yml>.

Individual calendar instances can be further configured outside this module, by specifying the `specification_url` parameter.

- services.open-web-calendar.domain: The domain under which open-web-calendar is made available
- services.open-web-calendar.enable: Whether to enable OpenWebCalendar service.
- services.open-web-calendar.package: The open-web-calendar package to use.
- services.open-web-calendar.settings: Configuration for the server. These are set as environment variables to the gunicorn/flask service.

See the documentation options in <https://open-web-calendar.quelltext.eu/host/configure/#configuring-the-server>.

- services.open-webui.enable: Whether to enable Open-WebUI server.
- services.open-webui.environment: Extra environment variables for Open-WebUI.
For more details see <https://docs.openwebui.com/getting-started/advanced-topics/env-configuration/>

- services.open-webui.environmentFile: Environment file to be passed to the systemd service.
Useful for passing secrets to the service to prevent them from being
world-readable in the Nix store.

- services.open-webui.host: The host address which the Open-WebUI server HTTP interface listens to.

- services.open-webui.openFirewall: Whether to open the firewall for Open-WebUI.
This adds `services.open-webui.port` to `networking.firewall.allowedTCPPorts`.

- services.open-webui.package: The open-webui package to use.
- services.open-webui.port: Which port the Open-WebUI server listens to.

- services.open-webui.stateDir: State directory of Open-WebUI.
- services.openafsClient.afsdb: Resolve cells via AFSDB DNS records.
- services.openafsClient.cache.blocks: Cache size in 1KB blocks.
- services.openafsClient.cache.chunksize: Size of each cache chunk given in powers of
2. `0` resets the chunk size to its default
values (13 (8 KB) for memcache, 18-20 (256 KB to 1 MB) for
diskcache). Maximum value is 30. Important performance
parameter. Set to higher values when dealing with large files.

- services.openafsClient.cache.directory: Cache directory.
- services.openafsClient.cache.diskless: Use in-memory cache for diskless machines. Has no real
performance benefit anymore.

- services.openafsClient.cellName: Cell name.
- services.openafsClient.cellServDB: This cell's database server records, added to the global
CellServDB. See {manpage}`CellServDB(5)` man page for syntax. Ignored when
`afsdb` is set to `true`.

- services.openafsClient.crypt: Whether to enable (weak) protocol encryption.
- services.openafsClient.daemons: Number of daemons to serve user requests. Numbers higher than 6
usually do no increase performance. Default is sufficient for up
to five concurrent users.

- services.openafsClient.enable: Whether to enable the OpenAFS client.
- services.openafsClient.fakestat: Return fake data on stat() calls. If `true`,
always do so. If `false`, only do so for
cross-cell mounts (as these are potentially expensive).

- services.openafsClient.inumcalc: Inode calculation method. `compat` is
computationally less expensive, but `md5` greatly
reduces the likelihood of inode collisions in larger scenarios
involving multiple cells mounted into one AFS space.

- services.openafsClient.mountPoint: Mountpoint of the AFS file tree, conventionally
`/afs`. When set to a different value, only
cross-cells that use the same value can be accessed.

- services.openafsClient.packages.module: OpenAFS kernel module package. MUST match the userland package!
- services.openafsClient.packages.programs: OpenAFS programs package. MUST match the kernel module package!
- services.openafsClient.sparse: Minimal cell list in /afs.
- services.openafsClient.startDisconnected: Start up in disconnected mode.  You need to execute
`fs disco online` (as root) to switch to
connected mode. Useful for roaming devices.

- services.openafsServer.advertisedAddresses: List of IP addresses this server is advertised under. See {manpage}`NetInfo(5)`
- services.openafsServer.cellName: Cell name, this server will serve.
- services.openafsServer.cellServDB: Definition of all cell-local database server machines.
- services.openafsServer.dottedPrincipals: If enabled, allow principal names containing (.) dots. Enabling
this has security implications!

- services.openafsServer.enable: Whether to enable the OpenAFS server. An OpenAFS server needs a
complex setup. So, be aware that enabling this service and setting
some options does not give you a turn-key-ready solution. You need
at least a running Kerberos 5 setup, as OpenAFS relies on it for
authentication. See the Guide "QuickStartUnix" coming with
`pkgs.openafs.doc` for complete setup
instructions.

- services.openafsServer.package: The openafs package to use.
- services.openafsServer.roles.backup.buserverArgs: Arguments to the buserver process. See its man page.
- services.openafsServer.roles.backup.cellServDB: Definition of all cell-local backup database server machines.
Use this when your cell uses less backup database servers than
other database server machines.

- services.openafsServer.roles.backup.enable: Whether to enable the backup server role. When using OpenAFS built-in buserver, use in conjunction with the
`database` role to maintain the Backup
Database. Normally only used in conjunction with tape storage
or IBM's Tivoli Storage Manager.

For a modern backup server, enable this role and see
{option}`enableFabs`
.
- services.openafsServer.roles.backup.enableFabs: Whether to enable FABS, the flexible AFS backup system. It stores volumes as dump files, relying on other
pre-existing backup solutions for handling them
.
- services.openafsServer.roles.backup.fabsArgs: Arguments to the fabsys process. See
{manpage}`fabsys_server(1)` and
{manpage}`fabsys_config(1)`.

- services.openafsServer.roles.backup.fabsExtraConfig: Additional configuration parameters for the FABS backup server.

- services.openafsServer.roles.database.enable: Database server role, maintains the Volume Location Database,
Protection Database (and Backup Database, see
`backup` role). There can be multiple
servers in the database role for replication, which then need
reliable network connection to each other.

Servers in this role appear in AFSDB DNS records or the
CellServDB.

- services.openafsServer.roles.database.ptserverArgs: Arguments to the ptserver process. See its man page.
- services.openafsServer.roles.database.vlserverArgs: Arguments to the vlserver process. See its man page.
- services.openafsServer.roles.fileserver.enable: Fileserver role, serves files and volumes from its local storage.
- services.openafsServer.roles.fileserver.fileserverArgs: Arguments to the dafileserver process. See its man page.
- services.openafsServer.roles.fileserver.salvagerArgs: Arguments to the dasalvager process. See its man page.
- services.openafsServer.roles.fileserver.salvageserverArgs: Arguments to the salvageserver process. See its man page.
- services.openafsServer.roles.fileserver.volserverArgs: Arguments to the davolserver process. See its man page.
- services.openafsServer.udpPacketSize: UDP packet size to use in Bytes. Higher values can speed up
communications. The default of 1 MB is a sufficient in most
cases. Make sure to increase the kernel's UDP buffer size
accordingly via `net.core(w|r|opt)mem_max`
sysctl.

- services.openarena.enable: Whether to enable OpenArena game server.
- services.openarena.extraFlags: Extra flags to pass to {command}`oa_ded`
- services.openarena.openPorts: Whether to open firewall ports for OpenArena
- services.openarena.package: The openarena package to use.
- services.openbao.enable: Whether to enable OpenBao daemon.
- services.openbao.extraArgs: Additional arguments given to OpenBao.

- services.openbao.package: The openbao package to use.
- services.openbao.settings: Settings of OpenBao.

See [documentation](https://openbao.org/docs/configuration) for more details.

- services.opencloud.address: Web server bind address.
- services.opencloud.enable: Whether to enable OpenCloud.
- services.opencloud.environment: Extra environment variables to set for the service.

Use this to set configuration that may affect multiple microservices.

Set `OC_INSECURE = "false"` if you want OpenCloud to terminate TLS.

Configuration provided here will override `settings`.

- services.opencloud.environmentFile: An environment file as defined in {manpage}`systemd.exec(5)`.

Use this to inject secrets, e.g. database or auth credentials out of band.

Configuration provided here will override `settings` and `environment`.

- services.opencloud.group: The group to run OpenCloud under.
By default, a group named `opencloud` will be created.

- services.opencloud.idpWebPackage: The idp-web package to use.
- services.opencloud.package: The opencloud package to use.
- services.opencloud.port: Web server port.
- services.opencloud.settings: Additional YAML configuration for OpenCloud services.

Every item in this attrset will be mapped to a .yaml file in /etc/opencloud.

The possible config options are currently not well documented, see source code:
https://github.com/opencloud-eu/opencloud/blob/main/pkg/config/config.go

- services.opencloud.stateDir: OpenCloud data directory.
- services.opencloud.url: Web interface root public URL, including scheme and port (if non-default).
- services.opencloud.user: The user to run OpenCloud as.
By default, a user named `opencloud` will be created whose home
directory is [](#opt-services.opencloud.stateDir).

- services.opencloud.webPackage: The web package to use.
- services.opendkim.configFile: Additional opendkim configuration as a file.
- services.opendkim.domains: Local domains set (see {manpage}`opendkim(8)` for more information on datasets).
Messages from them are signed, not verified.

- services.opendkim.enable: Whether to enable OpenDKIM sender authentication system.
- services.opendkim.group: Group for the daemon.
- services.opendkim.keyFile: Alias of {option}`services.opendkim.keyPath`.
- services.opendkim.keyPath: The path that opendkim should put its generated private keys into.
The DNS settings will be found in this directory with the name selector.txt.

- services.opendkim.selector: Selector to use when signing.
- services.opendkim.settings: Additional opendkim configuration
- services.opendkim.socket: Socket which is used for communication with OpenDKIM.
- services.opendkim.user: User for the daemon.
- services.openfire
- services.opengfw.dir: Working directory of the OpenGFW service and home of `opengfw.user`.

- services.opengfw.enable: Whether to enable OpenGFW, A flexible, easy-to-use, open source implementation of GFW on Linux
.
- services.opengfw.logFile: File to write the output to instead of systemd.

- services.opengfw.logFormat: Format of the logs. [logFormatMap](https://github.com/apernet/OpenGFW/blob/d7737e92117a11c9a6100d53019fac3b9d724fe3/cmd/root.go#L62)

- services.opengfw.logLevel: Level of the logs. [logLevelMap](https://github.com/apernet/OpenGFW/blob/d7737e92117a11c9a6100d53019fac3b9d724fe3/cmd/root.go#L55)

- services.opengfw.package: The opengfw package to use.
- services.opengfw.pcapReplay: Path to PCAP replay file.
In pcap mode, none of the actions in the rules have any effect.
This mode is mainly for debugging.

- services.opengfw.rules: Rules passed to OpenGFW. [Example rules](https://gfw.dev/docs/rules)

- services.opengfw.rulesFile: Path to file containing OpenGFW rules.

- services.opengfw.settings: Settings passed to OpenGFW. [Example config](https://gfw.dev/docs/build-run/#config-example)

- services.opengfw.settingsFile: Path to file containing OpenGFW settings.

- services.opengfw.user: Username of the OpenGFW user.
- services.openiscsi.discoverPortal: Portal to discover targets on
- services.openiscsi.enable: Whether to enable the openiscsi iscsi daemon.
- services.openiscsi.enableAutoLoginOut: Whether to enable automatic login and logout of all automatic targets.
You probably do not want this
.
- services.openiscsi.extraConfig: Lines to append to default iscsid.conf
- services.openiscsi.extraConfigFile: Append an additional file's contents to /etc/iscsid.conf. Use a non-store path
and store passwords in this file.

- services.openiscsi.name: Name of this iscsi initiator
- services.openiscsi.package: The openiscsi package to use.
- services.openldap.configDir: Use this config directory instead of generating one from the
`settings` option. Overrides all NixOS settings.

- services.openldap.declarativeContents: Declarative contents for the LDAP database, in LDIF format by suffix.

All data will be erased when starting the LDAP server. Modifications
to the database are not prevented, they are just dropped on the next
reboot of the server. Performance-wise the database and indexes are
rebuilt on each server startup, so this will slow down server startup,
especially with large databases.

Note that the root of the DB must be defined in
`services.openldap.settings` and the
`olcDbDirectory` must begin with
`"/var/lib/openldap"`.

- services.openldap.enable: Whether to enable the ldap server.
- services.openldap.group: Group account under which slapd runs.
- services.openldap.mutableConfig: Whether to allow writable on-line configuration. If
`true`, the NixOS settings will only be used to
initialize the OpenLDAP configuration if it does not exist, and are
subsequently ignored.

- services.openldap.package: The openldap package to use. This can be used to, for example, set an OpenLDAP package
with custom overrides to enable modules or other
functionality.

- services.openldap.settings: Configuration for OpenLDAP, in OLC format
- services.openldap.urlList: URL list slapd should listen on.
- services.openldap.user: User account under which slapd runs.
- services.openntpd.enable: Whether to enable OpenNTP time synchronization server.
- services.openntpd.extraConfig: Additional text appended to {file}`openntpd.conf`.

- services.openntpd.extraOptions: Extra options used when launching openntpd.

- services.openntpd.servers: The set of NTP servers from which to synchronise.

- services.opensearch.dataDir: Data directory for OpenSearch. If you change this, you need to
manually create the directory. You also need to create the
`opensearch` user and group, or change
[](#opt-services.opensearch.user) and
[](#opt-services.opensearch.group) to existing ones with
access to the directory.

- services.opensearch.enable: Whether to enable OpenSearch.
- services.opensearch.extraCmdLineOptions: Extra command line options for the OpenSearch launcher.
- services.opensearch.extraJavaOptions: Extra command line options for Java.
- services.opensearch.group: The group OpenSearch runs as. Should be left at default unless
you have very specific needs.

- services.opensearch.logging: opensearch logging configuration.
- services.opensearch.package: The OpenSearch package to use.
- services.opensearch.restartIfChanged: Automatically restart the service on config change.
This can be set to false to defer restarts on a server or cluster.
Please consider the security implications of inadvertently running an older version,
and the possibility of unexpected behavior caused by inconsistent versions across a cluster when disabling this option.

- services.opensearch.settings: OpenSearch configuration.

- services.opensearch.user: The user OpenSearch runs as. Should be left at default unless
you have very specific needs.

- services.opensmtpd.addSendmailToSystemPath: Alias of {option}`services.opensmtpd.setSendmail`.
- services.opensmtpd.enable: Whether to enable the OpenSMTPD server.
- services.opensmtpd.extraServerArgs: Extra command line arguments provided when the smtpd process
is started.

- services.opensmtpd.package: The opensmtpd package to use.
- services.opensmtpd.procPackages: Packages to search for filters, tables, queues, and schedulers.

Add packages here if you want to use them as as such, for example
from the opensmtpd-table-* packages.

- services.opensmtpd.serverConfiguration: The contents of the smtpd.conf configuration file. See the
OpenSMTPD documentation for syntax information.

- services.opensmtpd.setSendmail: Whether to set the system sendmail to OpenSMTPD's.
- services.opensnitch.enable: Whether to enable Opensnitch application firewall.
- services.opensnitch.package: The opensnitch package to use.
- services.opensnitch.rules: Declarative configuration of firewall rules.
All rules will be stored in `/var/lib/opensnitch/rules` by default.
Rules path can be configured with `settings.Rules.Path`.
See [upstream documentation](https://github.com/evilsocket/opensnitch/wiki/Rules)
for available options.

- services.opensnitch.settings: opensnitchd configuration. Refer to [upstream documentation](https://github.com/evilsocket/opensnitch/wiki/Configurations)
for details on supported values.

- services.openssh.allowSFTP: Whether to enable the SFTP subsystem in the SSH daemon.  This
enables the use of commands such as {command}`sftp` and
{command}`sshfs`.

- services.openssh.authorizedKeysCommand: Specifies a program to be used to look up the user's public
keys. The program must be owned by root, not writable by group
or others and specified by an absolute path.

- services.openssh.authorizedKeysCommandUser: Specifies the user under whose account the AuthorizedKeysCommand
is run. It is recommended to use a dedicated user that has no
other role on the host than running authorized keys commands.

- services.openssh.authorizedKeysFiles: Specify the rules for which files to read on the host.

This is an advanced option. If you're looking to configure user
keys, you can generally use [](#opt-users.users._name_.openssh.authorizedKeys.keys)
or [](#opt-users.users._name_.openssh.authorizedKeys.keyFiles).

These are paths relative to the host root file system or home
directories and they are subject to certain token expansion rules.
See AuthorizedKeysFile in man sshd_config for details.

- services.openssh.authorizedKeysInHomedir: Enables the use of the `~/.ssh/authorized_keys` file.

Otherwise, the only files trusted by default are those in `/etc/ssh/authorized_keys.d`,
*i.e.* SSH keys from [](#opt-users.users._name_.openssh.authorizedKeys.keys).

- services.openssh.banner: Message to display to the remote user before authentication is allowed.

- services.openssh.challengeResponseAuthentication: Alias of {option}`services.openssh.kbdInteractiveAuthentication`.
- services.openssh.ciphers: Alias of {option}`services.openssh.settings.Ciphers`.
- services.openssh.enable: Whether to enable the OpenSSH secure shell daemon, which
allows secure remote logins.

- services.openssh.extraConfig: Verbatim contents of {file}`sshd_config`.
- services.openssh.forwardX11: Alias of {option}`services.openssh.settings.X11Forwarding`.
- services.openssh.gatewayPorts: Alias of {option}`services.openssh.settings.GatewayPorts`.
- services.openssh.hostKeys: NixOS can automatically generate SSH host keys.  This option
specifies the path, type and size of each key.  See
{manpage}`ssh-keygen(1)` for supported types
and sizes.

- services.openssh.kbdInteractiveAuthentication: Alias of {option}`services.openssh.settings.KbdInteractiveAuthentication`.
- services.openssh.kexAlgorithms: Alias of {option}`services.openssh.settings.KexAlgorithms`.
- services.openssh.knownHosts: Alias of {option}`programs.ssh.knownHosts`.
- services.openssh.listenAddresses: List of addresses and ports to listen on (ListenAddress directive
in config). If port is not specified for address sshd will listen
on all ports specified by `ports` option.
NOTE: this will override default listening on all local addresses and port 22.
NOTE: setting this option won't automatically enable given ports
in firewall configuration.

- services.openssh.logLevel: Alias of {option}`services.openssh.settings.LogLevel`.
- services.openssh.macs: Alias of {option}`services.openssh.settings.Macs`.
- services.openssh.moduliFile: Path to `moduli` file to install in
`/etc/ssh/moduli`. If this option is unset, then
the `moduli` file shipped with OpenSSH will be used.

- services.openssh.openFirewall: Whether to automatically open the specified ports in the firewall.

- services.openssh.package: OpenSSH package to use for sshd.
- services.openssh.passwordAuthentication: Alias of {option}`services.openssh.settings.PasswordAuthentication`.
- services.openssh.permitRootLogin: Alias of {option}`services.openssh.settings.PermitRootLogin`.
- services.openssh.ports: Specifies on which ports the SSH daemon listens.

- services.openssh.settings: Configuration for `sshd_config(5)`.
- services.openssh.sftpFlags: Commandline flags to add to sftp-server.

- services.openssh.sftpServerExecutable: The sftp server executable.  Can be a path or "internal-sftp" to use
the sftp server built into the sshd binary.

- services.openssh.startWhenNeeded: If set, {command}`sshd` is socket-activated; that
is, instead of having it permanently running as a daemon,
systemd will start an instance for each incoming connection.

- services.openssh.useDns: Alias of {option}`services.openssh.settings.UseDns`.
- services.opentelemetry-collector.configFile: Specify a path to a configuration file that Opentelemetry Collector should use.

- services.opentelemetry-collector.enable: Whether to enable Opentelemetry Collector.
- services.opentelemetry-collector.package: The opentelemetry-collector package to use.
- services.opentelemetry-collector.settings: Specify the configuration for Opentelemetry Collector in Nix.

See <https://opentelemetry.io/docs/collector/configuration/> for available options.

- services.opentracker.enable: Whether to enable opentracker.
- services.opentracker.extraOptions: Configuration Arguments for opentracker
See <https://erdgeist.org/arts/software/opentracker/> for all params

- services.opentracker.package: The opentracker package to use.
- services.opentsdb.config: The contents of OpenTSDB's configuration file

- services.opentsdb.enable: Whether to enable OpenTSDB.
- services.opentsdb.group: Group account under which OpenTSDB runs.

- services.opentsdb.package: The opentsdb package to use.
- services.opentsdb.port: Which port OpenTSDB listens on.

- services.opentsdb.user: User account under which OpenTSDB runs.

- services.openvpn.enable
- services.openvpn.restartAfterSleep: Whether OpenVPN client should be restarted after sleep.
- services.openvpn.servers: Each attribute of this option defines a systemd service that
runs an OpenVPN instance.  These can be OpenVPN servers or
clients.  The name of each systemd service is
`openvpn-«name».service`,
where «name» is the corresponding
attribute name.

- services.openvscode-server.connectionToken: A secret that must be included with all requests.

- services.openvscode-server.connectionTokenFile: Path to a file that contains the connection token.

- services.openvscode-server.enable: Whether to enable openvscode-server.
- services.openvscode-server.extensionsDir: Set the root path for extensions.

- services.openvscode-server.extraArguments: Additional arguments to pass to openvscode-server.

- services.openvscode-server.extraEnvironment: Additional environment variables to pass to openvscode-server.

- services.openvscode-server.extraGroups: An array of additional groups for the `openvscode-server` user.

- services.openvscode-server.extraPackages: Additional packages to add to the openvscode-server {env}`PATH`.

- services.openvscode-server.group: The group to run openvscode-server under.
By default, a group named `openvscode-server` will be created.

- services.openvscode-server.host: The host name or IP address the server should listen to.

- services.openvscode-server.package: The openvscode-server package to use.
- services.openvscode-server.port: The port the server should listen to. If 0 is passed a random free port is picked. If a range in the format num-num is passed, a free port from the range (end inclusive) is selected.

- services.openvscode-server.serverDataDir: Specifies the directory that server data is kept in.

- services.openvscode-server.socketPath: The path to a socket file for the server to listen to.

- services.openvscode-server.telemetryLevel: Sets the initial telemetry level. Valid levels are: 'off', 'crash', 'error' and 'all'.

- services.openvscode-server.user: The user to run openvscode-server as.
By default, a user named `openvscode-server` will be created.

- services.openvscode-server.userDataDir: Specifies the directory that user data is kept in. Can be used to open multiple distinct instances of Code.

- services.openvscode-server.withoutConnectionToken: Run without a connection token. Only use this if the connection is secured by other means.

- services.openwebrx.enable: Whether to enable OpenWebRX Web interface for Software-Defined Radios on http://localhost:8073.
- services.openwebrx.package: The openwebrx package to use.
- services.opkssh.authorizations: User authorization mappings
- services.opkssh.enable: Whether to enable OpenID Connect SSH authentication.
- services.opkssh.group: System group for opkssh
- services.opkssh.package: The opkssh package to use.
- services.opkssh.providers: OpenID Connect providers configuration
- services.opkssh.user: System user for running opkssh
- services.orangefs.client.enable: Whether to enable OrangeFS client daemon.
- services.orangefs.client.extraOptions: Extra command line options for pvfs2-client.
- services.orangefs.client.fileSystems: The orangefs file systems to be mounted.
This option is preferred over using {option}`fileSystems` directly since
the pvfs client service needs to be running for it to be mounted.

- services.orangefs.server.BMIModules: List of BMI modules to load.
- services.orangefs.server.dataStorageSpace: Directory for data storage.
- services.orangefs.server.enable: Whether to enable OrangeFS server.
- services.orangefs.server.extraConfig: Extra config for the global section.
- services.orangefs.server.extraDefaults: Extra config for `<Defaults>` section.
- services.orangefs.server.fileSystems: These options will create the `<FileSystem>` sections of config file.

- services.orangefs.server.logType: Destination for log messages.
- services.orangefs.server.metadataStorageSpace: Directory for meta data storage.
- services.orangefs.server.servers: URLs for storage server including port. The attribute names define the server alias.
- services.orca.enable: Whether to enable Orca screen reader.
- services.orca.package: The orca package to use.
- services.orthanc.enable: Whether to enable Orthanc server.
- services.orthanc.environment: Extra environment variables
For more details see <https://orthanc.uclouvain.be/book/users/configuration.html>

- services.orthanc.environmentFile: Environment file to be passed to the systemd service.
Useful for passing secrets to the service to prevent them from being
world-readable in the Nix store.

- services.orthanc.openFirewall: Whether to open the firewall for Orthanc.
This adds `services.orthanc.settings.HttpPort` to `networking.firewall.allowedTCPPorts`.

- services.orthanc.package: The orthanc package to use.
- services.orthanc.settings: Configuration written to a json file that is read by orthanc.
See <https://orthanc.uclouvain.be/book/index.html> for more.

- services.orthanc.stateDir: State directory of Orthanc.
- services.osquery.enable: Whether to enable osqueryd daemon.
- services.osquery.flags: Attribute set of flag names and values to be written to the osqueryd flagfile.
For more information, refer to <https://osquery.readthedocs.io/en/stable/installation/cli-flags>.

- services.osquery.settings: Configuration to be written to the osqueryd JSON configuration file.
To understand the configuration format, refer to <https://osquery.readthedocs.io/en/stable/deployment/configuration/#configuration-components>.

- services.osrm.address: IP address on which the web server will listen.
- services.osrm.algorithm: Algorithm to use for the data. Must be one of CH, CoreCH, MLD
- services.osrm.dataFile: Data file location
- services.osrm.enable: Enable the OSRM service.
- services.osrm.extraFlags: Extra command line arguments passed to osrm-routed
- services.osrm.port: Port on which the web server will run.
- services.osrm.threads: Number of threads to use.
- services.ostinato.enable: Whether to enable Ostinato agent-controller (Drone).
- services.ostinato.port: Port to listen on.

- services.ostinato.portList.exclude: A list of ports does not appear on the port list managed by drone.

- services.ostinato.portList.include: For a port to pass the filter and appear on the port list managed
by drone, it be allowed by this include list.

- services.ostinato.rateAccuracy: To ensure that the actual transmit rate is as close as possible to
the configured transmit rate, Drone runs a busy-wait loop.
While this provides the maximum accuracy possible, the CPU
utilization is 100% while the transmit is on. You can however,
sacrifice the accuracy to reduce the CPU load.

- services.ostinato.rpcServer.address: By default, the Drone RPC server will listen on all interfaces and
local IPv4 addresses for incoming connections from clients.  Specify
a single IPv4 or IPv6 address if you want to restrict that.
To listen on any IPv6 address, use ::

- services.outline.azureAuthentication: To configure Microsoft/Azure auth, you'll need to create an OAuth
Client. See
[the guide](https://wiki.generaloutline.com/share/dfa77e56-d4d2-4b51-8ff8-84ea6608faa4)
for details on setting up your Azure App.

- services.outline.cdnUrl: If using a Cloudfront/Cloudflare distribution or similar it can be set
using this option. This will cause paths to JavaScript files,
stylesheets and images to be updated to the hostname defined here. In
your CDN configuration the origin server should be set to public URL.

- services.outline.concurrency: How many processes should be spawned. For a rough estimate, divide your
server's available memory by 512.

- services.outline.databaseUrl: URI to use for the main PostgreSQL database. If this needs to include
credentials that shouldn't be world-readable in the Nix store, set an
environment file on the systemd service and override the
`DATABASE_URL` entry. Pass the string
`local` to setup a database on the local server.

- services.outline.debugOutput: Set this to `http` log HTTP requests.
- services.outline.defaultLanguage: The default interface language. See
[translate.getoutline.com](https://translate.getoutline.com/)
for a list of available language codes and their rough percentage
translated.

- services.outline.discordAuthentication: To configure Discord auth, you'll need to create an application at
<https://discord.com/developers/applications/>

See <https://docs.getoutline.com/s/hosting/doc/discord-g4JdWFFub6>
for details on setting up your Discord app.

- services.outline.enable: Whether to enable outline.
- services.outline.enableUpdateCheck: Have the installation check for updates by sending anonymized statistics
to the maintainers.

- services.outline.forceHttps: Auto-redirect to HTTPS in production. The default is
`true` but you may set this to `false`
if you can be sure that SSL is terminated at an external loadbalancer.

- services.outline.googleAnalyticsId: Optionally enable Google Analytics to track page views in the knowledge
base.

- services.outline.googleAuthentication: To configure Google auth, you'll need to create an OAuth Client ID at
<https://console.cloud.google.com/apis/credentials>

When configuring the Client ID, add an Authorized redirect URI to
`https://[publicUrl]/auth/google.callback`.

- services.outline.group: Group under which the service should run. If this is the default value,
the group will be created.

- services.outline.logo: Custom logo displayed on the authentication screen. This will be scaled
to a height of 60px.

- services.outline.maximumImportSize: The maximum size of document imports. Overriding this could be required
if you have especially large Word documents with embedded imagery.

- services.outline.oidcAuthentication: To configure generic OIDC auth, you'll need some kind of identity
provider. See the documentation for whichever IdP you use to fill out
all the fields. The redirect URL is
`https://[publicUrl]/auth/oidc.callback`.

- services.outline.package: Outline package to use.
- services.outline.port: Listening port.
- services.outline.publicUrl: The fully qualified, publicly accessible URL
- services.outline.rateLimiter.durationWindow: Length of a throttling window.
- services.outline.rateLimiter.enable: Whether to enable rate limiter for the application web server.
- services.outline.rateLimiter.requests: Maximum number of requests in a throttling window.
- services.outline.redisUrl: Connection to a redis server. If this needs to include credentials
that shouldn't be world-readable in the Nix store, set an environment
file on the systemd service and override the
`REDIS_URL` entry. Pass the string
`local` to setup a local Redis database.

- services.outline.secretKeyFile: File path that contains the application secret key. It must be 32
bytes long and hex-encoded. If the file does not exist, a new key will
be generated and saved here.

- services.outline.sentryDsn: Optionally enable [Sentry](https://sentry.io/) to
track errors and performance.

- services.outline.sentryTunnel: Optionally add a
[Sentry proxy tunnel](https://docs.sentry.io/platforms/javascript/troubleshooting/#using-the-tunnel-option)
for bypassing ad blockers in the UI.

- services.outline.sequelizeArguments
- services.outline.slackAuthentication: To configure Slack auth, you'll need to create an Application at
<https://api.slack.com/apps>

When configuring the Client ID, add a redirect URL under "OAuth & Permissions"
to `https://[publicUrl]/auth/slack.callback`.

- services.outline.slackIntegration: For a complete Slack integration with search and posting to channels
this configuration is also needed. See here for details:
<https://wiki.generaloutline.com/share/be25efd1-b3ef-4450-b8e5-c4a4fc11e02a>

- services.outline.smtp: To support sending outgoing transactional emails such as
"document updated" or "you've been invited" you'll need to provide
authentication for an SMTP server.

- services.outline.sslCertFile: File path that contains the Base64-encoded certificate for HTTPS
termination. This is only required if you do not use an external reverse
proxy. See
[the documentation](https://wiki.generaloutline.com/share/dfa77e56-d4d2-4b51-8ff8-84ea6608faa4).

- services.outline.sslKeyFile: File path that contains the Base64-encoded private key for HTTPS
termination. This is only required if you do not use an external reverse
proxy. See
[the documentation](https://wiki.generaloutline.com/share/dfa77e56-d4d2-4b51-8ff8-84ea6608faa4).

- services.outline.storage: To support uploading of images for avatars and document attachments an
s3-compatible storage can be provided. AWS S3 is recommended for
redundancy however if you want to keep all file storage local an
alternative such as [minio](https://github.com/minio/minio)
can be used.
Local filesystem storage can also be used.

A more detailed guide on setting up storage is available
[here](https://docs.getoutline.com/s/hosting/doc/file-storage-N4M0T6Ypu7).

- services.outline.user: User under which the service should run. If this is the default value,
the user will be created, with the specified group as the primary
group.

- services.outline.utilsSecretFile: File path that contains the utility secret key. If the file does not
exist, a new key will be generated and saved here.

- services.overseerr.enable: Whether to enable Overseerr, a request management and media discovery tool for the Plex ecosystem.
- services.overseerr.openFirewall: Open a port in the firewall for the Overseerr web interface.
- services.overseerr.package: The overseerr package to use.
- services.overseerr.port: The port which the Overseerr web UI should listen on.
- services.owamp.enable: Whether to enable OWAMP server.
- services.owncast.dataDir: The directory where owncast stores its data files. If left as the default value this directory will automatically be created before the owncast server starts, otherwise the sysadmin is responsible for ensuring the directory exists with appropriate ownership and permissions.

- services.owncast.enable: Whether to enable owncast, a video live streaming solution.
- services.owncast.group: Group under which owncast runs.
- services.owncast.listen: The IP address to bind the owncast web server to.
- services.owncast.openFirewall: Open the appropriate ports in the firewall for owncast.

- services.owncast.port: TCP port where owncast web-gui listens.

- services.owncast.rtmp-port: TCP port where owncast rtmp service listens.

- services.owncast.user: User account under which owncast runs.
- services.oxidized.configFile: Path to the oxidized configuration file.

- services.oxidized.dataDir: State directory for the oxidized service.
- services.oxidized.enable: Whether to enable the oxidized configuration backup service.
- services.oxidized.group: Group under which the oxidized service runs.

- services.oxidized.package: The oxidized package to use.
- services.oxidized.routerDB: Path to the file/database which contains the targets for oxidized.

- services.oxidized.user: User under which the oxidized service runs.

- services.pacemaker.enable: Whether to enable pacemaker.
- services.pacemaker.package: The pacemaker package to use.
- services.packagekit.backend
- services.packagekit.enable: Whether to enable PackageKit, a cross-platform D-Bus abstraction layer for
installing software. Software utilizing PackageKit can install
software regardless of the package manager
.
- services.packagekit.settings: Additional settings passed straight through to PackageKit.conf
- services.packagekit.vendorSettings: Additional settings passed straight through to Vendor.conf
- services.pairdrop.enable: Whether to enable pairdrop.
- services.pairdrop.environment: Additional configuration (environment variables) for PairDrop, see
<https://github.com/schlagmichdoch/PairDrop/blob/master/docs/host-your-own.md#environment-variables>
for supported values.

- services.pairdrop.package: The pairdrop package to use.
- services.pairdrop.port: The port to listen on.
- services.pairdrop.rtcConfig: Configuration for STUN/TURN servers.
This is converted to JSON and written into a file automatically.
If you want to provide a file path instead, set `RTC_CONFIG` in {option}`services.pairdrop.environment`.

- services.paisa.enable: Whether to enable Paisa personal finance manager.
- services.paisa.host: Host bind IP address.
- services.paisa.mutableSettings: Allow changes made on the web interface to persist between service
restarts.

- services.paisa.openFirewall: Open ports in the firewall for the Paisa web server.
- services.paisa.package: The paisa package to use.
- services.paisa.port: Port to serve Paisa on.
- services.paisa.settings: Paisa configuration. Please refer to
<https://paisa.fyi/reference/config/> for details.

On start and if `mutableSettings` is `true`, these options are merged
into the configuration file on start, taking precedence over
configuration changes made on the web interface.

- services.pangolin.baseDomain: Your base fully qualified domain name (without any subdomains).

- services.pangolin.dashboardDomain: The domain where the application will be hosted. This is used for many things, including generating links. You can run Pangolin on a subdomain or root domain. Do not prefix with `http` or `https`.

- services.pangolin.dataDir: Path to variable state data directory for Pangolin.
- services.pangolin.dnsProvider: The DNS provider Traefik will request wildcard certificates from. See the [Traefik Documentation](https://doc.traefik.io/traefik/https/acme/#providers) for more information.

- services.pangolin.enable: Whether to enable Pangolin reverse proxy server.
- services.pangolin.environmentFile: Path to a file containing sensitive environment variables for Pangolin. See the [Pangolin Documentation](https://docs.fossorial.io/Pangolin/Configuration/config) for more information.
These will overwrite anything defined in the config.
The file should contain environment-variable assignments like:
```
SERVER_SECRET=1234567890abc
```

- services.pangolin.letsEncryptEmail: An email address for SSL certificate registration with Let's Encrypt. This should be an email you have access to.

- services.pangolin.openFirewall: Whether to enable opening TCP ports 80 and 443, and UDP port 51820 in the firewall for the Pangolin service(s).
- services.pangolin.package: The fosrl-pangolin package to use.
- services.pangolin.settings: Additional attributes to be merged with the configuration options and written to Pangolin's `config.yml` file.

- services.pantalaimon-headless.instances: Declarative instance config.

Note: to use pantalaimon interactively, e.g. for a Matrix client which does not
support End-to-end encryption (like `fractal`), refer to the home-manager module.

- services.pantheon.apps.enable: Whether to enable Pantheon default applications.
- services.pantheon.contractor.enable: Whether to enable contractor, a desktop-wide extension service used by Pantheon.
- services.pantheon.files
- services.paperless.address: Web interface address.
- services.paperless.configureNginx: Whether to configure nginx as a reverse proxy.
- services.paperless.configureTika: Whether to configure Tika and Gotenberg to process Office and e-mail files with OCR.

- services.paperless.consumptionDir: Directory from which new documents are imported.
- services.paperless.consumptionDirIsPublic: Whether all users can write to the consumption dir.
- services.paperless.dataDir: Directory to store the Paperless data.
- services.paperless.database.createLocally: Configure local PostgreSQL database server for Paperless.

- services.paperless.domain: Domain under which paperless will be available.
- services.paperless.enable: Whether to enable Paperless-ngx.

When started, the Paperless database is automatically created if it doesn't exist
and updated if the Paperless package has changed.
Both tasks are achieved by running a Django migration.

A script to manage the Paperless-ngx instance (by wrapping Django's manage.py) is available as `paperless-manage`.

- services.paperless.environmentFile: Path to a file containing extra paperless config options in the systemd `EnvironmentFile`
format. Refer to the [documentation](https://docs.paperless-ngx.com/configuration/) for
config options.

This can be used to pass secrets to paperless without putting them in the Nix store.

To set a database password, point `environmentFile` at a file containing:
```
PAPERLESS_DBPASS=<pass>
```

- services.paperless.exporter.directory: Directory to store export.
- services.paperless.exporter.enable: Whether to enable regular automatic document exports.
- services.paperless.exporter.onCalendar: When to run the exporter. See {manpage}`systemd.time(7)`.

`null` disables the timer; allowing you to run the
`paperless-exporter` service through other means.

- services.paperless.exporter.settings: Settings to pass to the document exporter as CLI arguments.
- services.paperless.extraConfig: Alias of {option}`services.paperless.settings`.
- services.paperless.manage: The package derivation for the `paperless-manage` wrapper script.
Useful for other modules that need to add this specific script to a service's PATH.

- services.paperless.mediaDir: Directory to store the Paperless documents.
- services.paperless.openMPThreadingWorkaround: Whether to enable a workaround for document classifier timeouts.

Paperless uses OpenBLAS via scikit-learn for document classification.

The default is to use threading for OpenMP but this would cause the
document classifier to spin on one core seemingly indefinitely if there
are large amounts of classes per classification; causing it to
effectively never complete due to running into timeouts.

This sets `OMP_NUM_THREADS` to `1` in order to mitigate the issue. See
https://github.com/NixOS/nixpkgs/issues/240591 for more information
.
- services.paperless.package: The paperless-ngx package to use.
- services.paperless.passwordFile: A file containing the superuser password.

A superuser is required to access the web interface.
If unset, you can create a superuser manually by running `paperless-manage createsuperuser`.

The default superuser name is `admin`. To change it, set
option {option}`settings.PAPERLESS_ADMIN_USER`.
WARNING: When changing the superuser name after the initial setup, the old superuser
will continue to exist.

To disable login for the web interface, set the following:
`settings.PAPERLESS_AUTO_LOGIN_USERNAME = "admin";`.
WARNING: Only use this on a trusted system without internet access to Paperless.

- services.paperless.port: Web interface port.
- services.paperless.settings: Extra paperless config options.

See [the documentation](https://docs.paperless-ngx.com/configuration/) for available options.

Note that some settings such as `PAPERLESS_CONSUMER_IGNORE_PATTERN` expect JSON values.
Settings declared as lists or attrsets will automatically be serialised into JSON strings for your convenience.

- services.paperless.user: User under which Paperless runs.
- services.paperless-ng: Alias of {option}`services.paperless`.
- services.paretosecurity.enable: Whether to enable [ParetoSecurity](https://paretosecurity.com) [agent](https://github.com/ParetoSecurity/agent) and its root helper.
- services.paretosecurity.package: The paretosecurity package to use.
- services.paretosecurity.trayIcon: Set to false to disable the tray icon and run as a CLI tool only.
- services.paretosecurity.users: Per-user Pareto Security configuration.
- services.parsedmarc.enable: Whether to enable parsedmarc, a DMARC report monitoring service
.
- services.parsedmarc.provision.elasticsearch: Whether to set up and use a local instance of Elasticsearch.

- services.parsedmarc.provision.geoIp: Whether to enable and configure the [geoipupdate](#opt-services.geoipupdate.enable)
service to automatically fetch GeoIP databases. Not crucial,
but recommended for full functionality.

To finish the setup, you need to manually set the [](#opt-services.geoipupdate.settings.AccountID) and
[](#opt-services.geoipupdate.settings.LicenseKey)
options.

- services.parsedmarc.provision.grafana.dashboard: Whether the official parsedmarc grafana dashboard should
be provisioned to the local grafana instance.

- services.parsedmarc.provision.grafana.datasource: Whether the automatically provisioned Elasticsearch
instance should be added as a grafana datasource. Has no
effect unless
[](#opt-services.parsedmarc.provision.elasticsearch)
is also enabled.

- services.parsedmarc.provision.localMail.enable: Whether Postfix and Dovecot should be set up to receive
mail locally. parsedmarc will be configured to watch the
local inbox as the automatically created user specified in
[](#opt-services.parsedmarc.provision.localMail.recipientName)

- services.parsedmarc.provision.localMail.hostname: The hostname to use when configuring Postfix.

Should correspond to the host's fully qualified domain
name and the domain part of the email address which
receives DMARC reports. You also have to set up an MX record
pointing to this domain name.

- services.parsedmarc.provision.localMail.recipientName: The DMARC mail recipient name, i.e. the name part of the
email address which receives DMARC reports.

A local user with this name will be set up and assigned a
randomized password on service start.

- services.parsedmarc.settings: Configuration parameters to set in
{file}`parsedmarc.ini`. For a full list of
available parameters, see
<https://domainaware.github.io/parsedmarc/#configuration-file>.

Settings containing secret data should be set to an attribute
set containing the attribute `_secret` - a
string pointing to a file containing the value the option
should be set to. See the example to get a better picture of
this: in the resulting {file}`parsedmarc.ini`
file, the `splunk_hec.token` key will be set
to the contents of the
{file}`/run/keys/splunk_token` file.

- services.parsoid.enable: Whether to enable Parsoid -- bidirectional
wikitext parser.

- services.parsoid.extraConfig: Extra configuration to add to parsoid configuration.

- services.parsoid.interface: Interface to listen on.

- services.parsoid.interwikis
- services.parsoid.port: Port to listen on.

- services.parsoid.wikis: Used MediaWiki API endpoints.

- services.parsoid.workers: Number of Parsoid workers.

- services.part-db.enable: Whether to enable PartDB.
- services.part-db.enableNginx: Whether to enable nginx or not. If enabled, an nginx virtual host will
be created for access to part-db. If not enabled, then you may use
`${config.services.part-db.package}/public` as your document root in
whichever webserver you wish to setup.

- services.part-db.enablePostgresql: Whether to configure the postgresql database for part-db. If enabled,
a database and user will be created for part-db.

- services.part-db.package: The part-db package to use.
- services.part-db.phpPackage: The php package to use.
- services.part-db.poolConfig: Options for the PartDB PHP pool. See the documentation on <literal>php-fpm.conf</literal>
for details on configuration directives.

- services.part-db.settings: Options for part-db configuration. Refer to
<https://github.com/Part-DB/Part-DB-server/blob/master/.env> for
details on supported values. All <option>_FILE values supported by
upstream are supported here.

- services.part-db.virtualHost: The virtualHost at which you wish part-db to be served.

- services.passSecretService.enable: Whether to enable pass secret service.
- services.passSecretService.package: The pass-secret-service package to use.
- services.patroni.dataDir: Folder where Patroni data will be written, this is where the pgpass password file will be written.

- services.patroni.enable: Whether to enable Patroni.
- services.patroni.environmentFiles: Environment variables made available to Patroni as files content, useful for providing secrets from files.
- services.patroni.group: The group for the service. If left as the default value this group will automatically be created,
otherwise the sysadmin is responsible for ensuring the group exists.

- services.patroni.name: The name of the host. Must be unique for the cluster.

- services.patroni.namespace: Path within the configuration store where Patroni will keep information about the cluster.

- services.patroni.nodeIp: IP address of this node.

- services.patroni.otherNodesIps: IP addresses of the other nodes.

- services.patroni.postgresqlDataDir: The data directory for PostgreSQL. If left as the default value
this directory will automatically be created before the PostgreSQL server starts, otherwise
the sysadmin is responsible for ensuring the directory exists with appropriate ownership
and permissions.

- services.patroni.postgresqlPackage: PostgreSQL package to use.
Plugins can be enabled like this `pkgs.postgresql_14.withPackages (p: [ p.pg_safeupdate p.postgis ])`.

- services.patroni.postgresqlPort: The port on which PostgreSQL listens.

- services.patroni.raft
- services.patroni.raftPort
- services.patroni.restApiPort: The port on Patroni's REST api listens.

- services.patroni.scope: Cluster name.

- services.patroni.settings: The primary patroni configuration. See the [documentation](https://patroni.readthedocs.io/en/latest/yaml_configuration.html)
for possible values.
Secrets should be passed in by using the `environmentFiles` option.

- services.patroni.softwareWatchdog: This will configure Patroni to use the software watchdog built into the Linux kernel
as described in the [documentation](https://patroni.readthedocs.io/en/latest/watchdog.html#setting-up-software-watchdog-on-linux).

- services.patroni.user: The user for the service. If left as the default value this user will automatically be created,
otherwise the sysadmin is responsible for ensuring the user exists.

- services.pcscd.enable: Whether to enable PCSC-Lite daemon, to access smart cards using SCard API (PC/SC).
- services.pcscd.extendReaderNames: String to append to every reader name. The special variable `$HOSTNAME`
will be expanded to the current host name.

- services.pcscd.extraArgs: Extra command line arguments to be passed to the PCSC daemon.
- services.pcscd.ignoreReaderNames: List of reader name patterns for the PCSC daemon to ignore.

For more precise control, readers can be ignored through udev rules
(cf. {option}`services.udev.extraRules`) by setting the
`PCSCLITE_IGNORE` property, for example:

```
ACTION!="remove|unbind", SUBSYSTEM=="usb", ATTR{idVendor}=="20a0", ENV{PCSCLITE_IGNORE}="1"
```

- services.pcscd.plugins: Plugin packages to be used for PCSC-Lite.
- services.pcscd.readerConfig
- services.pcscd.readerConfigs: Configuration for devices that aren't hotpluggable.

See {manpage}`reader.conf(5)` for valid options.

- services.pdns-recursor.api.address: IP address Recursor REST API server will bind to.

- services.pdns-recursor.api.allowFrom: IP address ranges of clients allowed to make API requests.

- services.pdns-recursor.api.port: Port number Recursor REST API server will bind to.

- services.pdns-recursor.dns.address: IP addresses Recursor DNS server will bind to.

- services.pdns-recursor.dns.allowFrom: IP address ranges of clients allowed to make DNS queries.

- services.pdns-recursor.dns.port: Port number Recursor DNS server will bind to.

- services.pdns-recursor.dnssecValidation: Controls the level of DNSSEC processing done by the PowerDNS Recursor.
See <https://doc.powerdns.com/md/recursor/dnssec/> for a detailed explanation.

- services.pdns-recursor.enable: Whether to enable PowerDNS Recursor, a recursive DNS server.
- services.pdns-recursor.exportHosts: Whether to export names and IP addresses defined in /etc/hosts.

- services.pdns-recursor.extraConfig
- services.pdns-recursor.forwardZones: DNS zones to be forwarded to other authoritative servers.

- services.pdns-recursor.forwardZonesRecurse: DNS zones to be forwarded to other recursive servers.

- services.pdns-recursor.luaConfig: The content Lua configuration file for PowerDNS Recursor. See
<https://doc.powerdns.com/recursor/lua-config/index.html>.

- services.pdns-recursor.old-settings: Older PowerDNS Recursor settings. Use this option to configure
Recursor settings not exposed in a NixOS option or to bypass one.
See the full documentation at
<https://doc.powerdns.com/recursor/settings.html>
for the available options.

::: {.warning}
This option is provided for backward compatibility only
and will be removed in the next release of NixOS.
:::

- services.pdns-recursor.resolveNamecoin: Resolve `.bit` top-level domains using ncdns and namecoin.

- services.pdns-recursor.serveRFC1918: Whether to directly resolve the RFC1918 reverse-mapping domains:
`10.in-addr.arpa`,
`168.192.in-addr.arpa`,
`16-31.172.in-addr.arpa`
This saves load on the AS112 servers.

- services.pdns-recursor.settings: Alias of {option}`services.pdns-recursor.old-settings`.
- services.pdns-recursor.yaml-settings: PowerDNS Recursor settings. Use this option to configure Recursor
settings not exposed in a NixOS option or to bypass one.
See the full documentation at
<https://doc.powerdns.com/recursor/yamlsettings.html>
for the available options.

- services.pdnsd.cacheDir: Directory holding the pdnsd cache
- services.pdnsd.enable: Whether to enable pdnsd.
- services.pdnsd.extraConfig: Extra configuration directives that should be added to
`pdnsd.conf`.

- services.pdnsd.globalConfig: Global configuration that should be added to the global directory
of `pdnsd.conf`.

- services.pdnsd.serverConfig: Server configuration that should be added to the server directory
of `pdnsd.conf`.

- services.pds.enable: Alias of {option}`services.bluesky-pds.enable`.
- services.pds.environmentFiles: Alias of {option}`services.bluesky-pds.environmentFiles`.
- services.pds.package: Alias of {option}`services.bluesky-pds.package`.
- services.pds.pdsadmin: Alias of {option}`services.bluesky-pds.pdsadmin`.
- services.pds.settings: Alias of {option}`services.bluesky-pds.settings`.
- services.peerflix.downloadDir: Peerflix temporary download directory.
- services.peerflix.enable: Whether to enable peerflix service.
- services.peerflix.stateDir: Peerflix state directory.
- services.peering-manager.enable: Enable Peering Manager.

This module requires a reverse proxy that serves `/static` separately.
See this [example](https://github.com/peering-manager/contrib/blob/main/nginx.conf) on how to configure this.

- services.peering-manager.enableLdap: Enable LDAP-Authentication for Peering Manager.

This requires a configuration file being pass through `ldapConfigPath`.

- services.peering-manager.enableOidc
- services.peering-manager.enableScheduledTasks: Set up [scheduled tasks](https://peering-manager.readthedocs.io/en/stable/setup/8-scheduled-tasks/)

- services.peering-manager.environmentFile: Environment file as defined in {manpage}`systemd.exec(5)`.

Secrets may be passed to the service without adding them to the world-readable
Nix store, by specifying placeholder variables as the option value in Nix and
setting these variables accordingly in the environment file.

```
  # snippet of peering-manager-related config
  services.peering-manager.settings.SOCIAL_AUTH_OIDC_SECRET = "$PM_OIDC_SECRET";
```

```
  # content of the environment file
  PM_OIDC_SECRET=topsecret
```

Note that this file needs to be available on the host on which
`peering-manager` is running.

- services.peering-manager.extraConfig: Additional lines of configuration appended to the `configuration.py`.
See the [documentation](https://peering-manager.readthedocs.io/en/stable/configuration/optional-settings/) for more possible options.

- services.peering-manager.ldapConfigPath: Path to the Configuration-File for LDAP-Authentication, will be loaded as `ldap_config.py`.
See the [documentation](https://peering-manager.readthedocs.io/en/stable/setup/6-ldap/#configuration) for possible options.

- services.peering-manager.listenAddress: Address the server will listen on.

- services.peering-manager.oidcConfigPath
- services.peering-manager.peeringdbApiKeyFile: Path to a file containing the PeeringDB API key.

- services.peering-manager.plugins: List of plugin packages to install.

- services.peering-manager.port: Port the server will listen on.

- services.peering-manager.secretKeyFile: Path to a file containing the secret key.

- services.peering-manager.settings: Configuration options to set in `configuration.py`.
See the [documentation](https://peering-manager.readthedocs.io/en/stable/configuration/optional-settings/) for more possible options.

- services.peertube.configureNginx: Configure nginx as a reverse proxy for peertube.
- services.peertube.dataDirs: Allow access to custom data locations.
- services.peertube.database.createLocally: Configure local PostgreSQL database server for PeerTube.
- services.peertube.database.host: Database host address or unix socket.
- services.peertube.database.name: Database name.
- services.peertube.database.passwordFile: Password for PostgreSQL database.
- services.peertube.database.port: Database host port.
- services.peertube.database.user: Database user.
- services.peertube.enable: Whether to enable Peertube.
- services.peertube.enableWebHttps: Whether clients will access your PeerTube instance with HTTPS. Does NOT configure the PeerTube webserver itself to listen for incoming HTTPS connections.
- services.peertube.group: Group under which Peertube runs.
- services.peertube.listenHttp: The port that the local PeerTube web server will listen on.
- services.peertube.listenWeb: The public-facing port that PeerTube will be accessible at (likely 80 or 443 if running behind a reverse proxy). Clients will try to access PeerTube at this port.
- services.peertube.localDomain: The domain serving your PeerTube instance.
- services.peertube.package: The peertube package to use.
- services.peertube.redis.createLocally: Configure local Redis server for PeerTube.
- services.peertube.redis.enableUnixSocket: Use Unix socket.
- services.peertube.redis.host: Redis host.
- services.peertube.redis.passwordFile: Password for redis database.
- services.peertube.redis.port: Redis port.
- services.peertube.secrets.secretsFile: Secrets to run PeerTube.
Generate one using `openssl rand -hex 32`

- services.peertube.serviceEnvironmentFile: Set environment variables for the service. Mainly useful for setting the initial root password.
For example write to file:
PT_INITIAL_ROOT_PASSWORD=changeme

- services.peertube.settings: Configuration for peertube.
- services.peertube.smtp.createLocally: Configure local Postfix SMTP server for PeerTube.
- services.peertube.smtp.passwordFile: Password for smtp server.
- services.peertube.user: User account under which Peertube runs.
- services.peertube-runner.enable: Whether to enable peertube-runner.
- services.peertube-runner.enabledJobTypes: Job types that this runner will execute.
- services.peertube-runner.group: Group under which peertube-runner runs.
- services.peertube-runner.instancesToRegister: PeerTube instances to register this runner with.
- services.peertube-runner.package: The runner package to use.
- services.peertube-runner.settings: Configuration for peertube-runner.

See available configuration options at <https://docs.joinpeertube.org/maintain/tools#configuration>.

- services.peertube-runner.user: User account under which peertube-runner runs.
- services.persistent-evdev.devices: A set of virtual proxy device labels with backing physical device ids.

Physical devices should already exist in {file}`/dev/input/by-id/`.
Proxy devices will be automatically given a `uinput-` prefix.

See the [project page](https://github.com/aiberia/persistent-evdev#example-usage-with-libvirt)
for example configuration of virtual devices with libvirt
and remember to add `uinput-*` devices to the qemu
`cgroup_device_acl` list (see [](#opt-virtualisation.libvirtd.qemu.verbatimConfig)).

- services.persistent-evdev.enable: Whether to enable virtual input devices that persist even if the backing device is hotplugged.
- services.pfix-srsd.configurePostfix: Whether to configure the required settings to use pfix-srsd in the local Postfix instance.

- services.pfix-srsd.domain: The domain for which to enable srs
- services.pfix-srsd.enable: Whether to run the postfix sender rewriting scheme daemon.
- services.pfix-srsd.secretsFile: The secret data used to encode the SRS address.
to generate, use a command like:
`for n in $(seq 5); do dd if=/dev/urandom count=1 bs=1024 status=none | sha256sum | sed 's/  -$//' | sed 's/^/          /'; done`

- services.pgadmin.emailServer.address: SMTP server for email delivery
- services.pgadmin.emailServer.enable: Whether to enable SMTP email server. This is necessary, if you want to use password recovery or change your own password.
- services.pgadmin.emailServer.passwordFile: Password for SMTP email account.
NOTE: Should be string not a store path, to prevent the password from being world readable

- services.pgadmin.emailServer.port: SMTP server port for email delivery
- services.pgadmin.emailServer.sender: SMTP server sender email for email delivery. Some servers require this to be a valid email address from that server

- services.pgadmin.emailServer.useSSL: Whether to enable SSL for connecting to the SMTP server.
- services.pgadmin.emailServer.useTLS: Whether to enable TLS for connecting to the SMTP server.
- services.pgadmin.emailServer.username: SMTP server username for email delivery
- services.pgadmin.enable: Whether to enable PostgreSQL Admin 4.
- services.pgadmin.initialEmail: Initial email for the pgAdmin account
- services.pgadmin.initialPasswordFile: Initial password file for the pgAdmin account. Minimum length by default is 6.
Please see `services.pgadmin.minimumPasswordLength`.
NOTE: Should be string not a store path, to prevent the password from being world readable

- services.pgadmin.minimumPasswordLength: Minimum length of the password
- services.pgadmin.openFirewall: Whether to enable firewall passthrough for pgadmin4.
- services.pgadmin.package: The pgadmin4 package to use.
- services.pgadmin.port: Port for pgadmin4 to run on
- services.pgadmin.settings: Settings for pgadmin4.
[Documentation](https://www.pgadmin.org/docs/pgadmin4/development/config_py.html)

- services.pgbackrest.commands.annotate: Options for the 'annotate' command.

An attribute set of options as described in:
<https://pgbackrest.org/configuration.html>

All globally available options, i.e. all except stanza options, can be used.
Repository options should be set via [`repos`](#opt-services.pgbackrest.repos) instead.

- services.pgbackrest.commands.archive-get: Options for the 'archive-get' command.

An attribute set of options as described in:
<https://pgbackrest.org/configuration.html>

All globally available options, i.e. all except stanza options, can be used.
Repository options should be set via [`repos`](#opt-services.pgbackrest.repos) instead.

- services.pgbackrest.commands.archive-push: Options for the 'archive-push' command.

An attribute set of options as described in:
<https://pgbackrest.org/configuration.html>

All globally available options, i.e. all except stanza options, can be used.
Repository options should be set via [`repos`](#opt-services.pgbackrest.repos) instead.

- services.pgbackrest.commands.backup: Options for the 'backup' command.

An attribute set of options as described in:
<https://pgbackrest.org/configuration.html>

All globally available options, i.e. all except stanza options, can be used.
Repository options should be set via [`repos`](#opt-services.pgbackrest.repos) instead.

- services.pgbackrest.commands.check: Options for the 'check' command.

An attribute set of options as described in:
<https://pgbackrest.org/configuration.html>

All globally available options, i.e. all except stanza options, can be used.
Repository options should be set via [`repos`](#opt-services.pgbackrest.repos) instead.

- services.pgbackrest.commands.expire: Options for the 'expire' command.

An attribute set of options as described in:
<https://pgbackrest.org/configuration.html>

All globally available options, i.e. all except stanza options, can be used.
Repository options should be set via [`repos`](#opt-services.pgbackrest.repos) instead.

- services.pgbackrest.commands.help: Options for the 'help' command.

An attribute set of options as described in:
<https://pgbackrest.org/configuration.html>

All globally available options, i.e. all except stanza options, can be used.
Repository options should be set via [`repos`](#opt-services.pgbackrest.repos) instead.

- services.pgbackrest.commands.info: Options for the 'info' command.

An attribute set of options as described in:
<https://pgbackrest.org/configuration.html>

All globally available options, i.e. all except stanza options, can be used.
Repository options should be set via [`repos`](#opt-services.pgbackrest.repos) instead.

- services.pgbackrest.commands.repo-get: Options for the 'repo-get' command.

An attribute set of options as described in:
<https://pgbackrest.org/configuration.html>

All globally available options, i.e. all except stanza options, can be used.
Repository options should be set via [`repos`](#opt-services.pgbackrest.repos) instead.

- services.pgbackrest.commands.repo-ls: Options for the 'repo-ls' command.

An attribute set of options as described in:
<https://pgbackrest.org/configuration.html>

All globally available options, i.e. all except stanza options, can be used.
Repository options should be set via [`repos`](#opt-services.pgbackrest.repos) instead.

- services.pgbackrest.commands.restore: Options for the 'restore' command.

An attribute set of options as described in:
<https://pgbackrest.org/configuration.html>

All globally available options, i.e. all except stanza options, can be used.
Repository options should be set via [`repos`](#opt-services.pgbackrest.repos) instead.

- services.pgbackrest.commands.server: Options for the 'server' command.

An attribute set of options as described in:
<https://pgbackrest.org/configuration.html>

All globally available options, i.e. all except stanza options, can be used.
Repository options should be set via [`repos`](#opt-services.pgbackrest.repos) instead.

- services.pgbackrest.commands.server-ping: Options for the 'server-ping' command.

An attribute set of options as described in:
<https://pgbackrest.org/configuration.html>

All globally available options, i.e. all except stanza options, can be used.
Repository options should be set via [`repos`](#opt-services.pgbackrest.repos) instead.

- services.pgbackrest.commands.stanza-create: Options for the 'stanza-create' command.

An attribute set of options as described in:
<https://pgbackrest.org/configuration.html>

All globally available options, i.e. all except stanza options, can be used.
Repository options should be set via [`repos`](#opt-services.pgbackrest.repos) instead.

- services.pgbackrest.commands.stanza-delete: Options for the 'stanza-delete' command.

An attribute set of options as described in:
<https://pgbackrest.org/configuration.html>

All globally available options, i.e. all except stanza options, can be used.
Repository options should be set via [`repos`](#opt-services.pgbackrest.repos) instead.

- services.pgbackrest.commands.stanza-upgrade: Options for the 'stanza-upgrade' command.

An attribute set of options as described in:
<https://pgbackrest.org/configuration.html>

All globally available options, i.e. all except stanza options, can be used.
Repository options should be set via [`repos`](#opt-services.pgbackrest.repos) instead.

- services.pgbackrest.commands.start: Options for the 'start' command.

An attribute set of options as described in:
<https://pgbackrest.org/configuration.html>

All globally available options, i.e. all except stanza options, can be used.
Repository options should be set via [`repos`](#opt-services.pgbackrest.repos) instead.

- services.pgbackrest.commands.stop: Options for the 'stop' command.

An attribute set of options as described in:
<https://pgbackrest.org/configuration.html>

All globally available options, i.e. all except stanza options, can be used.
Repository options should be set via [`repos`](#opt-services.pgbackrest.repos) instead.

- services.pgbackrest.commands.verify: Options for the 'verify' command.

An attribute set of options as described in:
<https://pgbackrest.org/configuration.html>

All globally available options, i.e. all except stanza options, can be used.
Repository options should be set via [`repos`](#opt-services.pgbackrest.repos) instead.

- services.pgbackrest.commands.version: Options for the 'version' command.

An attribute set of options as described in:
<https://pgbackrest.org/configuration.html>

All globally available options, i.e. all except stanza options, can be used.
Repository options should be set via [`repos`](#opt-services.pgbackrest.repos) instead.

- services.pgbackrest.enable: Whether to enable pgBackRest.
- services.pgbackrest.repos: An attribute set of repositories as described in:
<https://pgbackrest.org/configuration.html#section-repository>

Each repository defaults to set `repo-host` to the attribute's name.
The special value "localhost" will unset `repo-host`.

::: {.note}
The prefix `repoNNN-` is added automatically.
Example: Use `path` instead of `repo1-path`.
:::

- services.pgbackrest.settings: An attribute set of options as described in:
<https://pgbackrest.org/configuration.html>

All globally available options, i.e. all except stanza options, can be used.
Repository options should be set via [`repos`](#opt-services.pgbackrest.repos) instead.

- services.pgbackrest.stanzas: An attribute set of stanzas as described in:
<https://pgbackrest.org/user-guide.html#quickstart/configure-stanza>

- services.pgbouncer.adminUsers: Alias of {option}`services.pgbouncer.settings.pgbouncer.admin_users`.
- services.pgbouncer.authDbname: Alias of {option}`services.pgbouncer.settings.pgbouncer.auth_dbname`.
- services.pgbouncer.authFile: Alias of {option}`services.pgbouncer.settings.pgbouncer.auth_file`.
- services.pgbouncer.authHbaFile: Alias of {option}`services.pgbouncer.settings.pgbouncer.auth_hba_file`.
- services.pgbouncer.authQuery: Alias of {option}`services.pgbouncer.settings.pgbouncer.auth_query`.
- services.pgbouncer.authType: Alias of {option}`services.pgbouncer.settings.pgbouncer.auth_type`.
- services.pgbouncer.authUser: Alias of {option}`services.pgbouncer.settings.pgbouncer.auth_user`.
- services.pgbouncer.databases: Alias of {option}`services.pgbouncer.settings.databases`.
- services.pgbouncer.defaultPoolSize: Alias of {option}`services.pgbouncer.settings.pgbouncer.default_pool_size`.
- services.pgbouncer.enable: Whether to enable PostgreSQL connection pooler.
- services.pgbouncer.extraConfig
- services.pgbouncer.group: The group pgbouncer is run as.

- services.pgbouncer.homeDir: Specifies the home directory.

- services.pgbouncer.ignoreStartupParameters: Alias of {option}`services.pgbouncer.settings.pgbouncer.ignore_startup_parameters`.
- services.pgbouncer.listenAddress: Alias of {option}`services.pgbouncer.settings.pgbouncer.listen_addr`.
- services.pgbouncer.listenPort: Alias of {option}`services.pgbouncer.settings.pgbouncer.listen_port`.
- services.pgbouncer.logFile
- services.pgbouncer.maxClientConn: Alias of {option}`services.pgbouncer.settings.pgbouncer.max_client_conn`.
- services.pgbouncer.maxDbConnections: Alias of {option}`services.pgbouncer.settings.pgbouncer.max_db_connections`.
- services.pgbouncer.maxUserConnections: Alias of {option}`services.pgbouncer.settings.pgbouncer.max_user_connections`.
- services.pgbouncer.openFilesLimit: Maximum number of open files.

- services.pgbouncer.openFirewall: Whether to automatically open the specified TCP port in the firewall.

- services.pgbouncer.package: The pgbouncer package to use.
- services.pgbouncer.peers: Alias of {option}`services.pgbouncer.settings.peers`.
- services.pgbouncer.poolMode: Alias of {option}`services.pgbouncer.settings.pgbouncer.pool_mode`.
- services.pgbouncer.settings: Configuration for PgBouncer, see <https://www.pgbouncer.org/config.html>
for supported values.

- services.pgbouncer.statsUsers: Alias of {option}`services.pgbouncer.settings.pgbouncer.stats_users`.
- services.pgbouncer.syslog.enable
- services.pgbouncer.syslog.syslogFacility: Alias of {option}`services.pgbouncer.settings.pgbouncer.syslog_facility`.
- services.pgbouncer.syslog.syslogIdent: Alias of {option}`services.pgbouncer.settings.pgbouncer.syslog_ident`.
- services.pgbouncer.tls.client.caFile: Alias of {option}`services.pgbouncer.settings.pgbouncer.client_tls_ca_file`.
- services.pgbouncer.tls.client.certFile: Alias of {option}`services.pgbouncer.settings.pgbouncer.client_tls_cert_file`.
- services.pgbouncer.tls.client.keyFile: Alias of {option}`services.pgbouncer.settings.pgbouncer.client_tls_key_file`.
- services.pgbouncer.tls.client.sslmode: Alias of {option}`services.pgbouncer.settings.pgbouncer.client_tls_sslmode`.
- services.pgbouncer.tls.server.caFile: Alias of {option}`services.pgbouncer.settings.pgbouncer.server_tls_ca_file`.
- services.pgbouncer.tls.server.certFile: Alias of {option}`services.pgbouncer.settings.pgbouncer.server_tls_cert_file`.
- services.pgbouncer.tls.server.keyFile: Alias of {option}`services.pgbouncer.settings.pgbouncer.server_tls_key_file`.
- services.pgbouncer.tls.server.sslmode: Alias of {option}`services.pgbouncer.settings.pgbouncer.server_tls_sslmode`.
- services.pgbouncer.user: The user pgbouncer is run as.

- services.pgbouncer.users: Alias of {option}`services.pgbouncer.settings.users`.
- services.pgbouncer.verbose: Alias of {option}`services.pgbouncer.settings.pgbouncer.verbose`.
- services.pghero.enable: Whether to enable PgHero service.
- services.pghero.environment: Environment variables to set for the service. Secrets should be
specified using {option}`environmentFile`.

- services.pghero.environmentFiles: File to load environment variables from. Loaded variables override
values set in {option}`environment`.

- services.pghero.extraArgs: Additional command-line arguments for the systemd service.

Refer to the [Puma web server documentation] for available arguments.

[Puma web server documentation]: https://puma.io/puma#configuration

- services.pghero.extraGroups: Additional groups for the systemd service.

- services.pghero.listenAddress: `hostname:port` to listen for HTTP traffic.

This is bound using the systemd socket activation.

- services.pghero.package: The pghero package to use.
- services.pghero.settings: PgHero configuration. Refer to the [PgHero documentation] for more
details.

[PgHero documentation]: https://github.com/ankane/pghero/blob/master/guides/Linux.md#multiple-databases

- services.pgmanage.allowCustomConnections: This tells pgmanage whether or not to allow anyone to use a custom
connection from the login screen.

- services.pgmanage.connections: pgmanage requires at least one PostgreSQL server be defined.

Detailed information about PostgreSQL connection strings is available at:
<https://www.postgresql.org/docs/current/libpq-connect.html>

Note that you should not specify your user name or password. That
information will be entered on the login screen. If you specify a
username or password, it will be removed by pgmanage before attempting to
connect to a database.

- services.pgmanage.enable: Whether to enable PostgreSQL Administration for the web.
- services.pgmanage.localOnly: This tells pgmanage whether or not to set the listening socket to local
addresses only.

- services.pgmanage.logLevel: Verbosity of logs

- services.pgmanage.loginGroup: This tells pgmanage to only allow users in a certain PostgreSQL group to
login to pgmanage. Note that a connection will be made to PostgreSQL in
order to test if the user is a member of the login group.

- services.pgmanage.loginTimeout: Number of seconds of inactivity before user is automatically logged
out.

- services.pgmanage.package: The pgmanage package to use.
- services.pgmanage.port: This tells pgmanage what port to listen on for browser requests.

- services.pgmanage.sqlRoot: This tells pgmanage where to put the SQL file history. All tabs are saved
to this location so that if you get disconnected from pgmanage you
don't lose your work.

- services.pgmanage.superOnly: This tells pgmanage whether or not to only allow super users to
login. The recommended value is true and will restrict users who are not
super users from logging in to any PostgreSQL instance through
pgmanage. Note that a connection will be made to PostgreSQL in order to
test if the user is a superuser.

- services.pgmanage.tls: These options tell pgmanage where the TLS Certificate and Key files
reside. If you use these options then you'll only be able to access
pgmanage through a secure TLS connection. These options are only
necessary if you wish to connect directly to pgmanage using a secure TLS
connection. As an alternative, you can set up pgmanage in a reverse proxy
configuration. This allows your web server to terminate the secure
connection and pass on the request to pgmanage. You can find help to set
up this configuration in:
<https://github.com/pgManage/pgManage/blob/master/INSTALL_NGINX.md>

- services.pgpkeyserver-lite.enable: Whether to enable pgpkeyserver-lite on a nginx vHost proxying to a gpg keyserver.
- services.pgpkeyserver-lite.hkpAddress: Which IP address the sks-keyserver is listening on.

- services.pgpkeyserver-lite.hkpPort: Which port the sks-keyserver is listening on.

- services.pgpkeyserver-lite.hostname: Which hostname to set the vHost to that is proxying to sks.

- services.pgpkeyserver-lite.package: The pgpkeyserver-lite package to use.
- services.pgscv.enable: Whether to enable pgSCV, a PostgreSQL ecosystem metrics collector.
- services.pgscv.logLevel: Log level for pgSCV.
- services.pgscv.package: The pgscv package to use.
- services.pgscv.settings: Configuration for pgSCV, in YAML format.

See [configuration reference](https://github.com/cherts/pgscv/wiki/Configuration-settings-reference).

- services.photonvision.enable: Whether to enable PhotonVision.
- services.photonvision.openFirewall: Whether to open the required ports in the firewall.

- services.photonvision.package: The photonvision package to use.
- services.photoprism.address: Web interface address.

- services.photoprism.databasePasswordFile: Database password file.

- services.photoprism.enable: Whether to enable Photoprism web server.
- services.photoprism.importPath: Relative or absolute to the `originalsPath` from where the files should be imported.

- services.photoprism.originalsPath: Storage path of your original media files (photos and videos).

- services.photoprism.package: The photoprism package to use.
- services.photoprism.passwordFile: Admin password file.

- services.photoprism.port: Web interface port.

- services.photoprism.settings: See [the getting-started guide](https://docs.photoprism.app/getting-started/config-options/) for available options.

- services.photoprism.storagePath: Location for sidecar, cache, and database files.

- services.phpfpm.extraConfig: Extra configuration that should be put in the global section of
the PHP-FPM configuration file. Do not specify the options
`error_log` or
`daemonize` here, since they are generated by
NixOS.

- services.phpfpm.phpIni
- services.phpfpm.phpOptions: Options appended to the PHP configuration file {file}`php.ini`.

- services.phpfpm.phpPackage: The php package to use.
- services.phpfpm.poolConfigs
- services.phpfpm.pools: PHP-FPM pools. If no pools are defined, the PHP-FPM
service is disabled.

- services.phpfpm.settings: PHP-FPM global directives. Refer to the "List of global php-fpm.conf directives" section of
<https://www.php.net/manual/en/install.fpm.configuration.php>
for details. Note that settings names must be enclosed in quotes (e.g.
`"pm.max_children"` instead of `pm.max_children`).
You need not specify the options `error_log` or
`daemonize` here, since they are generated by NixOS.

- services.phylactery.enable: Whether to enable Phylactery server.
- services.phylactery.host: Listen host for Phylactery
- services.phylactery.library: Path to CBZ library
- services.phylactery.package: The phylactery package to use.
- services.phylactery.port: Listen port for Phylactery
- services.physlock.allowAnyUser: Whether to allow any user to lock the screen. This will install a
setuid wrapper to allow any user to start physlock as root, which
is a minor security risk. Call the physlock binary to use this instead
of using the systemd service.

- services.physlock.disableSysRq: Whether to disable SysRq when locked with physlock.

- services.physlock.enable: Whether to enable the {command}`physlock` screen locking mechanism.

Enable this and then run {command}`systemctl start physlock`
to securely lock the screen.

This will switch to a new virtual terminal, turn off console
switching and disable SysRq mechanism (when
{option}`services.physlock.disableSysRq` is set)
until the root or user password is given.

- services.physlock.lockMessage: Message to show on physlock login terminal.

- services.physlock.lockOn.extraTargets: Other targets to lock the screen just before.

Useful if you want to e.g. both autologin to X11 so that
your {file}`~/.xsession` gets executed and
still to have the screen locked so that the system can be
booted relatively unattended.

- services.physlock.lockOn.hibernate: Whether to lock screen with physlock just before hibernate.

- services.physlock.lockOn.suspend: Whether to lock screen with physlock just before suspend.

- services.physlock.muteKernelMessages: Disable kernel messages on console while physlock is running.

- services.picom.activeOpacity: Opacity of active windows.

- services.picom.backend: Backend to use: `egl`, `glx`, `xrender` or `xr_glx_hybrid`.

- services.picom.enable: Whether or not to enable Picom as the X.org composite manager.

- services.picom.experimentalBackends
- services.picom.fade: Fade windows in and out.

- services.picom.fadeDelta: Time between fade animation step (in ms).

- services.picom.fadeExclude: List of conditions of windows that should not be faded.
See {manpage}`picom(1)` man page for more examples.

- services.picom.fadeSteps: Opacity change between fade steps (in and out).

- services.picom.inactiveOpacity: Opacity of inactive windows.

- services.picom.menuOpacity: Opacity of dropdown and popup menu.

- services.picom.opacityRules: Rules that control the opacity of windows, in format PERCENT:PATTERN.

- services.picom.package: The picom package to use.
- services.picom.refreshRate
- services.picom.settings: Picom settings. Use this option to configure Picom settings not exposed
in a NixOS option or to bypass one.  For the available options see the
CONFIGURATION FILES section at {manpage}`picom(1)`.

- services.picom.shadow: Draw window shadows.

- services.picom.shadowExclude: List of conditions of windows that should have no shadow.
See {manpage}`picom(1)` man page for more examples.

- services.picom.shadowOffsets: Left and right offset for shadows (in pixels).

- services.picom.shadowOpacity: Window shadows opacity.

- services.picom.vSync: Enable vertical synchronization. Chooses the best method
(drm, opengl, opengl-oml, opengl-swc, opengl-mswc) automatically.
The bool value should be used, the others are just for backwards compatibility.

- services.picom.wintypes: Rules for specific window types.

- services.picosnitch.enable: Whether to enable picosnitch daemon.
- services.pict-rs.address: The IPv4 address to deploy the service to.

- services.pict-rs.dataDir: The directory where to store the uploaded images & database.

- services.pict-rs.enable: Whether to enable pict-rs server.
- services.pict-rs.package: The pict-rs package to use.
- services.pict-rs.port: The port which to bind the service to.

- services.pict-rs.repoPath: The directory where to store the database.
This option takes precedence over dataDir.

- services.pict-rs.storePath: The directory where to store the uploaded images.
This option takes precedence over dataDir.

- services.pid-fan-controller.enable: Whether to enable the PID fan controller, which controls the configured fans by running a closed-loop PID control loop.
- services.pid-fan-controller.package: The pid-fan-controller package to use.
- services.pid-fan-controller.settings.fans: List of fans to be controlled.
- services.pid-fan-controller.settings.heatSources: List of heat sources to be monitored.
- services.pid-fan-controller.settings.interval: Interval between controller cycles in milliseconds.
- services.pihole-ftl.configDirectory: Path for pihole configuration.
pihole does not currently support any path other than /etc/pihole.

- services.pihole-ftl.enable: Whether to enable Pi-hole FTL.
- services.pihole-ftl.group: Group to run the service as.
- services.pihole-ftl.lists: Deny (or allow) domain lists to use
- services.pihole-ftl.logDirectory: Path for Pi-hole log files
- services.pihole-ftl.macvendorURL: URL from which to download the macvendor.db file.

- services.pihole-ftl.openFirewallDHCP: Open ports in the firewall for pihole-FTL's DHCP server.
- services.pihole-ftl.openFirewallDNS: Open ports in the firewall for pihole-FTL's DNS server.
- services.pihole-ftl.openFirewallWebserver: Open ports in the firewall for pihole-FTL's webserver, as configured in `settings.webserver.port`.

- services.pihole-ftl.package: The pihole-ftl package to use.
- services.pihole-ftl.pihole: Pi-hole admin script
- services.pihole-ftl.piholePackage: The pihole package to use.
- services.pihole-ftl.privacyLevel: Level of detail in generated statistics. 0 enables full statistics, 3
shows only anonymous statistics.

See [the documentation](https://docs.pi-hole.net/ftldns/privacylevels).

Also see services.dnsmasq.settings.log-queries to completely disable
query logging.

- services.pihole-ftl.queryLogDeleter.age: Delete DNS query logs older than this many days, if
[](#opt-services.pihole-ftl.queryLogDeleter.enable) is on.

- services.pihole-ftl.queryLogDeleter.enable: Whether to enable Pi-hole FTL DNS query log deleter.
- services.pihole-ftl.queryLogDeleter.interval: How often the query log deleter is run. See systemd.time(7) for more
information about the format.

- services.pihole-ftl.settings: Configuration options for pihole.toml.
See the upstream [documentation](https://docs.pi-hole.net/ftldns/configfile).

- services.pihole-ftl.stateDirectory: Path for pihole state files.

- services.pihole-ftl.useDnsmasqConfig: Import options defined in [](#opt-services.dnsmasq.settings) via
misc.dnsmasq_lines in Pi-hole's config.

- services.pihole-ftl.user: User to run the service as.
- services.pihole-ftl.webserverEnabled: Whether the webserver is enabled.
- services.pihole-web.enable: Whether to enable Pi-hole dashboard.
- services.pihole-web.hostName: Domain name for the website.
- services.pihole-web.package: The pihole-web package to use.
- services.pihole-web.ports: Port(s) for the webserver to serve on.

If provided as a string, optionally append suffixes to control behaviour:

- `o`: to make the port is optional - failure to bind will not be an error.
- `s`: for the port to be used for SSL.
- `r`: for a non-SSL port to redirect to the first available SSL port.

- services.pinchflat.enable: Whether to enable pinchflat.
- services.pinchflat.extraConfig: The configuration of Pinchflat is handled through environment variables.
The available configuration options can be found in [the Pinchflat README](https://github.com/kieraneglin/pinchflat/README.md#environment-variables).

- services.pinchflat.group: Group under which Pinchflat runs.

- services.pinchflat.logLevel: Log level for Pinchflat.
- services.pinchflat.mediaDir: The directory into which Pinchflat downloads videos.
- services.pinchflat.openFirewall: Open ports in the firewall for the Pinchflat web interface
- services.pinchflat.package: The pinchflat package to use.
- services.pinchflat.port: Port on which the Pinchflat web interface is available.
- services.pinchflat.secretsFile: Secrets like {env}`SECRET_KEY_BASE` and {env}`BASIC_AUTH_PASSWORD`
should be passed to the service without adding them to the world-readable Nix store.

Note that either this file needs to be available on the host on which `pinchflat` is running,
or the option `selfhosted` must be `true`.
Further, {env}`SECRET_KEY_BASE` has a minimum length requirement of 64 bytes.
One way to generate such a secret is to use `openssl rand -hex 64`.

As an example, the contents of the file might look like this:
```
SECRET_KEY_BASE=...copy-paste a secret token here...
BASIC_AUTH_USERNAME=...basic auth username...
BASIC_AUTH_PASSWORD=...basic auth password...
```

- services.pinchflat.selfhosted: Use a weak secret. If true, you are not required to provide a {env}`SECRET_KEY_BASE` through the `secretsFile` option. Do not use this option in production!
- services.pinchflat.user: User account under which Pinchflat runs.

- services.pingvin-share.backend.package: The backend package to use.
- services.pingvin-share.backend.port: The port that the backend service of Pingvin Share will listen to.

- services.pingvin-share.dataDir: The path to the data directory in which Pingvin Share will store its data.

- services.pingvin-share.enable: Whether to enable Pingvin Share, a self-hosted file sharing platform.
- services.pingvin-share.frontend.package: The frontend package to use.
- services.pingvin-share.frontend.port: The port that the frontend service of Pingvin Share will listen to.

- services.pingvin-share.group: Group under which Pingvin Share runs.

- services.pingvin-share.hostname: The domain name of your instance. If null, the redirections will be made to localhost.

- services.pingvin-share.https: Whether to enable HTTPS for the domain.

- services.pingvin-share.nginx.enable: Whether to enable a Nginx reverse proxy for Pingvin Share..
- services.pingvin-share.openFirewall: Whether to open the firewall for the port in {option}`services.pingvin-share.frontend.port`.

- services.pingvin-share.user: User account under which Pingvin Share runs.

- services.pinnwand.enable: Whether to enable Pinnwand, a pastebin.
- services.pinnwand.port: The port to listen on.
- services.pinnwand.settings: Your {file}`pinnwand.toml` as a Nix attribute set. Look up
possible options in the [documentation](https://pinnwand.readthedocs.io/en/v1.6.0/configuration.html).

- services.pipewire.alsa.enable: Whether to enable ALSA support.
- services.pipewire.alsa.support32Bit: Whether to enable 32-bit ALSA support on 64-bit systems.
- services.pipewire.audio.enable: Whether to use PipeWire as the primary sound server
- services.pipewire.config
- services.pipewire.configPackages: List of packages that provide PipeWire configuration, in the form of
`share/pipewire/*/*.conf` files.

LV2 dependencies will be picked up from config packages automatically
via `passthru.requiredLv2Packages`.

- services.pipewire.enable: Whether to enable PipeWire service.
- services.pipewire.extraConfig.client: Additional configuration for the PipeWire client library, used by most applications.

Every item in this attrset becomes a separate drop-in file in `/etc/pipewire/client.conf.d`.

See the [PipeWire wiki][wiki] for examples.

[wiki]: https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/Config-client

- services.pipewire.extraConfig.client-rt
- services.pipewire.extraConfig.jack: Additional configuration for the PipeWire JACK server and client library.

Every item in this attrset becomes a separate drop-in file in `/etc/pipewire/jack.conf.d`.

See the [PipeWire wiki][wiki] for examples.

[wiki]: https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/Config-JACK

- services.pipewire.extraConfig.pipewire: Additional configuration for the PipeWire server.

Every item in this attrset becomes a separate drop-in file in `/etc/pipewire/pipewire.conf.d`.

See `man pipewire.conf` for details, and [the PipeWire wiki][wiki] for examples.

See also:
- [PipeWire wiki - virtual devices][wiki-virtual-device] for creating virtual devices or remapping channels
- [PipeWire wiki - filter-chain][wiki-filter-chain] for creating more complex processing pipelines
- [PipeWire wiki - network][wiki-network] for streaming audio over a network

[wiki]: https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/Config-PipeWire
[wiki-virtual-device]: https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/Virtual-Devices
[wiki-filter-chain]: https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/Filter-Chain
[wiki-network]: https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/Network

- services.pipewire.extraConfig.pipewire-pulse: Additional configuration for the PipeWire PulseAudio server.

Every item in this attrset becomes a separate drop-in file in `/etc/pipewire/pipewire-pulse.conf.d`.

See `man pipewire-pulse.conf` for details, and [the PipeWire wiki][wiki] for examples.

See also:
- [PipeWire wiki - PulseAudio tricks guide][wiki-tricks] for more examples.

[wiki]: https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/Config-PulseAudio
[wiki-tricks]: https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/Guide-PulseAudio-Tricks

- services.pipewire.extraLv2Packages: List of packages that provide LV2 plugins in `lib/lv2` that should
be made available to PipeWire for [filter chains][wiki-filter-chain].

Config packages have their required LV2 plugins added automatically,
so they don't need to be specified here. Config packages need to set
`passthru.requiredLv2Packages` for this to work.

[wiki-filter-chain]: https://docs.pipewire.org/page_module_filter_chain.html

- services.pipewire.jack.enable: Whether to enable JACK audio emulation.
- services.pipewire.media-session
- services.pipewire.package: The pipewire package to use.
- services.pipewire.pulse.enable: Whether to enable PulseAudio server emulation.
- services.pipewire.raopOpenFirewall: Opens UDP/6001-6002, required by RAOP/Airplay for timing and control data.

- services.pipewire.socketActivation: Automatically run PipeWire when connections are made to the PipeWire socket.

- services.pipewire.systemWide: If true, a system-wide PipeWire service and socket is enabled
allowing all users in the "pipewire" group to use it simultaneously.
If false, then user units are used instead, restricting access to
only one user.

Enabling system-wide PipeWire is however not recommended and disabled
by default according to
https://github.com/PipeWire/pipewire/blob/master/NEWS

- services.pipewire.wireplumber.configPackages: List of packages that provide WirePlumber configuration, in the form of
`share/wireplumber/*/*.conf` files.

LV2 dependencies will be picked up from config packages automatically
via `passthru.requiredLv2Packages`.

- services.pipewire.wireplumber.enable: Whether to enable WirePlumber, a modular session / policy manager for PipeWire
- services.pipewire.wireplumber.extraConfig: Additional configuration for the WirePlumber daemon when run in
single-instance mode (the default in nixpkgs and currently the only
supported way to run WirePlumber configured via `extraConfig`).

See also:
- [The configuration file][docs-the-conf-file]
- [Modifying configuration][docs-modifying-config]
- [Locations of files][docs-file-locations]
- and the [configuration section][docs-config-section] of the docs in general

Note that WirePlumber (and PipeWire) use dotted attribute names like
`device.product.id`. These are not nested, but flat objects for WirePlumber/PipeWire,
so to write these in nix expressions, remember to quote them like `"device.product.id"`.
Have a look at the example for this.

[docs-the-conf-file]: https://pipewire.pages.freedesktop.org/wireplumber/daemon/configuration/conf_file.html
[docs-modifying-config]: https://pipewire.pages.freedesktop.org/wireplumber/daemon/configuration/modifying_configuration.html
[docs-file-locations]: https://pipewire.pages.freedesktop.org/wireplumber/daemon/configuration/locations.html
[docs-config-section]: https://pipewire.pages.freedesktop.org/wireplumber/daemon/configuration.html

- services.pipewire.wireplumber.extraLv2Packages: List of packages that provide LV2 plugins in `lib/lv2` that should
be made available to WirePlumber for [filter chains][wiki-filter-chain].

Config packages have their required LV2 plugins added automatically,
so they don't need to be specified here. Config packages need to set
`passthru.requiredLv2Packages` for this to work.

[wiki-filter-chain]: https://docs.pipewire.org/page_module_filter_chain.html

- services.pipewire.wireplumber.extraScripts: Additional scripts for WirePlumber to be used by configuration files.

Every item in this attrset becomes a separate lua file with the path
relative to the `scripts` directory specified in the name of the item.
The scripts get passed to the WirePlumber service via the `XDG_DATA_DIRS`
variable. Scripts specified here are preferred over those shipped with
WirePlumber if they occupy the same relative path.

For a script to be loaded, it needs to be specified as part of a component,
and that component needs to be required by an active profile (e.g. `main`).
Components can be defined in config files either via `extraConfig` or `configPackages`.

For the hello-world example, you'd have to add the following `extraConfig`:
```nix
  services.pipewire.wireplumber.extraConfig."99-hello-world" = {
    "wireplumber.components" = [
      {
        name = "test/hello-world.lua";
        type = "script/lua";
        provides = "custom.hello-world";
      }
    ];

    "wireplumber.profiles" = {
      main = {
        "custom.hello-world" = "required";
      };
    };
  };
```

See also:
- [Location of scripts][docs-file-locations-scripts]
- [Components & Profiles][docs-components-profiles]
- [Migration - Loading custom scripts][docs-migration-loading-custom-scripts]

[docs-file-locations-scripts]: https://pipewire.pages.freedesktop.org/wireplumber/daemon/locations.html#location-of-scripts
[docs-components-profiles]: https://pipewire.pages.freedesktop.org/wireplumber/daemon/configuration/components_and_profiles.html
[docs-migration-loading-custom-scripts]: https://pipewire.pages.freedesktop.org/wireplumber/daemon/configuration/migration.html#loading-custom-scripts

- services.pipewire.wireplumber.package: The WirePlumber derivation to use.
- services.piwik.enable: Alias of {option}`services.matomo.enable`.
- services.piwik.nginx: Alias of {option}`services.matomo.nginx`.
- services.piwik.phpfpmProcessManagerConfig
- services.piwik.webServerUser: Alias of {option}`services.matomo.webServerUser`.
- services.pixelfed.dataDir: State directory of the `pixelfed` user which holds
the application's state and data.

- services.pixelfed.database
- services.pixelfed.domain: FQDN for the Pixelfed instance.

- services.pixelfed.enable: Whether to enable a Pixelfed instance.
- services.pixelfed.group: Group account under which pixelfed runs.

::: {.note}
If left as the default value this group will automatically be created
on system activation, otherwise you are responsible for
ensuring the group exists before the pixelfed application starts.
:::

- services.pixelfed.maxUploadSize: Max upload size with units.

- services.pixelfed.nginx: With this option, you can customize an nginx virtual host which already has sensible defaults for Pixelfed.
Set to {} if you do not need any customization to the virtual host.
If enabled, then by default, the {option}`serverName` is
`${domain}`,
If this is set to null (the default), no nginx virtualHost will be configured.

- services.pixelfed.package: The pixelfed package to use.
- services.pixelfed.phpPackage: The php83 package to use.
- services.pixelfed.poolConfig: Options for Pixelfed's PHP-FPM pool.

- services.pixelfed.redis.createLocally: Whether to enable a local Redis database using UNIX socket authentication.
- services.pixelfed.runtimeDir: Ruutime directory of the `pixelfed` user which holds
the application's caches and temporary files.

- services.pixelfed.schedulerInterval: How often the Pixelfed cron task should run
- services.pixelfed.secretFile: A secret file to be sourced for the .env settings.
Place `APP_KEY` and other settings that should not end up in the Nix store here.

- services.pixelfed.settings: .env settings for Pixelfed.
Secrets should use `secretFile` option instead.

- services.pixelfed.user: User account under which pixelfed runs.

::: {.note}
If left as the default value this user will automatically be created
on system activation, otherwise you are responsible for
ensuring the user exists before the pixelfed application starts.
:::

- services.pixiecore.apiServer: URI to connect to the API. Ignored unless mode is set to 'api'
- services.pixiecore.cmdLine: Kernel commandline arguments. Ignored unless mode is set to 'boot'
- services.pixiecore.debug: Log more things that aren't directly related to booting a recognized client
- services.pixiecore.dhcpNoBind: Handle DHCP traffic without binding to the DHCP server port
- services.pixiecore.enable: Whether to enable Pixiecore.
- services.pixiecore.extraArguments: Additional command line arguments to pass to Pixiecore
- services.pixiecore.initrd: Initrd path. Ignored unless mode is set to 'boot'
- services.pixiecore.kernel: Kernel path. Ignored unless mode is set to 'boot'
- services.pixiecore.listen: IPv4 address to listen on
- services.pixiecore.mode: Which mode to use
- services.pixiecore.openFirewall: Open ports (67, 69, 4011 UDP and 'port', 'statusPort' TCP) in the firewall for Pixiecore.

- services.pixiecore.port: Port to listen on for HTTP
- services.pixiecore.quick: Which quick option to use
- services.pixiecore.statusPort: HTTP port for status information (can be the same as --port)
- services.plantuml-server.allowPlantumlInclude
- services.plantuml-server.enable: Whether to enable PlantUML server.
- services.plantuml-server.graphvizPackage: The graphviz package to use.
- services.plantuml-server.group: Group which runs PlantUML server.
- services.plantuml-server.home: Home directory of the PlantUML server instance.
- services.plantuml-server.httpAuthorization: When calling the proxy endpoint, the value of HTTP_AUTHORIZATION will be used to set the HTTP Authorization header.
- services.plantuml-server.listenHost: Host to listen on.
- services.plantuml-server.listenPort: Port to listen on.
- services.plantuml-server.package: The plantuml-server package to use.
- services.plantuml-server.packages.jdk: The jdk package to use.
- services.plantuml-server.packages.jetty: The jetty package to use. At the time of writing (v1.2023.12), PlantUML Server does not support
Jetty versions higher than 12.x.

Jetty 12.x has introduced major breaking changes, see
<https://github.com/jetty/jetty.project/releases/tag/jetty-12.0.0> and
<https://eclipse.dev/jetty/documentation/jetty-12/programming-guide/index.html#pg-migration-11-to-12>

- services.plantuml-server.plantumlLimitSize: Limits image width and height.
- services.plantuml-server.plantumlStats: Set it to on to enable statistics report (https://plantuml.com/statistics-report).
- services.plantuml-server.user: User which runs PlantUML server.
- services.plausible.adminUser.activate
- services.plausible.adminUser.email
- services.plausible.adminUser.name
- services.plausible.adminUser.passwordFile
- services.plausible.database.clickhouse.setup: Whether to enable creating a clickhouse instance.
- services.plausible.database.clickhouse.url: The URL to be used to connect to `clickhouse`.

- services.plausible.database.postgres.dbname: Name of the database to use.

- services.plausible.database.postgres.setup: Whether to enable creating a postgresql instance.
- services.plausible.database.postgres.socket: Path to the UNIX domain-socket to communicate with `postgres`.

- services.plausible.enable: Whether to enable plausible.
- services.plausible.mail.email: The email id to use for as *from* address of all communications
from Plausible.

- services.plausible.mail.smtp.enableSSL: Whether to enable SSL when connecting to the SMTP server.
- services.plausible.mail.smtp.hostAddr: The host address of your smtp server.

- services.plausible.mail.smtp.hostPort: The port of your smtp server.

- services.plausible.mail.smtp.passwordFile: The path to the file with the password in case SMTP auth is enabled.

- services.plausible.mail.smtp.retries: Number of retries to make until mailer gives up.

- services.plausible.mail.smtp.user: The username/email in case SMTP auth is enabled.

- services.plausible.package: The plausible package to use.
- services.plausible.releaseCookiePath
- services.plausible.server.baseUrl: Public URL where plausible is available.

Note that `/path` components are currently ignored:
<https://github.com/plausible/analytics/issues/1182>.

- services.plausible.server.disableRegistration: Whether to prohibit creating an account in plausible's UI or allow on `invite_only`.

- services.plausible.server.listenAddress: The IP address on which the server is listening.

- services.plausible.server.port: Port where the service should be available.

- services.plausible.server.secretKeybaseFile: Path to the secret used by the `phoenix`-framework. Instructions
how to generate one are documented in the
[framework docs](https://hexdocs.pm/phoenix/Mix.Tasks.Phx.Gen.Secret.html#content).

- services.playerctld.enable: Whether to enable the playerctld daemon.
- services.playerctld.package: The playerctl package to use.
- services.pleroma.configs: Pleroma public configuration.

This list gets appended from left to
right into /etc/pleroma/config.exs. Elixir evaluates its
configuration imperatively, meaning you can override a
setting by appending a new str to this NixOS option list.

*DO NOT STORE ANY PLEROMA SECRET
HERE*, use
[services.pleroma.secretConfigFile](#opt-services.pleroma.secretConfigFile)
instead.

This setting is going to be stored in a file part of
the Nix store. The Nix store being world-readable, it's not
the right place to store any secret

Have a look to Pleroma section in the NixOS manual for more
information.

- services.pleroma.enable: Whether to enable pleroma.
- services.pleroma.group: Group account under which pleroma runs.
- services.pleroma.package: The pleroma package to use.
- services.pleroma.secretConfigFile: Path to the file containing your secret pleroma configuration.

*DO NOT POINT THIS OPTION TO THE NIX
STORE*, the store being world-readable, it'll
compromise all your secrets.

- services.pleroma.stateDir: Directory where the pleroma service will save the uploads and static files.
- services.pleroma.user: User account under which pleroma runs.
- services.plex.accelerationDevices: A list of device paths to hardware acceleration devices that Plex should
have access to. This is useful when transcoding media files.
The special value `"*"` will allow all devices.

- services.plex.dataDir: The directory where Plex stores its data files.

- services.plex.enable: Whether to enable Plex Media Server.
- services.plex.extraPlugins: A list of paths to extra plugin bundles to install in Plex's plugin
directory. Every time the systemd unit for Plex starts up, all of the
symlinks in Plex's plugin directory will be cleared and this module
will symlink all of the paths specified here to that directory.

- services.plex.extraScanners: A list of paths to extra scanners to install in Plex's scanners
directory.

Every time the systemd unit for Plex starts up, all of the symlinks
in Plex's scanners directory will be cleared and this module will
symlink all of the paths specified here to that directory.

- services.plex.group: Group under which Plex runs.

- services.plex.managePlugins
- services.plex.openFirewall: Open ports in the firewall for the media server.

- services.plex.package: The plex package to use. Plex subscribers may wish to use their own package here,
pointing to subscriber-only server versions.

- services.plex.user: User account under which Plex runs.

- services.plexpy: Alias of {option}`services.tautulli`.
- services.plikd.enable: Whether to enable plikd, a temporary file upload system.
- services.plikd.openFirewall: Open ports in the firewall for the plikd.
- services.plikd.settings: Configuration for plikd, see <https://github.com/root-gg/plik/blob/master/server/plikd.cfg>
for supported values.

- services.pocket-id.dataDir: The directory where Pocket ID will store its data, such as the database.

- services.pocket-id.enable: Whether to enable Pocket ID server.
- services.pocket-id.environmentFile: Path to an environment file loaded for the Pocket ID service.

This can be used to securely store tokens and secrets outside of the world-readable Nix store.

Example contents of the file:
MAXMIND_LICENSE_KEY=your-license-key

- services.pocket-id.group: Group account under which Pocket ID runs.
- services.pocket-id.package: The pocket-id package to use.
- services.pocket-id.settings: Environment variables that will be passed to Pocket ID, see
[configuration options](https://pocket-id.org/docs/configuration/environment-variables)
for supported values.

- services.pocket-id.user: User account under which Pocket ID runs.
- services.podgrab.dataDirectory: Directory to store downloads.
- services.podgrab.enable: Whether to enable Podgrab, a self-hosted podcast manager.
- services.podgrab.group: Group under which Podgrab runs, and which owns the download directory.
- services.podgrab.passwordFile: The path to a file containing the PASSWORD environment variable
definition for Podgrab's authentication.

- services.podgrab.port: The port on which Podgrab will listen for incoming HTTP traffic.
- services.podgrab.user: User under which Podgrab runs, and which owns the download directory.
- services.polaris.enable: Whether to enable Polaris Music Server.
- services.polaris.extraGroups: Polaris' auxiliary groups.
- services.polaris.group: Group under which Polaris is run.
- services.polaris.openFirewall: Open the configured port in the firewall.

- services.polaris.package: The polaris package to use.
- services.polaris.port: The port which the Polaris REST api and web UI should listen to.
Note: polaris is hardcoded to listen to the hostname "0.0.0.0".

- services.polaris.settings: Contents for the TOML Polaris config, applied each start.
Although poorly documented, an example may be found here:
[test-config.toml](https://github.com/agersant/polaris/blob/374d0ca56fc0a466d797a4b252e2078607476797/test-data/config.toml)

- services.polaris.user: User account under which Polaris runs.
- services.polipo
- services.pomerium.configFile: Path to Pomerium config YAML. If set, overrides services.pomerium.settings.
- services.pomerium.enable: Whether to enable the Pomerium authenticating reverse proxy.
- services.pomerium.secretsFile: Path to file containing secrets for Pomerium, in systemd
EnvironmentFile format. See the {manpage}`systemd.exec(5)` man page.

- services.pomerium.settings: The contents of Pomerium's config.yaml, in Nix expressions.

Specifying configFile will override this in its entirety.

See [the Pomerium
configuration reference](https://pomerium.io/reference/) for more information about what to put
here.

- services.pomerium.useACMEHost: If set, use a NixOS-generated ACME certificate with the specified name.

Note that this will require you to use a non-HTTP-based challenge, or
disable Pomerium's in-built HTTP redirect server by setting
http_redirect_addr to null and use a different HTTP server for serving
the challenge response.

If you're using an HTTP-based challenge, you should use the
Pomerium-native autocert option instead.

- services.porn-vault.autoStart: Whether to start porn-vault automatically.

- services.porn-vault.enable: Whether to enable Porn-Vault.
- services.porn-vault.openFirewall: Whether to open the Porn-Vault port in the firewall.

- services.porn-vault.package: The porn-vault package to use.
- services.porn-vault.port: Which port Porn-Vault will use.

- services.porn-vault.settings: Configuration for Porn-Vault. The attributes are serialized to JSON in config.json.

See <https://gitlab.com/porn-vault/porn-vault/-/blob/dev/config.example.json>

- services.portunus.dex.enable: Whether to enable Dex ldap connector.

To activate dex, first a search user must be created in the Portunus web ui
and then the password must to be set as the `DEX_SEARCH_USER_PASSWORD` environment variable
in the [](#opt-services.dex.environmentFile) setting
.
- services.portunus.dex.oidcClients: List of OIDC clients.

The OIDC secret must be set as the `DEX_CLIENT_${id}` environment variable
in the [](#opt-services.dex.environmentFile) setting.

::: {.note}
Make sure the id only contains characters that are allowed in an environment variable name, e.g. no -.
:::

- services.portunus.dex.port: Port where dex should listen on.
- services.portunus.domain: Subdomain which gets reverse proxied to Portunus webserver.
- services.portunus.enable: Whether to enable Portunus, a self-contained user/group management and authentication service for LDAP.
- services.portunus.group: Group account under which Portunus runs its webserver.
- services.portunus.ldap.group: Group account under which Portunus runs its LDAP server.
- services.portunus.ldap.package: The openldap package to use.
- services.portunus.ldap.searchUserName: The login name of the search user.
This user account must be configured in Portunus either manually or via seeding.

- services.portunus.ldap.suffix: The DN of the topmost entry in your LDAP directory.
Please refer to the Portunus documentation for more information on how this impacts the structure of the LDAP directory.

- services.portunus.ldap.tls: Whether to enable LDAPS protocol.
This also adds two entries to the `/etc/hosts` file to point [](#opt-services.portunus.domain) to localhost,
so that CLIs and programs can use ldaps protocol and verify the certificate without opening the firewall port for the protocol.

This requires a TLS certificate for [](#opt-services.portunus.domain) to be configured via [](#opt-security.acme.certs).

- services.portunus.ldap.user: User account under which Portunus runs its LDAP server.
- services.portunus.package: The portunus package to use.
- services.portunus.port: Port where the Portunus webserver should listen on.

This must be put behind a TLS-capable reverse proxy because Portunus only listens on localhost.

- services.portunus.seedPath: Path to a portunus seed file in json format.
See <https://github.com/majewsky/portunus#seeding-users-and-groups-from-static-configuration> for available options.

- services.portunus.seedSettings: Seed settings for users and groups.
See upstream for format <https://github.com/majewsky/portunus#seeding-users-and-groups-from-static-configuration>

- services.portunus.stateDir: Path where Portunus stores its state.
- services.portunus.user: User account under which Portunus runs its webserver.
- services.postfix.aliasFiles: Aliases' tables to be compiled and placed into /var/lib/postfix/conf.
- services.postfix.aliasMapType: The format the alias map should have. Use regexp if you want to use regular expressions.
- services.postfix.canonical: Entries for the {manpage}`canonical(5)` table.

- services.postfix.config: Alias of {option}`services.postfix.settings.main`.
- services.postfix.destination: Alias of {option}`services.postfix.settings.main.mydestination`.
- services.postfix.dnsBlacklistOverrides: contents of check_client_access for overriding dnsBlacklists
- services.postfix.dnsBlacklists: dns blacklist servers to use with smtpd_client_restrictions
- services.postfix.domain: Alias of {option}`services.postfix.settings.main.mydomain`.
- services.postfix.enable: Whether to run the Postfix mail server.
- services.postfix.enableHeaderChecks: Whether to enable postfix header checks
- services.postfix.enableSmtp: Whether to enable the `smtp` service configured in the master.cf.

This service listens for plain text SMTP connections on port 25
and supports explicit TLS via StartTLS.

It is the primary port used by SMTP servers to exchange mail.

- services.postfix.enableSubmission: 
          Whether to enable the `submission` service configured in master.cf.

          This service listens for plain text SMTP connections on port 587
          and supports explicit TLS via StartTLS.

          It is a way for clients to login and submit mails after an inband
          connection upgrade using StartTLS.

          ::: {.warning}
          [RFC 8314](https://www.rfc-editor.org/rfc/rfc8314) discourages the use
          of explicit TLS for mail submissionn.
          :::
        
- services.postfix.enableSubmissions: Whether to enable the `submissions` service configured in master.cf.

This service listen for implicit TLS connections on port 465.

::: {.info}
Per [RFC 8314](https://www.rfc-editor.org/rfc/rfc8314) implicit TLS
is recommended for mail submission.
:::

- services.postfix.extraAliases: Additional entries to put verbatim into aliases file, cf. man-page {manpage}`aliases(8)`.

- services.postfix.extraConfig
- services.postfix.extraHeaderChecks: Extra lines to /etc/postfix/header_checks file.
- services.postfix.extraMasterConf: Extra lines to append to the generated master.cf file.
- services.postfix.group: What to call the Postfix group (must be used only for postfix).
- services.postfix.headerChecks: Postfix header checks.
- services.postfix.hostname: Alias of {option}`services.postfix.settings.main.myhostname`.
- services.postfix.localRecipients: List of accepted local users. Specify a bare username, an
`"@domain.tld"` wild-card, or a complete
`"user@domain.tld"` address. If set, these names end
up in the local recipient map -- see the {manpage}`local(8)` man-page -- and
effectively replace the system user database lookup that's otherwise
used by default.

- services.postfix.lookupMX
- services.postfix.mapFiles: Maps to be compiled and placed into /var/lib/postfix/conf.
- services.postfix.masterConfig: Alias of {option}`services.postfix.settings.master`.
- services.postfix.networks: Alias of {option}`services.postfix.settings.main.mynetworks`.
- services.postfix.networksStyle: Alias of {option}`services.postfix.settings.main.mynetworks_style`.
- services.postfix.origin: Alias of {option}`services.postfix.settings.main.myorigin`.
- services.postfix.package: The postfix package to use.
- services.postfix.postmasterAlias: Who should receive postmaster e-mail. Multiple values can be added by
separating values with comma.

- services.postfix.recipientDelimiter: Alias of {option}`services.postfix.settings.main.recipient_delimiter`.
- services.postfix.relayDomains: Alias of {option}`services.postfix.settings.main.relay_domains`.
- services.postfix.relayHost
- services.postfix.relayPort
- services.postfix.rootAlias: Who should receive root e-mail. Blank for no redirection.
Multiple values can be added by separating values with comma.

- services.postfix.setSendmail: Whether to set the system sendmail to postfix's.
- services.postfix.setgidGroup: How to call postfix setgid group (for postdrop). Should
be uniquely used group.

- services.postfix.settings.main: The main.cf configuration file as key value set.

Null values will not be rendered.

::: {.tip}
Check `postconf -d` for the default values of all settings.
:::

- services.postfix.settings.master: The {file}`master.cf` configuration file as an attribute set of service
defitions

::: {.tip}
Check <https://www.postfix.org/master.5.html> for possible settings.
:::

- services.postfix.sslCACert
- services.postfix.sslCert
- services.postfix.sslKey
- services.postfix.submissionOptions: Options for the submission config in master.cf
- services.postfix.submissionsOptions: Options for the submission config via smtps in master.cf.

smtpd_tls_security_level will be set to encrypt, if it is missing
or has one of the values "may" or "none".

smtpd_tls_wrappermode with value "yes" will be added automatically.

- services.postfix.tlsTrustedAuthoriies: Alias of {option}`services.postfix.settings.main.smtp_tls_CAfile`.
- services.postfix.transport: Entries for the transport map, cf. man-page {manpage}`transport(5)`.

- services.postfix.useDane
- services.postfix.useSrs: Alias of {option}`services.pfix-srsd.enable`.
- services.postfix.user: What to call the Postfix user (must be used only for postfix).
- services.postfix.virtual: Entries for the virtual alias map, cf. man-page {manpage}`virtual(5)`.

- services.postfix.virtualMapType: What type of virtual alias map file to use. Use `"regexp"` for regular expressions.

- services.postfix-tlspol.configurePostfix: Whether to configure the required settings to use postfix-tlspol in the local Postfix instance.

- services.postfix-tlspol.enable: Whether to enable postfix-tlspol.
- services.postfix-tlspol.package: The postfix-tlspol package to use.
- services.postfix-tlspol.settings: The postfix-tlspol configuration file as a Nix attribute set.

See the reference documentation for possible options.
<https://github.com/Zuplu/postfix-tlspol/blob/main/configs/config.default.yaml>

- services.postfixadmin
- services.postgres-websockets.enable: Whether to enable postgres-websockets.
- services.postgres-websockets.environment: postgres-websockets configuration as defined in:
<https://github.com/diogob/postgres-websockets/blob/master/src/PostgresWebsockets/Config.hs#L71-L87>

`PGWS_DB_URI` is represented as an attribute set, see [`environment.PGWS_DB_URI`](#opt-services.postgres-websockets.environment.PGWS_DB_URI)

::: {.note}
The `environment.PGWS_JWT_SECRET` option is blocked.
Use [`jwtSecretFile`](#opt-services.postgres-websockets.jwtSecretFile) instead.
:::

- services.postgres-websockets.jwtSecretFile: Secret used to sign JWT tokens used to open communications channels.

- services.postgres-websockets.pgpassFile: The password to authenticate to PostgreSQL with.
Not needed for peer or trust based authentication.

The file must be a valid `.pgpass` file as described in:
<https://www.postgresql.org/docs/current/libpq-pgpass.html>

In most cases, the following will be enough:
```
*:*:*:*:<password>
```

- services.postgresql.authentication: Defines how users authenticate themselves to the server. See the
[PostgreSQL documentation for pg_hba.conf](https://www.postgresql.org/docs/current/auth-pg-hba-conf.html)
for details on the expected format of this option. By default,
peer based authentication will be used for users connecting
via the Unix socket, and md5 password authentication will be
used for users connecting via TCP. Any added rules will be
inserted above the default rules. If you'd like to replace the
default rules entirely, you can use `lib.mkForce` in your
module.

- services.postgresql.checkConfig: Check the syntax of the configuration file at compile time
- services.postgresql.dataDir: The data directory for PostgreSQL. If left as the default value
this directory will automatically be created before the PostgreSQL server starts, otherwise
the sysadmin is responsible for ensuring the directory exists with appropriate ownership
and permissions.

- services.postgresql.enable: Whether to enable PostgreSQL Server.
- services.postgresql.enableJIT: Whether to enable JIT support.
- services.postgresql.enableTCPIP: Whether PostgreSQL should listen on all network interfaces.
If disabled, the database can only be accessed via its Unix
domain socket or via TCP connections to localhost.

- services.postgresql.ensureDatabases: Ensures that the specified databases exist.
This option will never delete existing databases, especially not when the value of this
option is changed. This means that databases created once through this option or
otherwise have to be removed manually.

- services.postgresql.ensureUsers: Ensures that the specified users exist.
The PostgreSQL users will be identified using peer authentication. This authenticates the Unix user with the
same name only, and that without the need for a password.
This option will never delete existing users or remove DB ownership of databases
once granted with `ensureDBOwnership = true;`. This means that this must be
cleaned up manually when changing after changing the config in here.

- services.postgresql.extensions: List of PostgreSQL extensions to install.

- services.postgresql.extraConfig
- services.postgresql.extraPlugins: Alias of {option}`services.postgresql.extensions`.
- services.postgresql.finalPackage: The postgresql package that will effectively be used in the system.
It consists of the base package with plugins applied to it.

- services.postgresql.identMap: Defines the mapping from system users to database users.

See the [auth doc](https://postgresql.org/docs/current/auth-username-maps.html).

There is a default map "postgres" which is used for local peer authentication
as the postgres superuser role.
For example, to allow the root user to login as the postgres superuser, add:

```
postgres root postgres
```

- services.postgresql.initdbArgs: Additional arguments passed to `initdb` during data dir
initialisation.

- services.postgresql.initialScript: A file containing SQL statements to execute on first startup.

- services.postgresql.logLinePrefix: Alias of {option}`services.postgresql.settings.log_line_prefix`.
- services.postgresql.package: The package being used by postgresql.

- services.postgresql.port: Alias of {option}`services.postgresql.settings.port`.
- services.postgresql.recoveryConfig
- services.postgresql.settings: PostgreSQL configuration. Refer to
<https://www.postgresql.org/docs/current/config-setting.html#CONFIG-SETTING-CONFIGURATION-FILE>
for an overview of `postgresql.conf`.

::: {.note}
String values will automatically be enclosed in single quotes. Single quotes will be
escaped with two single quotes as described by the upstream documentation linked above.
:::

- services.postgresql.superUser: PostgreSQL superuser account to use for various operations. Internal since changing
this value would lead to breakage while setting up databases.

- services.postgresql.systemCallFilter: Configures the syscall filter for `postgresql.service`. The keys are
declarations for `SystemCallFilter` as described in {manpage}`systemd.exec(5)`.

The value is a boolean: `true` adds the attribute name to the syscall filter-set,
`false` doesn't. This is done to allow downstream configurations to turn off
restrictions made here. E.g. with

```nix
{
  services.postgresql.systemCallFilter."~@resources" = false;
}
```

it's possible to remove the restriction on `@resources` (keep in mind that
`@system-service` implies `@resources`).

As described in the section for [](#opt-services.postgresql.systemCallFilter._name_.priority),
the ordering matters. Hence, it's also possible to specify customizations with

```nix
{
  services.postgresql.systemCallFilter = {
    "foobar" = { enable = true; priority = 23; };
  };
}
```

[](#opt-services.postgresql.systemCallFilter._name_.enable) is the flag whether
or not it will be added to the `SystemCallFilter` of `postgresql.service`.

Settings with a higher priority are added after filter settings with a lower
priority. Hence, syscall groups with a higher priority can discard declarations
with a lower priority.

By default, syscall groups (i.e. attribute names starting with `@`) are added
_before_ negated groups (i.e. `~@` as prefix) _before_ syscall names
and negations.

- services.postgresqlBackup.backupAll: Backup all databases using pg_dumpall.
This option is mutual exclusive to
`services.postgresqlBackup.databases`.
The resulting backup dump will have the name all.sql.gz.
This option is the default if no databases are specified.

- services.postgresqlBackup.compression: The type of compression to use on the generated database dump.

- services.postgresqlBackup.compressionLevel: The compression level used when compression is enabled.
gzip accepts levels 1 to 9. zstd accepts levels 1 to 19.

- services.postgresqlBackup.databases: List of database names to dump.

- services.postgresqlBackup.enable: Whether to enable PostgreSQL dumps.
- services.postgresqlBackup.location: Path of directory where the PostgreSQL database dumps will be placed.

- services.postgresqlBackup.period
- services.postgresqlBackup.pgdumpAllOptions: Command line options for pg_dumpall. This options is not used if
`config.services.postgresqlBackup.backupAll` is disabled.

- services.postgresqlBackup.pgdumpOptions: Command line options for pg_dump. This options is not used if
`config.services.postgresqlBackup.backupAll` is enabled. Note that
config.services.postgresqlBackup.backupAll is also active, when no
databases where specified.

- services.postgresqlBackup.startAt: This option defines (see `systemd.time` for format) when the
databases should be dumped.
The default is to update at 01:15 (at night) every day.

- services.postgresqlWalReceiver.receivers: PostgreSQL WAL receivers.
Stream write-ahead logs from a PostgreSQL server using {command}`pg_receivewal` (formerly {command}`pg_receivexlog`).
See [the man page](https://www.postgresql.org/docs/current/app-pgreceivewal.html) for more information.

- services.postgrest.enable: Whether to enable PostgREST.
- services.postgrest.jwtSecretFile: The secret or JSON Web Key (JWK) (or set) used to decode JWT tokens clients provide for authentication.
For security the key must be at least 32 characters long.
If this parameter is not specified then PostgREST refuses authentication requests.

<https://docs.postgrest.org/en/stable/references/configuration.html#jwt-secret>

- services.postgrest.pgpassFile: The password to authenticate to PostgreSQL with.
Not needed for peer or trust based authentication.

The file must be a valid `.pgpass` file as described in:
<https://www.postgresql.org/docs/current/libpq-pgpass.html>

In most cases, the following will be enough:
```
*:*:*:*:<password>
```

- services.postgrest.settings: PostgREST configuration as documented in:
<https://docs.postgrest.org/en/stable/references/configuration.html#list-of-parameters>

`db-uri` is represented as an attribute set, see [`settings.db-uri`](#opt-services.postgrest.settings.db-uri)

::: {.note}
The `settings.jwt-secret` option is blocked.
Use [`jwtSecretFile`](#opt-services.postgrest.jwtSecretFile) instead.
:::

- services.postgrey.IPv4CIDR: Strip N bits from IPv4 addresses if lookupBySubnet is true
- services.postgrey.IPv6CIDR: Strip N bits from IPv6 addresses if lookupBySubnet is true
- services.postgrey.autoWhitelist: Whitelist clients after successful delivery of N messages
- services.postgrey.delay: Greylist for N seconds
- services.postgrey.enable: Whether to run the Postgrey daemon
- services.postgrey.greylistAction: Response status for greylisted messages (see {manpage}`access(5)`)
- services.postgrey.greylistHeader: Prepend header to greylisted mails; use %%t for seconds delayed due to greylisting, %%v for the version of postgrey, %%d for the date, and %%h for the host
- services.postgrey.greylistText: Response status text for greylisted messages; use %%s for seconds left until greylisting is over and %%r for mail domain of recipient
- services.postgrey.inetAddr
- services.postgrey.inetPort
- services.postgrey.lookupBySubnet: Strip the last N bits from IP addresses, determined by IPv4CIDR and IPv6CIDR
- services.postgrey.maxAge: Delete entries from whitelist if they haven't been seen for N days
- services.postgrey.privacy: Store data using one-way hash functions (SHA1)
- services.postgrey.retryWindow: Allow N days for the first retry. Use string with appended 'h' to specify time in hours
- services.postgrey.socket: Socket to bind to
- services.postgrey.whitelistClients: Client address whitelist files (see {manpage}`postgrey(8)`)
- services.postgrey.whitelistRecipients: Recipient address whitelist files (see {manpage}`postgrey(8)`)
- services.postsrsd.configurePostfix: Whether to configure the required settings to use postsrsd in the local Postfix instance.

- services.postsrsd.domain
- services.postsrsd.domains: Alias of {option}`services.postsrsd.settings.domains`.
- services.postsrsd.enable: Whether to enable the postsrsd SRS server for Postfix..
- services.postsrsd.excludeDomains
- services.postsrsd.forwardPort
- services.postsrsd.group: Group for the daemon
- services.postsrsd.package: The postsrsd package to use.
- services.postsrsd.reversePort
- services.postsrsd.secretsFile: Secret keys used for signing and verification.

::: {.note}
The secret will be generated, if it does not exist at the given path.
:::

- services.postsrsd.separator: Alias of {option}`services.postsrsd.settings.separator`.
- services.postsrsd.settings: Configuration options for the postsrsd.conf file.

See the [example configuration](https://github.com/roehling/postsrsd/blob/2.0.11/doc/postsrsd.conf) for possible values.

- services.postsrsd.socketPath
- services.postsrsd.timeout
- services.postsrsd.user: User for the daemon
- services.power-profiles-daemon.enable: Whether to enable power-profiles-daemon, a DBus daemon that allows
changing system behavior based upon user-selected power profiles.

- services.power-profiles-daemon.package: The power-profiles-daemon package to use.
- services.powerdns.enable: Whether to enable PowerDNS domain name server.
- services.powerdns.extraConfig: PowerDNS configuration. Refer to
<https://doc.powerdns.com/authoritative/settings.html>
for details on supported values.

- services.powerdns.secretFile: Environment variables from this file will be interpolated into the
final config file using envsubst with this syntax: `$ENVIRONMENT`
or `${VARIABLE}`.
The file should contain lines formatted as `SECRET_VAR=SECRET_VALUE`.
This is useful to avoid putting secrets into the nix store.

- services.powerdns-admin.config: Configuration python file.
See [the example configuration](https://github.com/ngoduykhanh/PowerDNS-Admin/blob/v0.4.2/configs/development.py)
for options.
Also see [Flask Session configuration](https://flask-session.readthedocs.io/en/latest/config.html#SESSION_TYPE)
as the version shipped with NixOS is more recent than the one PowerDNS-Admin expects
and it requires explicit configuration.

- services.powerdns-admin.enable: Whether to enable the PowerDNS web interface.
- services.powerdns-admin.extraArgs: Extra arguments passed to powerdns-admin.

- services.powerdns-admin.saltFile: The salt used for serialization.
This should be set, otherwise the default is used.
Set this to null to ignore this setting and configure it through another way.

- services.powerdns-admin.secretKeyFile: The secret used to create cookies.
This needs to be set, otherwise the default is used and everyone can forge valid login cookies.
Set this to null to ignore this setting and configure it through another way.

- services.powerstation.enable: Whether to enable PowerStation.
- services.powerstation.package: The powerstation package to use.
- services.pppd.enable: Whether to enable pppd.
- services.pppd.package: The ppp package to use.
- services.pppd.peers: pppd peers.
- services.pptpd.clientIpRange: The range from which client IPs are drawn.
- services.pptpd.enable: Whether to enable pptpd, the Point-to-Point Tunneling Protocol daemon.
- services.pptpd.extraPppdOptions: Adds extra lines to the pppd options file.
- services.pptpd.extraPptpdOptions: Adds extra lines to the pptpd configuration file.
- services.pptpd.maxClients: The maximum number of simultaneous connections.
- services.pptpd.serverIp: The server-side IP address.
- services.prayer
- services.prefect.baseUrl: external url when served by a reverse proxy, e.g. `https://example.com/prefect`
- services.prefect.dataDir: Specify the directory for Prefect.

- services.prefect.database: which database to use for prefect server: sqlite or postgres
- services.prefect.databaseHost: database host for postgres only
- services.prefect.databaseName: database name for postgres only
- services.prefect.databasePasswordFile: path to a file containing e.g.:
  DBPASSWORD=supersecret

stored outside the nix store, read by systemd as EnvironmentFile.

- services.prefect.databasePort: database port for postgres only
- services.prefect.databaseUser: database user for postgres only
- services.prefect.enable: enable prefect server and worker services
- services.prefect.host: Prefect server host
- services.prefect.package: The prefect package to use.
- services.prefect.port: Prefect server port
- services.prefect.workerPools: define a set of worker pools with submodule config. example:
workerPools.my-pool = {
  installPolicy = "never";
};

- services.preload.enable: Whether to enable preload.
- services.preload.package: The preload package to use.
- services.pretalx.celery.enable: Whether to set up celery as an asynchronous task runner.

- services.pretalx.celery.extraArgs: Extra arguments to pass to celery.

See <https://docs.celeryq.dev/en/stable/reference/cli.html#celery-worker> for more info.

- services.pretalx.database.createLocally: Whether to automatically set up the database on the local DBMS instance.

Currently only supported for PostgreSQL. Not required for sqlite.

- services.pretalx.enable: Whether to enable pretalx.
- services.pretalx.group: Group under which pretalx should run.
- services.pretalx.gunicorn.extraArgs: Extra arguments to pass to gunicorn.
See <https://docs.pretalx.org/administrator/installation.html#step-6-starting-pretalx-as-a-service> for details.

- services.pretalx.nginx.domain: The domain name under which to set up the virtual host.

- services.pretalx.nginx.enable: Whether to set up an nginx virtual host.

- services.pretalx.package: The pretalx package to use.
- services.pretalx.plugins: Pretalx plugins to install into the Python environment.

- services.pretalx.settings: pretalx configuration as a Nix attribute set. All settings can also be passed
from the environment.

See <https://docs.pretalx.org/administrator/configure.html> for possible options.

- services.pretalx.user: User under which pretalx should run.
- services.pretix.celery.extraArgs: Extra arguments to pass to celery.

See <https://docs.celeryq.dev/en/stable/reference/cli.html#celery-worker> for more info.

- services.pretix.database.createLocally: Whether to automatically set up the database on the local DBMS instance.

Only supported for PostgreSQL. Not required for sqlite.

- services.pretix.enable: Whether to enable Pretix, a ticket shop application for conferences, festivals, concerts, etc.
- services.pretix.environmentFile: Environment file to pass secret configuration values.

Each line must follow the `PRETIX_SECTION_KEY=value` pattern.

- services.pretix.group: Group under which pretix should run.

- services.pretix.gunicorn.extraArgs: Extra arguments to pass to gunicorn.
See <https://docs.pretix.eu/en/latest/admin/installation/manual_smallscale.html#start-pretix-as-a-service> for details.

- services.pretix.nginx.domain: The domain name under which to set up the virtual host.

- services.pretix.nginx.enable: Whether to set up an nginx virtual host.

- services.pretix.package: The pretix package to use.
- services.pretix.plugins: Pretix plugins to install into the Python environment.

- services.pretix.settings: pretix configuration as a Nix attribute set. All settings can also be passed
from the environment.

See <https://docs.pretix.eu/en/latest/admin/config.html> for possible options.

- services.pretix.user: User under which pretix should run.

- services.prey
- services.printing.allowFrom: From which hosts to allow unconditional access.

- services.printing.bindirCmds: Additional commands executed while creating the directory
containing the CUPS server binaries.

- services.printing.browsed.enable: Whether to enable the CUPS Remote Printer Discovery (browsed) daemon.

- services.printing.browsed.package: The cups-browsed package to use.
- services.printing.browsedConf: The contents of the configuration. file of the CUPS Browsed daemon
({file}`cups-browsed.conf`)

- services.printing.browsing: Specifies whether shared printers are advertised.

- services.printing.clientConf: The contents of the client configuration.
({file}`client.conf`)

- services.printing.cups-pdf.enable: Whether to enable the cups-pdf virtual pdf printer backend.
By default, this will install a single printer `pdf`.
but this can be changed/extended with {option}`services.printing.cups-pdf.instances`
.
- services.printing.cups-pdf.instances: Permits to raise one or more cups-pdf instances.
Each instance is named by an attribute name, and the attribute's values control the instance' configuration.

- services.printing.cupsFilesConf
- services.printing.cupsdConf
- services.printing.defaultShared: Specifies whether local printers are shared by default.

- services.printing.drivers: CUPS drivers to use. Drivers provided by CUPS, cups-filters,
Ghostscript and Samba are added unconditionally. If this list contains
Gutenprint (i.e. a derivation with
`meta.isGutenprint = true`) the PPD files in
{file}`/var/lib/cups/ppd` will be updated automatically
to avoid errors due to incompatible versions.

- services.printing.enable: Whether to enable printing support through the CUPS daemon.

- services.printing.extraConf: Extra contents of the configuration file of the CUPS daemon
({file}`cupsd.conf`).

- services.printing.extraFilesConf: Extra contents of the configuration file of the CUPS daemon
({file}`cups-files.conf`).

- services.printing.gutenprint
- services.printing.listenAddresses: A list of addresses and ports on which to listen.

- services.printing.logLevel: Specifies the cupsd logging verbosity.

- services.printing.openFirewall: Whether to open the firewall for TCP ports specified in
listenAddresses option.

- services.printing.package: The cups package to use.
- services.printing.snmpConf: The contents of {file}`/etc/cups/snmp.conf`. See "man
cups-snmp.conf" for a complete description.

- services.printing.startWhenNeeded: If set, CUPS is socket-activated; that is,
instead of having it permanently running as a daemon,
systemd will start it on the first incoming connection.

- services.printing.stateless: If set, all state directories relating to CUPS will be removed on
startup of the service.

- services.printing.tempDir: CUPSd temporary directory.

- services.printing.webInterface: Specifies whether the web interface is enabled.

- services.private-gpt
- services.privatebin.dataDir: The place where privatebin stores its state.

- services.privatebin.enable: Whether to enable Privatebin: A minimalist, open source online
      pastebin where the server has zero knowledge of pasted data..
- services.privatebin.enableNginx: Whether to enable nginx or not. If enabled, an nginx virtual host will
be created for access to privatebin. If not enabled, then you may use
`${config.services.privatebin.package}` as your document root in
whichever webserver you wish to setup.

- services.privatebin.group: Group under which privatebin runs. It is best to set this to the group
of whatever webserver is being used as the frontend.

- services.privatebin.package: The privatebin package to use.
- services.privatebin.poolConfig: Options for the PrivateBin PHP pool. See the documentation on <literal>php-fpm.conf</literal>
for details on configuration directives.

- services.privatebin.settings: Options for privatebin configuration. Refer to
<https://github.com/PrivateBin/PrivateBin/wiki/Configuration> for
details on supported values.

- services.privatebin.user: User account under which privatebin runs.
- services.privatebin.virtualHost: The hostname at which you wish privatebin to be served. If you have
enabled nginx using `services.privatebin.enableNginx` then this will
be used.

- services.privoxy.actionsFiles: Alias of {option}`services.privoxy.settings.actionsfile`.
- services.privoxy.certsLifetime: If `inspectHttps` is enabled, the time generated HTTPS
certificates will be stored in a temporary directory for reuse. Once
the lifetime has expired the directory will cleared and the certificate
will have to be generated again, on-demand.

Depending on the traffic, you may want to reduce the lifetime to limit
the disk usage, since Privoxy itself never deletes the certificates.

::: {.note}
The format is that of the {manpage}`tmpfiles.d(5)`
Age parameter.
:::

- services.privoxy.enable: Whether to enable Privoxy, non-caching filtering proxy.
- services.privoxy.enableEditActions: Alias of {option}`services.privoxy.settings.enable-edit-actions`.
- services.privoxy.enableTor: Whether to configure Privoxy to use Tor's faster SOCKS port,
suitable for HTTP.

- services.privoxy.extraConfig
- services.privoxy.filterFiles: Alias of {option}`services.privoxy.settings.filterfile`.
- services.privoxy.inspectHttps: Whether to configure Privoxy to inspect HTTPS requests, meaning all
encrypted traffic will be filtered as well. This works by decrypting
and re-encrypting the requests using a per-domain generated certificate.

To issue per-domain certificates, Privoxy must be provided with a CA
certificate, using the `ca-cert-file`,
`ca-key-file` settings.

::: {.warning}
The CA certificate must also be added to the system trust roots,
otherwise browsers will reject all Privoxy certificates as invalid.
You can do so by using the option
{option}`security.pki.certificateFiles`.
:::

- services.privoxy.listenAddress: Alias of {option}`services.privoxy.settings.listen-address`.
- services.privoxy.settings: This option is mapped to the main Privoxy configuration file.
Check out the Privoxy user manual at
<https://www.privoxy.org/user-manual/config.html>
for available settings and documentation.

::: {.note}
Repeated settings can be represented by using a list.
:::

- services.privoxy.userActions: Actions to be included in a `user.action` file. This
will have a higher priority and can be used to override all other
actions.

- services.privoxy.userFilters: Filters to be included in a `user.filter` file. This
will have a higher priority and can be used to override all other
filters definitions.

- services.prometheus.alertmanager.checkConfig: Check configuration with `amtool check-config`. The call to `amtool` is
subject to sandboxing by Nix.

If you use credentials stored in external files
(`environmentFile`, etc),
they will not be visible to `amtool`
and it will report errors, despite a correct configuration.

- services.prometheus.alertmanager.clusterPeers: Initial peers for HA cluster.

- services.prometheus.alertmanager.configText: Alertmanager configuration as YAML text. If non-null, this option
defines the text that is written to alertmanager.yml. If null, the
contents of alertmanager.yml is generated from the structured config
options.

The contents of the resulting config file are processed using envsubst.
`$` needs to be escaped as `$$` to be preserved.

- services.prometheus.alertmanager.configuration: Alertmanager configuration as nix attribute set.

The contents of the resulting config file are processed using envsubst.
`$` needs to be escaped as `$$` to be preserved.

- services.prometheus.alertmanager.enable: Whether to enable Prometheus Alertmanager.
- services.prometheus.alertmanager.environmentFile: File to load as environment file. Environment variables
from this file will be interpolated into the config file
using envsubst with this syntax:
`$ENVIRONMENT ${VARIABLE}`

- services.prometheus.alertmanager.extraFlags: Extra commandline options when launching the Alertmanager.

- services.prometheus.alertmanager.group
- services.prometheus.alertmanager.listenAddress: Address to listen on for the web interface and API. Empty string will listen on all interfaces.
"localhost" will listen on 127.0.0.1 (but not ::1).

- services.prometheus.alertmanager.logFormat: If set use a syslog logger or JSON logging.

- services.prometheus.alertmanager.logLevel: Only log messages with the given severity or above.

- services.prometheus.alertmanager.openFirewall: Open port in firewall for incoming connections.

- services.prometheus.alertmanager.package: The prometheus-alertmanager package to use.
- services.prometheus.alertmanager.port: Port to listen on for the web interface and API.

- services.prometheus.alertmanager.user
- services.prometheus.alertmanager.webExternalUrl: The URL under which Alertmanager is externally reachable (for example, if Alertmanager is served via a reverse proxy).
Used for generating relative and absolute links back to Alertmanager itself.
If the URL has a path portion, it will be used to prefix all HTTP endoints served by Alertmanager.
If omitted, relevant URL components will be derived automatically.

- services.prometheus.alertmanager-ntfy.enable: Whether to enable alertmanager-ntfy.
- services.prometheus.alertmanager-ntfy.extraConfigFiles: Config files to merge into the settings defined in [](#opt-services.prometheus.alertmanager-ntfy.settings).
This is useful to avoid putting secrets into the Nix store.
See <https://github.com/alexbakker/alertmanager-ntfy> for more information.

- services.prometheus.alertmanager-ntfy.package: The alertmanager-ntfy package to use.
- services.prometheus.alertmanager-ntfy.settings: Configuration of alertmanager-ntfy.
See <https://github.com/alexbakker/alertmanager-ntfy> for more information.

- services.prometheus.alertmanagerGotify.bindAddress: The address the server will listen on (bind address).
- services.prometheus.alertmanagerGotify.debug: Enables extended logs for debugging purposes. Should be disabled in productive mode.
- services.prometheus.alertmanagerGotify.defaultPriority: The default priority for messages sent to gotify.
- services.prometheus.alertmanagerGotify.dispatchErrors: When enabled, alerts will be tried to dispatch with an error message regarding faulty templating or missing fields to help debugging.
- services.prometheus.alertmanagerGotify.enable: Whether to enable alertmagager-gotify.
- services.prometheus.alertmanagerGotify.environmentFile: File containing additional config environment variables for alertmanager-gotify-bridge.
This is especially for secrets like GOTIFY_TOKEN and AUTH_PASSWORD.

- services.prometheus.alertmanagerGotify.extendedDetails: When enabled, alerts are presented in HTML format and include colorized status (FIR|RES), alert start time, and a link to the generator of the alert.
- services.prometheus.alertmanagerGotify.gotifyEndpoint.host: The hostname or ip your gotify endpoint is running.
- services.prometheus.alertmanagerGotify.gotifyEndpoint.port: The port your gotify endpoint is running.
- services.prometheus.alertmanagerGotify.gotifyEndpoint.tls: If your gotify endpoint uses https, leave this option set to default
- services.prometheus.alertmanagerGotify.messageAnnotation: Annotation holding the alert message.
- services.prometheus.alertmanagerGotify.metrics.namespace: The namescape of the metrics.
- services.prometheus.alertmanagerGotify.metrics.path: The path under which the metrics will be exposed.
- services.prometheus.alertmanagerGotify.metrics.username: The username used to access your metrics.
- services.prometheus.alertmanagerGotify.openFirewall: Opens the bridge port in the firewall.
- services.prometheus.alertmanagerGotify.package: The alertmanager-gotify-bridge package to use.
- services.prometheus.alertmanagerGotify.port: The local port the bridge is listening on.
- services.prometheus.alertmanagerGotify.priorityAnnotation: Annotation holding the priority of the alert.
- services.prometheus.alertmanagerGotify.timeout: The time between sending a message and the timeout.
- services.prometheus.alertmanagerGotify.titleAnnotation: Annotation holding the title of the alert
- services.prometheus.alertmanagerGotify.webhookPath: The URL path to handle requests on.
- services.prometheus.alertmanagerIrcRelay.enable: Whether to enable Alertmanager IRC Relay.
- services.prometheus.alertmanagerIrcRelay.extraFlags: Extra command line options to pass to alertmanager-irc-relay.
- services.prometheus.alertmanagerIrcRelay.package: The alertmanager-irc-relay package to use.
- services.prometheus.alertmanagerIrcRelay.settings: Configuration for Alertmanager IRC Relay as a Nix attribute set.
For a reference, check out the
[example configuration](https://github.com/google/alertmanager-irc-relay#configuring-and-running-the-bot)
and the
[source code](https://github.com/google/alertmanager-irc-relay/blob/master/config.go).

Note: The webhook's URL MUST point to the IRC channel where the message
should be posted. For `#mychannel` from the example, this would be
`http://localhost:8080/mychannel`.

- services.prometheus.alertmanagerNotificationQueueCapacity: The capacity of the queue for pending alert manager notifications.

- services.prometheus.alertmanagerTimeout
- services.prometheus.alertmanagerURL
- services.prometheus.alertmanagerWebhookLogger.enable: Whether to enable Alertmanager Webhook Logger.
- services.prometheus.alertmanagerWebhookLogger.extraFlags: Extra command line options to pass to alertmanager-webhook-logger.
- services.prometheus.alertmanagerWebhookLogger.package: The alertmanager-webhook-logger package to use.
- services.prometheus.alertmanagers: A list of alertmanagers to send alerts to.
See [the official documentation](https://prometheus.io/docs/prometheus/latest/configuration/configuration/#alertmanager_config) for more information.

- services.prometheus.checkConfig: Check configuration with `promtool check`. The call to `promtool` is
subject to sandboxing by Nix.

If you use credentials stored in external files
(`password_file`, `bearer_token_file`, etc),
they will not be visible to `promtool`
and it will report errors, despite a correct configuration.
To resolve this, you may set this option to `"syntax-only"`
in order to only syntax check the Prometheus configuration.

- services.prometheus.configText: If non-null, this option defines the text that is written to
prometheus.yml. If null, the contents of prometheus.yml is generated
from the structured config options.

- services.prometheus.enable: Whether to enable Prometheus monitoring daemon.
- services.prometheus.enableAgentMode: Whether to enable agent mode.
- services.prometheus.enableReload: Reload prometheus when configuration file changes (instead of restart).

The following property holds: switching to a configuration
(`switch-to-configuration`) that changes the prometheus
configuration only finishes successfully when prometheus has finished
loading the new configuration.

- services.prometheus.environmentFile
- services.prometheus.exporters: Prometheus exporter configuration
- services.prometheus.extraFlags: Extra commandline options when launching Prometheus.

- services.prometheus.globalConfig: Parameters that are valid in all  configuration contexts. They
also serve as defaults for other configuration sections

- services.prometheus.listenAddress: Address to listen on for the web interface, API, and telemetry.

- services.prometheus.package: The prometheus package to use.
- services.prometheus.port: Port to listen on.

- services.prometheus.pushgateway.enable: Whether to enable Prometheus Pushgateway.
- services.prometheus.pushgateway.extraFlags: Extra commandline options when launching the Pushgateway.

- services.prometheus.pushgateway.log.format: Set the log target and format.

`null` will default to `logger:stderr`.

- services.prometheus.pushgateway.log.level: Only log messages with the given severity or above.

`null` will default to `info`.

- services.prometheus.pushgateway.package: The prometheus-pushgateway package to use.
- services.prometheus.pushgateway.persistMetrics: Whether to persist metrics to a file.

When enabled metrics will be saved to a file called
`metrics` in the directory
`/var/lib/pushgateway`. The directory below
`/var/lib` can be set using
{option}`services.prometheus.pushgateway.stateDir`.

- services.prometheus.pushgateway.persistence.interval: The minimum interval at which to write out the persistence file.

`null` will default to `5m`.

- services.prometheus.pushgateway.stateDir: Directory below `/var/lib` to store metrics.

This directory will be created automatically using systemd's
StateDirectory mechanism when
{option}`services.prometheus.pushgateway.persistMetrics`
is enabled.

- services.prometheus.pushgateway.web.external-url: The URL under which Pushgateway is externally reachable.

- services.prometheus.pushgateway.web.listen-address: Address to listen on for the web interface, API and telemetry.

`null` will default to `:9091`.

- services.prometheus.pushgateway.web.route-prefix: Prefix for the internal routes of web endpoints.

Defaults to the path of
{option}`services.prometheus.pushgateway.web.external-url`.

- services.prometheus.pushgateway.web.telemetry-path: Path under which to expose metrics.

`null` will default to `/metrics`.

- services.prometheus.remoteRead: Parameters of the endpoints to query from.
See [the official documentation](https://prometheus.io/docs/prometheus/latest/configuration/configuration/#remote_read) for more information.

- services.prometheus.remoteWrite: Parameters of the endpoints to send samples to.
See [the official documentation](https://prometheus.io/docs/prometheus/latest/configuration/configuration/#remote_write) for more information.

- services.prometheus.retentionTime: How long to retain samples in storage.

- services.prometheus.ruleFiles: Any additional rules files to include in this configuration.

- services.prometheus.rules: Alerting and/or Recording rules to evaluate at runtime.

- services.prometheus.sachet.address: The address Sachet will listen to.

- services.prometheus.sachet.configuration: Sachet's configuration as a nix attribute set.

- services.prometheus.sachet.enable: Whether to enable Sachet, an SMS alerting tool for the Prometheus Alertmanager.
- services.prometheus.sachet.port: The port Sachet will listen to.

- services.prometheus.scrapeConfigs: A list of scrape configurations.

- services.prometheus.stateDir: Directory below `/var/lib` to store Prometheus metrics data.
This directory will be created automatically using systemd's StateDirectory mechanism.

- services.prometheus.webConfigFile: Specifies which file should be used as web.config.file and be passed on startup.
See <https://prometheus.io/docs/prometheus/latest/configuration/https/> for valid options.

- services.prometheus.webExternalUrl: The URL under which Prometheus is externally reachable (for example,
if Prometheus is served via a reverse proxy).

- services.prometheus.xmpp-alerts.configuration: Alias of {option}`services.prometheus.xmpp-alerts.settings`.
- services.prometheus.xmpp-alerts.enable: Whether to enable XMPP Web hook service for Alertmanager.
- services.prometheus.xmpp-alerts.settings: Configuration for prometheus xmpp-alerts, see
<https://github.com/jelmer/prometheus-xmpp-alerts/blob/master/xmpp-alerts.yml.example>
for supported values.

- services.prometheus2: Alias of {option}`services.prometheus`.
- services.promtail.configFile: Config file path for Promtail.
If this option is defined, the value of `services.promtail.configuration` will be ignored.

- services.promtail.configuration: Specify the configuration for Promtail in Nix.
This option will be ignored if `services.promtail.configFile` is defined.

- services.promtail.enable: Whether to enable the Promtail ingresser.
- services.promtail.extraFlags: Specify a list of additional command line flags,
which get escaped and are then passed to Loki.

- services.prosody.admins: List of administrators of the current host
- services.prosody.allowRegistration: Allow account creation
- services.prosody.authentication: Authentication mechanism used for logins.
- services.prosody.c2sRequireEncryption: Force clients to use encrypted connections? This option will
prevent clients from authenticating unless they are using encryption.

- services.prosody.checkConfig: Check the configuration file with `prosodyctl check config`
- services.prosody.dataDir: The prosody home directory used to store all data. If left as the default value
this directory will automatically be created before the prosody server starts, otherwise
you are responsible for ensuring the directory exists with appropriate ownership
and permissions.

- services.prosody.disco_items: List of discoverable items you want to advertise.
- services.prosody.enable: Whether to enable the prosody server
- services.prosody.extraConfig: Additional prosody configuration

The generated file is processed by `envsubst` to allow secrets to be passed securely via environment variables.

- services.prosody.extraModules: Enable custom modules
- services.prosody.extraPluginPaths: Additional path in which to look find plugins/modules
- services.prosody.group: Group account under which prosody runs.

::: {.note}
If left as the default value this group will automatically be created
on system activation, otherwise you are responsible for
ensuring the group exists before the prosody service starts.
:::

- services.prosody.httpFileShare: Configures the http_file_share module to handle user uploads.

See <https://prosody.im/doc/modules/mod_http_file_share> for a full list of options.

- services.prosody.httpInterfaces: Interfaces on which the HTTP server will listen on.
- services.prosody.httpPorts: Listening HTTP ports list for this service.
- services.prosody.httpsInterfaces: Interfaces on which the HTTPS server will listen on.
- services.prosody.httpsPorts: Listening HTTPS ports list for this service.
- services.prosody.log: Logging configuration. See [](https://prosody.im/doc/logging) for more details
- services.prosody.modules.admin_adhoc: Allows administration via an XMPP client that supports ad-hoc commands
- services.prosody.modules.admin_telnet: Opens telnet console interface on localhost port 5582
- services.prosody.modules.announce: Send announcement to all online users
- services.prosody.modules.blocklist: Allow users to block communications with other users
- services.prosody.modules.bookmarks: Allows interop between older clients that use XEP-0048: Bookmarks in its 1.0 version and recent clients which use it in PEP
- services.prosody.modules.bosh: Enable BOSH clients, aka 'Jabber over HTTP'
- services.prosody.modules.carbons: Keep multiple clients in sync
- services.prosody.modules.cloud_notify: Push notifications to inform users of new messages or other pertinent information even when they have no XMPP clients online
- services.prosody.modules.csi: Implements the CSI protocol that allows clients to report their active/inactive state to the server
- services.prosody.modules.dialback: s2s dialback support
- services.prosody.modules.disco: Service discovery
- services.prosody.modules.groups: Shared roster support
- services.prosody.modules.http_files: Serve static files from a directory over HTTP
- services.prosody.modules.legacyauth: Legacy authentication. Only used by some old clients and bots
- services.prosody.modules.limits: Enable bandwidth limiting for XMPP connections
- services.prosody.modules.mam: Store messages in an archive and allow users to access it
- services.prosody.modules.motd: Send a message to users when they log in
- services.prosody.modules.pep: Enables users to publish their mood, activity, playing music and more
- services.prosody.modules.ping: Replies to XMPP pings with pongs
- services.prosody.modules.private: Private XML storage (for room bookmarks, etc.)
- services.prosody.modules.proxy65: Enables a file transfer proxy service which clients behind NAT can use
- services.prosody.modules.register: Allow users to register on this server using a client and change passwords
- services.prosody.modules.roster: Allow users to have a roster
- services.prosody.modules.saslauth: Authentication for clients and servers. Recommended if you want to log in.
- services.prosody.modules.server_contact_info: Publish contact information for this service
- services.prosody.modules.smacks: Allow a client to resume a disconnected session, and prevent message loss
- services.prosody.modules.time: Let others know the time here on this server
- services.prosody.modules.tls: Add support for secure TLS on c2s/s2s connections
- services.prosody.modules.uptime: Report how long server has been running
- services.prosody.modules.vcard: Allow users to set vCards
- services.prosody.modules.vcard_legacy: Converts users profiles and Avatars between old and new formats
- services.prosody.modules.version: Replies to server version requests
- services.prosody.modules.watchregistrations: Alert admins of registrations
- services.prosody.modules.websocket: Enable WebSocket support
- services.prosody.modules.welcome: Welcome users who register accounts
- services.prosody.muc: Multi User Chat (MUC) configuration
- services.prosody.package: The prosody package to use.
- services.prosody.s2sInsecureDomains: Some servers have invalid or self-signed certificates. You can list
remote domains here that will not be required to authenticate using
certificates. They will be authenticated using DNS instead, even
when s2s_secure_auth is enabled.

- services.prosody.s2sRequireEncryption: Force servers to use encrypted connections? This option will
prevent servers from authenticating unless they are using encryption.
Note that this is different from authentication.

- services.prosody.s2sSecureAuth: Force certificate authentication for server-to-server connections?
This provides ideal security, but requires servers you communicate
with to support encryption AND present valid, trusted certificates.
For more information see <https://prosody.im/doc/s2s#security>

- services.prosody.s2sSecureDomains: Even if you leave s2s_secure_auth disabled, you can still require valid
certificates for some domains by specifying a list here.

- services.prosody.ssl: Paths to SSL files
- services.prosody.uploadHttp
- services.prosody.user: User account under which prosody runs.

::: {.note}
If left as the default value this user will automatically be created
on system activation, otherwise you are responsible for
ensuring the user exists before the prosody service starts.
:::

- services.prosody.virtualHosts: Define the virtual hosts
- services.prosody.xmppComplianceSuite: The XEP-0423 defines a set of recommended XEPs to implement
for a server. It's generally a good idea to implement this
set of extensions if you want to provide your users with a
good XMPP experience.

This NixOS module aims to provide a "advanced server"
experience as per defined in the XEP-0423[1] specification.

Setting this option to true will prevent you from building a
NixOS configuration which won't comply with this standard.
You can explicitly decide to ignore this standard if you
know what you are doing by setting this option to false.

[1] https://xmpp.org/extensions/xep-0423.html

- services.prosody-filer.enable: Whether to enable Prosody Filer XMPP upload file server.
- services.prosody-filer.settings: Configuration for Prosody Filer.
Refer to <https://github.com/ThomasLeister/prosody-filer#configure-prosody-filer> for details on supported values.

- services.protonmail-bridge.enable: Whether to enable protonmail bridge.
- services.protonmail-bridge.logLevel: Log level of the Proton Mail Bridge service. If set to null then the service uses it's default log level.
- services.protonmail-bridge.package: The protonmail-bridge package to use.
- services.protonmail-bridge.path: List of derivations to put in protonmail-bridge's path.
- services.prowlarr.dataDir: The directory where Prowlarr stores its data files.

Note: A bind mount will be used to mount the directory at the expected location
if a different value than `/var/lib/prowlarr` is used.

- services.prowlarr.enable: Whether to enable Prowlarr, an indexer manager/proxy for Torrent trackers and Usenet indexers.
- services.prowlarr.environmentFiles: Environment file to pass secret configuration values.
Each line must follow the `PROWLARR__SECTION__KEY=value` pattern.
Please consult the documentation at the [wiki](https://wiki.servarr.com/useful-tools#using-environment-variables-for-config).

- services.prowlarr.openFirewall: Open ports in the firewall for the Prowlarr web interface.
- services.prowlarr.package: The prowlarr package to use.
- services.prowlarr.settings: Attribute set of arbitrary config options.
Please consult the documentation at the [wiki](https://wiki.servarr.com/useful-tools#using-environment-variables-for-config).

WARNING: this configuration is stored in the world-readable Nix store!
For secrets use [](#opt-services.prowlarr.environmentFiles).

- services.psd.enable: Whether to enable the Profile Sync daemon.

- services.psd.resyncTimer: The amount of time to wait before syncing browser profiles back to the
disk.

Takes a systemd.unit time span. The time unit defaults to seconds if
omitted.

- services.public-inbox.enable: Whether to enable the public-inbox mail archiver.
- services.public-inbox.http.args: Command-line arguments to pass to {manpage}`public-inbox-httpd(1)`.
- services.public-inbox.http.enable: Whether to enable the public-inbox HTTP server.
- services.public-inbox.http.mounts: Root paths or URLs that public-inbox will be served on.
If domain parts are present, only requests to those
domains will be accepted.

- services.public-inbox.http.port: Listening port or systemd's ListenStream= entry
to be used as a reverse proxy, eg. in nginx:
`locations."/inbox".proxyPass = "http://unix:${config.services.public-inbox.http.port}:/inbox";`
Set to null and use `systemd.sockets.public-inbox-httpd.listenStreams`
if you need a more advanced listening.

- services.public-inbox.imap.args: Command-line arguments to pass to {manpage}`public-inbox-imapd(1)`.
- services.public-inbox.imap.cert: Path to TLS certificate to use for connections to {manpage}`public-inbox-imapd(1)`.
- services.public-inbox.imap.enable: Whether to enable the public-inbox IMAP server.
- services.public-inbox.imap.key: Path to TLS key to use for connections to {manpage}`public-inbox-imapd(1)`.
- services.public-inbox.imap.port: Listening port.
Beware that public-inbox uses well-known ports number to decide whether to enable TLS or not.
Set to null and use `systemd.sockets.public-inbox-imapd.listenStreams`
if you need a more advanced listening.

- services.public-inbox.inboxes: Inboxes to configure, where attribute names are inbox names.

- services.public-inbox.mda.args: Command-line arguments to pass to {manpage}`public-inbox-mda(1)`.
- services.public-inbox.mda.enable: Whether to enable the public-inbox Mail Delivery Agent.
- services.public-inbox.nntp.args: Command-line arguments to pass to {manpage}`public-inbox-nntpd(1)`.
- services.public-inbox.nntp.cert: Path to TLS certificate to use for connections to {manpage}`public-inbox-nntpd(1)`.
- services.public-inbox.nntp.enable: Whether to enable the public-inbox NNTP server.
- services.public-inbox.nntp.key: Path to TLS key to use for connections to {manpage}`public-inbox-nntpd(1)`.
- services.public-inbox.nntp.port: Listening port.
Beware that public-inbox uses well-known ports number to decide whether to enable TLS or not.
Set to null and use `systemd.sockets.public-inbox-nntpd.listenStreams`
if you need a more advanced listening.

- services.public-inbox.openFirewall: Whether to enable opening the firewall when using a port option.
- services.public-inbox.package: The public-inbox package to use.
- services.public-inbox.path: Additional packages to place in the path of public-inbox-mda,
public-inbox-watch, etc.

- services.public-inbox.postfix.enable: Whether to enable the integration into Postfix.
- services.public-inbox.settings: Settings for the [public-inbox config file](https://public-inbox.org/public-inbox-config.html).

- services.public-inbox.spamAssassinRules: SpamAssassin configuration specific to public-inbox.
- services.pufferpanel.enable: Whether to enable PufferPanel game management server.

Note that [PufferPanel templates] and binaries downloaded by PufferPanel
expect [FHS environment]. It is possible to set {option}`package` option
to use PufferPanel wrapper with FHS environment. For example, to use
`Download Game from Steam` and `Download Java` template operations:
```Nix
{ lib, pkgs, ... }: {
  services.pufferpanel = {
    enable = true;
    extraPackages = with pkgs; [ bash curl gawk gnutar gzip ];
    package = pkgs.buildFHSEnv {
      name = "pufferpanel-fhs";
      runScript = lib.getExe pkgs.pufferpanel;
      targetPkgs = pkgs': with pkgs'; [ icu openssl zlib ];
    };
  };
}
```

[PufferPanel templates]: https://github.com/PufferPanel/templates
[FHS environment]: https://wikipedia.org/wiki/Filesystem_Hierarchy_Standard

- services.pufferpanel.environment: Environment variables to set for the service. Secrets should be
specified using {option}`environmentFile`.

Refer to the [PufferPanel source code][] for the list of available
configuration options. Variable name is an upper-cased configuration
entry name with underscores instead of dots, prefixed with `PUFFER_`.
For example, `panel.settings.companyName` entry can be set using
{env}`PUFFER_PANEL_SETTINGS_COMPANYNAME`.

When running with panel enabled (configured with `PUFFER_PANEL_ENABLE`
environment variable), it is recommended disable registration using
`PUFFER_PANEL_REGISTRATIONENABLED` environment variable (registration is
enabled by default). To create the initial administrator user, run
{command}`pufferpanel --workDir /var/lib/pufferpanel user add --admin`.

Some options override corresponding settings set via web interface (e.g.
`PUFFER_PANEL_REGISTRATIONENABLED`). Those options can be temporarily
toggled or set in settings but do not persist between restarts.

[PufferPanel source code]: https://github.com/PufferPanel/PufferPanel/blob/master/config/entries.go

- services.pufferpanel.environmentFile: File to load environment variables from. Loaded variables override
values set in {option}`environment`.

- services.pufferpanel.extraGroups: Additional groups for the systemd service.

- services.pufferpanel.extraPackages: Packages to add to the PATH environment variable. Both the {file}`bin`
and {file}`sbin` subdirectories of each package are added.

- services.pufferpanel.package: The pufferpanel package to use.
- services.pulseaudio.configFile: The path to the default configuration options the PulseAudio server
should use. By default, the "default.pa" configuration
from the PulseAudio distribution is used.

- services.pulseaudio.daemon.config: Config of the pulse daemon. See `man pulse-daemon.conf`.
- services.pulseaudio.daemon.logLevel: The log level that the system-wide pulseaudio daemon should use,
if activated.

- services.pulseaudio.enable: Whether to enable the PulseAudio sound server.

- services.pulseaudio.extraClientConf: Extra configuration appended to pulse/client.conf file.

- services.pulseaudio.extraConfig: Literal string to append to `configFile`
and the config file generated by the pulseaudio module.

- services.pulseaudio.extraModules: Extra pulseaudio modules to use. This is intended for out-of-tree
pulseaudio modules like extra bluetooth codecs.

Extra modules take precedence over built-in pulseaudio modules.

- services.pulseaudio.package: The PulseAudio derivation to use.  This can be used to enable
features (such as JACK support, Bluetooth) via the
`pulseaudioFull` package.

- services.pulseaudio.support32Bit: Whether to include the 32-bit pulseaudio libraries in the system or not.
This is only useful on 64-bit systems and currently limited to x86_64-linux.

- services.pulseaudio.systemWide: If false, a PulseAudio server is launched automatically for
each user that tries to use the sound system. The server runs
with user privileges. If true, one system-wide PulseAudio
server is launched on boot, running as the user "pulse", and
only users in the "pulse-access" group will have access to the server.
Please read the PulseAudio documentation for more details.

Don't enable this option unless you know what you are doing.

- services.pulseaudio.tcp.anonymousClients.allowAll: Whether to enable all anonymous clients to stream to the server.
- services.pulseaudio.tcp.anonymousClients.allowedIpRanges: A list of IP subnets that are allowed to stream to the server.

- services.pulseaudio.tcp.enable: Whether to enable tcp streaming support.
- services.pulseaudio.zeroconf.discovery.enable: Whether to enable discovery of pulseaudio sinks in the local network.
- services.pulseaudio.zeroconf.publish.enable: Whether to enable publishing the pulseaudio sink in the local network.
- services.pykms.enable: Whether to enable the PyKMS service.
- services.pykms.extraArgs: Additional arguments
- services.pykms.listenAddress: The IP address on which to listen.
- services.pykms.logLevel: How much to log
- services.pykms.memoryLimit: How much memory to use at most.
- services.pykms.openFirewallPort: Whether the listening port should be opened automatically.
- services.pykms.package: The pykms package to use.
- services.pykms.port: The port on which to listen.
- services.pykms.verbose
- services.pyload.credentialsFile: File containing {env}`PYLOAD_DEFAULT_USERNAME` and
{env}`PYLOAD_DEFAULT_PASSWORD` in the format of an `EnvironmentFile=`,
as described by {manpage}`systemd.exec(5)`.

If not given, they default to the username/password combo of
pyload/pyload.

- services.pyload.downloadDirectory: Directory to store downloads.
- services.pyload.enable: Whether to enable pyLoad download manager.
- services.pyload.group: Group under which pyLoad runs, and which owns the download directory.
- services.pyload.listenAddress: Address to listen on for the web UI.
- services.pyload.package: The pyLoad package to use.
- services.pyload.port: Port to listen on for the web UI.
- services.pyload.user: User under which pyLoad runs, and which owns the download directory.
- services.qbittorrent.enable: Whether to enable qbittorrent, BitTorrent client.
- services.qbittorrent.extraArgs: Extra arguments passed to qbittorrent. See `qbittorrent -h`, or the [source code](https://github.com/qbittorrent/qBittorrent/blob/master/src/app/cmdoptions.cpp), for the available arguments.

- services.qbittorrent.group: Group under which qbittorrent runs.
- services.qbittorrent.openFirewall: Whether to enable opening both the webuiPort and torrentPort over TCP in the firewall.
- services.qbittorrent.package: The qbittorrent-nox package to use.
- services.qbittorrent.profileDir: the path passed to qbittorrent via --profile.
- services.qbittorrent.serverConfig: Free-form settings mapped to the `qBittorrent.conf` file in the profile.
Refer to [Explanation-of-Options-in-qBittorrent](https://github.com/qbittorrent/qBittorrent/wiki/Explanation-of-Options-in-qBittorrent).
The Password_PBKDF2 format is oddly unique, you will likely want to use [this tool](https://codeberg.org/feathecutie/qbittorrent_password) to generate the format.
Alternatively you can run qBittorrent independently first and use its webUI to generate the format.

Optionally an alternative webUI can be easily set. VueTorrent for example:
```nix
{
  Preferences = {
    WebUI = {
      AlternativeUIEnabled = true;
      RootFolder = "${pkgs.vuetorrent}/share/vuetorrent";
    };
  };
}
];
```

- services.qbittorrent.torrentingPort: the port passed to qbittorrent via `--torrenting-port`
- services.qbittorrent.user: User account under which qbittorrent runs.
- services.qbittorrent.webuiPort: the port passed to qbittorrent via `--webui-port`
- services.qdrant.enable: Whether to enable Vector Search Engine for the next generation of AI applications.
- services.qdrant.package: The qdrant package to use.
- services.qdrant.settings: Configuration for Qdrant
Refer to <https://github.com/qdrant/qdrant/blob/master/config/config.yaml> for details on supported values.

- services.qdrant.webUIPackage: The qdrant-web-ui package to use.
- services.qemuGuest.enable: Whether to enable the qemu guest agent.
- services.qemuGuest.package: The ga package to use.
- services.quagga
- services.quake3-server.baseq3: Path to the baseq3 files (pak*.pk3). If this is on the nix store (type = package) all .pk3 files should be saved
in the top-level directory. If this is on another filesystem (e.g /var/lib/baseq3) the .pk3 files are searched in
$baseq3/.q3a/baseq3/

- services.quake3-server.enable: Whether to enable Quake 3 dedicated server.
- services.quake3-server.extraConfig: Extra configuration options. Note that options changed via RCON will not be persisted. To list all possible
options, use "cvarlist 1" via RCON.

- services.quake3-server.openFirewall: Open the firewall.

- services.quake3-server.package: The ioquake3 package to use.
- services.quake3-server.port: UDP Port the server should listen on.

- services.quassel.certificateFile: Path to the certificate used for SSL connections with clients.

- services.quassel.dataDir: The directory holding configuration files, the SQlite database and the SSL Cert.

- services.quassel.enable: Whether to enable the Quassel IRC client daemon.
- services.quassel.interfaces: The interfaces the Quassel daemon will be listening to.  If `[ 127.0.0.1 ]`,
only clients on the local host can connect to it; if `[ 0.0.0.0 ]`, clients
can access it from any network interface.

- services.quassel.package: The quasselDaemon package to use.
- services.quassel.portNumber: The port number the Quassel daemon will be listening to.

- services.quassel.requireSSL: Require SSL for connections from clients.

- services.quassel.user: The existing user the Quassel daemon should run as. If left empty, a default "quassel" user will be created.

- services.quicktun: QuickTun tunnels.

See <http://wiki.ucis.nl/QuickTun> for more information about available options.

- services.quickwit.dataDir: Data directory for Quickwit. If you change this, you need to
manually create the directory. You also need to create the
`quickwit` user and group, or change
[](#opt-services.quickwit.user) and
[](#opt-services.quickwit.group) to existing ones with
access to the directory.

- services.quickwit.enable: Whether to enable Quickwit.
- services.quickwit.extraFlags: Extra command line options to pass to Quickwit.
- services.quickwit.group: The group quickwit runs as. Should be left at default unless
you have very specific needs.

- services.quickwit.package: The Quickwit package to use.
- services.quickwit.restartIfChanged: Automatically restart the service on config change.
This can be set to false to defer restarts on a server or cluster.
Please consider the security implications of inadvertently running an older version,
and the possibility of unexpected behavior caused by inconsistent versions across a cluster when disabling this option.

- services.quickwit.settings: Quickwit configuration.

- services.quickwit.user: The user Quickwit runs as. Should be left at default unless
you have very specific needs.

- services.quorum.blockperiod: Default minimum difference between two consecutive block's timestamps in seconds.
- services.quorum.enable: Whether to enable Quorum blockchain daemon.
- services.quorum.genesis: Blockchain genesis settings.
- services.quorum.group: The group as which to run quorum.
- services.quorum.nodekeyFile: Path to the nodekey.
- services.quorum.permissioned: Allow only a defined list of nodes to connect.
- services.quorum.port: Override the default port on which to listen for connections.
- services.quorum.privateconfig: Configuration of privacy transaction manager.
- services.quorum.rpc.address: Listening address for RPC connections.
- services.quorum.rpc.api: API's offered over the HTTP-RPC interface.
- services.quorum.rpc.enable: Enable RPC interface.
- services.quorum.rpc.port: Override the default port on which to listen for RPC connections.
- services.quorum.staticNodes: List of validator nodes.
- services.quorum.syncmode: Blockchain sync mode.
- services.quorum.user: The user as which to run quorum.
- services.quorum.ws.address: Listening address for WS-RPC connections.
- services.quorum.ws.api: API's offered over the WS-RPC interface.
- services.quorum.ws.enable: Enable WS-RPC interface.
- services.quorum.ws.origins: Origins from which to accept websockets requests
- services.quorum.ws.port: Override the default port on which to listen for WS-RPC connections.
- services.r53-ddns.domain: The name of your domain in Route53
- services.r53-ddns.enable: Whether to enable r53-ddyns.
- services.r53-ddns.environmentFile: File containing the AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY
in the format of an EnvironmentFile as described by {manpage}`systemd.exec(5)`

- services.r53-ddns.hostname: Manually specify the hostname. Otherwise the tool will try to use the name
returned by the OS (Call to gethostname)

- services.r53-ddns.interval: How often to update the entry
- services.r53-ddns.ttl: The TTL for the generated record
- services.r53-ddns.zoneID: The ID of your zone in Route53
- services.rabbitmq.config: Verbatim advanced configuration file contents using the Erlang syntax.
This is also known as the `advanced.config` file or the old config format.

`configItems` is preferred whenever possible. However, nested
data structures can only be expressed properly using the `config` option.

The contents of this option will be merged into the `configItems`
by RabbitMQ at runtime to form the final configuration.

See the second table on <https://www.rabbitmq.com/configure.html#config-items>
For the distinct formats, see <https://www.rabbitmq.com/configure.html#config-file-formats>

- services.rabbitmq.configItems: Configuration options in RabbitMQ's new config file format,
which is a simple key-value format that can not express nested
data structures. This is known as the `rabbitmq.conf` file,
although outside NixOS that filename may have Erlang syntax, particularly
prior to RabbitMQ 3.7.0.

If you do need to express nested data structures, you can use
`config` option. Configuration from `config`
will be merged into these options by RabbitMQ at runtime to
form the final configuration.

See <https://www.rabbitmq.com/configure.html#config-items>
For the distinct formats, see <https://www.rabbitmq.com/configure.html#config-file-formats>

- services.rabbitmq.cookie
- services.rabbitmq.dataDir: Data directory for rabbitmq.

- services.rabbitmq.enable: Whether to enable the RabbitMQ server, an Advanced Message
Queuing Protocol (AMQP) broker.

- services.rabbitmq.listenAddress: IP address on which RabbitMQ will listen for AMQP
connections.  Set to the empty string to listen on all
interfaces.  Note that RabbitMQ creates a user named
`guest` with password
`guest` by default, so you should delete
this user if you intend to allow external access.

Together with 'port' setting it's mostly an alias for
configItems."listeners.tcp.1" and it's left for backwards
compatibility with previous version of this module.

- services.rabbitmq.managementPlugin.enable: Whether to enable the management plugin.
- services.rabbitmq.managementPlugin.port: On which port to run the management plugin

- services.rabbitmq.package: The rabbitmq-server package to use.
- services.rabbitmq.pluginDirs: The list of directories containing external plugins
- services.rabbitmq.plugins: The names of plugins to enable
- services.rabbitmq.port: Port on which RabbitMQ will listen for AMQP connections.

- services.rabbitmq.unsafeCookie: Erlang cookie is a string of arbitrary length which must
be the same for several nodes to be allowed to communicate.
Leave empty to generate automatically.

Setting the cookie via this option exposes the cookie to the store, which
is not recommended for security reasons.
Only use this option in an isolated non-production environment such as
NixOS VM tests.

- services.racoon
- services.radarr.dataDir: The directory where Radarr stores its data files.
- services.radarr.enable: Whether to enable Radarr, a UsetNet/BitTorrent movie downloader.
- services.radarr.environmentFiles: Environment file to pass secret configuration values.
Each line must follow the `RADARR__SECTION__KEY=value` pattern.
Please consult the documentation at the [wiki](https://wiki.servarr.com/useful-tools#using-environment-variables-for-config).

- services.radarr.group: Group under which Radarr runs.
- services.radarr.openFirewall: Open ports in the firewall for the Radarr web interface.
- services.radarr.package: The radarr package to use.
- services.radarr.settings: Attribute set of arbitrary config options.
Please consult the documentation at the [wiki](https://wiki.servarr.com/useful-tools#using-environment-variables-for-config).

WARNING: this configuration is stored in the world-readable Nix store!
For secrets use [](#opt-services.radarr.environmentFiles).

- services.radarr.user: User account under which Radarr runs.
- services.radicale.config: Radicale configuration, this will set the service
configuration file.
This option is mutually exclusive with {option}`settings`.
This option is deprecated.  Use {option}`settings` instead.

- services.radicale.enable: Whether to enable Radicale CalDAV and CardDAV server.
- services.radicale.extraArgs: Extra arguments passed to the Radicale daemon.
- services.radicale.package: Radicale package to use.
- services.radicale.rights: Configuration for Radicale's rights file. See
<https://radicale.org/v3.html#authentication-and-rights>.
This option only works in conjunction with {option}`settings`.
Setting this will also set {option}`settings.rights.type` and
{option}`settings.rights.file` to appropriate values.

- services.radicale.settings: Configuration for Radicale. See
<https://radicale.org/v3.html#configuration>.
This option is mutually exclusive with {option}`config`.

- services.radicle.checkConfig: Whether to enable checking the {file}`config.json` file resulting from {option}`services.radicle.settings`.
- services.radicle.ci.adapters.native.instances: radicle-native-ci adapter instances.
- services.radicle.ci.broker.checkConfig: Whether to enable checking the {file}`ci-broker.yaml` file resulting from [](#opt-services.radicle.ci.broker.settings).
- services.radicle.ci.broker.enable: Whether to enable radicle-ci-broker.
- services.radicle.ci.broker.enableHardening: Whether to enable systemd hardening.
- services.radicle.ci.broker.logDir: Log directory of radicle-ci-broker.
- services.radicle.ci.broker.package: The radicle-ci-broker package to use.
- services.radicle.ci.broker.settings: Configuration of radicle-ci-broker.
See <https://app.radicle.xyz/nodes/seed.radicle.xyz/rad:zwTxygwuz5LDGBq255RA2CbNGrz8/tree/doc/userguide.md#configuration> for more information.

- services.radicle.ci.broker.stateDir: State directory of radicle-ci-broker.
- services.radicle.configFile
- services.radicle.enable: Whether to enable Radicle Seed Node.
- services.radicle.httpd.aliases: Alias and RID pairs to shorten git clone commands for repositories.
- services.radicle.httpd.enable: Whether to enable Radicle HTTP gateway to radicle-node.
- services.radicle.httpd.extraArgs: Extra arguments for `radicle-httpd`
- services.radicle.httpd.listenAddress: The IP address on which `radicle-httpd` listens.
- services.radicle.httpd.listenPort: The port on which `radicle-httpd` listens.
- services.radicle.httpd.nginx: With this option, you can customize an nginx virtual host which already has sensible defaults for `radicle-httpd`.
Set to `{}` if you do not need any customization to the virtual host.
If enabled, then by default, the {option}`serverName` is
`radicle-${config.networking.hostName}.${config.networking.domain}`,
TLS is active, and certificates are acquired via ACME.
If this is set to null (the default), no nginx virtual host will be configured.

- services.radicle.httpd.package: The radicle-httpd package to use.
- services.radicle.node.extraArgs: Extra arguments for `radicle-node`
- services.radicle.node.listenAddress: The IP address on which `radicle-node` listens.
- services.radicle.node.listenPort: The port on which `radicle-node` listens.
- services.radicle.node.openFirewall: Whether to enable opening the firewall for `radicle-node`.
- services.radicle.package: The radicle-node package to use.
- services.radicle.privateKeyFile: Absolute file path to an SSH private key,
usually generated by `rad auth`.

If it contains a colon (`:`) the string before the colon
is taken as the credential name
and the string after as a path encrypted with `systemd-creds`.

- services.radicle.publicKey: An SSH public key (as an absolute file path or directly as a string),
usually generated by `rad auth`.

- services.radicle.settings: See <https://app.radicle.xyz/nodes/seed.radicle.garden/rad:z3gqcJUoA1n9HaHKufZs5FCSGazv5/tree/radicle/src/node/config.rs#L275>

- services.radvd.config: The contents of the radvd configuration file.

- services.radvd.debugLevel: The debugging level is an integer in the range from 1 to 5,
from quiet to very verbose. A debugging level of 0 completely
turns off debugging.

- services.radvd.enable: Whether to enable the Router Advertisement Daemon
({command}`radvd`), which provides link-local
advertisements of IPv6 router addresses and prefixes using
the Neighbor Discovery Protocol (NDP).  This enables
stateless address autoconfiguration in IPv6 clients on the
network.

- services.radvd.package: The radvd package to use.
- services.railcar
- services.ratbagd.enable: Whether to enable ratbagd for configuring gaming mice.
- services.ratbagd.package: The libratbag package to use.
- services.rathole.credentialsFile: Path to a TOML file to be merged with the settings.
Useful to set secret config parameters like tokens, which
should not appear in the Nix Store.

- services.rathole.enable: Whether to enable Rathole.
- services.rathole.package: The rathole package to use.
- services.rathole.role: Select whether rathole needs to be run as a `client` or a `server`.
Server is a machine with a public IP and client is a device behind NAT,
but running some services that need to be exposed to the Internet.

- services.rathole.settings: Rathole configuration, for options reference
see the [example](https://github.com/rapiz1/rathole?tab=readme-ov-file#configuration) on GitHub.
Both server and client configurations can be specified at the same time, regardless of the selected role.

- services.rdnssd.enable: Whether to enable the RDNSS daemon
({command}`rdnssd`), which configures DNS servers in
{file}`/etc/resolv.conf` from RDNSS
advertisements sent by IPv6 routers.

- services.readarr.dataDir: The directory where Readarr stores its data files.
- services.readarr.enable: Whether to enable Readarr, a Usenet/BitTorrent ebook downloader.
- services.readarr.environmentFiles: Environment file to pass secret configuration values.
Each line must follow the `READARR__SECTION__KEY=value` pattern.
Please consult the documentation at the [wiki](https://wiki.servarr.com/useful-tools#using-environment-variables-for-config).

- services.readarr.group: Group under which Readarr runs.

- services.readarr.openFirewall: Open ports in the firewall for Readarr

- services.readarr.package: The readarr package to use.
- services.readarr.settings: Attribute set of arbitrary config options.
Please consult the documentation at the [wiki](https://wiki.servarr.com/useful-tools#using-environment-variables-for-config).

WARNING: this configuration is stored in the world-readable Nix store!
For secrets use [](#opt-services.readarr.environmentFiles).

- services.readarr.user: User account under which Readarr runs.

- services.readeck.enable: Whether to enable Readeck.
- services.readeck.environmentFile: File containing environment variables to be passed to Readeck.
May be used to provide the Readeck secret key by setting the READECK_SECRET_KEY variable.

- services.readeck.package: The readeck package to use.
- services.readeck.settings: Additional configuration for Readeck, see
<https://readeck.org/en/docs/configuration>
for supported values.

- services.realm.config: The realm configuration, see <https://github.com/zhboner/realm#overview> for documentation.

- services.realm.enable: Whether to enable A simple, high performance relay server written in rust.
- services.realm.package: The realm package to use.
- services.realmd.enable: Whether to enable realmd service for managing system enrollment in Active Directory domains.
- services.realmd.package: The realmd package to use.
- services.rebuilderd.enable: Whether to enable rebuilderd service for independent verification of binary packages.
- services.rebuilderd.package: The rebuilderd package to use.
- services.rebuilderd.settings: Configuration for rebuilderd (rebuilderd.conf)

- services.recyclarr.command: The recyclarr command to run (e.g., sync).
- services.recyclarr.configuration: Recyclarr YAML configuration as a Nix attribute set.

For detailed configuration options and examples, see the
[official configuration reference](https://recyclarr.dev/wiki/yaml/config-reference/).

The configuration is processed using [utils.genJqSecretsReplacementSnippet](https://github.com/NixOS/nixpkgs/blob/master/nixos/lib/utils.nix#L232-L331) to handle secret substitution.

To avoid permission issues, secrets should be provided via systemd's credential mechanism:

```nix
systemd.services.recyclarr.serviceConfig.LoadCredential = [
  "radarr-api_key:${config.sops.secrets.radarr-api_key.path}"
];
```

- services.recyclarr.enable: Whether to enable recyclarr service.
- services.recyclarr.group: Group under which recyclarr runs.
- services.recyclarr.package: The recyclarr package to use.
- services.recyclarr.schedule: When to run recyclarr in systemd calendar format.
- services.recyclarr.user: User account under which recyclarr runs.
- services.redis.appendFsync: Alias of {option}`services.redis.servers."".appendFsync`.
- services.redis.appendOnly: Alias of {option}`services.redis.servers."".appendOnly`.
- services.redis.appendOnlyFilename
- services.redis.bind: Alias of {option}`services.redis.servers."".bind`.
- services.redis.databases: Alias of {option}`services.redis.servers."".databases`.
- services.redis.dbFilename
- services.redis.dbpath
- services.redis.enable: Alias of {option}`services.redis.servers."".enable`.
- services.redis.extraConfig
- services.redis.logLevel: Alias of {option}`services.redis.servers."".logLevel`.
- services.redis.logfile: Alias of {option}`services.redis.servers."".logfile`.
- services.redis.masterAuth: Alias of {option}`services.redis.servers."".masterAuth`.
- services.redis.maxclients: Alias of {option}`services.redis.servers."".maxclients`.
- services.redis.openFirewall: Alias of {option}`services.redis.servers."".openFirewall`.
- services.redis.package: The redis package to use.
- services.redis.pidFile
- services.redis.port: Alias of {option}`services.redis.servers."".port`.
- services.redis.requirePass: Alias of {option}`services.redis.servers."".requirePass`.
- services.redis.requirePassFile: Alias of {option}`services.redis.servers."".requirePassFile`.
- services.redis.save: Alias of {option}`services.redis.servers."".save`.
- services.redis.servers: Configuration of multiple `redis-server` instances.
- services.redis.settings: Alias of {option}`services.redis.servers."".settings`.
- services.redis.slaveOf: Alias of {option}`services.redis.servers."".slaveOf`.
- services.redis.slowLogLogSlowerThan: Alias of {option}`services.redis.servers."".slowLogLogSlowerThan`.
- services.redis.slowLogMaxLen: Alias of {option}`services.redis.servers."".slowLogMaxLen`.
- services.redis.syslog: Alias of {option}`services.redis.servers."".syslog`.
- services.redis.unixSocket: Alias of {option}`services.redis.servers."".unixSocket`.
- services.redis.unixSocketPerm: Alias of {option}`services.redis.servers."".unixSocketPerm`.
- services.redis.user
- services.redis.vmOverCommit: Whether to enable set `vm.overcommit_memory` sysctl to 1
(Suggested for Background Saving: <https://redis.io/docs/get-started/faq/>)
.
- services.redlib.address: The address to listen on
- services.redlib.enable: Whether to enable Private front-end for Reddit.
- services.redlib.openFirewall: Open ports in the firewall for the redlib web interface
- services.redlib.package: The redlib package to use.
- services.redlib.port: The port to listen on
- services.redlib.settings: See [GitHub](https://github.com/redlib-org/redlib/tree/main?tab=readme-ov-file#configuration) for available settings.

- services.redmine.address: IP address Redmine should bind to.
- services.redmine.components.breezy: Whether to enable bazaar integration..
- services.redmine.components.cvs: Whether to enable cvs integration..
- services.redmine.components.ghostscript: Whether to enable exporting Gant diagrams as PDF..
- services.redmine.components.git: Whether to enable git integration..
- services.redmine.components.imagemagick: Whether to enable exporting Gant diagrams as PNG..
- services.redmine.components.mercurial: Whether to enable Mercurial integration..
- services.redmine.components.minimagick_font_path: MiniMagick font path
- services.redmine.components.subversion: Whether to enable Subversion integration..
- services.redmine.database
- services.redmine.enable: Whether to enable Redmine, a project management web application.
- services.redmine.extraConfig
- services.redmine.extraEnv: Extra configuration in additional_environment.rb.

See <https://svn.redmine.org/redmine/trunk/config/additional_environment.rb.example>
for details.

- services.redmine.group: Group under which Redmine is ran.
- services.redmine.package: The redmine package to use.
- services.redmine.plugins: Set of plugins.
- services.redmine.port: Port on which Redmine is ran.
- services.redmine.settings: Redmine configuration ({file}`configuration.yml`). Refer to
<https://guides.rubyonrails.org/action_mailer_basics.html#action-mailer-configuration>
for details.

- services.redmine.stateDir: The state directory, logs and plugins are stored here.
- services.redmine.themes: Set of themes.
- services.redmine.user: User under which Redmine is ran.
- services.redshift.brightness.day: Screen brightness to apply during the day,
between `0.1` and `1.0`.

- services.redshift.brightness.night: Screen brightness to apply during the night,
between `0.1` and `1.0`.

- services.redshift.enable: Enable Redshift to change your screen's colour temperature depending on
the time of day.

- services.redshift.executable: Redshift executable to use within the package.

- services.redshift.extraOptions: Additional command-line arguments to pass to
{command}`redshift`.

- services.redshift.latitude
- services.redshift.longitude
- services.redshift.package: The redshift package to use.
- services.redshift.provider: Alias of {option}`location.provider`.
- services.redshift.temperature.day: Colour temperature to use during the day, between
`1000` and `25000` K.

- services.redshift.temperature.night: Colour temperature to use at night, between
`1000` and `25000` K.

- services.redsocks.chroot: Chroot under which to run redsocks. Log file is opened before
chroot, but if logging to syslog /etc/localtime may be required.

- services.redsocks.enable: Whether to enable redsocks.
- services.redsocks.log: Where to send logs.

Possible values are:
  - stderr
  - file:/path/to/file
  - syslog:FACILITY where FACILITY is any of "daemon", "local0",
    etc.

- services.redsocks.log_debug: Log connection progress.
- services.redsocks.log_info: Log start and end of client sessions.
- services.redsocks.redsocks: Local port to proxy associations to be performed.

The example shows how to configure a proxy to handle port 80 as HTTP
relay, and all other ports as HTTP connect.

- services.renovate.credentials: Allows configuring environment variable credentials for renovate, read from files.
This should always be used for passing confidential data to renovate.

- services.renovate.enable: Whether to enable renovate.
- services.renovate.environment: Extra environment variables to export to the Renovate process
from the systemd unit configuration.

See <https://docs.renovatebot.com/config-overview> for available environment variables.

- services.renovate.package: The renovate package to use.
- services.renovate.runtimePackages: Packages available to renovate.
- services.renovate.schedule: How often to run renovate. See {manpage}`systemd.time(7)` for the format.
- services.renovate.settings: Renovate's global configuration.
If you want to pass secrets to renovate, please use {option}`services.renovate.credentials` for that.

See <https://docs.renovatebot.com/config-overview> for available settings.

- services.renovate.validateSettings: Whether to run renovate's config validator on the built configuration.
- services.replay-sorcery
- services.reposilite.database: Database options.
- services.reposilite.enable: Whether to enable Reposilite.
- services.reposilite.extraArgs: Extra arguments/parameters passed to the Reposilite. Can be used for first token generation.

- services.reposilite.group: The group to run Reposilite under.

- services.reposilite.keyPasswordFile: Path the the file containing the password used to unlock the Java KeyStore file specified in {option}`services.reposilite.settings.keyPath`.
This file must be readable my {option}`services.reposilite.user`.

- services.reposilite.openFirewall: Whether to open the firewall ports for Reposilite. If SSL is enabled, its port will be opened too.

- services.reposilite.package: The reposilite package to use.
- services.reposilite.plugins: List of plugins to add to Reposilite.

- services.reposilite.settings: Configuration written to the reposilite.cdn file
- services.reposilite.useACMEHost: Host of an existing Let's Encrypt certificate to use for SSL.
Make sure that the certificate directory is readable by the `reposilite` user or group, for example via {option}`security.acme.certs.<cert>.group`.
*Note that this option does not create any certificates, nor it does add subdomains to existing ones – you will need to create them manually using {option}`security.acme.certs`*

- services.reposilite.user: The user to run Reposilite under.

- services.reposilite.workingDirectory: Working directory for Reposilite.

- services.resilio.apiKey: API key, which enables the developer API.
- services.resilio.checkForUpdates: Determines whether to check for updates and alert the user
about them in the UI.

- services.resilio.deviceName: Name of the Resilio Sync device.

- services.resilio.directoryRoot: Default directory to add folders in the web UI.
- services.resilio.downloadLimit: Download speed limit. 0 is unlimited (default).

- services.resilio.enable: If enabled, start the Resilio Sync daemon. Once enabled, you can
interact with the service through the Web UI, or configure it in your
NixOS configuration.

- services.resilio.enableWebUI: Enable Web UI for administration. Bound to the specified
`httpListenAddress` and
`httpListenPort`.

- services.resilio.encryptLAN: Encrypt LAN data.
- services.resilio.httpListenAddr: HTTP address to bind to.

- services.resilio.httpListenPort: HTTP port to bind on.

- services.resilio.httpLogin: HTTP web login username.

- services.resilio.httpPass: HTTP web login password.

- services.resilio.listeningPort: Listening port. Defaults to 0 which randomizes the port.

- services.resilio.package: The resilio-sync package to use.
- services.resilio.sharedFolders: Shared folder list. If enabled, web UI must be
disabled. Secrets can be generated using `rslsync --generate-secret`.

If you would like to be able to modify the contents of this
directories, it is recommended that you make your user a
member of the `rslsync` group.

Directories in this list should be in the
`rslsync` group, and that group must have
write access to the directory. It is also recommended that
`chmod g+s` is applied to the directory
so that any sub directories created will also belong to
the `rslsync` group. Also,
`setfacl -d -m group:rslsync:rwx` and
`setfacl -m group:rslsync:rwx` should also
be applied so that the sub directories are writable by
the group.

- services.resilio.storagePath: Where BitTorrent Sync will store it's database files (containing
things like username info and licenses). Generally, you should not
need to ever change this.

- services.resilio.uploadLimit: Upload speed limit. 0 is unlimited (default).

- services.resilio.useUpnp: Use Universal Plug-n-Play (UPnP)

- services.resolved.dnsovertls: If set to
- `"true"`:
    all DNS lookups will be encrypted. This requires
    that the DNS server supports DNS-over-TLS and
    has a valid certificate. If the hostname was specified
    via the `address#hostname` format in {option}`services.resolved.domains`
    then the specified hostname is used to validate its certificate.
- `"opportunistic"`:
    all DNS lookups will attempt to be encrypted, but will fallback
    to unecrypted requests if the server does not support DNS-over-TLS.
    Note that this mode does allow for a malicious party to conduct a
    downgrade attack by immitating the DNS server and pretending to not
    support encryption.
- `"false"`:
    all DNS lookups are done unencrypted.

- services.resolved.dnssec: If set to
- `"true"`:
    all DNS lookups are DNSSEC-validated locally (excluding
    LLMNR and Multicast DNS). Note that this mode requires a
    DNS server that supports DNSSEC. If the DNS server does
    not properly support DNSSEC all validations will fail.
- `"allow-downgrade"`:
    DNSSEC validation is attempted, but if the server does not
    support DNSSEC properly, DNSSEC mode is automatically
    disabled. Note that this mode makes DNSSEC validation
    vulnerable to "downgrade" attacks, where an attacker might
    be able to trigger a downgrade to non-DNSSEC mode by
    synthesizing a DNS response that suggests DNSSEC was not
    supported.
- `"false"`: DNS lookups are not DNSSEC validated.

At the time of September 2023, systemd upstream advise
to disable DNSSEC by default as the current code
is not robust enough to deal with "in the wild" non-compliant
servers, which will usually give you a broken bad experience
in addition of insecure.

- services.resolved.domains: A list of domains. These domains are used as search suffixes
when resolving single-label host names (domain names which
contain no dot), in order to qualify them into fully-qualified
domain names (FQDNs).

For compatibility reasons, if this setting is not specified,
the search domains listed in
{file}`/etc/resolv.conf` are used instead, if
that file exists and any domains are configured in it.

- services.resolved.enable: Whether to enable the systemd DNS resolver daemon, `systemd-resolved`.

Search for `services.resolved` to see all options.

- services.resolved.extraConfig: Extra config to append to resolved.conf.

- services.resolved.fallbackDns: A list of IPv4 and IPv6 addresses to use as the fallback DNS servers.
If this option is null, a compiled-in list of DNS servers is used instead.
Setting this option to an empty list will override the built-in list to an empty list, disabling fallback.

- services.resolved.llmnr: Controls Link-Local Multicast Name Resolution support
(RFC 4795) on the local host.

If set to
- `"true"`: Enables full LLMNR responder and resolver support.
- `"false"`: Disables both.
- `"resolve"`: Only resolution support is enabled, but responding is disabled.

- services.restic.backups: Periodic backups to create with Restic.

- services.restic.server.appendOnly: Enable append only mode.
This mode allows creation of new backups but prevents deletion and modification of existing backups.
This can be useful when backing up systems that have a potential of being hacked.

- services.restic.server.dataDir: The directory for storing the restic repository.
- services.restic.server.enable: Whether to enable Restic REST Server.
- services.restic.server.extraFlags: Extra commandline options to pass to Restic REST server.

- services.restic.server.htpasswd-file: The path to the servers .htpasswd file. Defaults to `${dataDir}/.htpasswd`.
- services.restic.server.listenAddress: Listen on a specific IP address and port or unix socket.
- services.restic.server.package: The restic-rest-server package to use.
- services.restic.server.privateRepos: Enable private repos.
Grants access only when a subdirectory with the same name as the user is specified in the repository URL.

- services.restic.server.prometheus: Enable Prometheus metrics at /metrics.
- services.restya-board
- services.rethinkdb.dbpath: Location where RethinkDB stores its data, 1 data directory per instance.
- services.rethinkdb.enable: Whether to enable RethinkDB server.
- services.rethinkdb.group: Group which rethinkdb user belongs to.
- services.rethinkdb.pidpath: Location where each instance's pid file is located.
- services.rethinkdb.user: User account under which RethinkDB runs.
- services.riak
- services.riemann.config: Contents of the Riemann configuration file. For more complicated
config you should use configFile.

- services.riemann.configFile: A Riemann config file. Any files in the same directory as this file
will be added to the classpath by Riemann.

- services.riemann.configFiles: Extra files containing Riemann configuration. These files will be
loaded at runtime by Riemann (with Clojure's
`load-file` function) at the end of the
configuration if you use the config option, this is ignored if you
use configFile.

- services.riemann.enable: Whether to enable Riemann network monitoring daemon.
- services.riemann.extraClasspathEntries: Extra entries added to the Java classpath when running Riemann.

- services.riemann.extraJavaOpts: Extra Java options used when launching Riemann.

- services.riemann-dash.config: Contents added to the end of the riemann-dash configuration file.

- services.riemann-dash.dataDir: Location of the riemann-base dir. The dashboard configuration file is
is stored to this directory. The directory is created automatically on
service start, and owner is set to the riemanndash user.

- services.riemann-dash.enable: Enable the riemann-dash dashboard daemon.

- services.riemann-tools.enableHealth: Enable the riemann-health daemon.

- services.riemann-tools.extraArgs: A list of commandline-switches forwarded to a riemann-tool.
See for example `riemann-health --help` for available options.

- services.riemann-tools.riemannHost: Address of the host riemann node. Defaults to localhost.

- services.rimgo.enable: Whether to enable rimgo.
- services.rimgo.package: The rimgo package to use.
- services.rimgo.settings: Settings for rimgo, see [the official documentation](https://rimgo.codeberg.page/docs/usage/configuration/) for supported options.

- services.ringboard.wayland.enable: Whether to enable Wayland support for Ringboard.
- services.ringboard.wayland.package: The ringboard-wayland package to use.
- services.ringboard.x11.enable: Whether to enable X11 support for Ringboard.
- services.ringboard.x11.package: The ringboard package to use.
- services.rippleDataApi
- services.rippled
- services.rke2.agentToken: Shared secret used to join agents to the cluster, but not servers.

> **WARNING**: This option will expose store your token unencrypted world-readable in the nix store.
If this is undesired use the `agentTokenFile` option instead.

- services.rke2.agentTokenFile: File path containing rke2 agent token to use when connecting to the server.
- services.rke2.cisHardening: Enable CIS Hardening for RKE2.

It will set the configurations and controls required to address Kubernetes benchmark controls
from the Center for Internet Security (CIS).

Learn more about [CIS Hardening for RKE2](https://docs.rke2.io/security/hardening_guide).

> **NOTICE**:
>
> You may need restart the `systemd-sysctl` muaually by:
>
> ```shell
> sudo systemctl restart systemd-sysctl
> ```

- services.rke2.cni: CNI Plugins to deploy, one of `none`, `calico`, `canal`, `cilium` or `flannel`.

All CNI plugins get installed via a helm chart after the main components are up and running
and can be [customized by modifying the helm chart options](https://docs.rke2.io/helm).

[Learn more about RKE2 and CNI plugins](https://docs.rke2.io/networking/basic_network_options)

> **WARNING**: Flannel support in RKE2 is currently experimental.

- services.rke2.configPath: Load configuration from FILE.
- services.rke2.dataDir: The folder to hold state in.
- services.rke2.debug: Turn on debug logs.
- services.rke2.disable: Do not deploy packaged components and delete any deployed components.
- services.rke2.enable: Whether to enable rke2.
- services.rke2.environmentVars: Environment variables for configuring the rke2 service/agent.

Here you can find all the available environment variables:

- [Server Configuration Reference](https://docs.rke2.io/reference/server_config)
- [Agent Configuration Reference](https://docs.rke2.io/reference/linux_agent_config)

Besides the options above, you can also active environment variables by edit/create those files:

- `/etc/default/rke2`
- `/etc/sysconfig/rke2`
- `/usr/local/lib/systemd/system/rke2.env`

- services.rke2.extraFlags: Extra flags to pass to the rke2 service/agent.

Here you can find all the available flags:

- [Server Configuration Reference](https://docs.rke2.io/reference/server_config)
- [Agent Configuration Reference](https://docs.rke2.io/reference/linux_agent_config)

- services.rke2.nodeIP: IPv4/IPv6 addresses to advertise for node.
- services.rke2.nodeLabel: Registering and starting kubelet with set of labels.
- services.rke2.nodeName: Node name.
- services.rke2.nodeTaint: Registering kubelet with set of taints.
- services.rke2.package: The rke2 package to use.
- services.rke2.role: Whether rke2 should run as a server or agent.

If it's a server:

- By default it also runs workloads as an agent.
- any optionals is allowed.

If it's an agent:

- `serverAddr` is required.
- `token` or `tokenFile` is required.
- `agentToken` or `agentTokenFile` or `disable` or `cni` are not allowed.

- services.rke2.selinux: Enable SELinux in containerd.
- services.rke2.serverAddr: The rke2 server to connect to, used to join a cluster.
- services.rke2.token: Shared secret used to join a server or agent to a cluster.

> WARNING: This option will expose store your token unencrypted world-readable in the nix store.
If this is undesired use the `tokenFile` option instead.

- services.rke2.tokenFile: File path containing rke2 token to use when connecting to the server.
- services.rkvm.client.enable: Whether to enable the rkvm client daemon (input receiver).
- services.rkvm.client.settings: Structured client daemon configuration
- services.rkvm.enable: Whether to enable rkvm, a Virtual KVM switch for Linux machines.

- services.rkvm.package: The rkvm package to use.
- services.rkvm.server.enable: Whether to enable the rkvm server daemon (input transmitter).
- services.rkvm.server.settings: Structured server daemon configuration
- services.rmfakecloud.enable: Whether to enable rmfakecloud remarkable self-hosted cloud.
- services.rmfakecloud.environmentFile: Path to an environment file loaded for the rmfakecloud service.

This can be used to securely store tokens and secrets outside of the
world-readable Nix store. Since this file is read by systemd, it may
have permission 0400 and be owned by root.

- services.rmfakecloud.extraSettings: Extra settings in the form of a set of key-value pairs.
For tokens and secrets, use `environmentFile` instead.

Available settings are listed on
https://ddvk.github.io/rmfakecloud/install/configuration/.

- services.rmfakecloud.logLevel: Logging level.

- services.rmfakecloud.package: The rmfakecloud package to use.
- services.rmfakecloud.port: Listening port number.

- services.rmfakecloud.storageUrl: URL used by the tablet to access the rmfakecloud service.

- services.rmilter
- services.robustirc-bridge.enable: Whether to enable RobustIRC bridge.
- services.robustirc-bridge.extraFlags: Extra flags passed to the {command}`robustirc-bridge` command. See [RobustIRC Documentation](https://robustirc.net/docs/adminguide.html#_bridge) or {manpage}`robustirc-bridge(1)` for details.
- services.roon-bridge.enable: Whether to enable Roon Bridge.
- services.roon-bridge.group: Group to run the Roon Bridge as.

- services.roon-bridge.openFirewall: Open ports in the firewall for the bridge.

- services.roon-bridge.user: User to run the Roon bridge as.

- services.roon-server.enable: Whether to enable Roon Server.
- services.roon-server.group: Group to run the Roon Server as.

- services.roon-server.openFirewall: Open ports in the firewall for the server.

- services.roon-server.package: The roon-server package to use.
- services.roon-server.user: User to run the Roon Server as.

- services.rosenpass.defaultDevice: Name of the network interface to use for all peers by default.
- services.rosenpass.enable: Whether to enable Rosenpass.
- services.rosenpass.package: The rosenpass package to use.
- services.rosenpass.settings: Configuration for Rosenpass, see <https://rosenpass.eu/> for further information.
- services.roundcube.configureNginx: Configure nginx as a reverse proxy for roundcube.
- services.roundcube.database.dbname: Name of the postgresql database
- services.roundcube.database.host: Host of the postgresql server. If this is not set to
`localhost`, you have to create the
postgresql user and database yourself, with appropriate
permissions.

- services.roundcube.database.password: Password for the postgresql connection. Do not use: the password will be stored world readable in the store; use `passwordFile` instead.
- services.roundcube.database.passwordFile: Password file for the postgresql connection.
Must be formatted according to PostgreSQL .pgpass standard (see <https://www.postgresql.org/docs/current/libpq-pgpass.html>)
but only one line, no comments and readable by user `nginx`.
Ignored if `database.host` is set to `localhost`, as peer authentication will be used.

- services.roundcube.database.username: Username for the postgresql connection.
If `database.host` is set to `localhost`, a unix user and group of the same name will be created as well.

- services.roundcube.dicts: List of aspell dictionaries for spell checking. If empty, spell checking is disabled.

- services.roundcube.enable: Whether to enable roundcube.

Also enables nginx virtual host management.
Further nginx configuration can be done by adapting `services.nginx.virtualHosts.<name>`.
See [](#opt-services.nginx.virtualHosts) for further information.

- services.roundcube.extraConfig: Extra configuration for roundcube webmail instance
- services.roundcube.hostName: Hostname to use for the nginx vhost
- services.roundcube.maxAttachmentSize: The maximum attachment size in MB.
[upstream issue comment]: https://github.com/roundcube/roundcubemail/issues/7979#issuecomment-808879209
::: {.note}
Since there is some overhead in base64 encoding applied to attachments, + 37% will be added
to the value set in this option in order to offset the overhead. For example, setting
`maxAttachmentSize` to `100` would result in `137M` being the real value in the configuration.
See [upstream issue comment] for more details on the motivations behind this.
:::

- services.roundcube.package: The roundcube package to use.
- services.roundcube.plugins: List of roundcube plugins to enable. Currently, only those directly shipped with Roundcube are supported.

- services.routedns.configFile: Path to RouteDNS TOML configuration file.
- services.routedns.enable: Whether to enable RouteDNS - DNS stub resolver, proxy and router.
- services.routedns.package: The routedns package to use.
- services.routedns.settings: Configuration for RouteDNS, see <https://github.com/folbricht/routedns/blob/master/doc/configuration.md>
for more information.

- services.routinator.enable: Whether to enable Routinator 3000.
- services.routinator.extraArgs: Extra arguments passed to routinator, see <https://routinator.docs.nlnetlabs.nl/en/stable/manual-page.html#options> for options.";

- services.routinator.extraServerArgs: Extra arguments passed to the server subcommand, see <https://routinator.docs.nlnetlabs.nl/en/stable/manual-page.html#subcmd-server> for options.";

- services.routinator.package: The routinator package to use.
- services.routinator.settings: Configuration for Routinator 3000, see <https://routinator.docs.nlnetlabs.nl/en/stable/manual-page.html#configuration-file> for options.

- services.rpcbind.enable: Whether to enable `rpcbind`, an ONC RPC directory service
notably used by NFS and NIS, and which can be queried
using the {manpage}`rpcinfo(1)` command. `rpcbind` is a replacement for
`portmap`.

- services.rshim.backend: Specify the backend to attach. If not specified, the driver will scan
all rshim backends unless the `device` option is given with a device
name specified.

- services.rshim.config: Structural setting for the rshim configuration file
(`/etc/rshim.conf`). It can be used to specify the static mapping
between rshim devices and rshim names. It can also be used to ignore
some rshim devices.

- services.rshim.device: Specify the device name to attach. The backend driver can be deduced
from the device name, thus the `backend` option is not needed.

- services.rshim.enable: Whether to enable user-space rshim driver for the BlueField SoC.
- services.rshim.index: Specify the index to create device path `/dev/rshim<index>`. It's also
used to create network interface name `tmfifo_net<index>`. This option
is needed when multiple rshim instances are running.

- services.rshim.log-level: Specify the log level (0:none, 1:error, 2:warning, 3:notice, 4:debug).

- services.rshim.package: The rshim-user-space package to use.
- services.rsnapshot.cronIntervals: Periodicity at which intervals should be run by cron.
Note that the intervals also have to exist in configuration
as retain options.

- services.rsnapshot.enable: Whether to enable rsnapshot backups.
- services.rsnapshot.enableManualRsnapshot: Whether to enable manual usage of the rsnapshot command with this module.
- services.rsnapshot.extraConfig: rsnapshot configuration option in addition to the defaults from
rsnapshot and this module.

Note that tabs are required to separate option arguments, and
directory names require trailing slashes.

The "extra" in the option name might be a little misleading right
now, as it is required to get a functional configuration.

- services.rspamd.bindSocket: Alias of {option}`services.rspamd.workers.normal.bindSockets`.
- services.rspamd.bindUISocket: Alias of {option}`services.rspamd.workers.controller.bindSockets`.
- services.rspamd.debug: Whether to run the rspamd daemon in debug mode.
- services.rspamd.enable: Whether to enable rspamd, the Rapid spam filtering system.
- services.rspamd.extraConfig: Extra configuration to add at the end of the rspamd configuration
file.

- services.rspamd.group: Group to use when no root privileges are required.

- services.rspamd.localLuaRules: Path of file to link to {file}`/etc/rspamd/rspamd.local.lua` for local
rules written in Lua

- services.rspamd.locals: Local configuration files, written into {file}`/etc/rspamd/local.d/{name}`.

- services.rspamd.overrides: Overridden configuration files, written into {file}`/etc/rspamd/override.d/{name}`.

- services.rspamd.package: The rspamd package to use.
- services.rspamd.postfix.config: Addon to postfix configuration

- services.rspamd.postfix.enable: Add rspamd milter to postfix main.conf
- services.rspamd.socketActivation
- services.rspamd.user: User to use when no root privileges are required.

- services.rspamd.workers: Attribute set of workers to start.

- services.rspamd-trainer.enable: Whether to enable Spam/ham trainer for rspamd.
- services.rspamd-trainer.secrets: A list of files containing the various secrets. Should be in the
format expected by systemd's `EnvironmentFile` directory. For the
IMAP account password use `PASSWORD = mypassword`.

- services.rspamd-trainer.settings: IMAP authentication configuration for rspamd-trainer. For supplying
the IMAP password, use the `secrets` option.

- services.rss-bridge.config: Attribute set of arbitrary config options.
Please consult the documentation at the [wiki](https://rss-bridge.github.io/rss-bridge/For_Hosts/Custom_Configuration.html)
and [sample config](https://github.com/RSS-Bridge/rss-bridge/blob/master/config.default.ini.php) to see a list of available options.

- services.rss-bridge.dataDir: Location in which cache directory will be created.
You can put `config.ini.php` in here.

- services.rss-bridge.enable: Whether to enable rss-bridge.
- services.rss-bridge.group: The group under which the web application runs.

- services.rss-bridge.package: The rss-bridge package to use.
- services.rss-bridge.pool: Name of phpfpm pool that is used to run web-application.
If `null` specified none will be created, otherwise automatically created with default values.

- services.rss-bridge.user: The user account under which both the service and the web application run.

- services.rss-bridge.virtualHost: Name of the nginx or caddy virtualhost to use and setup. If null, do not setup any virtualhost.

- services.rss-bridge.webserver: Type of virtualhost to use and setup. If null, do not setup any virtualhost.

- services.rss-bridge.whitelist: Alias of {option}`services.rss-bridge.config.system.enabled_bridges`.
- services.rss2email.config: The configuration to give rss2email.

Default will use system-wide `sendmail` to send the
email. This is rss2email's default when running
`r2e new`.

This set contains key-value associations that will be set in the
`[DEFAULT]` block along with the
`to` parameter.

See `man r2e` for more information on which
parameters are accepted.

- services.rss2email.enable: Whether to enable rss2email.
- services.rss2email.feeds: The feeds to watch.
- services.rss2email.interval: How often to check the feeds, in systemd interval format
- services.rss2email.to: Mail address to which to send emails
- services.rstudio-server.enable: Whether to enable RStudio server.
- services.rstudio-server.listenAddr: Address to listen on (www-address in rserver.conf).

- services.rstudio-server.package: The rstudio-server package to use.
- services.rstudio-server.rserverExtraConfig: Extra contents for rserver.conf.

- services.rstudio-server.rsessionExtraConfig: Extra contents for resssion.conf.

- services.rstudio-server.serverWorkingDir: Default working directory for server (server-working-dir in rserver.conf).

- services.rsyncd.address
- services.rsyncd.enable: Whether to enable the rsync daemon.
- services.rsyncd.extraConfig
- services.rsyncd.group
- services.rsyncd.motd
- services.rsyncd.port: TCP port the daemon will listen on.
- services.rsyncd.settings: Configuration for rsyncd. See
{manpage}`rsyncd.conf(5)`.

- services.rsyncd.socketActivated: If enabled Rsync will be socket-activated rather than run persistently.
- services.rsyncd.user
- services.rsyslogd.defaultConfig: The default {file}`syslog.conf` file configures a
fairly standard setup of log files, which can be extended by
means of {var}`extraConfig`.

- services.rsyslogd.enable: Whether to enable syslogd.  Note that systemd also logs
syslog messages, so you normally don't need to run syslogd.

- services.rsyslogd.extraConfig: Additional text appended to {file}`syslog.conf`,
i.e. the contents of {var}`defaultConfig`.

- services.rsyslogd.extraParams: Additional parameters passed to {command}`rsyslogd`.

- services.rtorrent.configText: The content of {file}`rtorrent.rc`. The [modernized configuration template](https://rtorrent-docs.readthedocs.io/en/latest/cookbook.html#modernized-configuration-template) with the values specified in this module will be prepended using mkBefore. You can use mkForce to overwrite the config completely.

- services.rtorrent.dataDir: The directory where rtorrent stores its data files.

- services.rtorrent.dataPermissions: Unix Permissions in octal on the rtorrent directory.

- services.rtorrent.downloadDir: Where to put downloaded files.

- services.rtorrent.enable: Whether to enable rtorrent.
- services.rtorrent.group: Group under which rtorrent runs.

- services.rtorrent.openFirewall: Whether to open the firewall for the port in {option}`services.rtorrent.port`.

- services.rtorrent.package: The rtorrent package to use.
- services.rtorrent.port: The rtorrent port.

- services.rtorrent.rpcSocket: RPC socket path.

- services.rtorrent.user: User account under which rtorrent runs.

- services.rtsp-simple-server
- services.rustdesk-server.enable: Whether to enable RustDesk, a remote access and remote control software, allowing maintenance of computers and other devices.
- services.rustdesk-server.extraRelayArgs: Alias of {option}`services.rustdesk-server.relay.extraArgs`.
- services.rustdesk-server.extraSignalArgs: Alias of {option}`services.rustdesk-server.signal.extraArgs`.
- services.rustdesk-server.openFirewall: Open the connection ports.
TCP (21115, 21116, 21117, 21118, 21119)
UDP (21116)

- services.rustdesk-server.package: The rustdesk-server package to use.
- services.rustdesk-server.relay.enable: Whether to enable the RustDesk relay server.

- services.rustdesk-server.relay.extraArgs: A list of extra command line arguments to pass to the `hbbr` process.

- services.rustdesk-server.relayIP
- services.rustdesk-server.signal.enable: Whether to enable the RustDesk signal server.

- services.rustdesk-server.signal.extraArgs: A list of extra command line arguments to pass to the `hbbs` process.

- services.rustdesk-server.signal.relayHosts: The relay server IP addresses or DNS names of the RustDesk relay.

- services.rustus.cors: list of origins allowed to upload

- services.rustus.disable_health_access_logs: disable access log for /health endpoint

- services.rustus.enable: Whether to enable TUS protocol implementation in Rust.
- services.rustus.host: The host that rustus will connect to.

- services.rustus.info_storage: Info storages are used to store information about file uploads. These storages must be persistent, because every time chunk is uploaded rustus updates information about upload. And when someone wants to download file, information about it requested from storage to get actual path of an upload.

- services.rustus.log_level: Desired log level

- services.rustus.max_body_size: Maximum body size in bytes

- services.rustus.port: The port that rustus will connect to.

- services.rustus.remove_parts: remove parts files after successful concatenation

- services.rustus.storage: Storages are used to actually store your files. You can configure where you want to store files.

- services.rustus.tus_extensions: Since TUS protocol offers extensibility you can turn off some protocol extensions.

- services.rustus.url: url path for uploads

- services.rutorrent.dataDir: Storage path of ruTorrent.
- services.rutorrent.enable: Whether to enable ruTorrent.
- services.rutorrent.group: Group which runs the ruTorrent service.

- services.rutorrent.hostName: FQDN for the ruTorrent instance.
- services.rutorrent.nginx.enable: Whether to enable nginx virtual host management.
Further nginx configuration can be done by adapting <literal>services.nginx.virtualHosts.&lt;name&gt;</literal>.
See <xref linkend="opt-services.nginx.virtualHosts"/> for further information.

- services.rutorrent.nginx.exposeInsecureRPC2mount: If you do not enable one of the <literal>rpc</literal> or <literal>httprpc</literal> plugins you need to expose an RPC mount through scgi using this option.
Warning: This allow to run arbitrary commands, as the rtorrent user, so make sure to use authentification. The simplest way would be to use the <literal>services.nginx.virtualHosts.&lt;name&gt;.basicAuth</literal> option.

- services.rutorrent.plugins: List of plugins to enable. See the list of <link xlink:href="https://github.com/Novik/ruTorrent/wiki/Plugins#currently-there-are-the-following-plugins">available plugins</link>. Note: the <literal>unpack</literal> plugin needs the nonfree <literal>unrar</literal> package.
You need to either enable one of the <literal>rpc</literal> or <literal>httprpc</literal> plugin or enable the <xref linkend="opt-services.rutorrent.nginx.exposeInsecureRPC2mount"/> option.

- services.rutorrent.poolSettings: Options for ruTorrent's PHP pool. See the documentation on <literal>php-fpm.conf</literal> for details on configuration directives.

- services.rutorrent.rpcSocket: Path to rtorrent rpc socket.

- services.rutorrent.user: User which runs the ruTorrent service.

- services.sabnzbd.configFile: Path to config file.
- services.sabnzbd.enable: Whether to enable the sabnzbd server.
- services.sabnzbd.group: Group to run the service as
- services.sabnzbd.openFirewall: Open ports in the firewall for the sabnzbd web interface

- services.sabnzbd.package: The sabnzbd package to use.
- services.sabnzbd.user: User to run the service as
- services.safeeyes.enable: Whether to enable the safeeyes OSGi service.
- services.salt.master.configuration: Salt master configuration as Nix attribute set.
- services.salt.master.enable: Whether to enable Salt configuration management system master service.
- services.salt.minion.configuration: Salt minion configuration as Nix attribute set.
See <https://docs.saltstack.com/en/latest/ref/configuration/minion.html>
for details.

- services.salt.minion.enable: Whether to enable Salt configuration management system minion service.
- services.samba.configText
- services.samba.defaultShare
- services.samba.enable: Whether to enable Samba, the SMB/CIFS protocol.
- services.samba.enableNmbd: Alias of {option}`services.samba.nmbd.enable`.
- services.samba.enableWinbindd: Alias of {option}`services.samba.winbindd.enable`.
- services.samba.extraConfig
- services.samba.invalidUsers: Alias of {option}`services.samba.settings.global."invalid users"`.
- services.samba.nmbd.enable: Whether to enable Samba's nmbd, which replies to NetBIOS over IP name
service requests. It also participates in the browsing protocols
which make up the Windows "Network Neighborhood" view.

- services.samba.nmbd.extraArgs: Extra arguments to pass to the nmbd service.
- services.samba.nsswins: Whether to enable WINS NSS (Name Service Switch) plug-in.

Enabling it allows applications to resolve WINS/NetBIOS names (a.k.a.
Windows machine names) by transparently querying the winbindd daemon
.
- services.samba.openFirewall: Whether to enable opening the default ports in the firewall for Samba.
- services.samba.package: The samba package to use.
- services.samba.securityType: Alias of {option}`services.samba.settings.global.security`.
- services.samba.settings: Configuration file for the Samba suite in ini format.
This file is located in /etc/samba/smb.conf

Refer to <https://www.samba.org/samba/docs/current/man-html/smb.conf.5.html>
for all available options.

- services.samba.shares: Alias of {option}`services.samba.settings`.
- services.samba.smbd.enable: Whether to enable Samba's smbd daemon.
- services.samba.smbd.extraArgs: Extra arguments to pass to the smbd service.
- services.samba.syncPasswordsByPam
- services.samba.usershares.enable: Whether to enable user-configurable Samba shares.
- services.samba.usershares.group: Name of the group members of which will be allowed to create usershares.

The group will be created automatically.

- services.samba.winbindd.enable: Whether to enable Samba's winbindd, which provides a number of services
to the Name Service Switch capability found in most modern C libraries,
to arbitrary applications via PAM and ntlm_auth and to Samba itself.

- services.samba.winbindd.extraArgs: Extra arguments to pass to the winbindd service.
- services.samba-wsdd.discovery: Enable discovery operation mode.
- services.samba-wsdd.domain: Set domain name (disables workgroup).
- services.samba-wsdd.enable: Whether to enable Web Services Dynamic Discovery host daemon. This enables (Samba) hosts, like your local NAS device,
to be found by Web Service Discovery Clients like Windows
.
- services.samba-wsdd.extraOptions: Additional wsdd options.
- services.samba-wsdd.hoplimit: Hop limit for multicast packets (default = 1).
- services.samba-wsdd.hostname: Override (NetBIOS) hostname to be used (default hostname).
- services.samba-wsdd.interface: Interface or address to use.
- services.samba-wsdd.listen: Listen on path or localhost port in discovery mode.
- services.samba-wsdd.openFirewall: Whether to open the required firewall ports in the firewall.

- services.samba-wsdd.workgroup: Set workgroup name (default WORKGROUP).
- services.saned.enable: Enable saned network daemon for remote connection to scanners.

saned would be run from `scanner` user; to allow
access to hardware that doesn't have `scanner` group
you should add needed groups to this user.

- services.saned.extraConfig: Extra saned configuration lines.

- services.sanoid.datasets: Datasets to snapshot.
- services.sanoid.enable: Whether to enable Sanoid ZFS snapshotting service.
- services.sanoid.extraArgs: Extra arguments to pass to sanoid. See
<https://github.com/jimsalterjrs/sanoid/#sanoid-command-line-options>
for allowed options.

- services.sanoid.interval: Run sanoid at this interval. The default is to run hourly.

The format is described in
{manpage}`systemd.time(7)`.

- services.sanoid.package: The sanoid package to use.
- services.sanoid.settings: Free-form settings written directly to the config file. See
<https://github.com/jimsalterjrs/sanoid/blob/master/sanoid.defaults.conf>
for allowed values.

- services.sanoid.templates: Templates for datasets.
- services.saslauthd.config: Configuration to use for Cyrus SASL authentication daemon.
- services.saslauthd.enable: Whether to enable saslauthd, the Cyrus SASL authentication daemon.
- services.saslauthd.mechanism: Auth mechanism to use
- services.saslauthd.package: The bin package to use.
- services.saunafs.chunkserver.enable: Whether to enable Saunafs chunkserver daemon.
- services.saunafs.chunkserver.hdds: Mount points to be used by chunkserver for storage (see {manpage}`sfshdd.cfg(5)`).

Note, that these mount points must writeable by the user defined by the saunafs user.

- services.saunafs.chunkserver.openFirewall: Whether to automatically open the necessary ports in the firewall.
- services.saunafs.chunkserver.settings: Contents of chunkserver config file (see {manpage}`sfschunkserver.cfg(5)`).
- services.saunafs.client.enable: Whether to enable Saunafs client.
- services.saunafs.master.enable: Enable Saunafs master daemon.

You need to run `sfsmaster-init` on a freshly installed master server to
initialize the `DATA_PATH` directory.

- services.saunafs.master.exports: Paths to exports file (see {manpage}`sfsexports.cfg(5)`).
- services.saunafs.master.openFirewall: Whether to automatically open the necessary ports in the firewall.
- services.saunafs.master.settings: Contents of config file ({manpage}`sfsmaster.cfg(5)`).
- services.saunafs.masterHost: IP or hostname name of master host.
- services.saunafs.metalogger.enable: Whether to enable Saunafs metalogger daemon.
- services.saunafs.metalogger.settings: Contents of metalogger config file (see {manpage}`sfsmetalogger.cfg(5)`).
- services.saunafs.sfsUser: Run daemons as user.
- services.scanservjs.enable: Whether to enable scanservjs.
- services.scanservjs.extraActions: Actions to add to config.local.js's `actions`.
- services.scanservjs.extraConfig: Extra code to add to config.local.js's `afterConfig`.

- services.scanservjs.extraDevicesConfig: Extra code to add to config.local.js's `afterDevices`.

- services.scanservjs.runAfterScan: Extra code to add to config.local.js's `afterScan`.

- services.scanservjs.settings: Config to set in config.local.js's `afterConfig`.

- services.scanservjs.stateDir: State directory for scanservjs.

- services.schleuder.enable: Whether to enable Schleuder secure remailer.
- services.schleuder.enablePostfix: Whether to enable automatic postfix integration.
- services.schleuder.extraSettingsFile: YAML file to merge into the schleuder config at runtime. This can be used for secrets such as API keys.
- services.schleuder.listDefaults: Default settings for lists (list-defaults.yml).

Check the [example configuration](https://0xacab.org/schleuder/schleuder/-/blob/master/etc/list-defaults.yml) for possible values.

- services.schleuder.lists: List of list addresses that should be handled by Schleuder.

Note that this is only handled by the postfix integration, and
the setup of the lists, their members and their keys has to be
performed separately via schleuder's API, using a tool such as
schleuder-cli.

- services.schleuder.settings: Settings for schleuder.yml.

Check the [example configuration](https://0xacab.org/schleuder/schleuder/blob/master/etc/schleuder.yml) for possible values.

- services.scion.bypassBootstrapWarning: bypass Nix warning about SCION PKI bootstrapping

- services.scion.enable: Whether to enable all of the scion components and services.
- services.scion.package: The scion package to use.
- services.scion.scion-control.enable: Whether to enable the scion-control service.
- services.scion.scion-control.settings: scion-control configuration. Refer to
<https://docs.scion.org/en/latest/manuals/common.html>
for details on supported values.

- services.scion.scion-daemon.enable: Whether to enable the scion-daemon service.
- services.scion.scion-daemon.settings: scion-daemon configuration. Refer to
<https://docs.scion.org/en/latest/manuals/common.html>
for details on supported values.

- services.scion.scion-dispatcher.enable: Whether to enable the scion-dispatcher service.
- services.scion.scion-dispatcher.settings: scion-dispatcher configuration. Refer to
<https://docs.scion.org/en/latest/manuals/common.html>
for details on supported values.

- services.scion.scion-ip-gateway.config: scion-ip-gateway daemon configuration

- services.scion.scion-ip-gateway.enable: Whether to enable the scion-ip-gateway service.
- services.scion.scion-ip-gateway.trafficConfig: scion-ip-gateway traffic configuration

- services.scion.scion-router.enable: Whether to enable the scion-router service.
- services.scion.scion-router.settings: scion-router configuration. Refer to
<https://docs.scion.org/en/latest/manuals/common.html>
for details on supported values.

- services.scion.stateless: Setting this value to false (stateful) can lead to improved caching and
performance.

This option decides whether to persist the SCION path sqlite databases
on disk or not. Persisting this data can lead to database corruption in
extreme cases such as power outage, meaning SCION fails to work on the
next boot. This is being investigated.

If true, /run/scion-* is used for data
If false, use /var/lib/scion-* is used for data

- services.scollector.bosunHost: Host and port of the bosun server that will store the collected
data.

- services.scollector.collectors: An attribute set mapping the frequency of collection to a list of
binaries that should be executed at that frequency. You can use "0"
to run a binary forever.

- services.scollector.enable: Whether to run scollector.

- services.scollector.extraConfig: Extra scollector configuration added to the end of scollector.toml

- services.scollector.extraOpts: Extra scollector command line options

- services.scollector.group: Group account under which scollector runs.

- services.scollector.package: The scollector package to use.
- services.scollector.user: User account under which scollector runs.

- services.screego.enable: Whether to enable screego screen-sharing server for developers.
- services.screego.environmentFile: Environment file (see {manpage}`systemd.exec(5)` "EnvironmentFile="
section for the syntax) passed to the service. This option can be
used to safely include secrets in the configuration.

- services.screego.openFirewall: Open the firewall port(s).

- services.screego.settings: Screego settings passed as Nix attribute set, they will be merged with
the defaults. Settings will be passed as environment variables.

See <https://screego.net/#/config> for possible values

- services.scrutiny.collector.enable: Whether to enable the Scrutiny metrics collector.
- services.scrutiny.collector.package: The scrutiny-collector package to use.
- services.scrutiny.collector.schedule: How often to run the collector in systemd calendar format.

- services.scrutiny.collector.settings: Collector settings to be rendered into the collector configuration file.

See <https://github.com/AnalogJ/scrutiny/blob/master/example.collector.yaml>.

Options containing secret data should be set to an attribute set
containing the attribute `_secret`. This attribute should be a string
or structured JSON with `quote = false;`, pointing to a file that
contains the value the option should be set to.

- services.scrutiny.enable: Whether to enable Scrutiny, a web application for drive monitoring.
- services.scrutiny.influxdb.enable: Enables InfluxDB on the host system using the `services.influxdb2` NixOS module
with default options.

If you already have InfluxDB configured, or wish to connect to an external InfluxDB
instance, disable this option.

- services.scrutiny.openFirewall: Whether to enable opening the default ports in the firewall for Scrutiny.
- services.scrutiny.package: The scrutiny package to use.
- services.scrutiny.settings: Scrutiny settings to be rendered into the configuration file.

See <https://github.com/AnalogJ/scrutiny/blob/master/example.scrutiny.yaml>.

Options containing secret data should be set to an attribute set
containing the attribute `_secret`. This attribute should be a string
or structured JSON with `quote = false;`, pointing to a file that
contains the value the option should be set to.

- services.scx.enable: Whether to enable SCX service, a daemon to run schedulers from userspace.

::: {.note}
This service requires a kernel with the Sched-ext feature.
Generally, kernel version 6.12 and later are supported.
:::

- services.scx.extraArgs: Parameters passed to the chosen scheduler at runtime.

::: {.note}
Run `chosen-scx-scheduler --help` to see the available options. Generally,
each scheduler has its own set of options, and they are incompatible with each other.
:::

- services.scx.package: `scx` package to use. `scx.full`, which includes all schedulers, is the default.
You may choose a minimal package, such as `pkgs.scx.rustscheds`.

::: {.note}
Overriding this does not change the default scheduler; you should set `services.scx.scheduler` for it.
:::

- services.scx.scheduler: Which scheduler to use. See [SCX documentation](https://github.com/sched-ext/scx/tree/main/scheds)
for details on each scheduler and guidance on selecting the most suitable one.

- services.sdrplayApi.enable: Whether to enable the SDRplay API service and udev rules.

::: {.note}
To enable integration with SoapySDR and GUI applications like gqrx create an overlay containing
`soapysdr-with-plugins = super.soapysdr.override { extraPackages = [ super.soapysdrplay ]; };`
:::

- services.searx.configFile: Alias of {option}`services.searx.settingsFile`.
- services.searx.configureNginx: Whether to configure nginx as an frontend to uwsgi.

- services.searx.configureUwsgi: Whether to run searx in uWSGI as a "vassal", instead of using its
built-in HTTP server. This is the recommended mode for public or
large instances, but is unnecessary for LAN or local-only use.

::: {.warning}
The built-in HTTP server logs all queries by default.
:::

- services.searx.domain: The domain under which searxng will be served.
Right now this is only used with the configureNginx option.

- services.searx.enable: Whether to enable Searx, the meta search engine.
- services.searx.environmentFile: Environment file (see {manpage}`systemd.exec(5)` "EnvironmentFile=" section for the syntax) to define variables for Searx.
This option can be used to safely include secret keys into the Searx configuration.

- services.searx.faviconsSettings: Favicons settings for SearXNG.

::: {.note}
For available settings, see the SearXNG
[schema file](https://github.com/searxng/searxng/blob/master/searx/favicons/favicons.toml).
:::

- services.searx.limiterSettings: Limiter settings for SearXNG.

::: {.note}
For available settings, see the SearXNG [schema file](https://github.com/searxng/searxng/blob/master/searx/limiter.toml).
:::

- services.searx.package: The searxng package to use.
- services.searx.redisCreateLocally: Configure a local Redis server for SearXNG.
This is required if you want to enable the rate limiter and bot protection of SearXNG.

- services.searx.runInUwsgi: Alias of {option}`services.searx.configureUwsgi`.
- services.searx.settings: Searx settings.
These will be merged with (taking precedence over) the default configuration.
It's also possible to refer to environment variables (defined in [](#opt-services.searx.environmentFile)) using the syntax `$VARIABLE_NAME`.

::: {.note}
For available settings, see the Searx [docs](https://docs.searxng.org/admin/settings/index.html).
:::

- services.searx.settingsFile: The path of the Searx server settings.yml file.
If no file is specified, a default file is used (default config file has debug mode enabled).

::: {.note}
Setting this options overrides [](#opt-services.searx.settings).
:::

::: {.warning}
This file, along with any secret key it contains, will be copied into the world-readable Nix store.
:::

- services.searx.uwsgiConfig: Additional configuration of the uWSGI vassal running searx. It
should notably specify on which interfaces and ports the vassal
should listen.

- services.seatd.enable: Whether to enable seatd.
- services.seatd.group: Group to own the seatd socket
- services.seatd.logLevel: Logging verbosity
- services.seatd.user: User to own the seatd socket
- services.seeks
- services.self-deploy.branch: Branch to track

Technically speaking any ref can be specified here, as this is
passed directly to a `git fetch`, but for the use-case of
continuous deployment you're likely to want to specify a branch.

- services.self-deploy.enable: Whether to enable self-deploy.
- services.self-deploy.nixArgs: Arguments to `nix-build` passed as `--argstr` or `--arg` depending on
the type.

- services.self-deploy.nixAttribute: Attribute of `nixFile` that builds the current system.

- services.self-deploy.nixFile: Path to nix file in repository. Leading '/' refers to root of
git repository.

- services.self-deploy.repository: The repository to fetch from. Must be properly formatted for git.

If this value is set to a path (must begin with `/`) then it's
assumed that the repository is local and the resulting service
won't wait for the network to be up.

If the repository will be fetched over SSH, you must add an
entry to `programs.ssh.knownHosts` for the SSH host for the fetch
to be successful.

- services.self-deploy.sshKeyFile: Path to SSH private key used to fetch private repositories over
SSH.

- services.self-deploy.startAt: The schedule on which to run the `self-deploy` service. Format
specified by `systemd.time 7`.

This value can also be a list of `systemd.time 7` formatted
strings, in which case the service will be started on multiple
schedules.

- services.self-deploy.switchCommand: The `switch-to-configuration` subcommand used.

- services.selfoss.database
- services.selfoss.enable: Whether to enable selfoss.
- services.selfoss.extraConfig: Extra configuration added to config.ini

- services.selfoss.pool: Name of existing phpfpm pool that is used to run web-application.
If not specified a pool will be created automatically with
default values.

- services.selfoss.user: User account under which both the service and the web-application run.

- services.send.baseUrl: Base URL for the Send service.
Leave it blank to automatically detect the base url.

- services.send.dataDir: Directory for uploaded files.
Due to limitations in {option}`systemd.services.send.serviceConfig.DynamicUser`, this item is read only.

- services.send.enable: Whether to enable Send, a file sharing web sevice for ffsend..
- services.send.environment: All the available config options and their defaults can be found here: <https://github.com/timvisee/send/blob/master/server/config.js>,
some descriptions can found here: <https://github.com/timvisee/send/blob/master/docs/docker.md#environment-variables>

Values under {option}`services.send.environment` will override the predefined values in the Send service.
  - Time/duration should be in seconds
  - Filesize values should be in bytes

- services.send.host: The hostname or IP address for Send to bind to.
- services.send.openFirewall: Whether to open firewall ports for send
- services.send.package: The send package to use.
- services.send.port: Port the Send service listens on.
- services.send.redis.createLocally: Whether to create a local redis automatically.
- services.send.redis.host: Redis server address.
- services.send.redis.name: Name of the redis server.
Only used if {option}`services.send.redis.createLocally` is set to true.

- services.send.redis.passwordFile: The path to the file containing the Redis password.

If {option}`services.send.redis.createLocally` is set to true,
the content of this file will be used as the password for the locally created Redis instance.

Leave it blank if no password is required.

- services.send.redis.port: Port of the redis server.
- services.serviio.dataDir: The directory where serviio stores its state, data, etc.

- services.serviio.enable: Whether to enable the Serviio Media Server.

- services.serviio.openFirewall: Open ports in the firewall for the Serviio Media Server.

- services.sftpgo.dataDir: The directory where SFTPGo stores its data files.

- services.sftpgo.enable: sftpgo
- services.sftpgo.extraArgs: Additional command line arguments to pass to the sftpgo daemon.

- services.sftpgo.extraReadWriteDirs: Extra directories where SFTPGo is allowed to write to.

- services.sftpgo.group: Group name under which SFTPGo runs.

- services.sftpgo.loadDataFile: Path to a json file containing users and folders to load (or update) on startup.
Check the [documentation](https://sftpgo.github.io/latest/config-file/)
for the `--loaddata-from` command line argument for more info.

- services.sftpgo.package: The sftpgo package to use.
- services.sftpgo.settings: The primary sftpgo configuration. See the
[configuration reference](https://sftpgo.github.io/latest/config-file/)
for possible values.

- services.sftpgo.user: User account name under which SFTPGo runs.

- services.shadowsocks.enable: Whether to run shadowsocks-libev shadowsocks server.

- services.shadowsocks.encryptionMethod: Encryption method. See <https://github.com/shadowsocks/shadowsocks-org/wiki/AEAD-Ciphers>.

- services.shadowsocks.extraConfig: Additional configuration for shadowsocks that is not covered by the
provided options. The provided attrset will be serialized to JSON and
has to contain valid shadowsocks options. Unfortunately most
additional options are undocumented but it's easy to find out what is
available by looking into the source code of
<https://github.com/shadowsocks/shadowsocks-libev/blob/master/src/jconf.c>

- services.shadowsocks.fastOpen: use TCP fast-open

- services.shadowsocks.localAddress: Local addresses to which the server binds.

- services.shadowsocks.mode: Relay protocols.

- services.shadowsocks.password: Password for connecting clients.

- services.shadowsocks.passwordFile: Password file with a password for connecting clients.

- services.shadowsocks.plugin: SIP003 plugin for shadowsocks

- services.shadowsocks.pluginOpts: Options to pass to the plugin if one was specified

- services.shadowsocks.port: Port which the server uses.

- services.shairport-sync.arguments: Arguments to pass to the daemon. Defaults to a local pulseaudio
server.

- services.shairport-sync.enable: Enable the shairport-sync daemon.

Running with a local system-wide or remote pulseaudio server
is recommended.

- services.shairport-sync.group: Group account name under which to run shairport-sync. The account
will be created.

- services.shairport-sync.openFirewall: Whether to automatically open ports in the firewall.

- services.shairport-sync.package: The shairport-sync package to use.
- services.shairport-sync.settings: Configuration options for Shairport-Sync.

See the example [shairport-sync.conf][example-file] for possible options.

[example-file]: https://github.com/mikebrady/shairport-sync/blob/master/scripts/shairport-sync.conf

- services.shairport-sync.user: User account name under which to run shairport-sync. The account
will be created.

- services.sharkey.enable: Whether to enable Sharkey, a Sharkish microblogging platform.
- services.sharkey.environmentFiles: List of paths to files containing environment variables for Sharkey to use at runtime.

This is useful for keeping secrets out of the Nix store. See
<https://docs.joinsharkey.org/docs/install/configuration/> for how to configure Sharkey using environment
variables.

- services.sharkey.openFirewall: Whether to open ports in the NixOS firewall for Sharkey.

- services.sharkey.package: The sharkey package to use.
- services.sharkey.settings: Configuration options for Sharkey.

See <https://activitypub.software/TransFem-org/Sharkey/-/blob/develop/.config/example.yml> for a list of all
available configuration options.

- services.sharkey.setupMeilisearch: Whether to automatically set up a local Meilisearch instance and configure Sharkey to use it.

You need to ensure `services.meilisearch.masterKeyFile` is correctly configured for a working
Meilisearch setup. You also need to configure Sharkey to use an API key obtained from Meilisearch with the
`MK_CONFIG_MEILISEARCH_APIKEY` environment variable, and set `services.sharkey.settings.meilisearch.index` to
the created index. See <https://docs.joinsharkey.org/docs/customisation/search/meilisearch/> for how to create
an API key and index.

- services.sharkey.setupPostgresql: Whether to automatically set up a local PostgreSQL database and configure Sharkey to use it.

- services.sharkey.setupRedis: Whether to automatically set up a local Redis cache and configure Sharkey to use it.

- services.shellhub-agent.enable: Whether to enable ShellHub Agent daemon.
- services.shellhub-agent.keepAliveInterval: Determine the interval to send the keep alive message to
the server. This has a direct impact of the bandwidth
used by the device.

- services.shellhub-agent.package: The shellhub-agent package to use.
- services.shellhub-agent.preferredHostname: Set the device preferred hostname. This provides a hint to
the server to use this as hostname if it is available.

- services.shellhub-agent.privateKey: Location where to store the ShellHub Agent private
key.

- services.shellhub-agent.server: Server address of ShellHub Gateway to connect.

- services.shellhub-agent.tenantId: The tenant ID to use when connecting to the ShellHub
Gateway.

- services.shellinabox
- services.shibboleth-sp.configFile: Path to shibboleth config file
- services.shibboleth-sp.enable: Whether to enable the shibboleth service
- services.shibboleth-sp.fastcgi.enable: Whether to include the shibauthorizer and shibresponder FastCGI processes
- services.shibboleth-sp.fastcgi.shibAuthorizerPort: Port for shibauthorizer FastCGI process to bind to
- services.shibboleth-sp.fastcgi.shibResponderPort: Port for shibauthorizer FastCGI process to bind to
- services.shiori.address: The IP address on which Shiori will listen.
If empty, listens on all interfaces.

- services.shiori.databaseUrl: The connection URL to connect to MySQL or PostgreSQL
- services.shiori.enable: Whether to enable Shiori simple bookmarks manager.
- services.shiori.environmentFile: Path to file containing environment variables.
Useful for passing down secrets.
<https://github.com/go-shiori/shiori/blob/master/docs/Configuration.md#overall-configuration>

- services.shiori.package: The shiori package to use.
- services.shiori.port: The port of the Shiori web application
- services.shiori.webRoot: The root of the Shiori web application
- services.shorewall.configs: This option defines the Shorewall configs.
The attribute name defines the name of the config,
and the attribute value defines the content of the config.

- services.shorewall.enable: Whether to enable Shorewall IPv4 Firewall.

::: {.warning}
Enabling this service WILL disable the existing NixOS
firewall! Default firewall rules provided by packages are not
considered at the moment.
:::

- services.shorewall.package: The shorewall package to use.
- services.shorewall6.configs: This option defines the Shorewall configs.
The attribute name defines the name of the config,
and the attribute value defines the content of the config.

- services.shorewall6.enable: Whether to enable Shorewall IPv6 Firewall.

::: {.warning}
Enabling this service WILL disable the existing NixOS
firewall! Default firewall rules provided by packages are not
considered at the moment.
:::

- services.shorewall6.package: The shorewall package to use.
- services.shout
- services.sickbeard.configFile: Path to config file.
- services.sickbeard.dataDir: Path where to store data files.
- services.sickbeard.enable: Whether to enable the sickbeard server.
- services.sickbeard.group: Group to run the service as
- services.sickbeard.package: The sickbeard package to use. Enable `pkgs.sickrage` or `pkgs.sickgear`
as an alternative to SickBeard

- services.sickbeard.port: Port to bind to.
- services.sickbeard.user: User to run the service as
- services.signald
- services.sillytavern.configFile: Path to the SillyTavern configuration file.

- services.sillytavern.enable: Whether to enable sillytavern.
- services.sillytavern.group: Group account under which the web-application run.

- services.sillytavern.listen: Whether to listen on all network interfaces.

- services.sillytavern.listenAddressIPv4: Specific IPv4 address to listen to.

- services.sillytavern.listenAddressIPv6: Specific IPv6 address to listen to.

- services.sillytavern.package: The sillytavern package to use.
- services.sillytavern.port: Port on which SillyTavern will listen.

- services.sillytavern.user: User account under which the web-application run.

- services.sillytavern.whitelist: Enables whitelist mode.

- services.silverbullet.enable: Whether to enable Silverbullet, an open-source, self-hosted, offline-capable Personal Knowledge Management (PKM) web application.
- services.silverbullet.envFile: File containing extra environment variables. For example:

```
SB_USER=user:password
SB_AUTH_TOKEN=abcdefg12345
```

- services.silverbullet.extraArgs: Extra arguments passed to silverbullet.
- services.silverbullet.group: The group to run Silverbullet under.
By default, a group named `silverbullet` will be created.

- services.silverbullet.listenAddress: Address or hostname to listen on. Defaults to 127.0.0.1.
- services.silverbullet.listenPort: Port to listen on.
- services.silverbullet.openFirewall: Open port in the firewall.
- services.silverbullet.package: The silverbullet package to use.
- services.silverbullet.spaceDir: Folder to store Silverbullet's space/workspace.
By default it is located at `/var/lib/silverbullet`.

- services.silverbullet.user: The user to run Silverbullet as.
By default, a user named `silverbullet` will be created whose space
directory is [spaceDir](#opt-services.silverbullet.spaceDir).

- services.simplesamlphp
- services.sing-box.enable: Whether to enable sing-box universal proxy platform.
- services.sing-box.package: The sing-box package to use.
- services.sing-box.settings: The sing-box configuration, see <https://sing-box.sagernet.org/configuration/> for documentation.

Options containing secret data should be set to an attribute set
containing the attribute `_secret` - a string pointing to a file
containing the value the option should be set to.

- services.siproxd
- services.sitespeed-io.dataDir: The base sitespeed-io data directory.
- services.sitespeed-io.enable: Whether to enable Sitespeed.io.
- services.sitespeed-io.package: The sitespeed-io package to use.
- services.sitespeed-io.period: Systemd calendar expression when to run. See {manpage}`systemd.time(7)`.

- services.sitespeed-io.runs: A list of run configurations. The service will call sitespeed-io once
for every run listed here. This lets you examine different websites
with different sitespeed-io settings.

- services.sitespeed-io.user: User account under which sitespeed-io runs.
- services.sks.dataDir: Data directory (-basedir) for SKS, where the database and all
configuration files are located (e.g. KDB, PTree, membership and
sksconf).

- services.sks.enable: Whether to enable SKS (synchronizing key server for OpenPGP) and start the database
server. You need to create "${dataDir}/dump/*.gpg" for the initial
import.
- services.sks.extraDbConfig: Set contents of the files "KDB/DB_CONFIG" and "PTree/DB_CONFIG" within
the ${dataDir} directory. This is used to configure options for the
database for the sks key server.

Documentation of available options are available in the file named
"sampleConfig/DB_CONFIG" in the following repository:
https://bitbucket.org/skskeyserver/sks-keyserver/src

- services.sks.hkpAddress: Domain names, IPv4 and/or IPv6 addresses to listen on for HKP
requests.

- services.sks.hkpPort: HKP port to listen on.
- services.sks.package: The sks package to use.
- services.sks.webroot: Source directory (will be symlinked, if not null) for the files the
built-in webserver should serve. SKS (${pkgs.sks.webSamples})
provides the following examples: "HTML5", "OpenPKG", and "XHTML+ES".
The index file can be named index.html, index.htm, index.xhtm, or
index.xhtml. Files with the extensions .css, .es, .js, .jpg, .jpeg,
.png, or .gif are supported. Subdirectories and filenames with
anything other than alphanumeric characters and the '.' character
will be ignored.

- services.skydns.address: Skydns address to bind to.
- services.skydns.domain: Skydns default domain if not specified by etcd config.
- services.skydns.enable: Whether to enable skydns service.
- services.skydns.etcd.caCert: Skydns path of TLS certificate authority public key.
- services.skydns.etcd.machines: Skydns list of etcd endpoints to connect to.
- services.skydns.etcd.tlsKey: Skydns path of TLS client certificate - private key.
- services.skydns.etcd.tlsPem: Skydns path of TLS client certificate - public key.
- services.skydns.extraConfig: Skydns attribute set of extra config options passed as environment variables.
- services.skydns.nameservers: Skydns list of nameservers to forward DNS requests to when not authoritative for a domain.
- services.skydns.package: The skydns package to use.
- services.slimserver.dataDir: The directory where slimserver stores its state, tag cache,
playlists etc.

- services.slimserver.enable: Whether to enable slimserver.

- services.slimserver.package: The slimserver package to use.
- services.slskd.domain: If non-null, enables an nginx reverse proxy virtual host at this FQDN,
at the path configurated with `services.slskd.web.url_base`.

- services.slskd.enable: Whether to enable slskd.
- services.slskd.environmentFile: Path to the environment file sourced on startup.
It must at least contain the variables `SLSKD_SLSK_USERNAME` and `SLSKD_SLSK_PASSWORD`.
Web interface credentials should also be set here in `SLSKD_USERNAME` and `SLSKD_PASSWORD`.
Other, optional credentials like SOCKS5 with `SLSKD_SLSK_PROXY_USERNAME` and `SLSKD_SLSK_PROXY_PASSWORD`
should all reside here instead of in the world-readable nix store.
Variables are documented at <https://github.com/slskd/slskd/blob/master/docs/config.md>

- services.slskd.group: Group under which slskd runs.
- services.slskd.nginx: This option customizes the nginx virtual host set up for slskd.

- services.slskd.openFirewall: Whether to open the firewall for the soulseek network listen port (not the web interface port).
- services.slskd.package: The slskd package to use.
- services.slskd.settings: Application configuration for slskd. See
[documentation](https://github.com/slskd/slskd/blob/master/docs/config.md).

- services.slskd.user: User account under which slskd runs.
- services.slurm.client.enable: Whether to enable slurm client daemon.
- services.slurm.clusterName: Necessary to distinguish accounting records in a multi-cluster environment.

- services.slurm.controlAddr: Name that ControlMachine should be referred to in establishing a
communications path.

- services.slurm.controlMachine: The short hostname of the machine where SLURM control functions are
executed (i.e. the name returned by the command "hostname -s", use "tux001"
rather than "tux001.my.com").

- services.slurm.dbdserver.configFile
- services.slurm.dbdserver.dbdHost: Hostname of the machine where `slurmdbd`
is running (i.e. name returned by `hostname -s`).

- services.slurm.dbdserver.enable: Whether to enable SlurmDBD service.
- services.slurm.dbdserver.extraConfig: Extra configuration for `slurmdbd.conf` See also:
{manpage}`slurmdbd.conf(8)`.

- services.slurm.dbdserver.storagePass
- services.slurm.dbdserver.storagePassFile: Path to file with database password. The content of this will be used to
create the password for the `StoragePass` option.

- services.slurm.dbdserver.storageUser: Database user name.

- services.slurm.enableSrunX11: If enabled srun will accept the option "--x11" to allow for X11 forwarding
from within an interactive session or a batch job. This activates the
slurm-spank-x11 module. Note that this option also enables
{option}`services.openssh.forwardX11` on the client.

This option requires slurm to be compiled without native X11 support.
The default behavior is to re-compile the slurm package with native X11
support disabled if this option is set to true.

To use the native X11 support add `PrologFlags=X11` in {option}`extraConfig`.
Note that this method will only work RSA SSH host keys.

- services.slurm.enableStools: Whether to provide a slurm.conf file.
Enable this option if you do not run a slurm daemon on this host
(i.e. `server.enable` and `client.enable` are `false`)
but you still want to run slurm commands from this host.

- services.slurm.etcSlurm: Path to directory with slurm config files. This option is set by default from the
Slurm module and is meant to make the Slurm config file available to other modules.

- services.slurm.extraCgroupConfig: Extra configuration for `cgroup.conf`. This file is
used when `procTrackType=proctrack/cgroup`.

- services.slurm.extraConfig: Extra configuration options that will be added verbatim at
the end of the slurm configuration file.

- services.slurm.extraConfigPaths: Slurm expects config files for plugins in the same path
as `slurm.conf`. Add extra nix store
paths that should be merged into same directory as
`slurm.conf`.

- services.slurm.extraPlugstackConfig: Extra configuration that will be added to the end of `plugstack.conf`.

- services.slurm.mpi.PmixCliTmpDirBase: Base path for PMIx temporary files.

- services.slurm.mpi.extraMpiConfig: Extra configuration for that will be added to `mpi.conf`.

- services.slurm.nodeName: Name that SLURM uses to refer to a node (or base partition for BlueGene
systems). Typically this would be the string that "/bin/hostname -s"
returns. Note that now you have to write node's parameters after the name.

- services.slurm.package: The slurm package to use.
- services.slurm.partitionName: Name by which the partition may be referenced. Note that now you have
to write the partition's parameters after the name.

- services.slurm.procTrackType: Plugin to be used for process tracking on a job step basis.
The slurmd daemon uses this mechanism to identify all processes
which are children of processes it spawns for a user job step.

- services.slurm.server.enable: Whether to enable the slurm control daemon.
Note that the standard authentication method is "munge".
The "munge" service needs to be provided with a password file in order for
slurm to work properly (see `services.munge.password`).

- services.slurm.stateSaveLocation: Directory into which the Slurm controller, slurmctld, saves its state.

- services.slurm.user: Set this option when you want to run the slurmctld daemon
as something else than the default slurm user "slurm".
Note that the UID of this user needs to be the same
on all nodes.

- services.smartd.autodetect: Whenever smartd should monitor all devices connected to the
machine at the time it's being started (the default).

Set to false to monitor the devices listed in
{option}`services.smartd.devices` only.

- services.smartd.defaults.autodetected: Like {option}`services.smartd.defaults.monitored`, but for the
autodetected devices.

- services.smartd.defaults.monitored: Common default options for explicitly monitored (listed in
{option}`services.smartd.devices`) devices.

The default value turns on monitoring of all the things (see
`man 5 smartd.conf`).

The example also turns on SMART Automatic Offline Testing on
startup, and schedules short self-tests daily, and long
self-tests weekly.

- services.smartd.devices: List of devices to monitor.
- services.smartd.enable: Whether to enable smartd daemon from `smartmontools` package.
- services.smartd.extraOptions: Extra command-line options passed to the `smartd`
daemon on startup.

(See `man 8 smartd`.)

- services.smartd.notifications.mail.enable: Whenever to send e-mail notifications.
- services.smartd.notifications.mail.mailer: Sendmail-compatible binary to be used to send the messages.

You should probably enable
{option}`services.postfix` or some other MTA for
this to work.

- services.smartd.notifications.mail.recipient: Recipient of the notification messages.
- services.smartd.notifications.mail.sender: Sender of the notification messages.
Acts as the value of `email` in the emails' `From: ...` field.

- services.smartd.notifications.systembus-notify.enable: Whenever to send systembus-notify notifications.

WARNING: enabling this option (while convenient) should *not* be done on a
machine where you do not trust the other users as it allows any other
local user to DoS your session by spamming notifications.

To actually see the notifications in your GUI session, you need to have
`systembus-notify` running as your user, which this
option handles by enabling {option}`services.systembus-notify`.

- services.smartd.notifications.test: Whenever to send a test notification on startup.
- services.smartd.notifications.wall.enable: Whenever to send wall notifications to all users.
- services.smartd.notifications.x11.display: DISPLAY to send X11 notifications to.
- services.smartd.notifications.x11.enable: Whenever to send X11 xmessage notifications.
- services.smartdns.bindPort: DNS listening port number.
- services.smartdns.enable: Whether to enable SmartDNS DNS server.
- services.smartdns.settings: A set that will be generated into configuration file, see the [SmartDNS README](https://github.com/pymumu/smartdns/blob/master/ReadMe_en.md#configuration-parameter) for details of configuration parameters.
You could override the options here like {option}`services.smartdns.bindPort` by writing `settings.bind = ":5353 -no-rule -group example";`.

- services.smokeping.alertConfig: Configuration for alerts.
- services.smokeping.cgiUrl: URL to the smokeping cgi.
- services.smokeping.config: Full smokeping config supplied by the user. Overrides
and replaces any other configuration supplied.

- services.smokeping.databaseConfig: Configure the ping frequency and retention of the rrd files.
Once set, changing the interval will require deletion or migration of all
the collected data.
- services.smokeping.enable: Whether to enable smokeping service.
- services.smokeping.extraConfig: Any additional customization not already included.
- services.smokeping.host: Host/IP to bind to for the web server.

Setting it to `null` skips passing the -h option to thttpd,
which makes it bind to all interfaces.

- services.smokeping.hostName: DNS name for the urls generated in the cgi.
- services.smokeping.imgUrl: Base url for images generated in the cgi.

The default is a relative URL to ensure it works also when e.g. forwarding
the GUI port via SSH.

- services.smokeping.linkStyle: DNS name for the urls generated in the cgi.
- services.smokeping.mailHost: Use this SMTP server to send alerts
- services.smokeping.owner: Real name of the owner of the instance
- services.smokeping.ownerEmail: Email contact for owner
- services.smokeping.package: The smokeping package to use.
- services.smokeping.port
- services.smokeping.presentationConfig: presentation graph style
- services.smokeping.presentationTemplate: Default page layout for the web UI.
- services.smokeping.probeConfig: Probe configuration
- services.smokeping.sendmail: Use this sendmail compatible script to deliver alerts
- services.smokeping.smokeMailTemplate: Specify the smokemail template for alerts.
- services.smokeping.targetConfig: Target configuration
- services.smokeping.user: User that runs smokeping and (optionally) thttpd. A group of the same name will be created as well.
- services.smokeping.webService: Enable a smokeping web interface
- services.snapper.cleanupInterval: Cleanup interval.

The format is described in
{manpage}`systemd.time(7)`.

- services.snapper.configs: Subvolume configuration. Any option mentioned in man:snapper-configs(5)
is valid here, even if NixOS doesn't document it.

- services.snapper.filters: Global display difference filter. See man:snapper(8) for more details.

- services.snapper.persistentTimer: Set the `Persistent` option for the
{manpage}`systemd.timer(5)`
which triggers the snapshot immediately if the last trigger
was missed (e.g. if the system was powered down).

- services.snapper.snapshotInterval: Snapshot interval.

The format is described in
{manpage}`systemd.time(7)`.

- services.snapper.snapshotRootOnBoot: Whether to snapshot root on boot

- services.snapraid.contentFiles: SnapRAID content list files.
- services.snapraid.dataDisks: SnapRAID data disks.
- services.snapraid.enable: Whether to enable SnapRAID.
- services.snapraid.exclude: SnapRAID exclude directives.
- services.snapraid.extraConfig: Extra config options for SnapRAID.
- services.snapraid.parityFiles: SnapRAID parity files.
- services.snapraid.scrub.interval: How often to run {command}`snapraid scrub`.
- services.snapraid.scrub.olderThan: Number of days since data was last scrubbed before it can be scrubbed again.
- services.snapraid.scrub.plan: Percent of the array that should be checked by {command}`snapraid scrub`.
- services.snapraid.sync.interval: How often to run {command}`snapraid sync`.
- services.snapraid.touchBeforeSync: Whether {command}`snapraid touch` should be run before {command}`snapraid sync`.
- services.snapserver.buffer: Alias of {option}`services.snapserver.settings.stream.buffer`.
- services.snapserver.codec: Alias of {option}`services.snapserver.settings.stream.codec`.
- services.snapserver.controlPort: Alias of {option}`services.snapserver.tcp.port`.
- services.snapserver.enable: Whether to enable snapserver.
- services.snapserver.http.docRoot: Alias of {option}`services.snapserver.settings.http.doc_root`.
- services.snapserver.http.enable: Alias of {option}`services.snapserver.settings.http.enabled`.
- services.snapserver.http.listenAddress: Alias of {option}`services.snapserver.settings.http.bind_to_address`.
- services.snapserver.http.port: Alias of {option}`services.snapserver.settings.http.port`.
- services.snapserver.listenAddress: Alias of {option}`services.snapserver.settings.stream.bind_to_address`.
- services.snapserver.openFirewall: Whether to automatically open the specified ports in the firewall.

- services.snapserver.package: The snapcast package to use.
- services.snapserver.port: Alias of {option}`services.snapserver.settings.stream.port`.
- services.snapserver.sampleFormat: Alias of {option}`services.snapserver.settings.stream.sampleformat`.
- services.snapserver.send: Alias of {option}`services.snapserver.settings.stream.chunk_ms`.
- services.snapserver.settings: Snapserver configuration.

Refer to the [example configuration](https://github.com/badaix/snapcast/blob/develop/server/etc/snapserver.conf) for possible options.

- services.snapserver.streamBuffer: Alias of {option}`services.snapserver.settings.stream.chunk_ms`.
- services.snapserver.streams
- services.snapserver.tcp.enable: Alias of {option}`services.snapserver.settings.tcp.enabled`.
- services.snapserver.tcp.listenAddress: Alias of {option}`services.snapserver.settings.tcp.bind_to_address`.
- services.snapserver.tcp.port: Alias of {option}`services.snapserver.settings.tcp.port`.
- services.snipe-it.appKeyFile: A file containing the Laravel APP_KEY - a 32 character long,
base64 encoded key used for encryption where needed. Can be
generated with `head -c 32 /dev/urandom | base64`.

- services.snipe-it.appURL: The root URL that you want to host Snipe-IT on. All URLs in Snipe-IT will be generated using this value.
If you change this in the future you may need to run a command to update stored URLs in the database.
Command example: `snipe-it snipe-it:update-url https://old.example.com https://new.example.com`

- services.snipe-it.config: Snipe-IT configuration options to set in the
{file}`.env` file.
Refer to <https://snipe-it.readme.io/docs/configuration>
for details on supported values.

Settings containing secret data should be set to an attribute
set containing the attribute `_secret` - a
string pointing to a file containing the value the option
should be set to. See the example to get a better picture of
this: in the resulting {file}`.env` file, the
`OIDC_CLIENT_SECRET` key will be set to the
contents of the {file}`/run/keys/oidc_secret`
file.

- services.snipe-it.dataDir: snipe-it data directory
- services.snipe-it.database.createLocally: Create the database and database user locally.
- services.snipe-it.database.host: Database host address.
- services.snipe-it.database.name: Database name.
- services.snipe-it.database.passwordFile: A file containing the password corresponding to
{option}`database.user`.

- services.snipe-it.database.port: Database host port.
- services.snipe-it.database.user: Database username.
- services.snipe-it.enable: Whether to enable snipe-it, a free open source IT asset/license management system.
- services.snipe-it.group: Group snipe-it runs as.
- services.snipe-it.hostName: The hostname to serve Snipe-IT on.

- services.snipe-it.mail.backupNotificationAddress: Email Address to send Backup Notifications to.
- services.snipe-it.mail.driver: Mail driver to use.
- services.snipe-it.mail.encryption: SMTP encryption mechanism to use.
- services.snipe-it.mail.from.address: Mail "from" address.
- services.snipe-it.mail.from.name: Mail "from" name.
- services.snipe-it.mail.host: Mail host address.
- services.snipe-it.mail.passwordFile: A file containing the password corresponding to
{option}`mail.user`.

- services.snipe-it.mail.port: Mail host port.
- services.snipe-it.mail.replyTo.address: Mail "reply-to" address.
- services.snipe-it.mail.replyTo.name: Mail "reply-to" name.
- services.snipe-it.mail.user: Mail username.
- services.snipe-it.maxUploadSize: The maximum size for uploads (e.g. images).
- services.snipe-it.nginx: With this option, you can customize the nginx virtualHost settings.

- services.snipe-it.poolConfig: Options for the snipe-it PHP pool. See the documentation on `php-fpm.conf`
for details on configuration directives.

- services.snipe-it.user: User snipe-it runs as.
- services.sniproxy.config: sniproxy.conf configuration excluding the daemon username and pid file.
- services.sniproxy.enable: Whether to enable sniproxy server.
- services.sniproxy.group: Group under which sniproxy runs.
- services.sniproxy.logDir
- services.sniproxy.user: User account under which sniproxy runs.
- services.snips-sh.enable: Whether to enable snips.sh.
- services.snips-sh.environmentFile: Additional environment file as defined in {manpage}`systemd.exec(5)`.

Sensitive secrets such as {env}`SNIPS_SSH_HOSTKEYPATH` and {env}`SNIPS_METRICS_STATSD`
may be passed to the service while avoiding potentially making them world-readable in the nix store or
to convert an existing non-nix installation with minimum hassle.

Note that this file needs to be available on the host on which
`snips-sh` is running.

- services.snips-sh.package: The snips-sh package to use.
- services.snips-sh.settings: The configuration of snips-sh is done through environment variables,
therefore you must use upper snake case (e.g. {env}`SNIPS_HTTP_INTERNAL`).

Based on the attributes passed to this config option an environment file will be generated
that is passed to snips-sh's systemd service.

The available configuration options can be found in
[self-hosting guide](https://github.com/robherley/snips.sh/blob/main/docs/self-hosting.md#configuration) to
find about the environment variables you can use.

- services.snips-sh.stateDir: The state directory of the service.
- services.snmpd.configFile: Path to the snmpd.conf file. By default, if {option}`configText` is set,
a config file will be automatically generated.

- services.snmpd.configText: The contents of the snmpd.conf. If the {option}`configFile` option
is set, this value will be ignored.

Note that the contents of this option will be added to the Nix
store as world-readable plain text, {option}`configFile` can be used in
addition to a secret management tool to protect sensitive data.

- services.snmpd.enable: Whether to enable snmpd.
- services.snmpd.listenAddress: The address to listen on for SNMP and AgentX messages.

- services.snmpd.openFirewall: Open port in firewall for snmpd.

- services.snmpd.package: The net-snmp package to use.
- services.snmpd.port: The port to listen on for SNMP and AgentX messages.

- services.snowflake-proxy.broker: Broker URL (default "https://snowflake-broker.torproject.net/")
- services.snowflake-proxy.capacity: Limits the amount of maximum concurrent clients allowed.
- services.snowflake-proxy.enable: Whether to enable snowflake-proxy, a system to defeat internet censorship.
- services.snowflake-proxy.relay: websocket relay URL (default "wss://snowflake.bamsoftware.com/")
- services.snowflake-proxy.stun: STUN broker URL (default "stun:stun.stunprotocol.org:3478")
- services.soft-serve.enable: Whether to enable soft-serve.
- services.soft-serve.package: The soft-serve package to use.
- services.soft-serve.settings: The contents of the configuration file for soft-serve.

See <https://charm.sh/blog/self-hosted-soft-serve/>.

- services.softether.dataDir: Data directory for SoftEther VPN.

- services.softether.enable: Whether to enable SoftEther VPN services.
- services.softether.package: The softether package to use.
- services.softether.vpnbridge.enable: Whether to enable SoftEther VPN Bridge.
- services.softether.vpnclient.down: Shell commands executed when the Virtual Network Adapter(s) is/are shutting down.

- services.softether.vpnclient.enable: Whether to enable SoftEther VPN Client.
- services.softether.vpnclient.up: Shell commands executed when the Virtual Network Adapter(s) is/are starting.

- services.softether.vpnserver.enable: Whether to enable SoftEther VPN Server.
- services.sogo.configReplaces: Replacement-filepath mapping for sogo.conf.
Every key is replaced with the contents of the file specified as value.

In the example, every occurrence of LDAP_BINDPW will be replaced with the text of the
specified file.

- services.sogo.ealarmsCredFile: Optional path to a credentials file for email alarms
- services.sogo.enable: Whether to enable SOGo groupware.
- services.sogo.extraConfig: Extra sogo.conf configuration lines
- services.sogo.language: Language of SOGo
- services.sogo.timezone: Timezone of your SOGo instance
- services.sogo.vhostName: Name of the nginx vhost
- services.soju.acceptProxyIP: Allow the specified IPs to act as a proxy. Proxys have the ability to
overwrite the remote and local connection addresses (via the X-Forwarded-\*
HTTP header fields). The special name "localhost" accepts the loopback
addresses 127.0.0.0/8 and ::1/128. By default, all IPs are rejected.

- services.soju.adminSocket.enable: Listen for admin connections from sojuctl at /run/soju/admin.

- services.soju.configFile: Path to config file. If this option is set, it will override any
configuration done using other options, including {option}`extraConfig`.

- services.soju.enable: Whether to enable soju.
- services.soju.enableMessageLogging: Whether to enable message logging.
- services.soju.extraConfig: Lines added verbatim to the generated configuration file.
- services.soju.hostName: Server hostname.
- services.soju.httpOrigins: List of allowed HTTP origins for WebSocket listeners. The parameters are
interpreted as shell patterns, see
{manpage}`glob(7)`.

- services.soju.listen: Where soju should listen for incoming connections. See the
`listen` directive in
{manpage}`soju(1)`.

- services.soju.package: The soju package to use.
- services.soju.tlsCertificate: Path to server TLS certificate.
- services.soju.tlsCertificateKey: Path to server TLS certificate key.
- services.solanum.config: Solanum IRC daemon configuration file.
check <https://github.com/solanum-ircd/solanum/blob/main/doc/reference.conf> for all options.

- services.solanum.enable: Whether to enable Solanum IRC daemon.
- services.solanum.motd: Solanum MOTD text.

Solanum will read its MOTD from `/etc/solanum/ircd.motd`.
If set, the value of this option will be written to this path.

- services.solanum.openFilesLimit: Maximum number of open files. Limits the clients and server connections.

- services.sonarr.dataDir: The directory where Sonarr stores its data files.
- services.sonarr.enable: Whether to enable Sonarr.
- services.sonarr.environmentFiles: Environment file to pass secret configuration values.
Each line must follow the `SONARR__SECTION__KEY=value` pattern.
Please consult the documentation at the [wiki](https://wiki.servarr.com/useful-tools#using-environment-variables-for-config).

- services.sonarr.group: Group under which Sonaar runs.
- services.sonarr.openFirewall: Open ports in the firewall for the Sonarr web interface

- services.sonarr.package: The sonarr package to use.
- services.sonarr.settings: Attribute set of arbitrary config options.
Please consult the documentation at the [wiki](https://wiki.servarr.com/useful-tools#using-environment-variables-for-config).

WARNING: this configuration is stored in the world-readable Nix store!
For secrets use [](#opt-services.sonarr.environmentFiles).

- services.sonarr.user: User account under which Sonaar runs.
- services.sonic-server.enable: Whether to enable Sonic Search Index.
- services.sonic-server.package: The sonic-server package to use.
- services.sonic-server.settings: Sonic Server configuration options.

Refer to
<https://github.com/valeriansaliou/sonic/blob/master/CONFIGURATION.md>
for a full list of available options.

- services.sourcehut
- services.spacecookie.address: Address to listen on. Must be in the
`ListenStream=` syntax of
{manpage}`systemd.socket(5)`.

- services.spacecookie.enable: Whether to enable spacecookie.
- services.spacecookie.hostname: Alias of {option}`services.spacecookie.settings.hostname`.
- services.spacecookie.openFirewall: Whether to open the necessary port in the firewall for spacecookie.

- services.spacecookie.package: The spacecookie package to use.
- services.spacecookie.port: Port the gopher service should be exposed on.

- services.spacecookie.root: Alias of {option}`services.spacecookie.settings.root`.
- services.spacecookie.settings: Settings for spacecookie. The settings set here are
directly translated to the spacecookie JSON config
file. See
[spacecookie.json(5)](https://sternenseemann.github.io/spacecookie/spacecookie.json.5.html)
for explanations of all options.

- services.spamassassin.config: The SpamAssassin local.cf config

If you are using this configuration:

    add_header all Status _YESNO_, score=_SCORE_ required=_REQD_ tests=_TESTS_ autolearn=_AUTOLEARN_ version=_VERSION_

Then you can Use this sieve filter:

    require ["fileinto", "reject", "envelope"];

    if header :contains "X-Spam-Flag" "YES" {
      fileinto "spam";
    }

Or this procmail filter:

    :0:
    * ^X-Spam-Flag: YES
    /var/vpopmail/domains/lastlog.de/js/.maildir/.spam/new

To filter your messages based on the additional mail headers added by spamassassin.

- services.spamassassin.debug: Whether to run the SpamAssassin daemon in debug mode
- services.spamassassin.enable: Whether to enable the SpamAssassin daemon.
- services.spamassassin.initPreConf: The SpamAssassin init.pre config.
- services.spark.confDir: Spark configuration directory. Spark will use the configuration files (spark-defaults.conf, spark-env.sh, log4j.properties, etc) from this directory.
- services.spark.logDir: Spark log directory.
- services.spark.master.bind: Address the spark master binds to.
- services.spark.master.enable: Whether to enable Spark master service.
- services.spark.master.extraEnvironment: Extra environment variables to pass to spark master. See spark-standalone documentation.
- services.spark.master.restartIfChanged: Automatically restart master service on config change.
This can be set to false to defer restarts on clusters running critical applications.
Please consider the security implications of inadvertently running an older version,
and the possibility of unexpected behavior caused by inconsistent versions across a cluster when disabling this option.

- services.spark.package: The spark package to use.
- services.spark.worker.enable: Whether to enable Spark worker service.
- services.spark.worker.extraEnvironment: Extra environment variables to pass to spark worker.
- services.spark.worker.master: Address of the spark master.
- services.spark.worker.restartIfChanged: Automatically restart worker service on config change.
This can be set to false to defer restarts on clusters running critical applications.
Please consider the security implications of inadvertently running an older version,
and the possibility of unexpected behavior caused by inconsistent versions across a cluster when disabling this option.

- services.spark.worker.workDir: Spark worker work dir.
- services.speechd.enable: Whether to enable speech-dispatcher speech synthesizer daemon.
- services.speechd.package: The speechd package to use.
- services.speedify.enable: This option enables Speedify daemon.
This sets {option}`networking.firewall.checkReversePath` to "loose", which might be undesirable for security.

- services.speedify.package: The speedify package to use.
- services.spice-autorandr.enable: Whether to enable spice-autorandr service that will automatically resize display to match SPICE client window size.
- services.spice-autorandr.package: The spice-autorandr package to use.
- services.spice-vdagentd.enable: Whether to enable Spice guest vdagent daemon.
- services.spice-webdavd.enable: Whether to enable the spice guest webdav proxy daemon.
- services.spice-webdavd.package: The phodav package to use.
- services.spiped.config: Configuration for a secure pipe daemon. The daemon can be
started, stopped, or examined using
`systemctl`, under the name
`spiped@foo`.

- services.spiped.enable: Enable the spiped service module.
- services.spoolman.enable: Whether to enable Spoolman, a filament spool inventory management system..
- services.spoolman.environment: Environment variables to be passed to the spoolman service.
Refer to https://github.com/Donkie/Spoolman/blob/master/.env.example for details on supported variables.

- services.spoolman.listen: The IP address to bind the spoolman server to.
- services.spoolman.openFirewall: Open the appropriate ports in the firewall for spoolman.

- services.spoolman.port: TCP port where spoolman web-gui listens.

- services.spotifyd.config: (Deprecated) Configuration for Spotifyd. For syntax and directives, see
<https://docs.spotifyd.rs/configuration/index.html#config-file>.

- services.spotifyd.enable: Whether to enable spotifyd, a Spotify playing daemon.
- services.spotifyd.settings: Configuration for Spotifyd. For syntax and directives, see
<https://docs.spotifyd.rs/configuration/index.html#config-file>.

- services.squeezelite.enable: Whether to enable Squeezelite, a software Squeezebox emulator.
- services.squeezelite.extraArguments: Additional command line arguments to pass to Squeezelite.

- services.squeezelite.pulseAudio: Whether to enable pulseaudio support.
- services.squid.configText: Verbatim contents of squid.conf. If null (default), use the
autogenerated file from NixOS instead.

- services.squid.enable: Whether to run squid web proxy.
- services.squid.extraConfig: Squid configuration. Contents will be added
verbatim to the configuration file.

- services.squid.package: The squid package to use.
- services.squid.proxyAddress: IP address on which squid will listen.
- services.squid.proxyPort: TCP port on which squid will listen.
- services.squid.validateConfig: Validate config syntax.
- services.sshd.enable: Alias of {option}`services.openssh.enable`.
- services.sshguard.attack_threshold: Block attackers when their cumulative attack score exceeds threshold. Most attacks have a score of 10.

- services.sshguard.blacklist_file: Blacklist an attacker when its score exceeds threshold. Blacklisted addresses are loaded from and added to blacklist-file.

- services.sshguard.blacklist_threshold: Blacklist an attacker when its score exceeds threshold. Blacklisted addresses are loaded from and added to blacklist-file.

- services.sshguard.blocktime: Block attackers for initially blocktime seconds after exceeding threshold. Subsequent blocks increase by a factor of 1.5.

sshguard unblocks attacks at random intervals, so actual block times will be longer.

- services.sshguard.detection_time: Remember potential attackers for up to detection_time seconds before resetting their score.

- services.sshguard.enable: Whether to enable the sshguard service.
- services.sshguard.services: Systemd services sshguard should receive logs of.

- services.sshguard.whitelist: Whitelist a list of addresses, hostnames, or address blocks.

- services.sshwifty.enable: Whether to enable Sshwifty.
- services.sshwifty.package: The sshwifty package to use.
- services.sshwifty.settings: Configuration for Sshwifty. See
[the Sshwifty documentation](https://github.com/nirui/sshwifty/tree/master?tab=readme-ov-file#configuration)
for possible options.

- services.sshwifty.sharedKeyFile: Path to a file containing the shared key.
- services.sshwifty.socks5PasswordFile: Path to a file containing the SOCKS5 password.
- services.sslh.appendConfig
- services.sslh.enable: Whether to enable sslh, protocol demultiplexer.
- services.sslh.listenAddress: Alias of {option}`services.sslh.listenAddresses`.
- services.sslh.listenAddresses: Listening addresses or hostnames.
- services.sslh.method: The method to use for handling connections:

  - `fork` forks a new process for each incoming connection. It is
  well-tested and very reliable, but incurs the overhead of many
  processes.

  - `select` uses only one thread, which monitors all connections at once.
  It has lower overhead per connection, but if it stops, you'll lose all
  connections.

  - `ev` is implemented using libev, it's similar to `select` but
    scales better to a large number of connections.

- services.sslh.port: Listening port.
- services.sslh.settings: sslh configuration. See {manpage}`sslh(8)` for available settings.
- services.sslh.timeout: Alias of {option}`services.sslh.settings.timeout`.
- services.sslh.transparent: Alias of {option}`services.sslh.settings.transparent`.
- services.sslh.verbose
- services.sslmate-agent.enable: Whether to enable sslmate-agent, a daemon for managing SSL/TLS certificates on a server.
- services.ssm-agent.enable: Alias of {option}`services.amazon-ssm-agent.enable`.
- services.ssm-agent.package: Alias of {option}`services.amazon-ssm-agent.package`.
- services.ssmtp
- services.sssd.config: Contents of {file}`sssd.conf`.
- services.sssd.enable: Whether to enable the System Security Services Daemon.
- services.sssd.environmentFile: Environment file as defined in {manpage}`systemd.exec(5)`.

Secrets may be passed to the service without adding them to the world-readable
Nix store, by specifying placeholder variables as the option value in Nix and
setting these variables accordingly in the environment file.

```
  # snippet of sssd-related config
  [domain/LDAP]
  ldap_default_authtok = $SSSD_LDAP_DEFAULT_AUTHTOK
```

```
  # contents of the environment file
  SSSD_LDAP_DEFAULT_AUTHTOK=verysecretpassword
```

- services.sssd.kcm: Whether to use SSS as a Kerberos Cache Manager (KCM).
Kerberos will be configured to cache credentials in SSS.

- services.sssd.sshAuthorizedKeysIntegration: Whether to make sshd look up authorized keys from SSS.
For this to work, the `ssh` SSS service must be enabled in the sssd configuration.

- services.stalwart-mail.credentials: Credentials envs used to configure Stalwart-Mail secrets.
These secrets can be accessed in configuration values with
the macros such as
`%{file:/run/credentials/stalwart-mail.service/VAR_NAME}%`.

- services.stalwart-mail.dataDir: Data directory for stalwart

- services.stalwart-mail.enable: Whether to enable the Stalwart all-in-one email server.
- services.stalwart-mail.openFirewall: Whether to open TCP firewall ports, which are specified in
{option}`services.stalwart-mail.settings.server.listener` on all interfaces.

- services.stalwart-mail.package: The stalwart-mail package to use.
- services.stalwart-mail.settings: Configuration options for the Stalwart email server.
See <https://stalw.art/docs/category/configuration> for available options.

By default, the module is configured to store everything locally.

- services.stargazer.allowCgiUser: When enabled, the stargazer process will be given `CAP_SETGID`
and `CAP_SETUID` so that it can run cgi processes as a different
user. This is required if the `cgi-user` option is used for a route.
Note that these capabilities could allow privilege escalation so be
careful. For that reason, this is disabled by default.

You will need to create the user mentioned `cgi-user` if it does not
already exist.

- services.stargazer.certLifetime: How long certs generated by Stargazer should live for.
Certs live forever by default.

- services.stargazer.certOrg: The name of the organization responsible for the X.509
certificate's /O name.

- services.stargazer.connectionLogging: Whether or not to log connections to stdout.
- services.stargazer.debugMode: Run Stargazer in debug mode.
- services.stargazer.enable: Whether to enable Stargazer Gemini server.
- services.stargazer.genCerts: Set to false to disable automatic certificate generation.
Use if you want to provide your own certs.

- services.stargazer.group: Group account under which stargazer runs.
- services.stargazer.ipLog: Log client IP addresses in the connection log.
- services.stargazer.ipLogPartial: Log partial client IP addresses in the connection log.
- services.stargazer.listen: Address and port to listen on.

- services.stargazer.regenCerts: Set to false to turn off automatic regeneration of expired certificates.
Use if you want to provide your own certs.

- services.stargazer.requestTimeout: Number of seconds to wait for the client to send a complete
request. Set to 0 to disable.

- services.stargazer.responseTimeout: Number of seconds to wait for the client to send a complete
request and for stargazer to finish sending the response.
Set to 0 to disable.

- services.stargazer.routes: Routes that Stargazer should server.

Expressed as a list of attribute sets. Each set must have a key `route`
that becomes the section name for that route in the stargazer ini cofig.
The remaining keys and values become the parameters for that route.

[Refer to upstream docs for other params](https://git.sr.ht/~zethra/stargazer/tree/main/item/doc/stargazer.ini.5.txt)

- services.stargazer.store: Path to the certificate store on disk. This should be a
persistent directory writable by Stargazer.

- services.stargazer.user: User account under which stargazer runs.
- services.stash.dataDir: The directory where Stash stores its files.
- services.stash.enable: Whether to enable stash.
- services.stash.group: Group under which Stash runs.
- services.stash.jwtSecretKeyFile: Path to file containing a secret used to sign JWT tokens.
- services.stash.mutablePlugins: Whether to enable Whether plugins/themes can be installed, updated, uninstalled manually..
- services.stash.mutableScrapers: Whether to enable Whether scrapers can be installed, updated, uninstalled manually..
- services.stash.mutableSettings: Whether the Stash config.yml is writeable by Stash.

If `false`, Any config changes done from within Stash UI will be temporary and reset to those defined in {option}`services.stash.settings` upon `Stash.service` restart.
If `true`, the {option}`services.stash.settings` will only be used to initialize the Stash configuration if it does not exist, and are subsequently ignored.

- services.stash.openFirewall: Open ports in the firewall for the Stash web interface.
- services.stash.package: The stash package to use.
- services.stash.passwordFile: Path to file containing password for login.

::: {.warning}
  This option takes precedence over {option}`services.stash.settings.password`
::


- services.stash.plugins: The plugins Stash should be started with.

- services.stash.scrapers: The scrapers Stash should be started with.

- services.stash.sessionStoreKeyFile: Path to file containing a secret for session store.
- services.stash.settings: Stash configuration
- services.stash.user: User under which Stash runs.
- services.stash.username: Username for login.

::: {.warning}
  This option takes precedence over {option}`services.stash.settings.username`
::


- services.static-web-server.configuration: Configuration for Static Web Server. See
<https://static-web-server.net/configuration/config-file/>.
NOTE: Don't set "host", "port", or "root" here. They will be ignored.
Use the top-level "listen" and "root" options instead.

- services.static-web-server.enable: Whether to enable Static Web Server.
- services.static-web-server.listen: The {manpage}`systemd.socket(5)` "ListenStream" used in static-web-server.socket.
This is equivalent to SWS's "host" and "port" options.
See here for specific syntax: <https://www.freedesktop.org/software/systemd/man/systemd.socket.html#ListenStream=>

- services.static-web-server.root: The location of files for SWS to serve. Equivalent to SWS's "root" config value.
NOTE: This folder must exist before starting SWS.

- services.statsd.backends: List of backends statsd will use for data persistence
- services.statsd.enable: Whether to enable statsd.
- services.statsd.extraConfig: Extra configuration options for statsd
- services.statsd.graphiteHost: Hostname or IP of Graphite server
- services.statsd.graphitePort: Port of Graphite server (i.e. carbon-cache).
- services.statsd.listenAddress: Address that statsd listens on over UDP
- services.statsd.mgmt_address: Address to run management TCP interface on
- services.statsd.mgmt_port: Port to run the management TCP interface on
- services.statsd.port: Port that stats listens for messages on over UDP
- services.step-ca.address: The address (without port) the certificate authority should listen at.
This combined with {option}`services.step-ca.port` overrides {option}`services.step-ca.settings.address`.

- services.step-ca.enable: Whether to enable the smallstep certificate authority server.
- services.step-ca.intermediatePasswordFile: Path to the file containing the password for the intermediate
certificate private key.

::: {.warning}
Make sure to use a quoted absolute path instead of a path literal
to prevent it from being copied to the globally readable Nix
store.
:::

- services.step-ca.openFirewall: Whether to enable opening the certificate authority server port.
- services.step-ca.package: The step-ca package to use.
- services.step-ca.port: The port the certificate authority should listen on.
This combined with {option}`services.step-ca.address` overrides {option}`services.step-ca.settings.address`.

- services.step-ca.settings: Settings that go into {file}`ca.json`. See
[the step-ca manual](https://smallstep.com/docs/step-ca/configuration)
for more information. The easiest way to
configure this module would be to run `step ca init`
to generate {file}`ca.json` and then import it using
`builtins.fromJSON`.
[This article](https://smallstep.com/docs/step-cli/basic-crypto-operations#run-an-offline-x509-certificate-authority)
may also be useful if you want to customize certain aspects of
certificate generation for your CA.
You need to change the database storage path to {file}`/var/lib/step-ca/db`.

::: {.warning}
The {option}`services.step-ca.settings.address` option
will be ignored and overwritten by
{option}`services.step-ca.address` and
{option}`services.step-ca.port`.
:::

- services.stirling-pdf.enable: Whether to enable the stirling-pdf service.
- services.stirling-pdf.environment: Environment variables for the stirling-pdf app.
See <https://github.com/Stirling-Tools/Stirling-PDF#customisation> for available options.

- services.stirling-pdf.environmentFiles: Files containing additional environment variables to pass to Stirling PDF.
Secrets should be added in environmentFiles instead of environment.

- services.stirling-pdf.package: The stirling-pdf package to use.
- services.stratis.enable: Whether to enable Stratis Storage - Easy to use local storage management for Linux.
- services.strfry.enable: Whether to enable strfry.
- services.strfry.package: The strfry package to use.
- services.strfry.settings: Configuration options to set for the Strfry service. See <https://github.com/hoytech/strfry> for documentation.
- services.strongswan.ca: A set of CAs (certification authorities) and their options for
the ‘ca xxx’ sections of the {file}`ipsec.conf`
file.

- services.strongswan.connections: A set of connections and their options for the ‘conn xxx’
sections of the {file}`ipsec.conf` file.

- services.strongswan.enable: Whether to enable strongSwan.
- services.strongswan.enabledPlugins: A list of additional plugins to enable if
{option}`managePlugins` is true.

- services.strongswan.managePlugins: If set to true, this option will disable automatic plugin loading and
then tell strongSwan to enable the plugins specified in the
{option}`enabledPlugins` option.

- services.strongswan.secrets: A list of paths to IPSec secret files. These
files will be included into the main ipsec.secrets file with
the `include` directive. It is safer if these
paths are absolute.

- services.strongswan.setup: A set of options for the ‘config setup’ section of the
{file}`ipsec.conf` file. Defines general
configuration parameters.

- services.strongswan-swanctl.enable: Whether to enable strongswan-swanctl service.
- services.strongswan-swanctl.includes: Extra configuration files to include in the swanctl configuration. This can be used to provide secret values from outside the nix store.

- services.strongswan-swanctl.package: The strongswan package to use.
- services.strongswan-swanctl.strongswan.extraConfig: Contents of the `strongswan.conf` file.

- services.strongswan-swanctl.swanctl.authorities: Section defining complementary attributes of certification authorities, each
in its own subsection with an arbitrary yet unique name

- services.strongswan-swanctl.swanctl.connections: Section defining IKE connection configurations, each in its own subsection
with an arbitrary yet unique name

- services.strongswan-swanctl.swanctl.pools: Section defining named pools. Named pools may be referenced by connections
with the pools option to assign virtual IPs and other configuration
attributes. Each pool must have a unique name (denoted \<name\> below).

- services.strongswan-swanctl.swanctl.secrets.eap: EAP secret section for a specific secret. Each EAP secret is defined in a
unique section having the `eap` prefix. EAP secrets are
used for XAuth authentication as well.

- services.strongswan-swanctl.swanctl.secrets.ecdsa: Private key decryption passphrase for a key in the
`ecdsa` folder.

- services.strongswan-swanctl.swanctl.secrets.ike: IKE preshared secret section for a specific secret. Each IKE PSK is
defined in a unique section having the `ike` prefix.

- services.strongswan-swanctl.swanctl.secrets.ntlm: NTLM secret section for a specific secret. Each NTLM secret is defined in
a unique section having the `ntlm` prefix. NTLM secrets
may only be used for EAP-MSCHAPv2 authentication.

- services.strongswan-swanctl.swanctl.secrets.pkcs12: PKCS#12 decryption passphrase for a container in the
`pkcs12` folder.

- services.strongswan-swanctl.swanctl.secrets.pkcs8: Private key decryption passphrase for a key in the
`pkcs8` folder.

- services.strongswan-swanctl.swanctl.secrets.ppk: Postquantum Preshared Key (PPK) section for a specific secret. Each PPK is
defined in a unique section having the `ppk` prefix.

- services.strongswan-swanctl.swanctl.secrets.private: Private key decryption passphrase for a key in the
`private` folder.

- services.strongswan-swanctl.swanctl.secrets.rsa: Private key decryption passphrase for a key in the `rsa`
folder.

- services.strongswan-swanctl.swanctl.secrets.token: Definition for a private key that's stored on a token/smartcard/TPM.
- services.strongswan-swanctl.swanctl.secrets.xauth: EAP secret section for a specific secret. Each EAP secret is defined in a
unique section having the `eap` prefix. EAP secrets are
used for XAuth authentication as well.

- services.stubby.authenticationMode
- services.stubby.enable: Whether to enable Stubby DNS resolver.
- services.stubby.fallbackProtocols
- services.stubby.idleTimeout
- services.stubby.listenAddresses
- services.stubby.logLevel: Log verbosity (syslog keyword or level).
- services.stubby.queryPaddingBlocksize
- services.stubby.roundRobinUpstreams
- services.stubby.settings: Content of the Stubby configuration file. All Stubby settings may be set or queried
here. The default settings are available at
`pkgs.stubby.passthru.settingsExample`. See
<https://dnsprivacy.org/wiki/display/DP/Configuring+Stubby>.
A list of the public recursive servers can be found here:
<https://dnsprivacy.org/wiki/display/DP/DNS+Privacy+Test+Servers>.

- services.stubby.subnetPrivate
- services.stubby.upstreamServers
- services.stunnel.clients: Define the client configurations.

By default, verifyChain and OCSPaia are enabled and CAFile is set to `security.pki.caBundle`.

See "SERVICE-LEVEL OPTIONS" in {manpage}`stunnel(8)`.

- services.stunnel.enable: Whether to enable the stunnel TLS tunneling service.
- services.stunnel.enableInsecureSSLv3: Enable support for the insecure SSLv3 protocol.
- services.stunnel.fipsMode: Enable FIPS 140-2 mode required for compliance.
- services.stunnel.group: The group under which stunnel runs.
- services.stunnel.logLevel: Verbosity of stunnel output.
- services.stunnel.servers: Define the server configurations.

See "SERVICE-LEVEL OPTIONS" in {manpage}`stunnel(8)`.

- services.stunnel.user: The user under which stunnel runs.
- services.subsonic.contextPath: The context path, i.e., the last part of the Subsonic
URL. Typically '/' or '/subsonic'. Default '/'

- services.subsonic.defaultMusicFolder: Configure Subsonic to use this folder for music.  This option
only has effect the first time Subsonic is started.

- services.subsonic.defaultPlaylistFolder: Configure Subsonic to use this folder for playlists.  This option
only has effect the first time Subsonic is started.

- services.subsonic.defaultPodcastFolder: Configure Subsonic to use this folder for Podcasts.  This option
only has effect the first time Subsonic is started.

- services.subsonic.enable: Whether to enable Subsonic daemon.
- services.subsonic.home: The directory where Subsonic will create files.
Make sure it is writable.

- services.subsonic.httpsPort: The port on which Subsonic will listen for
incoming HTTPS traffic. Set to 0 to disable.

- services.subsonic.listenAddress: The host name or IP address on which to bind Subsonic.
Only relevant if you have multiple network interfaces and want
to make Subsonic available on only one of them. The default value
will bind Subsonic to all available network interfaces.

- services.subsonic.maxMemory: The memory limit (max Java heap size) in megabytes.
Default: 100

- services.subsonic.port: The port on which Subsonic will listen for
incoming HTTP traffic. Set to 0 to disable.

- services.subsonic.transcoders: List of paths to transcoder executables that should be accessible
from Subsonic. Symlinks will be created to each executable inside
${config.services.subsonic.home}/transcoders.

- services.sundtek.enable: Whether to enable Sundtek driver.
- services.sunshine.applications: Configuration for applications to be exposed to Moonlight. If this is set, no configuration is possible from the web UI, and must be by the `settings` option.

- services.sunshine.autoStart: Whether sunshine should be started automatically.

- services.sunshine.capSysAdmin: Whether to give the Sunshine binary CAP_SYS_ADMIN, required for DRM/KMS screen capture.

- services.sunshine.enable: Whether to enable Sunshine, a self-hosted game stream host for Moonlight.
- services.sunshine.openFirewall: Whether to automatically open ports in the firewall.

- services.sunshine.package: The sunshine package to use.
- services.sunshine.settings: Settings to be rendered into the configuration file. If this is set, no configuration is possible from the web UI.

See <https://docs.lizardbyte.dev/projects/sunshine/en/latest/about/advanced_usage.html#configuration for syntax>.

- services.supergfxd.enable: Whether to enable the supergfxd service.
- services.supergfxd.settings: The content of /etc/supergfxd.conf.
See <https://gitlab.com/asus-linux/supergfxctl/#config-options-etcsupergfxdconf>.

- services.supybot.configFile: Path to initial supybot config file. This can be generated by
running supybot-wizard.

Note: all paths should include the full path to the stateDir
directory (backup conf data logs logs/plugins plugins tmp web).

- services.supybot.enable: Enable Supybot, an IRC bot (also known as Limnoria).
- services.supybot.extraPackages: Extra Python packages available to supybot plugins. The
value must be a function which receives the attrset defined
in {var}`python3Packages` as the sole argument.

- services.supybot.plugins: Attribute set of additional plugins that will be symlinked to the
{file}`plugin` subdirectory.

Please note that you still need to add the plugins to the config
file (or with `!load`) using their attribute name.

- services.supybot.stateDir: The root directory, logs and plugins are stored here
- services.suricata.configFile: Configuration file for suricata.

It is not usual to override the default values; it is recommended to use `settings`.
If you want to include extra configuration to the file, use the `settings.includes`.

- services.suricata.disabledRules: List of rules that should be disabled.

- services.suricata.enable: Whether to enable Suricata.
- services.suricata.enabledSources: List of sources that should be enabled.
Currently sources which require a secret-code are not supported.

- services.suricata.package: The suricata package to use.
- services.suricata.settings: Suricata settings
- services.surrealdb.dbPath: The path that surrealdb will write data to. Use null for in-memory.
Can be one of "memory", "rocksdb://:path", "surrealkv://:path", "tikv://:addr", "fdb://:addr".

- services.surrealdb.enable: Whether to enable SurrealDB, a scalable, distributed, collaborative, document-graph database, for the realtime web.
- services.surrealdb.extraFlags: Specify a list of additional command line flags.

- services.surrealdb.host: The host that surrealdb will connect to.

- services.surrealdb.package: The surrealdb package to use.
- services.surrealdb.port: The port that surrealdb will connect to.

- services.suwayomi-server.dataDir: The path to the data directory in which Suwayomi-Server will download scans.

- services.suwayomi-server.enable: Whether to enable Suwayomi, a free and open source manga reader server that runs extensions built for Tachiyomi.
- services.suwayomi-server.group: Group under which Suwayomi-Server runs.

- services.suwayomi-server.openFirewall: Whether to open the firewall for the port in {option}`services.suwayomi-server.settings.server.port`.

- services.suwayomi-server.package: The suwayomi-server package to use.
- services.suwayomi-server.settings: Configuration to write to {file}`server.conf`.
See <https://github.com/Suwayomi/Suwayomi-Server/wiki/Configuring-Suwayomi-Server> for more information.

- services.suwayomi-server.user: User account under which Suwayomi-Server runs.

- services.svnserve.enable: Whether to enable svnserve to serve Subversion repositories through the SVN protocol.
- services.svnserve.svnBaseDir: Base directory from which Subversion repositories are accessed.
- services.swapspace.enable: Whether to enable Swapspace, a dynamic swap space manager.
- services.swapspace.extraArgs: Any extra arguments to pass to swapspace
- services.swapspace.installWrapper: This will add swapspace wrapped with the generated config, to environment.systemPackages

- services.swapspace.package: The swapspace package to use.
- services.swapspace.settings: Config file for swapspace.
See the options here: <https://github.com/Tookmund/Swapspace/blob/master/swapspace.conf>

- services.switcherooControl.enable: Whether to enable switcheroo-control, a D-Bus service to check the availability of dual-GPU.
- services.switcherooControl.package: The switcheroo-control package to use.
- services.sympa.database
- services.sympa.domains: Email domains handled by this instance. There have
to be MX records for keys of this attribute set.

- services.sympa.enable: Whether to enable Sympa mailing list manager.
- services.sympa.lang: Default Sympa language.
See <https://github.com/sympa-community/sympa/tree/sympa-6.2/po/sympa>
for available options.

- services.sympa.listMasters: The list of the email addresses of the listmasters
(users authorized to perform global server commands).

- services.sympa.mainDomain: Main domain to be used in {file}`sympa.conf`.
If `null`, one of the {option}`services.sympa.domains` is chosen for you.

- services.sympa.mta
- services.sympa.settings: The {file}`sympa.conf` configuration file as key value set.
See <https://sympa-community.github.io/gpldoc/man/sympa.conf.5.html>
for list of configuration parameters.

- services.sympa.settingsFile: Set of files to be linked in {file}`/var/lib/sympa`.
- services.sympa.web.enable: Whether to enable Sympa web interface.
- services.sympa.web.fcgiProcs: Number of FastCGI processes to fork.
- services.sympa.web.https: Whether to use HTTPS. When nginx integration is enabled, this option forces SSL and enables ACME.
Please note that Sympa web interface always uses https links even when this option is disabled.

- services.sympa.web.server: The webserver used for the Sympa web interface. Set it to `none` if you want to configure it yourself.
Further nginx configuration can be done by adapting
{option}`services.nginx.virtualHosts.«name»`.

- services.synapse-auto-compressor.enable: Whether to enable synapse-auto-compressor.
- services.synapse-auto-compressor.package: The rust-synapse-state-compress package to use.
- services.synapse-auto-compressor.postgresUrl: Connection string to postgresql in the
[rust `postgres` crate config format](https://docs.rs/postgres/latest/postgres/config/struct.Config.html).
The module will attempt to build a URL-style connection string out of the `services.matrix-synapse.settings.database.args`
if a local synapse is enabled.

- services.synapse-auto-compressor.settings.chunk_size: The number of state groups to work on at once. All of the entries from `state_groups_state` are requested
from the database for state groups that are worked on. Therefore small chunk sizes may be needed on
machines with low memory.

Note: if the compressor fails to find space savings on the chunk as a whole
(which may well happen in rooms with lots of backfill in) then the entire chunk is skipped.

- services.synapse-auto-compressor.settings.chunks_to_compress: `chunks_to_compress` chunks of size `chunk_size` will be compressed. The higher this number is set to,
the longer the compressor will run for.

- services.synapse-auto-compressor.settings.levels: Sizes of each new level in the compression algorithm, as a comma-separated list. The first entry in
the list is for the lowest, most granular level, with each subsequent entry being for the next highest
level. The number of entries in the list determines the number of levels that will be used. The sum of
the sizes of the levels affects the performance of fetching the state from the database, as the sum of
the sizes is the upper bound on the number of iterations needed to fetch a given set of state.

- services.synapse-auto-compressor.startAt: How often to run this service in systemd calendar syntax (see {manpage}`systemd.time(7)`)
- services.syncoid.commands: Syncoid commands to run.
- services.syncoid.commonArgs: Arguments to add to every syncoid command, unless disabled for that
command. See
<https://github.com/jimsalterjrs/sanoid/#syncoid-command-line-options>
for available options.

- services.syncoid.enable: Whether to enable Syncoid ZFS synchronization service.
- services.syncoid.group: The group for the service.
- services.syncoid.interval: Run syncoid at this interval. The default is to run hourly.

Must be in the format described in {manpage}`systemd.time(7)`.  This is
equivalent to adding a corresponding timer unit with
{option}`OnCalendar` set to the value given here.

Set to an empty list to avoid starting syncoid automatically.

- services.syncoid.localSourceAllow: Permissions granted for the {option}`services.syncoid.user` user
for local source datasets. See
<https://openzfs.github.io/openzfs-docs/man/8/zfs-allow.8.html>
for available permissions.

- services.syncoid.localTargetAllow: Permissions granted for the {option}`services.syncoid.user` user
for local target datasets. See
<https://openzfs.github.io/openzfs-docs/man/8/zfs-allow.8.html>
for available permissions.
Make sure to include the `change-key` permission if you send raw encrypted datasets,
the `compression` permission if you send raw compressed datasets, and so on.
For remote target datasets you'll have to set your remote user permissions by yourself.

- services.syncoid.package: The sanoid package to use.
- services.syncoid.service: Systemd configuration common to all syncoid services.

- services.syncoid.sshKey: SSH private key file to use to login to the remote system. Can be
overridden in individual commands.

- services.syncoid.user: The user for the service. ZFS privilege delegation will be
automatically configured for any local pools used by syncoid if this
option is set to a user other than root. The user will be given the
"hold" and "send" privileges on any pool that has datasets being sent
and the "create", "mount", "receive", and "rollback" privileges on
any pool that has datasets being received.

- services.syncplay.certDir: TLS certificates directory to use for encryption. See
<https://github.com/Syncplay/syncplay/wiki/TLS-support>.

- services.syncplay.chat: Chat with users in the same room.

- services.syncplay.enable: If enabled, start the Syncplay server.

- services.syncplay.extraArgs: Additional arguments to be passed to the service.

- services.syncplay.group
- services.syncplay.interfaceIpv4: The IP address to bind to for IPv4. Leaving it empty defaults to using all.

- services.syncplay.interfaceIpv6: The IP address to bind to for IPv6. Leaving it empty defaults to using all.

- services.syncplay.ipv4Only: Listen only on IPv4 when strting the server.

- services.syncplay.ipv6Only: Listen only on IPv6 when strting the server.

- services.syncplay.isolateRooms: Enable room isolation.

- services.syncplay.maxChatMessageLength: Maximum number of characters in a chat message.

- services.syncplay.maxUsernameLength: Maximum number of characters in a username.

- services.syncplay.motd: Text to display when users join. The motd will be readable in the nix store
and the processlist.  If this is not intended use `motdFile` instead.
Will be overriden by {option}`services.syncplay.motdFile`.

- services.syncplay.motdFile: Path to text to display when users join.
Will override {option}`services.syncplay.motd`.

- services.syncplay.package: The syncplay-nogui package to use.
- services.syncplay.passwordFile: Path to the file that contains the server password. If
`null`, the server doesn't require a password.

- services.syncplay.permanentRooms: List of rooms that will be listed even if the room is empty.
Will be overriden by {option}`services.syncplay.permanentRoomsFile`.

- services.syncplay.permanentRoomsFile: File with list of rooms that will be listed even if the room is empty,
newline delimited.
Will override {option}`services.syncplay.permanentRooms`.

- services.syncplay.port: TCP port to bind to.

- services.syncplay.ready: Check readiness of users.

- services.syncplay.roomsDBFile: Path to SQLite database file to store room states.
Relative to the working directory provided by systemd.

- services.syncplay.salt: Salt to allow room operator passwords generated by this server
instance to still work when the server is restarted.  The salt will be
readable in the nix store and the processlist.  If this is not
intended use `saltFile` instead.  Mutually exclusive with
{option}`services.syncplay.saltFile`.

- services.syncplay.saltFile: Path to the file that contains the server salt.  This allows room
operator passwords generated by this server instance to still work
when the server is restarted.  `null`, the server doesn't load the
salt from a file.  Mutually exclusive with
{option}`services.syncplay.salt`.

- services.syncplay.statsDBFile: Path to SQLite database file to store stats.
Relative to the working directory provided by systemd.

- services.syncplay.useACMEHost: If set, use NixOS-generated ACME certificate with the specified name for TLS.

Note that it requires {option}`security.acme` to be setup, e.g., credentials provided if using DNS-01 validation.

- services.syncplay.user
- services.syncthing.all_proxy: Overwrites the all_proxy environment variable for the Syncthing process to
the given value. This is normally used to let Syncthing connect
through a SOCKS5 proxy server.
See <https://docs.syncthing.net/users/proxying.html>.

- services.syncthing.cert: Path to the `cert.pem` file, which will be copied into Syncthing's
[configDir](#opt-services.syncthing.configDir).

- services.syncthing.configDir: The path where the settings and keys will exist.

- services.syncthing.dataDir: The path where synchronised directories will exist.

- services.syncthing.databaseDir: The directory containing the database and logs.

- services.syncthing.declarative.cert: Alias of {option}`services.syncthing.cert`.
- services.syncthing.declarative.devices: Alias of {option}`services.syncthing.devices`.
- services.syncthing.declarative.extraOptions: Alias of {option}`services.syncthing.extraOptions`.
- services.syncthing.declarative.folders: Alias of {option}`services.syncthing.folders`.
- services.syncthing.declarative.key: Alias of {option}`services.syncthing.key`.
- services.syncthing.declarative.overrideDevices: Alias of {option}`services.syncthing.overrideDevices`.
- services.syncthing.declarative.overrideFolders: Alias of {option}`services.syncthing.overrideFolders`.
- services.syncthing.devices: Alias of {option}`services.syncthing.settings.devices`.
- services.syncthing.enable: Whether to enable Syncthing, a self-hosted open-source alternative to Dropbox and Bittorrent Sync.
- services.syncthing.extraFlags: Extra flags passed to the syncthing command in the service definition.

- services.syncthing.extraOptions: Alias of {option}`services.syncthing.settings`.
- services.syncthing.folders: Alias of {option}`services.syncthing.settings.folders`.
- services.syncthing.group: The group to run Syncthing under.
By default, a group named `syncthing` will be created.

- services.syncthing.guiAddress: The address to serve the web interface at.

- services.syncthing.guiPasswordFile: Path to file containing the plaintext password for Syncthing's GUI.

- services.syncthing.key: Path to the `key.pem` file, which will be copied into Syncthing's
[configDir](#opt-services.syncthing.configDir).

- services.syncthing.openDefaultPorts: Whether to open the default ports in the firewall: TCP/UDP 22000 for transfers
and UDP 21027 for discovery.

If multiple users are running Syncthing on this machine, you will need
to manually open a set of ports for each instance and leave this disabled.
Alternatively, if you are running only a single instance on this machine
using the default ports, enable this.

- services.syncthing.options: Alias of {option}`services.syncthing.settings.options`.
- services.syncthing.overrideDevices: Whether to delete the devices which are not configured via the
[devices](#opt-services.syncthing.settings.devices) option.
If set to `false`, devices added via the web
interface will persist and will have to be deleted manually.

- services.syncthing.overrideFolders: Whether to delete the folders which are not configured via the
[folders](#opt-services.syncthing.settings.folders) option.
If set to `false`, folders added via the web
interface will persist and will have to be deleted manually.

- services.syncthing.package: The syncthing package to use.
- services.syncthing.relay.enable: Whether to enable Syncthing relay service.
- services.syncthing.relay.extraOptions: Extra command line arguments to pass to strelaysrv.

- services.syncthing.relay.globalRateBps: Global bandwidth rate limit in bytes per second.

- services.syncthing.relay.listenAddress: Address to listen on for relay traffic.

- services.syncthing.relay.perSessionRateBps: Per session bandwidth rate limit in bytes per second.

- services.syncthing.relay.pools: Relay pools to join. If null, uses the default global pool.

- services.syncthing.relay.port: Port to listen on for relay traffic. This port should be added to
`networking.firewall.allowedTCPPorts`.

- services.syncthing.relay.providedBy: Human-readable description of the provider of the relay (you).

- services.syncthing.relay.statusListenAddress: Address to listen on for serving the relay status API.

- services.syncthing.relay.statusPort: Port to listen on for serving the relay status API. This port should be
added to `networking.firewall.allowedTCPPorts`.

- services.syncthing.settings: Extra configuration options for Syncthing.
See <https://docs.syncthing.net/users/config.html>.
Note that this attribute set does not exactly match the documented
xml format. Instead, this is the format of the json rest api. There
are slight differences. For example, this xml:
```xml
<options>
  <listenAddress>default</listenAddress>
  <minHomeDiskFree unit="%">1</minHomeDiskFree>
</options>
```
corresponds to the json:
```json
{
  options: {
    listenAddresses = [
      "default"
    ];
    minHomeDiskFree = {
      unit = "%";
      value = 1;
    };
  };
}
```

- services.syncthing.systemService: Whether to auto-launch Syncthing as a system service.

- services.syncthing.useInotify
- services.syncthing.user: The user to run Syncthing as.
By default, a user named `syncthing` will be created whose home
directory is [dataDir](#opt-services.syncthing.dataDir).

- services.synergy.client.autoStart: Whether the Synergy client should be started automatically.
- services.synergy.client.enable: Whether to enable the Synergy client (receive keyboard and mouse events from a Synergy server).
- services.synergy.client.screenName: Use the given name instead of the hostname to identify
ourselves to the server.

- services.synergy.client.serverAddress: The server address is of the form: [hostname][:port].  The
hostname must be the address or hostname of the server.  The
port overrides the default port, 24800.

- services.synergy.server.address: Address on which to listen for clients.
- services.synergy.server.autoStart: Whether the Synergy server should be started automatically.
- services.synergy.server.configFile: The Synergy server configuration file.
- services.synergy.server.enable: Whether to enable the Synergy server (send keyboard and mouse events).
- services.synergy.server.screenName: Use the given name instead of the hostname to identify
this screen in the configuration.

- services.synergy.server.tls.cert: The TLS certificate to use for encryption.
- services.synergy.server.tls.enable: Whether TLS encryption should be used.

Using this requires a TLS certificate that can be
generated by starting the Synergy GUI once and entering
a valid product key.

- services.syslog-ng.configHeader: The very first lines of the configuration file. Should usually contain
the syslog-ng version header.

- services.syslog-ng.enable: Whether to enable the syslog-ng daemon.

- services.syslog-ng.extraConfig: Configuration added to the end of `syslog-ng.conf`.

- services.syslog-ng.extraModulePaths: A list of paths that should be included in syslog-ng's
`--module-path` option. They should usually
end in `/lib/syslog-ng`

- services.syslog-ng.listenToJournal
- services.syslog-ng.package: The syslogng package to use.
- services.syslog-ng.serviceName
- services.syslogd.defaultConfig: The default {file}`syslog.conf` file configures a
fairly standard setup of log files, which can be extended by
means of {var}`extraConfig`.

- services.syslogd.enable: Whether to enable syslogd.  Note that systemd also logs
syslog messages, so you normally don't need to run syslogd.

- services.syslogd.enableNetworkInput: Accept logging through UDP. Option -r of {manpage}`syslogd(8)`.

- services.syslogd.extraConfig: Additional text appended to {file}`syslog.conf`,
i.e. the contents of {var}`defaultConfig`.

- services.syslogd.extraParams: Additional parameters passed to {command}`syslogd`.

- services.syslogd.tty: The tty device on which syslogd will print important log
messages. Leave this option blank to disable tty logging.

- services.sysprof.enable: Whether to enable sysprof profiling daemon.
- services.sysstat.collect-args: Arguments to pass sa1 when collecting statistics

- services.sysstat.collect-frequency: OnCalendar specification for sysstat-collect

- services.sysstat.enable: Whether to enable sar system activity collection.
- services.system-config-printer.enable: Whether to enable system-config-printer, a service for CUPS administration used by printing interfaces.
- services.system76-scheduler.assignments: Process profile assignments.
- services.system76-scheduler.enable: Whether to enable system76-scheduler.
- services.system76-scheduler.exceptions: Processes that are left alone.
- services.system76-scheduler.package: Which System76-Scheduler package to use.
- services.system76-scheduler.settings.cfsProfiles.default.bandwidth-size: `sched_cfs_bandwidth_slice_us`.
- services.system76-scheduler.settings.cfsProfiles.default.latency: `sched_latency_ns`.
- services.system76-scheduler.settings.cfsProfiles.default.nr-latency: `sched_nr_latency`.
- services.system76-scheduler.settings.cfsProfiles.default.preempt: Preemption mode.
- services.system76-scheduler.settings.cfsProfiles.default.wakeup-granularity: `sched_wakeup_granularity_ns`.
- services.system76-scheduler.settings.cfsProfiles.enable: Tweak CFS latency parameters when going on/off battery
- services.system76-scheduler.settings.cfsProfiles.responsive.bandwidth-size: `sched_cfs_bandwidth_slice_us`.
- services.system76-scheduler.settings.cfsProfiles.responsive.latency: `sched_latency_ns`.
- services.system76-scheduler.settings.cfsProfiles.responsive.nr-latency: `sched_nr_latency`.
- services.system76-scheduler.settings.cfsProfiles.responsive.preempt: Preemption mode.
- services.system76-scheduler.settings.cfsProfiles.responsive.wakeup-granularity: `sched_wakeup_granularity_ns`.
- services.system76-scheduler.settings.processScheduler.enable: Tweak scheduling of individual processes in real time.
- services.system76-scheduler.settings.processScheduler.foregroundBoost.background.class: CPU scheduler class.
- services.system76-scheduler.settings.processScheduler.foregroundBoost.background.ioClass: IO scheduler class.
- services.system76-scheduler.settings.processScheduler.foregroundBoost.background.ioPrio: IO scheduler priority.
- services.system76-scheduler.settings.processScheduler.foregroundBoost.background.matchers: Process matchers.
- services.system76-scheduler.settings.processScheduler.foregroundBoost.background.nice: Niceness.
- services.system76-scheduler.settings.processScheduler.foregroundBoost.background.prio: CPU scheduler priority.
- services.system76-scheduler.settings.processScheduler.foregroundBoost.enable: Boost foreground process priorities.

(And de-boost background ones).  Note that this option needs cooperation
from the desktop environment to work.  On Gnome the client side is
implemented by the "System76 Scheduler" shell extension.

- services.system76-scheduler.settings.processScheduler.foregroundBoost.foreground.class: CPU scheduler class.
- services.system76-scheduler.settings.processScheduler.foregroundBoost.foreground.ioClass: IO scheduler class.
- services.system76-scheduler.settings.processScheduler.foregroundBoost.foreground.ioPrio: IO scheduler priority.
- services.system76-scheduler.settings.processScheduler.foregroundBoost.foreground.matchers: Process matchers.
- services.system76-scheduler.settings.processScheduler.foregroundBoost.foreground.nice: Niceness.
- services.system76-scheduler.settings.processScheduler.foregroundBoost.foreground.prio: CPU scheduler priority.
- services.system76-scheduler.settings.processScheduler.pipewireBoost.enable: Boost Pipewire client priorities.
- services.system76-scheduler.settings.processScheduler.pipewireBoost.profile.class: CPU scheduler class.
- services.system76-scheduler.settings.processScheduler.pipewireBoost.profile.ioClass: IO scheduler class.
- services.system76-scheduler.settings.processScheduler.pipewireBoost.profile.ioPrio: IO scheduler priority.
- services.system76-scheduler.settings.processScheduler.pipewireBoost.profile.matchers: Process matchers.
- services.system76-scheduler.settings.processScheduler.pipewireBoost.profile.nice: Niceness.
- services.system76-scheduler.settings.processScheduler.pipewireBoost.profile.prio: CPU scheduler priority.
- services.system76-scheduler.settings.processScheduler.refreshInterval: Process list poll interval, in seconds
- services.system76-scheduler.settings.processScheduler.useExecsnoop: Use execsnoop (otherwise poll the precess list periodically).
- services.system76-scheduler.useStockConfig: Use the (reasonable and featureful) stock configuration.

When this option is `true`, `services.system76-scheduler.settings`
are ignored.

- services.systembus-notify.enable: Whether to enable System bus notification support

WARNING: enabling this option (while convenient) should *not* be done on a
machine where you do not trust the other users as it allows any other
local user to DoS your session by spamming notifications
.
- services.systemd-lock-handler.enable: Whether to enable systemd-lock-handler.
- services.systemd-lock-handler.package: The systemd-lock-handler package to use.
- services.szurubooru.client.package: The client package to use.
- services.szurubooru.dataDir: The path to the data directory in which Szurubooru will store its data.

- services.szurubooru.database.host: Host on which the PostgreSQL database runs.
- services.szurubooru.database.name: Name of the PostgreSQL database.
- services.szurubooru.database.passwordFile: A file containing the password for the PostgreSQL user.
- services.szurubooru.database.port: The port under which PostgreSQL listens to.
- services.szurubooru.database.user: PostgreSQL user.
- services.szurubooru.enable: Whether to enable Szurubooru, an image board engine dedicated for small and medium communities.
- services.szurubooru.group: Group under which Szurubooru runs.

- services.szurubooru.openFirewall: Whether to open the firewall for the port in {option}`services.szurubooru.server.port`.

- services.szurubooru.server.package: The server package to use.
- services.szurubooru.server.port: Port to expose HTTP service.

- services.szurubooru.server.settings: Configuration to write to {file}`config.yaml`.
See <https://github.com/rr-/szurubooru/blob/master/server/config.yaml.dist> for more information.

- services.szurubooru.server.threads: Number of waitress threads to start.
- services.szurubooru.user: User account under which Szurubooru runs.

- services.tabby.acceleration: Specifies the device to use for hardware acceleration.

-   `cpu`: no acceleration just use the CPU
-  `rocm`: supported by modern AMD GPUs
-  `cuda`: supported by modern NVIDIA GPUs
- `metal`: supported on darwin aarch64 machines

Tabby will try and determine what type of acceleration that is
already enabled in your configuration when `acceleration = null`.

- nixpkgs.config.cudaSupport
- nixpkgs.config.rocmSupport
- if stdenv.hostPlatform.isDarwin && stdenv.hostPlatform.isAarch64

IFF multiple acceleration methods are found to be enabled or if you
haven't set either `cudaSupport or rocmSupport` you will have to
specify the device type manually here otherwise it will default to
the first from the list above or to cpu.

- services.tabby.enable: Whether to enable Self-hosted AI coding assistant using large language models.
- services.tabby.host: Specifies the hostname on which the tabby server HTTP interface listens.

- services.tabby.indexInterval
- services.tabby.model: Specify the model that tabby will use to generate completions.

This model will be downloaded automatically if it is not already present.

If you want to utilize an existing model that you've already
downloaded you'll need to move it into tabby's state directory which
lives in `/var/lib/tabby`. Because the tabby.service is configured to
use a DynamicUser the service will need to have been started at least
once before you can move the locally existing model into
`/var/lib/tabby`. You can set the model to 'none' and tabby will
startup and fail to download a model, but will have created the
`/var/lib/tabby` directory. You can then copy over the model manually
into `/var/lib/tabby`, update the model option to the name you just
downloaded and copied over then `nixos-rebuild switch` to start using
it.

$ tabby download --model TabbyML/DeepseekCoder-6.7B
$ find ~/.tabby/ | tail -n1
/home/ghthor/.tabby/models/TabbyML/DeepseekCoder-6.7B/ggml/q8_0.v2.gguf
$ sudo rsync -r ~/.tabby/models/ /var/lib/tabby/models/
$ sudo chown -R tabby:tabby /var/lib/tabby/models/

See for Model Options:
> <https://github.com/TabbyML/registry-tabby>

- services.tabby.package: The tabby package to use.
- services.tabby.port: Specifies the bind port on which the tabby server HTTP interface listens.

- services.tabby.usageCollection: Enable sending anonymous usage data.

See for more details:
> <https://tabby.tabbyml.com/docs/configuration#usage-collection>

- services.tahoe.introducers: The Tahoe introducers.

- services.tahoe.nodes: The Tahoe nodes.

- services.tailscale.authKeyFile: A file containing the auth key.
Tailscale will be automatically started if provided.

Services that bind to Tailscale IPs should order using {option}`systemd.services.<name>.after` `tailscaled-autoconnect.service`.

- services.tailscale.authKeyParameters: Extra parameters to pass after the auth key.
See <https://tailscale.com/kb/1215/oauth-clients#registering-new-nodes-using-oauth-credentials>

- services.tailscale.derper.configureNginx: Whether to enable nginx reverse proxy for derper.
When enabled, nginx will proxy requests to the derper service.

- services.tailscale.derper.domain: Domain name under which the derper server is reachable.
- services.tailscale.derper.enable: Whether to enable Tailscale Derper. See upstream doc <https://tailscale.com/kb/1118/custom-derp-servers> how to configure it on clients.
- services.tailscale.derper.openFirewall: Whether to open the firewall for the specified port.
Derper requires the used ports to be opened, otherwise it doesn't work as expected.

- services.tailscale.derper.package: The derper package to use.
- services.tailscale.derper.port: The port the derper process will listen on. This is not the port tailscale will connect to.
- services.tailscale.derper.stunPort: STUN port to listen on.
See online docs <https://tailscale.com/kb/1118/custom-derp-servers#prerequisites> on how to configure a different external port.

- services.tailscale.derper.verifyClients: Whether to verify clients against a locally running tailscale daemon if they are allowed to connect to this node or not.

- services.tailscale.disableTaildrop: Whether to disable the Taildrop feature for sending files between nodes.
- services.tailscale.disableUpstreamLogging: Whether to disable Tailscaled from sending debug logging upstream.
- services.tailscale.enable: Whether to enable Tailscale client daemon.
- services.tailscale.extraDaemonFlags: Extra flags to pass to {command}`tailscaled`.
- services.tailscale.extraSetFlags: Extra flags to pass to {command}`tailscale set`.
- services.tailscale.extraUpFlags: Extra flags to pass to {command}`tailscale up`. Only applied if {option}`services.tailscale.authKeyFile` is specified.

- services.tailscale.interfaceName: The interface name for tunnel traffic. Use "userspace-networking" (beta) to not use TUN.
- services.tailscale.openFirewall: Whether to open the firewall for the specified port.
- services.tailscale.package: The tailscale package to use.
- services.tailscale.permitCertUid: Username or user ID of the user allowed to to fetch Tailscale TLS certificates for the node.
- services.tailscale.port: The port to listen on for tunnel traffic (0=autoselect).
- services.tailscale.useRoutingFeatures: Enables settings required for Tailscale's routing features like subnet routers and exit nodes.

To use these these features, you will still need to call `sudo tailscale up` with the relevant flags like `--advertise-exit-node` and `--exit-node`.

When set to `client` or `both`, reverse path filtering will be set to loose instead of strict.
When set to `server` or `both`, IP forwarding will be enabled.

- services.tailscaleAuth.enable: Whether to enable tailscale.nginx-auth, to authenticate users via tailscale.
- services.tailscaleAuth.group: Group which runs tailscale-nginx-auth
- services.tailscaleAuth.package: The tailscale-nginx-auth package to use.
- services.tailscaleAuth.socketPath: Path of the socket listening to authorization requests.

- services.tailscaleAuth.user: User which runs tailscale-nginx-auth
- services.taler.enable: Whether to enable the GNU Taler system.
- services.taler.exchange.debug: Whether to enable debug logging.
- services.taler.exchange.denominationConfig: This option configures the cash denomination for the coins that the exchange offers.
For more information, consult the [upstream docs](https://docs.taler.net/taler-exchange-manual.html#coins-denomination-keys).

You can either write these manually or you can use the `taler-harness deployment gen-coin-config`
command to generate it.

Warning: Do not modify existing denominations after deployment.
Please see the upstream docs for how to safely do that.

- services.taler.exchange.enable: Whether to enable the GNU Taler exchange.
- services.taler.exchange.openFirewall: Whether to open ports in the firewall
- services.taler.exchange.package: The taler-exchange package to use.
- services.taler.exchange.settings: Configuration options for the taler exchange config file.

For a list of all possible options, please see the man page [`taler-exchange.conf(5)`](https://docs.taler.net/manpages/taler-exchange.conf.5.html)

- services.taler.includes: Files to include into the config file using Taler's `@inline@` directive.

This allows including arbitrary INI files, including imperatively managed ones.

- services.taler.merchant.debug: Whether to enable debug logging.
- services.taler.merchant.enable: Whether to enable the GNU Taler merchant.
- services.taler.merchant.openFirewall: Whether to open ports in the firewall
- services.taler.merchant.package: The taler-merchant package to use.
- services.taler.merchant.settings: Configuration options for the taler merchant config file.

For a list of all possible options, please see the man page [`taler-merchant.conf(5)`](https://docs.taler.net/manpages/taler-merchant.conf.5.html)

- services.taler.runtimeDir: Runtime directory shared between the taler services.

Crypto helpers put their sockets here for instance and the httpd
connects to them.

- services.taler.settings: Global configuration options for the taler config file.

For a list of all possible options, please see the man page [`taler.conf(5)`](https://docs.taler.net/manpages/taler.conf.5.html)

- services.tandoor-recipes.address: Web interface address.
- services.tandoor-recipes.database.createLocally: Configure local PostgreSQL database server for Tandoor Recipes.

- services.tandoor-recipes.enable: Enable Tandoor Recipes.

When started, the Tandoor Recipes database is automatically created if
it doesn't exist and updated if the package has changed. Both tasks are
achieved by running a Django migration.

A script to manage the instance (by wrapping Django's manage.py) is linked to
`/var/lib/tandoor-recipes/tandoor-recipes-manage`.

- services.tandoor-recipes.extraConfig: Extra tandoor recipes config options.

See [the example dot-env file](https://raw.githubusercontent.com/vabene1111/recipes/master/.env.template)
for available options.

- services.tandoor-recipes.group: Group under which Tandoor runs.
- services.tandoor-recipes.package: The tandoor-recipes package to use.
- services.tandoor-recipes.port: Web interface port.
- services.tandoor-recipes.user: User account under which Tandoor runs.
- services.tang.enable: Whether to enable tang.
- services.tang.ipAddressAllow: Whitelist a list of address prefixes.
Preferably, internal addresses should be used.

- services.tang.listenStream: Addresses and/or ports on which tang should listen.
For detailed syntax see ListenStream in {manpage}`systemd.socket(5)`.

- services.tang.package: The tang package to use.
- services.target.config: Content of /etc/target/saveconfig.json
This file is normally read and written by targetcli

- services.target.enable: Whether to enable the kernel's LIO iscsi target.
- services.tarsnap.archives: Tarsnap archive configurations. Each attribute names an archive
to be created at a given time interval, according to the options
associated with it. When uploading to the tarsnap server,
archive names are suffixed by a 1 second resolution timestamp,
with the format `%Y%m%d%H%M%S`.

For each member of the set is created a timer which triggers the
instanced `tarsnap-archive-name` service unit. You may use
{command}`systemctl start tarsnap-archive-name` to
manually trigger creation of `archive-name` at
any time.

- services.tarsnap.cachedir
- services.tarsnap.enable: Whether to enable periodic tarsnap backups.
- services.tarsnap.keyfile: The keyfile which associates this machine with your tarsnap
account.
Create the keyfile with {command}`tarsnap-keygen`.

Note that each individual archive (specified below) may also have its
own individual keyfile specified. Tarsnap does not allow multiple
concurrent backups with the same cache directory and key (starting a
new backup will cause another one to fail). If you have multiple
archives specified, you should either spread out your backups to be
far apart, or specify a separate key for each archive. By default
every archive defaults to using
`"/root/tarsnap.key"`.

It's recommended for backups that you generate a key for every archive
using {manpage}`tarsnap-keygen(1)`, and then generate a
write-only tarsnap key using {manpage}`tarsnap-keymgmt(1)`,
and keep your master key(s) for a particular machine off-site.

The keyfile name should be given as a string and not a path, to
avoid the key being copied into the Nix store.

- services.tarsnap.package: The tarsnap package to use.
- services.taskchampion-sync-server.allowClientIds: Client IDs to allow (can be repeated; if not specified, all clients are allowed)
- services.taskchampion-sync-server.dataDir: Directory in which to store data
- services.taskchampion-sync-server.enable: Whether to enable TaskChampion Sync Server for Taskwarrior 3.
- services.taskchampion-sync-server.group: Unix Group to run the server under
- services.taskchampion-sync-server.host: Host address on which to serve
- services.taskchampion-sync-server.openFirewall: Whether to enable Open firewall port for taskchampion-sync-server.
- services.taskchampion-sync-server.package: The taskchampion-sync-server package to use.
- services.taskchampion-sync-server.port: Port on which to serve
- services.taskchampion-sync-server.snapshot.days: Target number of days between snapshots
- services.taskchampion-sync-server.snapshot.versions: Target number of versions between snapshots
- services.taskchampion-sync-server.user: Unix User to run the server under
- services.taskserver.allowedClientIDs: A list of regular expressions that are matched against the reported
client id (such as `task 2.3.0`).

The values `all` or `none` have
special meaning. Overridden by any entry in the option
{option}`services.taskserver.disallowedClientIDs`.

- services.taskserver.ciphers: List of GnuTLS ciphers to use. See the GnuTLS documentation about
priority strings at <https://gnutls.org/manual/html_node/Priority-Strings.html> for full details.

- services.taskserver.config: Configuration options to pass to Taskserver.

The options here are the same as described in
{manpage}`taskdrc(5)` from the `taskwarrior2` package, but with one difference:

The `server` option is
`server.listen` here, because the
`server` option would collide with other options
like `server.cert` and we would run in a type error
(attribute set versus string).

Nix types like integers or booleans are automatically converted to
the right values Taskserver would expect.

- services.taskserver.confirmation: Determines whether certain commands are confirmed.

- services.taskserver.dataDir: Data directory for Taskserver.
- services.taskserver.debug: Logs debugging information.

- services.taskserver.disallowedClientIDs: A list of regular expressions that are matched against the reported
client id (such as `task 2.3.0`).

The values `all` or `none` have
special meaning. Any entry here overrides those in
{option}`services.taskserver.allowedClientIDs`.

- services.taskserver.enable: Whether to enable the Taskwarrior 2 server.

More instructions about NixOS in conjunction with Taskserver can be
found [in the NixOS manual](https://nixos.org/manual/nixos/stable/index.html#module-services-taskserver).

- services.taskserver.extensions: Fully qualified path of the Taskserver extension scripts.
Currently there are none.

- services.taskserver.extraConfig
- services.taskserver.fqdn: The fully qualified domain name of this server, which is also used
as the common name in the certificates.

- services.taskserver.group: Group for Taskserver.
- services.taskserver.ipLog: Logs the IP addresses of incoming requests.

- services.taskserver.listenHost: The address (IPv4, IPv6 or DNS) to listen on.

- services.taskserver.listenPort: Port number of the Taskserver.

- services.taskserver.openFirewall: Whether to open the firewall for the specified Taskserver port.

- services.taskserver.organisations: An attribute set where the keys name the organisation and the values
are a set of lists of {option}`users` and
{option}`groups`.

- services.taskserver.pki.auto.bits: The bit size for generated keys.

::: {.note}
This option is for the automatically handled CA and will be ignored if any
of the {option}`services.taskserver.pki.manual.*` options are set.
:::

- services.taskserver.pki.auto.expiration.ca: The expiration time of the CA certificate in days or `null` for no
expiration time.


::: {.note}
This option is for the automatically handled CA and will be ignored if any
of the {option}`services.taskserver.pki.manual.*` options are set.
:::

- services.taskserver.pki.auto.expiration.client: The expiration time of client certificates in days or `null` for no
expiration time.


::: {.note}
This option is for the automatically handled CA and will be ignored if any
of the {option}`services.taskserver.pki.manual.*` options are set.
:::

- services.taskserver.pki.auto.expiration.crl: The expiration time of the certificate revocation list (CRL) in days or `null` for no
expiration time.


::: {.note}
This option is for the automatically handled CA and will be ignored if any
of the {option}`services.taskserver.pki.manual.*` options are set.
:::

- services.taskserver.pki.auto.expiration.server: The expiration time of the server certificate in days or `null` for no
expiration time.


::: {.note}
This option is for the automatically handled CA and will be ignored if any
of the {option}`services.taskserver.pki.manual.*` options are set.
:::

- services.taskserver.pki.manual.ca.cert: Fully qualified path to the CA certificate.


::: {.note}
Setting this option will prevent automatic CA creation and handling.
:::

- services.taskserver.pki.manual.server.cert: Fully qualified path to the server certificate.


::: {.note}
Setting this option will prevent automatic CA creation and handling.
:::

- services.taskserver.pki.manual.server.crl: Fully qualified path to the server certificate revocation list.


::: {.note}
Setting this option will prevent automatic CA creation and handling.
:::

- services.taskserver.pki.manual.server.key: Fully qualified path to the server key.


::: {.note}
Setting this option will prevent automatic CA creation and handling.
:::

- services.taskserver.queueSize: Size of the connection backlog, see {manpage}`listen(2)`.

- services.taskserver.requestLimit: Size limit of incoming requests, in bytes.

- services.taskserver.trust: Determines how client certificates are validated.

The value `allow all` performs no client
certificate validation. This is not recommended. The value
`strict` causes the client certificate to be
validated against a CA.

- services.taskserver.user: User for Taskserver.
- services.tautulli.configFile: The location of Tautulli's config file.
- services.tautulli.dataDir: The directory where Tautulli stores its data files.
- services.tautulli.enable: Whether to enable Tautulli Plex Monitor.
- services.tautulli.group: Group under which Tautulli runs.
- services.tautulli.openFirewall: Open ports in the firewall for Tautulli.
- services.tautulli.package: The tautulli package to use.
- services.tautulli.port: TCP port where Tautulli listens.
- services.tautulli.user: User account under which Tautulli runs.
- services.tayga.dataDir: Directory for persistent data.
- services.tayga.enable: Whether to enable Tayga.
- services.tayga.ipv4: IPv4-specific configuration.
- services.tayga.ipv6: IPv6-specific configuration.
- services.tayga.log: Packet errors to log (drop, reject, icmp, self)
- services.tayga.mappings: Static IPv4 -> IPv6 host mappings.
- services.tayga.package: The tayga package to use.
- services.tayga.tunDevice: Name of the nat64 tun device.
- services.tayga.wkpfStrict: Enable restrictions on the use of the well-known prefix (64:ff9b::/96) - prevents translation of non-global IPv4 ranges when using the well-known prefix. Must be enabled for RFC 6052 compatibility.
- services.tcsd.conformanceCred: Path to the conformance credential for your TPM.
See also the platformCred option
- services.tcsd.enable: Whether to enable tcsd, a Trusted Computing management service
that provides TCG Software Stack (TSS).  The tcsd daemon is
the only portal to the Trusted Platform Module (TPM), a hardware
chip on the motherboard.

- services.tcsd.endorsementCred: Path to the endorsement credential for your TPM.
See also the platformCred option
- services.tcsd.firmwarePCRs: PCR indices used in the TPM for firmware measurements.
- services.tcsd.group: Group account under which tcsd runs.
- services.tcsd.kernelPCRs: PCR indices used in the TPM for kernel measurements.
- services.tcsd.platformCred: Path to the platform credential for your TPM. Your TPM
manufacturer may have provided you with a set of credentials
(certificates) that should be used when creating identities
using your TPM. When a user of your TPM makes an identity,
this credential will be encrypted as part of that process.
See the 1.1b TPM Main specification section 9.3 for information
on this process. 
- services.tcsd.stateDir: The location of the system persistent storage file.
The system persistent storage file holds keys and data across
restarts of the TCSD and system reboots.

- services.tcsd.user: User account under which tcsd runs.
- services.teamspeak3.dataDir: Directory to store TS3 database and other state/data files.

- services.teamspeak3.defaultVoicePort: Default UDP port for clients to connect to virtual servers - used for first virtual server, subsequent ones will open on incrementing port numbers by default.

- services.teamspeak3.enable: Whether to run the Teamspeak3 voice communication server daemon.

- services.teamspeak3.fileTransferIP: IP on which the server instance will listen for incoming file transfer connections. Defaults to any IP.

- services.teamspeak3.fileTransferPort: TCP port opened for file transfers.

- services.teamspeak3.logPath: Directory to store log files in.

- services.teamspeak3.openFirewall: Open ports in the firewall for the TeamSpeak3 server.
- services.teamspeak3.openFirewallServerQuery: Open ports in the firewall for the TeamSpeak3 serverquery (administration) system. Requires openFirewall.
- services.teamspeak3.queryHttpPort: TCP port opened for ServerQuery connections using the HTTP protocol.

- services.teamspeak3.queryIP: IP on which the server instance will listen for incoming ServerQuery connections. Defaults to any IP.

- services.teamspeak3.queryPort: TCP port opened for ServerQuery connections using the raw telnet protocol.

- services.teamspeak3.querySshPort: TCP port opened for ServerQuery connections using the SSH protocol.

- services.teamspeak3.voiceIP: IP on which the server instance will listen for incoming voice connections. Defaults to any IP.

- services.teamviewer.enable: Whether to enable TeamViewer daemon & system package.
- services.teamviewer.package: The teamviewer package to use.
- services.technitium-dns-server.enable: Whether to enable Technitium DNS Server.
- services.technitium-dns-server.firewallTCPPorts: List of TCP ports to open in firewall.
You might want to open ports 443 and 853 if you intend to use DNS over HTTPS or DNS over TLS.

- services.technitium-dns-server.firewallUDPPorts: List of UDP ports to open in firewall.

- services.technitium-dns-server.openFirewall: Whether to open ports in the firewall.
Standard ports are 53 (UDP and TCP, for DNS), 5380 and 53443 (TCP, HTTP and HTTPS for web interface).
Specify different or additional ports in options firewallUDPPorts and firewallTCPPorts if necessary.

- services.technitium-dns-server.package: The technitium-dns-server package to use.
- services.tedicross
- services.tee-supplicant.enable: Whether to enable OP-TEE userspace supplicant.
- services.tee-supplicant.package: The optee-client package to use.
- services.tee-supplicant.pluginPath: The directory where plugins will be loaded from on startup.

- services.tee-supplicant.reeFsParentPath: The directory where the secure filesystem will be stored in the rich
execution environment (REE FS).

- services.tee-supplicant.trustedApplications: A list of full paths to trusted applications that will be loaded at
runtime by tee-supplicant.

- services.teeworlds.enable: Whether to enable Teeworlds Server.
- services.teeworlds.environmentFile: Environment file as defined in {manpage}`systemd.exec(5)`.

Secrets may be passed to the service without adding them to the world-readable
Nix store, by specifying placeholder variables as the option value in Nix and
setting these variables accordingly in the environment file.

```
  # snippet of teeworlds-related config
  services.teeworlds.password = "$TEEWORLDS_PASSWORD";
```

```
  # content of the environment file
  TEEWORLDS_PASSWORD=verysecretpassword
```

Note that this file needs to be available on the host on which
`teeworlds` is running.

- services.teeworlds.extraOptions: Extra configuration lines for the {file}`teeworlds.cfg`. See [Teeworlds Documentation](https://www.teeworlds.com/?page=docs&wiki=server_settings).

- services.teeworlds.game.enablePowerups: Whether to allow powerups such as the ninja.

- services.teeworlds.game.enableReadyMode: Whether to enable "ready mode"; where players can pause/unpause the game
and start the game in warmup, using their ready state.

- services.teeworlds.game.enableTeamDamage: Whether to enable team damage; whether to allow team mates to inflict damage on one another.

- services.teeworlds.game.enableVoteKick: Whether to enable voting to kick players.

- services.teeworlds.game.gameType: The game type to use on the server.

The default gametypes are `dm`, `tdm`, `ctf`, `lms`, and `lts`.

- services.teeworlds.game.map: The map to use on the server.

- services.teeworlds.game.playerSlots: The amount of slots to reserve for players (as opposed to spectators).

- services.teeworlds.game.restrictSpectators: Whether to restrict access to information such as health, ammo and armour in spectator mode.

- services.teeworlds.game.scoreLimit: The score limit needed to win a round.

- services.teeworlds.game.swapTeams: Whether to swap teams each round.

- services.teeworlds.game.timeLimit: Time limit of the game. In cases of equal points, there will be sudden death.
Setting this to 0 disables a time limit.

- services.teeworlds.game.tournamentMode: Whether to enable tournament mode. In tournament mode, players join as spectators.
If this is set to `restrictSpectators`, tournament mode is enabled but spectator chat is restricted.

- services.teeworlds.game.voteKickBanTime: The amount of minutes that a player is banned for if they get kicked by a vote.

- services.teeworlds.game.voteKickMinimumPlayers: The minimum amount of players required to start a kick vote.

- services.teeworlds.motd: The server's message of the day text.

- services.teeworlds.name: Name of the server.

- services.teeworlds.openPorts: Whether to open firewall ports for Teeworlds.
- services.teeworlds.package: The teeworlds-server package to use.
- services.teeworlds.password: Password to connect to the server.

- services.teeworlds.port: Port the server will listen on.

- services.teeworlds.rconPassword: Password to access the remote console. If not set, a randomly generated one is displayed in the server log.

- services.teeworlds.register: Whether the server registers as a public server in the global server list. This is disabled by default for privacy reasons.

- services.teeworlds.server.bindAddr: The address the server will bind to.

- services.teeworlds.server.enableHighBandwidth: Whether to enable high bandwidth mode on LAN servers. This will double the amount of bandwidth required for running the server.

- services.teeworlds.server.enableSpamProtection: Whether to enable chat spam protection.

- services.teeworlds.server.hostName: Hostname for the server.

- services.teeworlds.server.inactivePenalty: Specify what to do when a client goes inactive (see [](#opt-services.teeworlds.server.inactiveTime)).

- `spectator`: send the client into spectator mode

- `spectator/kick`: send the client into a free spectator slot, otherwise kick the client

- `kick`: kick the client

- services.teeworlds.server.inactiveTime: The amount of minutes a client has to idle before it is considered inactive.

- services.teeworlds.server.kickInactiveSpectators: Whether to kick inactive spectators.

- services.teeworlds.server.maxClients: The maximum amount of clients that can be connected to the server at the same time.

- services.teeworlds.server.maxClientsPerIP: The maximum amount of clients with the same IP address that can be connected to the server at the same time.

- services.teeworlds.server.skillLevel: The skill level shown in the server browser.

- services.telegraf.enable: Whether to enable telegraf server.
- services.telegraf.environmentFiles: File to load as environment file. Environment variables from this file
will be interpolated into the config file using envsubst with this
syntax: `$ENVIRONMENT` or `${VARIABLE}`.
This is useful to avoid putting secrets into the nix store.

- services.telegraf.extraConfig: Extra configuration options for telegraf
- services.telegraf.package: The telegraf package to use.
- services.telepathy.enable: Whether to enable Telepathy service, a communications framework
that enables real-time communication via pluggable protocol backends.

- services.teleport.diag.addr: Metrics and diagnostics address.
- services.teleport.diag.enable: Whether to enable endpoints for monitoring purposes.

See <https://goteleport.com/docs/setup/admin/troubleshooting/#troubleshooting/>
.
- services.teleport.diag.port: Metrics and diagnostics port.
- services.teleport.enable: Whether to enable the Teleport service.
- services.teleport.insecure.enable: Whether to enable starting teleport in insecure mode.

This is dangerous!
Sensitive information will be logged to console and certificates will not be verified.
Proceed with caution!

Teleport starts with disabled certificate validation on Proxy Service, validation still occurs on Auth Service
.
- services.teleport.package: The teleport package to use.
- services.teleport.settings: Contents of the `teleport.yaml` config file.
The `--config` arguments will only be passed if this set is not empty.

See <https://goteleport.com/docs/setup/reference/config/>.

- services.tempo.configFile: Specify a path to a configuration file that Tempo should use.

- services.tempo.enable: Whether to enable Grafana Tempo.
- services.tempo.extraFlags: Additional flags to pass to the `ExecStart=` in `tempo.service`.

- services.tempo.settings: Specify the configuration for Tempo in Nix.

See <https://grafana.com/docs/tempo/latest/configuration/> for available options.

- services.temporal.dataDir: Data directory for Temporal. If you change this, you need to
manually create the directory. You also need to create the
`temporal` user and group, or change
[](#opt-services.temporal.user) and
[](#opt-services.temporal.group) to existing ones with
access to the directory.

- services.temporal.enable: Whether to enable Temporal.
- services.temporal.group: The group temporal runs as. Should be left at default unless
you have very specific needs.

- services.temporal.package: The Temporal package to use.
- services.temporal.restartIfChanged: Automatically restart the service on config change.
This can be set to false to defer restarts on a server or cluster.
Please consider the security implications of inadvertently running an older version,
and the possibility of unexpected behavior caused by inconsistent versions across a cluster when disabling this option.

- services.temporal.settings: Temporal configuration.

See <https://docs.temporal.io/references/configuration> for more
information about Temporal configuration options

- services.temporal.user: The user Temporal runs as. Should be left at default unless
you have very specific needs.

- services.terraria.autoCreatedWorldSize: Specifies the size of the auto-created world if `worldPath` does not
point to an existing world.

- services.terraria.banListPath: The path to the ban list.

- services.terraria.dataDir: Path to variable state data directory for terraria.
- services.terraria.enable: If enabled, starts a Terraria server. The server can be connected to via `tmux -S ${config.services.terraria.dataDir}/terraria.sock attach`
for administration by users who are a part of the `terraria` group (use `C-b d` shortcut to detach again).

- services.terraria.maxPlayers: Sets the max number of players (between 1 and 255).

- services.terraria.messageOfTheDay: Set the server message of the day text.

- services.terraria.noUPnP: Disables automatic Universal Plug and Play.
- services.terraria.openFirewall: Whether to open ports in the firewall
- services.terraria.password: Sets the server password. Leave `null` for no password.

- services.terraria.port: Specifies the port to listen on.

- services.terraria.secure: Adds additional cheat protection to the server.
- services.terraria.worldPath: The path to the world file (`.wld`) which should be loaded.
If no world exists at this path, one will be created with the size
specified by `autoCreatedWorldSize`.

- services.tetrd.enable: Whether to enable tetrd.
- services.tftpd.enable: Whether to enable tftpd, a Trivial File Transfer Protocol server.
The server will be run as an xinetd service.

- services.tftpd.path: Where the tftp server files are stored.

- services.thanos.compact.arguments: Arguments to the `thanos compact` command.

Defaults to a list of arguments formed by converting the structured
options of {option}`services.thanos.compact` to a list of arguments.

Overriding this option will cause none of the structured options to have
any effect. So only set this if you know what you're doing!

- services.thanos.compact.compact.concurrency: Number of goroutines to use when compacting groups.

Defaults to `1` in Thanos
when set to `null`.

- services.thanos.compact.consistency-delay: Minimum age of fresh (non-compacted) blocks before they are being
processed. Malformed blocks older than the maximum of consistency-delay
and 30m0s will be removed.

Defaults to `30m` in Thanos
when set to `null`.

- services.thanos.compact.downsampling.disable: Disables downsampling.

This is not recommended as querying long time ranges without
non-downsampled data is not efficient and useful e.g it is not possible
to render all samples for a human eye anyway

- services.thanos.compact.enable: Whether to enable the Thanos compactor which continuously compacts blocks in an object store bucket.
- services.thanos.compact.http-address: Listen `host:port` for HTTP endpoints.

Defaults to `0.0.0.0:10902` in Thanos
when set to `null`.

- services.thanos.compact.log.format: Log format to use.

- services.thanos.compact.log.level: Log filtering level.

Defaults to `info` in Thanos
when set to `null`.

- services.thanos.compact.objstore.config: Object store configuration.

When not `null` the attribute set gets converted to
a YAML file and stored in the Nix store. The option
{option}`objstore.config-file` will default to its path.

If {option}`objstore.config-file` is set this option has no effect.

See format details: <https://thanos.io/tip/thanos/storage.md/#configuring-access-to-object-storage>

- services.thanos.compact.objstore.config-file: Path to YAML file that contains object store configuration.

See format details: <https://thanos.io/tip/thanos/storage.md/#configuring-access-to-object-storage>

- services.thanos.compact.retention.resolution-1h: How long to retain samples of resolution 2 (1 hour) in bucket.

`0d` - disables this retention

Defaults to `0d` in Thanos
when set to `null`.

- services.thanos.compact.retention.resolution-5m: How long to retain samples of resolution 1 (5 minutes) in bucket.

`0d` - disables this retention

Defaults to `0d` in Thanos
when set to `null`.

- services.thanos.compact.retention.resolution-raw: How long to retain raw samples in bucket.

`0d` - disables this retention

Defaults to `0d` in Thanos
when set to `null`.

- services.thanos.compact.startAt: When this option is set to a `systemd.time`
specification the Thanos compactor will run at the specified period.

When this option is `null` the Thanos compactor service
will run continuously. So it will not exit after all compactions have
been processed but wait for new work.

- services.thanos.compact.stateDir: Data directory relative to `/var/lib`
in which to cache blocks and process compactions.

- services.thanos.compact.tracing.config: Tracing configuration.

When not `null` the attribute set gets converted to
a YAML file and stored in the Nix store. The option
{option}`tracing.config-file` will default to its path.

If {option}`tracing.config-file` is set this option has no effect.

See format details: <https://thanos.io/tip/thanos/tracing.md/#configuration>

- services.thanos.compact.tracing.config-file: Path to YAML file that contains tracing configuration.

See format details: <https://thanos.io/tip/thanos/tracing.md/#configuration>

- services.thanos.downsample.arguments: Arguments to the `thanos downsample` command.

Defaults to a list of arguments formed by converting the structured
options of {option}`services.thanos.downsample` to a list of arguments.

Overriding this option will cause none of the structured options to have
any effect. So only set this if you know what you're doing!

- services.thanos.downsample.enable: Whether to enable the Thanos downsampler which continuously downsamples blocks in an object store bucket.
- services.thanos.downsample.log.format: Log format to use.

- services.thanos.downsample.log.level: Log filtering level.

Defaults to `info` in Thanos
when set to `null`.

- services.thanos.downsample.objstore.config: Object store configuration.

When not `null` the attribute set gets converted to
a YAML file and stored in the Nix store. The option
{option}`objstore.config-file` will default to its path.

If {option}`objstore.config-file` is set this option has no effect.

See format details: <https://thanos.io/tip/thanos/storage.md/#configuring-access-to-object-storage>

- services.thanos.downsample.objstore.config-file: Path to YAML file that contains object store configuration.

See format details: <https://thanos.io/tip/thanos/storage.md/#configuring-access-to-object-storage>

- services.thanos.downsample.stateDir: Data directory relative to `/var/lib`
in which to cache blocks and process downsamplings.

- services.thanos.downsample.tracing.config: Tracing configuration.

When not `null` the attribute set gets converted to
a YAML file and stored in the Nix store. The option
{option}`tracing.config-file` will default to its path.

If {option}`tracing.config-file` is set this option has no effect.

See format details: <https://thanos.io/tip/thanos/tracing.md/#configuration>

- services.thanos.downsample.tracing.config-file: Path to YAML file that contains tracing configuration.

See format details: <https://thanos.io/tip/thanos/tracing.md/#configuration>

- services.thanos.package: The thanos package to use.
- services.thanos.query.arguments: Arguments to the `thanos query` command.

Defaults to a list of arguments formed by converting the structured
options of {option}`services.thanos.query` to a list of arguments.

Overriding this option will cause none of the structured options to have
any effect. So only set this if you know what you're doing!

- services.thanos.query.enable: Whether to enable the Thanos query node exposing PromQL enabled Query API with data retrieved from multiple store nodes.
- services.thanos.query.endpoints: Addresses of statically configured Thanos API servers (repeatable).

The scheme may be prefixed with 'dns+' or 'dnssrv+' to detect
Thanos API servers through respective DNS lookups.

- services.thanos.query.grpc-address: Listen `ip:port` address for gRPC endpoints (StoreAPI).

Make sure this address is routable from other components.

Defaults to `0.0.0.0:10901` in Thanos
when set to `null`.

- services.thanos.query.grpc-client-server-name: Server name to verify the hostname on the returned gRPC certificates.
See <https://tools.ietf.org/html/rfc4366#section-3.1>

- services.thanos.query.grpc-client-tls-ca: TLS CA Certificates to use to verify gRPC servers

- services.thanos.query.grpc-client-tls-cert: TLS Certificates to use to identify this client to the server

- services.thanos.query.grpc-client-tls-key: TLS Key for the client's certificate

- services.thanos.query.grpc-client-tls-secure: Use TLS when talking to the gRPC server

- services.thanos.query.grpc-compression: Compression algorithm to use for gRPC requests to other clients.

- services.thanos.query.grpc-server-tls-cert: TLS Certificate for gRPC server, leave blank to disable TLS

- services.thanos.query.grpc-server-tls-client-ca: TLS CA to verify clients against.

If no client CA is specified, there is no client verification on server side.
(tls.NoClientCert)

- services.thanos.query.grpc-server-tls-key: TLS Key for the gRPC server, leave blank to disable TLS

- services.thanos.query.http-address: Listen `host:port` for HTTP endpoints.

Defaults to `0.0.0.0:10902` in Thanos
when set to `null`.

- services.thanos.query.log.format: Log format to use.

- services.thanos.query.log.level: Log filtering level.

Defaults to `info` in Thanos
when set to `null`.

- services.thanos.query.query.auto-downsampling: Enable automatic adjustment (step / 5) to what source of data should
be used in store gateways if no
`max_source_resolution` param is specified.

- services.thanos.query.query.default-evaluation-interval: Set default evaluation interval for sub queries.

Defaults to `1m` in Thanos
when set to `null`.

- services.thanos.query.query.max-concurrent: Maximum number of queries processed concurrently by query node.

Defaults to `20` in Thanos
when set to `null`.

- services.thanos.query.query.partial-response: Enable partial response for queries if no
`partial_response` param is specified.

- services.thanos.query.query.replica-labels: Labels to treat as a replica indicator along which data is
deduplicated.

Still you will be able to query without deduplication using
'dedup=false' parameter. Data includes time series, recording
rules, and alerting rules.

- services.thanos.query.query.timeout: Maximum time to process query by query node.

Defaults to `2m` in Thanos
when set to `null`.

- services.thanos.query.selector-labels: Query selector labels that will be exposed in info endpoint.

- services.thanos.query.store.response-timeout: If a Store doesn't send any data in this specified duration then a
Store will be ignored and partial data will be returned if it's
enabled. `0` disables timeout.

Defaults to `0ms` in Thanos
when set to `null`.

- services.thanos.query.store.sd-dns-interval: Interval between DNS resolutions.

Defaults to `30s` in Thanos
when set to `null`.

- services.thanos.query.store.sd-files: Path to files that contain addresses of store API servers. The path
can be a glob pattern.

- services.thanos.query.store.sd-interval: Refresh interval to re-read file SD files. It is used as a resync fallback.

Defaults to `5m` in Thanos
when set to `null`.

- services.thanos.query.store.unhealthy-timeout: Timeout before an unhealthy store is cleaned from the store UI page.

Defaults to `5m` in Thanos
when set to `null`.

- services.thanos.query.tracing.config: Tracing configuration.

When not `null` the attribute set gets converted to
a YAML file and stored in the Nix store. The option
{option}`tracing.config-file` will default to its path.

If {option}`tracing.config-file` is set this option has no effect.

See format details: <https://thanos.io/tip/thanos/tracing.md/#configuration>

- services.thanos.query.tracing.config-file: Path to YAML file that contains tracing configuration.

See format details: <https://thanos.io/tip/thanos/tracing.md/#configuration>

- services.thanos.query.web.external-prefix: Static prefix for all HTML links and redirect URLs in the UI query web
interface.

Actual endpoints are still served on / or the
{option}`web.route-prefix`. This allows thanos UI to be served
behind a reverse proxy that strips a URL sub-path.

- services.thanos.query.web.prefix-header: Name of HTTP request header used for dynamic prefixing of UI links and
redirects.

This option is ignored if the option
`web.external-prefix` is set.

Security risk: enable this option only if a reverse proxy in front of
thanos is resetting the header.

The setting `web.prefix-header="X-Forwarded-Prefix"`
can be useful, for example, if Thanos UI is served via Traefik reverse
proxy with `PathPrefixStrip` option enabled, which
sends the stripped prefix value in `X-Forwarded-Prefix`
header. This allows thanos UI to be served on a sub-path.

- services.thanos.query.web.route-prefix: Prefix for API and UI endpoints.

This allows thanos UI to be served on a sub-path. This option is
analogous to {option}`web.route-prefix` of Promethus.

- services.thanos.query-frontend.arguments: Arguments to the `thanos query-frontend` command.

Defaults to a list of arguments formed by converting the structured
options of {option}`services.thanos.query-frontend` to a list of arguments.

Overriding this option will cause none of the structured options to have
any effect. So only set this if you know what you're doing!

- services.thanos.query-frontend.enable: Whether to enable the Thanos query frontend implements a service deployed in front of queriers to
          improve query parallelization and caching..
- services.thanos.query-frontend.grpc-address: Listen `ip:port` address for gRPC endpoints (StoreAPI).

Make sure this address is routable from other components.

Defaults to `0.0.0.0:10901` in Thanos
when set to `null`.

- services.thanos.query-frontend.grpc-server-tls-cert: TLS Certificate for gRPC server, leave blank to disable TLS

- services.thanos.query-frontend.grpc-server-tls-client-ca: TLS CA to verify clients against.

If no client CA is specified, there is no client verification on server side.
(tls.NoClientCert)

- services.thanos.query-frontend.grpc-server-tls-key: TLS Key for the gRPC server, leave blank to disable TLS

- services.thanos.query-frontend.http-address: Listen `host:port` for HTTP endpoints.

Defaults to `0.0.0.0:10902` in Thanos
when set to `null`.

- services.thanos.query-frontend.log.format: Log format to use.

- services.thanos.query-frontend.log.level: Log filtering level.

Defaults to `info` in Thanos
when set to `null`.

- services.thanos.query-frontend.query-frontend.downstream-url: URL of downstream Prometheus Query compatible API.

Defaults to `http://localhost:9090` in Thanos
when set to `null`.

- services.thanos.query-frontend.tracing.config: Tracing configuration.

When not `null` the attribute set gets converted to
a YAML file and stored in the Nix store. The option
{option}`tracing.config-file` will default to its path.

If {option}`tracing.config-file` is set this option has no effect.

See format details: <https://thanos.io/tip/thanos/tracing.md/#configuration>

- services.thanos.query-frontend.tracing.config-file: Path to YAML file that contains tracing configuration.

See format details: <https://thanos.io/tip/thanos/tracing.md/#configuration>

- services.thanos.receive.arguments: Arguments to the `thanos receive` command.

Defaults to a list of arguments formed by converting the structured
options of {option}`services.thanos.receive` to a list of arguments.

Overriding this option will cause none of the structured options to have
any effect. So only set this if you know what you're doing!

- services.thanos.receive.enable: Whether to enable the Thanos receiver which accept Prometheus remote write API requests and write to local tsdb.
- services.thanos.receive.grpc-address: Listen `ip:port` address for gRPC endpoints (StoreAPI).

Make sure this address is routable from other components.

Defaults to `0.0.0.0:10901` in Thanos
when set to `null`.

- services.thanos.receive.grpc-server-tls-cert: TLS Certificate for gRPC server, leave blank to disable TLS

- services.thanos.receive.grpc-server-tls-client-ca: TLS CA to verify clients against.

If no client CA is specified, there is no client verification on server side.
(tls.NoClientCert)

- services.thanos.receive.grpc-server-tls-key: TLS Key for the gRPC server, leave blank to disable TLS

- services.thanos.receive.http-address: Listen `host:port` for HTTP endpoints.

Defaults to `0.0.0.0:10902` in Thanos
when set to `null`.

- services.thanos.receive.labels: External labels to announce.

This flag will be removed in the future when handling multiple tsdb
instances is added.

- services.thanos.receive.log.format: Log format to use.

- services.thanos.receive.log.level: Log filtering level.

Defaults to `info` in Thanos
when set to `null`.

- services.thanos.receive.objstore.config: Object store configuration.

When not `null` the attribute set gets converted to
a YAML file and stored in the Nix store. The option
{option}`objstore.config-file` will default to its path.

If {option}`objstore.config-file` is set this option has no effect.

See format details: <https://thanos.io/tip/thanos/storage.md/#configuring-access-to-object-storage>

- services.thanos.receive.objstore.config-file: Path to YAML file that contains object store configuration.

See format details: <https://thanos.io/tip/thanos/storage.md/#configuring-access-to-object-storage>

- services.thanos.receive.receive.grpc-compression: Compression algorithm to use for gRPC requests to other receivers.

- services.thanos.receive.remote-write.address: Address to listen on for remote write requests.

Defaults to `0.0.0.0:19291` in Thanos
when set to `null`.

- services.thanos.receive.stateDir: Data directory relative to `/var/lib` of TSDB.

- services.thanos.receive.tracing.config: Tracing configuration.

When not `null` the attribute set gets converted to
a YAML file and stored in the Nix store. The option
{option}`tracing.config-file` will default to its path.

If {option}`tracing.config-file` is set this option has no effect.

See format details: <https://thanos.io/tip/thanos/tracing.md/#configuration>

- services.thanos.receive.tracing.config-file: Path to YAML file that contains tracing configuration.

See format details: <https://thanos.io/tip/thanos/tracing.md/#configuration>

- services.thanos.receive.tsdb.retention: How long to retain raw samples on local storage.

`0d` - disables this retention

Defaults to `15d` in Thanos
when set to `null`.

- services.thanos.rule.alert.label-drop: Labels by name to drop before sending to alertmanager.

This allows alert to be deduplicated on replica label.

Similar Prometheus alert relabelling

- services.thanos.rule.alert.query-url: The external Thanos Query URL that would be set in all alerts 'Source' field.

- services.thanos.rule.alertmanagers.send-timeout: Timeout for sending alerts to alertmanager.

Defaults to `10s` in Thanos
when set to `null`.

- services.thanos.rule.alertmanagers.urls: Alertmanager replica URLs to push firing alerts.

Ruler claims success if push to at least one alertmanager from
discovered succeeds. The scheme may be prefixed with
`dns+` or `dnssrv+` to detect
Alertmanager IPs through respective DNS lookups. The port defaults to
`9093` or the SRV record's value. The URL path is
used as a prefix for the regular Alertmanager API path.

- services.thanos.rule.arguments: Arguments to the `thanos rule` command.

Defaults to a list of arguments formed by converting the structured
options of {option}`services.thanos.rule` to a list of arguments.

Overriding this option will cause none of the structured options to have
any effect. So only set this if you know what you're doing!

- services.thanos.rule.enable: Whether to enable the Thanos ruler service which evaluates Prometheus rules against given Query nodes, exposing Store API and storing old blocks in bucket.
- services.thanos.rule.eval-interval: The default evaluation interval to use.

Defaults to `1m` in Thanos
when set to `null`.

- services.thanos.rule.grpc-address: Listen `ip:port` address for gRPC endpoints (StoreAPI).

Make sure this address is routable from other components.

Defaults to `0.0.0.0:10901` in Thanos
when set to `null`.

- services.thanos.rule.grpc-server-tls-cert: TLS Certificate for gRPC server, leave blank to disable TLS

- services.thanos.rule.grpc-server-tls-client-ca: TLS CA to verify clients against.

If no client CA is specified, there is no client verification on server side.
(tls.NoClientCert)

- services.thanos.rule.grpc-server-tls-key: TLS Key for the gRPC server, leave blank to disable TLS

- services.thanos.rule.http-address: Listen `host:port` for HTTP endpoints.

Defaults to `0.0.0.0:10902` in Thanos
when set to `null`.

- services.thanos.rule.labels: Labels to be applied to all generated metrics.

Similar to external labels for Prometheus,
used to identify ruler and its blocks as unique source.

- services.thanos.rule.log.format: Log format to use.

- services.thanos.rule.log.level: Log filtering level.

Defaults to `info` in Thanos
when set to `null`.

- services.thanos.rule.objstore.config: Object store configuration.

When not `null` the attribute set gets converted to
a YAML file and stored in the Nix store. The option
{option}`objstore.config-file` will default to its path.

If {option}`objstore.config-file` is set this option has no effect.

See format details: <https://thanos.io/tip/thanos/storage.md/#configuring-access-to-object-storage>

- services.thanos.rule.objstore.config-file: Path to YAML file that contains object store configuration.

See format details: <https://thanos.io/tip/thanos/storage.md/#configuring-access-to-object-storage>

- services.thanos.rule.query.addresses: Addresses of statically configured query API servers.

The scheme may be prefixed with `dns+` or
`dnssrv+` to detect query API servers through
respective DNS lookups.

- services.thanos.rule.query.sd-dns-interval: Interval between DNS resolutions.

Defaults to `30s` in Thanos
when set to `null`.

- services.thanos.rule.query.sd-files: Path to file that contain addresses of query peers.
The path can be a glob pattern.

- services.thanos.rule.query.sd-interval: Refresh interval to re-read file SD files. (used as a fallback)

Defaults to `5m` in Thanos
when set to `null`.

- services.thanos.rule.rule-files: Rule files that should be used by rule manager. Can be in glob format.

- services.thanos.rule.stateDir: Data directory relative to `/var/lib`.

- services.thanos.rule.tracing.config: Tracing configuration.

When not `null` the attribute set gets converted to
a YAML file and stored in the Nix store. The option
{option}`tracing.config-file` will default to its path.

If {option}`tracing.config-file` is set this option has no effect.

See format details: <https://thanos.io/tip/thanos/tracing.md/#configuration>

- services.thanos.rule.tracing.config-file: Path to YAML file that contains tracing configuration.

See format details: <https://thanos.io/tip/thanos/tracing.md/#configuration>

- services.thanos.rule.tsdb.block-duration: Block duration for TSDB block.

Defaults to `2h` in Thanos
when set to `null`.

- services.thanos.rule.tsdb.retention: Block retention time on local disk.

Defaults to `48h` in Thanos
when set to `null`.

- services.thanos.rule.web.external-prefix: Static prefix for all HTML links and redirect URLs in the UI query web
interface.

Actual endpoints are still served on / or the
{option}`web.route-prefix`. This allows thanos UI to be served
behind a reverse proxy that strips a URL sub-path.

- services.thanos.rule.web.prefix-header: Name of HTTP request header used for dynamic prefixing of UI links and
redirects.

This option is ignored if the option
{option}`web.external-prefix` is set.

Security risk: enable this option only if a reverse proxy in front of
thanos is resetting the header.

The header `X-Forwarded-Prefix` can be useful, for
example, if Thanos UI is served via Traefik reverse proxy with
`PathPrefixStrip` option enabled, which sends the
stripped prefix value in `X-Forwarded-Prefix`
header. This allows thanos UI to be served on a sub-path.

- services.thanos.rule.web.route-prefix: Prefix for API and UI endpoints.

This allows thanos UI to be served on a sub-path.

This option is analogous to `--web.route-prefix` of Promethus.

- services.thanos.sidecar.arguments: Arguments to the `thanos sidecar` command.

Defaults to a list of arguments formed by converting the structured
options of {option}`services.thanos.sidecar` to a list of arguments.

Overriding this option will cause none of the structured options to have
any effect. So only set this if you know what you're doing!

- services.thanos.sidecar.enable: Whether to enable the Thanos sidecar for Prometheus server.
- services.thanos.sidecar.grpc-address: Listen `ip:port` address for gRPC endpoints (StoreAPI).

Make sure this address is routable from other components.

Defaults to `0.0.0.0:10901` in Thanos
when set to `null`.

- services.thanos.sidecar.grpc-server-tls-cert: TLS Certificate for gRPC server, leave blank to disable TLS

- services.thanos.sidecar.grpc-server-tls-client-ca: TLS CA to verify clients against.

If no client CA is specified, there is no client verification on server side.
(tls.NoClientCert)

- services.thanos.sidecar.grpc-server-tls-key: TLS Key for the gRPC server, leave blank to disable TLS

- services.thanos.sidecar.http-address: Listen `host:port` for HTTP endpoints.

Defaults to `0.0.0.0:10902` in Thanos
when set to `null`.

- services.thanos.sidecar.log.format: Log format to use.

- services.thanos.sidecar.log.level: Log filtering level.

Defaults to `info` in Thanos
when set to `null`.

- services.thanos.sidecar.objstore.config: Object store configuration.

When not `null` the attribute set gets converted to
a YAML file and stored in the Nix store. The option
{option}`objstore.config-file` will default to its path.

If {option}`objstore.config-file` is set this option has no effect.

See format details: <https://thanos.io/tip/thanos/storage.md/#configuring-access-to-object-storage>

- services.thanos.sidecar.objstore.config-file: Path to YAML file that contains object store configuration.

See format details: <https://thanos.io/tip/thanos/storage.md/#configuring-access-to-object-storage>

- services.thanos.sidecar.prometheus.url: URL at which to reach Prometheus's API.

For better performance use local network.

Defaults to `http://localhost:9090` in Thanos
when set to `null`.

- services.thanos.sidecar.reloader.config-envsubst-file: Output file for environment variable substituted config file.

- services.thanos.sidecar.reloader.config-file: Config file watched by the reloader.

- services.thanos.sidecar.reloader.rule-dirs: Rule directories for the reloader to refresh.

- services.thanos.sidecar.tracing.config: Tracing configuration.

When not `null` the attribute set gets converted to
a YAML file and stored in the Nix store. The option
{option}`tracing.config-file` will default to its path.

If {option}`tracing.config-file` is set this option has no effect.

See format details: <https://thanos.io/tip/thanos/tracing.md/#configuration>

- services.thanos.sidecar.tracing.config-file: Path to YAML file that contains tracing configuration.

See format details: <https://thanos.io/tip/thanos/tracing.md/#configuration>

- services.thanos.sidecar.tsdb.path: Data directory of TSDB.

- services.thanos.store.arguments: Arguments to the `thanos store` command.

Defaults to a list of arguments formed by converting the structured
options of {option}`services.thanos.store` to a list of arguments.

Overriding this option will cause none of the structured options to have
any effect. So only set this if you know what you're doing!

- services.thanos.store.block-sync-concurrency: Number of goroutines to use when syncing blocks from object storage.

Defaults to `20` in Thanos
when set to `null`.

- services.thanos.store.chunk-pool-size: Maximum size of concurrently allocatable bytes for chunks.

Defaults to `2GB` in Thanos
when set to `null`.

- services.thanos.store.enable: Whether to enable the Thanos store node giving access to blocks in a bucket provider.
- services.thanos.store.grpc-address: Listen `ip:port` address for gRPC endpoints (StoreAPI).

Make sure this address is routable from other components.

Defaults to `0.0.0.0:10901` in Thanos
when set to `null`.

- services.thanos.store.grpc-server-tls-cert: TLS Certificate for gRPC server, leave blank to disable TLS

- services.thanos.store.grpc-server-tls-client-ca: TLS CA to verify clients against.

If no client CA is specified, there is no client verification on server side.
(tls.NoClientCert)

- services.thanos.store.grpc-server-tls-key: TLS Key for the gRPC server, leave blank to disable TLS

- services.thanos.store.http-address: Listen `host:port` for HTTP endpoints.

Defaults to `0.0.0.0:10902` in Thanos
when set to `null`.

- services.thanos.store.index-cache-size: Maximum size of items held in the index cache.

Defaults to `250MB` in Thanos
when set to `null`.

- services.thanos.store.log.format: Log format to use.

- services.thanos.store.log.level: Log filtering level.

Defaults to `info` in Thanos
when set to `null`.

- services.thanos.store.max-time: End of time range limit to serve.

Thanos Store serves only blocks, which happened earlier than this
value. Option can be a constant time in RFC3339 format or time duration
relative to current time, such as -1d or 2h45m. Valid duration units are
ms, s, m, h, d, w, y.

Defaults to `9999-12-31T23:59:59Z` in Thanos
when set to `null`.

- services.thanos.store.min-time: Start of time range limit to serve.

Thanos Store serves only metrics, which happened later than this
value. Option can be a constant time in RFC3339 format or time duration
relative to current time, such as -1d or 2h45m. Valid duration units are
ms, s, m, h, d, w, y.

Defaults to `0000-01-01T00:00:00Z` in Thanos
when set to `null`.

- services.thanos.store.objstore.config: Object store configuration.

When not `null` the attribute set gets converted to
a YAML file and stored in the Nix store. The option
{option}`objstore.config-file` will default to its path.

If {option}`objstore.config-file` is set this option has no effect.

See format details: <https://thanos.io/tip/thanos/storage.md/#configuring-access-to-object-storage>

- services.thanos.store.objstore.config-file: Path to YAML file that contains object store configuration.

See format details: <https://thanos.io/tip/thanos/storage.md/#configuring-access-to-object-storage>

- services.thanos.store.stateDir: Data directory relative to `/var/lib`
in which to cache remote blocks.

- services.thanos.store.store.grpc.series-max-concurrency: Maximum number of concurrent Series calls.

Defaults to `20` in Thanos
when set to `null`.

- services.thanos.store.store.limits.request-samples: The maximum samples allowed for a single Series request.
The Series call fails if this limit is exceeded.

`0` means no limit.

NOTE: For efficiency the limit is internally implemented as 'chunks limit'
considering each chunk contains a maximum of 120 samples.

Defaults to `0` in Thanos
when set to `null`.

- services.thanos.store.sync-block-duration: Repeat interval for syncing the blocks between local and remote view.

Defaults to `3m` in Thanos
when set to `null`.

- services.thanos.store.tracing.config: Tracing configuration.

When not `null` the attribute set gets converted to
a YAML file and stored in the Nix store. The option
{option}`tracing.config-file` will default to its path.

If {option}`tracing.config-file` is set this option has no effect.

See format details: <https://thanos.io/tip/thanos/tracing.md/#configuration>

- services.thanos.store.tracing.config-file: Path to YAML file that contains tracing configuration.

See format details: <https://thanos.io/tip/thanos/tracing.md/#configuration>

- services.thelounge.enable: Whether to enable The Lounge web IRC client.
- services.thelounge.extraConfig: The Lounge's {file}`config.js` contents as attribute set (will be
converted to JSON to generate the configuration file).

The options defined here will be merged to the default configuration file.
Note: In case of duplicate configuration, options from {option}`extraConfig` have priority.

Documentation: <https://thelounge.chat/docs/server/configuration>

- services.thelounge.package: The thelounge package to use.
- services.thelounge.plugins: The Lounge plugins to install. Plugins can be found in
`pkgs.theLoungePlugins.plugins` and `pkgs.theLoungePlugins.themes`.

- services.thelounge.port: TCP port to listen on for http connections.
- services.thelounge.private
- services.thelounge.public: Make your The Lounge instance public.
Setting this to `false` will require you to configure user
accounts by using the ({command}`thelounge`) command or by adding
entries in {file}`/var/lib/thelounge/users`. You might need to restart
The Lounge after making changes to the state directory.

- services.thermald.configFile: The thermald manual configuration file.

Leave unspecified to run with the `--adaptive` flag instead which will have thermald use your computer's DPTF adaptive tables.

See `man thermald` for more information.

- services.thermald.debug: Whether to enable debug logging.

- services.thermald.enable: Whether to enable thermald, the temperature management daemon.
- services.thermald.ignoreCpuidCheck: Whether to ignore the cpuid check to allow running on unsupported platforms
- services.thermald.package: The thermald package to use.
- services.thinkfan.enable: Whether to enable thinkfan, a fan control program.

::: {.note}
This module targets IBM/Lenovo thinkpads by default, for
other hardware you will have configure it more carefully.
:::

- services.thinkfan.extraArgs: A list of extra command line arguments to pass to thinkfan.
Check the {manpage}`thinkfan(1)` manpage for available arguments.

- services.thinkfan.fans: List of fans thinkfan will control.

::: {.note}
This section slightly departs from the thinkfan.conf syntax.
The type and path must be specified like this:
```
  type = "tpacpi";
  query = "/proc/acpi/ibm/fan";
```
instead of a single declaration like:
```
  - tpacpi: /proc/acpi/ibm/fan
```
:::


- services.thinkfan.levels: [LEVEL LOW HIGH]

LEVEL is the fan level to use: it can be an integer (0-7 with thinkpad_acpi),
"level auto" (to keep the default firmware behavior), "level full-speed" or
"level disengaged" (to run the fan as fast as possible).
LOW is the temperature at which to step down to the previous level.
HIGH is the temperature at which to step up to the next level.
All numbers are integers.

- services.thinkfan.sensors: List of temperature sensors thinkfan will monitor.

::: {.note}
This section slightly departs from the thinkfan.conf syntax.
The type and path must be specified like this:
```
  type = "tpacpi";
  query = "/proc/acpi/ibm/thermal";
```
instead of a single declaration like:
```
  - tpacpi: /proc/acpi/ibm/thermal
```
:::


- services.thinkfan.settings: Thinkfan settings. Use this option to configure thinkfan
settings not exposed in a NixOS option or to bypass one.
Before changing this, read the {manpage}`thinkfan.conf(5)`
manpage and take a look at the example config file at
<https://github.com/vmatare/thinkfan/blob/master/examples/thinkfan.yaml>

- services.thinkfan.smartSupport: Whether to build thinkfan with S.M.A.R.T. support to read temperatures
directly from hard disks.

- services.throttled.enable: Whether to enable fix for Intel CPU throttling.
- services.throttled.extraConfig: Alternative configuration
- services.tiddlywiki.enable: Whether to enable TiddlyWiki nodejs server.
- services.tiddlywiki.listenOptions: Parameters passed to `--listen` command.
Refer to <https://tiddlywiki.com/#WebServer>
for details on supported values.

- services.tigerbeetle.addresses: The addresses of all replicas in the cluster.
This should be a list of IPv4/IPv6 addresses with port numbers.
Either the address or port number (but not both) may be omitted, in which case a default of 127.0.0.1 or 3001 will be used.
The first address in the list corresponds to the address for replica 0, the second address for replica 1, and so on.

- services.tigerbeetle.cacheGridSize: The grid cache size.
The grid cache acts like a page cache for TigerBeetle.
It is recommended to set this as large as possible.

- services.tigerbeetle.clusterId: The 128-bit cluster ID used to create the replica data file (if needed).
Since Nix only supports integers up to 64 bits, you need to pass a string to this if the cluster ID can't fit in 64 bits.
Otherwise, you can pass the cluster ID as either an integer or a string.

- services.tigerbeetle.enable: Whether to enable TigerBeetle server.
- services.tigerbeetle.package: The tigerbeetle package to use.
- services.tigerbeetle.replicaCount: The number of replicas participating in replication of the cluster.

- services.tigerbeetle.replicaIndex: The index (starting at 0) of the replica in the cluster.

- services.tika.configFile: The Apache Tika configuration (XML) file to use.

- services.tika.enable: Whether to enable Apache Tika server.
- services.tika.enableOcr: Whether to enable OCR support by adding the `tesseract` package as a dependency.

- services.tika.listenAddress: The Apache Tika bind address.

- services.tika.openFirewall: Whether to open the firewall for Apache Tika.
This adds `services.tika.port` to `networking.firewall.allowedTCPPorts`.

- services.tika.package: The tika package to use.
- services.tika.port: The Apache Tike port to listen on

- services.timekpr.adminUsers: All listed users will become part of the `timekpr` group so they can manage timekpr settings without requiring sudo.

- services.timekpr.enable: Whether to enable Timekpr-nExT, a screen time managing application that helps optimizing time spent at computer for your subordinates, children or even for yourself.
- services.timekpr.package: The timekpr package to use.
- services.timesyncd.enable: Enables the systemd NTP client daemon.

- services.timesyncd.extraConfig: Extra config options for systemd-timesyncd. See
{manpage}`timesyncd.conf(5)` for available options.

- services.timesyncd.fallbackServers: The set of fallback NTP servers from which to synchronise.

Setting this option to an empty list will write `FallbackNTP=` to the
`timesyncd.conf` file as opposed to setting this option to null which
will remove `FallbackNTP=` entirely.

See {manpage}`timesyncd.conf(5)` for details.

- services.timesyncd.servers: The set of NTP servers from which to synchronise.

Setting this option to an empty list will write `NTP=` to the
`timesyncd.conf` file as opposed to setting this option to null which
will remove `NTP=` entirely.

See {manpage}`timesyncd.conf(5)` for details.

- services.tinc.networks: Defines the tinc networks which will be started.
Each network invokes a different daemon.

- services.tinydns.data: The DNS data to serve, in the format described by {manpage}`tinydns-data(8)`
- services.tinydns.enable: Whether to run the tinydns dns server
- services.tinydns.ip: IP address on which to listen for connections
- services.tinyproxy.enable: Whether to enable Tinyproxy daemon.
- services.tinyproxy.package: The tinyproxy package to use.
- services.tinyproxy.settings: Configuration for [tinyproxy](https://tinyproxy.github.io/).
- services.tlp.enable: Whether to enable the TLP power management daemon.
- services.tlp.extraConfig: Verbatim additional configuration variables for TLP.
DEPRECATED: use services.tlp.settings instead.

- services.tlp.package: The tlp package to use.
- services.tlp.settings: Options passed to TLP. See <https://linrunner.de/tlp> for all supported options..

- services.tlsrpt.collectd.extraFlags: List of extra flags to pass to the tlsrpt-reportd executable.

See {manpage}`tlsrpt-collectd(1)` for possible flags.

- services.tlsrpt.collectd.settings: Flags from {manpage}`tlsrpt-collectd(1)` as key-value pairs.

- services.tlsrpt.configurePostfix: Whether to configure permissions to allow integration with Postfix.

- services.tlsrpt.enable: Whether to enable the TLSRPT services.
- services.tlsrpt.fetcher.settings: Flags from {manpage}`tlsrpt-fetcher(1)` as key-value pairs.

- services.tlsrpt.package: The tlsrpt-reporter package to use.
- services.tlsrpt.reportd.extraFlags: List of extra flags to pass to the tlsrpt-reportd executable.

See {manpage}`tlsrpt-report(1)` for possible flags.

- services.tlsrpt.reportd.settings: Flags from {manpage}`tlsrpt-reportd(1)` as key-value pairs.

- services.tmate-ssh-server.advertisedPort: External port advertised to clients
- services.tmate-ssh-server.enable: Whether to enable tmate ssh server.
- services.tmate-ssh-server.host: External host name
- services.tmate-ssh-server.keysDir: Directory containing ssh keys, defaulting to auto-generation
- services.tmate-ssh-server.openFirewall: Whether to automatically open the specified ports in the firewall.
- services.tmate-ssh-server.package: The tmate-ssh-server package to use.
- services.tmate-ssh-server.port: Listen port for the ssh server
- services.todesk.enable: Whether to enable ToDesk daemon.
- services.todesk.package: The todesk package to use.
- services.tomcat.axis2.enable: Whether to enable Apache Axis2 container.
- services.tomcat.axis2.services: List containing AAR files or directories with AAR files which are web services to be deployed on Axis2
- services.tomcat.baseDir: Location where Tomcat stores configuration files, web applications
and logfiles. Note that it is partially cleared on each service startup
if `purifyOnStart` is enabled.

- services.tomcat.catalinaOpts: Parameters to pass to the Java Virtual Machine which spawns the Catalina servlet container
- services.tomcat.commonLibs: List containing JAR files or directories with JAR files which are libraries shared by the web applications and the servlet container
- services.tomcat.enable: Whether to enable Apache Tomcat.
- services.tomcat.extraConfigFiles: Extra configuration files to pull into the tomcat conf directory
- services.tomcat.extraEnvironment: Environment Variables to pass to the tomcat service
- services.tomcat.extraGroups: Defines extra groups to which the tomcat user belongs.
- services.tomcat.group: Group account under which Apache Tomcat runs.
- services.tomcat.javaOpts: Parameters to pass to the Java Virtual Machine which spawns Apache Tomcat
- services.tomcat.jdk: The jdk package to use.
- services.tomcat.logDirs: Directories to create in baseDir/logs/
- services.tomcat.logPerVirtualHost: Whether to enable logging per virtual host.
- services.tomcat.package: The tomcat9 package to use.
- services.tomcat.port: The TCP port Tomcat should listen on.

- services.tomcat.purifyOnStart: On startup, the `baseDir` directory is populated with various files,
subdirectories and symlinks. If this option is enabled, these items
(except for the `logs` and `work` subdirectories) are first removed.
This prevents interference from remainders of an old configuration
(libraries, webapps, etc.), so it's recommended to enable this option.

- services.tomcat.serverXml: Verbatim server.xml configuration.
This is mutually exclusive with the virtualHosts options.

- services.tomcat.sharedLibs: List containing JAR files or directories with JAR files which are libraries shared by the web applications
- services.tomcat.user: User account under which Apache Tomcat runs.
- services.tomcat.virtualHosts: List consisting of a virtual host name and a list of web applications to deploy on each virtual host
- services.tomcat.webapps: List containing WAR files or directories with WAR files which are web applications to be deployed on Tomcat
- services.tor.client.dns.automapHostsSuffixes: Alias of {option}`services.tor.settings.AutomapHostsSuffixes`.
- services.tor.client.dns.enable: Whether to enable DNS resolver.
- services.tor.client.dns.isolationOptions
- services.tor.client.dns.listenAddress
- services.tor.client.enable: Whether to enable the routing of application connections.
          You might want to disable this if you plan running a dedicated Tor relay.
- services.tor.client.onionServices: See [torrc manual](https://2019.www.torproject.org/docs/tor-manual.html.en#HiddenServiceDir).

- services.tor.client.privoxy.enable
- services.tor.client.socksIsolationOptions
- services.tor.client.socksListenAddress: Bind to this address to listen for connections from
Socks-speaking applications.

- services.tor.client.socksListenAddressFaster
- services.tor.client.socksPolicy: Alias of {option}`services.tor.settings.SocksPolicy`.
- services.tor.client.transparentProxy.enable: Whether to enable transparent proxy.
- services.tor.client.transparentProxy.isolationOptions
- services.tor.client.transparentProxy.listenAddress
- services.tor.controlPort: Alias of {option}`services.tor.settings.ControlPort`.
- services.tor.controlSocket.enable: Whether to enable control socket,
        created in `/run/tor/control`.
- services.tor.enable: Whether to enable Tor daemon.
        By default, the daemon is run without
        relay, exit, bridge or client connectivity.
- services.tor.enableGeoIP: Whether to enable use of GeoIP databases.
        Disabling this will disable by-country statistics for bridges and relays
        and some client and third-party software functionality.
- services.tor.extraConfig
- services.tor.hiddenServices: Alias of {option}`services.tor.relay.onionServices`.
- services.tor.openFirewall: Whether to enable opening of the relay port(s) in the firewall.
- services.tor.package: The tor package to use.
- services.tor.relay.accountingMax: Alias of {option}`services.tor.settings.AccountingMax`.
- services.tor.relay.accountingStart: Alias of {option}`services.tor.settings.AccountingStart`.
- services.tor.relay.address: Alias of {option}`services.tor.settings.Address`.
- services.tor.relay.bandwidthBurst: Alias of {option}`services.tor.settings.BandwidthBurst`.
- services.tor.relay.bandwidthRate: Alias of {option}`services.tor.settings.BandwidthRate`.
- services.tor.relay.bridgeTransports: Alias of {option}`services.tor.settings.ServerTransportPlugin.transports`.
- services.tor.relay.contactInfo: Alias of {option}`services.tor.settings.ContactInfo`.
- services.tor.relay.enable: Whether to enable relaying of Tor traffic for others.

See <https://www.torproject.org/docs/tor-doc-relay>
for details.

Setting this to true requires setting
{option}`services.tor.relay.role`
and
{option}`services.tor.settings.ORPort`
options.

- services.tor.relay.exitPolicy: Alias of {option}`services.tor.settings.ExitPolicy`.
- services.tor.relay.isBridge
- services.tor.relay.isExit
- services.tor.relay.nickname: Alias of {option}`services.tor.settings.Nickname`.
- services.tor.relay.onionServices: See [torrc manual](https://2019.www.torproject.org/docs/tor-manual.html.en#HiddenServiceDir).

- services.tor.relay.port: Alias of {option}`services.tor.settings.ORPort`.
- services.tor.relay.portSpec: Alias of {option}`services.tor.settings.ORPort`.
- services.tor.relay.role: Your role in Tor network. There're several options:

- `exit`:
  An exit relay. This allows Tor users to access regular
  Internet services through your public IP.

  You can specify which services Tor users may access via
  your exit relay using {option}`settings.ExitPolicy` option.

- `relay`:
  Regular relay. This allows Tor users to relay onion
  traffic to other Tor nodes, but not to public
  Internet.

  See
  <https://www.torproject.org/docs/tor-doc-relay.html.en>
  for more info.

- `bridge`:
  Regular bridge. Works like a regular relay, but
  doesn't list you in the public relay directory and
  hides your Tor node behind obfs4proxy.

  Using this option will make Tor advertise your bridge
  to users through various mechanisms like
  <https://bridges.torproject.org/>, though.

  See <https://www.torproject.org/docs/bridges.html.en>
  for more info.

- `private-bridge`:
  Private bridge. Works like regular bridge, but does
  not advertise your node in any way.

  Using this role means that you won't contribute to Tor
  network in any way unless you advertise your node
  yourself in some way.

  Use this if you want to run a private bridge, for
  example because you'll give out your bridge addr
  manually to your friends.

  Switching to this role after measurable time in
  "bridge" role is pretty useless as some Tor users
  would have learned about your node already. In the
  latter case you can still change
  {option}`port` option.

  See <https://www.torproject.org/docs/bridges.html.en>
  for more info.

::: {.important}
Running an exit relay may expose you to abuse
complaints. See
<https://www.torproject.org/faq.html.en#ExitPolicies>
for more info.
:::

::: {.important}
Note that some misconfigured and/or disrespectful
towards privacy sites will block you even if your
relay is not an exit relay. That is, just being listed
in a public relay directory can have unwanted
consequences.

Which means you might not want to use
this role if you browse public Internet from the same
network as your relay, unless you want to write
e-mails to those sites (you should!).
:::

::: {.important}
WARNING: THE FOLLOWING PARAGRAPH IS NOT LEGAL ADVICE.
Consult with your lawyer when in doubt.

The `bridge` role should be safe to use in most situations
(unless the act of forwarding traffic for others is
a punishable offence under your local laws, which
would be pretty insane as it would make ISP illegal).
:::

- services.tor.settings: See [torrc manual](https://2019.www.torproject.org/docs/tor-manual.html.en)
for documentation.

- services.tor.torsocks.allowInbound: Set Torsocks to accept inbound connections. If set to
`true`, listen() and accept() will be
allowed to be used with non localhost address.

- services.tor.torsocks.enable: Whether to build `/etc/tor/torsocks.conf`
containing the specified global torsocks configuration.

- services.tor.torsocks.fasterServer: IP/Port of the Tor SOCKS server for torsocks-faster wrapper suitable for HTTP.
Currently, hostnames are NOT supported by torsocks.

- services.tor.torsocks.onionAddrRange: Tor hidden sites do not have real IP addresses. This
specifies what range of IP addresses will be handed to the
application as "cookies" for .onion names.  Of course, you
should pick a block of addresses which you aren't going to
ever need to actually connect to. This is similar to the
MapAddress feature of the main tor daemon.

- services.tor.torsocks.server: IP/Port of the Tor SOCKS server. Currently, hostnames are
NOT supported by torsocks.

- services.tor.torsocks.socks5Password: SOCKS5 password. The `TORSOCKS_PASSWORD`
environment variable overrides this option if it is set.

- services.tor.torsocks.socks5Username: SOCKS5 username. The `TORSOCKS_USERNAME`
environment variable overrides this option if it is set.

- services.tor.tsocks.config: Extra configuration. Contents will be added verbatim to TSocks
configuration file.

- services.tor.tsocks.enable: Whether to build tsocks wrapper script to relay application traffic via Tor.

::: {.important}
You shouldn't use this unless you know what you're
doing because your installation of Tor already comes with
its own superior (doesn't leak DNS queries)
`torsocks` wrapper which does pretty much
exactly the same thing as this.
:::

- services.tor.tsocks.server: IP address of TOR client to use.

- services.torque.mom.enable: Whether to enable torque computing node.
- services.torque.mom.serverNode: Hostname running pbs server.
- services.torque.server.enable: Whether to enable torque server.
- services.torrentstream.address: Address to listen on.

- services.torrentstream.enable: Whether to enable TorrentStream daemon.
- services.torrentstream.openFirewall: Open ports in the firewall for TorrentStream daemon.

- services.torrentstream.package: The torrentstream package to use.
- services.torrentstream.port: TorrentStream port.

- services.touchegg.enable: Whether to enable touchegg, a multi-touch gesture recognizer.
- services.touchegg.package: The touchegg package to use.
- services.tox-node.enable: Whether to enable Tox Node service.
- services.tox-node.keysFile: Path to the file where DHT keys are stored.
- services.tox-node.lanDiscovery: Enable local network discovery.
- services.tox-node.logType: Logging implementation.
- services.tox-node.motd: Message of the day
- services.tox-node.tcpAddresses: TCP addresses to run TCP relay.
- services.tox-node.tcpConnectionLimit: Maximum number of active TCP connections relay can hold
- services.tox-node.threads: Number of threads for execution
- services.tox-node.udpAddress: UDP address to run DHT node.
- services.toxBootstrapd.enable: Whether to enable the Tox DHT bootstrap daemon.

- services.toxBootstrapd.extraConfig: Configuration for bootstrap daemon.
See <https://github.com/irungentoo/toxcore/blob/master/other/bootstrap_daemon/tox-bootstrapd.conf>
and <https://wiki.tox.chat/users/nodes>.

- services.toxBootstrapd.keysFile: Node key file.
- services.toxBootstrapd.port: Listening port (UDP).
- services.toxvpn.auto_add_peers: peers to automatically connect to on startup
- services.toxvpn.enable: Whether to enable toxvpn running on startup.
- services.toxvpn.localip: your ip on the vpn
- services.toxvpn.port: udp port for toxcore, port-forward to help with connectivity if you run many nodes behind one NAT
- services.tp-auto-kbbl.arguments: List of arguments appended to `./tp-auto-kbbl --device [device] [arguments]`

- services.tp-auto-kbbl.device: Device watched for activities.
- services.tp-auto-kbbl.enable: Whether to enable auto toggle keyboard back-lighting on Thinkpads (and maybe other laptops) for Linux.
- services.tp-auto-kbbl.package: The tp-auto-kbbl package to use.
- services.traccar.enable: Whether to enable Traccar, an open source GPS tracking system.
- services.traccar.environmentFile: File containing environment variables to substitute in the configuration before starting Traccar.

Can be used for storing the secrets without making them available in the world-readable Nix store.

For example, you can set {option}`services.traccar.settings.database.password = "$TRACCAR_DB_PASSWORD"`
and then specify `TRACCAR_DB_PASSWORD="<secret>"` in the environment file.
This value will get substituted in the configuration file.

- services.traccar.settings: {file}`config.xml` configuration as a Nix attribute set.
This option is ignored if `settingsFile` is set.

Nested attributes get translated to a properties entry in the traccar configuration.
For instance: `mail.smtp.port = "25"` results in the following entry:
`<entry key='mail.smtp.port'>25</entry>`

Secrets should be specified using {option}`environmentFile`
instead of this world-readable attribute set.
[Traccar - Configuration File](https://www.traccar.org/configuration-file/).

- services.traccar.settingsFile: File used as configuration for traccar. When specified, {option}`settings` is ignored.

- services.traefik.dataDir: Location for any persistent data traefik creates, ie. acme

- services.traefik.dynamicConfigFile: Path to traefik's dynamic configuration to use.
(Using that option has precedence over `dynamicConfigOptions`)

- services.traefik.dynamicConfigOptions: Dynamic configuration for Traefik.

- services.traefik.enable: Whether to enable Traefik web server.
- services.traefik.environmentFiles: Files to load as environment file. Environment variables from this file
will be substituted into the static configuration file using envsubst.

- services.traefik.group: Set the group that traefik runs under.
For the docker backend this needs to be set to `docker` instead.

- services.traefik.package: The traefik package to use.
- services.traefik.staticConfigFile: Path to traefik's static configuration to use.
(Using that option has precedence over `staticConfigOptions` and `dynamicConfigOptions`)

- services.traefik.staticConfigOptions: Static configuration for Traefik.

- services.trafficserver.cache: Caching rules that overrule the origin's caching policy.

Consult the [upstream
documentation](https://docs.trafficserver.apache.org/en/latest/admin-guide/files/cache.config.en.html) for more details.

- services.trafficserver.enable: Whether to enable Apache Traffic Server.
- services.trafficserver.hosting: Partition the cache according to origin server or domain

Consult the [
upstream documentation](https://docs.trafficserver.apache.org/en/latest/admin-guide/files/hosting.config.en.html) for more details.

- services.trafficserver.ipAllow: Control client access to Traffic Server and Traffic Server connections
to upstream servers.

Consult the [upstream
documentation](https://docs.trafficserver.apache.org/en/latest/admin-guide/files/ip_allow.yaml.en.html) for more details.

- services.trafficserver.logging: Configure logs.

Consult the [upstream
documentation](https://docs.trafficserver.apache.org/en/latest/admin-guide/files/logging.yaml.en.html) for more details.

- services.trafficserver.parent: Identify the parent proxies used in an cache hierarchy.

Consult the [upstream
documentation](https://docs.trafficserver.apache.org/en/latest/admin-guide/files/parent.config.en.html) for more details.

- services.trafficserver.plugins: Controls run-time loadable plugins available to Traffic Server, as
well as their configuration.

Consult the [upstream
documentation](https://docs.trafficserver.apache.org/en/latest/admin-guide/files/plugin.config.en.html) for more details.

- services.trafficserver.records: List of configurable variables used by Traffic Server.

Consult the [
upstream documentation](https://docs.trafficserver.apache.org/en/latest/admin-guide/files/records.config.en.html) for more details.

- services.trafficserver.remap: URL remapping rules used by Traffic Server.

Consult the [
upstream documentation](https://docs.trafficserver.apache.org/en/latest/admin-guide/files/remap.config.en.html) for more details.

- services.trafficserver.sni: Configure aspects of TLS connection handling for both inbound and
outbound connections.

Consult the [upstream
documentation](https://docs.trafficserver.apache.org/en/latest/admin-guide/files/sni.yaml.en.html) for more details.

- services.trafficserver.splitDns: Specify the DNS server that Traffic Server should use under specific
conditions.

Consult the [
upstream documentation](https://docs.trafficserver.apache.org/en/latest/admin-guide/files/splitdns.config.en.html) for more details.

- services.trafficserver.sslMulticert: Configure SSL server certificates to terminate the SSL sessions.

Consult the [
upstream documentation](https://docs.trafficserver.apache.org/en/latest/admin-guide/files/ssl_multicert.config.en.html) for more details.

- services.trafficserver.storage: List all the storage that make up the Traffic Server cache.

Consult the [
upstream documentation](https://docs.trafficserver.apache.org/en/latest/admin-guide/files/storage.config.en.html) for more details.

- services.trafficserver.strategies: Specify the next hop proxies used in an cache hierarchy and the
algorithms used to select the next proxy.

Consult the [
upstream documentation](https://docs.trafficserver.apache.org/en/latest/admin-guide/files/strategies.yaml.en.html) for more details.

- services.trafficserver.volume: Manage cache space more efficiently and restrict disk usage by
creating cache volumes of different sizes.

Consult the [
upstream documentation](https://docs.trafficserver.apache.org/en/latest/admin-guide/files/volume.config.en.html) for more details.

- services.transfer-sh.enable: Whether to enable Easy and fast file sharing from the command-line.
- services.transfer-sh.package: The transfer-sh package to use.
- services.transfer-sh.provider: Storage providers to use
- services.transfer-sh.secretFile: Path to file containing environment variables.
Useful for passing down secrets.
Some variables that can be considered secrets are:
 - AWS_ACCESS_KEY
 - AWS_ACCESS_KEY
 - TLS_PRIVATE_KEY
 - HTTP_AUTH_HTPASSWD

- services.transfer-sh.settings: Additional configuration for transfer-sh, see
<https://github.com/dutchcoders/transfer.sh#usage-1>
for supported values.

For secrets use secretFile option instead.

- services.transmission.credentialsFile: Path to a JSON file to be merged with the settings.
Useful to merge a file which is better kept out of the Nix store
to set secret config parameters like `rpc-password`.

- services.transmission.downloadDirPermissions: If not `null`, is used as the permissions
set by `system.activationScripts.transmission-daemon`
on the directories [](#opt-services.transmission.settings.download-dir),
[](#opt-services.transmission.settings.incomplete-dir).
and [](#opt-services.transmission.settings.watch-dir).
Note that you may also want to change
[](#opt-services.transmission.settings.umask).

Keep in mind, that if the default user is used, the `home` directory
is locked behind a `750` permission, which affects all subdirectories
as well. There are 3 ways to get around this:

1. (Recommended) add the users that should have access to the group
   set by [](#opt-services.transmission.group)
2. Change [](#opt-services.transmission.settings.download-dir) to be
   under a directory that has the right permissions
3. Change `systemd.services.transmission.serviceConfig.StateDirectoryMode`
   to the same value as this option

- services.transmission.enable: Whether to enable the headless Transmission BitTorrent daemon.

Transmission daemon can be controlled via the RPC interface using
transmission-remote, the WebUI (http://127.0.0.1:9091/ by default),
or other clients like stig or tremc.

Torrents are downloaded to [](#opt-services.transmission.home)/Downloads by default and are
accessible to users in the "transmission" group.

- services.transmission.extraFlags: Extra flags passed to the transmission command in the service definition.

- services.transmission.group: Group account under which Transmission runs.
- services.transmission.home: The directory where Transmission will create `.config/transmission-daemon`.
as well as `Downloads/` unless
[](#opt-services.transmission.settings.download-dir) is changed,
and `.incomplete/` unless
[](#opt-services.transmission.settings.incomplete-dir) is changed.

- services.transmission.openFirewall: Alias of {option}`services.transmission.openPeerPorts`.
- services.transmission.openPeerPorts: Whether to enable opening of the peer port(s) in the firewall.
- services.transmission.openRPCPort: Whether to enable opening of the RPC port in the firewall.
- services.transmission.package: The transmission package to use.
- services.transmission.performanceNetParameters: Whether to enable tweaking of kernel parameters
to open many more connections at the same time.

Note that you may also want to increase
`peer-limit-global`.
And be aware that these settings are quite aggressive
and might not suite your regular desktop use.
For instance, SSH sessions may time out more easily.

- services.transmission.port: Alias of {option}`services.transmission.settings.rpc-port`.
- services.transmission.settings: Settings whose options overwrite fields in
`.config/transmission-daemon/settings.json`
(each time the service starts).

See [Transmission's Wiki](https://github.com/transmission/transmission/wiki/Editing-Configuration-Files)
for documentation of settings not explicitly covered by this module.

- services.transmission.user: User account under which Transmission runs.
- services.transmission.webHome: If not `null`, sets the value of the `TRANSMISSION_WEB_HOME`
environment variable used by the service. Useful for overriding
the web interface files, without overriding the transmission
package and thus requiring rebuilding it locally. Use this if
you want to use an alternative web interface, such as
`pkgs.flood-for-transmission`.

- services.tremor-rs.enable: Whether to enable Tremor event- or stream-processing system.
- services.tremor-rs.host: The host tremor should be listening on
- services.tremor-rs.loggerSettings: Tremor logger configuration
- services.tremor-rs.port: the port tremor should be listening on
- services.tremor-rs.tremorLibDir: Directory where to find /lib containing tremor script files
- services.tremor-rs.troyFileList: List of troy files to load.
- services.trezord.emulator.enable: Enable Trezor emulator support.

- services.trezord.emulator.port: Listening port for the Trezor emulator.

- services.trezord.enable: Enable Trezor bridge daemon, for use with Trezor hardware bitcoin wallets.

- services.trickster.configFile: Path to configuration file.

- services.trickster.enable: Enable Trickster.

- services.trickster.instance-id: Instance ID for when running multiple processes (default null).

- services.trickster.log-level: Level of Logging to use (debug, info, warn, error) (default "info").

- services.trickster.metrics-port: Port that the /metrics endpoint will listen on.

- services.trickster.origin: Alias of {option}`services.trickster.origin-url`.
- services.trickster.origin-type: Type of origin (prometheus, influxdb)

- services.trickster.origin-url: URL to the Origin. Enter it like you would in grafana, e.g., http://prometheus:9090 (default http://prometheus:9090).

- services.trickster.package: The trickster package to use.
- services.trickster.profiler-port: Port that the /debug/pprof endpoint will listen on.

- services.trickster.proxy-port: Port that the Proxy server will listen on.

- services.triggerhappy.bindings: Key bindings for {command}`triggerhappy`.

- services.triggerhappy.enable: Whether to enable the {command}`triggerhappy` hotkey daemon.

- services.triggerhappy.extraConfig: Literal contents to append to the end of {command}`triggerhappy` configuration file.

- services.triggerhappy.user: User account under which {command}`triggerhappy` runs.

- services.trilium-server.dataDir: The directory storing the notes database and the configuration.

- services.trilium-server.enable: Whether to enable trilium-server.
- services.trilium-server.host: The host address to bind to (defaults to localhost).

- services.trilium-server.instanceName: Instance name used to distinguish between different instances

- services.trilium-server.nginx: Configuration for nginx reverse proxy.

- services.trilium-server.noAuthentication: If set to true, no password is required to access the web frontend.

- services.trilium-server.noBackup: Disable periodic database backups.

- services.trilium-server.package: The trilium-server package to use.
- services.trilium-server.port: The port number to bind to.

- services.trust-dns.debug: Alias of {option}`services.hickory-dns.debug`.
- services.trust-dns.enable: Alias of {option}`services.hickory-dns.enable`.
- services.trust-dns.package: Alias of {option}`services.hickory-dns.package`.
- services.trust-dns.quiet: Alias of {option}`services.hickory-dns.quiet`.
- services.trust-dns.settings: Alias of {option}`services.hickory-dns.settings`.
- services.tsidp.enable: Whether to enable tsidp server.
- services.tsidp.environmentFile: Path to an environment file loaded for the tsidp service.

This can be used to securely store tokens and secrets outside of the world-readable Nix store.

Example contents of the file:
```
TS_AUTH_KEY=YOUR_TAILSCALE_AUTHKEY
```

- services.tsidp.package: The tsidp package to use.
- services.tsidp.settings.debugAllRequests: For development. Prints all requests and responses.

- services.tsidp.settings.debugTsnet: For development. Enables debug level logging with tsnet connection.

- services.tsidp.settings.enableFunnel: Use Tailscale Funnel to make tsidp available on the public internet so it works with SaaS products.

- services.tsidp.settings.enableSts: Enable OAuth token exchange using RFC 8693.

- services.tsidp.settings.hostName: The hostname to use for the tsnet node.

- services.tsidp.settings.localPort: Listen on localhost:<port>.
- services.tsidp.settings.logLevel: Set logging level: debug, info, warn, error.

- services.tsidp.settings.port: Port to listen on (default: 443).

- services.tsidp.settings.useLocalTailscaled: Use local tailscaled instead of tsnet.

- services.tsmBackup.autoTime: The backup service will be invoked
automatically at the given date/time,
which must be in the format described in
{manpage}`systemd.time(5)`.
The default `null`
disables automatic backups.

- services.tsmBackup.command: The actual command passed to the
`dsmc` executable to start the backup.

- services.tsmBackup.enable: Whether to enable automatic backups with the
IBM Storage Protect (Tivoli Storage Manager, TSM) client.
This also enables
{option}`programs.tsmClient.enable`
.
- services.tsmBackup.servername: Create a systemd system service
`tsm-backup.service` that starts
a backup based on the given servername's stanza.
Note that this server's
{option}`passwdDir` will default to
{file}`/var/lib/tsm-backup/password`
(but may be overridden);
also, the service will use
{file}`/var/lib/tsm-backup` as
`HOME` when calling
`dsmc`.

- services.tt-rss
- services.tts.servers: TTS server instances.

- services.ttyd.caFile: SSL CA file path for client certificate verification.
- services.ttyd.certFile: SSL certificate file path.
- services.ttyd.checkOrigin: Whether to allow a websocket connection from a different origin.
- services.ttyd.clientOptions: Attribute set of client options for xtermjs.
<https://xtermjs.org/docs/api/terminal/interfaces/iterminaloptions/>

- services.ttyd.enable: Whether to enable ttyd daemon.
- services.ttyd.enableIPv6: Whether or not to enable IPv6 support.
- services.ttyd.enableSSL: Whether or not to enable SSL (https) support.
- services.ttyd.entrypoint: Which command ttyd runs.
- services.ttyd.indexFile: Custom index.html path
- services.ttyd.interface: Network interface to bind.
- services.ttyd.keyFile: SSL key file path.
For insecurely putting the keyFile in the globally readable store use
`pkgs.writeText "ttydKeyFile" "SSLKEY"`.

- services.ttyd.logLevel: Set log level.
- services.ttyd.maxClients: Maximum clients to support (0, no limit)
- services.ttyd.passwordFile: File containing the password to use for basic http authentication.
For insecurely putting the password in the globally readable store use
`pkgs.writeText "ttydpw" "MyPassword"`.

- services.ttyd.port: Port to listen on (use 0 for random port)
- services.ttyd.signal: Signal to send to the command on session close.
- services.ttyd.socket: UNIX domain socket path to bind.
- services.ttyd.terminalType: Terminal type to report.
- services.ttyd.user: Which unix user ttyd should run as.
- services.ttyd.username: Username for basic http authentication.
- services.ttyd.writeable: Allow clients to write to the TTY.
- services.tumbler.enable: Whether to enable Tumbler, A D-Bus thumbnailer service.
- services.tumbler.package
- services.tuned.enable: Whether to enable TuneD.
- services.tuned.package: The tuned package to use.
- services.tuned.ppdSettings: Settings for TuneD's power-profiles-daemon compatibility service.

- services.tuned.ppdSupport: Whether to enable translation of power-profiles-daemon API calls to TuneD.
- services.tuned.profiles: Profiles for TuneD.
See {manpage}`tuned.conf(5)`.

- services.tuned.settings: Configuration for TuneD.
See {manpage}`tuned-main.conf(5)`.

- services.tuptime.enable: Whether to enable the total uptime service.
- services.tuptime.timer.enable: Whether to regularly log uptime to detect bad shutdowns.
- services.tuptime.timer.period: systemd calendar event
- services.turn-rs.enable: Whether to enable turn-rs server.
- services.turn-rs.package: The turn-rs package to use.
- services.turn-rs.secretFile: Environment variables from this file will be interpolated into the
final config file using envsubst with this syntax: `$ENVIRONMENT` or
`${VARIABLE}`.
The file should contain lines formatted as `SECRET_VAR=SECRET_VALUE`.
This is useful to avoid putting secrets into the nix store.

- services.turn-rs.settings: Turn-rs server config file
- services.tvheadend
- services.twingate.enable: Whether to enable Twingate Client daemon.
- services.twingate.package: The twingate package to use.
- services.typesense.apiKeyFile: Sets the admin api key for typesense. Always use this option
instead of {option}`settings.server.api-key` to prevent the key
from being written to the world-readable nix store.

- services.typesense.enable: Whether to enable typesense.
- services.typesense.package: The typesense package to use.
- services.typesense.settings: Typesense configuration. Refer to [the documentation](https://typesense.org/docs/0.24.1/api/server-configuration.html) for supported values.
- services.tzupdate.enable: Enable the tzupdate timezone updating service. This provides
a one-shot service which can be activated with systemctl to
update the timezone.

- services.tzupdate.package: The tzupdate package to use.
- services.tzupdate.timer.enable: Enable the tzupdate timer to update the timezone automatically.

- services.tzupdate.timer.interval: The interval at which the tzupdate timer should run. See
{manpage}`systemd.time(7)` to understand the format.

- services.u9fs.enable: Whether to run the u9fs 9P server for Unix.
- services.u9fs.extraArgs: Extra arguments to pass on invocation,
see {command}`man 4 u9fs`

- services.u9fs.listenStreams: Sockets to listen for clients on.
See {command}`man 5 systemd.socket` for socket syntax.

- services.u9fs.user: User to run u9fs under.
- services.udev.enable: Whether to enable udev, a device manager for the Linux kernel.
- services.udev.extraHwdb: Additional {command}`hwdb` files. They'll be written
into file {file}`99-local.hwdb`. Thus they are
read after all other files.

- services.udev.extraRules: Additional {command}`udev` rules. They'll be written
into file {file}`99-local.rules`. Thus they are
read and applied after all other rules.

- services.udev.initrdRules: Alias of {option}`boot.initrd.services.udev.rules`.
- services.udev.packages: List of packages containing {command}`udev` rules.
All files found in
{file}`«pkg»/etc/udev/rules.d` and
{file}`«pkg»/lib/udev/rules.d`
will be included.

- services.udev.path: Packages added to the {env}`PATH` environment variable when
executing programs from Udev rules.

coreutils, gnu{sed,grep}, util-linux and config.systemd.package are
automatically included.

- services.udisks2.enable: Whether to enable udisks2, a DBus service that allows applications to query and manipulate storage devices.
- services.udisks2.mountOnMedia: When enabled, instructs udisks2 to mount removable drives under `/media/` directory, instead of the
default, ACL-controlled `/run/media/$USER/`. Since `/media/` is not mounted as tmpfs by default, it
requires cleanup to get rid of stale mountpoints; enabling this option will take care of this at boot.

- services.udisks2.package: The udisks2 package to use.
- services.udisks2.settings: Options passed to udisksd.
See [here](http://manpages.ubuntu.com/manpages/latest/en/man5/udisks2.conf.5.html) and
drive configuration in [here](http://manpages.ubuntu.com/manpages/latest/en/man8/udisks.8.html) for supported options.

- services.uhub: Uhub ADC hub instances
- services.ulogd.enable: Whether to enable ulogd, a userspace logging daemon for netfilter/iptables related logging.
- services.ulogd.logLevel: Log level (1 = debug, 3 = info, 5 = notice, 7 = error, 8 = fatal)
- services.ulogd.settings: Configuration for ulogd. See {file}`/share/doc/ulogd/` in `pkgs.ulogd.doc`.
- services.umami.createPostgresqlDatabase: Whether to automatically create the database for Umami using PostgreSQL.
Both the database name and username will be `umami`, and the connection is
made through unix sockets using peer authentication.

- services.umami.enable: Whether to enable umami.
- services.umami.package: The umami package to use.
- services.umami.settings: Additional configuration (environment variables) for Umami, see
<https://umami.is/docs/environment-variables> for supported values.

- services.umurmur.configFile: Configuration file, default is generated from config.service.umurmur.settings
- services.umurmur.enable: Whether to enable uMurmur Mumble server.
- services.umurmur.openFirewall: Open ports in the firewall for the uMurmur Mumble server.

- services.umurmur.package: The umurmur package to use.
- services.umurmur.settings: Settings of uMurmur. For reference see <https://github.com/umurmur/umurmur/blob/master/umurmur.conf.example>
- services.unbound.allowedAccess
- services.unbound.checkconf: Whether to check the resulting config file with unbound checkconf for syntax errors.

If settings.include is used, this options is disabled, as the import can likely not be accessed at build time.
If settings.remote-control is used, this option is disabled, too as the control-key-file, server-cert-file and server-key-file cannot be accessed at build time.

- services.unbound.enable: Whether to enable Unbound domain name server.
- services.unbound.enableRootTrustAnchor: Use and update root trust anchor for DNSSEC validation.
- services.unbound.extraConfig
- services.unbound.forwardAddresses
- services.unbound.group: Group under which unbound runs.
- services.unbound.interfaces: Alias of {option}`services.unbound.settings.server.interface`.
- services.unbound.localControlSocketPath: When not set to `null` this option defines the path
at which the unbound remote control socket should be created at. The
socket will be owned by the unbound user (`unbound`)
and group will be `nogroup`.

Users that should be permitted to access the socket must be in the
`config.services.unbound.group` group.

If this option is `null` remote control will not be
enabled. Unbounds default values apply.

- services.unbound.package: The unbound-with-systemd package to use.
- services.unbound.resolveLocalQueries: Whether unbound should resolve local queries (i.e. add 127.0.0.1 to
/etc/resolv.conf).

- services.unbound.settings: Declarative Unbound configuration
See the {manpage}`unbound.conf(5)` manpage for a list of
available options.

- services.unbound.stateDir: Directory holding all state for unbound to run.
- services.unbound.user: User account under which unbound runs.
- services.unclutter.enable: Enable unclutter to hide your mouse cursor when inactive
- services.unclutter.excluded: Names of windows where unclutter should not apply
- services.unclutter.extraOptions: More arguments to pass to the unclutter command
- services.unclutter.keystroke: Wait for a keystroke before hiding the cursor
- services.unclutter.package: The unclutter package to use.
- services.unclutter.threeshold: Alias of {option}`services.unclutter.threshold`.
- services.unclutter.threshold: Minimum number of pixels considered cursor movement
- services.unclutter.timeout: Number of seconds before the cursor is marked inactive
- services.unclutter-xfixes.enable: Enable unclutter-xfixes to hide your mouse cursor when inactive.
- services.unclutter-xfixes.extraOptions: More arguments to pass to the unclutter-xfixes command.
- services.unclutter-xfixes.package: The unclutter-xfixes package to use.
- services.unclutter-xfixes.threshold: Minimum number of pixels considered cursor movement.
- services.unclutter-xfixes.timeout: Number of seconds before the cursor is marked inactive.
- services.undervolt.analogioOffset: The amount of voltage in mV to offset analogio by.

- services.undervolt.coreOffset: The amount of voltage in mV to offset the CPU cores by.

- services.undervolt.enable: Whether to enable Undervolting service for Intel CPUs.

Warning: This service is not endorsed by Intel and may permanently damage your hardware. Use at your own risk
.
- services.undervolt.gpuOffset: The amount of voltage in mV to offset the GPU by.

- services.undervolt.p1.limit: The P1 Power Limit in Watts.
Both limit and window must be set.

- services.undervolt.p1.window: The P1 Time Window in seconds.
Both limit and window must be set.

- services.undervolt.p2.limit: The P2 Power Limit in Watts.
Both limit and window must be set.

- services.undervolt.p2.window: The P2 Time Window in seconds.
Both limit and window must be set.

- services.undervolt.package: The undervolt package to use.
- services.undervolt.temp: The temperature target in Celsius degrees.

- services.undervolt.tempAc: The temperature target on AC power in Celsius degrees.

- services.undervolt.tempBat: The temperature target on battery power in Celsius degrees.

- services.undervolt.turbo: Changes the Intel Turbo feature status (1 is disabled and 0 is enabled).

- services.undervolt.uncoreOffset: The amount of voltage in mV to offset uncore by.

- services.undervolt.useTimer: Whether to set a timer that applies the undervolt settings every 30s.
This will cause spam in the journal but might be required for some
hardware under specific conditions.
Enable this if your undervolt settings don't hold.

- services.undervolt.verbose: Whether to enable verbose logging.

- services.unifi.dataDir
- services.unifi.enable: Whether or not to enable the unifi controller service.

- services.unifi.extraJvmOptions: Set extra options to pass to the JVM.

- services.unifi.initialJavaHeapSize: Set the initial heap size for the JVM in MB. If this option isn't set, the
JVM will decide this value at runtime.

- services.unifi.jrePackage: The jdk package to use. Check the UniFi controller release notes to ensure it is supported.

- services.unifi.maximumJavaHeapSize: Set the maximum heap size for the JVM in MB. If this option isn't set, the
JVM will decide this value at runtime.

- services.unifi.mongodbPackage: The mongodb package to use.
- services.unifi.openFirewall: Whether or not to open the minimum required ports on the firewall.

This is necessary to allow firmware upgrades and device discovery to
work. For remote login, you should additionally open (or forward) port
8443.

- services.unifi.openPorts: Alias of {option}`services.unifi.openFirewall`.
- services.unifi.unifiPackage: The unifi package to use.
- services.unifi-poller: Alias of {option}`services.unpoller`.
- services.unifi-video
- services.unit.config: Unit configuration in JSON format. More details here <https://unit.nginx.org/configuration>
- services.unit.enable: Whether to enable Unit App Server.
- services.unit.group: Group account under which unit runs.
- services.unit.logDir: Unit log directory.
- services.unit.package: The unit package to use.
- services.unit.stateDir: Unit data directory.
- services.unit.user: User account under which unit runs.
- services.unpoller.enable: Whether to enable unpoller.
- services.unpoller.influxdb.db: Database name. Database should exist.

- services.unpoller.influxdb.disable: Whether to disable the influxdb output plugin.

- services.unpoller.influxdb.interval: Setting this lower than the Unifi controller's refresh
interval may lead to zeroes in your database.

- services.unpoller.influxdb.pass: Path of a file containing the password for influxdb.
This file needs to be readable by the unifi-poller user.

- services.unpoller.influxdb.url: URL of the influxdb host.

- services.unpoller.influxdb.user: Username for the influxdb.

- services.unpoller.influxdb.verify_ssl: Verify the influxdb's certificate.

- services.unpoller.loki.interval: How often the events are polled and pushed to Loki.

- services.unpoller.loki.pass: Path of a file containing the password for Loki.
This file needs to be readable by the unifi-poller user.

- services.unpoller.loki.tenant_id: Tenant ID to use in Loki.

- services.unpoller.loki.timeout: Should be increased in case of timeout errors.

- services.unpoller.loki.url: URL of the Loki host.

- services.unpoller.loki.user: Username for Loki.

- services.unpoller.loki.verify_ssl: Verify Loki's certificate.

- services.unpoller.poller.debug: Turns on line numbers, microsecond logging, and a per-device log.
This may be noisy if you have a lot of devices. It adds one line per device.

- services.unpoller.poller.plugins: Load additional plugins.

- services.unpoller.poller.quiet: Turns off per-interval logs. Only startup and error logs will be emitted.

- services.unpoller.prometheus.disable: Whether to disable the prometheus output plugin.

- services.unpoller.prometheus.http_listen: Bind the prometheus exporter to this IP or hostname.

- services.unpoller.prometheus.report_errors: Whether to report errors.

- services.unpoller.unifi.controllers: List of Unifi controllers to poll. Use defaults if empty.

- services.unpoller.unifi.defaults.hash_pii: Hash, with md5, client names and MAC addresses. This attempts
to protect personally identifiable information.

- services.unpoller.unifi.defaults.pass: Path of a file containing the password for the unifi service user.
This file needs to be readable by the unifi-poller user.

- services.unpoller.unifi.defaults.save_alarms: Collect and save data from UniFi alarms to influxdb and Loki.

- services.unpoller.unifi.defaults.save_anomalies: Collect and save data from UniFi anomalies to influxdb and Loki.

- services.unpoller.unifi.defaults.save_dpi: Collect and save data from deep packet inspection.
Adds around 150 data points and impacts performance.

- services.unpoller.unifi.defaults.save_events: Collect and save data from UniFi events to influxdb and Loki.

- services.unpoller.unifi.defaults.save_ids: Collect and save data from the intrusion detection system to influxdb and Loki.

- services.unpoller.unifi.defaults.save_sites: Collect and save site data.

- services.unpoller.unifi.defaults.sites: List of site names for which statistics should be exported.
Or the string "default" for the default site or the string "all" for all sites.

- services.unpoller.unifi.defaults.url: URL of the Unifi controller.

- services.unpoller.unifi.defaults.user: Unifi service user name.

- services.unpoller.unifi.defaults.verify_ssl: Verify the Unifi controller's certificate.

- services.unpoller.unifi.dynamic: Let prometheus select which controller to poll when scraping.
Use with default credentials. See unifi-poller wiki for more.

- services.upower.allowRiskyCriticalPowerAction: Enable the risky critical power actions "Suspend" and "Ignore".

- services.upower.criticalPowerAction: The action to take when `timeAction` or
`percentageAction` has been reached for the batteries
(UPS or laptop batteries) supplying the computer.

When set to `Suspend` or `Ignore`,
{option}`services.upower.allowRiskyCriticalPowerAction` must be set
to `true`.

- services.upower.enable: Whether to enable Upower, a DBus service that provides power
management support to applications.

- services.upower.enableWattsUpPro: Enable the Watts Up Pro device.

The Watts Up Pro contains a generic FTDI USB device without a specific
vendor and product ID. When we probe for WUP devices, we can cause
the user to get a perplexing "Device or resource busy" error when
attempting to use their non-WUP device.

The generic FTDI device is known to also be used on:

- Sparkfun FT232 breakout board
- Parallax Propeller

- services.upower.ignoreLid: Do we ignore the lid state

Some laptops are broken. The lid state is either inverted, or stuck
on or off. We can't do much to fix these problems, but this is a way
for users to make the laptop panel vanish, a state that might be used
by a couple of user-space daemons. On Linux systems, see also
{manpage}`logind.conf(5)`.

- services.upower.noPollBatteries: Don't poll the kernel for battery level changes.

Some hardware will send us battery level changes through
events, rather than us having to poll for it. This option
allows disabling polling for hardware that sends out events.

- services.upower.package: The upower package to use.
- services.upower.percentageAction: When `usePercentageForPolicy` is
`true`, the levels at which UPower will take action
for the critical battery level.

This will also be used for batteries which don't have time information
such as that of peripherals.

If any value (of `percentageLow`,
`percentageCritical` and
`percentageAction`) is invalid, or not in descending
order, the defaults will be used.

- services.upower.percentageCritical: When `usePercentageForPolicy` is
`true`, the levels at which UPower will consider the
battery critical.

This will also be used for batteries which don't have time information
such as that of peripherals.

If any value (of `percentageLow`,
`percentageCritical` and
`percentageAction`) is invalid, or not in descending
order, the defaults will be used.

- services.upower.percentageLow: When `usePercentageForPolicy` is
`true`, the levels at which UPower will consider the
battery low.

This will also be used for batteries which don't have time information
such as that of peripherals.

If any value (of `percentageLow`,
`percentageCritical` and
`percentageAction`) is invalid, or not in descending
order, the defaults will be used.

- services.upower.timeAction: When `usePercentageForPolicy` is
`false`, the time remaining in seconds at which
UPower will take action for the critical battery level.

If any value (of `timeLow`,
`timeCritical` and `timeAction`) is
invalid, or not in descending order, the defaults will be used.

- services.upower.timeCritical: When `usePercentageForPolicy` is
`false`, the time remaining in seconds at which
UPower will consider the battery critical.

If any value (of `timeLow`,
`timeCritical` and `timeAction`) is
invalid, or not in descending order, the defaults will be used.

- services.upower.timeLow: When `usePercentageForPolicy` is
`false`, the time remaining in seconds at which
UPower will consider the battery low.

If any value (of `timeLow`,
`timeCritical` and `timeAction`) is
invalid, or not in descending order, the defaults will be used.

- services.upower.usePercentageForPolicy: Policy for warnings and action based on battery levels

Whether battery percentage based policy should be used. The default
is to use the percentage, which
should work around broken firmwares. It is also more reliable than
the time left (frantically saving all your files is going to use more
battery than letting it rest for example).

- services.uptermd.enable: Whether to enable uptermd.
- services.uptermd.extraFlags: Extra flags passed to the uptermd command.

- services.uptermd.hostKey: Path to SSH host key. If not defined, an ed25519 keypair is generated automatically.

- services.uptermd.listenAddress: Address the server will listen on.

- services.uptermd.openFirewall: Whether to open the firewall for the port in {option}`services.uptermd.port`.

- services.uptermd.port: Port the server will listen on.

- services.uptime.configFile: The uptime configuration file

If mongodb: server != localhost, please set usesRemoteMongo = true

If you only want to run the monitor, please set enableWebService = false
and enableSeparateMonitoringService = true

If autoStartMonitor: false (recommended) and you want to run both
services, please set enableSeparateMonitoringService = true

- services.uptime.enableSeparateMonitoringService: Whether to enable the uptime monitoring service.
- services.uptime.enableWebService: Whether to enable the uptime monitoring program web service.
- services.uptime.nodeEnv: The node environment to run in (development, production, etc.)
- services.uptime.usesRemoteMongo: Whether the configuration file specifies a remote mongo instance
- services.uptime-kuma.appriseSupport: Whether to enable apprise support for notifications.
- services.uptime-kuma.enable: Whether to enable Uptime Kuma, this assumes a reverse proxy to be set.
- services.uptime-kuma.package: The uptime-kuma package to use.
- services.uptime-kuma.settings: Additional configuration for Uptime Kuma, see
<https://github.com/louislam/uptime-kuma/wiki/Environment-Variables>
for supported values.

- services.uptimed.enable: Enable `uptimed`, allowing you to track
your highest uptimes.

- services.urserver.enable: Whether to enable urserver.
- services.urxvtd.enable: Enable urxvtd, the urxvt terminal daemon. To use urxvtd, run
"urxvtc".

- services.urxvtd.package: The rxvt-unicode package to use.
- services.usbguard.IPCAccessControlFiles
- services.usbguard.IPCAllowedGroups: A list of groupnames that the daemon will accept IPC connections
from.

- services.usbguard.IPCAllowedUsers: A list of usernames that the daemon will accept IPC connections from.

- services.usbguard.auditFilePath
- services.usbguard.dbus.enable: Whether to enable USBGuard dbus daemon.
- services.usbguard.deviceRulesWithPort: Generate device specific rules including the "via-port" attribute.

- services.usbguard.enable: Whether to enable USBGuard daemon.
- services.usbguard.implicitPolicyTarget: How to treat USB devices that don't match any rule in the policy.
Target should be one of allow, block or reject (logically remove the
device node from the system).

- services.usbguard.implictPolicyTarget: Alias of {option}`services.usbguard.implicitPolicyTarget`.
- services.usbguard.insertedDevicePolicy: How to treat USB devices that are already connected after the daemon
starts. One of block, reject, apply-policy.

- services.usbguard.package: The usbguard package to use.
- services.usbguard.presentControllerPolicy: How to treat USB controller devices that are already connected when
the daemon starts. One of allow, block, reject, keep or apply-policy.

- services.usbguard.presentDevicePolicy: How to treat USB devices that are already connected when the daemon
starts. Policy should be one of allow, block, reject, keep (keep
whatever state the device is currently in) or apply-policy (evaluate
the rule set for every present device).

- services.usbguard.restoreControllerDeviceState: The  USBGuard  daemon  modifies  some attributes of controller
devices like the default authorization state of new child device
instances. Using this setting, you can control whether the daemon
will try to restore the attribute values to the state before
modification on shutdown.

- services.usbguard.ruleFile: This tells the USBGuard daemon which file to load as policy rule set.

The file can be changed manually or via the IPC interface assuming it has the right file permissions.

For more details see {manpage}`usbguard-rules.conf(5)`.

- services.usbguard.rules: The USBGuard daemon will load this as the policy rule set.
As these rules are NixOS managed they are immutable and can't
be changed by the IPC interface.

If you do not set this option, the USBGuard daemon will load
it's policy rule set from the option configured in `services.usbguard.ruleFile`.

Running `usbguard generate-policy` as root will
generate a config for your currently plugged in devices.

For more details see {manpage}`usbguard-rules.conf(5)`.

- services.usbmuxd.enable: Enable the usbmuxd ("USB multiplexing daemon") service. This daemon is
in charge of multiplexing connections over USB to an iOS device. This is
needed for transferring data from and to iOS devices (see ifuse). Also
this may enable plug-n-play tethering for iPhones.

- services.usbmuxd.group: The group usbmuxd should use to run after startup.

- services.usbmuxd.package: Which package to use for the usbmuxd daemon.
- services.usbmuxd.user: The user usbmuxd should use to run after startup.

- services.usbrelayd.broker: Hostname or IP address of your MQTT Broker.
- services.usbrelayd.clientName: Name, your client connects as.
- services.usbrelayd.enable: Whether to enable USB Relay MQTT daemon.
- services.userborn.enable: Whether to enable userborn.
- services.userborn.package: The userborn package to use.
- services.userborn.passwordFilesLocation: The location of the original password files.

If this is not `/etc`, the files are symlinked from this location to `/etc`.

The primary motivation for this is an immutable `/etc`, where we cannot
write the files directly to `/etc`.

However this an also serve other use cases, e.g. when `/etc` is on a `tmpfs`.

- services.userdbd.enable: Whether to enable the systemd JSON user/group record lookup service
.
- services.userdbd.enableSSHSupport: Whether to enable exposing OpenSSH public keys defined in userdb. Be aware that this
enables modifying public keys at runtime, either by users managed by
{option}`services.homed`, or globally via drop-in files
.
- services.userdbd.silenceHighSystemUsers: Silence warning about system users with high UIDs.
- services.ustreamer.autoStart: Wether to start µStreamer on boot. Disabling this will use socket
activation. The service will stop gracefully after some inactivity.
Disabling this will set `--exit-on-no-clients=300`

- services.ustreamer.device: The v4l2 device to stream.

- services.ustreamer.enable: Whether to enable µStreamer, a lightweight MJPEG-HTTP streamer.
- services.ustreamer.extraArgs: Extra arguments to pass to `ustreamer`. See {manpage}`ustreamer(1)`

- services.ustreamer.listenAddress: Address to expose the HTTP server. This accepts values for
ListenStream= defined in {manpage}`systemd.socket(5)`

- services.ustreamer.package: The ustreamer package to use.
- services.uvcvideo.dynctrl.enable: Whether to enable {command}`uvcvideo` dynamic controls.

Note that enabling this brings the {command}`uvcdynctrl` tool
into your environment and register all dynamic controls from
specified {command}`packages` to the {command}`uvcvideo` driver.

- services.uvcvideo.dynctrl.packages: List of packages containing {command}`uvcvideo` dynamic controls
rules. All files found in
{file}`«pkg»/share/uvcdynctrl/data`
will be included.

Note that these will serve as input to the {command}`libwebcam`
package which through its own {command}`udev` rule will register
the dynamic controls from specified packages to the {command}`uvcvideo`
driver.

- services.uwsgi.capabilities: Grant capabilities to the uWSGI instance. See the
{manpage}`capabilities(7)` for available values.

::: {.note}
uWSGI runs as an unprivileged user (even as Emperor) with the minimal
capabilities required. This option can be used to add fine-grained
permissions without running the service as root.

When in Emperor mode, any capability to be inherited by a vassal must
be specified again in the vassal configuration using `cap`.
See the uWSGI [docs](https://uwsgi-docs.readthedocs.io/en/latest/Capabilities.html)
for more information.
:::

- services.uwsgi.enable: Enable uWSGI
- services.uwsgi.group: Group account under which uWSGI runs.
- services.uwsgi.instance: uWSGI configuration. It awaits an attribute `type` inside which can be either
`normal` or `emperor`.

For `normal` mode you can specify `pythonPackages` as a function
from libraries set into a list of libraries. `pythonpath` will be set accordingly.

For `emperor` mode, you should use `vassals` attribute
which should be either a set of names and configurations or a path to a directory.

Other attributes will be used in configuration file as-is. Notice that you can redefine
`plugins` setting here.

- services.uwsgi.package
- services.uwsgi.plugins: Plugins used with uWSGI
- services.uwsgi.runDir: Where uWSGI communication sockets can live
- services.uwsgi.user: User account under which uWSGI runs.
- services.v2ray.config: The configuration object.

Either `configFile` or `config` must be specified.

See <https://www.v2fly.org/en_US/v5/config/overview.html>.

- services.v2ray.configFile: The absolute path to the configuration file.

Either `configFile` or `config` must be specified.

See <https://www.v2fly.org/en_US/v5/config/overview.html>.

- services.v2ray.enable: Whether to run v2ray server.

Either `configFile` or `config` must be specified.

- services.v2ray.package: The v2ray package to use.
- services.v2raya.cliPackage: The v2ray package to use. This is the package used for overriding the value of the `v2ray` attribute in the package set by `services.v2raya.package`.
- services.v2raya.enable: Whether to enable the v2rayA service.
- services.v2raya.package: The v2raya package to use.
- services.v4l2-relayd.instances: v4l2-relayd instances to be created.

- services.varnish.config: Verbatim default.vcl configuration.

- services.varnish.enable: Whether to enable Varnish Server.
- services.varnish.enableConfigCheck: Whether to enable checking the config during build time.
- services.varnish.extraCommandLine: Command line switches for varnishd (run 'varnishd -?' to get list of options)

- services.varnish.extraModules: Varnish modules (except 'std').

- services.varnish.http_address: HTTP listen address and port.

- services.varnish.listen: Accept for client requests on the specified listen addresses.
- services.varnish.package: The varnish package to use.
- services.varnish.stateDir
- services.vault.address: The name of the ip interface to listen to
- services.vault.dev: In this mode, Vault runs in-memory and starts unsealed. This option is not meant production but for development and testing i.e. for nixos tests.

- services.vault.devRootTokenID: Initial root token. This only applies when {option}`services.vault.dev` is true

- services.vault.enable: Whether to enable Vault daemon.
- services.vault.extraConfig: Extra text appended to {file}`vault.hcl`.
- services.vault.extraSettingsPaths: Configuration files to load besides the immutable one defined by the NixOS module.
This can be used to avoid putting credentials in the Nix store, which can be read by any user.

Each path can point to a JSON- or HCL-formatted file, or a directory
to be scanned for files with `.hcl` or
`.json` extensions.

To upload the confidential file with NixOps, use for example:

```
# https://releases.nixos.org/nixops/latest/manual/manual.html#opt-deployment.keys
deployment.keys."vault.hcl" = let db = import ./db-credentials.nix; in {
  text = ''
    storage "postgresql" {
      connection_url = "postgres://${db.username}:${db.password}@host.example.com/exampledb?sslmode=verify-ca"
    }
  '';
  user = "vault";
};
services.vault.extraSettingsPaths = ["/run/keys/vault.hcl"];
services.vault.storageBackend = "postgresql";
users.users.vault.extraGroups = ["keys"];
```

- services.vault.listenerExtraConfig: Extra text appended to the listener section.
- services.vault.package: The vault package to use.
- services.vault.storageBackend: The name of the type of storage backend
- services.vault.storageConfig: HCL configuration to insert in the storageBackend section.

Confidential values should not be specified here because this option's
value is written to the Nix store, which is publicly readable.
Provide credentials and such in a separate file using
[](#opt-services.vault.extraSettingsPaths).

- services.vault.storagePath: Data directory for file backend
- services.vault.telemetryConfig: Telemetry configuration
- services.vault.tlsCertFile: TLS certificate file. TLS will be disabled unless this option is set
- services.vault.tlsKeyFile: TLS private key file. TLS will be disabled unless this option is set
- services.vault-agent.instances: Attribute set of vault-agent instances.
Creates independent `vault-agent-${name}.service` systemd units for each instance defined here.

- services.vaultwarden.backupDir: The directory under which vaultwarden will backup its persistent data.

- services.vaultwarden.config: The configuration of vaultwarden is done through environment variables,
therefore it is recommended to use upper snake case (e.g. {env}`DISABLE_2FA_REMEMBER`).

However, camel case (e.g. `disable2FARemember`) is also supported:
The NixOS module will convert it automatically to
upper case snake case (e.g. {env}`DISABLE_2FA_REMEMBER`).
In this conversion digits (0-9) are handled just like upper case characters,
so `foo2` would be converted to {env}`FOO_2`.
Names already in this format remain unchanged, so `FOO2` remains `FOO2` if passed as such,
even though `foo2` would have been converted to {env}`FOO_2`.
This allows working around any potential future conflicting naming conventions.

Based on the attributes passed to this config option an environment file will be generated
that is passed to vaultwarden's systemd service.

The available configuration options can be found in
[the environment template file](https://github.com/dani-garcia/vaultwarden/blob/1.34.3/.env.template).

See [](#opt-services.vaultwarden.environmentFile) for how
to set up access to the Admin UI to invite initial users.

- services.vaultwarden.dbBackend: Which database backend vaultwarden will be using.

- services.vaultwarden.enable: Whether to enable vaultwarden.
- services.vaultwarden.environmentFile: Additional environment file or files as defined in {manpage}`systemd.exec(5)`.

Secrets like {env}`ADMIN_TOKEN` and {env}`SMTP_PASSWORD`
should be passed to the service without adding them to the world-readable Nix store.

Note that this file needs to be available on the host on which `vaultwarden` is running.

As a concrete example, to make the Admin UI available (from which new users can be invited initially),
the secret {env}`ADMIN_TOKEN` needs to be defined as described
[here](https://github.com/dani-garcia/vaultwarden/wiki/Enabling-admin-page):

```
# Admin secret token, see
# https://github.com/dani-garcia/vaultwarden/wiki/Enabling-admin-page
ADMIN_TOKEN=...copy-paste a unique generated secret token here...
```

- services.vaultwarden.package: The vaultwarden package to use.
- services.vaultwarden.webVaultPackage: The webvault package to use.
- services.vdirsyncer.enable: Whether to enable vdirsyncer.
- services.vdirsyncer.jobs: vdirsyncer job configurations
- services.vdirsyncer.package: The vdirsyncer package to use.
- services.vdr.enable: Whether to enable VDR, a video disk recorder.
- services.vdr.enableLirc: Whether to enable LIRC.
- services.vdr.extraArguments: Additional command line arguments to pass to VDR.
- services.vdr.group: Group under which the VDRvdr service runs.

- services.vdr.package: The vdr package to use.
- services.vdr.user: User under which the VDR service runs.

- services.vdr.videoDir: Recording directory
- services.vector.enable: Whether to enable Vector, a high-performance observability data pipeline.
- services.vector.gracefulShutdownLimitSecs: Set the duration in seconds to wait for graceful shutdown after SIGINT or SIGTERM are received.
After the duration has passed, Vector will force shutdown.

- services.vector.journaldAccess: Enable Vector to access journald.

- services.vector.package: The vector package to use.
- services.vector.settings: Specify the configuration for Vector in Nix.

- services.vector.validateConfig: Enable the checking of the vector config during build time. This should be disabled when interpolating environment variables.

- services.veilid.enable: Whether to enable Veilid Headless Node.
- services.veilid.openFirewall: Whether to open firewall on ports 5150/tcp, 5150/udp
- services.veilid.settings: Build veilid-server.conf with nix expression.
Check <link xlink:href="https://veilid.gitlab.io/developer-book/admin/config.html#configuration-keys">Configuration Keys</link>.

- services.venus
- services.victorialogs.basicAuthPasswordFile: File that contains the Basic Auth password used to protect VictoriaLogs instance by authorization

- services.victorialogs.basicAuthUsername: Basic Auth username used to protect VictoriaLogs instance by authorization

- services.victorialogs.enable: Whether to enable VictoriaLogs is an open source user-friendly database for logs from VictoriaMetrics.
- services.victorialogs.extraOptions: Extra options to pass to VictoriaLogs. See {command}`victoria-logs -help` for
possible options.

- services.victorialogs.listenAddress: TCP address to listen for incoming http requests.

- services.victorialogs.package: The victorialogs package to use.
- services.victorialogs.stateDir: Directory below `/var/lib` to store VictoriaLogs data.
This directory will be created automatically using systemd's StateDirectory mechanism.

- services.victoriametrics.basicAuthPasswordFile: File that contains the Basic Auth password used to protect VictoriaMetrics instance by authorization

- services.victoriametrics.basicAuthUsername: Basic Auth username used to protect VictoriaMetrics instance by authorization

- services.victoriametrics.checkConfig: Check configuration.

If you use credentials stored in external files (`environmentFile`, etc),
they will not be visible  and it will report errors, despite a correct configuration.

- services.victoriametrics.enable: Whether to enable VictoriaMetrics in single-node mode.

VictoriaMetrics is a fast, cost-effective and scalable monitoring solution and time series database.

- services.victoriametrics.extraOptions: Extra options to pass to VictoriaMetrics. See the docs:
<https://docs.victoriametrics.com/single-server-victoriametrics/#list-of-command-line-flags>
or {command}`victoriametrics -help` for more information.

- services.victoriametrics.listenAddress: TCP address to listen for incoming http requests.

- services.victoriametrics.package: The victoriametrics package to use.
- services.victoriametrics.prometheusConfig: Config for prometheus style metrics.
See the docs: <https://docs.victoriametrics.com/vmagent/#how-to-collect-metrics-in-prometheus-format>
for more information.

- services.victoriametrics.retentionPeriod: How long to retain samples in storage.
The minimum retentionPeriod is 24h or 1d. See also -retentionFilter
The following optional suffixes are supported: s (second), h (hour), d (day), w (week), y (year).
If suffix isn't set, then the duration is counted in months (default 1)

- services.victoriametrics.stateDir: Directory below `/var/lib` to store VictoriaMetrics metrics data.
This directory will be created automatically using systemd's StateDirectory mechanism.

- services.victoriatraces.basicAuthPasswordFile: File that contains the Basic Auth password used to protect VictoriaTraces instance by authorization

- services.victoriatraces.basicAuthUsername: Basic Auth username used to protect VictoriaTraces instance by authorization

- services.victoriatraces.enable: Whether to enable VictoriaTraces is an open source distributed traces storage and query engine from VictoriaMetrics.
- services.victoriatraces.extraOptions: Extra options to pass to VictoriaTraces. See {command}`victoria-traces -help` for
possible options.

- services.victoriatraces.listenAddress: TCP address to listen for incoming http requests.

- services.victoriatraces.package: The victoriatraces package to use.
- services.victoriatraces.retentionPeriod: Retention period for trace data. Data older than retentionPeriod is automatically deleted.

- services.victoriatraces.stateDir: Directory below `/var/lib` to store VictoriaTraces data.
This directory will be created automatically using systemd's StateDirectory mechanism.

- services.vikunja.database
- services.vikunja.enable: Whether to enable vikunja service.
- services.vikunja.environmentFiles: List of environment files set in the vikunja systemd service.
For example passwords should be set in one of these files.

- services.vikunja.frontendHostname: The Hostname under which the frontend is running.
- services.vikunja.frontendScheme: Whether the site is available via http or https.

- services.vikunja.package: The vikunja package to use.
- services.vikunja.port: The TCP port exposed by the API.
- services.vikunja.settings: Vikunja configuration. Refer to
<https://vikunja.io/docs/config-options/>
for details on supported values.

- services.vikunja.setupNginx
- services.virtuoso
- services.vlagent.enable: Whether to enable VictoriaMetrics's `vlagent`.

`vlagent` is a tiny agent which helps you collect logs from various sources and store them in VictoriaLogs .

- services.vlagent.extraArgs: Extra args to pass to `vlagent`. See the docs:
<https://docs.victoriametrics.com/vlagent.html#advanced-usage>
or {command}`vlagent -help` for more information.

- services.vlagent.openFirewall: Whether to open the firewall for the default ports.

- services.vlagent.package: The vlagent package to use.
- services.vlagent.remoteWrite.basicAuthPasswordFile: File that contains the Basic Auth password used to connect to remote_write endpoint

- services.vlagent.remoteWrite.basicAuthUsername: Basic Auth username used to connect to remote_write endpoint

- services.vlagent.remoteWrite.maxDiskUsagePerUrl: The maximum file-based buffer size in bytes. Supports the following optional suffixes for size values: KB, MB, GB, TB, KiB, MiB, GiB, TiB.
See docs for more infomations: <https://docs.victoriametrics.com/vlagent.html#advanced-usage>

- services.vlagent.remoteWrite.url: Endpoint for the victorialogs instance

- services.vmagent.checkConfig: Check configuration.

If you use credentials stored in external files (`environmentFile`, etc),
they will not be visible  and it will report errors, despite a correct configuration.

- services.vmagent.dataDir
- services.vmagent.enable: Whether to enable VictoriaMetrics's `vmagent`.

`vmagent` efficiently scrape metrics from Prometheus-compatible exporters

- services.vmagent.extraArgs: Extra args to pass to `vmagent`. See the docs:
<https://docs.victoriametrics.com/vmagent.html#advanced-usage>
or {command}`vmagent -help` for more information.

- services.vmagent.group
- services.vmagent.openFirewall: Whether to open the firewall for the default ports.

- services.vmagent.package: The vmagent package to use.
- services.vmagent.prometheusConfig: Config for prometheus style metrics

- services.vmagent.remoteWrite.basicAuthPasswordFile: File that contains the Basic Auth password used to connect to remote_write endpoint

- services.vmagent.remoteWrite.basicAuthUsername: Basic Auth username used to connect to remote_write endpoint

- services.vmagent.remoteWrite.url: Endpoint for prometheus compatible remote_write

- services.vmagent.remoteWriteUrl: Alias of {option}`services.vmagent.remoteWrite.url`.
- services.vmagent.user
- services.vmalert.enable: Alias of {option}`services.vmalert.instances."".enable`.
- services.vmalert.instances: Define multiple instances of vmalert.

- services.vmalert.package: The victoriametrics package to use.
- services.vmalert.rules: Alias of {option}`services.vmalert.instances."".rules`.
- services.vmalert.settings: Alias of {option}`services.vmalert.instances."".settings`.
- services.vmwareGuest: Alias of {option}`virtualisation.vmware.guest`.
- services.vnstat.enable: Whether to enable update of network usage statistics via vnstatd.
- services.vnstat.package: The vnstat package to use.
- services.vsftpd.allowWriteableChroot: Allow the use of writeable root inside chroot().

- services.vsftpd.anonymousMkdirEnable: Whether any uploads are permitted to anonymous users.

- services.vsftpd.anonymousUmask: Anonymous write umask.
- services.vsftpd.anonymousUploadEnable: Whether any uploads are permitted to anonymous users.

- services.vsftpd.anonymousUser: Whether to enable the anonymous FTP user.

- services.vsftpd.anonymousUserHome: Directory to consider the HOME of the anonymous user.

- services.vsftpd.anonymousUserNoPassword: Whether to disable the password for the anonymous FTP user.

- services.vsftpd.chrootlocalUser: Whether local users are confined to their home directory.

- services.vsftpd.enable: Whether to enable vsftpd.
- services.vsftpd.enableVirtualUsers: Whether to enable the `pam_userdb`-based
virtual user system

- services.vsftpd.extraConfig: Extra configuration to add at the bottom of the generated configuration file.
- services.vsftpd.forceLocalDataSSL: Only applies if {option}`sslEnable` is true. Non anonymous (local) users
must use a secure SSL connection for sending/receiving data on data connection.

- services.vsftpd.forceLocalLoginsSSL: Only applies if {option}`sslEnable` is true. Non anonymous (local) users
must use a secure SSL connection to send a password.

- services.vsftpd.localRoot: This option represents a directory which vsftpd will try to
change into after a local (i.e. non- anonymous) login.

Failure is silently ignored.

- services.vsftpd.localUsers: Whether to enable FTP for local users.

- services.vsftpd.portPromiscuous: Set to YES if you want to disable the PORT security check that ensures that
outgoing data connections can only connect to the client. Only enable if you
know what you are doing!

- services.vsftpd.rsaCertFile: RSA certificate file.
- services.vsftpd.rsaKeyFile: RSA private key file.
- services.vsftpd.ssl_sslv2: Only applies if {option}`ssl_enable` is activated. If
enabled, this option will permit SSL v2 protocol connections.
TLS v1 connections are preferred.

- services.vsftpd.ssl_sslv3: Only applies if {option}`ssl_enable` is activated. If
enabled, this option will permit SSL v3 protocol connections.
TLS v1 connections are preferred.

- services.vsftpd.ssl_tlsv1: Only applies if {option}`ssl_enable` is activated. If
enabled, this option will permit TLS v1 protocol connections.
TLS v1 connections are preferred.

- services.vsftpd.userDbPath: Only applies if {option}`enableVirtualUsers` is true.
Path pointing to the `pam_userdb` user
database used by vsftpd to authenticate the virtual users.

This user list should be stored in the Berkeley DB database
format.

To generate a new user database, create a text file, add
your users using the following format:
```
user1
password1
user2
password2
```

You can then install `pkgs.db` to generate
the Berkeley DB using
```
db_load -T -t hash -f logins.txt userDb.db
```

Caution: `pam_userdb` will automatically
append a `.db` suffix to the filename you
provide though this option. This option shouldn't include
this filetype suffix.

- services.vsftpd.userlist: See {option}`userlistFile`.
- services.vsftpd.userlistDeny: Specifies whether {option}`userlistFile` is a list of user
names to allow or deny access.
The default `false` means whitelist/allow.

- services.vsftpd.userlistEnable: Whether users are included.

- services.vsftpd.userlistFile: Newline separated list of names to be allowed/denied if {option}`userlistEnable`
is `true`. Meaning see {option}`userlistDeny`.

The default is a file containing the users from {option}`userlist`.

If explicitly set to null userlist_file will not be set in vsftpd's config file.

- services.vsftpd.virtualUseLocalPrivs: If enabled, virtual users will use the same privileges as local
users. By default, virtual users will use the same privileges as
anonymous users, which tends to be more restrictive (especially
in terms of write access).

- services.vsftpd.writeEnable: Whether any write activity is permitted to users.

- services.vsmartcard-vpcd.enable: Whether to enable Virtual smart card driver..
- services.vsmartcard-vpcd.hostname: Hostname of a waiting vpicc server vpcd will be connecting to. Use /dev/null for listening mode.

- services.vsmartcard-vpcd.port: Port number vpcd will be listening on.

- services.vwifi.client.enable: Whether to enable vwifi client.
- services.vwifi.client.extraArgs: Extra arguments to pass to vwifi-client. You can use this if you want to bring
the radios up using vwifi-client instead of at boot.

- services.vwifi.client.serverAddress: The address of the server. If set to null, will try to use the vsock protocol.
Note that this assumes that the server is spawned on the host and passed through to
QEMU, with something like:

-device vhost-vsock-pci,id=vwifi0,guest-cid=42

- services.vwifi.client.serverPort: The server port port. Set to null if we should leave it unset.

- services.vwifi.client.spy: Whether to enable spy mode, useful for wireless monitors.
- services.vwifi.module.enable: Whether to enable mac80211_hwsim module.
- services.vwifi.module.macPrefix: The prefix for MAC addresses to use, without the trailing ':'.
If one radio is created, you can specify the whole MAC address here.
The default is defined in vwifi/src/config.h.

- services.vwifi.module.numRadios: The number of virtual radio interfaces to create.
- services.vwifi.package: The vwifi package to use.
- services.vwifi.server.enable: Whether to enable vwifi server.
- services.vwifi.server.extraArgs: Extra arguments to pass to vwifi-server. You can use this for things including
changing the ports or inducing packet loss.

- services.vwifi.server.openFirewall: Whether to enable opening the firewall for the TCP and spy ports.
- services.vwifi.server.ports.control: The control interface port. Set to null if we should leave it unset.

- services.vwifi.server.ports.spy: The spy interface port. Set to null if we should leave it unset.

- services.vwifi.server.ports.tcp: The TCP server port. Set to null if we should leave it unset.

- services.vwifi.server.ports.vhost: The vhost port. Set to null if we should leave it unset.

- services.vwifi.server.vsock.enable: Whether to enable vsock kernel module.
- services.waagent.enable: Whether to enable Windows Azure Linux Agent.
- services.waagent.extraPackages: Additional packages to add to the waagent {env}`PATH`.

- services.waagent.package: The waagent package to use.
- services.waagent.settings: The waagent.conf configuration, see <https://learn.microsoft.com/en-us/azure/virtual-machines/extensions/agent-linux> for documentation.

- services.wakapi.database.createLocally: Whether to enable automatic database configuration.

::: {.note}
Only PostgreSQL is supported for the time being.
:::
.
- services.wakapi.database.dialect: The database type to use for Wakapi.

- services.wakapi.database.name: The name of the database to use for Wakapi.

- services.wakapi.database.user: The name of the user to use for Wakapi.

- services.wakapi.enable: Whether to enable Wakapi.
- services.wakapi.package: The wakapi package to use.
- services.wakapi.passwordSalt: The password salt to use for Wakapi.

- services.wakapi.passwordSaltFile: The path to a file containing the password salt to use for Wakapi.

- services.wakapi.settings: Settings for Wakapi.

See [config.default.yml](https://github.com/muety/wakapi/blob/master/config.default.yml) for a list of all possible options.

- services.wakapi.smtpPassword: The password used for the smtp mailed to used by Wakapi.

- services.wakapi.smtpPasswordFile: The path to a file containing the password for the smtp mailer used by Wakapi.

- services.wakapi.stateDir: The state directory where data is stored. Will also be used as the
working directory for the wakapi service.

- services.wakeonlan
- services.wasabibackend.customConfigFile: Defines the path to a custom configuration file that is copied to the user's directory. Overrides any config options.
- services.wasabibackend.dataDir: The data directory for the Wasabi backend node.
- services.wasabibackend.enable: Whether to enable Wasabi backend service.
- services.wasabibackend.endpoint.ip: IP address for P2P connection to bitcoind.
- services.wasabibackend.endpoint.port: Port for P2P connection to bitcoind.
- services.wasabibackend.group: The group as which to run the wasabibackend node.
- services.wasabibackend.network: The network to use for the Wasabi backend service.
- services.wasabibackend.rpc.ip: IP address for RPC connection to bitcoind.
- services.wasabibackend.rpc.password: RPC password for the bitcoin endpoint. Warning: this is stored in cleartext in the Nix store! Use `configFile` or `passwordFile` if needed.
- services.wasabibackend.rpc.passwordFile: File that contains the password of the RPC user.
- services.wasabibackend.rpc.port: Port for RPC connection to bitcoind.
- services.wasabibackend.rpc.user: RPC user for the bitcoin endpoint.
- services.wasabibackend.user: The user as which to run the wasabibackend node.
- services.wastebin.enable: Whether to enable Wastebin, a pastebin service.
- services.wastebin.package: The wastebin package to use.
- services.wastebin.secretFile: Path to file containing sensitive environment variables.
Some variables that can be considered secrets are:

- WASTEBIN_PASSWORD_SALT:
  salt used to hash user passwords used for encrypting pastes.

- WASTEBIN_SIGNING_KEY:
  sets the key to sign cookies. If not set, a random key will be
  generated which means cookies will become invalid after restarts and
  paste creators will not be able to delete their pastes anymore.

- services.wastebin.settings: Additional configuration for wastebin, see
<https://github.com/matze/wastebin#usage> for supported values.
For secrets use secretFile option instead.

- services.wastebin.stateDir: State directory of the daemon.
- services.watchdogd.enable: Whether to enable watchdogd, an advanced system & process supervisor.
- services.watchdogd.package: The watchdogd package to use.
- services.watchdogd.settings: Configuration to put in {file}`watchdogd.conf`.
See {manpage}`watchdogd.conf(5)` for more details.

- services.webdav.configFile: Path to config file. If this option is set, it will override any
configuration done in options.services.webdav.settings.

- services.webdav.enable: Whether to enable WebDAV server.
- services.webdav.environmentFile: Environment file as defined in {manpage}`systemd.exec(5)`.

- services.webdav.group: Group under which WebDAV runs.
- services.webdav.package: The webdav package to use.
- services.webdav.settings: Attrset that is converted and passed as config file. Available options
can be found at
[here](https://github.com/hacdias/webdav).

This program supports reading username and password configuration
from environment variables, so it's strongly recommended to store
username and password in a separate
[EnvironmentFile](https://www.freedesktop.org/software/systemd/man/systemd.exec.html#EnvironmentFile=).
This prevents adding secrets to the world-readable Nix store.

- services.webdav.user: User account under which WebDAV runs.
- services.webdav-server-rs.configFile: Path to config file. If this option is set, it will override any
configuration done in services.webdav-server-rs.settings.

- services.webdav-server-rs.debug: Enable debug mode.
- services.webdav-server-rs.enable: Whether to enable WebDAV server.
- services.webdav-server-rs.group: Group to run under when setuid is not enabled.
- services.webdav-server-rs.settings: Attrset that is converted and passed as config file. Available
options can be found at
[here](https://github.com/miquels/webdav-server-rs/blob/master/webdav-server.toml).

- services.webdav-server-rs.user: User to run under when setuid is not enabled.
- services.webhook.enable: Whether to enable [Webhook](https://github.com/adnanh/webhook), a server written in Go that allows you to create HTTP endpoints (hooks),
which execute configured commands for any person or service that knows the URL
.
- services.webhook.enableTemplates: Enable the generated hooks file to be parsed as a Go template.
See [the documentation](https://github.com/adnanh/webhook/blob/master/docs/Templates.md) for more information.

- services.webhook.environment: Extra environment variables passed to webhook.
- services.webhook.extraArgs: These are arguments passed to the webhook command in the systemd service.
You can find the available arguments and options in the [documentation][parameters].

[parameters]: https://github.com/adnanh/webhook/blob/master/docs/Webhook-Parameters.md

- services.webhook.group: Webhook will be run under this group.

If set, you must create this group yourself!

- services.webhook.hooks: The actual configuration of which hooks will be served.

Read more on the [project homepage] and on the [hook definition] page.
At least one hook needs to be configured.

[hook definition]: https://github.com/adnanh/webhook/blob/master/docs/Hook-Definition.md
[project homepage]: https://github.com/adnanh/webhook#configuration

- services.webhook.hooksTemplated: Same as {option}`hooks`, but these hooks are specified as literal strings instead of Nix values,
and hence can include [template syntax](https://github.com/adnanh/webhook/blob/master/docs/Templates.md)
which might not be representable as JSON.

Template syntax requires the {option}`enableTemplates` option to be set to `true`, which is
done by default if this option is set.

- services.webhook.ip: The IP webhook should serve hooks on.

The default means it can be reached on any interface if `openFirewall = true`.

- services.webhook.openFirewall: Open the configured port in the firewall for external ingress traffic.
Preferably the Webhook server is instead put behind a reverse proxy.

- services.webhook.package: The webhook package to use.
- services.webhook.port: The port webhook should be reachable from.
- services.webhook.urlPrefix: The URL path prefix to use for served hooks (`protocol://yourserver:port/${prefix}/hook-id`).

- services.webhook.user: Webhook will be run under this user.

If set, you must create this user yourself!

- services.webhook.verbose: Whether to show verbose output.
- services.weblate.configurePostgresql: Whether to enable and configure a local PostgreSQL server by creating a user and database for weblate.
The default `settings` reference this database, if you disable this option you must provide a database URL in `extraConfig`.

- services.weblate.djangoSecretKeyFile: Location of the Django secret key.

This should be a path pointing to a file with secure permissions (not /nix/store).

Can be generated with `weblate-generate-secret-key` which is available as the `weblate` user.

- services.weblate.enable: Whether to enable Weblate service.
- services.weblate.extraConfig: Text to append to `settings.py` Weblate configuration file.

- services.weblate.localDomain: The domain name serving your Weblate instance.
- services.weblate.package: The weblate package to use.
- services.weblate.smtp.enable: Whether to enable Weblate SMTP support.
- services.weblate.smtp.from: The from address being used in sent emails.
- services.weblate.smtp.host: SMTP host used when sending emails to users.
- services.weblate.smtp.passwordFile: Location of a file containing the SMTP password.

This should be a path pointing to a file with secure permissions (not /nix/store).

- services.weblate.smtp.port: SMTP port used when sending emails to users.
- services.weblate.smtp.user: SMTP login name.
- services.weechat.binary: Binary to execute.
- services.weechat.enable: Whether to enable weechat.
- services.weechat.headless: Allows specifying if weechat should run in TUI or headless mode.

- services.weechat.package: The weechat package to use.
- services.weechat.root: Weechat state directory.
- services.weechat.sessionName: Name of the `screen` session for weechat.
- services.wg-access-server.enable: Whether to enable wg-access-server.
- services.wg-access-server.package: The wg-access-server package to use.
- services.wg-access-server.secretsFile: yaml file containing all secrets. this needs to be in the same structure as the configuration.

This must to contain the admin password and wireguard private key.
As well as the secrets for your auth backend.

Example:
```yaml
adminPassword: <admin password>
wireguard:
  privateKey: <wireguard private key>
auth:
  oidc:
    clientSecret: <client secret>
```

- services.wg-access-server.settings: See <https://www.freie-netze.org/wg-access-server/2-configuration/> for possible options
- services.wg-netmanager.enable: Whether to enable Wireguard network manager.
- services.wgautomesh.enable: Whether to enable the wgautomesh daemon.
- services.wgautomesh.enableGossipEncryption: Enable encryption of gossip traffic.
- services.wgautomesh.enablePersistence: Enable persistence of Wireguard peer info between restarts.
- services.wgautomesh.gossipSecretFile: File containing the gossip secret, a shared secret key to use for gossip
encryption.  Required if `enableGossipEncryption` is set.  This file
may contain any arbitrary-length utf8 string.  To generate a new gossip
secret, use a command such as `openssl rand -base64 32`.

- services.wgautomesh.logLevel: wgautomesh log level.
- services.wgautomesh.openFirewall: Automatically open gossip port in firewall (recommended).
- services.wgautomesh.settings: Configuration for wgautomesh.
- services.whisparr.dataDir: The directory where Whisparr stores its data files.
- services.whisparr.enable: Whether to enable Whisparr.
- services.whisparr.environmentFiles: Environment file to pass secret configuration values.
Each line must follow the `WHISPARR__SECTION__KEY=value` pattern.
Please consult the documentation at the [wiki](https://wiki.servarr.com/useful-tools#using-environment-variables-for-config).

- services.whisparr.group: Group under which Whisparr runs.
- services.whisparr.openFirewall: Open ports in the firewall for the Whisparr web interface.
- services.whisparr.package: The whisparr package to use.
- services.whisparr.settings: Attribute set of arbitrary config options.
Please consult the documentation at the [wiki](https://wiki.servarr.com/useful-tools#using-environment-variables-for-config).

WARNING: this configuration is stored in the world-readable Nix store!
For secrets use [](#opt-services.whisparr.environmentFiles).

- services.whisparr.user: User account under which Whisparr runs.
- services.whitebophir.enable: Whether to enable whitebophir, an online collaborative whiteboard server (persistent state will be maintained under {file}`/var/lib/whitebophir`).
- services.whitebophir.listenAddress: Address to listen on (use 0.0.0.0 to allow access from any address).
- services.whitebophir.package: The whitebophir package to use.
- services.whitebophir.port: Port to bind to.
- services.whoami.enable: Whether to enable whoami.
- services.whoami.extraArgs: Extra command line arguments to pass to whoami. See <https://github.com/traefik/whoami#flags> for details.
- services.whoami.package: The whoami package to use.
- services.whoami.port: The port whoami should listen on.
- services.whoogle-search.enable: Whether to enable Whoogle, a metasearch engine.
- services.whoogle-search.extraEnv: Extra environment variables to pass to Whoogle, see
https://github.com/benbusby/whoogle-search?tab=readme-ov-file#environment-variables

- services.whoogle-search.listenAddress: Address to listen on for the web interface.
- services.whoogle-search.port: Port to listen on.
- services.wiki-js.enable: Whether to enable wiki-js.
- services.wiki-js.environmentFile: Environment file to inject e.g. secrets into the configuration.

- services.wiki-js.settings: Settings to configure `wiki-js`. This directly
corresponds to [the upstream configuration options](https://docs.requarks.io/install/config).

Secrets can be injected via the environment by
- specifying [](#opt-services.wiki-js.environmentFile)
  to contain secrets
- and setting sensitive values to `$(ENVIRONMENT_VAR)`
  with this value defined in the environment-file.

- services.wiki-js.stateDirectoryName: Name of the directory in {file}`/var/lib`.

- services.windmill.baseUrl: The base url that windmill will be served on.

- services.windmill.database.createLocally: Whether to create a local database automatically.
- services.windmill.database.name: Database name.
- services.windmill.database.url: Database url. Note that any secret here would be world-readable. Use `services.windmill.database.urlPath` unstead to include secrets in the url.
- services.windmill.database.urlPath: Path to the file containing the database url windmill should connect to. This is not deducted from database user and name as it might contain a secret

- services.windmill.database.user: Database user.
- services.windmill.enable: Whether to enable windmill service.
- services.windmill.logLevel: Log level
- services.windmill.lspPort: Port the windmill lsp listens on.
- services.windmill.package: The windmill package to use.
- services.windmill.serverPort: Port the windmill server listens on.
- services.winstone
- services.wivrn.autoStart: Whether to enable starting the service by default.
- services.wivrn.config.enable: Whether to enable configuration for WiVRn.
- services.wivrn.config.json: Configuration for WiVRn. The attributes are serialized to JSON in config.json. The server will fallback to default values for any missing attributes.

Like upstream, the application option is a list including the application and it's flags. In the case of the NixOS module however, the first element of the list must be a package. The module will assert otherwise.
The application can be set to a single package because it gets passed to lib.toList, though this will not allow for flags to be passed.

See <https://github.com/WiVRn/WiVRn/blob/master/docs/configuration.md>

- services.wivrn.defaultRuntime: Whether to enable WiVRn as the default OpenXR runtime on the system.
The config can be found at `/etc/xdg/openxr/1/active_runtime.json`.

Note that applications can bypass this option by setting an active
runtime in a writable XDG_CONFIG_DIRS location like `~/.config`
.
- services.wivrn.enable: Whether to enable WiVRn, an OpenXR streaming application.
- services.wivrn.extraServerFlags: Flags to add to the wivrn service.
- services.wivrn.highPriority: Whether to enable high priority capability for asynchronous reprojection.
- services.wivrn.monadoEnvironment: Environment variables to be passed to the Monado environment.
- services.wivrn.openFirewall: Whether to enable the default ports in the firewall for the WiVRn server.
- services.wivrn.package: The wivrn package to use.
- services.wivrn.steam.importOXRRuntimes: Whether to enable Sets `PRESSURE_VESSEL_IMPORT_OPENXR_1_RUNTIMES` system-wide to allow Steam to automatically discover the WiVRn server.

Note that you may have to logout for this variable to be visible
.
- services.wivrn.steam.package: The steam package to use.
- services.wlock.enable: Whether to enable wlock, a Wayland sessionlocker using the ext-session-lock-v1 protocol.
- services.wlock.package: The wlock package to use.
- services.woodpecker-agents.agents: woodpecker-agents configurations
- services.woodpecker-server.enable: Whether to enable the Woodpecker-Server, a CI/CD application for automatic builds, deployments and tests.
- services.woodpecker-server.environment: woodpecker-server config environment variables, for other options read the [documentation](https://woodpecker-ci.org/docs/administration/configuration/server)
- services.woodpecker-server.environmentFile: File to load environment variables
from. This is helpful for specifying secrets.
Example content of environmentFile:
```
WOODPECKER_AGENT_SECRET=your-shared-secret-goes-here
WOODPECKER_GITEA_SECRET=gto_**************************************
```

- services.woodpecker-server.package: The woodpecker-server package to use.
- services.wordpress.sites: Specification of one or more WordPress sites to serve
- services.wordpress.webserver: Whether to use apache2 or nginx for virtual host management.

Further nginx configuration can be done by adapting `services.nginx.virtualHosts.<name>`.
See [](#opt-services.nginx.virtualHosts) for further information.

Further apache2 configuration can be done by adapting `services.httpd.virtualHosts.<name>`.
See [](#opt-services.httpd.virtualHosts) for further information.

- services.workout-tracker.address: Web interface address.
- services.workout-tracker.enable: Whether to enable workout tracking web application for personal use (or family, friends), geared towards running and other GPX-based activities.
- services.workout-tracker.environmentFile: An environment file as defined in {manpage}`systemd.exec(5)`.

Secrets like `WT_JWT_ENCRYPTION_KEY` may be passed to the service without adding them
to the world-readable Nix store.

- services.workout-tracker.package: The workout-tracker package to use.
- services.workout-tracker.port: Web interface port.
- services.workout-tracker.settings: Extra config options.

- services.writefreely.acme.enable: Whether or not to automatically fetch and configure SSL certs.
- services.writefreely.admin.initialPasswordFile: Path to a file containing the initial password for the admin user.
If not provided, the default password will be set to `nixos`.

- services.writefreely.admin.name: The name of the first admin user.
- services.writefreely.database
- services.writefreely.enable: Whether to enable Writefreely, build a digital writing community.
- services.writefreely.group: Group under which Writefreely is ran.
- services.writefreely.host: The public host name to serve.
- services.writefreely.nginx.enable: Whether or not to enable and configure nginx as a proxy for WriteFreely.
- services.writefreely.nginx.forceSSL: Whether or not to force the use of SSL.
- services.writefreely.package: The writefreely package to use.
- services.writefreely.settings: Writefreely configuration ({file}`config.ini`). Refer to
<https://writefreely.org/docs/latest/admin/config>
for details.

- services.writefreely.stateDir: The state directory where keys and data are stored.
- services.writefreely.user: User under which Writefreely is ran.
- services.wstunnel.clients: `wstunnel` clients to set up.
- services.wstunnel.enable: Whether to enable wstunnel.
- services.wstunnel.servers: `wstunnel` servers to set up.
- services.wyoming.faster-whisper.package: The wyoming-faster-whisper package to use.
- services.wyoming.faster-whisper.servers: Attribute set of wyoming-faster-whisper instances to spawn.

- services.wyoming.openwakeword.customModelsDirectories: Paths to directories with custom wake word models (*.tflite model files).

- services.wyoming.openwakeword.enable: Whether to enable Wyoming openWakeWord server.
- services.wyoming.openwakeword.extraArgs: Extra arguments to pass to the server commandline.

- services.wyoming.openwakeword.package: The wyoming-openwakeword package to use.
- services.wyoming.openwakeword.preloadModels: List of wake word models to preload after startup.

- services.wyoming.openwakeword.threshold: Activation threshold (0.0-1.0), where higher means fewer activations.

See trigger level for the relationship between activations and
wake word detections.

- services.wyoming.openwakeword.triggerLevel: Number of activations before a detection is registered.

A higher trigger level means fewer detections.

- services.wyoming.openwakeword.uri: URI to bind the wyoming server to.

- services.wyoming.piper.package: The wyoming-piper package to use.
- services.wyoming.piper.servers: Attribute set of wyoming-piper instances to spawn.

- services.wyoming.satellite.area: Area to the satellite.

- services.wyoming.satellite.enable: Whether to enable Wyoming Satellite.
- services.wyoming.satellite.extraArgs: Extra arguments to pass to the executable.

Check `wyoming-satellite --help` for possible options.

- services.wyoming.satellite.group: Group to run wyoming-satellite under.

- services.wyoming.satellite.microphone.autoGain: Automatic gain control in dbFS, with 31 being the loudest value. Set to 0 to disable.

- services.wyoming.satellite.microphone.command: Program to run for audio input.

- services.wyoming.satellite.microphone.noiseSuppression: Noise suppression level with 4 being the maximum suppression,
which may cause audio distortion. Set to 0 to disable.

- services.wyoming.satellite.name: Name of the satellite.

- services.wyoming.satellite.package: The wyoming-satellite package to use.
- services.wyoming.satellite.sound.command: Program to run for sound output.

- services.wyoming.satellite.sounds.awake: Path to audio file in WAV format to play when wake word is detected.

- services.wyoming.satellite.sounds.done: Path to audio file in WAV format to play when voice command recording has ended.

- services.wyoming.satellite.uri: URI where wyoming-satellite will bind its socket.

- services.wyoming.satellite.user: User to run wyoming-satellite under.

- services.wyoming.satellite.vad.enable: Whether to enable voice activity detection.

Enabling will result in only streaming audio, when speech gets
detected.

- services.x2goserver.enable: Enables the x2goserver module.
NOTE: This will create a good amount of symlinks in `/usr/local/bin`

- services.x2goserver.nxagentDefaultOptions: List of default nx agent options.

- services.x2goserver.package: The x2goserver package to use.
- services.x2goserver.settings: x2goserver.conf ini configuration as nix attributes. See
`x2goserver.conf(5)` for details

- services.x2goserver.superenicer.enable: Enables the SupeReNicer code in x2gocleansessions, this will renice
suspended sessions to nice level 19 and renice them to level 0 if the
session becomes marked as running again

- services.xandikos.address: The IP address on which Xandikos will listen.
By default listens on localhost.

- services.xandikos.enable: Whether to enable Xandikos CalDAV and CardDAV server.
- services.xandikos.extraOptions: Extra command line arguments to pass to xandikos.

- services.xandikos.nginx: Configuration for nginx reverse proxy.

- services.xandikos.package: The xandikos package to use.
- services.xandikos.port: The port of the Xandikos web application
- services.xandikos.routePrefix: Path to Xandikos.
Useful when Xandikos is behind a reverse proxy.

- services.xbanish.arguments: Arguments to pass to xbanish command
- services.xbanish.enable: Whether to enable xbanish.
- services.xe-guest-utilities.enable: Whether to enable the XenServer guest utilities daemon.
- services.xfs.enable: Whether to enable the X Font Server.
- services.xinetd.enable: Whether to enable the xinetd super-server daemon.
- services.xinetd.extraDefaults: Additional configuration lines added to the default section of xinetd's configuration.

- services.xinetd.services: A list of services provided by xinetd.

- services.xl2tpd.clientIpRange: The range from which client IPs are drawn.
- services.xl2tpd.enable: Whether to enable xl2tpd, the Layer 2 Tunnelling Protocol Daemon.
- services.xl2tpd.extraPppdOptions: Adds extra lines to the pppd options file.
- services.xl2tpd.extraXl2tpOptions: Adds extra lines to the xl2tpd configuration file.
- services.xl2tpd.serverIp: The server-side IP address.
- services.xmr-stak
- services.xmrig.enable: Whether to enable XMRig Mining Software.
- services.xmrig.package: The xmrig package to use.
- services.xmrig.settings: XMRig configuration. Refer to
<https://xmrig.com/docs/miner/config>
for details on supported values.

- services.xonotic.appendConfig: Literal text to insert at the end of `server.cfg`.

- services.xonotic.dataDir: Data directory.

- services.xonotic.enable: Whether to enable Xonotic dedicated server.
- services.xonotic.openFirewall: Open the firewall for TCP and UDP on the specified port.

- services.xonotic.package: The xonotic-dedicated package to use.
- services.xonotic.prependConfig: Literal text to insert at the start of `server.cfg`.

- services.xonotic.settings: Generates the `server.cfg` file. Refer to [upstream's example][0] for
details.

[0]: https://gitlab.com/xonotic/xonotic/-/blob/master/server/server.cfg

- services.xray.enable: Whether to run xray server.

Either `settingsFile` or `settings` must be specified.

- services.xray.package: The xray package to use.
- services.xray.settings: The configuration object.

Either `settingsFile` or `settings` must be specified.

See <https://www.v2fly.org/en_US/config/overview.html>.

- services.xray.settingsFile: The absolute path to the configuration file.

Either `settingsFile` or `settings` must be specified.

See <https://www.v2fly.org/en_US/config/overview.html>.

- services.xrdp.audio.enable: Whether to enable audio support for xrdp sessions. So far it only works with PulseAudio sessions on the server side. No PipeWire support yet.
- services.xrdp.audio.package: The pulseaudio-module-xrdp package to use.
- services.xrdp.confDir: Configuration directory of xrdp and sesman.

Changes to this must be made through extraConfDirCommands.

- services.xrdp.defaultWindowManager: The script to run when user log in, usually a window manager, e.g. "icewm", "xfce4-session"
This is per-user overridable, if file ~/startwm.sh exists it will be used instead.

- services.xrdp.enable: Whether to enable xrdp, the Remote Desktop Protocol server.
- services.xrdp.extraConfDirCommands: Extra commands to run on the default confDir derivation.

- services.xrdp.openFirewall: Whether to open the firewall for the specified RDP port.
- services.xrdp.package: The xrdp package to use.
- services.xrdp.port: Specifies on which port the xrdp daemon listens.

- services.xrdp.sslCert: ssl certificate path
A self-signed certificate will be generated if file not exists.

- services.xrdp.sslKey: ssl private key path
A self-signed certificate will be generated if file not exists.

- services.xscreensaver.enable: Whether to enable xscreensaver user service.
- services.xscreensaver.package: The xscreensaver package to use.
- services.xserver.autoRepeatDelay: Sets the autorepeat delay (length of time in milliseconds that a key must be depressed before autorepeat starts).

- services.xserver.autoRepeatInterval: Sets the autorepeat interval (length of time in milliseconds that should elapse between autorepeat-generated keystrokes).

- services.xserver.autorun: Whether to start the X server automatically.

- services.xserver.cmt.enable: Enable chrome multitouch input (cmt). Touchpad drivers that are configured for chromebooks.
- services.xserver.cmt.models: Which models to enable cmt for. Enter the Code Name for your Chromebook.
Code Name can be found at <https://www.chromium.org/chromium-os/developer-information-for-chrome-os-devices>.

- services.xserver.config: The contents of the configuration file of the X server
({file}`xorg.conf`).

This option is set by multiple modules, and the configs are
concatenated together.

In Xorg configs the last config entries take precedence,
so you may want to use `lib.mkAfter` on this option
to override NixOS's defaults.

- services.xserver.defaultDepth: Default colour depth.
- services.xserver.desktopManager.budgie.enable: Whether to enable the Budgie desktop.
- services.xserver.desktopManager.budgie.extraGSettingsOverridePackages: List of packages for which GSettings are overridden.
- services.xserver.desktopManager.budgie.extraGSettingsOverrides: Additional GSettings overrides.
- services.xserver.desktopManager.budgie.extraPlugins: Extra plugins for the Budgie desktop
- services.xserver.desktopManager.budgie.sessionPath: Additional list of packages to be added to the session search path.
Useful for GSettings-conditional autostart.

Note that this should be a last resort; patching the package is preferred (see GPaste).

- services.xserver.desktopManager.cde.enable: Whether to enable Common Desktop Environment.
- services.xserver.desktopManager.cde.extraPackages: Extra packages to be installed system wide.

- services.xserver.desktopManager.cinnamon.enable: Whether to enable the cinnamon desktop manager.
- services.xserver.desktopManager.cinnamon.extraGSettingsOverridePackages: List of packages for which gsettings are overridden.
- services.xserver.desktopManager.cinnamon.extraGSettingsOverrides: Additional gsettings overrides.
- services.xserver.desktopManager.cinnamon.sessionPath: Additional list of packages to be added to the session search path.
Useful for GSettings-conditional autostart.

Note that this should be a last resort; patching the package is preferred (see GPaste).

- services.xserver.desktopManager.deepin
- services.xserver.desktopManager.e19.enable: Alias of {option}`services.xserver.desktopManager.enlightenment.enable`.
- services.xserver.desktopManager.enlightenment.enable: Enable the Enlightenment desktop environment.
- services.xserver.desktopManager.gnome.debug: Alias of {option}`services.desktopManager.gnome.debug`.
- services.xserver.desktopManager.gnome.enable: Alias of {option}`services.desktopManager.gnome.enable`.
- services.xserver.desktopManager.gnome.extraGSettingsOverridePackages: Alias of {option}`services.desktopManager.gnome.extraGSettingsOverridePackages`.
- services.xserver.desktopManager.gnome.extraGSettingsOverrides: Alias of {option}`services.desktopManager.gnome.extraGSettingsOverrides`.
- services.xserver.desktopManager.gnome.flashback.customSessions: Alias of {option}`services.desktopManager.gnome.flashback.customSessions`.
- services.xserver.desktopManager.gnome.flashback.enableMetacity: Alias of {option}`services.desktopManager.gnome.flashback.enableMetacity`.
- services.xserver.desktopManager.gnome.flashback.panelModulePackages: Alias of {option}`services.desktopManager.gnome.flashback.panelModulePackages`.
- services.xserver.desktopManager.gnome.sessionPath: Alias of {option}`services.desktopManager.gnome.sessionPath`.
- services.xserver.desktopManager.kodi.enable: Enable the kodi multimedia center.
- services.xserver.desktopManager.kodi.package: The kodi package to use.
- services.xserver.desktopManager.lumina.enable: Enable the Lumina desktop manager
- services.xserver.desktopManager.lxqt.enable: Whether to enable the LXQt desktop manager.
- services.xserver.desktopManager.lxqt.extraPackages: Extra packages to be installed system wide.
- services.xserver.desktopManager.lxqt.iconThemePackage: The package that provides a default icon theme.
- services.xserver.desktopManager.mate.debug: Whether to enable mate-session debug messages.
- services.xserver.desktopManager.mate.enable: Enable the MATE desktop environment
- services.xserver.desktopManager.mate.enableWaylandSession: Whether to enable MATE Wayland session.
- services.xserver.desktopManager.mate.extraCajaExtensions: Extra extensions to add to caja.
- services.xserver.desktopManager.mate.extraPanelApplets: Extra applets to add to mate-panel.
- services.xserver.desktopManager.pantheon: Alias of {option}`services.desktopManager.pantheon`.
- services.xserver.desktopManager.phosh.enable: Enable the Phone Shell.
- services.xserver.desktopManager.phosh.group: The group to run the Phosh service.
- services.xserver.desktopManager.phosh.package: The phosh package to use.
- services.xserver.desktopManager.phosh.phocConfig: Configurations for the Phoc compositor.

- services.xserver.desktopManager.phosh.user: The user to run the Phosh service.
- services.xserver.desktopManager.plasma5
- services.xserver.desktopManager.plasma6.enable: Alias of {option}`services.desktopManager.plasma6.enable`.
- services.xserver.desktopManager.plasma6.enableQt5Integration: Alias of {option}`services.desktopManager.plasma6.enableQt5Integration`.
- services.xserver.desktopManager.plasma6.notoPackage: Alias of {option}`services.desktopManager.plasma6.notoPackage`.
- services.xserver.desktopManager.retroarch.enable: Whether to enable RetroArch.
- services.xserver.desktopManager.retroarch.extraArgs: Extra arguments to pass to RetroArch.
- services.xserver.desktopManager.retroarch.package: The retroarch package to use.
- services.xserver.desktopManager.runXdgAutostartIfNone: Whether to run XDG autostart files for sessions without a desktop manager
(with only a window manager), these sessions usually don't handle XDG
autostart files by default.

Some services like {option}`i18n.inputMethod` and
{option}`service.earlyoom` use XDG autostart files to start.
If this option is not set to `true` and you are using
a window manager without a desktop manager, you need to manually start
them or running `dex` somewhere.

- services.xserver.desktopManager.session: Internal option used to add some common line to desktop manager
scripts before forwarding the value to the
`displayManager`.

- services.xserver.desktopManager.surf-display.defaultWwwUri: Default URI to display.
- services.xserver.desktopManager.surf-display.enable: Whether to enable surf-display as a kiosk browser session.
- services.xserver.desktopManager.surf-display.extraConfig: Extra configuration options to append to `/etc/default/surf-display`.

- services.xserver.desktopManager.surf-display.hideIdlePointer: Hide idle mouse pointer.
- services.xserver.desktopManager.surf-display.inactivityInterval: Setting for internal inactivity timer to restart surf-display if the
user goes inactive/idle to get a fresh session for the next user of
the kiosk.

If this value is set to zero, the whole feature of restarting due to
inactivity is disabled.

- services.xserver.desktopManager.surf-display.pointerButtonMap: Disable right and middle pointer device click in browser sessions
while keeping scrolling wheels' functionality intact. See pointer
subcommand on `man xmodmap` for details.

- services.xserver.desktopManager.surf-display.screensaverSettings: Screensaver settings, see `man 1 xset` for possible options.

- services.xserver.desktopManager.wallpaper.combineScreens: When set to `true` the wallpaper will stretch across all screens.
When set to `false` the wallpaper is duplicated to all screens.

- services.xserver.desktopManager.wallpaper.mode: The file {file}`~/.background-image` is used as a background image.
This option specifies the placement of this image onto your desktop.

Possible values:
`center`: Center the image on the background. If it is too small, it will be surrounded by a black border.
`fill`: Like `scale`, but preserves aspect ratio by zooming the image until it fits. Either a horizontal or a vertical part of the image will be cut off.
`max`: Like `fill`, but scale the image to the maximum size that fits the screen with black borders on one side.
`scale`: Fit the file into the background without repeating it, cutting off stuff or using borders. But the aspect ratio is not preserved either.
`tile`: Tile (repeat) the image in case it is too small for the screen.

- services.xserver.desktopManager.xfce.enable: Enable the Xfce desktop environment.
- services.xserver.desktopManager.xfce.enableScreensaver: Enable the XFCE screensaver.
- services.xserver.desktopManager.xfce.enableWaylandSession: Whether to enable the experimental Xfce Wayland session.
- services.xserver.desktopManager.xfce.enableXfwm: Enable the XFWM (default) window manager.
- services.xserver.desktopManager.xfce.extraSessionCommands: Alias of {option}`services.xserver.displayManager.sessionCommands`.
- services.xserver.desktopManager.xfce.noDesktop: Don't install XFCE desktop components (xfdesktop and panel).
- services.xserver.desktopManager.xfce.screenLock
- services.xserver.desktopManager.xfce.thunarPlugins: Alias of {option}`programs.thunar.plugins`.
- services.xserver.desktopManager.xfce.waylandSessionCompositor: Command line to run a Wayland compositor, defaults to `labwc --startup`
if not specified. Note that `xfce4-session` will be passed to it as an
argument, see `startxfce4 --help` for details.

Some compositors do not have an option equivalent to labwc's `--startup`
and you might have to add xfce4-session somewhere in their configurations.

- services.xserver.desktopManager.xfce4-14.enable: Alias of {option}`services.xserver.desktopManager.xfce.enable`.
- services.xserver.desktopManager.xfce4-14.enableXfwm: Alias of {option}`services.xserver.desktopManager.xfce.enableXfwm`.
- services.xserver.desktopManager.xfce4-14.extraSessionCommands: Alias of {option}`services.xserver.displayManager.sessionCommands`.
- services.xserver.desktopManager.xfce4-14.noDesktop: Alias of {option}`services.xserver.desktopManager.xfce.noDesktop`.
- services.xserver.desktopManager.xterm.enable: Enable a xterm terminal as a desktop manager.
- services.xserver.deviceSection: Contents of the first Device section of the X server configuration file.
- services.xserver.digimend.enable: Whether to enable the digimend drivers for Huion/XP-Pen/etc. tablets.
- services.xserver.display: Display number for the X server.
- services.xserver.displayManager.auto
- services.xserver.displayManager.autoLogin: Alias of {option}`services.displayManager.autoLogin`.
- services.xserver.displayManager.defaultSession: Alias of {option}`services.displayManager.defaultSession`.
- services.xserver.displayManager.desktopManagerHandlesLidAndPower
- services.xserver.displayManager.extraSessionFilesPackages: Alias of {option}`services.displayManager.sessionPackages`.
- services.xserver.displayManager.gdm.autoLogin.delay: Alias of {option}`services.displayManager.gdm.autoLogin.delay`.
- services.xserver.displayManager.gdm.autoLogin.enable: Alias of {option}`services.displayManager.autoLogin.enable`.
- services.xserver.displayManager.gdm.autoLogin.user: Alias of {option}`services.displayManager.autoLogin.user`.
- services.xserver.displayManager.gdm.autoSuspend: Alias of {option}`services.displayManager.gdm.autoSuspend`.
- services.xserver.displayManager.gdm.banner: Alias of {option}`services.displayManager.gdm.banner`.
- services.xserver.displayManager.gdm.debug: Alias of {option}`services.displayManager.gdm.debug`.
- services.xserver.displayManager.gdm.enable: Alias of {option}`services.displayManager.gdm.enable`.
- services.xserver.displayManager.gdm.nvidiaWayland
- services.xserver.displayManager.gdm.settings: Alias of {option}`services.displayManager.gdm.settings`.
- services.xserver.displayManager.gdm.wayland: Alias of {option}`services.displayManager.gdm.wayland`.
- services.xserver.displayManager.hiddenUsers: Alias of {option}`services.displayManager.hiddenUsers`.
- services.xserver.displayManager.importedVariables: Environment variables to import into the systemd user environment.

- services.xserver.displayManager.job.environment: Alias of {option}`services.displayManager.environment`.
- services.xserver.displayManager.job.execCmd: Alias of {option}`services.displayManager.execCmd`.
- services.xserver.displayManager.job.logToFile: Alias of {option}`services.displayManager.logToFile`.
- services.xserver.displayManager.job.logToJournal: Alias of {option}`services.displayManager.logToJournal`.
- services.xserver.displayManager.job.logsXsession: Alias of {option}`services.displayManager.logToFile`.
- services.xserver.displayManager.job.preStart: Alias of {option}`services.displayManager.preStart`.
- services.xserver.displayManager.lightdm.autoLogin.enable: Alias of {option}`services.displayManager.autoLogin.enable`.
- services.xserver.displayManager.lightdm.autoLogin.timeout: Show the greeter for this many seconds before automatic login occurs.

- services.xserver.displayManager.lightdm.autoLogin.user: Alias of {option}`services.displayManager.autoLogin.user`.
- services.xserver.displayManager.lightdm.background: The background image or color to use.

- services.xserver.displayManager.lightdm.enable: Whether to enable lightdm as the display manager.

- services.xserver.displayManager.lightdm.extraConfig: Extra lines to append to LightDM section.
- services.xserver.displayManager.lightdm.extraSeatDefaults: Extra lines to append to SeatDefaults section.
- services.xserver.displayManager.lightdm.greeter.enable: If set to false, run lightdm in greeterless mode. This only works if autologin
is enabled and autoLogin.timeout is zero.

- services.xserver.displayManager.lightdm.greeter.name: The name of a .desktop file in the directory specified
in the 'package' option.

- services.xserver.displayManager.lightdm.greeter.package: The LightDM greeter to login via. The package should be a directory
containing a .desktop file matching the name in the 'name' option.

- services.xserver.displayManager.lightdm.greeters.enso.blur: Whether or not to enable blur

- services.xserver.displayManager.lightdm.greeters.enso.brightness: Brightness

- services.xserver.displayManager.lightdm.greeters.enso.cursorTheme.name: Name of the cursor theme to use for the lightdm-enso-os-greeter

- services.xserver.displayManager.lightdm.greeters.enso.cursorTheme.package: The capitaine-cursors package to use.
- services.xserver.displayManager.lightdm.greeters.enso.enable: Whether to enable enso-os-greeter as the lightdm greeter

- services.xserver.displayManager.lightdm.greeters.enso.extraConfig: Extra configuration that should be put in the greeter.conf
configuration file

- services.xserver.displayManager.lightdm.greeters.enso.iconTheme.name: Name of the icon theme to use for the lightdm-enso-os-greeter

- services.xserver.displayManager.lightdm.greeters.enso.iconTheme.package: The papirus-icon-theme package to use.
- services.xserver.displayManager.lightdm.greeters.enso.theme.name: Name of the theme to use for the lightdm-enso-os-greeter

- services.xserver.displayManager.lightdm.greeters.enso.theme.package: The gnome-themes-extra package to use.
- services.xserver.displayManager.lightdm.greeters.gtk.clock-format: Clock format string (as expected by strftime, e.g. "%H:%M")
to use with the lightdm gtk greeter panel.

If set to null the default clock format is used.

- services.xserver.displayManager.lightdm.greeters.gtk.cursorTheme.name: Name of the cursor theme to use for the lightdm-gtk-greeter.

- services.xserver.displayManager.lightdm.greeters.gtk.cursorTheme.package: The adwaita-icon-theme package to use.
- services.xserver.displayManager.lightdm.greeters.gtk.cursorTheme.size: Size of the cursor theme to use for the lightdm-gtk-greeter.

- services.xserver.displayManager.lightdm.greeters.gtk.enable: Whether to enable lightdm-gtk-greeter as the lightdm greeter.

- services.xserver.displayManager.lightdm.greeters.gtk.extraConfig: Extra configuration that should be put in the lightdm-gtk-greeter.conf
configuration file.

- services.xserver.displayManager.lightdm.greeters.gtk.iconTheme.name: Name of the icon theme to use for the lightdm-gtk-greeter.

- services.xserver.displayManager.lightdm.greeters.gtk.iconTheme.package: The adwaita-icon-theme package to use.
- services.xserver.displayManager.lightdm.greeters.gtk.indicators: List of allowed indicator modules to use for the lightdm gtk
greeter panel.

Built-in indicators include "~a11y", "~language", "~session",
"~power", "~clock", "~host", "~spacer". Unity indicators can be
represented by short name (e.g. "sound", "power"), service file name,
or absolute path.

If set to null the default indicators are used.

- services.xserver.displayManager.lightdm.greeters.gtk.theme.name: Name of the theme to use for the lightdm-gtk-greeter.

- services.xserver.displayManager.lightdm.greeters.gtk.theme.package: The gnome-themes-extra package to use.
- services.xserver.displayManager.lightdm.greeters.lomiri.enable: Whether to enable lomiri's greeter as the lightdm greeter.
- services.xserver.displayManager.lightdm.greeters.mini.enable: Whether to enable lightdm-mini-greeter as the lightdm greeter.

Note that this greeter starts only the default X session.
You can configure the default X session using
[](#opt-services.displayManager.defaultSession).

- services.xserver.displayManager.lightdm.greeters.mini.extraConfig: Extra configuration that should be put in the lightdm-mini-greeter.conf
configuration file.

- services.xserver.displayManager.lightdm.greeters.mini.user: The user to login as.

- services.xserver.displayManager.lightdm.greeters.mobile.enable: Whether to enable lightdm-mobile-greeter as the lightdm greeter.
- services.xserver.displayManager.lightdm.greeters.pantheon.enable: Whether to enable elementary-greeter as the lightdm greeter.

- services.xserver.displayManager.lightdm.greeters.slick.cursorTheme.name: Name of the cursor theme to use for the lightdm-slick-greeter.

- services.xserver.displayManager.lightdm.greeters.slick.cursorTheme.package: The adwaita-icon-theme package to use.
- services.xserver.displayManager.lightdm.greeters.slick.cursorTheme.size: Size of the cursor theme to use for the lightdm-slick-greeter.

- services.xserver.displayManager.lightdm.greeters.slick.draw-user-backgrounds: Whether to enable draw user backgrounds.
- services.xserver.displayManager.lightdm.greeters.slick.enable: Whether to enable lightdm-slick-greeter as the lightdm greeter.
- services.xserver.displayManager.lightdm.greeters.slick.extraConfig: Extra configuration that should be put in the lightdm-slick-greeter.conf
configuration file.

- services.xserver.displayManager.lightdm.greeters.slick.font.name: Name of the font to use.

- services.xserver.displayManager.lightdm.greeters.slick.font.package: The ubuntu-classic package to use.
- services.xserver.displayManager.lightdm.greeters.slick.iconTheme.name: Name of the icon theme to use for the lightdm-slick-greeter.

- services.xserver.displayManager.lightdm.greeters.slick.iconTheme.package: The adwaita-icon-theme package to use.
- services.xserver.displayManager.lightdm.greeters.slick.theme.name: Name of the theme to use for the lightdm-slick-greeter.

- services.xserver.displayManager.lightdm.greeters.slick.theme.package: The gnome-themes-extra package to use.
- services.xserver.displayManager.lightdm.greeters.tiny.enable: Whether to enable lightdm-tiny-greeter as the lightdm greeter.

Note that this greeter starts only the default X session.
You can configure the default X session using
[](#opt-services.displayManager.defaultSession).

- services.xserver.displayManager.lightdm.greeters.tiny.extraConfig: Section to describe style and ui.

- services.xserver.displayManager.lightdm.greeters.tiny.label.pass: The string to represent the pass_text label.

- services.xserver.displayManager.lightdm.greeters.tiny.label.user: The string to represent the user_text label.

- services.xserver.displayManager.logToJournal: Alias of {option}`services.displayManager.logToJournal`.
- services.xserver.displayManager.sddm.autoLogin.minimumUid: Alias of {option}`services.displayManager.sddm.autoLogin.minimumUid`.
- services.xserver.displayManager.sddm.autoLogin.relogin: Alias of {option}`services.displayManager.sddm.autoLogin.relogin`.
- services.xserver.displayManager.sddm.autoNumlock: Alias of {option}`services.displayManager.sddm.autoNumlock`.
- services.xserver.displayManager.sddm.enable: Alias of {option}`services.displayManager.sddm.enable`.
- services.xserver.displayManager.sddm.enableHidpi: Alias of {option}`services.displayManager.sddm.enableHidpi`.
- services.xserver.displayManager.sddm.extraPackages: Alias of {option}`services.displayManager.sddm.extraPackages`.
- services.xserver.displayManager.sddm.package: Alias of {option}`services.displayManager.sddm.package`.
- services.xserver.displayManager.sddm.settings: Alias of {option}`services.displayManager.sddm.settings`.
- services.xserver.displayManager.sddm.setupScript: Alias of {option}`services.displayManager.sddm.setupScript`.
- services.xserver.displayManager.sddm.stopScript: Alias of {option}`services.displayManager.sddm.stopScript`.
- services.xserver.displayManager.sddm.theme: Alias of {option}`services.displayManager.sddm.theme`.
- services.xserver.displayManager.sddm.wayland.enable: Alias of {option}`services.displayManager.sddm.wayland.enable`.
- services.xserver.displayManager.session: List of sessions supported with the command used to start each
session.  Each session script can set the
{var}`waitPID` shell variable to make this script
wait until the end of the user session.  Each script is used
to define either a window manager or a desktop manager.  These
can be differentiated by setting the attribute
{var}`manage` either to `"window"`
or `"desktop"`.

The list of desktop manager and window manager should appear
inside the display manager with the desktop manager name
followed by the window manager name.

- services.xserver.displayManager.sessionCommands: Shell commands executed just before the window or desktop manager is
started. These commands are not currently sourced for Wayland sessions.

- services.xserver.displayManager.sessionData: Alias of {option}`services.displayManager.sessionData`.
- services.xserver.displayManager.sessionPackages: Alias of {option}`services.displayManager.sessionPackages`.
- services.xserver.displayManager.setupCommands: Shell commands executed just after the X server has started.

This option is only effective for display managers for which this feature
is supported; currently these are LightDM, GDM and SDDM.

- services.xserver.displayManager.slim
- services.xserver.displayManager.startx.enable: Whether to enable the dummy "startx" pseudo-display manager, which
allows users to start X manually via the `startx` command from a
virtual terminal.

::: {.note}
The X server will run under the current user, not as root.
:::

- services.xserver.displayManager.startx.extraCommands: Shell commands to be added to the system-wide xinitrc script.

- services.xserver.displayManager.startx.generateScript: Whether to generate the system-wide xinitrc script (/etc/X11/xinit/xinitrc).
This script will take care of setting up the session for systemd user
services, running the window manager and cleaning up on exit.

::: {.note}
This script will only be used by `startx` when both `.xinitrc` does not
exists and the `XINITRC` environment variable is unset.
:::

- services.xserver.displayManager.sx.addAsSession: Whether to add sx as a display manager session. Keep in mind that sx
expects to be run from a TTY, so it may not work in your display
manager.

- services.xserver.displayManager.sx.enable: Whether to enable the "sx" pseudo-display manager, which allows users
to start manually via the "sx" command from a vt shell. The X server
runs under the user's id, not as root. The user must provide a
~/.config/sx/sxrc file containing session startup commands, see
{manpage}`sx(1)`. This is not automatically generated from the desktopManager
and windowManager settings. sx doesn't have a way to directly set
X server flags, but it can be done by overriding its xorgserver
dependency.

- services.xserver.displayManager.sx.package: The sx package to use.
- services.xserver.displayManager.xauthBin: Path to the {command}`xauth` program used by display managers.
- services.xserver.displayManager.xpra.auth: Authentication to use when connecting to xpra
- services.xserver.displayManager.xpra.bindTcp: Bind xpra to TCP
- services.xserver.displayManager.xpra.desktop: Start a desktop environment instead of seamless mode
- services.xserver.displayManager.xpra.enable: Whether to enable xpra as display manager.
- services.xserver.displayManager.xpra.extraOptions: Extra xpra options
- services.xserver.displayManager.xpra.pulseaudio: Whether to enable pulseaudio audio streaming.
- services.xserver.displayManager.xserverArgs: List of arguments for the X server.
- services.xserver.displayManager.xserverBin: Path to the X server used by display managers.
- services.xserver.dpi: Force global DPI resolution to use for X server. It's recommended to
use this only when DPI is detected incorrectly; also consider using
`Monitor` section in configuration file instead.

- services.xserver.drivers: A list of attribute sets specifying drivers to be loaded by
the X11 server.

- services.xserver.enable: Whether to enable the X server.

- services.xserver.enableCtrlAltBackspace: Whether to enable the DontZap option, which binds Ctrl+Alt+Backspace
to forcefully kill X. This can lead to data loss and is disabled
by default.

- services.xserver.enableTCP: Whether to allow the X server to accept TCP connections.

- services.xserver.enableTearFree: Whether to enable the TearFree option in the first Device section.
- services.xserver.excludePackages: Which X11 packages to exclude from the default environment
- services.xserver.exportConfiguration: Whether to symlink the X server configuration under
{file}`/etc/X11/xorg.conf`.

- services.xserver.extraConfig: Additional contents (sections) included in the X server configuration file
- services.xserver.extraDisplaySettings: Lines to be added to every Display subsection of the Screen section.
- services.xserver.extraLayouts: Alias of {option}`services.xserver.xkb.extraLayouts`.
- services.xserver.filesSection: Contents of the first `Files` section of the X server configuration file.
- services.xserver.fontPath: Set the X server FontPath. Defaults to null, which
means the compiled in defaults will be used. See
man xorg.conf for details.

- services.xserver.gdk-pixbuf: Alias of {option}`programs.gdk-pixbuf`.
- services.xserver.imwheel.enable: Whether to enable IMWheel service.
- services.xserver.imwheel.extraOptions: Additional command-line arguments to pass to
{command}`imwheel`.

- services.xserver.imwheel.rules: Window class translation rules.
/etc/X11/imwheelrc is generated based on this config
which means this config is global for all users.
See [official man pages](https://imwheel.sourceforge.net/imwheel.1.html)
for more information.

- services.xserver.inputClassSections: Content of additional InputClass sections of the X server configuration file.
- services.xserver.layout: Alias of {option}`services.xserver.xkb.layout`.
- services.xserver.libinput.accelProfile: Alias of {option}`services.libinput.touchpad.accelProfile`.
- services.xserver.libinput.accelSpeed: Alias of {option}`services.libinput.touchpad.accelSpeed`.
- services.xserver.libinput.additionalOptions: Alias of {option}`services.libinput.touchpad.additionalOptions`.
- services.xserver.libinput.buttonMapping: Alias of {option}`services.libinput.touchpad.buttonMapping`.
- services.xserver.libinput.calibrationMatrix: Alias of {option}`services.libinput.touchpad.calibrationMatrix`.
- services.xserver.libinput.clickMethod: Alias of {option}`services.libinput.touchpad.clickMethod`.
- services.xserver.libinput.disableWhileTyping: Alias of {option}`services.libinput.touchpad.disableWhileTyping`.
- services.xserver.libinput.enable: Alias of {option}`services.libinput.enable`.
- services.xserver.libinput.horizontalScrolling: Alias of {option}`services.libinput.touchpad.horizontalScrolling`.
- services.xserver.libinput.leftHanded: Alias of {option}`services.libinput.touchpad.leftHanded`.
- services.xserver.libinput.middleEmulation: Alias of {option}`services.libinput.touchpad.middleEmulation`.
- services.xserver.libinput.mouse: Alias of {option}`services.libinput.mouse`.
- services.xserver.libinput.naturalScrolling: Alias of {option}`services.libinput.touchpad.naturalScrolling`.
- services.xserver.libinput.scrollButton: Alias of {option}`services.libinput.touchpad.scrollButton`.
- services.xserver.libinput.scrollMethod: Alias of {option}`services.libinput.touchpad.scrollMethod`.
- services.xserver.libinput.sendEventsMode: Alias of {option}`services.libinput.touchpad.sendEventsMode`.
- services.xserver.libinput.tapping: Alias of {option}`services.libinput.touchpad.tapping`.
- services.xserver.libinput.tappingButtonMap: Alias of {option}`services.libinput.touchpad.tappingButtonMap`.
- services.xserver.libinput.tappingDragLock: Alias of {option}`services.libinput.touchpad.tappingDragLock`.
- services.xserver.libinput.touchpad: Alias of {option}`services.libinput.touchpad`.
- services.xserver.libinput.transformationMatrix: Alias of {option}`services.libinput.touchpad.transformationMatrix`.
- services.xserver.logFile: Controls the file Xorg logs to.

The default of `/dev/null` is set so that systemd services (like `displayManagers`) only log to the journal and don't create their own log files.

Setting this to `null` will not pass the `-logfile` argument to Xorg which allows it to log to its default logfile locations instead (see `man Xorg`). You probably only want this behaviour when running Xorg manually (e.g. via `startx`).

- services.xserver.moduleSection: Contents of the Module section of the X server configuration file.
- services.xserver.modules: Packages to be added to the module search path of the X server.
- services.xserver.monitorSection: Contents of the first Monitor section of the X server configuration file.
- services.xserver.multitouch
- services.xserver.resolutions: The screen resolutions for the X server.  The first element
is the default resolution.  If this list is empty, the X
server will automatically configure the resolution.

- services.xserver.screenSection: Contents of the first Screen section of the X server configuration file.
- services.xserver.serverFlagsSection: Contents of the ServerFlags section of the X server configuration file.
- services.xserver.serverLayoutSection: Contents of the ServerLayout section of the X server configuration file.
- services.xserver.startDbusSession
- services.xserver.startGnuPGAgent
- services.xserver.synaptics.accelFactor: Cursor acceleration (how fast speed increases from minSpeed to maxSpeed).
- services.xserver.synaptics.additionalOptions: Additional options for synaptics touchpad driver.

- services.xserver.synaptics.buttonsMap: Remap touchpad buttons.
- services.xserver.synaptics.dev: Path for touchpad device.  Set to null to apply to any
auto-detected touchpad.

- services.xserver.synaptics.enable: Whether to enable touchpad support. Deprecated: Consider services.libinput.enable.
- services.xserver.synaptics.fingersMap: Remap several-fingers taps.
- services.xserver.synaptics.horizEdgeScroll: Whether to enable horizontal edge drag-scrolling.
- services.xserver.synaptics.horizTwoFingerScroll: Whether to enable horizontal two-finger drag-scrolling.
- services.xserver.synaptics.horizontalScroll: Whether to enable horizontal scrolling (on touchpad)
- services.xserver.synaptics.maxSpeed: Cursor speed factor for highest-speed finger motion.
- services.xserver.synaptics.minSpeed: Cursor speed factor for precision finger motion.
- services.xserver.synaptics.palmDetect: Whether to enable palm detection (hardware support required)
- services.xserver.synaptics.palmMinWidth: Minimum finger width at which touch is considered a palm
- services.xserver.synaptics.palmMinZ: Minimum finger pressure at which touch is considered a palm
- services.xserver.synaptics.scrollDelta: Move distance of the finger for a scroll event.
- services.xserver.synaptics.tapButtons: Whether to enable tap buttons.
- services.xserver.synaptics.twoFingerScroll: Whether to enable two-finger drag-scrolling. Overridden by horizTwoFingerScroll and vertTwoFingerScroll.
- services.xserver.synaptics.vertEdgeScroll: Whether to enable vertical edge drag-scrolling.
- services.xserver.synaptics.vertTwoFingerScroll: Whether to enable vertical two-finger drag-scrolling.
- services.xserver.terminateOnReset: Whether to terminate X upon server reset.

- services.xserver.tty
- services.xserver.updateDbusEnvironment: Whether to update the DBus activation environment after launching the
desktop manager.

- services.xserver.upscaleDefaultCursor: Upscale the default X cursor to be more visible on high-density displays.
Requires `config.services.xserver.dpi` to be set.

- services.xserver.useGlamor
- services.xserver.useXFS
- services.xserver.vaapiDrivers: Alias of {option}`hardware.graphics.extraPackages`.
- services.xserver.verbose: Controls verbosity of X logging.

- services.xserver.videoDriver: The name of the video driver for your graphics card.  This
option is obsolete; please set the
{option}`services.xserver.videoDrivers` instead.

- services.xserver.videoDrivers: The names of the video drivers the configuration
supports. They will be tried in order until one that
supports your card is found.
Don't combine those with "incompatible" OpenGL implementations,
e.g. free ones (mesa-based) with proprietary ones.

For unfree "nvidia*", the supported GPU lists are on
https://www.nvidia.com/object/unix.html

- services.xserver.virtualScreen: Virtual screen size for Xrandr.

- services.xserver.wacom.enable: Whether to enable the Wacom touchscreen/digitizer/tablet.
If you ever have any issues such as, try switching to terminal (ctrl-alt-F1) and back
which will make Xorg reconfigure the device ?

If you're not satisfied by the default behaviour you can override
{option}`environment.etc."X11/xorg.conf.d/70-wacom.conf"` in
configuration.nix easily.

- services.xserver.windowManager.2bwm.enable: Whether to enable 2bwm.
- services.xserver.windowManager.afterstep.enable: Whether to enable afterstep.
- services.xserver.windowManager.awesome.enable: Whether to enable Awesome window manager.
- services.xserver.windowManager.awesome.luaModules: List of lua packages available for being used in the Awesome configuration.
- services.xserver.windowManager.awesome.noArgb: Disable client transparency support, which can be greatly detrimental to performance in some setups
- services.xserver.windowManager.awesome.package: The awesome package to use.
- services.xserver.windowManager.berry.enable: Whether to enable berry.
- services.xserver.windowManager.bspwm.configFile: Path to the bspwm configuration file.
If null, $HOME/.config/bspwm/bspwmrc will be used.

- services.xserver.windowManager.bspwm.enable: Whether to enable bspwm.
- services.xserver.windowManager.bspwm.package: The bspwm package to use.
- services.xserver.windowManager.bspwm.sessionScript
- services.xserver.windowManager.bspwm.startThroughSession
- services.xserver.windowManager.bspwm.sxhkd.configFile: Path to the sxhkd configuration file.
If null, $HOME/.config/sxhkd/sxhkdrc will be used.

- services.xserver.windowManager.bspwm.sxhkd.package: The sxhkd package to use.
- services.xserver.windowManager.clfswm.enable: Whether to enable clfswm.
- services.xserver.windowManager.clfswm.package: The clfswm package to use.
- services.xserver.windowManager.cwm.enable: Whether to enable cwm.
- services.xserver.windowManager.dk.enable: Whether to enable dk.
- services.xserver.windowManager.dk.package: The dk package to use.
- services.xserver.windowManager.dwm.enable: Whether to enable dwm.
- services.xserver.windowManager.dwm.extraSessionCommands: Shell commands executed just before dwm is started.

- services.xserver.windowManager.dwm.package: The dwm package to use.
- services.xserver.windowManager.e16.enable: Whether to enable e16.
- services.xserver.windowManager.evilwm.enable: Whether to enable evilwm.
- services.xserver.windowManager.exwm.enable: Whether to enable exwm.
- services.xserver.windowManager.exwm.enableDefaultConfig
- services.xserver.windowManager.exwm.extraPackages: Extra packages available to Emacs. The value must be a
function which receives the attrset defined in
{var}`emacs.pkgs` as the sole argument.

- services.xserver.windowManager.exwm.loadScript: Emacs lisp code to be run after loading the user's init
file.

- services.xserver.windowManager.exwm.package: The Emacs package to use.
- services.xserver.windowManager.fluxbox.enable: Whether to enable fluxbox.
- services.xserver.windowManager.fvwm: Alias of {option}`services.xserver.windowManager.fvwm2`.
- services.xserver.windowManager.fvwm2.enable: Whether to enable Fvwm2 window manager.
- services.xserver.windowManager.fvwm2.gestures: Whether or not to enable libstroke for gesture support
- services.xserver.windowManager.fvwm3.enable: Whether to enable Fvwm3 window manager.
- services.xserver.windowManager.hackedbox.enable: Whether to enable hackedbox.
- services.xserver.windowManager.herbstluftwm.configFile: Path to the herbstluftwm configuration file.  If left at the
default value, $XDG_CONFIG_HOME/herbstluftwm/autostart will
be used.

- services.xserver.windowManager.herbstluftwm.enable: Whether to enable herbstluftwm.
- services.xserver.windowManager.herbstluftwm.package: The herbstluftwm package to use.
- services.xserver.windowManager.hypr.enable: Whether to enable hypr.
- services.xserver.windowManager.i3.configFile: Path to the i3 configuration file.
If left at the default value, $HOME/.i3/config will be used.

- services.xserver.windowManager.i3.enable: Whether to enable i3 window manager.
- services.xserver.windowManager.i3.extraPackages: Extra packages to be installed system wide.

- services.xserver.windowManager.i3.extraSessionCommands: Shell commands executed just before i3 is started.

- services.xserver.windowManager.i3.package: The i3 package to use.
- services.xserver.windowManager.i3.updateSessionEnvironment: Whether to run dbus-update-activation-environment and systemctl import-environment before session start.
Required for xdg portals to function properly.

- services.xserver.windowManager.i3-gaps.enable
- services.xserver.windowManager.icewm.enable: Whether to enable icewm.
- services.xserver.windowManager.jwm.enable: Whether to enable jwm.
- services.xserver.windowManager.katriawm.enable: Whether to enable katriawm.
- services.xserver.windowManager.katriawm.package: The katriawm package to use.
- services.xserver.windowManager.leftwm.enable: Whether to enable leftwm.
- services.xserver.windowManager.lwm.enable: Whether to enable lwm.
- services.xserver.windowManager.metacity.enable: Whether to enable metacity.
- services.xserver.windowManager.mlvwm.configFile: Path to the mlvwm configuration file.
If left at the default value, $HOME/.mlvwmrc will be used.

- services.xserver.windowManager.mlvwm.enable: Whether to enable Macintosh-like Virtual Window Manager.
- services.xserver.windowManager.mwm.enable: Whether to enable mwm.
- services.xserver.windowManager.nimdow.enable: Whether to enable nimdow.
- services.xserver.windowManager.nimdow.package: The nimdow package to use.
- services.xserver.windowManager.notion.enable: Whether to enable notion.
- services.xserver.windowManager.openbox.enable: Whether to enable openbox.
- services.xserver.windowManager.pekwm.enable: Whether to enable pekwm.
- services.xserver.windowManager.qtile.backend
- services.xserver.windowManager.qtile.configFile: Path to the qtile configuration file.
If null, $XDG_CONFIG_HOME/qtile/config.py will be used.

- services.xserver.windowManager.qtile.enable: Whether to enable qtile.
- services.xserver.windowManager.qtile.extraPackages: Extra Python packages available to Qtile.
An example would be to include `python3Packages.qtile-extras`
for additional unofficial widgets.

- services.xserver.windowManager.qtile.finalPackage: The resulting Qtile package, bundled with extra packages
- services.xserver.windowManager.qtile.package: The qtile package to use.
- services.xserver.windowManager.ragnarwm.enable: Whether to enable ragnarwm.
- services.xserver.windowManager.ragnarwm.package: The ragnarwm package to use.
- services.xserver.windowManager.ratpoison.enable: Whether to enable ratpoison.
- services.xserver.windowManager.sawfish.enable: Whether to enable sawfish.
- services.xserver.windowManager.session: Internal option used to add some common line to window manager
scripts before forwarding the value to the
`displayManager`.

- services.xserver.windowManager.smallwm.enable: Whether to enable smallwm.
- services.xserver.windowManager.spectrwm.enable: Whether to enable spectrwm.
- services.xserver.windowManager.stumpwm.enable: Whether to enable stumpwm.
- services.xserver.windowManager.stumpwm.package: The stumpwm package to use.
- services.xserver.windowManager.tinywm.enable: Whether to enable tinywm.
- services.xserver.windowManager.twm.enable: Whether to enable twm.
- services.xserver.windowManager.windowlab.enable: Whether to enable windowlab.
- services.xserver.windowManager.windowmaker.enable: Whether to enable windowmaker.
- services.xserver.windowManager.wmderland.enable: Whether to enable wmderland.
- services.xserver.windowManager.wmderland.extraPackages: Extra packages to be installed system wide.

- services.xserver.windowManager.wmderland.extraSessionCommands: Shell commands executed just before wmderland is started.

- services.xserver.windowManager.wmii.enable: Whether to enable wmii.
- services.xserver.windowManager.xmonad.config: Configuration from which XMonad gets compiled. If no value is
specified, a vanilla xmonad binary is put in PATH, which will
attempt to recompile and exec your xmonad config from $HOME/.xmonad.
This setup is then analogous to other (non-NixOS) linux distributions.

If you do set this option, you likely want to use "launch" as your
entry point for xmonad (as in the example), to avoid xmonad's
recompilation logic on startup. Doing so will render the default
"mod+q" restart key binding dysfunctional though, because that attempts
to call your binary with the "--restart" command line option, unless
you implement that yourself. You way mant to bind "mod+q" to
`(restart "xmonad" True)` instead, which will just restart
xmonad from PATH. This allows e.g. switching to the new xmonad binary
after rebuilding your system with nixos-rebuild.
For the same reason, ghc is not added to the environment when this
option is set, unless {option}`enableConfiguredRecompile` is
set to `true`.

If you actually want to run xmonad with a config specified here, but
also be able to recompile and restart it from a copy of that source in
$HOME/.xmonad on the fly, set {option}`enableConfiguredRecompile`
to `true` and implement something like "compileRestart"
from the example.
This should allow you to switch at will between the local xmonad and
the one NixOS puts in your PATH.

- services.xserver.windowManager.xmonad.enable: Whether to enable xmonad.
- services.xserver.windowManager.xmonad.enableConfiguredRecompile: Enable recompilation even if {option}`config` is set to a
non-null value. This adds the necessary Haskell dependencies (GHC with
packages) to the xmonad binary's environment.

- services.xserver.windowManager.xmonad.enableContribAndExtras: Enable xmonad-{contrib,extras} in Xmonad.
- services.xserver.windowManager.xmonad.extraPackages: Extra packages available to ghc when rebuilding Xmonad. The
value must be a function which receives the attrset defined
in {var}`haskellPackages` as the sole argument.

- services.xserver.windowManager.xmonad.ghcArgs: Command line arguments passed to the compiler (ghc)
invocation when xmonad.config is set.

- services.xserver.windowManager.xmonad.haskellPackages: haskellPackages used to build Xmonad and other packages.
This can be used to change the GHC version used to build
Xmonad and the packages listed in
{var}`extraPackages`.

- services.xserver.windowManager.xmonad.xmonadCliArgs: Command line arguments passed to the xmonad binary.

- services.xserver.xautolock.enable: Whether to enable xautolock.
- services.xserver.xautolock.enableNotifier: Whether to enable the notifier feature of xautolock.
This publishes a notification before the autolock.

- services.xserver.xautolock.extraOptions: Additional command-line arguments to pass to
{command}`xautolock`.

- services.xserver.xautolock.killer: The script to use when nothing has happened for as long as {option}`killtime`

- services.xserver.xautolock.killtime: Minutes xautolock waits until it executes the script specified in {option}`killer`
(Has to be at least 10 minutes)

- services.xserver.xautolock.locker: The script to use when automatically locking the computer.

- services.xserver.xautolock.notifier: Notification script to be used to warn about the pending autolock.

- services.xserver.xautolock.notify: Time (in seconds) before the actual lock when the notification about the pending lock should be published.

- services.xserver.xautolock.nowlocker: The script to use when manually locking the computer with {command}`xautolock -locknow`.

- services.xserver.xautolock.time: Idle time (in minutes) to wait until xautolock locks the computer.

- services.xserver.xkb.dir: Path used for -xkbdir xserver parameter.

- services.xserver.xkb.extraLayouts: Extra custom layouts that will be included in the xkb configuration.
Information on how to create a new layout can be found here:
<https://www.x.org/releases/current/doc/xorg-docs/input/XKB-Enhancing.html#Defining_New_Layouts>.
For more examples see
<https://wiki.archlinux.org/index.php/X_KeyBoard_extension#Basic_examples>

- services.xserver.xkb.layout: X keyboard layout, or multiple keyboard layouts separated by commas.

- services.xserver.xkb.model: X keyboard model.

- services.xserver.xkb.options: X keyboard options; layout switching goes here.

- services.xserver.xkb.variant: X keyboard variant.

- services.xserver.xkbDir: Alias of {option}`services.xserver.xkb.dir`.
- services.xserver.xkbModel: Alias of {option}`services.xserver.xkb.model`.
- services.xserver.xkbOptions: Alias of {option}`services.xserver.xkb.options`.
- services.xserver.xkbVariant: Alias of {option}`services.xserver.xkb.variant`.
- services.xserver.xrandrHeads: Multiple monitor configuration, just specify a list of XRandR
outputs. The individual elements should be either simple strings or
an attribute set of output options.

If the element is a string, it is denoting the physical output for a
monitor, if it's an attribute set, you must at least provide the
{option}`output` option.

The monitors will be mapped from left to right in the order of the
list.

By default, the first monitor will be set as the primary monitor if
none of the elements contain an option that has set
{option}`primary` to `true`.

::: {.note}
Only one monitor is allowed to be primary.
:::

Be careful using this option with multiple graphic adapters or with
drivers that have poor support for XRandR, unexpected things might
happen with those.

- services.xtreemfs.dir.address: If specified, it defines the interface to listen on. If not
specified, the service will listen on all interfaces (any).

- services.xtreemfs.dir.enable: Whether to enable XtreemFS DIR service.

- services.xtreemfs.dir.extraConfig: Configuration of XtreemFS DIR service.
WARNING: configuration is saved as plaintext inside nix store.
For more options: <https://www.xtreemfs.org/xtfs-guide-1.5.1/index.html>

- services.xtreemfs.dir.httpPort: Specifies the listen port for the HTTP service that returns the
status page.

- services.xtreemfs.dir.port: The port to listen on for incoming connections (TCP).

- services.xtreemfs.dir.replication.enable: Whether to enable XtreemFS DIR replication plugin.
- services.xtreemfs.dir.replication.extraConfig: Configuration of XtreemFS DIR replication plugin.
WARNING: configuration is saved as plaintext inside nix store.
For more options: <https://www.xtreemfs.org/xtfs-guide-1.5.1/index.html>

- services.xtreemfs.dir.syncMode: The sync mode influences how operations are committed to the disk
log before the operation is acknowledged to the caller.

-ASYNC mode the writes to the disk log are buffered in memory by the operating system. This is the fastest mode but will lead to data loss in case of a crash, kernel panic or power failure.
-SYNC_WRITE_METADATA opens the file with O_SYNC, the system will not buffer any writes. The operation will be acknowledged when data has been safely written to disk. This mode is slow but offers maximum data safety. However, BabuDB cannot influence the disk drive caches, this depends on the OS and hard disk model.
-SYNC_WRITE similar to SYNC_WRITE_METADATA but opens file with O_DSYNC which means that only the data is commit to disk. This can lead to some data loss depending on the implementation of the underlying file system. Linux does not implement this mode.
-FDATASYNC is similar to SYNC_WRITE but opens the file in asynchronous mode and calls fdatasync() after writing the data to disk.
-FSYNC is similar to SYNC_WRITE_METADATA but opens the file in asynchronous mode and calls fsync() after writing the data to disk.

For best throughput use ASYNC, for maximum data safety use FSYNC.

(If xtreemfs.dir.replication.enable is true then FDATASYNC is forced)

- services.xtreemfs.dir.uuid: Must be set to a unique identifier, preferably a UUID according to
RFC 4122. UUIDs can be generated with `uuidgen` command, found in
the `util-linux` package.

- services.xtreemfs.enable: Whether to enable XtreemFS.
- services.xtreemfs.homeDir: XtreemFS home dir for the xtreemfs user.

- services.xtreemfs.mrc.address: If specified, it defines the interface to listen on. If not
specified, the service will listen on all interfaces (any).

- services.xtreemfs.mrc.enable: Whether to enable XtreemFS MRC service.

- services.xtreemfs.mrc.extraConfig: Configuration of XtreemFS MRC service.
WARNING: configuration is saved as plaintext inside nix store.
For more options: <https://www.xtreemfs.org/xtfs-guide-1.5.1/index.html>

- services.xtreemfs.mrc.httpPort: Specifies the listen port for the HTTP service that returns the
status page.

- services.xtreemfs.mrc.port: The port to listen on for incoming connections (TCP).

- services.xtreemfs.mrc.replication.enable: Whether to enable XtreemFS MRC replication plugin.
- services.xtreemfs.mrc.replication.extraConfig: Configuration of XtreemFS MRC replication plugin.
WARNING: configuration is saved as plaintext inside nix store.
For more options: <https://www.xtreemfs.org/xtfs-guide-1.5.1/index.html>

- services.xtreemfs.mrc.syncMode: The sync mode influences how operations are committed to the disk
log before the operation is acknowledged to the caller.

-ASYNC mode the writes to the disk log are buffered in memory by the operating system. This is the fastest mode but will lead to data loss in case of a crash, kernel panic or power failure.
-SYNC_WRITE_METADATA opens the file with O_SYNC, the system will not buffer any writes. The operation will be acknowledged when data has been safely written to disk. This mode is slow but offers maximum data safety. However, BabuDB cannot influence the disk drive caches, this depends on the OS and hard disk model.
-SYNC_WRITE similar to SYNC_WRITE_METADATA but opens file with O_DSYNC which means that only the data is commit to disk. This can lead to some data loss depending on the implementation of the underlying file system. Linux does not implement this mode.
-FDATASYNC is similar to SYNC_WRITE but opens the file in asynchronous mode and calls fdatasync() after writing the data to disk.
-FSYNC is similar to SYNC_WRITE_METADATA but opens the file in asynchronous mode and calls fsync() after writing the data to disk.

For best throughput use ASYNC, for maximum data safety use FSYNC.

(If xtreemfs.mrc.replication.enable is true then FDATASYNC is forced)

- services.xtreemfs.mrc.uuid: Must be set to a unique identifier, preferably a UUID according to
RFC 4122. UUIDs can be generated with `uuidgen` command, found in
the `util-linux` package.

- services.xtreemfs.osd.address: If specified, it defines the interface to listen on. If not
specified, the service will listen on all interfaces (any).

- services.xtreemfs.osd.enable: Whether to enable XtreemFS OSD service.

- services.xtreemfs.osd.extraConfig: Configuration of XtreemFS OSD service.
WARNING: configuration is saved as plaintext inside nix store.
For more options: <https://www.xtreemfs.org/xtfs-guide-1.5.1/index.html>

- services.xtreemfs.osd.httpPort: Specifies the listen port for the HTTP service that returns the
status page.

- services.xtreemfs.osd.port: The port to listen on for incoming connections (TCP and UDP).

- services.xtreemfs.osd.uuid: Must be set to a unique identifier, preferably a UUID according to
RFC 4122. UUIDs can be generated with `uuidgen` command, found in
the `util-linux` package.

- services.yandex-disk.directory: The directory to use for Yandex.Disk storage
- services.yandex-disk.enable: Whether to enable Yandex-disk client. See <https://disk.yandex.ru/>

- services.yandex-disk.excludes: Comma-separated list of directories which are excluded from synchronization.

- services.yandex-disk.password: Your yandex.com password. Warning: it will be world-readable in /nix/store.

- services.yandex-disk.user: The user the yandex-disk daemon should run as.

- services.yandex-disk.username: Your yandex.com login name.

- services.yarr.address: Address to run server on.
- services.yarr.authFilePath: Path to a file containing username:password. `null` means no authentication required to use the service.
- services.yarr.baseUrl: Base path of the service url.
- services.yarr.enable: Whether to enable Yet another rss reader.
- services.yarr.environmentFile: Environment file for specifying additional settings such as secrets.

See `yarr -help` for all available options.

- services.yarr.package: The yarr package to use.
- services.yarr.port: Port to run server on.
- services.yggdrasil.config: Alias of {option}`services.yggdrasil.settings`.
- services.yggdrasil.configFile: A file which contains JSON or HJSON configuration for yggdrasil. See
the {option}`settings` option for more information.

Note: This file must not be larger than 1 MB because it is passed to
the yggdrasil process via systemd‘s LoadCredential mechanism. For
details, see <https://systemd.io/CREDENTIALS/> and `man 5
systemd.exec`.

- services.yggdrasil.denyDhcpcdInterfaces: Disable the DHCP client for any interface whose name matches
any of the shell glob patterns in this list.  Use this
option to prevent the DHCP client from broadcasting requests
on the yggdrasil network.  It is only necessary to do so
when yggdrasil is running in TAP mode, because TUN
interfaces do not support broadcasting.

- services.yggdrasil.enable: Whether to enable the yggdrasil system service.
- services.yggdrasil.extraArgs: Extra command line arguments.
- services.yggdrasil.group: Group to grant access to the Yggdrasil control socket. If `null`, only root can access the socket.
- services.yggdrasil.openMulticastPort: Whether to open the UDP port used for multicast peer discovery. The
NixOS firewall blocks link-local communication, so in order to make
incoming local peering work you will also need to configure
`MulticastInterfaces` in your Yggdrasil configuration
({option}`settings` or {option}`configFile`). You will then have to
add the ports that you configure there to your firewall configuration
({option}`networking.firewall.allowedTCPPorts` or
{option}`networking.firewall.interfaces.<name>.allowedTCPPorts`).

- services.yggdrasil.package: The yggdrasil package to use.
- services.yggdrasil.persistentKeys: Whether to enable persistent keys. If enabled then keys will be generated once and Yggdrasil
will retain the same IPv6 address when the service is
restarted. Keys are stored at /var/lib/yggdrasil/keys.json
.
- services.yggdrasil.settings: Configuration for yggdrasil, as a Nix attribute set.

Warning: this is stored in the WORLD-READABLE Nix store!
Therefore, it is not appropriate for private keys. If you
wish to specify the keys, use {option}`configFile`.

If the {option}`persistentKeys` is enabled then the
keys that are generated during activation will override
those in {option}`settings` or
{option}`configFile`.

If no keys are specified then ephemeral keys are generated
and the Yggdrasil interface will have a random IPv6 address
each time the service is started. This is the default.

If both {option}`configFile` and {option}`settings`
are supplied, they will be combined, with values from
{option}`configFile` taking precedence.

You can use the command `nix-shell -p yggdrasil --run "yggdrasil -genconf"`
to generate default configuration values with documentation.

- services.yggdrasil-jumper.appendListenAddresses: Append Yggdrasil router configuration with listeners on loopback
addresses (`127.0.0.1`) and preselected ports to support peering
using client-server protocols like `quic` and `tls`.

See `Listen` option in Yggdrasil router configuration.

- services.yggdrasil-jumper.detectWireguard: Control whether `settings.wireguard = true` should automatically
provide CAP_NET_ADMIN capability and make the necessary packages
available to Yggdrasil Jumper service.

- services.yggdrasil-jumper.enable: Whether to enable the Yggdrasil Jumper system service.
- services.yggdrasil-jumper.extraArgs: Extra command line arguments for Yggdrasil Jumper.

- services.yggdrasil-jumper.extraConfig: Configuration for Yggdrasil Jumper in plaintext.

- services.yggdrasil-jumper.logLevel: Set logging verbosity for Yggdrasil Jumper.

- services.yggdrasil-jumper.package: The yggdrasil-jumper package to use.
- services.yggdrasil-jumper.retrieveListenAddresses: Automatically retrieve listen addresses from the Yggdrasil router configuration.

See `yggdrasil_listen` option in Yggdrasil Jumper configuration.

- services.yggdrasil-jumper.settings: Configuration for Yggdrasil Jumper as a Nix attribute set.

- services.ympd.enable: Whether to enable ympd, the MPD Web GUI.
- services.ympd.mpd.host: The host where MPD is listening.
- services.ympd.mpd.port: The port where MPD is listening.
- services.ympd.webPort: The port where ympd's web interface will be available.
- services.your_spotify.clientPackage: Client package to use.
- services.your_spotify.enable: Whether to enable your_spotify.
- services.your_spotify.enableLocalDB: Whether to enable a local mongodb instance.
- services.your_spotify.nginxVirtualHost: If set creates an nginx virtual host for the client.
In most cases this should be the CLIENT_ENDPOINT without
protocol prefix.

- services.your_spotify.package: The your_spotify package to use.
- services.your_spotify.settings: Your Spotify Configuration. Refer to [Your Spotify](https://github.com/Yooooomi/your_spotify) for definitions and values.

- services.your_spotify.spotifySecretFile: A file containing the secret key of your Spotify application.
Refer to: [Creating the Spotify Application](https://github.com/Yooooomi/your_spotify#creating-the-spotify-application).

- services.youtrack.address: The interface youtrack will listen on.

- services.youtrack.autoUpgrade: Whether YouTrack should auto upgrade it without showing the upgrade dialog.
- services.youtrack.baseUrl: Alias of {option}`services.youtrack.environmentalParameters.base-url`.
- services.youtrack.enable: Whether to enable YouTrack service.
- services.youtrack.environmentalParameters: Environmental configuration parameters, set imperatively. The values doesn't get removed, when removed in Nix.
See <https://www.jetbrains.com/help/youtrack/server/2023.3/youtrack-java-start-parameters.html#environmental-parameters>
for more information.

- services.youtrack.extraParams
- services.youtrack.generalParameters: General configuration parameters and other JVM options.
See <https://www.jetbrains.com/help/youtrack/server/2023.3/youtrack-java-start-parameters.html#general-parameters>
for more information.

- services.youtrack.jvmOpts
- services.youtrack.maxMemory
- services.youtrack.maxMetaspaceSize
- services.youtrack.package: The youtrack package to use.
- services.youtrack.port: Alias of {option}`services.youtrack.environmentalParameters.listen-port`.
- services.youtrack.statePath: Path were the YouTrack state is stored.
To this path the base version (e.g. 2023_1) of the used package will be appended.

- services.youtrack.virtualHost: Name of the nginx virtual host to use and setup.
If null, do not setup anything.

- services.ytdl-sub.group: Group under which ytdl-sub runs.
- services.ytdl-sub.instances: Configuration for ytdl-sub instances.
- services.ytdl-sub.package: The ytdl-sub package to use.
- services.ytdl-sub.user: User account under which ytdl-sub runs.
- services.yubikey-agent.enable: Whether to start yubikey-agent when you log in.  Also sets
SSH_AUTH_SOCK to point at yubikey-agent.

Note that yubikey-agent will use whatever pinentry is
specified in programs.gnupg.agent.pinentryPackage.

- services.yubikey-agent.package: The yubikey-agent package to use.
- services.zabbixAgent.enable: Whether to enable the Zabbix Agent.
- services.zabbixAgent.extraConfig
- services.zabbixAgent.extraPackages: Packages to be added to the Zabbix {env}`PATH`.
Typically used to add executables for scripts, but can be anything.

- services.zabbixAgent.listen.ip: List of comma delimited IP addresses that the agent should listen on.

- services.zabbixAgent.listen.port: Agent will listen on this port for connections from the server.

- services.zabbixAgent.modules: A set of modules to load.
- services.zabbixAgent.openFirewall: Open ports in the firewall for the Zabbix Agent.

- services.zabbixAgent.package: The agent package to use.
- services.zabbixAgent.server: The IP address or hostname of the Zabbix server to connect to.

- services.zabbixAgent.settings: Zabbix Agent configuration. Refer to
<https://www.zabbix.com/documentation/current/manual/appendix/config/zabbix_agentd>
for details on supported values.

- services.zabbixProxy.database
- services.zabbixProxy.enable: Whether to enable the Zabbix Proxy.
- services.zabbixProxy.extraConfig
- services.zabbixProxy.extraPackages: Packages to be added to the Zabbix {env}`PATH`.
Typically used to add executables for scripts, but can be anything.

- services.zabbixProxy.listen.ip: List of comma delimited IP addresses that the trapper should listen on.
Trapper will listen on all network interfaces if this parameter is missing.

- services.zabbixProxy.listen.port: Listen port for trapper.

- services.zabbixProxy.modules: A set of modules to load.
- services.zabbixProxy.openFirewall: Open ports in the firewall for the Zabbix Proxy.

- services.zabbixProxy.package: The Zabbix package to use.
- services.zabbixProxy.server: The IP address or hostname of the Zabbix server to connect to.

- services.zabbixProxy.settings: Zabbix Proxy configuration. Refer to
<https://www.zabbix.com/documentation/current/manual/appendix/config/zabbix_proxy>
for details on supported values.

- services.zabbixServer.database
- services.zabbixServer.dbPassword
- services.zabbixServer.dbServer: Alias of {option}`services.zabbixServer.database.host`.
- services.zabbixServer.enable: Whether to enable the Zabbix Server.
- services.zabbixServer.extraConfig
- services.zabbixServer.extraPackages: Packages to be added to the Zabbix {env}`PATH`.
Typically used to add executables for scripts, but can be anything.

- services.zabbixServer.listen.ip: List of comma delimited IP addresses that the trapper should listen on.
Trapper will listen on all network interfaces if this parameter is missing.

- services.zabbixServer.listen.port: Listen port for trapper.

- services.zabbixServer.modules: A set of modules to load.
- services.zabbixServer.openFirewall: Open ports in the firewall for the Zabbix Server.

- services.zabbixServer.package: The Zabbix package to use.
- services.zabbixServer.settings: Zabbix Server configuration. Refer to
<https://www.zabbix.com/documentation/current/manual/appendix/config/zabbix_server>
for details on supported values.

- services.zabbixWeb.database
- services.zabbixWeb.enable: Whether to enable the Zabbix web interface.
- services.zabbixWeb.extraConfig: Additional configuration to be copied verbatim into {file}`zabbix.conf.php`.

- services.zabbixWeb.frontend: Frontend server to use.
- services.zabbixWeb.hostname: Hostname for either nginx or httpd.
- services.zabbixWeb.httpd.virtualHost: Apache configuration can be done by adapting `services.httpd.virtualHosts.<name>`.
See [](#opt-services.httpd.virtualHosts) for further information.

- services.zabbixWeb.nginx.virtualHost: Nginx configuration can be done by adapting `services.nginx.virtualHosts.<name>`.
See [](#opt-services.nginx.virtualHosts) for further information.

- services.zabbixWeb.package: The web package to use.
- services.zabbixWeb.poolConfig: Options for the Zabbix PHP pool. See the documentation on `php-fpm.conf` for details on configuration directives.

- services.zabbixWeb.server.address: The IP address or hostname of the Zabbix server to connect to.
- services.zabbixWeb.server.port: The port of the Zabbix server to connect to.
- services.zabbixWeb.virtualHost: Alias of {option}`services.zabbixWeb.httpd.virtualHost`.
- services.zammad.dataDir: Path to a folder that will contain Zammad working directory.

- services.zammad.database.createLocally: Whether to create a local database automatically.
- services.zammad.database.host: Database host address.

- services.zammad.database.name: Database name.

- services.zammad.database.passwordFile: A file containing the password for {option}`services.zammad.database.user`.

- services.zammad.database.port: Database port. Use `null` for default port.
- services.zammad.database.settings: The {file}`database.yml` configuration file as key value set.
See \<TODO\>
for list of configuration parameters.

- services.zammad.database.user: Database user.
- services.zammad.enable: Whether to enable Zammad, a web-based, open source user support/ticketing solution.
- services.zammad.group: Name of the Zammad group.

- services.zammad.host: Host address.
- services.zammad.openPorts: Whether to open firewall ports for Zammad
- services.zammad.package: The zammad package to use.
- services.zammad.port: Web service port.
- services.zammad.redis.createLocally: Whether to create a local redis automatically.
- services.zammad.redis.host: Redis server address.

- services.zammad.redis.name: Name of the redis server. Only used if `createLocally` is set to true.

- services.zammad.redis.port: Port of the redis server.
- services.zammad.secretKeyBaseFile: The path to a file containing the
`secret_key_base` secret.

Zammad uses `secret_key_base` to encrypt
the cookie store, which contains session data, and to digest
user auth tokens.

Needs to be a 64 byte long string of hexadecimal
characters. You can generate one by running

```
openssl rand -hex 64 >/path/to/secret_key_base_file
```

This should be a string, not a nix path, since nix paths are
copied into the world-readable nix store.

- services.zammad.user: Name of the Zammad user.

- services.zammad.websocketPort: Websocket service port.
- services.zapret.blacklist: Specify a list of domains NOT to bypass. All other domains will be bypassed.
You can specify either whitelist or blacklist, but not both.
If neither are specified, then bypass all domains.

- services.zapret.configureFirewall: Whether to setup firewall routing so that system http(s) traffic is forwarded via this service.
Disable if you want to set it up manually.

- services.zapret.enable: Whether to enable the Zapret DPI bypass service..
- services.zapret.httpMode: By default this service only changes the first packet sent, which is enough in most cases.
But there are DPIs that monitor the whole traffic within a session.
That requires full processing of every packet, which increases the CPU usage.

Set the mode to `full` if http doesn't work.

- services.zapret.httpSupport: Whether to route http traffic on port 80.
Http bypass rarely works and you might want to disable it if you don't utilise http connections.

- services.zapret.package: The zapret package to use.
- services.zapret.params: Specify the bypass parameters for Zapret binary.
There are no universal parameters as they vary between different networks, so you'll have to find them yourself.

This can be done by running the `blockcheck` binary from zapret package, i.e. `nix-shell -p zapret --command blockcheck`.
It'll try different params and then tell you which params are working for your network.

- services.zapret.qnum: Routing queue number.
Only change this if you already use the default queue number somewhere else.

- services.zapret.udpPorts: List of UDP ports to route.
Port ranges are delimited with a colon like this "50000:50099".

- services.zapret.udpSupport: Enable UDP routing.
This requires you to specify `udpPorts` and `--dpi-desync-any-protocol` parameter.

- services.zapret.whitelist: Specify a list of domains to bypass. All other domains will be ignored.
You can specify either whitelist or blacklist, but not both.
If neither are specified, then bypass all domains.

It is recommended to specify the whitelist. This will make sure that other resources won't be affected by this service.

- services.zeitgeist.enable: Whether to enable zeitgeist, a service which logs the users' activities and events.
- services.zenohd.backends: Storage backend packages to add to zenohd search paths.
- services.zenohd.enable: Whether to enable Zenoh daemon..
- services.zenohd.env: Set environment variables consumed by zenohd and its plugins.

- services.zenohd.extraOptions: Extra command line options for zenohd.
- services.zenohd.home: Base directory for zenohd related files defined via ZENOH_HOME.
- services.zenohd.package: The zenoh package to use.
- services.zenohd.plugins: Plugin packages to add to zenohd search paths.
- services.zenohd.settings: Config options for `zenoh.json5` configuration file.

See <https://github.com/eclipse-zenoh/zenoh/blob/main/DEFAULT_CONFIG.json5>
for more information.

- services.zerobin.dataDir: Path to the 0bin data directory

- services.zerobin.enable: Whether to enable 0bin.
- services.zerobin.extraConfig: Extra configuration to be appended to the 0bin config file
(see <https://0bin.readthedocs.org/en/latest/en/options.html>)

- services.zerobin.group: The group 0bin should run as

- services.zerobin.listenAddress: The address zerobin should listen to

- services.zerobin.listenPort: The port zerobin should listen on

- services.zerobin.user: The user 0bin should run as

- services.zeronet.dataDir
- services.zeronet.enable: Whether to enable zeronet.
- services.zeronet.fileserverPort: Zeronet fileserver port.
- services.zeronet.logDir
- services.zeronet.package: The zeronet package to use.
- services.zeronet.port: Optional zeronet web UI port.
- services.zeronet.settings: {file}`zeronet.conf` configuration. Refer to
<https://zeronet.readthedocs.io/en/latest/faq/#is-it-possible-to-use-a-configuration-file>
for details on supported values;

- services.zeronet.tor: Use TOR for zeronet traffic where possible.
- services.zeronet.torAlways: Use TOR for all zeronet traffic.
- services.zeronsd.servedNetworks: ZeroTier Networks to start zeronsd instances for.
- services.zerotierone.enable: Whether to enable ZeroTierOne.
- services.zerotierone.joinNetworks: List of ZeroTier Network IDs to join on startup.
Note that networks are only ever joined, but not automatically left after removing them from the list.
To remove networks, use the ZeroTier CLI: `zerotier-cli leave <network-id>`

- services.zerotierone.localConf: Optional configuration to be written to the Zerotier JSON-based local.conf.
If set, the configuration will be symlinked to `/var/lib/zerotier-one/local.conf` at build time.
To understand the configuration format, refer to <https://docs.zerotier.com/config/#local-configuration-options>.

- services.zerotierone.package: The zerotierone package to use.
- services.zerotierone.port: Network port used by ZeroTier.

- services.zeyple.enable: Whether to enable Zeyple, an utility program to automatically encrypt outgoing emails with GPG.
- services.zeyple.group: Group to use to run Zeyple.

::: {.note}
If left as the default value this group will automatically be created
on system activation, otherwise the sysadmin is responsible for
ensuring the user exists.
:::

- services.zeyple.keys: List of public key files that will be imported by gpg.
- services.zeyple.rotateLogs: Whether to enable rotation of log files.
- services.zeyple.settings: Zeyple configuration. refer to
<https://github.com/infertux/zeyple/blob/master/zeyple/zeyple.conf.example>
for details on supported values.

- services.zeyple.user: User to run Zeyple as.

::: {.note}
If left as the default value this user will automatically be created
on system activation, otherwise the sysadmin is responsible for
ensuring the user exists.
:::

- services.zfs.autoReplication.enable: Whether to enable ZFS snapshot replication.
- services.zfs.autoReplication.followDelete: Remove remote snapshots that don't have a local correspondent.
- services.zfs.autoReplication.host: Remote host where snapshots should be sent. `lz4` is expected to be installed on this host.
- services.zfs.autoReplication.identityFilePath: Path to SSH key used to login to host.
- services.zfs.autoReplication.localFilesystem: Local ZFS filesystem from which snapshots should be sent.  Defaults to the attribute name.
- services.zfs.autoReplication.package: The zfs-replicate package to use.
- services.zfs.autoReplication.recursive: Recursively discover snapshots to send.
- services.zfs.autoReplication.remoteFilesystem: Remote ZFS filesystem where snapshots should be sent.
- services.zfs.autoReplication.username: Username used by SSH to login to remote host.
- services.zfs.autoScrub.enable: Whether to enable periodic scrubbing of ZFS pools.
- services.zfs.autoScrub.interval: Systemd calendar expression when to scrub ZFS pools. See
{manpage}`systemd.time(7)`.

- services.zfs.autoScrub.pools: List of ZFS pools to periodically scrub. If empty, all pools
will be scrubbed.

- services.zfs.autoScrub.randomizedDelaySec: Add a randomized delay before each ZFS autoscrub.
The delay will be chosen between zero and this value.
This value must be a time span in the format specified by
{manpage}`systemd.time(7)`

- services.zfs.autoSnapshot.daily: Number of daily auto-snapshots that you wish to keep.

- services.zfs.autoSnapshot.enable: Enable the (OpenSolaris-compatible) ZFS auto-snapshotting service.
Note that you must set the `com.sun:auto-snapshot`
property to `true` on all datasets which you wish
to auto-snapshot.

You can override a child dataset to use, or not use auto-snapshotting
by setting its flag with the given interval:
`zfs set com.sun:auto-snapshot:weekly=false DATASET`

- services.zfs.autoSnapshot.flags: Flags to pass to the zfs-auto-snapshot command.

Run `zfs-auto-snapshot` (without any arguments) to
see available flags.

If it's not too inconvenient for snapshots to have timestamps in UTC,
it is suggested that you append `--utc` to the list
of default options (see example).

Otherwise, snapshot names can cause name conflicts or apparent time
reversals due to daylight savings, timezone or other date/time changes.

- services.zfs.autoSnapshot.frequent: Number of frequent (15-minute) auto-snapshots that you wish to keep.

- services.zfs.autoSnapshot.hourly: Number of hourly auto-snapshots that you wish to keep.

- services.zfs.autoSnapshot.monthly: Number of monthly auto-snapshots that you wish to keep.

- services.zfs.autoSnapshot.weekly: Number of weekly auto-snapshots that you wish to keep.

- services.zfs.expandOnBoot: After importing, expand each device in the specified pools.

Set the value to the plain string "all" to expand all pools on boot:

    services.zfs.expandOnBoot = "all";

or set the value to a list of pools to expand the disks of specific pools:

    services.zfs.expandOnBoot = [ "tank" "dozer" ];

- services.zfs.trim.enable: Whether to enable periodic TRIM on all ZFS pools.
- services.zfs.trim.interval: How often we run trim. For most desktop and server systems
a sufficient trimming frequency is once a week.

The format is described in
{manpage}`systemd.time(7)`.

- services.zfs.trim.randomizedDelaySec: Add a randomized delay before each ZFS trim.
The delay will be chosen between zero and this value.
This value must be a time span in the format specified by
{manpage}`systemd.time(7)`

- services.zfs.zed.enableMail: Whether to enable ZED's ability to send emails.

- services.zfs.zed.settings: ZFS Event Daemon /etc/zfs/zed.d/zed.rc content

See
{manpage}`zed(8)`
for details on ZED and the scripts in /etc/zfs/zed.d to find the possible variables

- services.zigbee2mqtt.config
- services.zigbee2mqtt.dataDir: Zigbee2mqtt data directory
- services.zigbee2mqtt.enable: Whether to enable zigbee2mqtt service.
- services.zigbee2mqtt.package: The zigbee2mqtt package to use.
- services.zigbee2mqtt.settings: Your {file}`configuration.yaml` as a Nix attribute set.
Check the [documentation](https://www.zigbee2mqtt.io/information/configuration.html)
for possible options.

- services.zipline.database.createLocally: Whether to enable and configure a local PostgreSQL database server.

- services.zipline.enable: Whether to enable Zipline.
- services.zipline.environmentFiles: Files to load environment variables from (in addition to [](#opt-services.zipline.settings)). This is useful to avoid putting secrets into the nix store. See <https://zipline.diced.sh/docs/config> for more information.

- services.zipline.package: The zipline package to use.
- services.zipline.settings: Configuration of Zipline. See <https://zipline.diced.sh/docs/config> for more information.

- services.zitadel.enable: Whether to enable ZITADEL, a user and identity access management platform.
- services.zitadel.extraSettingsPaths: A list of paths to extra settings files. These will override the
values set in [settings](#opt-services.zitadel.settings). Useful if
you want to keep sensitive secrets out of the Nix store.

- services.zitadel.extraStepsPaths: A list of paths to extra steps files. These will override the values
set in [steps](#opt-services.zitadel.steps). Useful if you want to
keep sensitive secrets out of the Nix store.

- services.zitadel.group: The group to run ZITADEL under.
- services.zitadel.masterKeyFile: Path to a file containing a master encryption key for ZITADEL. The
key must be 32 bytes.

- services.zitadel.openFirewall: Whether to open the port specified in `listenPort` in the firewall.

- services.zitadel.package: The ZITADEL package to use.
- services.zitadel.settings: Contents of the runtime configuration file. See
<https://zitadel.com/docs/self-hosting/manage/configure> for more
details.

- services.zitadel.steps: Contents of the database initialization config file. See
<https://zitadel.com/docs/self-hosting/manage/configure> for more
details.

- services.zitadel.tlsMode: The TLS mode to use. Options are:

- enabled: ZITADEL accepts HTTPS connections directly. You must
  configure TLS if this option is selected.
- external: ZITADEL forces HTTPS connections, with TLS terminated at a
  reverse proxy.
- disabled: ZITADEL accepts HTTP connections only. Should only be used
  for testing.

- services.zitadel.user: The user to run ZITADEL under.
- services.znapzend.autoCreation: Automatically create the destination dataset if it does not exist.
- services.znapzend.enable: Whether to enable ZnapZend ZFS backup daemon.
- services.znapzend.features.compressed: Whether to enable compressed feature which adds the options `-Lce` to
the {command}`zfs send` command. When this is enabled, make
sure that both the sending and receiving pool have the same relevant
features enabled. Using `-c` will skip unnecessary
decompress-compress stages, `-L` is for large block
support and -e is for embedded data support. see
{manpage}`znapzend(1)`
and {manpage}`zfs(8)`
for more info
.
- services.znapzend.features.lowmemRecurse: Whether to enable use lowmemRecurse on systems where you have too many datasets, so a
recursive listing of attributes to find backup plans exhausts the
memory available to {command}`znapzend`: instead, go the slower
way to first list all impacted dataset names, and then query their
configs one by one
.
- services.znapzend.features.oracleMode: Whether to enable destroying snapshots one by one instead of using one long argument list.
If source and destination are out of sync for a long time, you may have
so many snapshots to destroy that the argument gets is too long and the
command fails
.
- services.znapzend.features.recvu: Whether to enable recvu feature which uses `-u` on the receiving end to keep the destination
filesystem unmounted
.
- services.znapzend.features.sendRaw: Whether to enable sendRaw feature which adds the options `-w` to the
{command}`zfs send` command. For encrypted source datasets this
instructs zfs not to decrypt before sending which results in a remote
backup that can't be read without the encryption key/passphrase, useful
when the remote isn't fully trusted or not physically secure. This
option must be used consistently, raw incrementals cannot be based on
non-raw snapshots and vice versa
.
- services.znapzend.features.skipIntermediates: Whether to enable the skipIntermediates feature to send a single increment
between latest common snapshot and the newly made one. It may skip
several source snaps if the destination was offline for some time, and
it should skip snapshots not managed by znapzend. Normally for online
destinations, the new snapshot is sent as soon as it is created on the
source, so there are no automatic increments to skip
.
- services.znapzend.features.zfsGetType: Whether to enable using zfsGetType if your {command}`zfs get` supports a
`-t` argument for filtering by dataset type at all AND
lists properties for snapshots by default when recursing, so that there
is too much data to process while searching for backup plans.
If these two conditions apply to your system, the time needed for a
`--recursive` search for backup plans can literally
differ by hundreds of times (depending on the amount of snapshots in
that dataset tree... and a decent backup plan will ensure you have a lot
of those), so you would benefit from requesting this feature
.
- services.znapzend.logLevel: The log level when logging to file. Any of debug, info, warning, err,
alert. Default in daemonized form is debug.

- services.znapzend.logTo: Where to log to (syslog::\<facility\> or \<filepath\>).

- services.znapzend.mailErrorSummaryTo: Email address to send a summary to if "send task(s) failed".

- services.znapzend.noDestroy: Does all changes to the filesystem except destroy.
- services.znapzend.pure: Do not persist any stateful znapzend setups. If this option is
enabled, your previously set znapzend setups will be cleared and only
the ones defined with this module will be applied.

- services.znapzend.zetup: Znapzend configuration.
- services.znc.confOptions.extraZncConf: Extra config to `znc.conf` file.

- services.znc.confOptions.modules: A list of modules to include in the `znc.conf` file.

- services.znc.confOptions.networks: IRC networks to connect the user to.

- services.znc.confOptions.nick: The IRC nick.

- services.znc.confOptions.passBlock: Generate with {command}`nix-shell -p znc --command "znc --makepass"`.
This is the password used to log in to the ZNC web admin interface.
You can also set this through
{option}`services.znc.config.User.<username>.Pass.Method`
and co.

- services.znc.confOptions.port: Specifies the port on which to listen.

- services.znc.confOptions.uriPrefix: An optional URI prefix for the ZNC web interface. Can be
used to make ZNC available behind a reverse proxy.

- services.znc.confOptions.useSSL: Indicates whether the ZNC server should use SSL when listening on
the specified port. A self-signed certificate will be generated.

- services.znc.confOptions.userModules: A list of user modules to include in the `znc.conf` file.

- services.znc.confOptions.userName: The user name used to log in to the ZNC web admin interface.

- services.znc.config: Configuration for ZNC, see
<https://wiki.znc.in/Configuration> for details. The
Nix value declared here will be translated directly to the xml-like
format ZNC expects. This is much more flexible than the legacy options
under {option}`services.znc.confOptions.*`, but also can't do
any type checking.

You can use {command}`nix-instantiate --eval --strict '<nixpkgs/nixos>' -A config.services.znc.config`
to view the current value. By default it contains a listener for port
5000 with SSL enabled.

Nix attributes called `extraConfig` will be inserted
verbatim into the resulting config file.

If {option}`services.znc.useLegacyConfig` is turned on, the
option values in {option}`services.znc.confOptions.*` will be
gracefully be applied to this option.

If you intend to update the configuration through this option, be sure
to disable {option}`services.znc.mutable`, otherwise none of the
changes here will be applied after the initial deploy.

- services.znc.configFile: Configuration file for ZNC. It is recommended to use the
{option}`config` option instead.

Setting this option will override any auto-generated config file
through the {option}`confOptions` or {option}`config`
options.

- services.znc.dataDir: The state directory for ZNC. The config and the modules will be linked
to from this directory as well.

- services.znc.enable: Whether to enable ZNC.
- services.znc.extraFlags: Extra arguments to use for executing znc.

- services.znc.group: Group to own the ZNC process.

- services.znc.modulePackages: A list of global znc module packages to add to znc.

- services.znc.mutable: Indicates whether to allow the contents of the
`dataDir` directory to be changed by the user at
run-time.

If enabled, modifications to the ZNC configuration after its initial
creation are not overwritten by a NixOS rebuild. If disabled, the
ZNC configuration is rebuilt on every NixOS rebuild.

If the user wants to manage the ZNC service using the web admin
interface, this option should be enabled.

- services.znc.openFirewall: Whether to open ports in the firewall for ZNC. Does work with
ports for listeners specified in
{option}`services.znc.config.Listener`.

- services.znc.useLegacyConfig: Whether to propagate the legacy options under
{option}`services.znc.confOptions.*` to the znc config. If this
is turned on, the znc config will contain a user with the default name
"znc", global modules "webadmin" and "adminlog" will be enabled by
default, and more, all controlled through the
{option}`services.znc.confOptions.*` options.
You can use {command}`nix-instantiate --eval --strict '<nixpkgs/nixos>' -A config.services.znc.config`
to view the current value of the config.

In any case, if you need more flexibility,
{option}`services.znc.config` can be used to override/add to
all of the legacy options.

- services.znc.user: The name of an existing user account to use to own the ZNC server
process. If not specified, a default user will be created.

- services.znc.zncConf
- services.zoneminder.cameras: Set this to the number of cameras you expect to support.

- services.zoneminder.database.createLocally: Create the database and database user locally.

- services.zoneminder.database.host: Hostname hosting the database.

- services.zoneminder.database.name: Name of database.

- services.zoneminder.database.password: Username for accessing the database.
Not used if `createLocally` is set.

- services.zoneminder.database.username: Username for accessing the database.

- services.zoneminder.enable: Whether to enable ZoneMinder.

If you intend to run the database locally, you should set
`config.services.zoneminder.database.createLocally` to true. Otherwise,
when set to `false` (the default), you will have to create the database
and database user as well as populate the database yourself.
Additionally, you will need to run `zmupdate.pl` yourself when
upgrading to a newer version
.
- services.zoneminder.extraConfig: Additional configuration added verbatim to the configuration file.

- services.zoneminder.hostname: The hostname on which to listen.

- services.zoneminder.openFirewall: Open the firewall port(s).

- services.zoneminder.port: The port on which to listen.

- services.zoneminder.storageDir: ZoneMinder can generate quite a lot of data, so in case you don't want
to use the default /var/lib/zoneminder, you can override the path here.

- services.zoneminder.webserver: The webserver to configure for the PHP frontend.

Set it to `none` if you want to configure it yourself. PRs are welcome
for support for other web servers.

- services.zookeeper.dataDir: Data directory for Zookeeper

- services.zookeeper.enable: Whether to enable Zookeeper.
- services.zookeeper.extraCmdLineOptions: Extra command line options for the Zookeeper launcher.
- services.zookeeper.extraConf: Extra configuration for Zookeeper.
- services.zookeeper.id: Zookeeper ID.
- services.zookeeper.jre: The JRE with which to run Zookeeper
- services.zookeeper.logging: Zookeeper logging configuration, logback.xml.
- services.zookeeper.package: The zookeeper package to use.
- services.zookeeper.port: Zookeeper Client port.
- services.zookeeper.preferIPv4: Add the -Djava.net.preferIPv4Stack=true flag to the Zookeeper server.

- services.zookeeper.purgeInterval: The time interval in hours for which the purge task has to be triggered. Set to a positive integer (1 and above) to enable the auto purging.

- services.zookeeper.servers: All Zookeeper Servers.
- services.zram-generator.enable: Whether to enable Systemd unit generator for zram devices.
- services.zram-generator.package: The zram-generator package to use.
- services.zram-generator.settings: Configuration for zram-generator,
see <https://github.com/systemd/zram-generator> for documentation.

- services.zrepl.enable: Whether to enable zrepl.
- services.zrepl.package: The zrepl package to use.
- services.zrepl.settings: Configuration for zrepl. See <https://zrepl.github.io/configuration.html>
for more information.

- services.zwave-js.enable: Whether to enable the zwave-js server on boot.
- services.zwave-js.extraFlags: Extra flags to pass to command

- services.zwave-js.package: The zwave-js-server package to use.
- services.zwave-js.port: Port for the server to listen on.

- services.zwave-js.secretsConfigFile: JSON file containing secret keys. A dummy example:

```
{
  "securityKeys": {
    "S0_Legacy": "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
    "S2_Unauthenticated": "BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB",
    "S2_Authenticated": "CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC",
    "S2_AccessControl": "DDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDD"
  }
}
```

See
<https://zwave-js.github.io/node-zwave-js/#/getting-started/security-s2>
for details. This file will be merged with the module-generated config
file (taking precedence).

Z-Wave keys can be generated with:

  {command}`< /dev/urandom tr -dc A-F0-9 | head -c32 ;echo`


::: {.warning}
A file in the nix store should not be used since it will be readable to
all users.
:::

- services.zwave-js.serialPort: Serial port device path for Z-Wave controller.

- services.zwave-js.settings: Configuration settings for the generated config
file.

- services.zwave-js-ui.enable: Whether to enable zwave-js-ui.
- services.zwave-js-ui.package: The zwave-js-ui package to use.
- services.zwave-js-ui.serialPort: Serial port for the Z-Wave controller.

Only used to grant permissions to the device; must be additionally configured in the application

- services.zwave-js-ui.settings: Extra environment variables passed to the zwave-js-ui process.

Check <https://zwave-js.github.io/zwave-js-ui/#/guide/env-vars> for possible options

- servicesProfiles.adguardhome.enable: Whether to enable AdGuard Home DNS with rewrites/profile wiring..
- servicesProfiles.adguardhome.filterLists: List of upstream filter lists for AdGuardHome.
- servicesProfiles.adguardhome.rewrites: List of DNS rewrite rules for AdGuard Home.
- servicesProfiles.avahi.enable: Whether to enable Avahi (mDNS) profile..
- servicesProfiles.bitcoind.dataDir: Filesystem path for the Bitcoin Core data directory.
The directory is created automatically with the correct ownership when the profile is enabled.
- servicesProfiles.bitcoind.enable: Whether to enable Bitcoin Core node profile with a custom data directory..
- servicesProfiles.bitcoind.instance: Instance name used under services.bitcoind.<name>.
The resulting systemd unit runs as bitcoind-<name>.
- servicesProfiles.bitcoind.p2pPort: TCP port to expose for Bitcoin peer-to-peer traffic.
Set this to 18333 for testnet or another value if you override the service port.
- servicesProfiles.jellyfin.enable: Whether to enable Jellyfin media server profile..
- servicesProfiles.mpd.enable: Whether to enable MPD (Music Player Daemon) profile..
- servicesProfiles.navidrome.enable: Whether to enable Navidrome music server profile..
- servicesProfiles.nextcloud.enable: Whether to enable Nextcloud server profile (with optional Caddy proxy)..
- servicesProfiles.nextcloud.package: Nextcloud package derivation to use for the service.
Set to a specific `pkgs.nextcloudXX` or a flake-provided package to pin the major version.
When unset, the module uses a sensible default from `pkgs` (currently Nextcloud 31).

- servicesProfiles.openssh.enable: Whether to enable OpenSSH (and mosh) profile..
- servicesProfiles.samba.enable: Whether to enable Samba (SMB/CIFS) fileshare profile..
- servicesProfiles.syncthing.enable: Whether to enable Syncthing device sync profile..
- servicesProfiles.unbound.dnssec.enable: Enable DNSSEC validation in Unbound.
- servicesProfiles.unbound.doh.ipv6Servers: Allow IPv6 upstream servers in dnscrypt-proxy2.
- servicesProfiles.unbound.doh.listenAddress: Local address where dnscrypt-proxy2 (DoH proxy) listens.
- servicesProfiles.unbound.doh.requireDnssec: Require DNSSEC-capable upstreams in dnscrypt-proxy2.
- servicesProfiles.unbound.doh.serverNames: dnscrypt-proxy2 server_names to use for DoH.
- servicesProfiles.unbound.doh.sources: Optional dnscrypt-proxy2 sources object to override default public-resolvers.
- servicesProfiles.unbound.dotUpstreams: List of DoT forwarders in host@port#SNI format.
- servicesProfiles.unbound.enable: Whether to enable Unbound DNS resolver profile..
- servicesProfiles.unbound.mode: How Unbound fetches upstream DNS: direct recursion, DNS-over-TLS, or via DoH proxy.
- servicesProfiles.unbound.tuning.aggressiveNsec: Synthesize NXDOMAIN/NOERROR/NODATA from NSEC/NSEC3 (Unbound: aggressive-nsec).
- servicesProfiles.unbound.tuning.cacheMaxTtl: Maximum TTL to apply to cache entries (Unbound: cache-max-ttl).
- servicesProfiles.unbound.tuning.cacheMinTtl: Minimum TTL to apply to cache entries (Unbound: cache-min-ttl).
- servicesProfiles.unbound.tuning.logLocalActions: Log local actions (cache, validation) (Unbound: log-local-actions).
- servicesProfiles.unbound.tuning.logQueries: Enable query logging (Unbound: log-queries). Heavy; keep off by default.
- servicesProfiles.unbound.tuning.logReplies: Enable reply logging (Unbound: log-replies).
- servicesProfiles.unbound.tuning.logServfail: Log SERVFAIL responses (Unbound: log-servfail).
- servicesProfiles.unbound.tuning.minimalResponses: Prefer minimal responses to reduce packet sizes (Unbound: minimal-responses).
- servicesProfiles.unbound.tuning.prefetch: Enable prefetch of expiring records (Unbound: prefetch).
- servicesProfiles.unbound.tuning.prefetchKey: Prefetch DNSKEY/DS (Unbound: prefetch-key).
- servicesProfiles.unbound.tuning.serveExpired.enable: Serve expired records while refreshing in background (Unbound: serve-expired).
- servicesProfiles.unbound.tuning.serveExpired.maxTtl: Maximum seconds to serve expired data (Unbound: serve-expired-ttl).
- servicesProfiles.unbound.tuning.serveExpired.replyTtl: TTL in seconds used on served-expired replies (Unbound: serve-expired-reply-ttl).
- servicesProfiles.unbound.tuning.verbosity: Unbound log verbosity (0–5).
- servicesProfiles.wakapi.enable: Whether to enable Wakapi CLI tools profile..
- snapraid: Alias of {option}`services.snapraid`.
- sops.age.generateKey: Whether or not to generate the age key. If this
option is set to false, the key must already be
present at the specified location.

- sops.age.keyFile: Path to age key file used for sops decryption.

- sops.age.sshKeyPaths: Paths to ssh keys added as age keys during sops description.

- sops.defaultSopsFile: Default sops file used for all secrets.

- sops.defaultSopsFormat: Default sops format used for all secrets.

- sops.defaultSopsKey: Default key used to lookup in all secrets.
This option is ignored if format is binary.
"" means whole file.

- sops.environment: Environment variables to set before calling sops-install-secrets.

The values are placed in single quotes and not escaped any further to
allow usage of command substitutions for more flexibility. To properly quote
strings with quotes use lib.escapeShellArg.

This will be evaluated twice when using secrets that use neededForUsers but
in a subshell each time so the environment variables don't collide.

- sops.gnupg.home: Path to gnupg database directory containing the key for decrypting the sops file.

- sops.gnupg.sshKeyPaths: Path to ssh keys added as GPG keys during sops description.
This option must be explicitly unset if <literal>config.sops.gnupg.home</literal> is set.

- sops.gnupgHome: Alias of {option}`sops.gnupg.home`.
- sops.keepGenerations: Number of secrets generations to keep. Setting this to 0 disables pruning.

- sops.log: What to log
- sops.package: sops-install-secrets package to use.

- sops.placeholder
- sops.secrets: Path where the latest secrets are mounted to.

- sops.sshKeyPaths: Alias of {option}`sops.gnupg.sshKeyPaths`.
- sops.templates: Templates for secret files
- sops.useTmpfs: Use tmpfs in place of ramfs for secrets storage.

*WARNING*
On Linux kernels earlier than 6.4, enabling this option has the potential to write secrets to disk unencrypted if the tmpfs volume is written to swap. Do not use unless absolutely necessary.

When using a swap file or device, consider enabling swap encryption by setting the `randomEncryption.enable` option

```
swapDevices = [{
  device = "/dev/sdXY";
  randomEncryption.enable = true;
}];
```

- sops.validateSopsFiles: Check all sops files at evaluation time.
This requires sops files to be added to the nix store.

- sops.validationPackage: sops-install-secrets package to use when validating configuration.

Defaults to sops.package if building natively, and a native version of sops-install-secrets if cross compiling.

- sound.enable
- sound.enableOSSEmulation: Alias of {option}`hardware.alsa.enableOSSEmulation`.
- sound.extraConfig: Alias of {option}`hardware.alsa.config`.
- sound.mediaKeys
- specialisation: Additional configurations to build. If
`inheritParentConfig` is true, the system
will be based on the overall system configuration.

To switch to a specialised configuration
(e.g. `fewJobsManyCores`) at runtime, run:

```
sudo /run/current-system/specialisation/fewJobsManyCores/bin/switch-to-configuration test
```

- stubby.debugLogging
- swapDevices: The swap devices and swap files.  These must have been
initialised using {command}`mkswap`.  Each element
should be an attribute set specifying either the path of the
swap device or file (`device`) or the label
of the swap device (`label`, see
{command}`mkswap -L`).  Using a label is
recommended.

- system.activatable: Whether to add the activation script to the system profile.

The default, to have the script available all the time, is what we normally
do, but for image based systems, this may not be needed or not be desirable.

- system.activatableSystemBuilderCommands: Like `system.systemBuilderCommands`, but only for the commands that are
needed *both* when the system is activatable and when it isn't.

Disclaimer: This option might go away in the future. It might be
superseded by separating switch-to-configuration into a separate script
which will make this option superfluous. See
https://github.com/NixOS/nixpkgs/pull/263462#discussion_r1373104845 for
a discussion.

- system.activationScripts: A set of shell script fragments that are executed when a NixOS
system configuration is activated.  Examples are updating
/etc, creating accounts, and so on.  Since these are executed
every time you boot the system or run
{command}`nixos-rebuild`, it's important that they are
idempotent and fast.

- system.autoUpgrade.allowReboot: Reboot the system into the new generation instead of a switch
if the new generation uses a different kernel, kernel modules
or initrd than the booted system.
See {option}`rebootWindow` for configuring the times at which a reboot is allowed.

- system.autoUpgrade.channel: The URI of the NixOS channel to use for automatic
upgrades. By default, this is the channel set using
{command}`nix-channel` (run `nix-channel --list`
to see the current value).

- system.autoUpgrade.dates: How often or when upgrade occurs. For most desktop and server systems
a sufficient upgrade frequency is once a day.

The format is described in
{manpage}`systemd.time(7)`.

- system.autoUpgrade.enable: Whether to periodically upgrade NixOS to the latest
version. If enabled, a systemd timer will run
`nixos-rebuild switch --upgrade` once a
day.

- system.autoUpgrade.fixedRandomDelay: Make the randomized delay consistent between runs.
This reduces the jitter between automatic upgrades.
See {option}`randomizedDelaySec` for configuring the randomized delay.

- system.autoUpgrade.flags: Any additional flags passed to {command}`nixos-rebuild`.

If you are using flakes and use a local repo you can add
{command}`[ "--update-input" "nixpkgs" "--commit-lock-file" ]`
to update nixpkgs.

- system.autoUpgrade.flake: The Flake URI of the NixOS configuration to build.
Disables the option {option}`system.autoUpgrade.channel`.

- system.autoUpgrade.operation: Whether to run
`nixos-rebuild switch --upgrade` or run
`nixos-rebuild boot --upgrade`

- system.autoUpgrade.persistent: Takes a boolean argument. If true, the time when the service
unit was last triggered is stored on disk. When the timer is
activated, the service unit is triggered immediately if it
would have been triggered at least once during the time when
the timer was inactive. Such triggering is nonetheless
subject to the delay imposed by RandomizedDelaySec=. This is
useful to catch up on missed runs of the service when the
system was powered down.

- system.autoUpgrade.randomizedDelaySec: Add a randomized delay before each automatic upgrade.
The delay will be chosen between zero and this value.
This value must be a time span in the format specified by
{manpage}`systemd.time(7)`

- system.autoUpgrade.rebootWindow: Define a lower and upper time value (in HH:MM format) which
constitute a time window during which reboots are allowed after an upgrade.
This option only has an effect when {option}`allowReboot` is enabled.
The default value of `null` means that reboots are allowed at any time.

- system.autoUpgrade.upgrade: Disable adding the `--upgrade` parameter when `channel`
is not set, such as when upgrading to the latest version
of a flake honouring its lockfile.

- system.boot.loader.id: Id string of the used bootloader.

- system.boot.loader.initrdFile: Name of the initrd file to be passed to the bootloader.

- system.boot.loader.kernelFile: Name of the kernel file to be passed to the bootloader.

- system.boot.loader.ukiFile: Name of the UKI file
- system.build: Attribute set of derivations used to set up the system.

- system.checks: Packages that are added as dependencies of the system's build, usually
for the purpose of validating some part of the configuration.

Unlike `system.extraDependencies`, these store paths do not
become part of the built system configuration.

- system.configurationRevision: The Git revision of the top-level flake from which this configuration was built.
- system.copySystemConfiguration: If enabled, copies the NixOS configuration file
(usually {file}`/etc/nixos/configuration.nix`)
and symlinks it from the resulting system
(getting to {file}`/run/current-system/configuration.nix`).
Note that only this single file is copied, even if it imports others.
Warning: This feature cannot be used when the system is configured by a flake

- system.defaultChannel: Default NixOS channel to which the root user is subscribed.
- system.disableInstallerTools: Disable nixos-rebuild, nixos-generate-config, nixos-installer
and other NixOS tools. This is useful to shrink embedded,
read-only systems which are not expected to rebuild or
reconfigure themselves. Use at your own risk!

- system.dryActivationScript: The shell script that is to be run when dry-activating a system.
- system.etc.overlay.enable: Mount `/etc` as an overlayfs instead of generating it via a perl script.

Note: This is currently experimental. Only enable this option if you're
confident that you can recover your system if it breaks.

- system.etc.overlay.mutable: Whether to mount `/etc` mutably (i.e. read-write) or immutably (i.e. read-only).

If this is false, only the immutable lowerdir is mounted. If it is
true, a writable upperdir is mounted on top.

- system.extraDependencies: A list of paths that should be included in the system
closure but generally not visible to users.

This option has also been used for build-time checks, but the
`system.checks` option is more appropriate for that purpose as checks
should not leave a trace in the built system configuration.

- system.extraSystemBuilderCmds: This code will be added to the builder creating the system store path.

- system.forbiddenDependenciesRegex: Alias of {option}`system.forbiddenDependenciesRegexes`.
- system.forbiddenDependenciesRegexes: POSIX Extended Regular Expressions that match store paths that
should not appear in the system closure, with the exception of {option}`system.extraDependencies`, which is not checked.

- system.fsPackages: Packages supplying file system mounters and checkers.
- system.image.id: Image identifier.

This corresponds to the `IMAGE_ID` field in {manpage}`os-release(5)`. See the
upstream docs for more details on valid characters for this field:
<https://www.freedesktop.org/software/systemd/man/latest/os-release.html#IMAGE_ID=>

You would only want to set this option if you're build NixOS appliance images.

- system.image.version: Image version.

This corresponds to the `IMAGE_VERSION` field in {manpage}`os-release(5)`. See the
upstream docs for more details on valid characters for this field:
<https://www.freedesktop.org/software/systemd/man/latest/os-release.html#IMAGE_VERSION=>

You would only want to set this option if you're build NixOS appliance images.

- system.includeBuildDependencies: Whether to include the build closure of the whole system in
its runtime closure.  This can be useful for making changes
fully offline, as it includes all sources, patches, and
intermediate outputs required to build all the derivations
that the system depends on.

Note that this includes _all_ the derivations, down from the
included applications to their sources, the compilers used to
build them, and even the bootstrap compiler used to compile
the compilers. This increases the size of the system and the
time needed to download its dependencies drastically: a
minimal configuration with no extra services enabled grows
from ~670MiB in size to 13.5GiB, and takes proportionally
longer to download.

- system.modulesTree: Tree of kernel modules.  This includes the kernel, plus modules
built outside of the kernel.  Combine these into a single tree of
symlinks because modprobe only supports one directory.

- system.name: The name of the system used in the {option}`system.build.toplevel` derivation.

That derivation has the following name:
`"nixos-system-${config.system.name}-${config.system.nixos.label}"`

- system.nixos.codeName: The NixOS release code name (e.g. `Emu`).
- system.nixos.distroId: The id of the operating system
- system.nixos.distroName: The name of the operating system
- system.nixos.extraLSBReleaseArgs: Additional attributes to be merged with the /etc/lsb-release generator.
- system.nixos.extraOSReleaseArgs: Additional attributes to be merged with the /etc/os-release generator.
- system.nixos.label: NixOS version name to be used in the names of generated
outputs and boot labels.

If you ever wanted to influence the labels in your GRUB menu,
this is the option for you.

It can only contain letters, numbers and the following symbols:
`:`, `_`, `.` and `-`.

The default is {option}`system.nixos.tags` separated by
"-" + "-" + {env}`NIXOS_LABEL_VERSION` environment
variable (defaults to the value of
{option}`system.nixos.version`).

Can be overridden by setting {env}`NIXOS_LABEL`.

Useful for not loosing track of configurations built from different
nixos branches/revisions, e.g.:

```
#!/bin/sh
today=`date +%Y%m%d`
branch=`(cd nixpkgs ; git branch 2>/dev/null | sed -n '/^\* / { s|^\* ||; p; }')`
revision=`(cd nixpkgs ; git rev-parse HEAD)`
export NIXOS_LABEL_VERSION="$today.$branch-${revision:0:7}"
nixos-rebuild switch
```

- system.nixos.release: The NixOS release (e.g. `16.03`).
- system.nixos.revision: The Git revision from which this NixOS configuration was built.
- system.nixos.tags: Strings to prefix to the default
{option}`system.nixos.label`.

Useful for not losing track of configurations built with
different options, e.g.:

```
{
  system.nixos.tags = [ "with-xen" ];
  virtualisation.xen.enable = true;
}
```

- system.nixos.variantName: A string identifying a specific variant or edition of the operating system suitable for presentation to the user
- system.nixos.variant_id: A lower-case string identifying a specific variant or edition of the operating system
- system.nixos.vendorId: The id of the operating system vendor
- system.nixos.vendorName: The name of the operating system vendor
- system.nixos.version: The full NixOS version (e.g. `16.03.1160.f2d4ee1`).
- system.nixos.versionSuffix: The NixOS version suffix (e.g. `1160.f2d4ee1`).
- system.nixos-generate-config.configuration: The NixOS module that `nixos-generate-config`
saves to `/etc/nixos/configuration.nix`.

This is an internal option. No backward compatibility is guaranteed.
Use at your own risk!

Note that this string gets spliced into a Perl script. The perl
variable `$bootLoaderConfig` can be used to
splice in the boot loader configuration.

- system.nixos-generate-config.desktopConfiguration: Text to preseed the desktop configuration that `nixos-generate-config`
saves to `/etc/nixos/configuration.nix`.

This is an internal option. No backward compatibility is guaranteed.
Use at your own risk!

Note that this string gets spliced into a Perl script. The perl
variable `$bootLoaderConfig` can be used to
splice in the boot loader configuration.

- system.nixos-generate-config.flake: The NixOS module that `nixos-generate-config`
saves to `/etc/nixos/flake.nix` if --flake is set.

This is an internal option. No backward compatibility is guaranteed.
Use at your own risk!

Note that this string gets spliced into a Perl script. The perl
variable `$bootLoaderConfig` can be used to
splice in the boot loader configuration.

- system.nixos-init.enable: Whether to enable nixos-init, a system for bashless initialization.

This doesn't use any `activationScripts`. Anything set in these options is
a no-op here.
.
- system.nixos-init.package: The nixos-init package to use.
- system.nixosLabel: Alias of {option}`system.nixos.label`.
- system.nixosRevision: Alias of {option}`system.nixos.revision`.
- system.nixosVersion: Alias of {option}`system.nixos.version`.
- system.nixosVersionSuffix: Alias of {option}`system.nixos.versionSuffix`.
- system.nssDatabases.group: List of group entries to configure in {file}`/etc/nsswitch.conf`.

Note that "files" is always prepended while "systemd" is appended if nscd is enabled.

This option only takes effect if nscd is enabled.

- system.nssDatabases.hosts: List of hosts entries to configure in {file}`/etc/nsswitch.conf`.

Note that "files" is always prepended, and "dns" and "myhostname" are always appended.

This option only takes effect if nscd is enabled.

- system.nssDatabases.passwd: List of passwd entries to configure in {file}`/etc/nsswitch.conf`.

Note that "files" is always prepended while "systemd" is appended if nscd is enabled.

This option only takes effect if nscd is enabled.

- system.nssDatabases.services: List of services entries to configure in {file}`/etc/nsswitch.conf`.

Note that "files" is always prepended.

This option only takes effect if nscd is enabled.

- system.nssDatabases.shadow: List of shadow entries to configure in {file}`/etc/nsswitch.conf`.

Note that "files" is always prepended.

This option only takes effect if nscd is enabled.

- system.nssDatabases.sudoers: List of sudoers entries to configure in {file}`/etc/nsswitch.conf`.

Note that "files" is always prepended.

This option only takes effect if nscd is enabled.

- system.nssHosts: Alias of {option}`system.nssDatabases.hosts`.
- system.nssModules: Search path for NSS (Name Service Switch) modules.  This allows
several DNS resolution methods to be specified via
{file}`/etc/nsswitch.conf`.

- system.path: The packages you want in the boot environment.

- system.preSwitchChecks: A set of shell script fragments that are executed before the switch to a
new NixOS system configuration. A failure in any of these fragments will
cause the switch to fail and exit early.
The scripts receive the new configuration path and the action verb passed
to switch-to-configuration, as the first and second positional arguments
(meaning that you can access them using `$1` and `$2`, respectively).

- system.preSwitchChecksScript
- system.rebuild.enableNg: Whether to use ‘nixos-rebuild-ng’ in place of ‘nixos-rebuild’, the
Python-based re-implementation of the original in Bash.

- system.replaceDependencies.cutoffPackages: Packages to which no replacements should be applied.
The initrd is matched by default, because its structure renders the replacement process ineffective and prone to breakage.

- system.replaceDependencies.replacements: List of packages to override without doing a full rebuild.
The original derivation and replacement derivation must have the same
name length, and ideally should have close-to-identical directory layout.

- system.replaceRuntimeDependencies: Alias of {option}`system.replaceDependencies.replacements`.
- system.requiredKernelConfig: This option allows modules to specify the kernel config options that
must be set (or unset) for the module to work. Please use the
lib.kernelConfig functions to build list elements.

- system.services: A collection of NixOS [modular services](https://nixos.org/manual/nixos/unstable/#modular-services) that are configured as systemd services.

- system.stateVersion: This option defines the first version of NixOS you have installed on this particular machine,
and is used to maintain compatibility with application data (e.g. databases) created on older NixOS versions.

For example, if NixOS version XX.YY ships with AwesomeDB version N by default, and is then
upgraded to version XX.YY+1, which ships AwesomeDB version N+1, the existing databases
may no longer be compatible, causing applications to fail, or even leading to data loss.

The `stateVersion` mechanism avoids this situation by making the default version of such packages
conditional on the first version of NixOS you've installed (encoded in `stateVersion`), instead of
simply always using the latest one.

Note that this generally only affects applications that can't upgrade their data automatically -
applications and services supporting automatic migrations will remain on latest versions when
you upgrade.

Most users should **never** change this value after the initial install, for any reason,
even if you've upgraded your system to a new NixOS release.

This value does **not** affect the Nixpkgs version your packages and OS are pulled from,
so changing it will **not** upgrade your system.

This value being lower than the current NixOS release does **not** mean your system is
out of date, out of support, or vulnerable.

Do **not** change this value unless you have manually inspected all the changes it would
make to your configuration, and migrated your data accordingly.

- system.swapfile.enable: Whether to enable Create the swap file if missing before swap.target..
- system.swapfile.path: Absolute path to the swap file to ensure.
- system.swapfile.sizeGiB: Swap file size in GiB used on creation (if missing).
- system.switch.enable: Whether to include the capability to switch configurations.

Disabling this makes the system unable to be reconfigured via `nixos-rebuild`.

This is good for image based appliances where updates are handled
outside the image. Reducing features makes the image lighter and
slightly more secure.

- system.switch.enableNg
- system.systemBuilderArgs: `lib.mkDerivation` attributes that will be passed to the top level system builder.

- system.systemBuilderCommands: This code will be added to the builder creating the system store path.

- system.tools.nixos-build-vms.enable: Whether to enable nixos-build-vms script.
- system.tools.nixos-enter.enable: Whether to enable nixos-enter script.
- system.tools.nixos-generate-config.enable: Whether to enable nixos-generate-config script.
- system.tools.nixos-install.enable: Whether to enable nixos-install script.
- system.tools.nixos-option.enable: Whether to enable nixos-option script.
- system.tools.nixos-rebuild.enable: Whether to enable nixos-rebuild script.
- system.tools.nixos-version.enable: Whether to enable nixos-version script.
- system.userActivationScripts: A set of shell script fragments that are executed by a systemd user
service when a NixOS system configuration is activated. Examples are
rebuilding the .desktop file cache for showing applications in the menu.
Since these are executed every time you run
{command}`nixos-rebuild`, it's important that they are
idempotent and fast.

- systemd.additionalUpstreamSystemUnits: Additional units shipped with systemd that shall be enabled.

- systemd.additionalUpstreamUserUnits: Additional units shipped with systemd that should be enabled for per-user systemd instances.

- systemd.automounts: Definition of systemd automount units; see {manpage}`systemd.automount(5)`.

This is a list instead of an attrSet, because systemd mandates
the names to be derived from the `where` attribute.

- systemd.coredump.enable: Whether core dumps should be processed by
{command}`systemd-coredump`. If disabled, core dumps
appear in the current directory of the crashing process.

- systemd.coredump.extraConfig: Extra config options for systemd-coredump. See {manpage}`coredump.conf(5)` man page
for available options.

- systemd.ctrlAltDelUnit: Target that should be started when Ctrl-Alt-Delete is pressed;
see {manpage}`systemd.special(7)`.

- systemd.defaultUnit: Default unit started when the system boots; see {manpage}`systemd.special(7)`.

- systemd.enableCgroupAccounting
- systemd.enableEmergencyMode: Whether to enable emergency mode, which is an
{command}`sulogin` shell started on the console if
mounting a filesystem fails.  Since some machines (like EC2
instances) have no console of any kind, emergency mode doesn't
make sense, and it's better to continue with the boot insofar
as possible.

For initrd emergency access, use boot.initrd.systemd.emergencyAccess instead.

- systemd.enableStrictShellChecks: Whether to run `shellcheck` on the generated scripts for systemd
units.

When enabled, all systemd scripts generated by NixOS will be checked
with `shellcheck` and any errors or warnings will cause the build to
fail.

This affects all scripts that have been created through the `script`,
`reload`, `preStart`, `postStart`, `preStop` and `postStop` options for
systemd services. This does not affect command lines passed directly
to `ExecStart`, `ExecReload`, `ExecStartPre`, `ExecStartPost`,
`ExecStop` or `ExecStopPost`.

It therefore also does not affect systemd units that are coming from
packages and that are not defined through the NixOS config. This option
is disabled by default, and although some services have already been
fixed, it is still likely that you will encounter build failures when
enabling this.

We encourage people to enable this option when they are willing and
able to submit fixes for potential build failures to Nixpkgs. The
option can also be enabled or disabled for individual services using
the `enableStrictShellChecks` option on the service itself, which will
take precedence over the global setting.

- systemd.enableUnifiedCgroupHierarchy
- systemd.extraConfig
- systemd.generator-packages
- systemd.generators: Definition of systemd generators; see {manpage}`systemd.generator(5)`.

For each `NAME = VALUE` pair of the attrSet, a link is generated from
`/etc/systemd/system-generators/NAME` to `VALUE`.

- systemd.globalEnvironment: Environment variables passed to *all* systemd units.

- systemd.managerEnvironment: Environment variables of PID 1. These variables are
*not* passed to started units.

- systemd.mounts: Definition of systemd mount units; see {manpage}`systemd.mount(5)`.

This is a list instead of an attrSet, because systemd mandates
the names to be derived from the `where` attribute.

- systemd.network.config: Definition of global systemd network config.
- systemd.network.enable: Whether to enable networkd or not.

- systemd.network.links: Definition of systemd network links.
- systemd.network.netdevs: Definition of systemd network devices.
- systemd.network.networks: Definition of systemd networks.
- systemd.network.units: Definition of networkd units.
- systemd.network.wait-online.anyInterface: Whether to consider the network online when any interface is online, as opposed to all of them.
This is useful on portable machines with a wired and a wireless interface, for example.

This is on by default if {option}`networking.useDHCP` is enabled.

- systemd.network.wait-online.enable: Whether to enable the systemd-networkd-wait-online service.

systemd-networkd-wait-online can timeout and fail if there are no network interfaces
available for it to manage. When systemd-networkd is enabled but a different service is
responsible for managing the system's internet connection (for example, NetworkManager or
connman are used to manage WiFi connections), this service is unnecessary and can be
disabled.

- systemd.network.wait-online.extraArgs: Extra command-line arguments to pass to systemd-networkd-wait-online.
These also affect per-interface `systemd-network-wait-online@` services.

See {manpage}`systemd-networkd-wait-online.service(8)` for all available options.

- systemd.network.wait-online.ignoredInterfaces: Network interfaces to be ignored when deciding if the system is online.

- systemd.network.wait-online.timeout: Time to wait for the network to come online, in seconds. Set to 0 to disable.

- systemd.nspawn: Definition of systemd-nspawn configurations.
- systemd.oomd.enable: Whether to enable the `systemd-oomd` OOM killer.
- systemd.oomd.enableRootSlice: Whether to enable oomd on the root slice (`-.slice`).
- systemd.oomd.enableSystemSlice: Whether to enable oomd on the system slice (`system.slice`).
- systemd.oomd.enableUserServices: Alias of {option}`systemd.oomd.enableUserSlices`.
- systemd.oomd.enableUserSlices: Whether to enable oomd on all user slices (`user@.slice`) and all user owned slices.
- systemd.oomd.extraConfig: Alias of {option}`systemd.oomd.settings.OOM`.
- systemd.oomd.settings.OOM: Settings option for systemd-oomd.
See {manpage}`oomd.conf(5)` for available options.

- systemd.package: The systemd package to use.
- systemd.packages: Packages providing systemd units and hooks.
- systemd.paths: Definition of systemd path units; see {manpage}`systemd.path(5)`.
- systemd.repart.enable: Grow and add partitions to a partition table.
systemd-repart only works with GPT partition tables.

To run systemd-repart while in the initrd, see
`options.boot.initrd.systemd.repart.enable`.

- systemd.repart.partitions: Specify partitions as a set of the names of the definition files as the
key and the partition configuration as its value. The partition
configuration can use all upstream options. See {manpage}`repart.d(5)`
for all available options.

- systemd.services: Definition of systemd service units; see {manpage}`systemd.service(5)`.
- systemd.settings.Manager: Options for the global systemd service manager. See {manpage}`systemd-system.conf(5)` man page
for available options.

- systemd.shutdown: Definition of systemd shutdown executables.
For each `NAME = VALUE` pair of the attrSet, a link is generated from
`/etc/systemd/system-shutdown/NAME` to `VALUE`.

- systemd.shutdownRamfs.contents: Set of files that have to be linked into the shutdown ramfs
- systemd.shutdownRamfs.enable: Whether to enable pivoting back to an initramfs for shutdown.
- systemd.shutdownRamfs.shell.enable: Whether to enable a shell in the shutdown ramfs.

In contrast to `environment.shell.enable`, this option actually
strictly disables all shells in the shutdown ramfs because they're not
copied into it anymore. Paths that use a shell (e.g. via the `script`
option), will break if this option is set.

Only set this option if you're sure that you can recover from potential
issues.

- systemd.shutdownRamfs.storePaths: Store paths to copy into the shutdown ramfs as well.

- systemd.sleep.extraConfig: Extra config options for systemd sleep state logic.
See {manpage}`sleep.conf.d(5)` man page for available options.

- systemd.slices: Definition of slice configurations; see {manpage}`systemd.slice(5)`.
- systemd.sockets: Definition of systemd socket units; see {manpage}`systemd.socket(5)`.
- systemd.suppressedSystemUnits: A list of units to skip when generating system systemd configuration directory. This has
priority over upstream units, {option}`systemd.units`, and
{option}`systemd.additionalUpstreamSystemUnits`. The main purpose of this is to
prevent a upstream systemd unit from being added to the initrd with any modifications made to it
by other NixOS modules.

- systemd.sysupdate.enable: Atomically update the host OS, container images, portable service
images or other sources.

If enabled, updates are triggered in regular intervals via a
`systemd.timer` unit.

Please see {manpage}`systemd-sysupdate(8)` for more details.

- systemd.sysupdate.reboot.enable: Whether to automatically reboot after an update.

If set to `true`, the system will automatically reboot via a
`systemd.timer` unit but only after a new version was installed.

This uses a unit completely separate from the one performing the
update because it is typically advisable to download updates
regularly while the system is up, but delay reboots until the
appropriate time (i.e. typically at night).

Set this to `false` if you do not want to reboot after an update. This
is useful when you update a container image or another source where
rebooting is not necessary in order to finalize the update.

- systemd.sysupdate.reboot.timerConfig: The timer configuration for rebooting after an update.

By default, the upstream configuration is used:
<https://github.com/systemd/systemd/blob/main/units/systemd-sysupdate-reboot.timer>

- systemd.sysupdate.timerConfig: The timer configuration for performing the update.

By default, the upstream configuration is used:
<https://github.com/systemd/systemd/blob/main/units/systemd-sysupdate.timer>

- systemd.sysupdate.transfers: Specify transfers as a set of the names of the transfer files as the
key and the configuration as its value. The configuration can use all
upstream options. See {manpage}`sysupdate.d(5)`
for all available options.

- systemd.sysusers.enable: If enabled, users are created with systemd-sysusers instead of with
the custom `update-users-groups.pl` script.

Note: This is experimental.

- systemd.targets: Definition of systemd target units; see {manpage}`systemd.target(5)`
- systemd.timers: Definition of systemd timer units; see {manpage}`systemd.timer(5)`.
- systemd.tmpfiles.packages: List of packages containing {command}`systemd-tmpfiles` rules.

All files ending in .conf found in
{file}`«pkg»/lib/tmpfiles.d`
will be included.
If this folder does not exist or does not contain any files an error will be returned instead.

If a {file}`lib` output is available, rules are searched there and only there.
If there is no {file}`lib` output it will fall back to {file}`out`
and if that does not exist either, the default output will be used.

- systemd.tmpfiles.rules: Rules for creation, deletion and cleaning of volatile and temporary files
automatically. See
{manpage}`tmpfiles.d(5)`
for the exact format.

- systemd.tmpfiles.settings: Declare systemd-tmpfiles rules to create, delete, and clean up volatile
and temporary files and directories.

Even though the service is called `*tmp*files` you can also create
persistent files.

- systemd.tpm2.enable: Whether to enable systemd TPM2 support.
- systemd.units: Definition of systemd units; see {manpage}`systemd.unit(5)`.
- systemd.user.extraConfig: Extra config options for systemd user instances. See {manpage}`systemd-user.conf(5)` for
available options.

- systemd.user.generators: Definition of systemd generators; see {manpage}`systemd.generator(5)`.

For each `NAME = VALUE` pair of the attrSet, a link is generated from
`/etc/systemd/user-generators/NAME` to `VALUE`.

- systemd.user.paths: Definition of systemd per-user path units.
- systemd.user.services: Definition of systemd per-user service units.
- systemd.user.slices: Definition of systemd per-user slice units.
- systemd.user.sockets: Definition of systemd per-user socket units.
- systemd.user.targets: Definition of systemd per-user target units.
- systemd.user.timers: Definition of systemd per-user timer units.
- systemd.user.tmpfiles.enable: Whether to enable systemd user units systemd-tmpfiles-setup.service and systemd-tmpfiles-clean.timer.
- systemd.user.tmpfiles.rules: Global user rules for creation, deletion and cleaning of volatile and
temporary files automatically. See
{manpage}`tmpfiles.d(5)`
for the exact format.

- systemd.user.tmpfiles.users: Per-user rules for creation, deletion and cleaning of volatile and
temporary files automatically.

- systemd.user.units: Definition of systemd per-user units.
- systemd.watchdog.device: Alias of {option}`systemd.settings.Manager.WatchdogDevice`.
- systemd.watchdog.kexecTime: Alias of {option}`systemd.settings.Manager.KExecWatchdogSec`.
- systemd.watchdog.rebootTime: Alias of {option}`systemd.settings.Manager.RebootWatchdogSec`.
- systemd.watchdog.runtimeTime: Alias of {option}`systemd.settings.Manager.RuntimeWatchdogSec`.
- time.hardwareClockInLocalTime: If set, keep the hardware clock in local time instead of UTC.
- time.timeZone: The time zone used when displaying times and dates. See <https://en.wikipedia.org/wiki/List_of_tz_database_time_zones>
for a comprehensive list of possible values for this setting.

If null, the timezone will default to UTC and can be set imperatively
using timedatectl.

- users.allowNoPasswordLogin: Disable checking that at least the `root` user or a user in the `wheel` group can log in using
a password or an SSH key.

WARNING: enabling this can lock you out of your system. Enable this only if you know what are you doing.

- users.defaultUserHome: The default home directory for normal users.

- users.defaultUserShell: This option defines the default shell assigned to user
accounts. This can be either a full system path or a shell package.

This must not be a store path, since the path is
used outside the store (in particular in /etc/passwd).

- users.enforceIdUniqueness: Whether to require that no two users/groups share the same uid/gid.

- users.extraGroups: Alias of {option}`users.groups`.
- users.extraUsers: Alias of {option}`users.users`.
- users.groups: Additional groups to be created automatically by the system.

- users.ldap.base: The distinguished name of the search base.
- users.ldap.bind.distinguishedName: The distinguished name to bind to the LDAP server with. If this
is not specified, an anonymous bind will be done.

- users.ldap.bind.password: Alias of {option}`users.ldap.bind.passwordFile`.
- users.ldap.bind.passwordFile: The path to a file containing the credentials to use when binding
to the LDAP server (if not binding anonymously).

- users.ldap.bind.policy: Specifies the policy to use for reconnecting to an unavailable
LDAP server. The default is `hard_open`, which
reconnects if opening the connection to the directory server
failed. By contrast, `hard_init` reconnects if
initializing the connection failed. Initializing may not
actually contact the directory server, and it is possible that
a malformed configuration file will trigger reconnection. If
`soft` is specified, then
`nss_ldap` will return immediately on server
failure. All hard reconnect policies block with exponential
backoff before retrying.

- users.ldap.bind.timeLimit: Specifies the time limit (in seconds) to use when connecting
to the directory server. This is distinct from the time limit
specified in {option}`users.ldap.timeLimit` and affects
the initial server connection only.

- users.ldap.daemon.enable: Whether to let the nslcd daemon (nss-pam-ldapd) handle the
LDAP lookups for NSS and PAM. This can improve performance,
and if you need to bind to the LDAP server with a password,
it increases security, since only the nslcd user needs to
have access to the bindpw file, not everyone that uses NSS
and/or PAM. If this option is enabled, a local nscd user is
created automatically, and the nslcd service is started
automatically when the network get up.

- users.ldap.daemon.extraConfig: Extra configuration options that will be added verbatim at
the end of the nslcd configuration file ({manpage}`nslcd.conf(5)`).

- users.ldap.daemon.rootpwmoddn: The distinguished name to use to bind to the LDAP server
when the root user tries to modify a user's password.

- users.ldap.daemon.rootpwmodpwFile: The path to a file containing the credentials with which to bind to
the LDAP server if the root user tries to change a user's password.

- users.ldap.enable: Whether to enable authentication against an LDAP server.
- users.ldap.extraConfig: Extra configuration options that will be added verbatim at
the end of the ldap configuration file ({manpage}`ldap.conf(5)`).
If {option}`users.ldap.daemon` is enabled, this
configuration will not be used. In that case, use
{option}`users.ldap.daemon.extraConfig` instead.

- users.ldap.loginPam: Whether to include authentication against LDAP in login PAM.
- users.ldap.nsswitch: Whether to include lookup against LDAP in NSS.
- users.ldap.server: The URL of the LDAP server.
- users.ldap.timeLimit: Specifies the time limit (in seconds) to use when performing
searches. A value of zero (0), which is the default, is to
wait indefinitely for searches to be completed.

- users.ldap.useTLS: If enabled, use TLS (encryption) over an LDAP (port 389)
connection.  The alternative is to specify an LDAPS server (port
636) in {option}`users.ldap.server` or to forego
security.

- users.main.description: GECOS/real name for the primary user.
- users.main.gid: GID for the main user's primary group.
- users.main.group: Primary group name for the main user (defaults to users.main.name).
- users.main.hashedPassword: Shadow-compatible password hash for the primary user (use mkpasswd -m sha-512).
- users.main.name: Primary (login) user name used across the system.
- users.main.opensshAuthorizedKeys: Authorized SSH public keys for the primary user.
- users.main.uid: UID for the primary user.
- users.motd: Message of the day shown to users when they log in.
- users.motdFile: A file containing the message of the day shown to users when they log in.
- users.mutableUsers: If set to `true`, you are free to add new users and groups to the system
with the ordinary `useradd` and
`groupadd` commands. On system activation, the
existing contents of the `/etc/passwd` and
`/etc/group` files will be merged with the
contents generated from the `users.users` and
`users.groups` options.
The initial password for a user will be set
according to `users.users`, but existing passwords
will not be changed.

::: {.warning}
If set to `false`, the contents of the user and
group files will simply be replaced on system activation. This also
holds for the user passwords; all changed
passwords will be reset according to the
`users.users` configuration on activation.
:::

- users.mysql.database: The name of the database containing the users
- users.mysql.enable: Whether to enable authentication against a MySQL/MariaDB database.
- users.mysql.host: The hostname of the MySQL/MariaDB server
- users.mysql.nss: Settings for `libnss-mysql`.

All examples are from the [minimal example](https://github.com/saknopper/libnss-mysql/tree/master/sample/minimal)
of `libnss-mysql`, but they are modified with NixOS paths for bash.

- users.mysql.pam: Settings for `pam_mysql`
- users.mysql.passwordFile: The path to the file containing the password for the user
- users.mysql.user: The username to use when connecting to the database
- users.users: Additional user accounts to be created automatically by the system.
This can also be used to set options for root.

- virtualisation.appvm.enable: This enables AppVMs and related virtualisation settings.

- virtualisation.appvm.user: AppVM user login. Currently only AppVMs are supported for a single user only.

- virtualisation.containerd.args: extra args to append to the containerd cmdline
- virtualisation.containerd.configFile: Path to containerd config file.
Setting this option will override any configuration applied by the settings option.

- virtualisation.containerd.enable: Whether to enable containerd container runtime.
- virtualisation.containerd.settings: Verbatim lines to add to containerd.toml

- virtualisation.containers.cdi.dynamic.nvidia.enable: Alias of {option}`hardware.nvidia-container-toolkit.enable`.
- virtualisation.containers.containersConf.cniPlugins: CNI plugins to install on the system.

- virtualisation.containers.containersConf.settings: containers.conf configuration
- virtualisation.containers.enable: This option enables the common /etc/containers configuration module.

- virtualisation.containers.ociSeccompBpfHook.enable: Enable the OCI seccomp BPF hook
- virtualisation.containers.policy: Signature verification policy file.
If this option is empty the default policy file from
`skopeo` will be used.

- virtualisation.containers.registries.block: List of blocked repositories.

- virtualisation.containers.registries.insecure: List of insecure repositories.

- virtualisation.containers.registries.search: List of repositories to search.

- virtualisation.containers.storage.settings: storage.conf configuration
- virtualisation.cri-o.enable: Whether to enable Container Runtime Interface for OCI (CRI-O).
- virtualisation.cri-o.extraPackages: Extra packages to be installed in the CRI-O wrapper.

- virtualisation.cri-o.logLevel: Log level to be used
- virtualisation.cri-o.networkDir: Override the network_dir option.
- virtualisation.cri-o.package: The final CRI-O package (including extra packages).

- virtualisation.cri-o.pauseCommand: Override the default pause command
- virtualisation.cri-o.pauseImage: Override the default pause image for pod sandboxes
- virtualisation.cri-o.runtime: Override the default runtime
- virtualisation.cri-o.settings: Configuration for cri-o, see
<https://github.com/cri-o/cri-o/blob/master/docs/crio.conf.5.md>.

- virtualisation.cri-o.storageDriver: Storage driver to be used
- virtualisation.diskSize: The disk size in MiB (1024×1024 bytes) of the virtual machine.

- virtualisation.diskSizeAutoSupported: Whether the current image builder or vm runner supports `virtualisation.diskSize = "auto".`

- virtualisation.docker.autoPrune.dates: Specification (in the format described by
{manpage}`systemd.time(7)`) of the time at
which the prune will occur.

- virtualisation.docker.autoPrune.enable: Whether to periodically prune Docker resources. If enabled, a
systemd timer will run `docker system prune -f`
as specified by the `dates` option.

- virtualisation.docker.autoPrune.flags: Any additional flags passed to {command}`docker system prune`.

- virtualisation.docker.autoPrune.persistent: Takes a boolean argument. If true, the time when the service
unit was last triggered is stored on disk. When the timer is
activated, the service unit is triggered immediately if it
would have been triggered at least once during the time when
the timer was inactive. Such triggering is nonetheless
subject to the delay imposed by RandomizedDelaySec=. This is
useful to catch up on missed runs of the service when the
system was powered down.

- virtualisation.docker.autoPrune.randomizedDelaySec: Add a randomized delay before each auto prune.
The delay will be chosen between zero and this value.
This value must be a time span in the format specified by
{manpage}`systemd.time(7)`

- virtualisation.docker.daemon.settings: Configuration for docker daemon. The attributes are serialized to JSON used as daemon.conf.
See <https://docs.docker.com/engine/reference/commandline/dockerd/#daemon-configuration-file>

- virtualisation.docker.enable: This option enables docker, a daemon that manages
linux containers. Users in the "docker" group can interact with
the daemon (e.g. to start or stop containers) using the
{command}`docker` command line tool.

- virtualisation.docker.enableNvidia: **Deprecated**, please use hardware.nvidia-container-toolkit.enable instead.

Enable Nvidia GPU support inside docker containers.

- virtualisation.docker.enableOnBoot: When enabled dockerd is started on boot. This is required for
containers which are created with the
`--restart=always` flag to work. If this option is
disabled, docker might be started on demand by socket activation.

- virtualisation.docker.extraOptions: The extra command-line options to pass to
{command}`docker` daemon.

- virtualisation.docker.extraPackages: Extra packages to add to PATH for the docker daemon process.

- virtualisation.docker.listenOptions: A list of unix and tcp docker should listen to. The format follows
ListenStream as described in {manpage}`systemd.socket(5)`.

- virtualisation.docker.liveRestore: Alias of {option}`virtualisation.docker.daemon.settings.live-restore`.
- virtualisation.docker.logDriver: This option determines which Docker log driver to use.

- virtualisation.docker.package: The docker package to use.
- virtualisation.docker.rootless.daemon.settings: Configuration for docker daemon. The attributes are serialized to JSON used as daemon.conf.
See <https://docs.docker.com/engine/reference/commandline/dockerd/#daemon-configuration-file>

- virtualisation.docker.rootless.enable: This option enables docker in a rootless mode, a daemon that manages
linux containers. To interact with the daemon, one needs to set
{command}`DOCKER_HOST=unix://$XDG_RUNTIME_DIR/docker.sock`.

- virtualisation.docker.rootless.extraPackages: Extra packages to add to PATH for the docker daemon process.

- virtualisation.docker.rootless.package: The docker package to use.
- virtualisation.docker.rootless.setSocketVariable: Point {command}`DOCKER_HOST` to rootless Docker instance for
normal users by default.

- virtualisation.docker.socketActivation
- virtualisation.docker.storageDriver: This option determines which Docker
[storage driver](https://docs.docker.com/storage/storagedriver/select-storage-driver/)
to use.
By default it lets docker automatically choose the preferred storage
driver.
However, it is recommended to specify a storage driver explicitly, as
docker's default varies over versions.

::: {.warning}
Changing the storage driver will cause any existing containers
and images to become inaccessible.
:::

- virtualisation.growPartition: Alias of {option}`boot.growPartition`.
- virtualisation.hypervGuest.enable: Whether to enable Hyper-V Guest Support.
- virtualisation.hypervGuest.videoMode
- virtualisation.incus.agent.enable: Whether to enable Incus agent.
- virtualisation.incus.clientPackage: The incus client package to use. This package is added to PATH.
- virtualisation.incus.enable: Whether to enable incusd, a daemon that manages containers and virtual machines.

Users in the "incus-admin" group can interact with
the daemon (e.g. to start or stop containers) using the
{command}`incus` command line tool, among others.
Users in the "incus" group can also interact with
the daemon, but with lower permissions
(i.e. administrative operations are forbidden).
.
- virtualisation.incus.lxcPackage: The lxc package to use.
- virtualisation.incus.package: The incus-lts package to use.
- virtualisation.incus.preseed: Configuration for Incus preseed, see
<https://linuxcontainers.org/incus/docs/main/howto/initialize/#non-interactive-configuration>
for supported values.

Changes to this will be re-applied to Incus which will overwrite existing entities or create missing ones,
but entities will *not* be removed by preseed.

- virtualisation.incus.socketActivation: Whether to enable socket-activation for starting incus.service. Enabling this option
will stop incus.service from starting automatically on boot.
.
- virtualisation.incus.softDaemonRestart: Allow for incus.service to be stopped without affecting running instances.

- virtualisation.incus.startTimeout: Time to wait (in seconds) for incusd to become ready to process requests.
If incusd does not reply within the configured time, `incus.service` will be
considered failed and systemd will attempt to restart it.

- virtualisation.incus.ui.enable: Whether to enable Incus Web UI.
- virtualisation.incus.ui.package: The incus-ui-canonical package to use.
- virtualisation.kvmgt.device: PCI ID of graphics card. You can figure it with {command}`ls /sys/class/mdev_bus`.
- virtualisation.kvmgt.enable: Whether to enable KVMGT (iGVT-g) VGPU support. Allows Qemu/KVM guests to share host's Intel integrated graphics card.
Currently only one graphical device can be shared. To allow users to access the device without root add them
to the kvm group: `users.extraUsers.<yourusername>.extraGroups = [ "kvm" ];`
.
- virtualisation.kvmgt.vgpus: Virtual GPUs to be used in Qemu. You can find devices via {command}`ls /sys/bus/pci/devices/*/mdev_supported_types`
and find info about device via {command}`cat /sys/bus/pci/devices/*/mdev_supported_types/i915-GVTg_V5_4/description`

- virtualisation.libvirtd.allowedBridges: List of bridge devices that can be used by qemu:///session

- virtualisation.libvirtd.enable: This option enables libvirtd, a daemon that manages
virtual machines. Users in the "libvirtd" group can interact with
the daemon (e.g. to start or stop VMs) using the
{command}`virsh` command line tool, among others.

- virtualisation.libvirtd.enableKVM
- virtualisation.libvirtd.extraConfig: Extra contents appended to the libvirtd configuration file,
libvirtd.conf.

- virtualisation.libvirtd.extraOptions: Extra command line arguments passed to libvirtd on startup.

- virtualisation.libvirtd.firewallBackend: The backend used to setup virtual network firewall rules.

- virtualisation.libvirtd.hooks: Hooks related options.

- virtualisation.libvirtd.nss: libvirt NSS module options.

- virtualisation.libvirtd.onBoot: Specifies the action to be done to / on the guests when the host boots.
The "start" option starts all guests that were running prior to shutdown
regardless of their autostart settings. The "ignore" option will not
start the formerly running guest on boot. However, any guest marked as
autostart will still be automatically started by libvirtd.

- virtualisation.libvirtd.onShutdown: When shutting down / restarting the host what method should
be used to gracefully halt the guests. Setting to "shutdown"
will cause an ACPI shutdown of each guest. "suspend" will
attempt to save the state of the guests ready to restore on boot.

- virtualisation.libvirtd.package: The libvirt package to use.
- virtualisation.libvirtd.parallelShutdown: Number of guests that will be shutdown concurrently, taking effect when onShutdown
is set to "shutdown". If set to 0, guests will be shutdown one after another.
Number of guests on shutdown at any time will not exceed number set in this
variable.

- virtualisation.libvirtd.qemu: QEMU related options.

- virtualisation.libvirtd.qemuOvmf
- virtualisation.libvirtd.qemuOvmfPackage
- virtualisation.libvirtd.qemuPackage: Alias of {option}`virtualisation.libvirtd.qemu.package`.
- virtualisation.libvirtd.qemuRunAsRoot: Alias of {option}`virtualisation.libvirtd.qemu.runAsRoot`.
- virtualisation.libvirtd.qemuSwtpm: Alias of {option}`virtualisation.libvirtd.qemu.swtpm.enable`.
- virtualisation.libvirtd.qemuVerbatimConfig: Alias of {option}`virtualisation.libvirtd.qemu.verbatimConfig`.
- virtualisation.libvirtd.shutdownTimeout: Number of seconds we're willing to wait for a guest to shut down.
If parallel shutdown is enabled, this timeout applies as a timeout
for shutting down all guests on a single URI defined in the variable URIS.
If this is 0, then there is no time out (use with caution, as guests might not
respond to a shutdown request).

- virtualisation.libvirtd.sshProxy: Whether to configure OpenSSH to use the [SSH Proxy](https://libvirt.org/ssh-proxy.html).

- virtualisation.libvirtd.startDelay: Number of seconds to wait between each guest start.
If set to 0, all guests will start up in parallel.

- virtualisation.lxc.bridgeConfig: This is the config file for override lxc-net bridge default settings.

- virtualisation.lxc.defaultConfig: Default config (default.conf) for new containers, i.e. for
network config. See {manpage}`lxc.container.conf(5)`.

- virtualisation.lxc.enable: This enables Linux Containers (LXC), which provides tools
for creating and managing system or application containers
on Linux.

- virtualisation.lxc.lxcfs.enable: This enables LXCFS, a FUSE filesystem for LXC.
To use lxcfs in include the following configuration in your
container configuration:
```
virtualisation.lxc.defaultConfig = "lxc.include = ${pkgs.lxcfs}/share/lxc/config/common.conf.d/00-lxcfs.conf";
```

- virtualisation.lxc.package: The lxc package to use.
- virtualisation.lxc.systemConfig: This is the system-wide LXC config. See
{manpage}`lxc.system.conf(5)`.

- virtualisation.lxc.unprivilegedContainers: Whether to enable support for unprivileged users to launch containers.
- virtualisation.lxc.usernetConfig: This is the config file for managing unprivileged user network
administration access in LXC. See {manpage}`lxc-usernet(5)`.

- virtualisation.lxd
- virtualisation.multipass.enable: Whether to enable Multipass, a simple manager for virtualised Ubuntu instances.
- virtualisation.multipass.logLevel: The logging verbosity of the multipassd binary.

- virtualisation.multipass.package: The multipass package to use.
- virtualisation.oci-containers.backend: The underlying Docker implementation to use.
- virtualisation.oci-containers.containers: OCI (Docker) containers to run as systemd services.
- virtualisation.podman.autoPrune.dates: Specification (in the format described by
{manpage}`systemd.time(7)`) of the time at
which the prune will occur.

- virtualisation.podman.autoPrune.enable: Whether to periodically prune Podman resources. If enabled, a
systemd timer will run `podman system prune -f`
as specified by the `dates` option.

- virtualisation.podman.autoPrune.flags: Any additional flags passed to {command}`podman system prune`.

- virtualisation.podman.defaultNetwork.dnsname
- virtualisation.podman.defaultNetwork.extraPlugins
- virtualisation.podman.defaultNetwork.settings: Settings for podman's default network.

- virtualisation.podman.dockerCompat: Create an alias mapping {command}`docker` to {command}`podman`.

- virtualisation.podman.dockerSocket.enable: Make the Podman socket available in place of the Docker socket, so
Docker tools can find the Podman socket.

Podman implements the Docker API.

Users must be in the `podman` group in order to connect. As
with Docker, members of this group can gain root access.

- virtualisation.podman.enable: This option enables Podman, a daemonless container engine for
developing, managing, and running OCI Containers on your Linux System.

It is a drop-in replacement for the {command}`docker` command.

- virtualisation.podman.enableNvidia: **Deprecated**, please use hardware.nvidia-container-toolkit.enable instead.

Enable use of Nvidia GPUs from within podman containers.

- virtualisation.podman.extraPackages: Extra dependencies for podman to be placed on $PATH in the wrapper.

- virtualisation.podman.extraRuntimes: Extra runtime packages to be installed in the Podman wrapper.
Those are then placed in libexec/podman, i.e. are seen as podman internal commands.

- virtualisation.podman.networkSocket.enable: Make the Podman and Docker compatibility API available over the network
with TLS client certificate authentication.

This allows Docker clients to connect with the equivalents of the Docker
CLI `-H` and `--tls*` family of options.

For certificate setup, see <https://docs.docker.com/engine/security/protect-access/>

This option is independent of [](#opt-virtualisation.podman.dockerSocket.enable).

- virtualisation.podman.networkSocket.listenAddress: Interface address for receiving TLS connections.

- virtualisation.podman.networkSocket.openFirewall: Whether to open the port in the firewall.

- virtualisation.podman.networkSocket.port: TCP port number for receiving TLS connections.

- virtualisation.podman.networkSocket.server: Choice of TLS proxy server.

- virtualisation.podman.networkSocket.tls.cacert: Path to CA certificate to use for client authentication.

- virtualisation.podman.networkSocket.tls.cert: Path to certificate describing the server.

- virtualisation.podman.networkSocket.tls.key: Path to the private key corresponding to the server certificate.

Use a string for this setting. Otherwise it will be copied to the Nix
store first, where it is readable by any system process.

- virtualisation.podman.package: The podman package to use. This package will automatically include extra packages and runtimes.

- virtualisation.rkt
- virtualisation.rosetta.enable: Whether to enable [Rosetta](https://developer.apple.com/documentation/apple-silicon/about-the-rosetta-translation-environment) support.

This feature requires the system to be a virtualised guest on an Apple silicon host.

The default settings are suitable for the [UTM](https://docs.getutm.app/) virtualisation [package](https://search.nixos.org/packages?channel=unstable&show=utm&from=0&size=1&sort=relevance&type=packages&query=utm).
Make sure to select 'Apple Virtualization' as the virtualisation engine and then tick the 'Enable Rosetta' option.

- virtualisation.rosetta.mountPoint: The mount point for the Rosetta runtime inside the guest system.

The proprietary runtime is exposed through a VirtioFS directory share and then mounted at this directory.

- virtualisation.rosetta.mountTag: The VirtioFS mount tag for the Rosetta runtime, exposed by the host's virtualisation software.

If supported, your virtualisation software should provide instructions on how register the Rosetta runtime inside Linux guests.
These instructions should mention the name of the mount tag used for the VirtioFS directory share that contains the Rosetta runtime.

- virtualisation.spiceUSBRedirection.enable: Install the SPICE USB redirection helper with setuid
privileges. This allows unprivileged users to pass USB devices
connected to this machine to libvirt VMs, both local and
remote. Note that this allows users arbitrary access to USB
devices.

- virtualisation.virtualbox.guest.clipboard: Whether to enable clipboard support.
- virtualisation.virtualbox.guest.dragAndDrop: Whether to enable drag and drop support.
- virtualisation.virtualbox.guest.draganddrop: Alias of {option}`virtualisation.virtualbox.guest.dragAndDrop`.
- virtualisation.virtualbox.guest.enable: Whether to enable the VirtualBox service and other guest additions.
- virtualisation.virtualbox.guest.seamless: Whether to enable seamless mode. When activated windows from the guest appear next to the windows of the host.
- virtualisation.virtualbox.guest.vboxsf: Whether to load vboxsf
- virtualisation.virtualbox.guest.verbose: Whether to verbose logging for guest services.
- virtualisation.virtualbox.host.addNetworkInterface: Automatically set up a vboxnet0 host-only network interface.

- virtualisation.virtualbox.host.enable: Whether to enable VirtualBox.

::: {.note}
In order to pass USB devices from the host to the guests, the user
needs to be in the `vboxusers` group.
:::

- virtualisation.virtualbox.host.enableExtensionPack: Whether to install the Oracle Extension Pack for VirtualBox.

::: {.important}
You must set `nixpkgs.config.allowUnfree = true` in
order to use this.  This requires you accept the VirtualBox PUEL.
:::

- virtualisation.virtualbox.host.enableHardening: Enable hardened VirtualBox, which ensures that only the binaries in the
system path get access to the devices exposed by the kernel modules
instead of all users in the vboxusers group.

::: {.important}
Disabling this can put your system's security at risk, as local users
in the vboxusers group can tamper with the VirtualBox device files.
:::

- virtualisation.virtualbox.host.enableKvm: Enable KVM support for VirtualBox. This increases compatibility with Linux kernel versions, because the VirtualBox kernel modules
are not required.

This option is incompatible with `addNetworkInterface`.

Note: This is experimental. Please check <https://github.com/cyberus-technology/virtualbox-kvm/issues>.

- virtualisation.virtualbox.host.enableWebService: Build VirtualBox web service tool (vboxwebsrv) to allow managing VMs via other webpage frontend tools. Useful for headless servers.

- virtualisation.virtualbox.host.headless: Use VirtualBox installation without GUI and Qt dependency. Useful to enable on servers
and when virtual machines are controlled only via SSH.

- virtualisation.virtualbox.host.package: The virtualbox package to use.
- virtualisation.vmVariant: Machine configuration to be added for the vm script produced by `nixos-rebuild build-vm`.

- virtualisation.vmVariantWithBootLoader: Machine configuration to be added for the vm script produced by `nixos-rebuild build-vm-with-bootloader`.

- virtualisation.vmware.guest.enable: Whether to enable VMWare Guest Support.
- virtualisation.vmware.guest.headless: Whether to disable X11-related features.
- virtualisation.vmware.guest.package: Package providing open-vm-tools.
- virtualisation.vmware.host.enable: This enables VMware host virtualisation for running VMs.

::: {.important}
`vmware-vmx` will cause kcompactd0 due to
`Transparent Hugepages` feature in kernel.
Apply `[ "transparent_hugepage=never" ]` in
option {option}`boot.kernelParams` to disable them.
:::

::: {.note}
If that didn't work disable `TRANSPARENT_HUGEPAGE`,
`COMPACTION` configs and recompile kernel.
:::

- virtualisation.vmware.host.extraConfig: Add extra config to /etc/vmware/config
- virtualisation.vmware.host.extraPackages: Extra packages to be used with VMware host.
- virtualisation.vmware.host.package: The vmware-workstation package to use.
- virtualisation.vswitch.enable: Whether to enable Open vSwitch. A configuration daemon (ovs-server)
will be started.

- virtualisation.vswitch.ipsec
- virtualisation.vswitch.package: The openvswitch package to use.
- virtualisation.vswitch.resetOnStart: Whether to reset the Open vSwitch configuration database to a default
configuration on every start of the systemd `ovsdb.service`.

- virtualisation.waydroid.enable: Whether to enable Waydroid.
- virtualisation.waydroid.package: The waydroid package to use.
- virtualisation.xen.boot.bios.path: Path to the Xen `multiboot` binary used for BIOS booting.
Unless you're building your own Xen derivation, you should leave this
option as the default value.

- virtualisation.xen.boot.builderVerbosity: The boot entry builder script should be called with exactly one of the following arguments in order to specify its verbosity:

- `quiet` supresses all messages.

- `default` adds a simple "Installing Xen Project Hypervisor boot entries...done." message to the script.

- `info` is the same as `default`, but it also prints a diff with information on which generations were altered.
  - This option adds two extra dependencies to the script: `diffutils` and `bat`.

- `debug` prints information messages for every single step of the script.

This option does not alter the actual functionality of the script, just the number of messages printed when rebuilding the system.

- virtualisation.xen.boot.efi.path: Path to xen.efi. `pkgs.xen` is patched to install the xen.efi file
on `$boot/boot/xen.efi`, but an unpatched Xen build may install it
somewhere else, such as `$out/boot/efi/efi/nixos/xen.efi`. Unless
you're building your own Xen derivation, you should leave this
option as the default value.

- virtualisation.xen.boot.params: Xen Command Line parameters passed to Domain 0 at boot time.
Note: these are different from `boot.kernelParams`. See
the [Xen documentation](https://xenbits.xenproject.org/docs/unstable/misc/xen-command-line.html) for more information.

- virtualisation.xen.bootParams: Alias of {option}`virtualisation.xen.boot.params`.
- virtualisation.xen.bridge.address
- virtualisation.xen.bridge.forwardDns
- virtualisation.xen.bridge.name
- virtualisation.xen.bridge.prefixLength
- virtualisation.xen.debug: Whether to enable Xen debug features for Domain 0. This option enables some hidden debugging tests and features, and should not be used in production.
- virtualisation.xen.dom0Resources.maxMemory: Maximum amount of memory (in MiB) that Domain 0 can
dynamically allocate to itself. Does nothing if set
to the same amount as virtualisation.xen.memory, or
if that option is set to 0.

- virtualisation.xen.dom0Resources.maxVCPUs: Amount of virtual CPU cores allocated to Domain 0 on boot.
If set to 0, all cores are assigned to Domain 0, and
unprivileged domains will compete with Domain 0 for CPU time.

- virtualisation.xen.dom0Resources.memory: Amount of memory (in MiB) allocated to Domain 0 on boot.
If set to 0, all memory is assigned to Domain 0, and
unprivileged domains will compete with Domain 0 for free RAM.

- virtualisation.xen.domains.extraConfig: Options defined here will override the defaults for xendomains.
The default options can be seen in the file included from
/etc/default/xendomains.

- virtualisation.xen.efi.bootBuilderVerbosity: Alias of {option}`virtualisation.xen.boot.builderVerbosity`.
- virtualisation.xen.efi.path: Alias of {option}`virtualisation.xen.boot.efi.path`.
- virtualisation.xen.enable: Whether to enable the Xen Project Hypervisor, a virtualisation technology defined as a *type-1 hypervisor*, which allows multiple virtual machines, known as *domains*, to run concurrently on the physical machine. NixOS runs as the privileged *Domain 0*. This option requires a reboot into a Xen kernel to take effect.
- virtualisation.xen.package: The Xen Hypervisor package to use.
- virtualisation.xen.package-qemu: Alias of {option}`virtualisation.xen.qemu.package`.
- virtualisation.xen.qemu.package: The QEMU (with Xen Hypervisor support) package to use.
- virtualisation.xen.qemu.pidFile: Path to the QEMU PID file.
- virtualisation.xen.qemu-package: Alias of {option}`virtualisation.xen.qemu.package`.
- virtualisation.xen.store
- virtualisation.xen.stored: Alias of {option}`virtualisation.xen.store.path`.
- virtualisation.xen.trace: Whether to enable Xen debug tracing and logging for Domain 0.
- warnings: This option allows modules to show warnings to users during
the evaluation of the system configuration.

- xdg.autostart.enable: Whether to install files to support the
[XDG Autostart specification](https://specifications.freedesktop.org/autostart-spec/latest).

- xdg.icons.enable: Whether to install files to support the
[XDG Icon Theme specification](https://specifications.freedesktop.org/icon-theme-spec/latest).

- xdg.icons.fallbackCursorThemes: Names of the fallback cursor themes, in order of preference, to be used when no other icon source can be found.
Set to `[]` to disable the fallback entirely.

- xdg.menus.enable: Whether to install files to support the
[XDG Desktop Menu specification](https://specifications.freedesktop.org/menu-spec/latest).

- xdg.mime.addedAssociations: Adds associations between mimetypes and applications. See the
[
specifications](https://specifications.freedesktop.org/mime-apps-spec/latest/associations) for more information.

- xdg.mime.defaultApplications: Sets the default applications for given mimetypes. See the
[
specifications](https://specifications.freedesktop.org/mime-apps-spec/latest/default) for more information.

- xdg.mime.enable: Whether to install files to support the
[XDG Shared MIME-info specification](https://specifications.freedesktop.org/shared-mime-info-spec/latest) and the
[XDG MIME Applications specification](https://specifications.freedesktop.org/mime-apps-spec/latest).

- xdg.mime.removedAssociations: Removes associations between mimetypes and applications. See the
[
specifications](https://specifications.freedesktop.org/mime-apps-spec/latest/associations) for more information.

- xdg.portal.config: Sets which portal backend should be used to provide the implementation
for the requested interface. For details check {manpage}`portals.conf(5)`.

Configs will be linked to `/etc/xdg/xdg-desktop-portal/` with the name `$desktop-portals.conf`
for `xdg.portal.config.$desktop` and `portals.conf` for `xdg.portal.config.common`
as an exception.

- xdg.portal.configPackages: List of packages that provide XDG desktop portal configuration, usually in
the form of `share/xdg-desktop-portal/$desktop-portals.conf`.

Note that configs in `xdg.portal.config` will be preferred if set.

- xdg.portal.enable: Whether to enable [xdg desktop integration](https://github.com/flatpak/xdg-desktop-portal).
- xdg.portal.extraPortals: List of additional portals to add to path. Portals allow interaction
with system, like choosing files or taking screenshots. At minimum,
a desktop portal implementation should be listed. GNOME and KDE already
adds `xdg-desktop-portal-gtk`; and
`xdg-desktop-portal-kde` respectively. On other desktop
environments you probably want to add them yourself.

- xdg.portal.gtkUsePortal
- xdg.portal.lxqt.enable: Whether to enable the desktop portal for the LXQt desktop environment.

This will add the `lxqt.xdg-desktop-portal-lxqt`
package (with the extra Qt styles) into the
{option}`xdg.portal.extraPortals` option
.
- xdg.portal.lxqt.styles: Extra Qt styles that will be available to the
`lxqt.xdg-desktop-portal-lxqt`.

- xdg.portal.wlr.enable: Whether to enable desktop portal for wlroots-based desktops.

This will add the `xdg-desktop-portal-wlr` package into
the {option}`xdg.portal.extraPortals` option, and provide the
configuration file
.
- xdg.portal.wlr.settings: Configuration for `xdg-desktop-portal-wlr`.

See {manpage}`xdg-desktop-portal-wlr(5)` for supported
values.

- xdg.portal.xdgOpenUsePortal: Sets environment variable `NIXOS_XDG_OPEN_USE_PORTAL` to `1`
This will make `xdg-open` use the portal to open programs, which resolves bugs involving
programs opening inside FHS envs or with unexpected env vars set from wrappers.
See [#160923](https://github.com/NixOS/nixpkgs/issues/160923) for more info.

- xdg.sounds.enable: Whether to install files to support the
[XDG Sound Theme specification](https://www.freedesktop.org/wiki/Specifications/sound-theme-spec/).

- xdg.terminal-exec.enable: Whether to enable xdg-terminal-exec, the [proposed](https://gitlab.freedesktop.org/xdg/xdg-specs/-/merge_requests/46) Default Terminal Execution Specification.
- xdg.terminal-exec.package: The xdg-terminal-exec package to use.
- xdg.terminal-exec.settings: Configuration options for the Default Terminal Execution Specification.

The keys are the desktop environments that are matched (case-insensitively) against `$XDG_CURRENT_DESKTOP`,
or `default` which is used when the current desktop environment is not found in the configuration.
The values are a list of terminals' [desktop file IDs](https://specifications.freedesktop.org/desktop-entry-spec/latest/ar01s02.html#desktop-file-id) to try in order of decreasing priority.

- zramSwap.algorithm: Compression algorithm. `lzo` has good compression,
but is slow. `lz4` has bad compression, but is fast.
`zstd` is both good compression and fast, but requires newer kernel.
You can check what other algorithms are supported by your zram device with
{command}`cat /sys/class/block/zram*/comp_algorithm`

- zramSwap.enable: Enable in-memory compressed devices and swap space provided by the zram
kernel module.
See [
  https://www.kernel.org/doc/Documentation/blockdev/zram.txt
](https://www.kernel.org/doc/Documentation/blockdev/zram.txt).

- zramSwap.memoryMax: Maximum total amount of memory (in bytes) that can be stored in the zram
swap devices. If set, the smaller one of this option and memoryPercent would
be used.
This doesn't define how much memory will be used by the zram swap devices.

- zramSwap.memoryPercent: Maximum total amount of memory that can be stored in the zram swap devices
(as a percentage of your total memory). Defaults to 1/2 of your total
RAM. Run `zramctl` to check how good memory is compressed.
This doesn't define how much memory will be used by the zram swap devices.

- zramSwap.numDevices
- zramSwap.priority: Priority of the zram swap devices. It should be a number higher than
the priority of your disk-based swap devices (so that the system will
fill the zram swap devices before falling back to disk swap).

- zramSwap.swapDevices: Number of zram devices to be used as swap, recommended is 1.

- zramSwap.writebackDevice: Write incompressible pages to this device,
as there's no gain from keeping them in RAM.

