# Fan stop capability – ASUS ROG Crosshair X870E Extreme

Источник: `sudo /etc/nixos/scripts/fan-stop-capability-test.sh` на хосте с Super-I/O `nct6799` (hwmon5).

## Результаты канала PWM → RPM

- `pwm1` → `fan1`: останавливается (0 RPM).
- `pwm2` → `fan2`: **не останавливается** (держит ≈375 RPM даже при 0%).
- `pwm3` → `fan3`: останавливается (0 RPM).
- `pwm4` → `fan4`: останавливается (0 RPM).
- `pwm5` → `fan5`: останавливается (0 RPM).
- `pwm6` → `fan6`: останавливается (0 RPM).
- `pwm7` → `fan7`: останавливается (0 RPM).

## Как применять в Nix конфигурации

- В `hardware.cooling.autoFancontrol` можно смело включать `allowStop = true;` — все каналы, кроме `pwm2`, могут держать 0 RPM. Для них же логично задать `minStartOverride = 120;`, чтобы гарантировать уверенный старт из нуля.
- Канал `pwm2` выдели под вентилятор/помпу, которому не нужен полный стоп (например, CPU_FAN или AIO). Для него оставь дефолтные `MIN_PWM=70`/`MINSTART`.
- Чтобы пару корпусовских вентиляторов реагировали на нагрев видеокарты, добавь `hardware.cooling.autoFancontrol.gpuPwmChannels = [ 3 4 ];` (или другие номера из списка выше); тогда скрипт сгенерирует привязку к датчику AMDGPU.

При появлении новой распиновки (другой ревизии платы) просто перезапусти скрипт и обнови таблицу.
